{"version":3,"sources":["webpack:///./src/components/shareFiles/detailShareFiles/detailShareFiles.vue?d9db","webpack:///src/components/shareFiles/detailShareFiles/detailShareFiles.vue","webpack:///./src/components/shareFiles/detailShareFiles/detailShareFiles.vue?f833","webpack:///./src/components/shareFiles/detailShareFiles/detailShareFiles.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isEnterprise","_v","on","$event","openDialog","$router","go","model","value","callback","$$v","uploadCompany","expression","getList","dialogVisible","slot","handleDelete","ref","ruleFormValue","$set","staticStyle","handleFileUpload","chooseFile","_s","file","name","onSubmit","directives","rawName","tableData","rowIndex","order","scopedSlots","_u","key","fn","row","getFileName","uploadProfile","_f","createTime","downloadFile","confirmDelete","id","total","page","pageIndex","pageSize","staticRenderFns","components","data","shareFilesId","selectedId","userId","listLoading","options","uploadPerson","rules","created","$route","params","methods","$refs","formName","validate","valid","formdata","append","createDate","str","replace","console","log","fileUrl","url","method","responseType","window","navigator","msSaveOrOpenBlob","newBlob","link","href","setAttribute","document","body","appendChild","click","remove","isIE","ua","indexOf","files","component"],"mappings":"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","file":"js/chunk-2d0b9df5.58e0e78f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[(_vm.isEnterprise>-1)?_c('el-breadcrumb-item',[_vm._v(\"内部资料\")]):_c('el-breadcrumb-item',[_vm._v(\"共享文件\")]),_c('el-breadcrumb-item',{staticClass:\"actived\"},[_vm._v(\"会议文件\")])],1)],1),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"iptBox\"},[_c('el-row',{staticClass:\"w-100\"},[_c('el-col',{attrs:{\"span\":3}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.openDialog=true}}},[_vm._v(\"上传文件\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"返回\")])],1),_c('el-col',{staticClass:\"margin-left-20 flex-center\",attrs:{\"span\":5}},[_c('div',{staticClass:\"inline-block-IE\"},[_vm._v(\"搜索\")]),_c('el-input',{staticClass:\"w-80 margin-left-10\",model:{value:(_vm.uploadCompany),callback:function ($$v) {_vm.uploadCompany=$$v},expression:\"uploadCompany\"}})],1),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.getList()}}},[_vm._v(\"搜索\")])],1)],1)],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"modal\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('span',[_c('i',{staticClass:\"el-icon-warning\"},[_vm._v(\" 你确定你要删除?\")])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":_vm.handleDelete}},[_vm._v(\"确认\")])],1)]),_c('el-dialog',{attrs:{\"visible\":_vm.openDialog,\"width\":\"60%\"},on:{\"update:visible\":function($event){_vm.openDialog=$event}}},[_c('el-row',[_c('el-col',{staticClass:\"margin-bottom-30 margin-left-30\",attrs:{\"span\":3}},[_vm._v(\"文件上传\")])],1),_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleFormValue,\"label-width\":\"100px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":7}},[_c('el-form-item',{attrs:{\"label\":\"上传单位\",\"prop\":\"uploadCompany\"}},[_c('el-input',{model:{value:(_vm.ruleFormValue.uploadCompany),callback:function ($$v) {_vm.$set(_vm.ruleFormValue, \"uploadCompany\", $$v)},expression:\"ruleFormValue.uploadCompany\"}})],1)],1),_c('el-col',{attrs:{\"span\":7}},[_c('el-form-item',{attrs:{\"label\":\"上传者\",\"prop\":\"uploadPerson\"}},[_c('el-input',{model:{value:(_vm.ruleFormValue.uploadPerson),callback:function ($$v) {_vm.$set(_vm.ruleFormValue, \"uploadPerson\", $$v)},expression:\"ruleFormValue.uploadPerson\"}})],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":15}},[_c('div',{staticClass:\"item margin-left-30\",staticStyle:{\"display\":\"flex\"}},[_c('div',{staticClass:\"item-label\",staticStyle:{\"margin-bottom\":\"20px\"}},[_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"file\"},on:{\"change\":function($event){return _vm.handleFileUpload()}}}),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.chooseFile()}}},[_vm._v(\"添加附件\")])],1),_c('div',{staticClass:\"item-value\",staticStyle:{\"margin-left\":\"10px\",\"display\":\"flex\",\"align-items\":\"center\",\"padding-bottom\":\"20px\"}},[(_vm.file)?_c('span',[_vm._v(_vm._s(_vm.file.name))]):_c('span',[_vm._v(\"请选择需要上传的文件...\")])])])])],1),_c('el-form-item',{staticClass:\"left-margin\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.onSubmit('ruleForm')}}},[_vm._v(\"添加\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":function($event){_vm.openDialog = false}}},[_vm._v(\"取消\")])],1)],1)],1),_c('el-container',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"row-class-name\":_vm.rowIndex,\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"formatter\":_vm.order,\"label\":\"序号\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"uploadProfile\",\"label\":\"文件名\",\"class-name\":\"text-center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(_vm._s(_vm.getFileName(row.uploadProfile)))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"修改时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(_vm._s(_vm._f(\"formatDate\")(row.createTime)))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"uploadCompany\",\"label\":\"上传单位\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"class-name\":\"text-center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.downloadFile(row.uploadProfile)}}},[_vm._v(\"下载\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.confirmDelete(row.id)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_c('div',{staticClass:\"pageBox\"},[_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total > 0),expression:\"total > 0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.page.pageIndex,\"limit\":_vm.page.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.page, \"pageIndex\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.page, \"pageSize\", $event)},\"pagination\":_vm.getList}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"title\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item v-if=\"isEnterprise>-1\">内部资料</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-else>共享文件</el-breadcrumb-item>\r\n        <el-breadcrumb-item class=\"actived\">会议文件</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    <div class=\"box\">\r\n      <div class=\"iptBox\">\r\n        <el-row class=\"w-100\">\r\n          <el-col :span=\"3\">\r\n            <el-button size=\"small\" type=\"primary\" v-on:click=\"openDialog=true\" plain>上传文件</el-button>\r\n            <el-button size=\"small\" type=\"warning\" v-on:click=\"$router.go(-1)\" plain>返回</el-button>\r\n          </el-col>\r\n          <el-col :span=\"5\" class=\"margin-left-20 flex-center\">\r\n            <div class=\"inline-block-IE\">搜索</div>\r\n            <el-input v-model=\"uploadCompany\" class=\"w-80 margin-left-10\"></el-input>\r\n          </el-col>\r\n          <el-col :span=\"2\">\r\n            <el-button size=\"small\" type=\"success\" v-on:click=\"getList()\" plain>搜索</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <el-dialog :visible.sync=\"dialogVisible\" width=\"30%\" modal>\r\n        <span>\r\n          <i class=\"el-icon-warning\">&nbsp;你确定你要删除?</i>\r\n        </span>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button size=\"small\" @click=\"dialogVisible = false\" type=\"primary\" plain>取消</el-button>\r\n          <el-button size=\"small\" @click=\"handleDelete\" type=\"success\" plain>确认</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <el-dialog :visible.sync=\"openDialog\" width=\"60%\">\r\n        <el-row>\r\n          <el-col :span=\"3\" class=\"margin-bottom-30 margin-left-30\">文件上传</el-col>\r\n        </el-row>\r\n        <el-form ref=\"ruleForm\" :model=\"ruleFormValue\" label-width=\"100px\">\r\n          <el-row>\r\n            <el-col :span=\"7\">\r\n              <el-form-item label=\"上传单位\" prop=\"uploadCompany\">\r\n                <el-input v-model=\"ruleFormValue.uploadCompany\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item label=\"上传者\" prop=\"uploadPerson\">\r\n                <el-input v-model=\"ruleFormValue.uploadPerson\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"15\">\r\n              <div class=\"item margin-left-30\" style=\"display:flex\">\r\n                <div class=\"item-label\" style=\"margin-bottom:20px;\">\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"file\"\r\n                    style=\"display: none\"\r\n                    ref=\"file\"\r\n                    v-on:change=\"handleFileUpload()\"\r\n                  />\r\n                  <el-button size=\"small\" type=\"warning\" plain @click=\"chooseFile()\">添加附件</el-button>\r\n                </div>\r\n                <div\r\n                  class=\"item-value\"\r\n                  style=\"margin-left:10px;\r\n                      display: flex;\r\n                      align-items: center;\r\n                      padding-bottom: 20px;\"\r\n                >\r\n                  <span v-if=\"file\">{{ file.name }}</span>\r\n                  <span v-else>请选择需要上传的文件...</span>\r\n                </div>\r\n              </div>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item class=\"left-margin\">\r\n            <el-button size=\"small\" @click=\"onSubmit('ruleForm')\" type=\"primary\" plain>添加</el-button>\r\n            <el-button size=\"small\" @click=\"openDialog = false\" type=\"warning\" plain>取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n      <el-container>\r\n        <el-table\r\n          :data=\"tableData\"\r\n          v-loading=\"listLoading\"\r\n          style=\"width: 100%\"\r\n          :row-class-name=\"rowIndex\"\r\n          highlight-current-row\r\n        >\r\n          <el-table-column :formatter=\"order\" label=\"序号\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"uploadProfile\" label=\"文件名\" class-name=\"text-center\">\r\n            <template slot-scope=\"{ row }\">{{ getFileName(row.uploadProfile) }}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"createTime\" label=\"修改时间\">\r\n            <template slot-scope=\"{ row }\">{{ row.createTime | formatDate }}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"uploadCompany\" label=\"上传单位\"></el-table-column>\r\n          <el-table-column label=\"操作\" class-name=\"text-center\">\r\n            <template slot-scope=\"{ row }\">\r\n              <el-button\r\n                size=\"small\"\r\n                type=\"success\"\r\n                plain\r\n                @click=\"downloadFile(row.uploadProfile)\"\r\n              >下载</el-button>\r\n              <el-button size=\"small\" type=\"danger\" plain @click=\"confirmDelete(row.id)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-container>\r\n      <div class=\"pageBox\">\r\n        <pagination\r\n          v-show=\"total > 0\"\r\n          :total=\"total\"\r\n          :page.sync=\"page.pageIndex\"\r\n          :limit.sync=\"page.pageSize\"\r\n          @pagination=\"getList\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport Storage from \"store\";\r\nimport Pagination from \"@/components/common/pagination\";\r\nimport Request from \"../../../services/api/request.js\";\r\nimport Auth from \"@/services/authentication/auth.js\";\r\nimport { Urls } from \"@/services/constants\";\r\n\r\nexport default {\r\n  name: \"workTask\",\r\n  components: { Pagination },\r\n  data() {\r\n    return {\r\n      isEnterprise: \"\",\r\n      openDialog: false,\r\n      dialogVisible: false,\r\n      uploadCompany: \"\",\r\n      shareFilesId: null,\r\n      selectedId: null,\r\n      userId: null,\r\n      page: {\r\n        pageIndex: 1,\r\n        pageSize: 20\r\n      },\r\n      listLoading: true,\r\n      total: 0,\r\n      tableData: [],\r\n      file: null,\r\n      options: [{ id: 0, name: \"不可见\" }, { id: 2, name: \"可见\" }],\r\n      ruleFormValue: {\r\n        uploadCompany: null,\r\n        uploadPerson: null\r\n      },\r\n      rules: {\r\n        uploadCompany: [\r\n          {\r\n            required: true,\r\n            message: \"请插入\",\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        uploadPerson: [\r\n          {\r\n            required: true,\r\n            message: \"请插入\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.isEnterprise = Storage.get(\"authData\").indexOf(\"ent\");\r\n    this.shareFilesId = this.$route.params.id;\r\n    this.getList();\r\n    this.userId = Auth().user().id;\r\n  },\r\n  methods: {\r\n    getList() {\r\n      this.listLoading = true;\r\n      Request()\r\n        .get(\"/api/shareFilesRecord/all\", {\r\n          uploadCompany: this.uploadCompany,\r\n          shareFilesId: this.shareFilesId,\r\n          pageNo: this.page.pageIndex - 1,\r\n          pageSize: this.page.pageSize,\r\n          sortBy: \"id\"\r\n        })\r\n        .then(response => {\r\n          this.tableData = response.data;\r\n          this.total = response.total;\r\n          setTimeout(() => {\r\n            this.listLoading = false;\r\n          }, 0.5 * 1000);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.openDialog = false;\r\n          this.listLoading = true;\r\n          let formdata = new FormData();\r\n          const createDate = new Date();\r\n          formdata.append(\"createTime\", createDate);\r\n          formdata.append(\"createUserId\", this.userId);\r\n          formdata.append(\"file\", this.file);\r\n          formdata.append(\"id\", 0);\r\n          formdata.append(\"shareFilesId\", this.shareFilesId);\r\n          formdata.append(\"updateTime\", createDate);\r\n          formdata.append(\"updateUserId\", this.userId);\r\n          formdata.append(\"uploadCompany\", this.ruleFormValue.uploadCompany);\r\n          formdata.append(\"uploadPerson\", this.ruleFormValue.uploadPerson);\r\n          formdata.append(\"uploadProfile\", \"\");\r\n          Request()\r\n            .post(\"/api/shareFilesRecord/create\", formdata)\r\n            .then(response => {\r\n              this.getList();\r\n              this.ruleFormValue.uploadCompany = \"\";\r\n              this.ruleFormValue.uploadPerson = \"\";\r\n            })\r\n            .catch(error => {\r\n              console.log(error);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    getFileName(str) {\r\n      if (str) return str.replace(\"/uploads/\", \"\");\r\n      else return \"\";\r\n    },\r\n    handleDelete() {\r\n      this.dialogVisible = false;\r\n      this.listLoading = true;\r\n      Request()\r\n        .delete(\"/api/shareFilesRecord/delete/\" + this.selectedId)\r\n        .then(response => {\r\n          setTimeout(() => {\r\n            this.listLoading = false;\r\n          }, 0.5 * 1000);\r\n          this.getList();\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    downloadFile(fileUrl) {\r\n      console.log(fileUrl);\r\n      axios({\r\n        url: Urls.DOWNLOAD_URL() + fileUrl,\r\n        method: \"GET\",\r\n        responseType: \"blob\" // important\r\n      }).then(response => {\r\n        if(!this.isIE()){\r\n          const url = window.URL.createObjectURL(new Blob([response.data]));\r\n          const link = document.createElement(\"a\");\r\n          link.href = url;\r\n          link.setAttribute(\"download\", fileUrl.replace(\"/uploads/\", \"\")); //or any other extension\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          link.remove();\r\n        }else{\r\n          const newBlob = new Blob([response.data], {type: 'application/octet-stream'});\r\n          if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n            window.navigator.msSaveOrOpenBlob(newBlob, fileUrl.replace(\"/uploads/\", \"\"));\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    isIE() {\r\n      let ua = navigator.userAgent;\r\n      /* MSIE used to detect old browsers and Trident used to newer ones*/\r\n      return ua.indexOf(\"MSIE \") > -1 || ua.indexOf(\"Trident/\") > -1;\r\n    },\r\n    confirmDelete(id) {\r\n      this.dialogVisible = true;\r\n      this.selectedId = id;\r\n    },\r\n    rowIndex({ row, rowIndex }) {\r\n      row.rowIndex = rowIndex;\r\n    },\r\n    order(row) {\r\n      return this.page.pageSize * (this.page.pageIndex - 1) + row.rowIndex + 1;\r\n    },\r\n    chooseFile() {\r\n      this.$refs.file.click();\r\n    },\r\n\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailShareFiles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailShareFiles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detailShareFiles.vue?vue&type=template&id=dff61dfc&scoped=true&\"\nimport script from \"./detailShareFiles.vue?vue&type=script&lang=js&\"\nexport * from \"./detailShareFiles.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dff61dfc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}