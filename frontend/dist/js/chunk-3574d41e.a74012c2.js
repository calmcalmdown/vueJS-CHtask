(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3574d41e"],{"0eec":function(e,t,a){"use strict";var l=a("e6e0"),r=a.n(l);r.a},be3d:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加作业")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"作业名称",prop:"taskName"}},[a("el-input",{model:{value:e.ruleFormValue.taskName,callback:function(t){e.$set(e.ruleFormValue,"taskName",t)},expression:"ruleFormValue.taskName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"taskType"}},[a("el-select",{attrs:{disabled:!(e.options.length>0)},model:{value:e.ruleFormValue.taskType,callback:function(t){e.$set(e.ruleFormValue,"taskType",t)},expression:"ruleFormValue.taskType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",{staticClass:"label-margin",attrs:{label:"添加图片",prop:"file"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*"},on:{change:function(t){return e.handleFileUpload()}}}),a("div",{staticStyle:{border:"solid 1px",width:"100px",height:"100px"},on:{click:function(t){return e.chooseFile()}}},[!e.imageSelectedUrl&&e.ruleFormValue.taskImages?a("img",{staticStyle:{width:"7rem",height:"7rem"},attrs:{src:e.imageUrl+e.ruleFormValue.taskImages}}):e._e(),e.imageSelectedUrl?a("img",{staticStyle:{width:"7rem",height:"7rem"},attrs:{src:e.imageSelectedUrl}}):e._e()]),a("div",{staticClass:"item-value"},[e.file?a("div",{},[e._v("("+e._s(e.file.name)+")")]):a("div",{},[e._v("请选择需要上传的文件...")])])]),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},r=[],i=a("55a1"),s={name:"addProcessDefinition",data:function(){return{file:null,listLoading:!1,imageUrl:"",imageSelectedUrl:"",companyId:-1,ruleFormValue:{file:null,taskType:"",taskName:"",taskImages:"",doShare:"",productId:0},rules:{taskName:[{required:!0,message:"请插入",trigger:"change"}],taskType:[{required:!0,message:"请插入",trigger:"change"}]},options:[{value:"1",label:"收获前"},{value:"2",label:"收获"},{value:"3",label:"收获后"}]}},created:function(){this.ruleFormValue.productId=this.$route.params.id,this.ruleFormValue.doShare=this.$route.query.doShare,this.companyId=this.$route.query.companyId},methods:{chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0];var e=new FileReader;this.imageSelectedUrl="";var t=this;e.onload=function(e){t.imageSelectedUrl=e.target.result},this.file&&e.readAsDataURL(this.file)},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a=new FormData;a.append("doShare",t.ruleFormValue.doShare),a.append("id","0"),a.append("productId",t.ruleFormValue.productId),a.append("taskName",t.ruleFormValue.taskName),a.append("taskType",t.ruleFormValue.taskType),a.append("file",t.file),t.listLoading=!0,Object(i["a"])().post("/api/product_task/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},o=s,n=(a("0eec"),a("2877")),u=Object(n["a"])(o,l,r,!1,null,null,null);t["default"]=u.exports},e6e0:function(e,t,a){}}]);
//# sourceMappingURL=chunk-3574d41e.a74012c2.js.map