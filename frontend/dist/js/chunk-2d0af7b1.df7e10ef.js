(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af7b1"],{"0f05":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[t._v("通知管理")]),n("el-breadcrumb-item",[t._v("通知公告")]),n("el-breadcrumb-item",{staticClass:"actived"},[t._v("短信通知")])],1)],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"box"},[n("div",{staticClass:"iptBox"},[n("el-row",{staticStyle:{width:"1280px"}},[n("el-col",{staticStyle:{width:"100px","text-align":"center"}},[t._v("短信内容")]),n("el-col",{staticStyle:{width:"1080px"}},[n("el-input",{attrs:{type:"textarea","auto-complete":"off",rows:10},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)],1),n("div",{staticClass:"iptBox",staticStyle:{"margin-left":"100px",width:"800px"}},[n("span",{staticStyle:{margin:"0 auto","margin-right":"0"}},[t._v("\n        共选择了"+t._s(t.selectCount)+"位联系人\n        "),n("el-button",{attrs:{type:"primary"},on:{click:t.postData}},[t._v("发送")])],1),n("div",{staticStyle:{width:"800px",margin:"5px 0 5% 0"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.rowIndex,"highlight-current-row":""},on:{"selection-change":t.selsChange}},[n("el-table-column",{attrs:{type:"selection",width:"35"}}),n("el-table-column",{attrs:{prop:"townId",label:"单位",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n              "+t._s(t.getTownName(n.townId))+"\n            ")]}}])}),n("el-table-column",{attrs:{prop:"contactPerson",label:"联系人"}}),n("el-table-column",{attrs:{prop:"contactWay",label:"手机"}})],1)],1),n("el-button",{attrs:{plain:"",type:"success"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)])])},a=[],s=(n("7f7f"),n("7514"),n("55a1")),o=n("0010"),l=(n("d1a0"),n("8ded")),c=n.n(l),r={name:"smsNotice",data:function(){return{loggedinUserName:"",listLoading:!0,total:0,tableData:[],selectCount:0,township:[{id:-1,name:"全部"}],receiver:[],content:"",title:"",checkedAll:!1,isIndeterminate:!0,checkedItem:!1,sels:[],id:""}},mounted:function(){this.getList(),this.getTown(),this.loggedinUserName=Object(o["a"])().user().username,this.id=this.$route.params.id,this.getData(this.id)},methods:{getData:function(t){var e=this;this.listLoading=!0,Object(s["a"])().get("/api/notice/get/"+t).then((function(t){e.content=t.content,e.title=t.title,setTimeout((function(){e.dataloading=!1}),10)})).catch((function(t){console.log(t)}))},getTown:function(){var t=this;this.listLoading=!0,Object(s["a"])().get("/api/town/all").then((function(e){t.township=t.township.concat(e),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(t){console.log(t)}))},getTownName:function(t){var e=this.township.find((function(e){return e.id===t}));return e?e.name+"农产品质量安全监管站":""},order:function(t){return this.page.pageSize*(this.page.pageIndex-1)+t.rowIndex+1},rowIndex:function(t){var e=t.row,n=t.rowIndex;e.rowIndex=n},getList:function(){var t=this;this.listLoading=!0,Object(s["a"])().get("/api/user/all",{userType:2,sortBy:"id"}).then((function(e){t.tableData=e.data,t.total=e.total,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(t){console.log(t)}))},postData:function(){var t=this;this.listLoading=!0;Object(s["a"])().post("/api/sendMsg",{content:this.content,sender:c.a.get("userData").mobile,mobile:this.receiver,msgType:2,title:this.title}).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.go(-1)})).catch((function(e){console.log(e),setTimeout((function(){t.listLoading=!1}),500)}))},selsChange:function(t){this.sels=t;for(var e=0;e<this.sels.length;e++)this.sels[e].contactWay&&this.receiver.push(this.sels[e].contactWay);this.receiver.push("sdfsdfsf"),this.selectCount=this.sels.length}}},u=r,d=n("2877"),h=Object(d["a"])(u,i,a,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0af7b1.df7e10ef.js.map