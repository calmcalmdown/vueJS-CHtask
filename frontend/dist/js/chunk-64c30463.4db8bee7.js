(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64c30463","chunk-2d0e2754"],{"5df3":function(t,e,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})}))},"7f7f":function(t,e,a){var i=a("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,l="name";l in n||a("9e1e")&&i(n,l,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},a495:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"container customized"},[t.listLoading?t._e():a("div",{staticClass:"box padding-modified header statisticsTracingCompany"}),a("div",{staticClass:"box padding-modified body"},[a("el-row",{staticClass:"W-100"},[a("el-col",{staticClass:"position-relative",attrs:{span:12}},[t.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[t._v("乡镇溯")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[t._v("源企业统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[t._v("乡镇溯源企业统计")]),a("div",{ref:"chartpie1",staticClass:"disability-chart chart-container"})]),a("el-col",{staticClass:"position-relative",attrs:{span:12}},[t.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[t._v("各乡镇监管")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[t._v("记录上传数据的比例分布")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[t._v("各乡镇监管记录上传数据的比例分布")]),a("div",{ref:"chartpie2",staticClass:"disability-chart chart-container margin-left-10"},[a("figure",[a("chart",{ref:"pie",attrs:{options:t.pie,"init-options":t.initOptions,autoresize:""}})],1)])])],1),a("el-row",{staticClass:"W-100 position-relative"},[a("el-col",[t.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[t._v("各乡镇溯源")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[t._v("记录上传数据统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[t._v("各乡镇溯源记录上传数据统计")]),a("div",{ref:"chartstick",staticClass:"w-100 flex-box disability-chart chart-container"})])],1)],1)])},n=[],r=(a("55dd"),a("5df3"),a("7f7f"),a("ac6a"),a("55a1")),l=(a("0010"),a("c037"),a("007d"),function(){return a.e("chunk-2129e83e").then(a.bind(null,"9ca8"))}),o={name:"statisticsTracingCompany",components:{chart:l},data:function(){return{listLoading:!0,tableData:null,tableDataByCnt:null,companyStatics:null,companyStatics1:null,townList:null,colorList:["#229efe","#20beff","#21e3ff","#21ffda","#1fffa6","#61f779","#96f65f","#c9fb64","#c9fb64","#fbd661","#f1be51","#f68a63","#f17263","#ed6082","#ee63ca","#7366f4"],is_ie:null,pie:{},initOptions:{renderer:"canvas"}}},created:function(){this.isIE(),this.getData()},methods:{getData:function(){var t=this;this.tableData=[],this.tableDataByCnt=[],this.companyStatics=[],this.townList=[],Object(r["a"])().get("/api/tracing/getCompanyStatis",{tracingTimeFrom:"",tracingTimeTo:"",sortBy:"cnt_company"}).then((function(e){t.companyStatics=e.data,t.getTownlist()})).catch((function(t){console.error(t)}))},getTownlist:function(){var t=this;Object(r["a"])().get("/api/town/all",{}).then((function(e){t.townList=e,t.getTableData()})).catch((function(t){console.error(t)}))},getTableData:function(){var t=this;this.companyStatics.forEach((function(e){for(var a=e[1],i="",n=0;n<t.townList.length;n++)if(t.townList[n].id===a){i=t.townList[n].name;break}t.tableData.push({townName:i,companyCnt:e[0],pie1Label:i,pie2Label:i})})),this.makePieChat1(),this.makePieChat2()},getTableData1:function(){var t=this;this.companyStatics1.forEach((function(e){for(var a=e[4],i="",n=0;n<t.townList.length;n++)if(t.townList[n].id===a){i=t.townList[n].name;break}t.tableDataByCnt.push({townName:i,companyCnt:e[0],pie1Label:i,pie2Label:i})})),this.listLoading=!1},makePieChat1:function(){var t=this;Promise.all([Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-e1b01656"),a.e("chunk-2d0d6586")]).then(a.bind(null,"71c9")),Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-e1b01656"),a.e("chunk-2d216c05")]).then(a.bind(null,"c497")),Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-2d0d2b61")]).then(a.bind(null,"5a54"))]).then((function(e){var a=e[0],i=e[1],n=e[2].default;a.useTheme(n);var l=a.create(t.$refs.chartpie1,i.PieChart);Object(r["a"])().get("/api/company_production/getTownCreditStatis",{createTimeFrom:"",createTimeTo:"",sortBy:"town_id"}).then((function(e){t.companyStatics1=e.data,t.getTableData1(),l.data=t.tableDataByCnt,t.makeStickChat()})).catch((function(t){console.error(t)})),l.responsive.enabled=!0;var o=l.series.push(new i.PieSeries),s=l.titles.create();s.text="乡镇溯源企业统计",s.fontSize=5,s.marginBottom=40,s.marginTop=10,s.fill=a.color("#012f8a"),o.dataFields.value="companyCnt",o.dataFields.category="pie1Label",o.labels.template.fill="white",o.labels.template.truncate=!0,o.labels.template.maxWidth=150,o.labels.template.fontSize=15,o.labels.template.text="[bold '#20beff']{value.percent.formatNumber('#.0')}%[/] {category}",l.innerRadius=a.percent(40),o.slices.template.fillOpacity=1,o.ticks.template.fill=a.color("#FFF"),o.ticks.template.strokeWidth=1,o.ticks.template.strokeOpacity=.7,o.ticks.template.fillOpacity=1;var c=new a.ColorSet;c.list=t.colorList.map((function(t){return new a.color(t)})),o.colors=c;var d=o.slices.template.states.getKey("hover");d.properties.scale=1,d.properties.fillOpacity=.5})).catch((function(t){console.error("Error when creating chart",t)}))},makePieChat2:function(){this.tableData.sort((function(t,e){return e.cnt-t.cnt}));var t=[];this.tableData.map((function(e){t.push({value:e.companyCnt,name:e.townName})})),this.pie={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"各站点农残检测上传数据统计",type:"pie",radius:"40%",center:["54%","50%"],data:t,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:2,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{fontSize:16,color:"#FFF",formatter:"{d}%: {b}"}}}],color:this.colorList};var e=-1,a=this.$refs.pie,i=this.pie.series[0].data.length;setInterval((function(){a.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:e}),e=(e+1)%i,a.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e}),a.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e})}),1e3)},makeStickChat:function(){var t=this;Promise.all([Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-e1b01656"),a.e("chunk-2d0d6586")]).then(a.bind(null,"71c9")),Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-e1b01656"),a.e("chunk-2d216c05")]).then(a.bind(null,"c497")),Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-2d0d2b61")]).then(a.bind(null,"5a54"))]).then((function(e){var a=e[0],i=e[1],n=e[2].default;a.useTheme(n);var r=a.create(t.$refs.chartstick,i.XYChart);r.data=t.tableDataByCnt;var l=r.xAxes.push(new i.CategoryAxis),o=r.titles.create();o.text="各乡镇溯源记录上传数据统计",o.fontSize=5,o.marginBottom=40,o.fill=a.color("#012f8a"),l.dataFields.category="townName",l.renderer.minGridDistance=20,l.renderer.grid.template.disabled=!0,l.renderer.labels.template.fill="white",l.renderer.labels.template.rotation=-45,l.renderer.labels.template.truncate=!0,l.renderer.labels.template.maxWidth=150,l.renderer.labels.template.fontSize=15,l.renderer.labels.template.horizontalCenter="right",l.renderer.line.strokeOpacity=1,l.renderer.line.strokeWidth=2,l.renderer.line.stroke=a.color("#3787ac");var s=r.yAxes.push(new i.ValueAxis);s.min=0,s.renderer.labels.template.fill="white",s.renderer.grid.template.stroke=a.color("#fff"),s.renderer.line.strokeOpacity=1,s.renderer.line.strokeWidth=2,s.renderer.line.stroke=a.color("#3787ac");var c=r.series.push(new i.ColumnSeries);c.dataFields.valueY="companyCnt",c.dataFields.categoryX="townName",c.name="companyCnt",c.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",c.columns.template.fillOpacity=1;var d=new a.LinearGradient;d.addColor(a.color("#08d3fc")),d.addColor(a.color("#4687eb")),d.rotation=90,c.fill=d;var h=c.bullets.push(new i.LabelBullet);h.label.text="{companyCnt}",h.label.fill=a.color("#20beff"),h.label.truncate=!0,h.label.maxWidth=150,h.label.fontSize=15,h.label.rotation=-45,h.label.dy=-10;var f=c.columns.template;f.strokeWidth=2,f.strokeOpacity=0})).catch((function(t){console.error("Error when creating chart",t)}))},createGrid:function(t,e){var a=e.axisRanges.create();a.value=t,a.label.text=this.formatNumber(t)},formatNumber:function(t){return t/1e3+"K"},isIE:function(){var t=navigator.userAgent;this.is_ie=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}}},s=o,c=a("2877"),d=Object(c["a"])(s,i,n,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-64c30463.4db8bee7.js.map