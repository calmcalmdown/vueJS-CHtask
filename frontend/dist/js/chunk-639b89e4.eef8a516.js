(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-639b89e4","chunk-2d0e2754"],{"0a49":function(t,e,a){var n=a("9b43"),i=a("626a"),o=a("4bf8"),s=a("9def"),l=a("cd1c");t.exports=function(t,e){var a=1==t,c=2==t,r=3==t,u=4==t,d=6==t,h=5==t||d,f=e||l;return function(e,l,m){for(var p,b,v=o(e),g=i(v),w=n(l,m,3),T=s(g.length),y=0,_=a?f(e,T):c?f(e,0):void 0;T>y;y++)if((h||y in g)&&(p=g[y],b=w(p,y,v),t))if(a)_[y]=b;else if(b)switch(t){case 3:return!0;case 5:return p;case 6:return y;case 2:_.push(p)}else if(u)return!1;return d?-1:r||u?u:_}}},1169:function(t,e,a){var n=a("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},3307:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("专项：绿色优质农产品生产基地")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}]},[a("div",{staticClass:"row year-select-panel"},[a("el-form-item",{attrs:{label:"年度"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{disabled:!(t.options.length>0)},on:{change:function(e){return t.getYear()}},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1)],1),a("div",{staticClass:"cate-content-panel"},[a("div",{staticClass:"cate-item-panel inline-block-IE"},[a("el-form-item",{attrs:{label:"巡查"}},[t._v("("+t._s(t.tableData.length)+")")]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"createTime",label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{prop:"township",label:"乡镇"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n                  "+t._s(t.filterTownship(a.townId))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"inspector",label:"检查人"}}),a("el-table-column",{attrs:{prop:"unitinspec",label:"检查单位"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n                  "+t._s(t.getCompanyName(a.companyId))+"\n                ")]}}])})],1)],1)],1),a("div",{staticClass:"cate-item-panel inline-block-IE"},[a("el-form-item",{attrs:{label:"检测"}},[t._v("("+t._s(t.detectTableData.length)+")")]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.detectTableData,"row-class-name":t.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t._f("formatDate")(a.detectTime)))]}}])}),a("el-table-column",{attrs:{label:"项目"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.item))]}}])}),a("el-table-column",{attrs:{label:"样品"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.sample))]}}])}),a("el-table-column",{attrs:{label:"结果"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.resultDxDesc))]}}])})],1)],1)],1),a("div",{staticClass:"cate-item-panel inline-block-IE"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-form-item",{staticClass:"margin-bottom-reverse-40",attrs:{label:"培训记录"}}),a("div",{staticClass:"inline-block-IE align-right-IE"},[t.isShowAddButton?t._e():a("el-button",{staticClass:"margin-bottom-22",attrs:{size:"small",type:"danger",plain:"",disabled:!(t.trainTableData.length>0)},on:{click:function(e){return t.updateSelectedRows()}}},[t._v("删除")]),t.trainTableData.length>0?a("el-checkbox",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{"true-label":"1","false-label":"0"},on:{change:t.showCheckbox},model:{value:t.isShowCheckbox,callback:function(e){t.isShowCheckbox=e},expression:"isShowCheckbox"}}):t._e()],1),t.isShowAddButton?a("el-button",{staticClass:"inline-block-IE float-right-IE",attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.$router.push({path:"/trainingFunds"})}}},[t._v("添加附件")]):t._e()],1),a("el-container",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.trainTableData,"row-class-name":t.rowIndex,"highlight-current-row":""}},[0!=t.isShowCheckbox?a("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-checkbox",{staticStyle:{"margin-left":"auto"},attrs:{"true-label":"1","false-label":"0"},on:{change:function(e){return t.changeCheckStatus(n.id)}},model:{value:t.checked[n.id],callback:function(e){t.$set(t.checked,n.id,e)},expression:"checked[row.id]"}})]}}],null,!1,574067976)}):t._e(),a("el-table-column",{attrs:{label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{label:"乡镇"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n                  "+t._s(t.getTownName(a.companyId))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"文件"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{size:"small",type:"success",plainv:""},on:{click:function(e){return t.downloadFile(n.trainingFundsProfiles)}}},[t._v("下载附件")])]}}])})],1)],1)],1)])])],1)])},i=[],o=(a("a481"),a("7f7f"),a("7514"),a("55a1")),s=a("d1a0"),l=a("bc3a"),c=a.n(l),r=a("8ded"),u=a.n(r),d=(a("0010"),{name:"specialCategory",data:function(){return{loggedinUserType:null,total:0,trainTotal:0,detectTotal:0,tableData:[],trainTableData:[],detectTableData:[],listLoading:!0,companyList:[],companyId:-1,companyName:"",township:[{id:-1,name:"全部"}],townName:"",year:"",supervisionRecordTimeFrom:"",supervisionRecordTimeTo:"",detectTimeFrom:"",detectTimeTo:"",createTimeFrom:"",createTimeTo:"",specialFlag:-1,options:[{value:"2018"},{value:"2019"},{value:"2020"},{value:"2021"},{value:"2022"},{value:"2023"}],isShowCheckbox:0,selectedRows:[],checked:[],isShowAddButton:null}},created:function(){this.companyId=0,this.specialFlag=1,this.supervisionRecordTimeFrom="",this.supervisionRecordTimeTo="",this.detectTimeFrom="",this.detectTimeTo="",this.getList(),this.getDetectList(),this.getTrainList(),this.getTown(),this.isShowAddButton=!!u.a.get("authList").find((function(t){return"addTrainingFunds"==t.privilegeCode}))},methods:{getList:function(){var t=this;this.listLoading=!0,Object(o["a"])().get("/api/supervision_record/all",{companyId:this.companyId,specialFlag:this.specialFlag,supervisionRecordTimeFrom:this.supervisionRecordTimeFrom,supervisionRecordTimeTo:this.supervisionRecordTimeTo,sortBy:"id"}).then((function(e){t.tableData=e.data,t.total=e.total,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(t){console.log(t)}))},getDetectList:function(){var t=this;this.listLoading=!0,Object(o["a"])().get("/api/disability_check/all",{specialFlag:this.specialFlag,detectTimeFrom:this.detectTimeFrom,detectTimeTo:this.detectTimeTo,sortBy:"id"}).then((function(e){t.detectTableData=e.data,t.detectTotal=e.total,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(t){console.log(t)}))},getTrainList:function(){var t=this;Object(o["a"])().get("/api/training_funds/all",{specialFlag:this.specialFlag,createTimeFrom:this.createTimeFrom,createTimeTo:this.createTimeTo,sortBy:"id"}).then((function(e){t.trainTableData=e.data,t.trainTotal=e.total})).catch((function(t){console.log(t)}))},getYear:function(){this.supervisionRecordTimeFrom=this.year+"-01-01 00:00:00",this.supervisionRecordTimeTo=this.year+"-12-31 00:00:00",this.detectTimeFrom=this.year+"-01-01 00:00:00",this.detectTimeTo=this.year+"-12-31 00:00:00",this.createTimeFrom=this.year+"-01-01 00:00:00",this.createTimeTo=this.year+"-12-31 00:00:00",this.tableData=[],this.detectTableData=[],this.total=[],this.detectTotal=[],this.getList(),this.getDetectList()},getTown:function(){var t=this;Object(o["a"])().get("/api/town/all").then((function(e){t.township=t.township.concat(e)})).catch((function(t){console.log(t)}))},getCompanyName:function(t){var e=this;return Object(o["a"])().get("/api/company_production/name",{companyId:t}).then((function(t){e.companyName=t[0].companyName})).catch((function(t){console.log(t)})),this.companyName},getTownName:function(t){var e=this;return Object(o["a"])().get("/api/company_production/name",{companyId:t}).then((function(t){e.townName=e.filterTownship(t[0].townId)})).catch((function(t){console.log(t)})),this.townName},filterTownship:function(t){var e=this.township.find((function(e){return e.id===t}));return e?e.name:""},filterCompanyName:function(t){var e=this.township.find((function(e){return e.id===t}));return e?e.companyName:""},rowIndex:function(t){var e=t.row,a=t.rowIndex;e.rowIndex=a},downloadFile:function(t){c()({url:s["b"].DOWNLOAD_URL()+t,method:"GET",responseType:"blob"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t.replace("/uploads/","")),document.body.appendChild(n),n.click(),n.remove()}))},changeCheckStatus:function(t){var e=this.selectedRows.indexOf(t);e>-1&&this.selectedRows.splice(e,1),this.checked[t]&&this.selectedRows.push(t)},updateSelectedRows:function(){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){for(var e in t.listLoading=!0,t.selectedRows){var a=0;Object(o["a"])().put("/api/training_funds/update_special_flag/"+t.selectedRows[e]+"/"+a).then((function(e){t.selectedRows=[],t.checked=[],t.isShowCheckbox=0,t.getTrainList(),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(t){console.log(t)}))}}))},showCheckbox:function(){1==this.isShowCheckbox&&(this.selectedRows=[],this.checked=[])}}}),h=d,f=(a("cd02"),a("2877")),m=Object(f["a"])(h,n,i,!1,null,null,null);e["default"]=m.exports},7514:function(t,e,a){"use strict";var n=a("5ca1"),i=a("0a49")(5),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||a("9e1e")&&n(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},cd02:function(t,e,a){"use strict";var n=a("f05b"),i=a.n(n);i.a},cd1c:function(t,e,a){var n=a("e853");t.exports=function(t,e){return new(n(t))(e)}},e853:function(t,e,a){var n=a("d3f4"),i=a("1169"),o=a("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},f05b:function(t,e,a){}}]);
//# sourceMappingURL=chunk-639b89e4.eef8a516.js.map