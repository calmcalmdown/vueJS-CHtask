(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c54e33b0","chunk-6051483f"],{"062e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(t,e,a){var i=s(),n=t-i,c=20,r=0;e="undefined"===typeof e?500:e;var u=function t(){r+=c;var s=Math.easeInOutQuad(r,i,n,e);l(s),r<e?o(t):a&&"function"===typeof a&&a()};u()}var r={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[5,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("update:limit",t),this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&c(0,800)},handleCurrentChange:function(t){this.$emit("update:page",t),this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&c(0,800)}}},u=r,d=(a("8367"),a("2877")),p=Object(d["a"])(u,i,n,!1,null,null,null);e["default"]=p.exports},"0a49":function(t,e,a){var i=a("9b43"),n=a("626a"),o=a("4bf8"),l=a("9def"),s=a("cd1c");t.exports=function(t,e){var a=1==t,c=2==t,r=3==t,u=4==t,d=6==t,p=5==t||d,h=e||s;return function(e,s,f){for(var m,g,b=o(e),v=n(b),w=i(s,f,3),y=l(v.length),_=0,C=a?h(e,y):c?h(e,0):void 0;y>_;_++)if((p||_ in v)&&(m=v[_],g=w(m,_,b),t))if(a)C[_]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return _;case 2:C.push(m)}else if(u)return!1;return d?-1:r||u?u:C}}},"0aca":function(t,e,a){},1169:function(t,e,a){var i=a("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},7514:function(t,e,a){"use strict";var i=a("5ca1"),n=a("0a49")(5),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),i(i.P+i.F*l,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},8367:function(t,e,a){"use strict";var i=a("0aca"),n=a.n(i);n.a},aa77:function(t,e,a){var i=a("5ca1"),n=a("be13"),o=a("79e5"),l=a("fdef"),s="["+l+"]",c="​",r=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(t,e,a){var n={},s=o((function(){return!!l[t]()||c[t]()!=c})),r=n[t]=s?e(p):l[t];a&&(n[a]=r),i(i.P+i.F*s,"String",n)},p=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(r,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},c5f6:function(t,e,a){"use strict";var i=a("7726"),n=a("69a8"),o=a("2d95"),l=a("5dbc"),s=a("6a99"),c=a("79e5"),r=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,h="Number",f=i[h],m=f,g=f.prototype,b=o(a("2aeb")(g))==h,v="trim"in String.prototype,w=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var a,i,n,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var l,c=e.slice(2),r=0,u=c.length;r<u;r++)if(l=c.charCodeAt(r),l<48||l>n)return NaN;return parseInt(c,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(b?c((function(){g.valueOf.call(a)})):o(a)!=h)?l(new m(w(e)),a,f):w(e)};for(var y,_=a("9e1e")?r(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;_.length>C;C++)n(m,y=_[C])&&!n(f,y)&&d(f,y,u(m,y));f.prototype=g,g.constructor=f,a("2aba")(i,h,f)}},cd1c:function(t,e,a){var i=a("e853");t.exports=function(t,e){return new(i(t))(e)}},e853:function(t,e,a){var i=a("d3f4"),n=a("1169"),o=a("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},ed1a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[t.isEnterprise>-1?a("el-breadcrumb-item",{staticClass:"actived"},[t._v("农残自检")]):a("el-breadcrumb-item",{staticClass:"actived"},[t._v("农残检测")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},["undefined"==typeof this.creditCode?a("div",{staticClass:"select_label no-margin-left"},[t._v("乡镇")]):a("div",{staticClass:"select_label no-margin-left",staticStyle:{display:"none"}},[t._v("乡镇")]),"undefined"==typeof this.creditCode?a("el-select",{attrs:{placeholder:"全部"},on:{change:t.getList},model:{value:t.currTown,callback:function(e){t.currTown=e},expression:"currTown"}},t._l(t.township,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.divisionCode,size:"large"}})})),1):a("div",{staticClass:"select_label"},[t._v(t._s(t.getCompanyName()))]),a("div",{staticClass:"select_label"},[t._v("项目")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:t.getList},model:{value:t.itemValue,callback:function(e){t.itemValue=e},expression:"itemValue"}},t._l(t.items,(function(t){return a("el-option",{key:t.id,attrs:{label:t.item,value:t.item}})})),1),a("div",{staticClass:"select_label"},[t._v("样品")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:t.getList},model:{value:t.samplesValue,callback:function(e){t.samplesValue=e},expression:"samplesValue"}},t._l(t.samples,(function(t){return a("el-option",{key:t.id,attrs:{label:t.sample,value:t.sample}})})),1),a("div",{staticClass:"select_label"},[t._v("定性")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:t.getList},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.results,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t.isShowSearchOption?a("div",{staticClass:"select_label"},[t._v("检测单位")]):t._e(),t.isShowSearchOption?a("el-select",{attrs:{placeholder:"全部"},on:{change:t.getList},model:{value:t.detectionUnitValue,callback:function(e){t.detectionUnitValue=e},expression:"detectionUnitValue"}},t._l(t.detectionUnit,(function(t){return a("el-option",{key:t.id,attrs:{label:t.detectUnit,value:t.detectUnit}})})),1):t._e()],1),a("div",{staticClass:"iptBox"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"select_label no-margin-left"},[t._v("开始日期")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:t.getList},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"select_label no-margin-left"},[t._v("结束日期")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:t.getList},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),a("el-col",{staticClass:"flex-center",attrs:{span:5}},[a("el-button",{attrs:{size:"small",type:"success",plain:"",disabled:t.totalNo<1},on:{click:t.handleDownload}},[t._v("导出表格")]),"undefined"!=typeof this.creditCode?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]):a("el-button",{staticStyle:{display:"none"},attrs:{size:"small",plain:"",type:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),a("span",{staticClass:"margin-left-20 margin-top-10-IE"},[t._v("\n            总计\n            "),a("b",{staticClass:"blue-colored"},[t._v(t._s(t.totalNo))]),t._v(" 条检测\n          ")])],1),a("el-col",{staticClass:"flex-center justify-right",staticStyle:{height:"40px"},attrs:{span:9}},[0!=t.isShowCheckbox?a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus",plain:""},on:{click:function(e){return t.actionConfirm(1)}}},[t._v("添加到专项1")]):t._e(),0!=t.isShowCheckbox?a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"el-icon-minus",plain:""},on:{click:function(e){return t.actionConfirm(0)}}},[t._v("从专项1移除")]):t._e(),a("el-checkbox",{staticClass:"margin-top-10-IE float-right-IE",attrs:{"true-label":"1","false-label":"0",disabled:t.totalNo<1},on:{change:t.showCheckbox},model:{value:t.isShowCheckbox,callback:function(e){t.isShowCheckbox=e},expression:"isShowCheckbox"}},[t._v("专项1:绿色优质农产品生产基地")])],1)],1),a("el-dialog",{attrs:{visible:t.alert_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(e){t.alert_dialogVisible=e}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[t._v(" 请选择 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){t.alert_dialogVisible=!1}}},[t._v("取消")])],1)]),a("el-dialog",{attrs:{visible:t.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(e){t.confirm_dialogVisible=e}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[t._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){t.confirm_dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{size:"small",type:t.btnColor,plain:""},on:{click:function(e){return t.updateSelectedRows()}}},[t._v("确认")])],1)])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.rowIndex}},[0!=t.isShowCheckbox?a("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-checkbox",{staticStyle:{"margin-left":"auto"},attrs:{"true-label":"1","false-label":"0"},on:{change:function(e){return t.changeCheckStatus(i.id)}},model:{value:t.checked[i.id],callback:function(e){t.$set(t.checked,i.id,e)},expression:"checked[row.id]"}})]}}],null,!1,574067976)}):t._e(),a("el-table-column",{attrs:{formatter:t.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"no",label:"编号"}}),a("el-table-column",{attrs:{prop:"item",label:"检测项目"}}),a("el-table-column",{attrs:{prop:"sample",label:"样品名称"}}),a("el-table-column",{attrs:{prop:"source",label:"来源"}}),a("el-table-column",{attrs:{prop:"resultDl",label:"定量结果"}}),a("el-table-column",{attrs:{prop:"resultDx",label:"定性结果"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n            "+t._s(t.detect(a.resultDx))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"detectTime",label:"检测时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t._f("formatDate")(a.detectTime)))]}}])}),a("el-table-column",{attrs:{prop:"detectUnit",label:"检测单位",width:"150"}}),a("el-table-column",{attrs:{prop:"operator",label:"检验员"}}),a("el-table-column",{attrs:{label:"专项1"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[1==e.specialFlag?a("i",{staticClass:"el-icon-check"}):a("i")]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.page.pageIndex,limit:t.page.pageSize},on:{"update:page":function(e){return t.$set(t.page,"pageIndex",e)},"update:limit":function(e){return t.$set(t.page,"pageSize",e)},pagination:t.getList}})],1)],1)])},n=[],o=(a("7514"),a("8ded")),l=a.n(o),s=a("062e"),c=a("55a1"),r=(a("0010"),{name:"disabilityCheck",components:{Pagination:s["default"]},data:function(){return{isEnterprise:"",listLoading:!1,creditCode:"",page:{pageIndex:1,pageSize:20},total:0,totalNo:0,options:[{value:"全部",label:""}],township:[{id:0,name:"全部",divisionCode:0}],currTown:"",status:1,tableData:[],items:[{id:0,item:"全部"}],itemValue:"",samples:[{id:0,sample:"全部"}],samplesValue:"",results:[{id:0,name:"全部"},{id:1,name:"不合格"},{id:2,name:"合格 "},{id:3,name:"疑似"}],result:"",detectionUnit:[{id:"0",detectUnit:"全部"}],detectionUnitValue:"",startDate:"",endDate:"",isShowCheckbox:0,selectedRows:[],alert_dialogVisible:!1,confirm_dialogVisible:!1,btnColor:"",action:"",companyData:[],filename:"农残检测",checked:[],isShowSearchOption:null}},created:function(){this.isEnterprise=l.a.get("authData").indexOf("ent"),this.isShowSearchOption=!!l.a.get("authList").find((function(t){return"searchdisabilityCheck"==t.privilegeCode})),this.getTown(),this.getItem(),this.getSample(),this.getDetectUnit(),this.getList(),this.getCompanyProduction(),this.creditCode=this.$route.query.creditCode},methods:{handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-6e83591c"),a.e("chunk-5bdd67a2"),a.e("chunk-56516077")]).then(a.bind(null,"4bf8d")).then((function(e){var a=["编号","检测项目","样品名称","来源","定量结果","定性结果","检测时间","检测单位","检验员","专项1"],i=["no","item","sample","source","resultDl","resultDx","detectTime","detectUnit","operator","specialFlag"],n=t.formatJson(i,t.tableData);e.export_json_to_excel({header:a,data:n,filename:t.filename,bookType:"csv"}),t.downloadLoading=!1}))},formatJson:function(t,e){var a=this;return e.map((function(e){return t.map((function(t){return"resultDx"===t?a.filterResultDx(e[t]):"detectTime"===t?e[t].substr(0,10):"specialFlag"===t?1===e[t]?"是":"":e[t]}))}))},getCompanyProduction:function(){var t=this;Object(c["a"])().get("/api/company_production/name").then((function(e){t.companyData=e})).catch((function(t){console.log(t)}))},getTown:function(){var t=this;Object(c["a"])().get("/api/town/all").then((function(e){t.township=t.township.concat(e)})).catch((function(t){console.log(t)}))},getItem:function(){var t=this;Object(c["a"])().get("/api/disability_check/item").then((function(e){t.items=t.items.concat(e)})).catch((function(t){console.log(t)}))},getSample:function(){var t=this;Object(c["a"])().get("/api/disability_check/sample ").then((function(e){t.samples=t.samples.concat(e)})).catch((function(t){console.log(t)}))},getDetectUnit:function(){var t=this;Object(c["a"])().get("/api/disability_check/detect_unit").then((function(e){t.detectionUnit=t.detectionUnit.concat(e)})).catch((function(t){console.log(t)}))},getList:function(){var t=this;this.listLoading=!0;var e="";this.endDate&&(e=this.endDate.getFullYear()+"-"+parseInt(this.endDate.getMonth()+1)+"-"+this.endDate.getDate()+"T23:59:59"),Object(c["a"])().get("/api/disability_check/all",{creditCode:this.$route.query.creditCode,detectUnit:"全部"==this.detectionUnitValue?"":this.detectionUnitValue,detectTimeFrom:this.startDate,detectTimeTo:e,sample:"全部"==this.samplesValue?"":this.samplesValue,item:"全部"==this.itemValue?"":this.itemValue,resultDx:this.result,townDivisionCode:0==this.currTown?"":this.currTown,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(e){t.tableData=e.data,t.total=e.total,t.totalNo=e.total*t.page.pageSize,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(t){console.log(t)}))},getCompanyName:function(){var t=this,e=this.companyData.find((function(e){return e.creditCode===t.creditCode}));return e?e.companyName:""},detect:function(t){return""==t||"0"==t?"不合格":"1"==t?"合格":"疑似"},rowIndex:function(t){var e=t.row,a=t.rowIndex;e.rowIndex=a},order:function(t){return this.page.pageSize*(this.page.pageIndex-1)+t.rowIndex+1},goAdd:function(){this.$router.push({path:"addDisabilityCheck"})},changeCheckStatus:function(t){var e=this.selectedRows.indexOf(t);e>-1&&this.selectedRows.splice(e,1),1==this.checked[t]&&this.selectedRows.push(t)},actionConfirm:function(t){this.action=t,this.updateSelectedRows()},updateSelectedRows:function(){var t=this;for(var e in this.selectedRows)this.confirm_dialogVisible=!1,this.listLoading=!0,Object(c["a"])().put("/api/disability_check/update_special_flag/"+this.selectedRows[e]+"?specialFlag="+this.action).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.selectedRows=[],t.checked=[],t.isShowCheckbox=0,t.getList()})).catch((function(t){console.log(t)}))},showCheckbox:function(){0==this.isShowCheckbox&&(this.selectedRows=[],this.checked=[])},filterResultDx:function(t){switch(t){case 0:return"不合格";case 1:return"合格";case 2:return"疑似";default:return"不合格"}}}}),u=r,d=a("2877"),p=Object(d["a"])(u,i,n,!1,null,"6bb31a55",null);e["default"]=p.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-c54e33b0.4a8fb1d2.js.map