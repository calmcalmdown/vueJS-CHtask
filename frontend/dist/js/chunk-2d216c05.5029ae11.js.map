{"version":3,"sources":["webpack:///./node_modules/@amcharts/amcharts4/.internal/core/elements/Grip.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/Chart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/Bullet.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/Legend.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/Series.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/SerialChart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisBreak.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/Axis.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisLine.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisFill.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/Grid.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisLabel.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/Tick.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisTick.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisRenderer.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisBullet.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisRendererY.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/ValueAxisBreak.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/ValueAxis.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/DateAxisBreak.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/DateAxis.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisRendererX.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/CategoryAxisBreak.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/CategoryAxis.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/XYSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/XYChartScrollbar.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/XYChart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/LineSeriesSegment.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/LineSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/RadarSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisFillCircular.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/GridCircular.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisLabelCircular.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisRendererCircular.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisRendererRadial.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/RadarChart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/ClockHand.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/GaugeChart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/PercentSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/PercentChart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/PieTick.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/PieSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/PieChart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/PieSeries3D.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/PieChart3D.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/SlicedChart.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/FlowDiagramNode.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/FlowDiagramLink.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/FlowDiagram.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/LabelBullet.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/SankeyNode.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/SankeyLink.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/SankeyDiagram.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/ChordNode.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/core/elements/QuadraticCurve.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/ChordLink.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/ChordDiagram.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/Column.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/ColumnSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/TreeMapSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/TreeMap.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisRendererX3D.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/AxisRendererY3D.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/Column3D.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/ColumnSeries3D.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/types/XYChart3D.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/HeatLegend.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/Candlestick.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/CandlestickSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/OHLC.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/OHLCSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/StepLineSeriesSegment.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/StepLineSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/RadarColumn.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/RadarColumnSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/FunnelSlice.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/FunnelTick.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/FunnelSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/PyramidSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/PictorialStackedSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/ConeColumn.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/ConeSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/CurvedColumn.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/series/CurvedColumnSeries.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/axes/DurationAxis.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/CircleBullet.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/ErrorBullet.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/elements/NavigationBar.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/cursors/Cursor.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/cursors/XYCursor.js","webpack:///./node_modules/@amcharts/amcharts4/.internal/charts/cursors/RadarCursor.js","webpack:///./node_modules/@amcharts/amcharts4/charts.js"],"names":["_super","Grip","_this","call","this","className","cs","InterfaceColorSet","layout","padding","margin","background","fillOpacity","cornerRadius","icon","Sprite","element","paper","add","path","x","y","strokeWidth","pixelPerfect","stroke","getFor","strokeOpacity","align","valign","label","dispose","undefined","position","autoHideDelay","events","on","ev","_autoHideTimeout","setTimeout","hide","applyTheme","Object","defineProperty","prototype","get","getPropertyValue","set","value","setPropertyValue","horizontalCenter","verticalCenter","rotation","width","height","enumerable","configurable","Button","registeredClasses","ChartDataItem","DataItem","Chart","_legend","constructor","Error","template","Label","titles","List","_disposers","push","chartAndLegendContainer","createChild","Container","shouldClone","chartContainer","showOnInit","processTitle","updateReaderTitleReferences","role","defaultState","transitionDuration","applyInternalDefaults","readerTitle","language","translate","draw","fixLayout","legend","toBack","toFront","maxWidth","feedLegend","event","title","newValue","parent","uidAttr","length","titleIds_1","iterator","uid","setSVGAttribute","join","removeSVGAttribute","setLegend","property","reset","processConfig","config","type","copyFrom","source","clone","removeChildren","_dragGrip","grip_1","tooltipContainer","touch","interactionsEnabled","show","focusable","Component","relevant","Responsive","widthXS","state","target","stateId","states","create","pixelPaddingLeft","properties","paddingLeft","pixelPaddingRight","paddingRight","heightXS","pixelPaddingTop","paddingTop","pixelPaddingBottom","paddingBottom","widthXXS","heightXXS","Bullet","isMeasured","tooltipX","tooltipY","applyOnClones","copyToLegendMarker","dataItem","component","invalidate","isXS","disabled","LegendDataItem","childrenCreated","_label","label_1","labels","addSprite","itemContainer","Disposer","removeValue","color","setProperty","_valueLabel","valueLabel_1","valueLabels","_itemContainer","component_1","itemContainer_1","itemContainers","togglable","toggleDataItem","focusedItem","dataContext","readerControls","readerLabelledBy","sprite","isDisposed","addDisposer","readerChecked","visible","disableType","isActive","enableType","dataItems","remove","_marker","marker_1","markers","LegendSettings","createMarker","Legend","clickable","cursorOverStyle","Mouse","pointer","body","isKey","interfaceColors","marker","setStateOnChildren","propertyFields","fill","disabledColor","child","activeState","rectangle","RoundedRectangle","text","valueLabel","textAlign","createDataItem","validateDataElement","container","legendDataItem","legendSettings","createLegendMarker","useDefaultMarker","updateLegendValue","invalid","validate","currentText","__disabled","itemValueText","valueText","truncate","fullWords","item","isHiding","isHidden","colorOrig","hidden","handleDataItemPropertyChange","name","SeriesDataItem","values","_bullets","Dictionary","bullets","clear","setValue","Series","_ignoreMinMax","_showBullets","_tmin","_tmax","_smin","_smax","dataItemsByAxis","skipFocusThreshold","_itemReaderTextChanged","calculatePercent","autoDispose","simplifiedProcessing","axisRanges","processAxisRange","minBulletDistance","mainContainer","mask","bulletsContainer","_shouldBeReady","virtualParent","tooltip","Tooltip","hiddenState","transitionEasing","autoSetClassName","setClassName","_chart","positionBullet","bullet","processBullet","isTemplate","once","itemsFocusable","removeBullet","oldValue","each","eachBullet","getKey","validateDataItems","processValues","getFirstValue","key","startIndex","i","getIndex","getActualWorkingValue","getAbsoluteFirstValue","rangeChangeUpdate","working","count_1","sum_1","absoluteSum_1","low_1","high_1","open_1","close_1","previous_1","first_1","absoluteFirst_1","startIndex_1","_workingStartIndex","endIndex","_workingEndIndex","dataItem_1","_loop_1","dataItem_2","Math","abs","setCalculatedValue","prevValue","_loop_2","dataItem_3","ksum","percent","zeroItem_1","dataItem_4","axisRange","pixelX","pixelY","children","updateTooltipBounds","topParent","w","h","maxHeight","rect","setBounds","shouldCreateBullet","bulletTemplate","disabledField","currentDataItem","setKey","readerText_1","itemReaderText","xField","yField","isDynamic","deepInvalidate","populateString","hoverable","itemWidth","itemHeight","handleDataItemWorkingValueChange","dataRangeInvalid","invalidateProcessedData","invalidateDataItems","createMask","rangesContainer","contents","isRange","getAxisField","axis","showTooltipAtPosition","xPosition","yPosition","chart","invalidateRawData","readerText","_itemReaderText","tooltipText","tooltipHTML","_adapterO","apply","_legendDataItem","notRange","itemLabelText","labelText","raiseCriticalError","e","modal","content","adapter","message","closable","open","verbose","console","log","applyFilters","filters","filter","_heatRules","heatRule","dataField_1","dataField","min_1","min","max_1","max","seriesDataItem_1","property_1","minValue","maxValue","foundSprite","sprites","clonedFrom","anySprite","anyChild","foundSprite_1","ruleTarget","propertyField","low","high","fieldValues","workingValue","Color","rgb","heatRules","len","rule","map","hasKey","parts","split","listitem","maybeColorOrPercent","configOrder","a","b","setVisibility","SerialChartDataItem","SerialChart","colors","ColorSet","_usesData","seriesContainer","zIndex","patterns","_series","createSeries","handleSeriesAdded","series","dataUsers","dataUser","_dataUsers","moveValue","handleSeriesAdded2","dataInvalid","data","invalidateData","legendData_1","hiddenInLegend","dataFields","appear","inited","AxisBreak","_axis","breakSize","marginLeft","marginRight","marginTop","marginBottom","fillShape","WavedLine","_fillShape","startLine","_startLine","endLine","_endLine","addBreakSprite","renderer","gridContainer","createBreakSprites","breakTemplate","axisBreaks","invalidateSeries","positionToPoint","startPosition","endPosition","updateBreakElement","AxisItemLocation","AxisDataItem","_grid","grid_1","grid","_tick","component_2","tick_1","tick","ticks","component_3","_axisFill","component_4","axisFill_1","axisFill","axisFills","_text","_mask","_contents","createFill","_axisBreak","axisBreak","appendChildren","appendDataItem","hasProperty","prop","minPosition","maxPosition","noChangeValues","_bullet","Axis","_gridCount","_axisItemCount","hideTooltipWhileZooming","minWidth","minHeight","toggleZoomOutButton","_dataItemsIterator","createNewItems","pointerLength","fitPointerToBounds","readerHidden","fillRule","index","round","opacity","invalidateLayout","validateDataElements","ghostLabel","updateLabelElement","start","end","updateGridCount","axisLength","minGridDistance","validateLayout","axisFullLength","updateAxisLine","updateTooltip","updateBaseGridElement","_prevLength","dispatchImmediately","initRenderer","above","updateGridContainer","validateAxisRanges","validateBreaks","_axisBreaks","processBreak","breakContainer","registerSeries","_renderer","ghostLabel_1","positionToAngle","pointToPosition","point","positionToCoordinate","getAnyRangePath","getPositionRangePath","anyToPosition","anyToPoint","angle","hideTooltip","duration","_tooltipPosition","local","_tooltip","toAxisPosition","tooltipLocation","getCellStartPosition","getCellEndPosition","tooltipPosition","tooltipLocation2","startPoint","endPoint","currentItemStartPoint","currentItemEndPoint","fullWidthTooltip","globalPoint","line","getTooltipText","pointTo","cursorTooltipEnabled","inversed","toGlobalPosition","pointerOrientation","boundingRectangle","roundPosition","location","axisLocation","_axisRanges","SortedList","createAxisBreak","adjustedStartValue","processSeriesDataItems","processSeriesDataItem","axisLetter","postProcessSeriesDataItems","postProcessSeriesDataItem","updateAxisBySeries","hideUnusedDataItems","dataItemsIterator","getSeriesDataItem","findNearest","getAngle","stackKey","range","getX","getPositionX","getY","getPositionY","dataChangeUpdate","seriesDataChangeUpdate","adjustDifference","difference","startValue","endValue","adjustedEndValue","intersection","isInBreak","fixAxisBreaks","update","firstAxisBreak","first","previousEndValue_1","getPositionLabel","createSeriesRange","resetIterators","setDisabled","changed","_title","maybeXS","AxisLine","AxisFill","fillPath","setPath","attr","Grid","AxisLabel","Tick","nonScalingStroke","AxisTick","AxisRenderer","inside","cellStartLocation","cellEndLocation","minLabelPosition","maxLabelPosition","invalidateAxisItems","baseGrid","disposers","setAxis","bind","processRenderer","positionItem","moveTo","position2","coordinate","getHeight","pixelHeight","getWidth","pixelWidth","coordinateToPosition","coordinate2","updateGridElement","updateTickElement","updateBullet","updateFillElement","toggleVisibility","updatedStart","updatedEnd","_axisFills","createGrid","_ticks","createTick","_labels","createLabel","AxisBullet","AxisRendererY","opposite","inversedPosition","relativePositionSprite","relativeY","innerHeight","relativeHeight","Percent","bigNum","bbx","bby","bbw","bbh","measuredHeight","y1","y2","tickLength","measuredWidth","_a","basePoint","deltaX","x1","pixelMarginLeft","x2","pixelMarginRight","wavedRectangle","WavedRectangle","setWavedSides","widthS","ValueAxisBreak","valueToPosition","ValueAxisDataItem","ValueAxis","_stepDecimalPlaces","_baseValue","_adjustedStart","_adjustedEnd","_extremesChanged","_deltaMinMax","calculateTotals","axisFieldName","Number","MAX_VALUE","keepSelection","includeRangesInMinMax","step","_start","_end","_maxZoomed","_maxDefined","_minZoomed","_minDefined","_maxAdjusted","_minAdjusted","total","this_1","excludeFromTotal","getMinMax","calculateZoom","validateAxisElements","positionToValue","differece","minMaxStep","adjustMinMax","_step","value_1","minZoomed","logarithmic","differencePower","LOG10E","pow","floor","maxZoomed","dataItemsIterator_1","find","formatLabel","stepPower","decCount","renderer_1","breakValue_1","adjustedMin","adjustedMax","adjustedStep","itemIndex","fillEndPosition","numberFormatter","format","baseValue","valueToPoint","_difference","difference_1","value_2","breakStartPosition","breakEndPosition","breakStartValue","breakEndValue","breakPosition","E","xToValue","yToValue","animateMinMax","animate","from","to","rangeChangeDuration","rangeChangeEasing","POSITIVE_INFINITY","NEGATIVE_INFINITY","ignoreMinMax","seriesMin","seriesMax","_minReal","_maxReal","dif","fixMin","fixMax","exponent","power","extraMin","extraMax","strict","strictMinMax","animation","_minMaxAnimation","isFinished","_finalMax","_finalMin","handleSelectionExtremesChange","gridCount","strictMode","initialMin","initialMax","extra","Infinity","ceil","stepDivisor","maxPrecision","minCount","maxCount","handleExtremesChange","selectionMin","selectionMax","allHidden","seriesSelectionMin","seriesSelectionMax","minMaxStep2","zoom","mw_1","getWorkingValue","stack","getValue","valueStr","zoomToValues","skipRangeEvent","instantly","axisBreakDif","axisBreakGridCount","breakMinMaxStep","showTooltipAt","DateAxisBreak","getTime","DateAxisDataItem","date","endDate","dates","setDate","DateAxis","_gapBreaks","gridIntervals","groupIntervals","dateFormats","periodChangeDateFormats","_baseIntervalReal","timeUnit","count","_minDifference","_firstWeekDay","groupMin","groupMax","snapTooltip","groupCount","getDFFormatter","pushAll","gridInterval","_gridInterval","gridDuration","baseDuration","periodCount","getFirstWeekDay","mainBaseDuration","mainBaseInterval","maxZoomFactor","newPeriodCount","dataSetChanged","groupData","groupInterval","chooseInterval","_groupInterval","_currentDataSetId","baseAxis","setDataSet","baseInterval","_nextGridUnit","_intervalDuration","_gridDate","Date","_df","utc","field_1","minZoomedStr","toString","startDataItem","currentDataSetId","findFirst","findClosestIndex","maxZoomedStr","endDataItem","validateDataRange","time","previousDataItem","previousDate","validateData","minDifference","JSON","stringify","_baseInterval","mainDataSet","groupSeriesData","addEmptyUnitsBreaks","dataGrouped","intervals_1","mainIntervalDuration_1","interval","intervalDuration","_dataSets","dataSetId","dataSet","dataSets","newDataItem","previousTime","dfkey","df","dfk","indexOf","getDate","roundedDate","firstDayOfWeek","currentTime","_index","vkey","dvalues","close","sum","average","fieldValue","f","hasProperties","groupDataItems","groupFieldName","groupFields","dateFormatter","intervalID","startDate","startTime","skipEmptyPeriods","startTimeStr","hasData","breakGridCount","gridDate","getGridDate","intervalCount","realIntervalCount","prevTimestamp","newDate","timestamp","durationBreaksRemoved","countBreaksRemoved","getBreaklessDate","prevGridDate","this_2","markUnitChange","timeUnit_1","intervalCount_1","prevGridDate_1","timestamp_1","_loop_3","text_1","endTimestamp","location_1","endTime","startLocation","endLocation","intervals","lastIndex","dateToPosition","dateToPoint","positionToDate","getTimeByLocation","workingLocations","openTime","openDate","prevSeriesTime","_prevSeriesTime","_mainBaseInterval","timeInterval","tooltipDateFormat","dateFormat","setTime","key_1","getCurrentLabelFormat","dispatch","id","zoomToDates","adjust","parse","isEnd","isStart","asIs","field","closestDate_1","actualDate","actualTime_1","xAxis","dateX","yAxis","dateY","closestTime_1","showTooltipAtDataItem","_seriesPoints","makeGap","previous","connect","autoGapCount","prevDate","prevTime","AxisRendererX","deltaY","pixelMarginTop","pixelMarginBottom","relativeX","innerWidth","relativeWidth","CategoryAxisBreak","indexToPosition","category","categoryToIndex","CategoryAxisDataItem","seriesDataItems","locations","endCategory","Adapter","isEnabled","CategoryAxis","dataItemsByCategory","_lastDataItem","categoryAxisDataItem","seriesId","invalidateDataRange","positionToIndex","minIndex","maxIndex","axisDataItem","i_1","seriesDataItem","dataCount","frequency","_startIndex","_endIndex","_frequency","frequency_1","itemIndex_1","fillEndIndex","fillPosition","html","disposeData","processDataItem","getDataItem","breakStartIndex","breakEndIndex","categoryToPosition","categoryToPoint","zoomToCategories","startCategory","zoomToIndexes","startPos","endPos","getFirstSeriesDataItem","categoryX","categoryY","getLastSeriesDataItem","index_1","sdi_1","category_1","categories","tooltipDataItem","positionToCategory","XYSeriesDataItem","customValue","valueX","valueY","openValueX","openValueY","openDateX","openDateY","setLocation","setCategory","openCategoryX","openCategoryY","getMin","fields","stackValue","getMax","XYSeries","_xAxis","_yAxis","_xValueFields","_yValueFields","usesShowFields","_dataSetChanged","cursorHoverEnabled","setElement","stacked","returnBulletDefaultState","valueYShow","openValueXShow","openValueYShow","defineFields","updateItemReaderText","_xField","_yField","setInitialWorkingValues","updateDataItem","dataItemsX","clearCatAxis","dataItemsY","xAxisFieldName","xOpenField","yAxisFieldName","yOpenField","_xOpenField","_yOpenField","addValueField","setCategoryAxisField","setDateAxisField","afterDraw","path_1","getMaskPath","xAxes","setXAxis","oldAxis","removeKey","yAxes","setYAxis","handleYAxisSet","_baseAxis","minX","maxX","minY","maxY","workingStartIndex","workingEndIndex","getStackValue","stackX","stackY","xAxisId","yAxisId","stackedSeries","appeared","tmin","tmax","_prevTooltipDataItem","isShowing","getAdjustedXLocation","getAdjustedYLocation","e_1","_c","cursor","hideSeriesTooltipsOnSelection","selection","downPoint","tooltipXField","tooltipYField","tooltipPoint","getPoint","_b","next","done","isHover","e_1_1","error","return","showTooltip","e_2_1","e_2","hasValue","bulletLocationX","getBulletLocationX","bulletLocationY","getBulletLocationY","positionX","positionY","openValue","closeValue","middleValue","rightLocation","leftLocation","openPositionX","topLocation","bottomLocation","openPositionY","positionBulletReal","bulletLocation","locationX","locationY","anim","delay","interpolationDuration","sequencedInterpolation","sequencedInterpolationDelay","disable","enable","axisSeries","backwards","prevSeries","prevDataItem","prevRealValue","_tooltipXField","_tooltipYField","processingErrors","xKey","yKey","stackKeyX","stackKeyY","val","XYChartScrollbar","scrollbarChart","_scrollbarChart","unselectedOverlay","_unselectedOverlay","thumbBackground","thumb","hoverState","downState","handleSeriesRemoved","sourceSeries","zoomOutButton","locale","addXAxis","addYAxis","labelsTemplate","maxZoomCount","minZoomCount","vAxis_1","sourceAxis","minDefined","maxDefined","vAxis_2","vAxis_3","vAxis_4","zoomOutAxes","DesaturateFilter","updateByOrientation","orientation","off","err","handleDataChanged","dataProvider","updateThumb","Scrollbar","XYChartDataItem","XYChart","_axisRendererX","_axisRendererY","maskBullets","arrangeTooltips","topAxesCont","topAxesContainer","yAxesAndPlotCont","yAxesAndPlotContainer","bottomAxesCont","bottomAxesContainer","leftAxesCont","contentAlign","updateXAxesMargins","leftAxesContainer","plotCont","plotContainer","mouseWheelBehavior","_cursorContainer","rightAxesCont","rightAxesContainer","ZoomOutButton","MAX_SAFE_INTEGER","axisBulletsContainer","_bulletMask","exportable","updateSeriesLegend","updatePlotElements","_parseDataFrom","leftAxesWidth","rightAxesWidth","reinit","handleXAxisChange","updateXAxis","handleYAxisChange","updateYAxis","processXAxis","observe","handleXAxisRangeChange","processAxis","processYAxis","handleYAxisRangeChange","getCommonAxisRange","scrollbarX","zoomAxes","updateScrollbar","show_1","minZoomFactor","seriesAppeared","scrollbarY","scrollbar","skipRangeEvents","axes","axisStart","axisEnd","updateSeriesMasks","_xAxes","handleAxisRemoval","_yAxes","removeFromInvalidComponents","backgroundOpacity","_cursor","removeDispose","handleCursorPositionChange","handleCursorZoomStart","handleCursorZoomEnd","handleCursorPanStart","handleCursorPanning","handleCursorPanEnd","handleCursorCanceled","handleHideCursor","tapToActivate","setTapToActivate","xPosition_1","yPosition_1","showSeriesTooltip","exceptAxis","snapToSeries","xAxis_1","yAxis_1","closestDataItem_1","minDistance_1","dxPosition","dyPosition","distance","sqrt","_cursorXPosition","showAxisTooltip","_cursorYPosition","sortSeriesTooltips","hideObjectTooltip","seriesPoints","topLeft","bottomRight","filteredSeriesPoints","seriesPoint","firstSeries","sort","reverse","averageY","svgContainer","SVGContainer","top_1","bottom","dropped","nextHeight","pointY","nextY","except","getUpdatedRange","behavior","xRange","priority","yRange","_panStartXRange","_panStartYRange","_panEndXRange","panEndRange","delta","_panEndYRange","maxPanOut","panStartRange","newStart","newEnd","newRange","_scrollbarX","startGrip","endGrip","handleXScrollbarChange","arg","_scrollbarY","handleYScrollbarChange","fixRange","declination","realRange","cellWidth","handleWheel","svgPoint","htmlContainer","cssScale","plotPoint","shift","handleWheelReal","handleHorizontalWheel","horizontalMouseWheelBehavior","rangeX","rangeY","shiftStep","differenceX","newStartX","newEndX","differenceY","newStartY","newEndY","_mouseWheelDisposer","wheelable","_mouseWheelDisposer2","dataSourceDateFields","populateDataSourceFields","dataSourceNumberFields","len_1","len_2","_zoomOutButton","button","addData","rawDataItem","removeCount","addScrollbarData","removeScrollbarData","removeData","interactions","isTouchProtected","handleTapToActivate","handleTapToActivateDeactivation","sbstate","LineSeriesSegment","fillSprite","strokeSprite","drawSegment","points","closePoints","smoothnessX","smoothnessY","smooth","lineElement","fillElement","LineSeriesDataItem","LineSeries","minDistance","segments","createSegment","_segmentsIterator","tensionX","tensionY","segmentsContainer","initialY","setWorkingValue","setWorkingLocation","initialX","segment","tooltipColorSource","openSegmentWrapper","_adjustedStartIndex","sliceData","findAdjustedIndex","adjustedIndex","openIndex","params","openSegment","addToClose","closeIndex","propertiesChanged","getFirst","valuesFound","updateSegmentProperties","addPoints","closeSegment","itemProperties","checkOnly","propertyName","currentValue","currentValueStr","disposeChildren","Line","Rectangle","hasLabels","RadarSeriesDataItem","RadarSeries","connectEnds","radius","startAngle","endAngle","pixelRadius","pixelInnerRadius","unshift","updateRendererRefs","rendererX","rendererY","axisRendererY","AxisFillCircular","innerRadius","setPercentProperty","GridCircular","AxisLabelCircular","fdx","fdy","axisRadius","sign","pixelRadiusY","axisRadiusY","fixPosition","dx","dy","isNegative","realRadius","relativeRotation","labelRadius","bent","point_1","locationOnPath","bbox","dH","dW","_measuredHeight","_measuredWidth","AxisRendererCircular","pixelRadiusReal","useChartAngles","cos","atan2","sin","PI","arc","gridInnerRadius","fitsToBounds","AxisRendererRadial","gridType","axisAngle","gridLocation","WavedCircle","tooltipOrientation","RadarChartDataItem","RadarChart","innerRadiusModifyer","radarContainer","Circle","beforeDraw","innerRect","wr","hr","mr","maxRadius","diameter","_pixelInnerRadius","definedBBox","validatePosition","ClockHand","pin","startWidth","endWidth","hand","Trapezoid","leftSide","rightSide","x0","_pin","_hand","showValue","easing","_value","newAngle","currentAngle","rotationDirection","updateValue","GaugeChartDataItem","GaugeChart","hands","processHand","PercentSeriesDataItem","slice","toValue","ticksContainer","labelsContainer","_slice","slice_1","slices","slicesContainer","PercentSeries","_addAllDataItems","alignLabels","createSlice","_slices","initSlice","initTick","initLabel","currentStep","arrangeLabels","lh","nextLabel","getNextLabel","arrangeLabels2","previousTop","nextDataItem","handleSliceScale","handleSliceMove","setAlignLabels","labelState","tickState","PercentChartDataItem","PercentChart","PieTick","ix","scale","y0","iy","radiusY","r","PieSeriesDataItem","radiusValue","PieSeries","Slice","shiftRadius","_leftItems","_rightItems","_currentStartAngle","_arcRect","_maxRadiusPercent","radiusValuePercent","aAngle","middleAngle","bAngle","ignoreZeroValues","normalizedMiddleAngle","arcRect","depth","_pixelRadius","_startAngleInternal","_endAngleInternal","PieChartDataItem","PieChart","updateRadius","_chartPixelRadius","updateSeriesAngles","chartCont","chartRadius","chartPixelInnerRadius","seriesRadius","_chartPixelInnerRadius","PieSeries3DDataItem","depthValue","PieSeries3D","Slice3D","depthPercent","PieChart3DDataItem","PieChart3D","invalidateDataUsers","SlicedChartDataItem","SlicedChart","FlowDiagramNode","draggable","inert","invalidateLinks","handleHit","outgoingDataItems","toNode","incomingDataItems","fromNode","link","colorMode","gradient","stop_1","stops","stop_2","_incomingDataItems","sortBy","_incomingSorted","fromName","_outgoingDataItems","_outgoingSorted","setColorProperty","_background","column","FlowDiagramLink","positionBullets","_bulletsContainer","_bulletsMask","bulletsMask","middleLine","rotationField","addColor","setFill","_gradient","measureElement","Polyline","getTooltipX","getTooltipY","LinearGradient","FlowDiagramDataItem","toName","_link","link_1","links","FlowDiagram","nodePadding","minNodeSize","linksContainer","nodesContainer","nodes","sortNodes","node","strokeModifier","LinearGradientModifier","opacities","fillModifier","strNode","getNodeValue","_sorted","sortedIterator","incomingTotal","outgoingTotal","totalIncoming","totalOutgoing","changeSorting","_nodes","createNode","_links","createLink","LabelBullet","hideOversized","handleMaxSize","SankeyNode","nextInCoord","nextOutCoord","nameLabel","orientation_1","endX","endY","linkWidth","valueHeight","startX","startY","SankeyLink","tension","controlPointDistance","Polyspline","xt0","yt0","xt1","yt1","xb0","xb1","yb0","yb1","xm0","xm1","ym0","ym1","_bbox","cpd","kxt0","kyt0","kxt1","kyt1","kxm0","kym0","kxm1","kym1","kxb0","kyb0","kxb1","kyb1","SankeyDiagramDataItem","SankeyDiagram","nodeAlign","_levelCount","level","getNodeLevel","levels","calculateValueHeight","_levelSum","_levelNodesCount","maxSum","availableHeight","maxSumLevel","realValue","levelNodeCount","_maxSumLevel","maxSumLevelNodeCount","finalHeight","_heightAnimation","animationOptions","Animation","interpolationEasing","nextCoordinate","levelCoordinate","nodeCount","showReal","container_1","nodeHeight","_valueHeight","ChordNode","updateRotation","arc_1","sliceStartAngle_1","childAngle","childRadius","labelAngle","adjustedTotal","nextAngle","nonRibbon","percentWidth","valueAngle","mAngle","trueStartAngle","tx","ty","QuadraticCurve","cpx","cpy","p1","p2","cp","d","point1","point2","ChordLink","fromX","fromY","toX","toY","mAngle1","mAngle2","ChordDiagramDataItem","ChordDiagram","chordContainer","newTotal","Column","createAssets","handleKidAdded","ColumnSeriesDataItem","_column","setColumn","columns","_rangesColumns","ColumnSeries","_startLocation","_endLocation","clustered","columnsContainer","_columnsContainer","baseAxisSeries","clusterCount_1","disableUnusedColumns","validateDataElementReal","getStartLocation","getEndLocation","l","t","percentHeight","outOfBounds","offset","fixHorizontalCoordinate","fixVerticalCoordinate","axisLenght","column_1","realX","realY","realWidth","realHeight","setColumnStates","rangeColumn","rangesColumns","_dropFromOpenState","_dropFromPreviousState","_riseFromOpenState","_riseFromPreviousState","change","droppedFromOpen","setState","droppedFromPrevious","_columns","createColumnTemplate","fromOpenState_1","fromPreviousState_1","TreeMapSeriesDataItem","treeMapDataItem","_dataContext","TreeMapSeries","configField","hideReal","TreeMapDataItem","rows","hasChildren","getDuration","childValue","TreeMap","layoutAlgorithm","squarify","zoomable","maxLevels","currentLevel","hideParentColumns","sorting","xRenderer","yRenderer","seriesTemplates","zoomToChartDataItem","_homeDataItem","_navigationBar","navigationBar","createTreeSeries","_tempSeries","homeDataItem","_homeText","layoutItems","_updateDataItemIndexes","navigationData","parentDataItem","initSeries","createTreeSeriesReal","setData","currentlyZoomed","zoomToSeriesDataItem","toggleBullets","rangeChangeAnimation","_dataDisposers","binaryTree","dice","sliceDice","validateRawData","n","sums","Array","partition","j","valueOffset","valueTarget","k","hi","mid","valueLeft","valueRight","xk","yk","nodeValue","sumValue","newRatio","minRatio","alpha","beta","ratio","i0","i1","row","handleDataItemValueChange","getLegendLevel","legendParent","getExporting","exporting","info","AxisRendererX3D","dx3D","dy3D","handle3DChanged","AxisRendererY3D","Column3D","column3D","Rectangle3D","ColumnSeries3DDataItem","ColumnSeries3D","XYChart3DDataItem","XYChart3D","fixColumns","depthIndex","s","inversed_1","maskColumns","HeatLegend","markerContainer","markerCount","getMinFromRules","minValue_1","getMaxFromRules","maxValue_1","valueAxis","reverseOrder","minColor","maxColor","seriesFill","minOpacity","maxOpacity","minStrokeOpacity","maxStrokeOpacity","minStroke","maxStroke","strokeGradient","c","color_1","opacity_1","_valueAxis","dataFieldDefined","updateMinMax","seriesId_1","disposer_1","Candlestick","lowLine","highLine","CandlestickSeriesDataItem","lowValueX","lowValueY","highValueX","highValueY","CandlestickSeries","positiveColor","negativeColor","dropFromOpenState","riseFromOpenState","validateCandlestick","lowLine_1","highLine_1","yOpen","yClose","yLow","yLowField","yHigh","yHighField","open_2","close_2","xOpen","xClose","xLow","xLowField","xHigh","xHighField","rangeLowLine","rangehighLine","_xLowField","_yLowField","_xHighField","_yHighField","cw","ch","OHLC","openLine","highLowLine","closeLine","OHLCSeriesDataItem","OHLCSeries","openLine_1","highLowLine_1","closeLine_1","rangeOpenLine","rangeCloseLine","rangeHighLowLine","StepLineSeriesSegment","noRisers","vertical","StepLineSeriesDataItem","StepLineSeries","startLocationX","endLocationX","startLocationY","endLocationY","prevPoint","point0","RadarColumn","radarColumn","RadarColumnSeriesDataItem","RadarColumnSeries","lAngle","rAngle","tRadius","bRadius","cellAngle","temp","FunnelSlice","bottomWidth","topWidth","expandDistance","pt","pb","pr","pl","ed","tw","bw","tl","tr","br","bl","cpr","cpl","qp1","qp2","tickPoint","tt","tb","bt","bb","mlx","mrx","mty","mby","FunnelTick","p0","labelsOpposite","maxRight","maxBottom","FunnelSeriesDataItem","_sliceLink","sliceLink_1","sliceLinks","FunnelSeries","_nextY","bottomRatio","labelTemplate","dItem","_total","_count","getNextValue","nextValue","nextItem","formDataElement","sliceLink","decorateSlice","linkHeight","getLastLabel","lastLabel","lastY","lastX","_sliceLinks","labelAlign","labelValign","PyramidSeriesDataItem","PyramidSeries","pyramidHeight","valueIs","_nextWidth","relValue","_pyramidHeight","_pyramidWidth","absoluteSum","pyramidWidth","sliceTopWidth","tan","sliceHeight","sliceBottomWidth","totalSquare","square","sliceWidth","PictorialStackedSeriesDataItem","PictorialStackedSeries","_maskSprite","maskSprite","pictureWidth","pictureHeight","newWidth","newHeight","hs","ConeColumn","coneColumn","Cone","ConeSeriesDataItem","ConeSeries","CurvedColumn","curvedColumn","CurvedColumnSeriesDataItem","CurvedColumnSeries","DurationAxisDataItem","DurationAxis","_baseUnit","durationFormatter","axisDurationFormat","baseUnit","divisors","realDivisor","divisors_1","divisors_1_1","divisor","reducedCount","closest","getValueUnit","getFormat","_tooltipDurationFormat","tooltipDurationFormat","CircleBullet","circle","ErrorBullet","errorLine","NavigationBarDataItem","NavigationBar","textLink","TextLink","_linksIterator","triangle","Triangle","direction","separators","activeLink","fontWeight","getLast","separator","Cursor","_stick","trackable","interaction","handleCursorDown","handleCursorUp","handleCursorMove","_generalBehavior","isLocalElement","svg","_stickPoint","triggerMove","stick","triggerMoveReal","invalidatePosition","getPositions","triggerDown","triggerDownReal","setGlobalStyle","grabbing","triggerUp","triggerUpReal","requestFrame","updatePoint","upPoint","_upPointOrig","_downPointOrig","getHitOption","default","updateSelection","cancelable","shouldPreventGestures","preventDefault","lockElement","XYCursor","_lineX","_lineY","lineX","strokeDasharray","lineY","updateSize","_usesSelection","_positionPrecision","fixPoint","updateLinePositions","getPanningRanges","selectionX","selectionY","getRanges","currentX","currentY","handleXTooltipPosition","handleYTooltipPosition","fullWidthLineX","fullWidthLineY","_selection","_snapToDisposer","handleSnap","xx","yy","animationDuration","animationEasing","RadarCursor","truePixelRadius","updateLineX","updateLineY","fillStartAngle","fillEndAngle","downAngle","downRadius","currentRadius","_prevAngle","downSin","downCos","upAngle","upRadius"],"mappings":"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","file":"js/chunk-2d216c05.5029ae11.js","sourcesContent":["/**\r\n * Grip module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Button } from \"./Button\";\r\nimport { Sprite } from \"../Sprite\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { registry } from \"../Registry\";\r\nimport { percent } from \"../utils/Percent\";\r\nimport * as $path from \"../rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a grip element that can be used for scrolling or other things.\r\n *\r\n * @see {@link IGripEvents} for a list of available events\r\n * @see {@link IGripAdapters} for a list of available Adapters\r\n * @since 4.4.0\r\n */\r\nvar Grip = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Grip, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Grip() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"Grip\";\r\n        var cs = new InterfaceColorSet();\r\n        // Set defaults\r\n        _this.layout = \"absolute\";\r\n        _this.padding(10, 10, 10, 10);\r\n        _this.margin(3, 3, 3, 3);\r\n        _this.background.fillOpacity = 0.3;\r\n        _this.background.cornerRadius(10, 10, 10, 10);\r\n        // Create an icon\r\n        var icon = new Sprite();\r\n        icon.element = _this.paper.add(\"path\");\r\n        var path = $path.moveTo({ x: -6, y: 0 });\r\n        path += $path.lineTo({ x: 6, y: 0 });\r\n        path += $path.moveTo({ x: -8, y: -6 });\r\n        path += $path.lineTo({ x: 0, y: -12 });\r\n        path += $path.lineTo({ x: 8, y: -6 });\r\n        path += $path.moveTo({ x: -8, y: 6 });\r\n        path += $path.lineTo({ x: 0, y: 12 });\r\n        path += $path.lineTo({ x: 8, y: 6 });\r\n        icon.path = path;\r\n        icon.strokeWidth = 2;\r\n        icon.fillOpacity = 0;\r\n        icon.pixelPerfect = true;\r\n        icon.padding(0, 4, 0, 4);\r\n        icon.stroke = cs.getFor(\"text\");\r\n        icon.strokeOpacity = 0.7;\r\n        icon.align = \"center\";\r\n        icon.valign = \"middle\";\r\n        _this.icon = icon;\r\n        _this.label.dispose();\r\n        _this.label = undefined;\r\n        // Set default position\r\n        _this.position = \"right\";\r\n        // Set up autohide\r\n        _this.autoHideDelay = 3000;\r\n        _this.events.on(\"shown\", function (ev) {\r\n            if (_this._autoHideTimeout) {\r\n                _this._autoHideTimeout.dispose();\r\n            }\r\n            if (_this.autoHideDelay) {\r\n                _this._autoHideTimeout = _this.setTimeout(function () {\r\n                    _this.hide();\r\n                }, _this.autoHideDelay);\r\n            }\r\n        });\r\n        _this.events.on(\"down\", function (ev) {\r\n            if (_this._autoHideTimeout) {\r\n                _this._autoHideTimeout.dispose();\r\n            }\r\n        });\r\n        _this.events.on(\"out\", function (ev) {\r\n            if (_this.autoHideDelay) {\r\n                _this._autoHideTimeout = _this.setTimeout(function () {\r\n                    _this.hide();\r\n                }, _this.autoHideDelay);\r\n            }\r\n        });\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Grip.prototype, \"position\", {\r\n        /**\r\n         * @return Position\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"position\");\r\n        },\r\n        /**\r\n         * Sets position of the grip.\r\n         *\r\n         * Available options: \"left\", \"right\" (default), \"top\", \"bottom\".\r\n         *\r\n         * @param  value  Position\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"position\", value)) {\r\n                switch (value) {\r\n                    case \"left\":\r\n                        this.align = \"left\";\r\n                        this.valign = \"middle\";\r\n                        this.horizontalCenter = \"left\";\r\n                        this.verticalCenter = \"middle\";\r\n                        this.icon.rotation = 0;\r\n                        this.width = undefined;\r\n                        this.height = percent(30);\r\n                        break;\r\n                    case \"right\":\r\n                        this.align = \"right\";\r\n                        this.valign = \"middle\";\r\n                        this.horizontalCenter = \"right\";\r\n                        this.verticalCenter = \"middle\";\r\n                        this.icon.rotation = 0;\r\n                        this.width = undefined;\r\n                        this.height = percent(30);\r\n                        break;\r\n                    case \"top\":\r\n                        this.align = \"center\";\r\n                        this.valign = \"top\";\r\n                        this.horizontalCenter = \"middle\";\r\n                        this.verticalCenter = \"top\";\r\n                        this.icon.rotation = 90;\r\n                        this.width = percent(30);\r\n                        this.height = undefined;\r\n                        break;\r\n                    case \"bottom\":\r\n                        this.align = \"center\";\r\n                        this.valign = \"bottom\";\r\n                        this.horizontalCenter = \"middle\";\r\n                        this.verticalCenter = \"bottom\";\r\n                        this.icon.rotation = 90;\r\n                        this.width = percent(30);\r\n                        this.height = undefined;\r\n                        break;\r\n                    default:\r\n                        this.align = \"center\";\r\n                        this.valign = \"middle\";\r\n                        this.horizontalCenter = \"middle\";\r\n                        this.verticalCenter = \"middle\";\r\n                        this.icon.rotation = 90;\r\n                        this.width = percent(30);\r\n                        this.height = undefined;\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Grip.prototype, \"autoHideDelay\", {\r\n        /**\r\n         * @return Delay\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"autoHideDelay\");\r\n        },\r\n        /**\r\n         * Number of milliseconds to show grip until it is hidden automatically.\r\n         *\r\n         * @default 3000\r\n         * @param  value  Delay\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"autoHideDelay\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Grip;\r\n}(Button));\r\nexport { Grip };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Grip\"] = Grip;\r\n//# sourceMappingURL=Grip.js.map","/**\r\n * [[Chart]] class provides base functionality for all chart types to inherit.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { registry } from \"../core/Registry\";\r\nimport { Component } from \"../core/Component\";\r\nimport { MutableValueDisposer } from \"../core/utils/Disposer\";\r\nimport { ListTemplate, ListDisposer } from \"../core/utils/List\";\r\nimport { Container } from \"../core/Container\";\r\nimport { Label } from \"../core/elements/Label\";\r\nimport { Grip } from \"../core/elements/Grip\";\r\nimport { DataItem } from \"../core/DataItem\";\r\nimport { percent } from \"../core/utils/Percent\";\r\nimport * as $iter from \"../core/utils/Iterator\";\r\nimport * as $type from \"../core/utils/Type\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[Chart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar ChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return ChartDataItem;\r\n}(DataItem));\r\nexport { ChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A base class for all Charts.\r\n *\r\n * @see {@link IChartEvents} for a list of available Events\r\n * @see {@link IChartAdapters} for a list of available Adapters\r\n */\r\nvar Chart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Chart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Chart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * A reference to chart's [[Legend]].\r\n         * @ignore\r\n         */\r\n        _this._legend = new MutableValueDisposer();\r\n        if (_this.constructor === Chart) {\r\n            throw new Error(\"'Chart' cannot be instantiated directly. Please use a specific chart type.\");\r\n        }\r\n        _this.className = \"Chart\";\r\n        // Create a list of titles\r\n        var template = new Label();\r\n        _this.titles = new ListTemplate(template);\r\n        _this._disposers.push(new ListDisposer(_this.titles));\r\n        _this._disposers.push(template);\r\n        // Chart component is also a container. it holds _chartAndLegendCont and titles\r\n        _this.width = percent(100);\r\n        _this.height = percent(100);\r\n        _this.layout = \"vertical\";\r\n        // Chart and legend\r\n        var chartAndLegendContainer = _this.createChild(Container);\r\n        chartAndLegendContainer.shouldClone = false;\r\n        chartAndLegendContainer.layout = \"vertical\";\r\n        chartAndLegendContainer.width = percent(100);\r\n        chartAndLegendContainer.height = percent(100);\r\n        _this.chartAndLegendContainer = chartAndLegendContainer;\r\n        // Chart container holds all the elements of a chart, extept titles and legend\r\n        var chartContainer = chartAndLegendContainer.createChild(Container);\r\n        chartContainer.shouldClone = false;\r\n        chartContainer.width = percent(100);\r\n        chartContainer.height = percent(100);\r\n        _this.chartContainer = chartContainer;\r\n        _this.showOnInit = true;\r\n        _this._disposers.push(_this._legend);\r\n        // Add title list events to apply certain formatting options and to make\r\n        // the chart reference them as accessible screen reader labels\r\n        _this.titles.events.on(\"inserted\", function (label) {\r\n            _this.processTitle(label);\r\n            _this.updateReaderTitleReferences();\r\n        }, _this, false);\r\n        _this.titles.events.on(\"removed\", function (label) {\r\n            _this.updateReaderTitleReferences();\r\n        }, _this, false);\r\n        // Accessibility\r\n        // It seems we can't set focusable on the whole chart because it seems to\r\n        // mess up the whole focus event system - getting a focus on an inside\r\n        // object also trigger focus on parent\r\n        //this.focusable = true;\r\n        _this.role = \"region\";\r\n        _this.defaultState.transitionDuration = 1;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    Chart.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Chart\");\r\n        }\r\n    };\r\n    /**\r\n     * Initiates drawing of the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Chart.prototype.draw = function () {\r\n        this.fixLayout();\r\n        _super.prototype.draw.call(this);\r\n    };\r\n    /**\r\n     * Updates legend's hierarchy based on the position.\r\n     */\r\n    Chart.prototype.fixLayout = function () {\r\n        var legend = this.legend;\r\n        if (legend) {\r\n            var chartAndLegendContainer = this.chartAndLegendContainer;\r\n            var chartContainer = this.chartContainer;\r\n            chartContainer.x = undefined;\r\n            chartContainer.y = undefined;\r\n            legend.x = undefined;\r\n            legend.y = undefined;\r\n            switch (legend.position) {\r\n                case \"left\":\r\n                    chartAndLegendContainer.layout = \"horizontal\";\r\n                    if (!$type.isNumber(legend.width)) {\r\n                        legend.width = 200;\r\n                    }\r\n                    //legend.maxWidth = legend.width;\r\n                    legend.toBack();\r\n                    break;\r\n                case \"right\":\r\n                    chartAndLegendContainer.layout = \"horizontal\";\r\n                    if (!$type.isNumber(legend.width)) {\r\n                        legend.width = 200;\r\n                    }\r\n                    //legend.maxWidth = legend.width;\r\n                    legend.toFront();\r\n                    break;\r\n                case \"top\":\r\n                    chartAndLegendContainer.layout = \"vertical\";\r\n                    legend.maxWidth = undefined;\r\n                    legend.width = percent(100);\r\n                    legend.toBack();\r\n                    break;\r\n                case \"bottom\":\r\n                    chartAndLegendContainer.layout = \"vertical\";\r\n                    legend.maxWidth = undefined;\r\n                    legend.width = percent(100);\r\n                    legend.toFront();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Setups the legend to use the chart's data.\r\n     */\r\n    Chart.prototype.feedLegend = function () {\r\n        // Nothing here. This method is provided only as a \"placeholder\" for\r\n        // extending classes to override\r\n    };\r\n    /**\r\n     * Adds a new title to the chart when it is inserted into chart's titles\r\n     * list.\r\n     * @param event  An event object which is triggered when inserting into titles list\r\n     * @return Label object\r\n     */\r\n    Chart.prototype.processTitle = function (event) {\r\n        var title = event.newValue;\r\n        title.parent = this;\r\n        title.toBack();\r\n        title.shouldClone = false;\r\n        title.align = \"center\";\r\n        // Need to explicitly apply the `id` attribute so it can be referenced by\r\n        // `aria-labelledby`\r\n        title.uidAttr();\r\n        return title;\r\n    };\r\n    /**\r\n     * Checks if chart has any title elements. If it does, we will use them in an\r\n     * `aria-labelledby` attribute so that screen readers can use them to properly\r\n     * describe the chart when it is focused or hovered.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Chart.prototype.updateReaderTitleReferences = function () {\r\n        if (this.titles.length) {\r\n            var titleIds_1 = [];\r\n            $iter.each(this.titles.iterator(), function (title) {\r\n                titleIds_1.push(title.uid);\r\n            });\r\n            this.setSVGAttribute({ \"aria-labelledby\": titleIds_1.join(\" \") });\r\n        }\r\n        else {\r\n            this.removeSVGAttribute(\"aria-labelledby\");\r\n        }\r\n    };\r\n    Object.defineProperty(Chart.prototype, \"legend\", {\r\n        /**\r\n         * @return Legend\r\n         */\r\n        get: function () {\r\n            return this._legend.get();\r\n        },\r\n        /**\r\n         * Holds the instance of chart's [[Leged]].\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/legend/} for more information about legends\r\n         * @param Legend\r\n         */\r\n        set: function (legend) {\r\n            this.setLegend(legend);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Prepares the legend instance for use in this chart.\r\n     *\r\n     * @param legend  Legend\r\n     */\r\n    Chart.prototype.setLegend = function (legend) {\r\n        var _this = this;\r\n        if (this._legend.get() !== legend) {\r\n            if (legend) {\r\n                // Set legend options\r\n                legend.parent = this.chartAndLegendContainer;\r\n                this._legend.set(legend, legend.events.on(\"propertychanged\", function (event) {\r\n                    if (event.property == \"position\" || event.property == \"width\") {\r\n                        _this.fixLayout();\r\n                    }\r\n                }, undefined, false));\r\n            }\r\n            else {\r\n                this._legend.reset();\r\n            }\r\n            this.feedLegend();\r\n        }\r\n    };\r\n    /**\r\n     * Destroys this object and all related data.\r\n     */\r\n    Chart.prototype.dispose = function () {\r\n        // otherwise there might be some errors when disposing chart which was just inited\r\n        if (this.legend) {\r\n            this.legend.dispose();\r\n        }\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    Chart.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Set up legend\r\n            if ($type.hasValue(config.legend) && !$type.hasValue(config.legend.type)) {\r\n                config.legend.type = \"Legend\";\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    /**\r\n     * Copies all properties from another instance of [[Series]].\r\n     *\r\n     * @param source  Source series\r\n     */\r\n    Chart.prototype.copyFrom = function (source) {\r\n        this.titles.copyFrom(source.titles);\r\n        this.chartContainer.copyFrom(source.chartContainer);\r\n        if (source.legend) {\r\n            this.legend = source.legend.clone();\r\n            this.legend.removeChildren();\r\n        }\r\n        _super.prototype.copyFrom.call(this, source);\r\n    };\r\n    Object.defineProperty(Chart.prototype, \"dragGrip\", {\r\n        /**\r\n         * @return Grip\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._dragGrip) {\r\n                var grip_1 = this.tooltipContainer.createChild(Grip);\r\n                grip_1.align = \"right\";\r\n                grip_1.valign = \"middle\";\r\n                grip_1.hide(0);\r\n                grip_1.events.on(\"down\", function (ev) {\r\n                    if (ev.touch) {\r\n                        _this.interactionsEnabled = false;\r\n                    }\r\n                });\r\n                grip_1.events.on(\"up\", function (ev) {\r\n                    _this.interactionsEnabled = true;\r\n                });\r\n                this.events.on(\"down\", function (ev) {\r\n                    if (ev.touch) {\r\n                        grip_1.show();\r\n                    }\r\n                });\r\n                this._dragGrip = grip_1;\r\n            }\r\n            return this._dragGrip;\r\n        },\r\n        /**\r\n         * An instance of [[Grip]] which serves as a grip point which appears on\r\n         * touch and allows scrolling whole page even if chart is occupying the\r\n         * whole of the screen and would otherwise prevent scrolling.\r\n         *\r\n         * @since 4.4.0\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/touch/} For more information.\r\n         * @param  value  Grip\r\n         */\r\n        set: function (value) {\r\n            this._dragGrip = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Chart.prototype, \"focusable\", {\r\n        get: function () {\r\n            return this.parent.focusable;\r\n        },\r\n        set: function (value) {\r\n            this.parent.focusable = true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Chart;\r\n}(Component));\r\nexport { Chart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Chart\"] = Chart;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Reduce horizontal margins\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.widthXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Chart) {\r\n            var state = target.states.create(stateId);\r\n            if (target.pixelPaddingLeft > 10) {\r\n                state.properties.paddingLeft = 10;\r\n            }\r\n            if (target.pixelPaddingRight > 10) {\r\n                state.properties.paddingRight = 10;\r\n            }\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Reduce vertical margins\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.heightXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Chart) {\r\n            var state = target.states.create(stateId);\r\n            if (target.pixelPaddingTop > 10) {\r\n                state.properties.paddingTop = 10;\r\n            }\r\n            if (target.pixelPaddingBottom > 10) {\r\n                state.properties.paddingBottom = 10;\r\n            }\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Remove horizontal padding\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.widthXXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Chart) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.paddingLeft = 0;\r\n            state.properties.paddingRight = 0;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Remove vertical padding\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.heightXXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Chart) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.paddingTop = 0;\r\n            state.properties.paddingBottom = 0;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=Chart.js.map","/**\r\n * Module that defines everything related to building bullets.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates bullets.\r\n *\r\n * @see {@link IBulletEvents} for a list of available events\r\n * @see {@link IBulletAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar Bullet = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Bullet, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Bullet() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"Bullet\";\r\n        _this.isMeasured = false;\r\n        _this.tooltipX = 0;\r\n        _this.tooltipY = 0;\r\n        _this.layout = \"none\";\r\n        _this.applyOnClones = true;\r\n        _this.copyToLegendMarker = true;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Bullet.prototype, \"locationX\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"locationX\");\r\n        },\r\n        /**\r\n         * Relative horizontal location within cell. (0-1)\r\n         *\r\n         * @param value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"locationX\", value)) {\r\n                var dataItem = this.dataItem;\r\n                if (dataItem && dataItem.component) {\r\n                    dataItem.component.invalidate();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Bullet.prototype, \"locationY\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"locationY\");\r\n        },\r\n        /**\r\n         * Relative vertical location within cell. (0-1)\r\n         *\r\n         * @param value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"locationY\", value)) {\r\n                var dataItem = this.dataItem;\r\n                if (dataItem && dataItem.component) {\r\n                    dataItem.component.invalidate();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Bullet.prototype, \"xField\", {\r\n        /**\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"xField\");\r\n        },\r\n        /**\r\n         * [xField description]\r\n         *\r\n         * @todo Description\r\n         * @param value  [description]\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"xField\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Bullet.prototype, \"yField\", {\r\n        /**\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"yField\");\r\n        },\r\n        /**\r\n         * [yField description]\r\n         *\r\n         * Description\r\n         * @param value  [description]\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"yField\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Bullet.prototype, \"isDynamic\", {\r\n        /**\r\n         * @return Redraw on data change?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"isDynamic\");\r\n        },\r\n        /**\r\n         * Indicates if the bullet is \"dynamic\".\r\n         *\r\n         * In most cases the bullets remain the same, even if the underlying data\r\n         * changes.\r\n         *\r\n         * However, in cases where bullet also displays a label, or its size depends\r\n         * on data, it also needs to be redrawn when the underlying data changes.\r\n         *\r\n         * Only those bullets that have set `isDynamic = true` will be redrawn each\r\n         * time data changes. Regular bullets will be reused as they are.\r\n         *\r\n         * @default false\r\n         * @param value  Redraw on data change?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"isDynamic\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Bullet.prototype, \"copyToLegendMarker\", {\r\n        /**\r\n         * @return Redraw on data change?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"copyToLegendMarker\");\r\n        },\r\n        /**\r\n         * Indicates if the bullet should be copied to legend marker\r\n         *\r\n         * @default false\r\n         * @param value  Redraw on data change?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"copyToLegendMarker\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Bullet;\r\n}(Container));\r\nexport { Bullet };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Bullet\"] = Bullet;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Hide bullets\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.isXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Bullet) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=Bullet.js.map","/**\r\n * Legend-related functionality.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component } from \"../core/Component\";\r\nimport { DataItem } from \"../core/DataItem\";\r\nimport { ListTemplate, ListDisposer } from \"../core/utils/List\";\r\nimport { RoundedRectangle } from \"../core/elements/RoundedRectangle\";\r\nimport { Container } from \"../core/Container\";\r\nimport { Label } from \"../core/elements/Label\";\r\nimport { keyboard } from \"../core/utils/Keyboard\";\r\nimport { registry } from \"../core/Registry\";\r\nimport { getInteraction } from \"../core/interaction/Interaction\";\r\nimport { percent } from \"../core/utils/Percent\";\r\nimport { InterfaceColorSet } from \"../core/utils/InterfaceColorSet\";\r\nimport * as $utils from \"../core/utils/Utils\";\r\nimport * as $type from \"../core/utils/Type\";\r\nimport { Sprite } from \"../core/Sprite\";\r\nimport { Disposer } from \"../core/utils/Disposer\";\r\nimport { MouseCursorStyle } from \"../core/interaction/Mouse\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[Legend]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar LegendDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LegendDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function LegendDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this.childrenCreated = false;\r\n        _this.className = \"LegendDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(LegendDataItem.prototype, \"label\", {\r\n        /**\r\n         * A legend item's [[Label]] element.\r\n         *\r\n         * @return Label\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._label) {\r\n                var label_1 = this.component.labels.create();\r\n                this._label = label_1;\r\n                this.addSprite(label_1);\r\n                this._disposers.push(label_1);\r\n                label_1.parent = this.itemContainer;\r\n                this._disposers.push(new Disposer(function () {\r\n                    if ($type.hasValue(_this.component)) {\r\n                        _this.component.labels.removeValue(label_1);\r\n                    }\r\n                }));\r\n            }\r\n            return this._label;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LegendDataItem.prototype, \"color\", {\r\n        /**\r\n         * @return Main color\r\n         */\r\n        get: function () {\r\n            return this.properties.color;\r\n        },\r\n        /**\r\n         * Main color of legend data item.\r\n         *\r\n         * This is set by the target element this legend item represents, like\r\n         * a Series or a Slice.\r\n         *\r\n         * It can be used to derive a color in legend's sub-items, like label:\r\n         *\r\n         * ```TypeScript\r\n         * chart.legend.labels.template.text = \"[{color}]{name}[/]\";\r\n         * ```\r\n         * ```JavaScript\r\n         * chart.legend.labels.template.text = \"[{color}]{name}[/]\";\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"legend\": {\r\n         *     // ...\r\n         *     \"labels\": {\r\n         *       \"text\": \"[{color}]{name}[/]\"\r\n         *     }\r\n         *   }\r\n         * }\r\n         * ```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/legend/#Legend_labels} For more information about configuring legend labels.\r\n         * @param value  Main color\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"color\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LegendDataItem.prototype, \"valueLabel\", {\r\n        /**\r\n         * A legend item's [[Label]] element for \"value label\".\r\n         *\r\n         * @return Label\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._valueLabel) {\r\n                var valueLabel_1 = this.component.valueLabels.create();\r\n                this._valueLabel = valueLabel_1;\r\n                this.addSprite(valueLabel_1);\r\n                this._disposers.push(valueLabel_1);\r\n                valueLabel_1.parent = this.itemContainer;\r\n                this._disposers.push(new Disposer(function () {\r\n                    if ($type.hasValue(_this.component)) {\r\n                        _this.component.valueLabels.removeValue(valueLabel_1);\r\n                    }\r\n                }));\r\n            }\r\n            return this._valueLabel;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LegendDataItem.prototype, \"itemContainer\", {\r\n        /**\r\n         * A reference to the main [[Container]] that holds legend item's elements:\r\n         * marker and labels.\r\n         *\r\n         * @return Item container\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._itemContainer) {\r\n                var component_1 = this.component;\r\n                var itemContainer_1 = component_1.itemContainers.create();\r\n                itemContainer_1.parent = component_1;\r\n                this._itemContainer = itemContainer_1;\r\n                this.addSprite(itemContainer_1);\r\n                this._disposers.push(itemContainer_1);\r\n                // Add click/tap event to toggle item\r\n                if (itemContainer_1.togglable) {\r\n                    itemContainer_1.events.on(\"toggled\", function (ev) {\r\n                        component_1.toggleDataItem(ev.target.dataItem);\r\n                    }, undefined, false);\r\n                }\r\n                // Add focus event so that we can track which object is currently in focus\r\n                // for keyboard toggling\r\n                if (itemContainer_1.focusable) {\r\n                    itemContainer_1.events.on(\"focus\", function (ev) {\r\n                        component_1.focusedItem = ev.target.dataItem;\r\n                    }, undefined, false);\r\n                    itemContainer_1.events.on(\"blur\", function (ev) {\r\n                        component_1.focusedItem = undefined;\r\n                    }, undefined, false);\r\n                }\r\n                this._disposers.push(new Disposer(function () {\r\n                    if ($type.hasValue(_this.component)) {\r\n                        _this.component.itemContainers.removeValue(itemContainer_1);\r\n                    }\r\n                }));\r\n                if (this.dataContext.uidAttr) {\r\n                    itemContainer_1.readerControls = this.dataContext.uidAttr();\r\n                    itemContainer_1.readerLabelledBy = this.dataContext.uidAttr();\r\n                }\r\n                var sprite = this.dataContext;\r\n                if ((sprite instanceof DataItem || sprite instanceof Sprite) && !sprite.isDisposed()) {\r\n                    itemContainer_1.addDisposer(sprite.events.on(\"visibilitychanged\", function (ev) {\r\n                        itemContainer_1.readerChecked = ev.visible;\r\n                        itemContainer_1.events.disableType(\"toggled\");\r\n                        itemContainer_1.isActive = !ev.visible;\r\n                        itemContainer_1.events.enableType(\"toggled\");\r\n                    }, undefined, false));\r\n                    sprite.addDisposer(new Disposer(function () {\r\n                        if (_this.component) {\r\n                            _this.component.dataItems.remove(_this);\r\n                        }\r\n                    }));\r\n                    if (sprite instanceof Sprite) {\r\n                        itemContainer_1.addDisposer(sprite.events.on(\"hidden\", function (ev) {\r\n                            itemContainer_1.readerChecked = false;\r\n                            itemContainer_1.events.disableType(\"toggled\");\r\n                            itemContainer_1.isActive = true;\r\n                            itemContainer_1.events.enableType(\"toggled\");\r\n                        }, undefined, false));\r\n                        itemContainer_1.addDisposer(sprite.events.on(\"shown\", function (ev) {\r\n                            itemContainer_1.readerChecked = true;\r\n                            itemContainer_1.events.disableType(\"toggled\");\r\n                            itemContainer_1.isActive = false;\r\n                            itemContainer_1.events.enableType(\"toggled\");\r\n                        }, undefined, false));\r\n                    }\r\n                }\r\n            }\r\n            return this._itemContainer;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LegendDataItem.prototype, \"marker\", {\r\n        /**\r\n         * A [[Container]] that holds legend item's marker element.\r\n         *\r\n         * @return Marker\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._marker) {\r\n                var marker_1 = this.component.markers.create();\r\n                this._marker = marker_1;\r\n                marker_1.parent = this.itemContainer;\r\n                this.addSprite(marker_1);\r\n                this._disposers.push(marker_1);\r\n                this._disposers.push(new Disposer(function () {\r\n                    if ($type.hasValue(_this.component)) {\r\n                        _this.component.markers.removeValue(marker_1);\r\n                    }\r\n                }));\r\n            }\r\n            return this._marker;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return LegendDataItem;\r\n}(DataItem));\r\nexport { LegendDataItem };\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a class that carries legend settings.\r\n *\r\n * A legend might change its settings dynamically. Legend can also be shared\r\n * by several elements, requiring different settings.\r\n *\r\n * Having legend's settings in a separate object is a good way to \"hot swap\"\r\n * a set of settings for the legend.\r\n */\r\nvar LegendSettings = /** @class */ (function () {\r\n    function LegendSettings() {\r\n        /**\r\n         * Should marker be created for each legend item.\r\n         */\r\n        this.createMarker = true;\r\n    }\r\n    return LegendSettings;\r\n}());\r\nexport { LegendSettings };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * [[Legend]] class is used to create legend for the chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/legend/} for Legend documentation\r\n * @see {@link ILegendEvents} for a list of available events\r\n * @see {@link ILegendAdapters} for a list of available Adapters\r\n */\r\nvar Legend = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Legend, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Legend() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"Legend\";\r\n        // Set defaults\r\n        _this.layout = \"grid\";\r\n        _this.setPropertyValue(\"useDefaultMarker\", false);\r\n        _this.setPropertyValue(\"contentAlign\", \"center\");\r\n        // Create a template container and list for legend items\r\n        var itemContainer = new Container();\r\n        itemContainer.applyOnClones = true;\r\n        itemContainer.padding(10, 0, 10, 0);\r\n        itemContainer.margin(0, 10, 0, 0);\r\n        itemContainer.layout = \"horizontal\";\r\n        itemContainer.clickable = true;\r\n        itemContainer.focusable = true;\r\n        itemContainer.role = \"switch\";\r\n        itemContainer.togglable = true;\r\n        itemContainer.cursorOverStyle = MouseCursorStyle.pointer;\r\n        itemContainer.background.fillOpacity = 0; // creates hit area\r\n        // Create container list using item template we just created\r\n        _this.itemContainers = new ListTemplate(itemContainer);\r\n        _this._disposers.push(new ListDisposer(_this.itemContainers));\r\n        _this._disposers.push(_this.itemContainers.template);\r\n        // Set up global keyboard events for toggling elements\r\n        _this._disposers.push(getInteraction().body.events.on(\"keyup\", function (ev) {\r\n            if (keyboard.isKey(ev.event, \"enter\") && _this.focusedItem && _this.focusedItem.itemContainer.clickable) {\r\n                _this.toggleDataItem(_this.focusedItem);\r\n            }\r\n        }, _this));\r\n        var interfaceColors = new InterfaceColorSet();\r\n        // Create a template container and list for the a marker\r\n        var marker = new Container();\r\n        marker.width = 23;\r\n        marker.height = 23;\r\n        marker.interactionsEnabled = false;\r\n        marker.applyOnClones = true;\r\n        marker.setStateOnChildren = true;\r\n        marker.background.fillOpacity = 0;\r\n        marker.background.strokeOpacity = 0;\r\n        marker.propertyFields.fill = \"fill\";\r\n        marker.valign = \"middle\";\r\n        var disabledColor = interfaceColors.getFor(\"disabledBackground\");\r\n        marker.events.on(\"childadded\", function (event) {\r\n            var child = event.newValue;\r\n            var activeState = child.states.create(\"active\");\r\n            activeState.properties.stroke = disabledColor;\r\n            activeState.properties.fill = disabledColor;\r\n        });\r\n        _this.markers = new ListTemplate(marker);\r\n        _this._disposers.push(new ListDisposer(_this.markers));\r\n        _this._disposers.push(_this.markers.template);\r\n        // Create a legend background element\r\n        var rectangle = marker.createChild(RoundedRectangle);\r\n        rectangle.width = percent(100);\r\n        rectangle.height = percent(100);\r\n        rectangle.applyOnClones = true;\r\n        rectangle.propertyFields.fill = \"fill\";\r\n        rectangle.strokeOpacity = 0;\r\n        // Create a template container and list for item labels\r\n        var label = new Label();\r\n        label.text = \"{name}\";\r\n        label.margin(0, 5, 0, 5);\r\n        label.valign = \"middle\";\r\n        label.applyOnClones = true;\r\n        label.states.create(\"active\").properties.fill = interfaceColors.getFor(\"disabledBackground\");\r\n        _this.labels = new ListTemplate(label);\r\n        _this._disposers.push(new ListDisposer(_this.labels));\r\n        _this._disposers.push(_this.labels.template);\r\n        label.interactionsEnabled = false;\r\n        // Create a template container and list for item value labels\r\n        var valueLabel = new Label();\r\n        valueLabel.margin(0, 5, 0, 0);\r\n        valueLabel.valign = \"middle\";\r\n        valueLabel.width = 50; // to avoid rearranging legend entries when value changes.\r\n        valueLabel.align = \"right\";\r\n        valueLabel.textAlign = \"end\";\r\n        valueLabel.applyOnClones = true;\r\n        valueLabel.states.create(\"active\").properties.fill = interfaceColors.getFor(\"disabledBackground\");\r\n        valueLabel.interactionsEnabled = false;\r\n        _this.valueLabels = new ListTemplate(valueLabel);\r\n        _this._disposers.push(new ListDisposer(_this.valueLabels));\r\n        _this._disposers.push(_this.valueLabels.template);\r\n        _this.position = \"bottom\"; // don't use setPropertyValue here!\r\n        // Create a state for disabled legend items\r\n        itemContainer.states.create(\"active\");\r\n        itemContainer.setStateOnChildren = true;\r\n        // Apply accessibility settings\r\n        _this.role = \"group\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    Legend.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Legend\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    Legend.prototype.createDataItem = function () {\r\n        return new LegendDataItem();\r\n    };\r\n    /**\r\n     * [validateDataElement description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem Data item\r\n     * @todo Description\r\n     * @todo Figure out how to update appearance of legend item without losing focus\r\n     * @todo Update legend marker appearance as apperance of related series changes\r\n     */\r\n    Legend.prototype.validateDataElement = function (dataItem) {\r\n        _super.prototype.validateDataElement.call(this, dataItem);\r\n        // Get data item (legend item's) container\r\n        var container = dataItem.itemContainer;\r\n        var marker = dataItem.marker;\r\n        $utils.used(dataItem.label);\r\n        var valueLabel = dataItem.valueLabel;\r\n        // Set parent and update current state\r\n        container.readerChecked = dataItem.dataContext.visible;\r\n        // Tell series its legend data item\r\n        dataItem.dataContext.legendDataItem = dataItem;\r\n        var legendSettings = dataItem.dataContext.legendSettings;\r\n        // If we are not using default markers, create a unique legend marker based\r\n        // on the data item type\r\n        var dataContext = dataItem.dataContext;\r\n        if (dataContext.createLegendMarker && (!this.useDefaultMarker || !(dataContext instanceof Sprite))) {\r\n            if (!dataItem.childrenCreated) {\r\n                dataContext.createLegendMarker(marker);\r\n                dataItem.childrenCreated = true;\r\n            }\r\n        }\r\n        if (dataContext.updateLegendValue) {\r\n            dataContext.updateLegendValue(); // this solves issue with external legend, as legend is created after chart updates legend values\r\n        }\r\n        if (dataContext.component && dataContext.component.updateLegendValue) {\r\n            dataContext.component.updateLegendValue(dataContext);\r\n        }\r\n        if (valueLabel.invalid) {\r\n            valueLabel.validate();\r\n        }\r\n        if (valueLabel.currentText == \"\" || valueLabel.currentText == undefined) {\r\n            valueLabel.__disabled = true;\r\n        }\r\n        else {\r\n            valueLabel.__disabled = false;\r\n        }\r\n        if (legendSettings && (legendSettings.itemValueText != undefined || legendSettings.valueText != undefined)) {\r\n            valueLabel.__disabled = false;\r\n        }\r\n        var visible = dataItem.dataContext.visible;\r\n        if (visible === undefined) {\r\n            visible = true;\r\n        }\r\n        visible = $type.toBoolean(visible);\r\n        dataItem.dataContext.visible = visible;\r\n        container.events.disableType(\"toggled\");\r\n        container.isActive = !visible;\r\n        container.events.enableType(\"toggled\");\r\n    };\r\n    Object.defineProperty(Legend.prototype, \"position\", {\r\n        /**\r\n         * @return Position\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"position\");\r\n        },\r\n        /**\r\n         * Position of the legend.\r\n         *\r\n         * Options: \"left\", \"right\", \"top\", \"bottom\" (default), or \"absolute\".\r\n         *\r\n         * IMPORTANT: [[MapChart]] will ignore this setting, as it is using different\r\n         * layout structure than other charts.\r\n         *\r\n         * To position legend in [[MapChart]] set legend's `align` (`\"left\"` or\r\n         * `\"right\"`) and `valign` (`\"top\"` or `\"bottom\"`) properties instead.\r\n         *\r\n         * @default \"bottom\"\r\n         * @param value  Position\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"position\", value)) {\r\n                if (value == \"left\" || value == \"right\") {\r\n                    this.margin(10, 20, 10, 20);\r\n                    this.valign = \"middle\";\r\n                    this.itemContainers.template.width = percent(100);\r\n                    this.valueLabels.template.width = percent(100);\r\n                    this.labels.template.truncate = true;\r\n                    this.labels.template.fullWords = false;\r\n                }\r\n                else {\r\n                    this.itemContainers.template.width = undefined;\r\n                    this.itemContainers.template.maxWidth = undefined;\r\n                    this.valueLabels.template.width = 50;\r\n                    this.labels.template.truncate = false;\r\n                    this.width = percent(100);\r\n                }\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Legend.prototype, \"useDefaultMarker\", {\r\n        /**\r\n         * @return Use default marker?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"useDefaultMarker\");\r\n        },\r\n        /**\r\n         * Should legend try to mirror the look of the related item when building\r\n         * the marker for legend item?\r\n         *\r\n         * If set to `true` it will try to make the marker look like its related\r\n         * item.\r\n         *\r\n         * E.g. if an item is for a Line Series, it will display a line of the\r\n         * same thickness, color, and will use the same bullets if series have them.\r\n         *\r\n         * @default false\r\n         * @param value Use default marker?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"useDefaultMarker\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Toggles a legend item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param item Legend item\r\n     * @todo Maybe do it with togglable instead\r\n     */\r\n    Legend.prototype.toggleDataItem = function (item) {\r\n        var dataContext = item.dataContext;\r\n        if (!dataContext.visible || dataContext.isHiding || (dataContext instanceof Sprite && dataContext.isHidden)) {\r\n            item.color = item.colorOrig;\r\n            item.itemContainer.isActive = false;\r\n            if (dataContext.hidden === true) {\r\n                dataContext.hidden = false;\r\n            }\r\n            if (dataContext.show) {\r\n                dataContext.show();\r\n            }\r\n            else {\r\n                dataContext.visible = true;\r\n            }\r\n        }\r\n        else {\r\n            item.itemContainer.isActive = true;\r\n            if (dataContext.hide) {\r\n                dataContext.hide();\r\n            }\r\n            else {\r\n                dataContext.visible = false;\r\n            }\r\n            item.color = new InterfaceColorSet().getFor(\"disabledBackground\");\r\n        }\r\n    };\r\n    Object.defineProperty(Legend.prototype, \"preloader\", {\r\n        /**\r\n         * Override preloader method so that legend does not accidentally show its\r\n         * own preloader.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Always `undefined`\r\n         */\r\n        get: function () {\r\n            return;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * [handleDataItemPropertyChange description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Legend.prototype.handleDataItemPropertyChange = function (dataItem, name) {\r\n        dataItem.valueLabel.invalidate();\r\n        dataItem.label.invalidate();\r\n    };\r\n    return Legend;\r\n}(Component));\r\nexport { Legend };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Legend\"] = Legend;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Move legend to below the chart if chart is narrow\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.widthXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Legend && (target.position == \"left\" || target.position == \"right\")) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.position = \"bottom\";\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Move legend to the right if chart is very short\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.heightXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Legend && (target.position == \"top\" || target.position == \"bottom\")) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.position = \"right\";\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Disable legend altogether on small charts\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.isXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Legend) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=Legend.js.map","/**\r\n * Functionality for any series-based elements, like Line Series (graphs),\r\n * Pie slice lists, etc.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component } from \"../../core/Component\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { List, ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Dictionary, DictionaryDisposer } from \"../../core/utils/Dictionary\";\r\nimport { DataItem } from \"../../core/DataItem\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { Tooltip } from \"../../core/elements/Tooltip\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\nimport { LegendSettings } from \"../Legend\";\r\nimport { options } from \"../../core/Options\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $ease from \"../../core/utils/Ease\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $colors from \"../../core/utils/Colors\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[Series]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar SeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"SeriesDataItem\";\r\n        //@todo Should we make `bullets` list disposable?\r\n        //this._disposers.push(new DictionaryDisposer(this.bullets));\r\n        _this.values.value = {};\r\n        _this.values.value = {};\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SeriesDataItem.prototype, \"bullets\", {\r\n        /**\r\n         * A dictionary of data items bullets, where key is uid of a bullet template.\r\n         */\r\n        get: function () {\r\n            if (!this._bullets) {\r\n                this._bullets = new Dictionary();\r\n                this._disposers.push(new DictionaryDisposer(this._bullets));\r\n            }\r\n            return this._bullets;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Destroys this object and all related data.\r\n     */\r\n    SeriesDataItem.prototype.dispose = function () {\r\n        this.bullets.clear();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    Object.defineProperty(SeriesDataItem.prototype, \"value\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.value.value;\r\n        },\r\n        /**\r\n         * data items's numeric value.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"value\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SeriesDataItem;\r\n}(DataItem));\r\nexport { SeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines base class for any kind of serial data.\r\n *\r\n * @see {@link ISeriesEvents} for a list of available Events\r\n * @see {@link ISeriesAdapters} for a list of available Adapters\r\n * @todo Separate axis-related stuff to some other class so that MapSeries would not have unrelated stuff\r\n */\r\nvar Series = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Series, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Series() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Should this series excluded from the axis scale calculations?\r\n         *\r\n         * @default false\r\n         */\r\n        _this._ignoreMinMax = false;\r\n        /**\r\n         * Should series' bullets?\r\n         *\r\n         * @default true\r\n         */\r\n        _this._showBullets = true;\r\n        /**\r\n         * Settings for the appearance of the related legend items.\r\n         */\r\n        _this.legendSettings = new LegendSettings();\r\n        /**\r\n         * Lowest overal values by type.\r\n         */\r\n        _this._tmin = new Dictionary();\r\n        /**\r\n         * Highest overal values by type.\r\n         */\r\n        _this._tmax = new Dictionary();\r\n        /**\r\n         * Lowest values in current selection by type.\r\n         */\r\n        _this._smin = new Dictionary();\r\n        /**\r\n         * Highest values in current selection by type.\r\n         */\r\n        _this._smax = new Dictionary();\r\n        /**\r\n         * [dataItemsByAxis description]\r\n         *\r\n         * Both by category and date.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         */\r\n        _this.dataItemsByAxis = new Dictionary();\r\n        /**\r\n         * Normally series items are focusable using keyboard, so that people can\r\n         * select them with a TAB key. However, if there are a lot of data points on\r\n         * screen it might be long and useless to tab through all o fthem.\r\n         *\r\n         * This is where `skipFocusThreshold` comes in. If there are more items than\r\n         * the value set here, we will not make those focusable and rather let screen\r\n         * reader software rely on the series summary, or authors provide alternative\r\n         * detailed information display, such as HTML table.\r\n         *\r\n         * Different series might have different threshold defaults.\r\n         */\r\n        _this.skipFocusThreshold = 20;\r\n        /**\r\n         * Used to indicate if `itemReaderText` was changed \"from the outside\".\r\n         */\r\n        _this._itemReaderTextChanged = false;\r\n        /**\r\n         * Most of the series use absolute values. However sometimes various\r\n         * calculated percent values are need, e.g. item's percent representation\r\n         * across all values in series, etc.\r\n         *\r\n         * It's a resource-intensive operation, so it is disabled by default.\r\n         *\r\n         * If you need percents to be calculated, e.g. for showing them in tooltips,\r\n         * or creating 100% stacks, this setting needs to be set to `true`.\r\n         *\r\n         * NOTE: `PieChart`, which relies on slice percentages, has this\r\n         * automatically set to `true`.\r\n         *\r\n         * @default false\r\n         */\r\n        _this.calculatePercent = false;\r\n        /**\r\n         * Specifies if series should be automatically disposed when removing from\r\n         * chart's `series` list.\r\n         *\r\n         * @default true\r\n         */\r\n        _this.autoDispose = true;\r\n        /**\r\n         * When chart/series' data is processed, all kinds of derivative values are\r\n         * calculated. E.g. sum, min, max, change, etc. This is a potentially\r\n         * time-consuming operation, especially prominent in data-heavy charts.\r\n         *\r\n         * If your chart does not need those values, and you have a lot of data,\r\n         * setting this to `true` might give a dramatic increase in initial chart\r\n         * load speed.\r\n         *\r\n         * Please note, regular column and line series usage scenarios do not\r\n         * require derivative values. Those come into play only when you do advanced\r\n         * functionality like coloring segments of charts in different colors\r\n         * depending on change between open and close values, have stacked series, or\r\n         * display any of the derived values, like percent, in tooltips or bullets.\r\n         *\r\n         * @default false\r\n         */\r\n        _this.simplifiedProcessing = false;\r\n        if (_this.constructor === Series) {\r\n            throw new Error(\"'Series' cannot be instantiated directly. Please use a specific series type.\");\r\n        }\r\n        _this.className = \"Series\";\r\n        _this.isMeasured = false;\r\n        _this.layout = \"none\";\r\n        _this.shouldClone = false;\r\n        _this.setPropertyValue(\"hidden\", false);\r\n        _this.axisRanges = new List();\r\n        _this.axisRanges.events.on(\"inserted\", _this.processAxisRange, _this, false);\r\n        _this.minBulletDistance = 0; // otherwise we'll have a lot of cases when people won't see bullets and think it's a bug\r\n        _this.mainContainer = _this.createChild(Container);\r\n        _this.mainContainer.shouldClone = false;\r\n        _this.mainContainer.mask = _this.createChild(Sprite);\r\n        _this._disposers.push(_this.mainContainer);\r\n        // all bullets should go on top of lines/fills. So we add a separate container for bullets and later set it's parent to chart.bulletsContainer\r\n        var bulletsContainer = _this.mainContainer.createChild(Container);\r\n        _this._shouldBeReady.push(bulletsContainer);\r\n        bulletsContainer.shouldClone = false;\r\n        bulletsContainer.layout = \"none\";\r\n        bulletsContainer.virtualParent = _this;\r\n        _this._disposers.push(bulletsContainer);\r\n        _this.bulletsContainer = bulletsContainer;\r\n        _this.tooltip = new Tooltip();\r\n        _this.tooltip.virtualParent = _this;\r\n        _this._disposers.push(_this.tooltip);\r\n        _this.hiddenState.transitionEasing = $ease.cubicIn;\r\n        // this data item holds sums, averages, etc\r\n        _this.dataItem = _this.createDataItem();\r\n        _this._disposers.push(_this.dataItem);\r\n        _this.dataItem.component = _this;\r\n        // Apply accessibility\r\n        _this.role = \"group\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * We need this here so that class names can be applied to bullets container.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Series.prototype.applyTheme = function () {\r\n        _super.prototype.applyTheme.call(this);\r\n        if (options.autoSetClassName && this.bulletsContainer) {\r\n            this.bulletsContainer.className = this.className + \"-bullets\";\r\n            this.bulletsContainer.setClassName();\r\n        }\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    Series.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    Series.prototype.createDataItem = function () {\r\n        return new SeriesDataItem();\r\n    };\r\n    Object.defineProperty(Series.prototype, \"chart\", {\r\n        /**\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart;\r\n        },\r\n        /**\r\n         * Chart series is used on.\r\n         *\r\n         * @param value  Chart\r\n         */\r\n        set: function (value) {\r\n            this._chart = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Positions bullet.\r\n     *\r\n     * @param bullet  Sprite\r\n     */\r\n    Series.prototype.positionBullet = function (bullet) {\r\n        // Placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Decorates newly created bullet after it has been instert into the list.\r\n     *\r\n     * @param event  List event\r\n     * @todo investigate why itemReaderText is undefined\r\n     */\r\n    Series.prototype.processBullet = function (event) {\r\n        var _this = this;\r\n        var bullet = event.newValue;\r\n        bullet.isTemplate = true;\r\n        // Add accessibility options to bullet\r\n        // If there are relatively few bullets, make them focusable\r\n        this.events.once(\"datavalidated\", function (ev) {\r\n            if (_this.itemsFocusable()) {\r\n                bullet.focusable = true;\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * removes bullets\r\n     *\r\n     * @param event  List event\r\n     */\r\n    Series.prototype.removeBullet = function (event) {\r\n        var bullet = event.oldValue;\r\n        this.dataItems.each(function (dataItem) {\r\n            var eachBullet = dataItem.bullets.getKey(bullet.uid);\r\n            if (eachBullet) {\r\n                eachBullet.dispose();\r\n            }\r\n        });\r\n        this.invalidate();\r\n    };\r\n    /**\r\n     * Validates data items.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Series.prototype.validateDataItems = function () {\r\n        _super.prototype.validateDataItems.call(this);\r\n        this.processValues(false);\r\n    };\r\n    /**\r\n     * Returns first value for the specific key in the series.\r\n     *\r\n     * @param key  Key\r\n     * @return Value\r\n     * @todo Description\r\n     * @todo Convert to propert object property iterator\r\n     */\r\n    Series.prototype.getFirstValue = function (key, startIndex) {\r\n        // find first\r\n        /*\r\n        return $iter.findMap(this.dataItems.iterator(), (dataItem) => {\r\n            for (let key in dataItem.values) {\r\n                if ($object.hasKey(dataItem.values, key)) {\r\n                    let value: number = dataItem.values[key].workingValue;\r\n                    if ($type.isNumber(value)) {\r\n                        return value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return null;\r\n        });*/\r\n        if (startIndex > 0 && startIndex < this.dataItems.length - 1) {\r\n            startIndex++;\r\n        }\r\n        for (var i = startIndex; i >= 0; i--) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            var value = dataItem.getActualWorkingValue(key);\r\n            if ($type.isNumber(value)) {\r\n                return value;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Returns first value for the specific key in the series.\r\n     *\r\n     * @param key  Key\r\n     * @return Value\r\n     * @todo Description\r\n     * @todo Convert to propert object property iterator\r\n     */\r\n    Series.prototype.getAbsoluteFirstValue = function (key) {\r\n        for (var i = 0; i < this.dataItems.length; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            var value = dataItem.values[key].value;\r\n            if ($type.isNumber(value)) {\r\n                return value;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * [rangeChangeUpdate description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    Series.prototype.rangeChangeUpdate = function () {\r\n        _super.prototype.rangeChangeUpdate.call(this);\r\n        this.processValues(true);\r\n    };\r\n    /**\r\n     * [processValues description]\r\n     *\r\n     * @todo Description\r\n     * @todo Convert to propert object property iterator\r\n     * @param dataItems [description]\r\n     */\r\n    Series.prototype.processValues = function (working) {\r\n        var _this = this;\r\n        if (!this.simplifiedProcessing) {\r\n            var dataItems = this.dataItems;\r\n            var count_1 = {};\r\n            var sum_1 = {};\r\n            var absoluteSum_1 = {};\r\n            var low_1 = {};\r\n            var high_1 = {};\r\n            var open_1 = {};\r\n            var close_1 = {};\r\n            var previous_1 = {};\r\n            var first_1 = {};\r\n            var absoluteFirst_1 = {};\r\n            //let duration: number = 0; // todo: check if series uses selection.change or selection.change.percent and set duration to interpolationduration\r\n            var startIndex_1 = $math.max(0, this._workingStartIndex);\r\n            startIndex_1 = $math.min(startIndex_1, this.dataItems.length);\r\n            var endIndex = $math.min(this._workingEndIndex, this.dataItems.length);\r\n            if (!$type.isNumber(startIndex_1)) {\r\n                startIndex_1 = 0;\r\n            }\r\n            if (!$type.isNumber(endIndex)) {\r\n                endIndex = this.dataItems.length;\r\n            }\r\n            if (startIndex_1 > 0) {\r\n                var dataItem_1 = dataItems.getIndex(startIndex_1 - 1);\r\n                $object.each(dataItem_1.values, function (key, values) {\r\n                    var value = dataItem_1.getActualWorkingValue(key);\r\n                    if ($type.isNumber(value)) {\r\n                        // save previous\r\n                        previous_1[key] = value;\r\n                    }\r\n                });\r\n            }\r\n            var _loop_1 = function (i) {\r\n                var dataItem_2 = dataItems.getIndex(i);\r\n                $object.each(dataItem_2.values, function (key, values) {\r\n                    var value = dataItem_2.getActualWorkingValue(key);\r\n                    //if (i >= startIndex && i <= endIndex) { // do not add to count, sum etc if it is not within start/end index\r\n                    if ($type.isNumber(value)) {\r\n                        // count values\r\n                        if (!$type.isNumber(count_1[key])) {\r\n                            count_1[key] = 0;\r\n                        }\r\n                        count_1[key]++;\r\n                        // sum values\r\n                        if (!$type.isNumber(sum_1[key])) {\r\n                            sum_1[key] = 0;\r\n                        }\r\n                        sum_1[key] += value;\r\n                        // absolute sum values\r\n                        if (!$type.isNumber(absoluteSum_1[key])) {\r\n                            absoluteSum_1[key] = 0;\r\n                        }\r\n                        absoluteSum_1[key] += Math.abs(value);\r\n                        // open\r\n                        if (!$type.isNumber(open_1[key])) {\r\n                            open_1[key] = value;\r\n                        }\r\n                        // close\r\n                        close_1[key] = value;\r\n                        // low\r\n                        if (!$type.isNumber(low_1[key])) {\r\n                            low_1[key] = value;\r\n                        }\r\n                        else {\r\n                            if (low_1[key] > value) {\r\n                                low_1[key] = value;\r\n                            }\r\n                        }\r\n                        // high\r\n                        if (!$type.isNumber(high_1[key])) {\r\n                            high_1[key] = value;\r\n                        }\r\n                        else {\r\n                            if (high_1[key] < value) {\r\n                                high_1[key] = value;\r\n                            }\r\n                        }\r\n                        if (!$type.isNumber(first_1[key])) {\r\n                            first_1[key] = _this.getFirstValue(key, startIndex_1);\r\n                        }\r\n                        if (!$type.isNumber(absoluteFirst_1[key])) {\r\n                            absoluteFirst_1[key] = _this.getAbsoluteFirstValue(key);\r\n                        }\r\n                        // change\r\n                        dataItem_2.setCalculatedValue(key, value - first_1[key], \"change\");\r\n                        // change from start percent\r\n                        // will fail if first value is 0\r\n                        dataItem_2.setCalculatedValue(key, (value - first_1[key]) / first_1[key] * 100, \"changePercent\");\r\n                        dataItem_2.setCalculatedValue(key, (value - absoluteFirst_1[key]), \"startChange\");\r\n                        dataItem_2.setCalculatedValue(key, (value - absoluteFirst_1[key]) / absoluteFirst_1[key] * 100, \"startChangePercent\");\r\n                        // previous change\r\n                        var prevValue = previous_1[key];\r\n                        if (!$type.isNumber(prevValue)) {\r\n                            prevValue = value;\r\n                        }\r\n                        dataItem_2.setCalculatedValue(key, value - prevValue, \"previousChange\");\r\n                        // previous change percent\r\n                        dataItem_2.setCalculatedValue(key, (value - prevValue) / prevValue * 100, \"previousChangePercent\");\r\n                        // save previous\r\n                        previous_1[key] = value;\r\n                    }\r\n                });\r\n            };\r\n            for (var i = startIndex_1; i < endIndex; i++) {\r\n                _loop_1(i);\r\n            }\r\n            if (this.calculatePercent) {\r\n                var _loop_2 = function (i) {\r\n                    var dataItem_3 = dataItems.getIndex(i);\r\n                    $object.each(dataItem_3.values, function (key) {\r\n                        var ksum = absoluteSum_1[key];\r\n                        var value = dataItem_3.getActualWorkingValue(key);\r\n                        if ($type.isNumber(value)) {\r\n                            if (ksum > 0) {\r\n                                // this hack is made in order to make it possible to animate single slice to 0\r\n                                // if there is only one slice left, percent value is always 100%, so it won't animate\r\n                                // so we use real value of a slice instead of current value\r\n                                if (value == ksum) {\r\n                                    ksum = dataItem_3.values[key].value;\r\n                                }\r\n                                var percent = value / ksum * 100;\r\n                                dataItem_3.setCalculatedValue(key, percent, \"percent\");\r\n                            }\r\n                            else {\r\n                                dataItem_3.setCalculatedValue(key, 0, \"percent\");\r\n                            }\r\n                        }\r\n                    });\r\n                };\r\n                for (var i = startIndex_1; i < endIndex; i++) {\r\n                    _loop_2(i);\r\n                }\r\n            }\r\n            // calculate one before first (cant do that in cycle, as we don't know open yet\r\n            // when drawing line chart we should draw line to the invisible data point to the left, otherwise the line will always look like it starts from the selected point\r\n            // so we do startIndex - 1\r\n            if (startIndex_1 > 0) {\r\n                var zeroItem_1 = dataItems.getIndex(startIndex_1 - 1);\r\n                $object.each(zeroItem_1.values, function (key) {\r\n                    var value = zeroItem_1.values[key].value;\r\n                    // change\r\n                    zeroItem_1.setCalculatedValue(key, value - open_1[key], \"change\");\r\n                    // change percent\r\n                    zeroItem_1.setCalculatedValue(key, (value - open_1[key]) / open_1[key] * 100, \"changePercent\");\r\n                });\r\n            }\r\n            // we save various data like sum, average to dataPoint of the series\r\n            var dataItem_4 = this.dataItem;\r\n            $object.each(dataItem_4.values, function (key) {\r\n                dataItem_4.setCalculatedValue(key, sum_1[key], \"sum\");\r\n                dataItem_4.setCalculatedValue(key, absoluteSum_1[key], \"absoluteSum\");\r\n                dataItem_4.setCalculatedValue(key, sum_1[key] / count_1[key], \"average\");\r\n                dataItem_4.setCalculatedValue(key, open_1[key], \"open\");\r\n                dataItem_4.setCalculatedValue(key, close_1[key], \"close\");\r\n                dataItem_4.setCalculatedValue(key, low_1[key], \"low\");\r\n                dataItem_4.setCalculatedValue(key, high_1[key], \"high\");\r\n                dataItem_4.setCalculatedValue(key, count_1[key], \"count\");\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Series.prototype.validate = function () {\r\n        $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n            //axisRange.contents.disposeChildren(); // not good for columns, as they are reused\r\n            //\t\t\taxisRange.appendChildren();\r\n            axisRange.validate();\r\n        });\r\n        _super.prototype.validate.call(this);\r\n        var bulletsContainer = this.bulletsContainer;\r\n        bulletsContainer.fill = this.fill;\r\n        bulletsContainer.stroke = this.stroke;\r\n        bulletsContainer.x = this.pixelX;\r\n        bulletsContainer.y = this.pixelY;\r\n        if (this.bulletsContainer.children.length > 0) {\r\n            if (this._showBullets) {\r\n                for (var i = 0; i < this.startIndex; i++) {\r\n                    var dataItem = this.dataItems.getIndex(i);\r\n                    if (dataItem) {\r\n                        dataItem.bullets.each(function (key, bullet) {\r\n                            bullet.__disabled = true;\r\n                        });\r\n                    }\r\n                }\r\n                for (var i = this.dataItems.length - 1; i > this.endIndex; i--) {\r\n                    var dataItem = this.dataItems.getIndex(i);\r\n                    if (dataItem) {\r\n                        dataItem.bullets.each(function (key, bullet) {\r\n                            bullet.__disabled = true;\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.bulletsContainer.children.each(function (bullet) {\r\n                    bullet.__disabled = true;\r\n                });\r\n            }\r\n        }\r\n        this.updateTooltipBounds();\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    Series.prototype.updateTooltipBounds = function () {\r\n        if (this.topParent) {\r\n            var x = 0;\r\n            var y = 0;\r\n            var w = this.topParent.maxWidth;\r\n            var h = this.topParent.maxHeight;\r\n            var rect = { x: x, y: y, width: w, height: h };\r\n            this.tooltip.setBounds(rect);\r\n        }\r\n    };\r\n    Series.prototype.shouldCreateBullet = function (dataItem, bulletTemplate) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    Series.prototype.validateDataElement = function (dataItem) {\r\n        var _this = this;\r\n        _super.prototype.validateDataElement.call(this, dataItem);\r\n        if (this._showBullets) {\r\n            if (!this.isHidden) {\r\n                this.bulletsContainer.visible = true;\r\n            }\r\n            this.bullets.each(function (bulletTemplate) {\r\n                // always better to use the same, this helps to avoid redrawing\r\n                var bullet = dataItem.bullets.getKey(bulletTemplate.uid);\r\n                if (_this.shouldCreateBullet(dataItem, bulletTemplate)) {\r\n                    if (!bullet) {\r\n                        var disabledField = bulletTemplate.propertyFields.disabled;\r\n                        var dataContext = dataItem.dataContext;\r\n                        if (disabledField && dataContext && dataContext[disabledField] === false) {\r\n                            bulletTemplate.applyOnClones = false;\r\n                            bulletTemplate.disabled = false;\r\n                            bullet = bulletTemplate.clone();\r\n                            bulletTemplate.disabled = true;\r\n                            bulletTemplate.applyOnClones = true;\r\n                        }\r\n                        else {\r\n                            bullet = bulletTemplate.clone();\r\n                        }\r\n                        bullet.shouldClone = false;\r\n                        dataItem.addSprite(bullet);\r\n                        if (!_this.visible || _this.isHiding) {\r\n                            bullet.hide(0);\r\n                        }\r\n                    }\r\n                    var currentDataItem = bullet.dataItem;\r\n                    if (currentDataItem != dataItem) {\r\n                        // set to undefined in order not to reuse\r\n                        if (currentDataItem) {\r\n                            currentDataItem.bullets.setKey(bulletTemplate.uid, undefined);\r\n                        }\r\n                        var readerText_1 = _this.itemReaderText;\r\n                        if (bullet instanceof Bullet) {\r\n                            if (!readerText_1) {\r\n                                readerText_1 = (\"{\" + bullet.xField + \"}: {\" + bullet.yField + \"}\");\r\n                            }\r\n                            if (bullet.isDynamic) {\r\n                                dataItem.events.on(\"workingvaluechanged\", bullet.deepInvalidate, bullet, false);\r\n                                //dataItem.events.on(\"calculatedvaluechanged\", bullet.deepInvalidate, bullet, false);\r\n                                _this.dataItem.events.on(\"workingvaluechanged\", bullet.deepInvalidate, bullet, false);\r\n                            }\r\n                            bullet.deepInvalidate();\r\n                        }\r\n                        // Add accessibility to bullet\r\n                        if (bullet.focusable) {\r\n                            bullet.events.on(\"focus\", function (ev) {\r\n                                bullet.readerTitle = _this.populateString(readerText_1, bullet.dataItem);\r\n                            }, undefined, false);\r\n                            bullet.events.on(\"blur\", function (ev) {\r\n                                bullet.readerTitle = \"\";\r\n                            }, undefined, false);\r\n                        }\r\n                        if (bullet.hoverable) {\r\n                            bullet.events.on(\"over\", function (ev) {\r\n                                bullet.readerTitle = _this.populateString(readerText_1, bullet.dataItem);\r\n                            }, undefined, false);\r\n                            bullet.events.on(\"out\", function (ev) {\r\n                                bullet.readerTitle = \"\";\r\n                            }, undefined, false);\r\n                        }\r\n                    }\r\n                    bullet.parent = _this.bulletsContainer;\r\n                    dataItem.bullets.setKey(bulletTemplate.uid, bullet);\r\n                    // pass max w/h so we'd know if we should show/hide somethings\r\n                    bullet.maxWidth = dataItem.itemWidth;\r\n                    bullet.maxHeight = dataItem.itemHeight;\r\n                    bullet.__disabled = false;\r\n                    _this.positionBullet(bullet);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.bulletsContainer.visible = false;\r\n        }\r\n    };\r\n    /**\r\n     * [handleDataItemWorkingValueChange description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Series.prototype.handleDataItemWorkingValueChange = function (dataItem, name) {\r\n        if (!this.dataRangeInvalid) {\r\n            this.invalidateProcessedData();\r\n        }\r\n    };\r\n    Object.defineProperty(Series.prototype, \"ignoreMinMax\", {\r\n        /**\r\n         * @return Exclude from calculations?\r\n         */\r\n        get: function () {\r\n            return this._ignoreMinMax;\r\n        },\r\n        /**\r\n         * Should this series excluded from the axis scale calculations?\r\n         *\r\n         * @default false\r\n         * @param value  Exclude from calculations?\r\n         */\r\n        set: function (value) {\r\n            this._ignoreMinMax = value;\r\n            this.invalidateDataItems();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Create a mask for the series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Series.prototype.createMask = function () {\r\n        // A placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Process axis range after it has been added to the list.\r\n     *\r\n     * @param event  Event\r\n     */\r\n    Series.prototype.processAxisRange = function (event) {\r\n        // create container if not existing\r\n        if (!this.rangesContainer) {\r\n            this.rangesContainer = this.createChild(Container);\r\n            this.rangesContainer.shouldClone = false;\r\n            this.rangesContainer.isMeasured = false;\r\n        }\r\n        var axisRange = event.newValue;\r\n        if (axisRange) {\r\n            axisRange.contents.parent = this.rangesContainer;\r\n            axisRange.isRange = true;\r\n            axisRange.events.on(\"valuechanged\", this.invalidateDataItems, this, false);\r\n        }\r\n    };\r\n    /**\r\n     * [getAxisField description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param axis  [description]\r\n     * @return [description]\r\n     */\r\n    Series.prototype.getAxisField = function (axis) {\r\n        return;\r\n    };\r\n    /**\r\n     * Shows the tooltip at specific position.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param xPosition  X\r\n     * @param yPosition  Y\r\n     */\r\n    Series.prototype.showTooltipAtPosition = function (xPosition, yPosition) {\r\n        // Placeholder method for extending classes to override.\r\n    };\r\n    Object.defineProperty(Series.prototype, \"minBulletDistance\", {\r\n        /**\r\n         * @return Distance (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"minBulletDistance\");\r\n        },\r\n        /**\r\n         * Minimal distance between data points in pixels.\r\n         *\r\n         * If distance gets smaller than this, bullets are turned off to avoid\r\n         * overlapping.\r\n         *\r\n         * `0` (zero) disables this behavior.\r\n         *\r\n         * IMPORTANT: This setting will work only when Series' base axis\r\n         * is [[CategoryAxis]] or [[DateAxis]]. If base axis is [[ValueAxis]] the\r\n         * setting will be ignored, because it would be a huge overhead to measure\r\n         * distance between each and every bullet.\r\n         *\r\n         * @default 0\r\n         * @param value  Distance (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"minBulletDistance\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Series.prototype, \"bullets\", {\r\n        /**\r\n         * A list of bullets that will be added to each and every items in the\r\n         * series.\r\n         *\r\n         * You can push any object that is a descendant of a [[Sprite]] here. All\r\n         * items added to this list will be copied and used as a bullet on all data\r\n         * items, including their properties, events, etc.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/bullets/} for more info about the concept of Bullets\r\n         * @return List of bullets.\r\n         */\r\n        get: function () {\r\n            if (!this._bullets) {\r\n                this._bullets = new ListTemplate(new Bullet());\r\n                this._bullets.template.virtualParent = this;\r\n                this._bullets.events.on(\"inserted\", this.processBullet, this, false);\r\n                this._bullets.events.on(\"removed\", this.removeBullet, this, false);\r\n                this._disposers.push(new ListDisposer(this._bullets));\r\n                this._disposers.push(this._bullets.template);\r\n            }\r\n            return this._bullets;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Binds related legend data item's visual settings to this series' visual\r\n     * settings.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Legend item container\r\n     */\r\n    Series.prototype.createLegendMarker = function (marker) {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    Object.defineProperty(Series.prototype, \"hiddenInLegend\", {\r\n        /**\r\n         * @return Hidden in legend?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"hiddenInLegend\");\r\n        },\r\n        /**\r\n         * Should the series be hidden in legend?\r\n         *\r\n         * @param value Hidden in legend?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"hiddenInLegend\", value)) {\r\n                if (this.chart) {\r\n                    this.chart.feedLegend();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Series.prototype, \"name\", {\r\n        /**\r\n         * @return Name\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"name\");\r\n        },\r\n        /**\r\n         * Series' name.\r\n         *\r\n         * @param value  Name\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"name\", value);\r\n            var legendDataItem = this.legendDataItem;\r\n            if (legendDataItem) {\r\n                legendDataItem.component.invalidate();\r\n                legendDataItem.component.invalidateRawData();\r\n            }\r\n            this.readerTitle = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Series.prototype, \"itemReaderText\", {\r\n        /**\r\n         * @return Screen reader text template\r\n         */\r\n        get: function () {\r\n            // Get explicitly set reader text\r\n            var readerText = this._itemReaderText;\r\n            // Not set? Let's try something else\r\n            if (!readerText) {\r\n                // Tooltip text?\r\n                if (this.tooltipText) {\r\n                    readerText = $utils.plainText(this.tooltipText);\r\n                }\r\n                else if (this.tooltipHTML) {\r\n                    readerText = $utils.plainText(this.tooltipHTML);\r\n                }\r\n            }\r\n            if (!this._adapterO) {\r\n                return readerText;\r\n            }\r\n            else {\r\n                return this._adapterO.apply(\"itemReaderText\", readerText);\r\n            }\r\n        },\r\n        /**\r\n         * Screen reader text to be applied to each individual data item, such\r\n         * as bullets, columns or slices.\r\n         *\r\n         * The template can contain field reference meta codes, i.e. `{dateX}`,\r\n         * `{valueY}`, etc.\r\n         *\r\n         * Any text formatting options, e.g. `[bold]` will be ignored.\r\n         *\r\n         * @param value Screen reader text template\r\n         */\r\n        set: function (value) {\r\n            this._itemReaderText = value;\r\n            this._itemReaderTextChanged = true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns if number of data items in the series are beyond non-focusable\r\n     * count and should not be available for TAB-through.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @return Items focusable?\r\n     */\r\n    Series.prototype.itemsFocusable = function () {\r\n        return this.dataItems.length >= this.skipFocusThreshold ? false : true;\r\n    };\r\n    Object.defineProperty(Series.prototype, \"legendDataItem\", {\r\n        /**\r\n         * @return Data item\r\n         */\r\n        get: function () {\r\n            return this._legendDataItem;\r\n        },\r\n        /**\r\n         * Legend data item that corresponds to this series.\r\n         *\r\n         * @param value  Data item\r\n         */\r\n        set: function (value) {\r\n            this._legendDataItem = value;\r\n            this._legendDataItem.itemContainer.deepInvalidate();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates corresponding legend data item with current values.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    Series.prototype.updateLegendValue = function (dataItem, notRange) {\r\n        // if this series has legend item\r\n        if (this.legendDataItem) {\r\n            var legendSettings = this.legendSettings;\r\n            var legendDataItem = this.legendDataItem;\r\n            var label = legendDataItem.label;\r\n            var valueLabel = legendDataItem.valueLabel;\r\n            // update legend\r\n            if (dataItem || notRange) {\r\n                if (valueLabel) {\r\n                    if (legendSettings.itemValueText) {\r\n                        valueLabel.text = legendSettings.itemValueText;\r\n                    }\r\n                    valueLabel.dataItem = dataItem;\r\n                }\r\n                if (label) {\r\n                    if (legendSettings.itemLabelText) {\r\n                        label.text = legendSettings.itemLabelText;\r\n                    }\r\n                    label.dataItem = dataItem;\r\n                }\r\n            }\r\n            else {\r\n                if (label) {\r\n                    // if itemLabelText is set, means we have to reset label even if labelText is not set\r\n                    if (legendSettings.labelText || legendSettings.itemLabelText != undefined) {\r\n                        label.text = legendSettings.labelText;\r\n                    }\r\n                    label.dataItem = this.dataItem;\r\n                }\r\n                if (valueLabel) {\r\n                    if (legendSettings.valueText || legendSettings.itemValueText != undefined) {\r\n                        valueLabel.text = legendSettings.valueText;\r\n                    }\r\n                    valueLabel.dataItem = this.dataItem;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Copies all properties from another instance of [[Series]].\r\n     *\r\n     * @param source  Source series\r\n     */\r\n    Series.prototype.copyFrom = function (source) {\r\n        this.bullets.copyFrom(source.bullets);\r\n        this.bulletsContainer.copyFrom(source.bulletsContainer);\r\n        this.calculatePercent = source.calculatePercent;\r\n        this.simplifiedProcessing = source.simplifiedProcessing;\r\n        _super.prototype.copyFrom.call(this, source);\r\n    };\r\n    /**\r\n     * Displays a modal or console message with error, and halts any further\r\n     * processing of this element.\r\n     *\r\n     * @param e Error\r\n     */\r\n    Series.prototype.raiseCriticalError = function (e) {\r\n        if (this._chart && this._chart.modal) {\r\n            this._chart.modal.content = this._chart.adapter.apply(\"criticalError\", e).message;\r\n            this._chart.modal.closable = false;\r\n            this._chart.modal.open();\r\n            this._chart.disabled = true;\r\n        }\r\n        if (options.verbose) {\r\n            console.log(e);\r\n        }\r\n    };\r\n    /**\r\n     * Applies filters to the element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Series.prototype.applyFilters = function () {\r\n        var _this = this;\r\n        _super.prototype.applyFilters.call(this);\r\n        this.bulletsContainer.filters.clear();\r\n        // copyFrom of a list copies, does not clone\r\n        $iter.each(this.filters.iterator(), function (filter) {\r\n            _this.bulletsContainer.filters.push(filter.clone());\r\n        });\r\n    };\r\n    Object.defineProperty(Series.prototype, \"heatRules\", {\r\n        /**\r\n         * A list of heat rules to apply to series' elements based on the value\r\n         * of the data item.\r\n         *\r\n         * Heat rules can be any \"numeric\" (including `Color`) property, and can also\r\n         * be applied to child objects of series, like columns, bullets, etc.\r\n         *\r\n         * E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * series.heatRules.push({\r\n         *  \"target\": series.columns.template,\r\n         *  \"property\": \"fill\",\r\n         *  \"min\": am4core.color(\"#F5DBCB\"),\r\n         *  \"max\": am4core.color(\"#ED7B84\"),\r\n         *  \"dataField\": \"valueY\"\r\n         *});\r\n         *```\r\n         * ```Javacript\r\n         * series.heatRules.push({\r\n         *  \"target\": series.columns.template,\r\n         *  \"property\": \"fill\",\r\n         *  \"min\": am4core.color(\"#F5DBCB\"),\r\n         *  \"max\": am4core.color(\"#ED7B84\"),\r\n         *  \"dataField\": \"valueY\"\r\n         *});\r\n         *```\r\n         *```JSON\r\n         *{\r\n         *  // ...\r\n         *  \"series\": [{\r\n         *    \"type\": \"ColumnSeries\",\r\n         *    \"heatRules\": [{\r\n         *      \"target\": \"columns.template\",\r\n         *      \"property\": \"fill\",\r\n         *      \"min\": \"#F5DBCB\",\r\n         *      \"max\": \"#ED7B84\",\r\n         *      \"dataField\": \"valueY\"\r\n         *    }]\r\n         *  }]\r\n         *}\r\n         *```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/series/#Heat_maps} for more about heat rules\r\n         * @return  Heat rules\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._heatRules) {\r\n                this._heatRules = new List();\r\n                this._heatRules.events.on(\"inserted\", function (event) {\r\n                    var heatRule = event.newValue;\r\n                    var target = heatRule.target;\r\n                    if (target) {\r\n                        var dataField_1 = heatRule.dataField;\r\n                        if (!$type.hasValue(dataField_1)) {\r\n                            dataField_1 = \"value\";\r\n                        }\r\n                        var min_1 = heatRule.min;\r\n                        var max_1 = heatRule.max;\r\n                        var seriesDataItem_1 = _this.dataItem;\r\n                        var property_1 = heatRule.property;\r\n                        var minValue = $type.toNumber(heatRule.minValue);\r\n                        var maxValue = $type.toNumber(heatRule.maxValue);\r\n                        if (!$type.isNumber(minValue) && !$type.isNumber(maxValue)) {\r\n                            _this.dataItem.events.on(\"calculatedvaluechanged\", function (event) {\r\n                                if (event.property == dataField_1) {\r\n                                    $iter.each(_this.dataItems.iterator(), function (dataItem) {\r\n                                        var foundSprite = false;\r\n                                        $array.each(dataItem.sprites, function (sprite) {\r\n                                            if (sprite.clonedFrom == target) {\r\n                                                var anySprite = sprite;\r\n                                                anySprite[property_1] = anySprite[property_1];\r\n                                                foundSprite = true;\r\n                                            }\r\n                                        });\r\n                                        if (!foundSprite) {\r\n                                            $array.each(dataItem.sprites, function (sprite) {\r\n                                                if (sprite instanceof Container) {\r\n                                                    $iter.each(sprite.children.iterator(), function (child) {\r\n                                                        if (child.className == target.className) {\r\n                                                            var anyChild = child;\r\n                                                            anyChild[property_1] = anyChild[property_1];\r\n                                                        }\r\n                                                        // giveup here\r\n                                                        else if (child instanceof Container) {\r\n                                                            child.deepInvalidate();\r\n                                                        }\r\n                                                    });\r\n                                                }\r\n                                            });\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                        _this.dataItems.template.events.on(\"workingvaluechanged\", function (event) {\r\n                            if (event.property == dataField_1) {\r\n                                var dataItem = event.target;\r\n                                var foundSprite_1 = false;\r\n                                $array.each(dataItem.sprites, function (sprite) {\r\n                                    if (sprite.clonedFrom == target) {\r\n                                        var anySprite = sprite;\r\n                                        anySprite[property_1] = anySprite[property_1];\r\n                                        foundSprite_1 = true;\r\n                                    }\r\n                                });\r\n                                if (!foundSprite_1) {\r\n                                    $array.each(dataItem.sprites, function (sprite) {\r\n                                        if (sprite instanceof Container) {\r\n                                            $iter.each(sprite.children.iterator(), function (child) {\r\n                                                if (child.className == target.className) {\r\n                                                    var anyChild = child;\r\n                                                    anyChild[property_1] = anyChild[property_1];\r\n                                                }\r\n                                                // givup here\r\n                                                else if (child instanceof Container) {\r\n                                                    child.deepInvalidate();\r\n                                                }\r\n                                            });\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                        target.adapter.add(property_1, function (value, ruleTarget, property) {\r\n                            var minValue = $type.toNumber(heatRule.minValue);\r\n                            var maxValue = $type.toNumber(heatRule.maxValue);\r\n                            if (ruleTarget instanceof Sprite) {\r\n                                var anySprite = ruleTarget;\r\n                                var propertyField = anySprite.propertyFields[property];\r\n                                if (propertyField && ruleTarget.dataItem) {\r\n                                    var dataContext = ruleTarget.dataItem.dataContext;\r\n                                    if (dataContext && $type.hasValue(dataContext[propertyField])) {\r\n                                        return value;\r\n                                    }\r\n                                }\r\n                            }\r\n                            var dataItem = ruleTarget.dataItem;\r\n                            if (!$type.isNumber(minValue)) {\r\n                                minValue = seriesDataItem_1.values[dataField_1].low;\r\n                            }\r\n                            if (!$type.isNumber(maxValue)) {\r\n                                maxValue = seriesDataItem_1.values[dataField_1].high;\r\n                            }\r\n                            if (dataItem) {\r\n                                var fieldValues = dataItem.values[dataField_1];\r\n                                if (fieldValues) {\r\n                                    var workingValue = dataItem.getActualWorkingValue(dataField_1);\r\n                                    if ($type.hasValue(min_1) && $type.hasValue(max_1) && $type.isNumber(minValue) && $type.isNumber(maxValue) && $type.isNumber(workingValue)) {\r\n                                        var percent = (workingValue - minValue) / (maxValue - minValue);\r\n                                        if ($type.isNumber(workingValue) && !$type.isNumber(percent)) {\r\n                                            percent = 0.5;\r\n                                        }\r\n                                        // fixes problems if all values are the same\r\n                                        if ($type.isNumber(min_1)) {\r\n                                            return min_1 + (max_1 - min_1) * percent;\r\n                                        }\r\n                                        else if (min_1 instanceof Color) {\r\n                                            return new Color($colors.interpolate(min_1.rgb, max_1.rgb, percent));\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                            return value;\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            return this._heatRules;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    Series.prototype.processConfig = function (config) {\r\n        var heatRules;\r\n        if (config) {\r\n            // Set up bullets\r\n            if ($type.hasValue(config.bullets) && $type.isArray(config.bullets)) {\r\n                for (var i = 0, len = config.bullets.length; i < len; i++) {\r\n                    var bullets = config.bullets[i];\r\n                    if (!$type.hasValue(bullets.type)) {\r\n                        bullets.type = \"Bullet\";\r\n                    }\r\n                }\r\n            }\r\n            // Let's take heatRules out of the config, so that we can process\r\n            // them later, when bullets are already there\r\n            if ($type.hasValue(config.heatRules) && $type.isArray(config.heatRules)) {\r\n                heatRules = config.heatRules;\r\n                delete config.heatRules;\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n        // Process heat rules again, when all other elements are ready\r\n        if (heatRules) {\r\n            for (var i = 0, len = heatRules.length; i < len; i++) {\r\n                var rule = heatRules[i];\r\n                // Resolve target\r\n                var target = this;\r\n                if ($type.hasValue(rule.target) && $type.isString(rule.target)) {\r\n                    // Check if we can find this element by id\r\n                    if (this.map.hasKey(rule.target)) {\r\n                        target = this.map.getKey(rule.target);\r\n                    }\r\n                    else {\r\n                        var parts = rule.target.split(\".\");\r\n                        for (var x = 0; x < parts.length; x++) {\r\n                            if (target instanceof List) {\r\n                                var listitem = target.getIndex($type.toNumber(parts[x]));\r\n                                if (!listitem) {\r\n                                    target = target[parts[x]];\r\n                                }\r\n                                else {\r\n                                    target = listitem;\r\n                                }\r\n                            }\r\n                            else {\r\n                                target = target[parts[x]];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                rule.target = target;\r\n                // Resolve colors and percents\r\n                if ($type.hasValue(rule.min)) {\r\n                    rule.min = this.maybeColorOrPercent(rule.min);\r\n                }\r\n                if ($type.hasValue(rule.max)) {\r\n                    rule.max = this.maybeColorOrPercent(rule.max);\r\n                }\r\n            }\r\n            _super.prototype.processConfig.call(this, {\r\n                heatRules: heatRules\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Returns visibility value\r\n     * @ignore\r\n     */\r\n    /*\r\n        protected getVisibility(): boolean {\r\n            let hidden = this.getPropertyValue(\"hidden\");\r\n            if (hidden) {\r\n                return false;\r\n            }\r\n            else {\r\n                return super.getVisibility();\r\n            }\r\n        }*/\r\n    /**\r\n     * This function is used to sort element's JSON config properties, so that\r\n     * some properties that absolutely need to be processed last, can be put at\r\n     * the end.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param a  Element 1\r\n     * @param b  Element 2\r\n     * @return Sorting number\r\n     */\r\n    Series.prototype.configOrder = function (a, b) {\r\n        if (a == b) {\r\n            return 0;\r\n        }\r\n        // Must come last\r\n        else if (a == \"heatRules\") {\r\n            return 1;\r\n        }\r\n        else if (b == \"heatRules\") {\r\n            return -1;\r\n        }\r\n        else {\r\n            return _super.prototype.configOrder.call(this, a, b);\r\n        }\r\n    };\r\n    /**\r\n     * Sets `visibility` property:\r\n     *\r\n     * * `true` - visible\r\n     * * `false` - hidden\r\n     *\r\n     * @param value  true - visible, false - hidden\r\n     * @return Current visibility\r\n     */\r\n    Series.prototype.setVisibility = function (value) {\r\n        _super.prototype.setVisibility.call(this, value);\r\n        this.bulletsContainer.visible = value;\r\n    };\r\n    return Series;\r\n}(Component));\r\nexport { Series };\r\n/**\r\n * Register class, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Series\"] = Series;\r\nregistry.registeredClasses[\"SeriesDataItem\"] = SeriesDataItem;\r\n//# sourceMappingURL=Series.js.map","/**\r\n * Serial chart module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Chart, ChartDataItem } from \"../Chart\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { Series } from \"../series/Series\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { ColorSet } from \"../../core/utils/ColorSet\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { Disposer } from \"../../core/utils/Disposer\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[SerialChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar SerialChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SerialChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SerialChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"SerialChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return SerialChartDataItem;\r\n}(ChartDataItem));\r\nexport { SerialChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A base class for all series-based charts, like XY, Pie, etc.\r\n *\r\n * Is not useful on its own.\r\n *\r\n * @see {@link ISerialChartEvents} for a list of available Events\r\n * @see {@link ISerialChartAdapters} for a list of available Adapters\r\n */\r\nvar SerialChart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SerialChart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SerialChart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"SerialChart\";\r\n        _this.colors = new ColorSet();\r\n        _this._usesData = false;\r\n        // Create a container for series\r\n        var seriesContainer = _this.chartContainer.createChild(Container);\r\n        seriesContainer.shouldClone = false;\r\n        seriesContainer.width = percent(100);\r\n        seriesContainer.height = percent(100);\r\n        seriesContainer.isMeasured = false;\r\n        seriesContainer.layout = \"none\";\r\n        seriesContainer.zIndex = 2;\r\n        _this.seriesContainer = seriesContainer;\r\n        // Create a container for bullets\r\n        var bulletsContainer = _this.chartContainer.createChild(Container);\r\n        bulletsContainer.shouldClone = false;\r\n        bulletsContainer.width = percent(100);\r\n        bulletsContainer.height = percent(100);\r\n        bulletsContainer.isMeasured = false;\r\n        bulletsContainer.zIndex = 3;\r\n        bulletsContainer.layout = \"none\";\r\n        _this.bulletsContainer = bulletsContainer;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    SerialChart.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        if (this.colors) {\r\n            this.colors.dispose();\r\n        }\r\n        if (this.patterns) {\r\n            this.patterns.dispose();\r\n        }\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor\r\n     */\r\n    SerialChart.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Serial chart\");\r\n        }\r\n    };\r\n    Object.defineProperty(SerialChart.prototype, \"series\", {\r\n        /**\r\n         * A list of chart's series.\r\n         *\r\n         * @return Chart's series\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._series) {\r\n                this._series = new ListTemplate(this.createSeries());\r\n                this._series.events.on(\"inserted\", function (event) {\r\n                    _this.handleSeriesAdded(event);\r\n                }, undefined, false);\r\n                this._series.events.on(\"removed\", function (event) {\r\n                    var series = event.oldValue;\r\n                    _this.dataUsers.removeValue(series);\r\n                    _this.dataUsers.each(function (dataUser) {\r\n                        dataUser.invalidateDataItems();\r\n                    });\r\n                    if (series.autoDispose) {\r\n                        series.dispose();\r\n                    }\r\n                    _this.feedLegend();\r\n                }, undefined, false);\r\n                this._disposers.push(new ListDisposer(this._series));\r\n                this._disposers.push(this._series.template);\r\n            }\r\n            return this._series;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Decorates a new [[Series]] object with required parameters when it is\r\n     * added to the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event  Event\r\n     */\r\n    SerialChart.prototype.handleSeriesAdded = function (event) {\r\n        var _this = this;\r\n        var series = event.newValue;\r\n        if (series.isDisposed()) {\r\n            return;\r\n        }\r\n        series.chart = this;\r\n        series.parent = this.seriesContainer;\r\n        series.bulletsContainer.parent = this.bulletsContainer;\r\n        this._dataUsers.moveValue(series);\r\n        series.addDisposer(new Disposer(function () {\r\n            _this.dataUsers.removeValue(series);\r\n        }));\r\n        this.handleSeriesAdded2(series);\r\n        this.feedLegend();\r\n    };\r\n    SerialChart.prototype.handleSeriesAdded2 = function (series) {\r\n        if (!this.dataInvalid) {\r\n            if (!series.data || series.data.length == 0) {\r\n                this.invalidateData();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Setups the legend to use the chart's data.\r\n     * @ignore\r\n     */\r\n    SerialChart.prototype.feedLegend = function () {\r\n        var legend = this.legend;\r\n        if (legend) {\r\n            var legendData_1 = [];\r\n            $iter.each(this.series.iterator(), function (series) {\r\n                if (!series.hiddenInLegend) {\r\n                    legendData_1.push(series);\r\n                }\r\n            });\r\n            legend.dataFields.name = \"name\";\r\n            legend.data = legendData_1;\r\n        }\r\n    };\r\n    /**\r\n     * Creates and returns a new Series, suitable for this chart type.\r\n     *\r\n     * @return New series\r\n     */\r\n    SerialChart.prototype.createSeries = function () {\r\n        return new Series();\r\n    };\r\n    Object.defineProperty(SerialChart.prototype, \"colors\", {\r\n        /**\r\n         * @return Color list\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"colors\");\r\n        },\r\n        /**\r\n         * Chart's color list.\r\n         *\r\n         * This list can be used by a number of serial items, like applying a new\r\n         * color for each Series added. Or, applying a new color for each slice\r\n         * of a Pie chart.\r\n         *\r\n         * Please see [[ColorSet]] for information on how you can set up to generate\r\n         * unique colors.\r\n         *\r\n         * A theme you are using may override default pre-defined colors.\r\n         *\r\n         * @param value Color list\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"colors\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SerialChart.prototype, \"patterns\", {\r\n        /**\r\n         * @return Pattern set\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"patterns\");\r\n        },\r\n        /**\r\n         * A [[PatternSet]] to use when creating patterned fills for slices.\r\n         *\r\n         * @since 4.7.5\r\n         * @param value  Pattern set\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"patterns\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Copies all parameters from another [[SerialChart]].\r\n     *\r\n     * @param source Source SerialChart\r\n     */\r\n    SerialChart.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.series.copyFrom(source.series);\r\n    };\r\n    /**\r\n     * Hides the chart instantly and then shows it. If defaultState.transitionDuration > 0, this will result an animation in which properties of hidden state will animate to properties of visible state.\r\n     */\r\n    SerialChart.prototype.appear = function () {\r\n        _super.prototype.appear.call(this);\r\n        this.series.each(function (series) {\r\n            if (series.showOnInit && series.inited) {\r\n                series.appear();\r\n            }\r\n        });\r\n    };\r\n    return SerialChart;\r\n}(Chart));\r\nexport { SerialChart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SerialChart\"] = SerialChart;\r\n//# sourceMappingURL=SerialChart.js.map","/**\r\n * Axis break module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { WavedLine } from \"../../core/elements/WavedLine\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Base class to define \"breaks\" on axes.\r\n *\r\n * @see {@link IAxisBreakEvents} for a list of available events\r\n * @see {@link IAxisBreakAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar AxisBreak = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisBreak, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function AxisBreak() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Reference to parent Axis.\r\n         */\r\n        _this._axis = new MutableValueDisposer();\r\n        /**\r\n         * A list of axis data items which fall within this break.\r\n         */\r\n        _this.dataItems = new List();\r\n        _this.className = \"AxisBreak\";\r\n        // Set defaults\r\n        _this.breakSize = 0.01;\r\n        _this.marginLeft = -5;\r\n        _this.marginRight = -5;\r\n        _this.marginTop = -5;\r\n        _this.marginBottom = -5;\r\n        var interfaceColors = new InterfaceColorSet();\r\n        // Create elements\r\n        // (these won't be used actually, just for setting properties)\r\n        var fillShape = new WavedLine();\r\n        fillShape.fill = interfaceColors.getFor(\"background\");\r\n        fillShape.stroke = color();\r\n        fillShape.fillOpacity = 0.9;\r\n        fillShape.zIndex = 0;\r\n        _this._fillShape = fillShape;\r\n        var startLine = new WavedLine();\r\n        startLine.fill = color();\r\n        startLine.stroke = interfaceColors.getFor(\"grid\");\r\n        startLine.strokeOpacity = 0.3;\r\n        startLine.zIndex = 1;\r\n        _this._startLine = startLine;\r\n        var endLine = new WavedLine();\r\n        endLine.fill = color();\r\n        endLine.stroke = color(\"#000000\"); // interfaceColors.getFor(\"grid\");\r\n        endLine.strokeOpacity = 0.3;\r\n        endLine.zIndex = 2;\r\n        _this._endLine = endLine;\r\n        _this._disposers.push(_this._axis);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    AxisBreak.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        if (this._fillShape) {\r\n            this._fillShape.dispose();\r\n        }\r\n        if (this._startLine) {\r\n            this._startLine.dispose();\r\n        }\r\n        if (this._endLine) {\r\n            this._endLine.dispose();\r\n        }\r\n    };\r\n    Object.defineProperty(AxisBreak.prototype, \"startLine\", {\r\n        /**\r\n         * @return Element\r\n         */\r\n        get: function () {\r\n            return this._startLine;\r\n        },\r\n        /**\r\n         * An element used for the starting line of the break.\r\n         *\r\n         * @param sprite  Element\r\n         */\r\n        set: function (sprite) {\r\n            if (this._startLine) {\r\n                this._startLine.dispose();\r\n            }\r\n            this._startLine = sprite;\r\n            this.addBreakSprite(sprite);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"endLine\", {\r\n        /**\r\n         * @return Element\r\n         */\r\n        get: function () {\r\n            return this._endLine;\r\n        },\r\n        /**\r\n         * An element used for the end line of the break.\r\n         *\r\n         * @param sprite Element\r\n         */\r\n        set: function (sprite) {\r\n            if (this._endLine) {\r\n                this._endLine.dispose();\r\n            }\r\n            this._endLine = sprite;\r\n            this.addBreakSprite(sprite);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"fillShape\", {\r\n        /**\r\n         * @return Element\r\n         */\r\n        get: function () {\r\n            return this._fillShape;\r\n        },\r\n        /**\r\n         * An element used for fill of the break.\r\n         *\r\n         * @param sprite Element\r\n         */\r\n        set: function (sprite) {\r\n            if (this._fillShape) {\r\n                this._fillShape.dispose();\r\n            }\r\n            this._fillShape = sprite;\r\n            this.addBreakSprite(sprite);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a break element (e.g. lines, fill) to the break, which is\r\n     * [[Container]].\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param sprite Element to add\r\n     */\r\n    AxisBreak.prototype.addBreakSprite = function (sprite) {\r\n        sprite.parent = this;\r\n        sprite.isMeasured = false;\r\n        this._disposers.push(sprite);\r\n    };\r\n    Object.defineProperty(AxisBreak.prototype, \"axis\", {\r\n        /**\r\n         * @return Axis\r\n         */\r\n        get: function () {\r\n            return this._axis.get();\r\n        },\r\n        /**\r\n         * An Axis this Break is associated with.\r\n         *\r\n         * @param axis  Axis\r\n         */\r\n        set: function (axis) {\r\n            if (this._axis.get() !== axis) {\r\n                this._axis.set(axis, axis.renderer.gridContainer.events.on(\"transformed\", this.invalidate, this, false));\r\n                axis.renderer.createBreakSprites(this);\r\n                // this can't go to copyFrom, as axis is set later\r\n                var breakTemplate = axis.axisBreaks.template;\r\n                this.startLine.copyFrom(breakTemplate.startLine);\r\n                this.endLine.copyFrom(breakTemplate.endLine);\r\n                this.fillShape.copyFrom(breakTemplate.fillShape);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"breakSize\", {\r\n        /**\r\n         * @return Relative axis break\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"breakSize\");\r\n        },\r\n        /**\r\n         * A size of the break relative to the actual size of the scope break spans.\r\n         *\r\n         * For example, if `breakSize = 0.1` and unbroken scope of balues it spans\r\n         * would be 100 pixels, the break would be 10 pixels wide.\r\n         *\r\n         * 0 means the break will completely collapse and hide the values.\r\n         * 1 means break would be not collapse at all, which would make it\r\n         * effectively useless.\r\n         *\r\n         * @default 0.01\r\n         * @param value  Relative axis break\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"breakSize\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"startPoint\", {\r\n        /**\r\n         * Returns pixel coordinates of axis break's start.\r\n         *\r\n         * @return Start point\r\n         */\r\n        get: function () {\r\n            var renderer = this.axis.renderer;\r\n            if (renderer) {\r\n                return renderer.positionToPoint(this.startPosition);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"endPoint\", {\r\n        /**\r\n         * Returns pixel coordinates of axis break's end.\r\n         *\r\n         * @return End point\r\n         */\r\n        get: function () {\r\n            var renderer = this.axis.renderer;\r\n            if (renderer) {\r\n                return renderer.positionToPoint(this.endPosition);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"startPosition\", {\r\n        /**\r\n         * Returns a relative position at which axis break starts.\r\n         *\r\n         * This is a calculated position, meaning it shows relative position of the\r\n         * break after break is applied.\r\n         *\r\n         * @return Start position\r\n         */\r\n        get: function () {\r\n            return;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"endPosition\", {\r\n        /**\r\n         * Returns a relative position at which axis break ends.\r\n         *\r\n         * This is a calculated position, meaning it shows relative position of the\r\n         * break after break is applied.\r\n         *\r\n         * @return End position\r\n         */\r\n        get: function () {\r\n            return;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Draws the axis break.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisBreak.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        if (this.axis) {\r\n            var renderer = this.axis.renderer;\r\n            renderer.updateBreakElement(this);\r\n        }\r\n    };\r\n    Object.defineProperty(AxisBreak.prototype, \"startValue\", {\r\n        /**\r\n         * @return Starting value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startValue\");\r\n        },\r\n        /**\r\n         * A starting value for the break.\r\n         *\r\n         * @param value  Starting value\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"startValue\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisBreak.prototype, \"endValue\", {\r\n        /**\r\n         * @return End value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endValue\");\r\n        },\r\n        /**\r\n         * An end value for the break.\r\n         *\r\n         * @param value  End value\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"endValue\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AxisBreak;\r\n}(Container));\r\nexport { AxisBreak };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisBreak\"] = AxisBreak;\r\n//# sourceMappingURL=AxisBreak.js.map","/**\r\n * Base class for all Axis\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component } from \"../../core/Component\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { DataItem } from \"../../core/DataItem\";\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { Tooltip } from \"../../core/elements/Tooltip\";\r\nimport { SortedListTemplate } from \"../../core/utils/SortedList\";\r\nimport { List, ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Disposer, MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $number from \"../../core/utils/Number\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[Axis]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar AxisDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function AxisDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"AxisDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AxisDataItem.prototype, \"grid\", {\r\n        /**\r\n         * @return Grid element\r\n         */\r\n        get: function () {\r\n            if (!this._grid) {\r\n                var component_1 = this.component;\r\n                if (component_1) {\r\n                    var template = void 0;\r\n                    var grid_1;\r\n                    if (this.isRange) {\r\n                        template = component_1.axisRanges.template.grid;\r\n                        if (template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            grid_1 = template.clone();\r\n                        }\r\n                    }\r\n                    else {\r\n                        template = component_1.renderer.grid.template;\r\n                        if (template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            grid_1 = component_1.renderer.grid.create();\r\n                            this._disposers.push(new Disposer(function () {\r\n                                component_1.renderer.grid.removeValue(grid_1);\r\n                            }));\r\n                        }\r\n                    }\r\n                    this.grid = grid_1;\r\n                    grid_1.shouldClone = false;\r\n                    this._disposers.push(grid_1);\r\n                    grid_1.axis = this.component;\r\n                }\r\n            }\r\n            return this._grid;\r\n        },\r\n        /**\r\n         * A [[Grid]] element associated with this data item.\r\n         *\r\n         * If there is no grid element associated with data item, a new one is\r\n         * created and returned.\r\n         *\r\n         * @param grid  Grid element\r\n         */\r\n        set: function (grid) {\r\n            if (this._grid && this._grid != grid) {\r\n                $array.remove(this.sprites, this._grid);\r\n                this._grid.dataItem = undefined;\r\n            }\r\n            if (grid) {\r\n                if (grid.dataItem && grid.dataItem != this) {\r\n                    $array.remove(grid.dataItem.sprites, grid);\r\n                    grid.dataItem.grid = undefined;\r\n                }\r\n                this.addSprite(grid);\r\n            }\r\n            this._grid = grid;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisDataItem.prototype, \"tick\", {\r\n        /**\r\n         * @return Tick element\r\n         */\r\n        get: function () {\r\n            if (!this._tick) {\r\n                var component_2 = this.component;\r\n                if (component_2) {\r\n                    var template = void 0;\r\n                    var tick_1;\r\n                    if (this.isRange) {\r\n                        template = component_2.axisRanges.template.tick;\r\n                        if (template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            tick_1 = template.clone();\r\n                        }\r\n                    }\r\n                    else {\r\n                        template = component_2.renderer.ticks.template;\r\n                        if (template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            tick_1 = component_2.renderer.ticks.create();\r\n                            this._disposers.push(new Disposer(function () {\r\n                                component_2.renderer.ticks.removeValue(tick_1);\r\n                            }));\r\n                        }\r\n                    }\r\n                    this.tick = tick_1;\r\n                    tick_1.axis = this.component;\r\n                    tick_1.shouldClone = false;\r\n                    this._disposers.push(tick_1);\r\n                }\r\n            }\r\n            return this._tick;\r\n        },\r\n        /**\r\n         * An [[AxisTick]] element associated with this data item.\r\n         *\r\n         * If there is no tick element associated with data item, a new one is\r\n         * created and returned.\r\n         *\r\n         * @param tick  Tick element\r\n         */\r\n        set: function (tick) {\r\n            if (this._tick && this._tick != tick) {\r\n                $array.remove(this.sprites, this._tick);\r\n                this._tick.dataItem = undefined;\r\n            }\r\n            if (tick) {\r\n                if (tick.dataItem && tick.dataItem != this) {\r\n                    $array.remove(tick.dataItem.sprites, tick);\r\n                    tick.dataItem.tick = undefined;\r\n                }\r\n                this.addSprite(tick);\r\n            }\r\n            this._tick = tick;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisDataItem.prototype, \"label\", {\r\n        /**\r\n         * @return Label element\r\n         */\r\n        get: function () {\r\n            if (!this._label) {\r\n                var component_3 = this.component;\r\n                if (component_3) {\r\n                    var template = void 0;\r\n                    var label_1;\r\n                    if (this.isRange) {\r\n                        template = component_3.axisRanges.template.label;\r\n                        if (template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            label_1 = template.clone();\r\n                        }\r\n                    }\r\n                    else {\r\n                        template = component_3.renderer.labels.template;\r\n                        if (template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            label_1 = component_3.renderer.labels.create();\r\n                            this._disposers.push(new Disposer(function () {\r\n                                component_3.renderer.labels.removeValue(label_1);\r\n                            }));\r\n                        }\r\n                    }\r\n                    this._disposers.push(label_1);\r\n                    this.label = label_1;\r\n                    label_1.shouldClone = false;\r\n                    label_1.axis = this.component;\r\n                    label_1.virtualParent = component_3;\r\n                }\r\n            }\r\n            return this._label;\r\n        },\r\n        /**\r\n         * An [[AxisLabel]] element associated with this data item.\r\n         *\r\n         * If there is no label element associated with data item, a new one is\r\n         * created and returned.\r\n         *\r\n         * @param label Label element\r\n         */\r\n        set: function (label) {\r\n            if (this._label && this._label != label) {\r\n                $array.remove(this.sprites, this._label);\r\n                this._label.dataItem = undefined;\r\n            }\r\n            if (label) {\r\n                if (label.dataItem && label.dataItem != this) {\r\n                    $array.remove(label.dataItem.sprites, label);\r\n                    label.dataItem.label = undefined;\r\n                }\r\n                this.addSprite(label);\r\n            }\r\n            this._label = label;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisDataItem.prototype, \"axisFill\", {\r\n        /**\r\n         * @return Label element\r\n         */\r\n        get: function () {\r\n            if (!this._axisFill) {\r\n                var component_4 = this.component;\r\n                if (component_4) {\r\n                    var template = void 0;\r\n                    var axisFill_1;\r\n                    if (this.isRange) {\r\n                        template = component_4.axisRanges.template.axisFill;\r\n                        if (!this.isTemplate && template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            axisFill_1 = template.clone();\r\n                        }\r\n                    }\r\n                    else {\r\n                        template = component_4.renderer.axisFills.template;\r\n                        if (template.disabled) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            axisFill_1 = component_4.renderer.axisFills.create();\r\n                            this._disposers.push(new Disposer(function () {\r\n                                component_4.renderer.axisFills.removeValue(axisFill_1);\r\n                            }));\r\n                        }\r\n                    }\r\n                    this.axisFill = axisFill_1;\r\n                    axisFill_1.shouldClone = false;\r\n                    this._disposers.push(axisFill_1);\r\n                }\r\n            }\r\n            return this._axisFill;\r\n        },\r\n        /**\r\n         * An [[AxisFill]] associated element with this data item.\r\n         *\r\n         * If there is no fill element associated with data item, a new one is\r\n         * created and returned.\r\n         *\r\n         * @param label Label element\r\n         */\r\n        set: function (axisFill) {\r\n            if (this._axisFill && this._axisFill != axisFill) {\r\n                $array.remove(this.sprites, this._axisFill);\r\n                this._axisFill.dataItem = undefined;\r\n            }\r\n            if (axisFill) {\r\n                if (axisFill.dataItem && axisFill.dataItem != this) {\r\n                    $array.remove(axisFill.dataItem.sprites, axisFill);\r\n                    axisFill.dataItem.axisFill = undefined;\r\n                }\r\n                axisFill.axis = this.component;\r\n                this.addSprite(axisFill);\r\n            }\r\n            this._axisFill = axisFill;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisDataItem.prototype, \"text\", {\r\n        /**\r\n         * @return Text label\r\n         */\r\n        get: function () {\r\n            return this._text;\r\n        },\r\n        /**\r\n         * Text to be used as data item's label.\r\n         *\r\n         * @param text Text label\r\n         */\r\n        set: function (text) {\r\n            this._text = text;\r\n            if (this._label) { // do not use getter, it will create unwanted instances!\r\n                this._label.text = text;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisDataItem.prototype, \"mask\", {\r\n        /**\r\n         * Data item's mask.\r\n         *\r\n         * @return Mask\r\n         */\r\n        get: function () {\r\n            return this._mask;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisDataItem.prototype, \"contents\", {\r\n        /**\r\n         * Returns a [[Container]] to place all visual elements, related to data item\r\n         * in.\r\n         *\r\n         * If there is no Container, a new one is created.\r\n         *\r\n         * @return Contents container\r\n         */\r\n        get: function () {\r\n            if (!this._contents) {\r\n                var contents = new Container();\r\n                this.addSprite(contents);\r\n                contents.isMeasured = false;\r\n                this._contents = contents;\r\n                var component = this.component;\r\n                if (component) {\r\n                    var mask = component.renderer.createFill(this.component);\r\n                    mask.disabled = false;\r\n                    mask.axis = component;\r\n                    this.addSprite(mask);\r\n                    this._mask = mask;\r\n                    contents.mask = mask;\r\n                }\r\n            }\r\n            return this._contents;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisDataItem.prototype, \"axisBreak\", {\r\n        /**\r\n         * @return Axis break\r\n         */\r\n        get: function () {\r\n            return this._axisBreak;\r\n        },\r\n        /**\r\n         * An [[AxisBreak]] this data item falls within.\r\n         *\r\n         * @param axisBreak Axis break\r\n         */\r\n        set: function (axisBreak) {\r\n            if (this._axisBreak) {\r\n                this._axisBreak.dataItems.removeValue(this);\r\n            }\r\n            if (axisBreak) {\r\n                axisBreak.dataItems.push(this);\r\n            }\r\n            this._axisBreak = axisBreak;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Re-draws the element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisDataItem.prototype.validate = function () {\r\n        if (this.component) {\r\n            this.component.validateDataElement(this);\r\n        }\r\n    };\r\n    /**\r\n     * Appends data item's elements to the parent [[Container]].\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisDataItem.prototype.appendChildren = function () {\r\n        if (this.component) {\r\n            this.component.appendDataItem(this);\r\n        }\r\n    };\r\n    /**\r\n     * Ordering function used in JSON setup.\r\n     *\r\n     * @param a  Item A\r\n     * @param b  Item B\r\n     * @return Order\r\n     */\r\n    AxisDataItem.prototype.configOrder = function (a, b) {\r\n        if (a == b) {\r\n            return 0;\r\n        }\r\n        else if (a == \"language\") {\r\n            return -1;\r\n        }\r\n        else if (b == \"language\") {\r\n            return 1;\r\n        }\r\n        else if (a == \"component\") {\r\n            return -1;\r\n        }\r\n        else if (b == \"component\") {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    };\r\n    /**\r\n     * Checks if data item has particular property set.\r\n     *\r\n     * @param prop  Property name\r\n     * @return Property set?\r\n     */\r\n    AxisDataItem.prototype.hasProperty = function (prop) {\r\n        return prop == \"component\" ? true : _super.prototype.hasProperty.call(this, prop);\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[AxisDataItem]].\r\n     *\r\n     * @param source Source AxisDataItem\r\n     */\r\n    AxisDataItem.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.text = source.text;\r\n        if (source.bullet) {\r\n            this.bullet = source.bullet.clone();\r\n        }\r\n        this.minPosition = source.minPosition;\r\n        this.maxPosition = source.maxPosition;\r\n    };\r\n    /**\r\n     * Sets visibility of the Data Item.\r\n     *\r\n     * @param value Data Item\r\n     */\r\n    AxisDataItem.prototype.setVisibility = function (value, noChangeValues) {\r\n        _super.prototype.setVisibility.call(this, value, noChangeValues);\r\n        if (this._contents) {\r\n            this._contents.visible = value;\r\n        }\r\n    };\r\n    Object.defineProperty(AxisDataItem.prototype, \"bullet\", {\r\n        /**\r\n         * @return Bullet\r\n         */\r\n        get: function () {\r\n            return this._bullet;\r\n        },\r\n        /**\r\n         * Set it to an instance of any [[Sprite]]. It will be displayed as an axis\r\n         * bullet in the middle of the cell, or specific value.\r\n         *\r\n         * If you need position bullet relatively to the cell, use [[AxisBullet]]\r\n         * instead. It has a `location` property which can be used to indicate\r\n         * precise relative location within cell/range.\r\n         *\r\n         * Also, [[AxisBullet]] is a [[Container]] so you can push any other element\r\n         * into it.\r\n         *\r\n         * NOTE: `location` is relative to the parent axis range's scope, i.e.\r\n         * between its `date` and `endDate` for [[DateAxis]], or `value`/`endValue`\r\n         * ([[ValueAxis]]), or `category`/`endCategory` ([[categoryAxis]]).\r\n         *\r\n         * ```TypeScript\r\n         * let range = dateAxis.axisRanges.create();\r\n         * range.date = new Date(2018, 0, 5);\r\n         *\r\n         * let flag = new am4plugins_bullets.FlagBullet();\r\n         * flag.label.text = \"Hello\";\r\n         *\r\n         * range.bullet = flag;\r\n         * ```\r\n         * ```JavaScript\r\n         * var range = dateAxis.axisRanges.create();\r\n         * range.date = new Date(2018, 0, 5);\r\n         *\r\n         * var flag = new am4plugins_bullets.FlagBullet();\r\n         * flag.label.text = \"Hello\";\r\n         *\r\n         * range.bullet = flag;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"xAxes\": [{\r\n         *     \"type\": \"DateAxis\",\r\n         *     // ...\r\n         *     \"axisRanges\": [{\r\n         *       \"date\": new Date(2018, 0, 5),\r\n         *       \"bullet: {\r\n         *         \"type\": \"FlagBullet\",\r\n         *         \"label\": {\r\n         *           \"text\": \"Hello\"\r\n         *         }\r\n         *       }\r\n         *     }]\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @since 4.5.9\r\n         * @param  value  Bullet\r\n         */\r\n        set: function (value) {\r\n            if (this._bullet && this._bullet != value) {\r\n                $array.remove(this.sprites, this._bullet);\r\n                this._bullet.dataItem = undefined;\r\n            }\r\n            this._bullet = value;\r\n            if (value) {\r\n                this.addSprite(value);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AxisDataItem;\r\n}(DataItem));\r\nexport { AxisDataItem };\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines named positions for data item's location within [[Axis]].\r\n */\r\nexport var AxisItemLocation;\r\n(function (AxisItemLocation) {\r\n    AxisItemLocation[AxisItemLocation[\"Start\"] = 0] = \"Start\";\r\n    AxisItemLocation[AxisItemLocation[\"Middle\"] = 0.5] = \"Middle\";\r\n    AxisItemLocation[AxisItemLocation[\"End\"] = 1] = \"End\";\r\n})(AxisItemLocation || (AxisItemLocation = {}));\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A base class for all Axis elements.\r\n *\r\n * @see {@link IAxisEvents} for a list of available Events\r\n * @see {@link IAxisAdapters} for a list of available Adapters\r\n */\r\nvar Axis = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Axis, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Axis() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Number of Grid elements on the axis.\r\n         */\r\n        _this._gridCount = 10;\r\n        /**\r\n         * A list of [[XYSeries]] that are using this Axis.\r\n         */\r\n        _this._series = new List();\r\n        /**\r\n         * Specifies if axis should be automatically disposed when removing from\r\n         * chart's axis list.\r\n         *\r\n         * @default true\r\n         */\r\n        _this.autoDispose = true;\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this._axisItemCount = 0;\r\n        if (_this.constructor === Axis) {\r\n            throw new Error(\"'Axis' cannot be instantiated directly. Please use a specific axis type.\");\r\n        }\r\n        _this.hideTooltipWhileZooming = true;\r\n        _this.minWidth = 0.0001;\r\n        _this.minHeight = 0.0001;\r\n        _this.className = \"Axis\";\r\n        _this.shouldClone = false;\r\n        _this.setPropertyValue(\"cursorTooltipEnabled\", true);\r\n        _this.toggleZoomOutButton = true;\r\n        var interfaceColors = new InterfaceColorSet();\r\n        // Create title\r\n        _this.title = new Label();\r\n        _this.title.shouldClone = false;\r\n        _this._disposers.push(_this.title);\r\n        _this.setPropertyValue(\"startLocation\", 0);\r\n        _this.setPropertyValue(\"endLocation\", 1);\r\n        // Data item iterator\r\n        _this._dataItemsIterator = new $iter.ListIterator(_this.dataItems, function () { return _this.dataItems.create(); });\r\n        _this._dataItemsIterator.createNewItems = true;\r\n        // Create tooltip\r\n        var tooltip = new Tooltip();\r\n        _this._disposers.push(tooltip);\r\n        tooltip.label.padding(5, 10, 5, 10);\r\n        tooltip.background.pointerLength = 5;\r\n        tooltip.fitPointerToBounds = true;\r\n        tooltip.background.filters.clear();\r\n        // Set virtual parentfor the tooltip so that it can properly inheirt\r\n        // formatters from the axis.\r\n        tooltip.virtualParent = _this;\r\n        // Create background element for the tooltip\r\n        var background = tooltip.background;\r\n        background.cornerRadius = 0;\r\n        background.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n        background.stroke = background.fill;\r\n        background.strokeWidth = 1;\r\n        background.fillOpacity = 1;\r\n        tooltip.label.fill = interfaceColors.getFor(\"alternativeText\");\r\n        _this.tooltip = tooltip;\r\n        // Accessibility\r\n        _this.readerHidden = true;\r\n        _this.events.on(\"rangechangestarted\", function () {\r\n            _this.series.each(function (series) {\r\n                if (series.hideTooltipWhileZooming) {\r\n                    series.tooltip.hide(0);\r\n                    series.tooltip.__disabled = true;\r\n                }\r\n            });\r\n            if (_this.hideTooltipWhileZooming) {\r\n                _this.tooltip.hide(0);\r\n                _this.tooltip.__disabled = true;\r\n            }\r\n        }, undefined, false);\r\n        _this.events.on(\"rangechangeended\", function () {\r\n            _this.series.each(function (series) {\r\n                if (series.hideTooltipWhileZooming) {\r\n                    series.tooltip.hide(0);\r\n                    series.tooltip.__disabled = false;\r\n                }\r\n            });\r\n            if (_this.hideTooltipWhileZooming) {\r\n                _this.tooltip.hide(0);\r\n                _this.tooltip.__disabled = false;\r\n            }\r\n        }, undefined, false);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Holds reference to a function that accepts a DataItem and its index as\r\n     * parameters.\r\n     *\r\n     * It can either return a fill opacity for a fill, or manipulate data item\r\n     * directly, to create various highlighting scenarios.\r\n     *\r\n     * For example, you can set it up to highlight only weekends on a\r\n     * [[DateAxis]].\r\n     */\r\n    Axis.prototype.fillRule = function (dataItem, index) {\r\n        if (!$type.isNumber(index)) {\r\n            index = dataItem.index;\r\n        }\r\n        if (index / 2 == Math.round(index / 2)) {\r\n            dataItem.axisFill.__disabled = true;\r\n            dataItem.axisFill.opacity = 0;\r\n        }\r\n        else {\r\n            dataItem.axisFill.opacity = 1;\r\n            dataItem.axisFill.__disabled = false;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    Axis.prototype.createDataItem = function () {\r\n        return new AxisDataItem();\r\n    };\r\n    /**\r\n     * Invalidates layout.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.invalidateLayout = function () {\r\n        _super.prototype.invalidateLayout.call(this);\r\n        // this puts series after axis in invalidation order also makes series update it's data items in case widht/height of a series is not 100%\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            series.invalidateLayout();\r\n        });\r\n    };\r\n    /**\r\n     * Invalidates series of this axis.\r\n     */\r\n    Axis.prototype.invalidateSeries = function () {\r\n        // this puts series after axis in invalidation order also makes series update it's data items in case widht/height of a series is not 100%\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            series.invalidate();\r\n        });\r\n    };\r\n    /**\r\n     * Override to cancel super call for data element validation.\r\n     * @ignore\r\n     */\r\n    Axis.prototype.validateDataElements = function () {\r\n        this._axisItemCount = 0;\r\n        if (this.ghostLabel) {\r\n            this.renderer.updateLabelElement(this.ghostLabel, this.start, this.end);\r\n            this.ghostLabel.validate();\r\n        }\r\n    };\r\n    /**\r\n     * Recalculates the number of grid items on the axis.\r\n     */\r\n    Axis.prototype.updateGridCount = function () {\r\n        if (this.renderer) {\r\n            this._gridCount = this.axisLength / this.renderer.minGridDistance;\r\n        }\r\n    };\r\n    /**\r\n     * Redraws the element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.validateLayout = function () {\r\n        this.axisFullLength = this.axisLength / (this.end - this.start);\r\n        _super.prototype.validateLayout.call(this);\r\n        this.updateGridCount();\r\n        var renderer = this.renderer;\r\n        if (renderer) {\r\n            renderer.updateAxisLine();\r\n            renderer.updateTooltip();\r\n            renderer.updateBaseGridElement();\r\n        }\r\n        if (this._prevLength != this.axisLength) {\r\n            this.dispatchImmediately(\"lengthchanged\");\r\n            this._prevLength = this.axisLength;\r\n        }\r\n    };\r\n    /**\r\n     * Initializes Axis' renderer.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.initRenderer = function () {\r\n    };\r\n    /**\r\n     * Adds a data item to the Axis.\r\n     *\r\n     * @param dataItem Data item\r\n     */\r\n    Axis.prototype.appendDataItem = function (dataItem) {\r\n        var renderer = this.renderer;\r\n        var tick = dataItem.tick;\r\n        if (tick) {\r\n            if (tick.above) {\r\n                tick.parent = renderer.bulletsContainer;\r\n            }\r\n            else {\r\n                tick.parent = renderer.gridContainer;\r\n            }\r\n        }\r\n        if (dataItem.label) {\r\n            dataItem.label.parent = renderer;\r\n        }\r\n        var axisFill = dataItem.axisFill;\r\n        if (axisFill) {\r\n            if (axisFill.above) {\r\n                axisFill.parent = renderer.bulletsContainer;\r\n            }\r\n            else {\r\n                axisFill.parent = renderer.gridContainer;\r\n            }\r\n        }\r\n        var grid = dataItem.grid;\r\n        if (grid) {\r\n            if (grid.above) {\r\n                grid.parent = renderer.bulletsContainer;\r\n            }\r\n            else {\r\n                grid.parent = renderer.gridContainer;\r\n            }\r\n        }\r\n        if (dataItem.bullet) {\r\n            dataItem.bullet.parent = renderer.bulletsContainer;\r\n        }\r\n    };\r\n    /**\r\n     * Redraws Axis' related items.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        this.validateLayout();\r\n        this.renderer.updateGridContainer();\r\n    };\r\n    /**\r\n     * Redars Axis ranges.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.validateAxisRanges = function () {\r\n        var _this = this;\r\n        $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n            _this.appendDataItem(axisRange);\r\n            _this.validateDataElement(axisRange);\r\n            if (axisRange.grid) {\r\n                axisRange.grid.validate();\r\n            }\r\n            if (axisRange.tick) {\r\n                axisRange.tick.validate();\r\n            }\r\n            if (axisRange.axisFill) {\r\n                axisRange.axisFill.validate();\r\n            }\r\n            if (axisRange.label) {\r\n                axisRange.label.validate();\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invalidates all axis breaks, so they are redrawn.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.validateBreaks = function () {\r\n        if (this._axisBreaks) {\r\n            $iter.each(this._axisBreaks.iterator(), function (axisBreak) {\r\n                axisBreak.invalidate();\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Associates an Axis break with this Axis, after it is inserted into\r\n     * `axisBreaks`.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event Event\r\n     */\r\n    Axis.prototype.processBreak = function (event) {\r\n        var axisBreak = event.newValue;\r\n        axisBreak.parent = this.renderer.breakContainer;\r\n        axisBreak.axis = this;\r\n    };\r\n    /**\r\n     * Registers a [[XYSeries]] element with this Axis.\r\n     *\r\n     * Returns a [[Disposer]] for all events, added to Series for watching\r\n     * changes in Axis, and vice versa.\r\n     * @ignore\r\n     * @param series  Series\r\n     * @return Event disposer\r\n     */\r\n    Axis.prototype.registerSeries = function (series) {\r\n        var _this = this;\r\n        this.series.moveValue(series);\r\n        return new MultiDisposer([\r\n            new Disposer(function () {\r\n                _this.series.removeValue(series);\r\n            }),\r\n            this.events.on(\"lengthchanged\", series.invalidate, series, false),\r\n            this.events.on(\"lengthchanged\", series.createMask, series, false),\r\n            this.events.on(\"startchanged\", series.invalidate, series, false),\r\n            this.events.on(\"endchanged\", series.invalidate, series, false),\r\n        ]);\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"renderer\", {\r\n        /**\r\n         * @return Renderer\r\n         */\r\n        get: function () {\r\n            return this._renderer;\r\n        },\r\n        /**\r\n         * An [[AxisRenderer]] to be used to render this Axis.\r\n         *\r\n         * Please note that most of the settings, related to Axis' appearance are set\r\n         * via its renderer. Not directly on the Axis.\r\n         *\r\n         * E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * axis.renderer.inside = true;\r\n         * axis.renderer.minLabelPosition = 0.1;\r\n         * axis.renderer.maxLabelPosition = 0.9;\r\n         * ```\r\n         * ```JavaScript\r\n         * axis.renderer.inside = true;\r\n         * axis.renderer.minLabelPosition = 0.1;\r\n         * axis.renderer.maxLabelPosition = 0.9;\r\n         * ```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/} for more info\r\n         * @param renderer  Renderer\r\n         */\r\n        set: function (renderer) {\r\n            if (renderer != this._renderer) {\r\n                this._renderer = renderer;\r\n                renderer.chart = this.chart;\r\n                renderer.axis = this;\r\n                renderer.parent = this;\r\n                this.title.parent = this; // we add title to axis and set layout in renderer to avoid one extra container, as otherwise axis container would be used for holding renderer only\r\n                this.initRenderer();\r\n                this._disposers.push(renderer.gridContainer.events.on(\"maxsizechanged\", this.invalidate, this, false));\r\n                var ghostLabel_1 = this.renderer.labels.create();\r\n                this._disposers.push(ghostLabel_1);\r\n                ghostLabel_1.dataItem = this.dataItems.template.clone(); // just for the adapters not to fail\r\n                ghostLabel_1.text = \"L\";\r\n                ghostLabel_1.parent = this.renderer;\r\n                ghostLabel_1.shouldClone = false;\r\n                ghostLabel_1.fillOpacity = 0;\r\n                ghostLabel_1.opacity = 0;\r\n                ghostLabel_1.strokeOpacity = 0;\r\n                ghostLabel_1.interactionsEnabled = false;\r\n                ghostLabel_1.validate();\r\n                this.ghostLabel = ghostLabel_1;\r\n                this.events.on(\"beforedatavalidated\", function () {\r\n                    ghostLabel_1.text = \"L\";\r\n                }, undefined, false);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts a relative position to angle. (for circular axes)\r\n     *\r\n     * @param position Position (0-1)\r\n     * @return Angle\r\n     */\r\n    Axis.prototype.positionToAngle = function (position) {\r\n        return this.renderer.positionToAngle(position);\r\n    };\r\n    /**\r\n     * Converts pixel coordinates to a relative position. (0-1)\r\n     *\r\n     * @param point  Coorinates (px)\r\n     * @return Position (0-1)\r\n     */\r\n    Axis.prototype.pointToPosition = function (point) {\r\n        return this.renderer.pointToPosition(point);\r\n    };\r\n    /**\r\n     * Converts relative position to coordinate.\r\n     *\r\n     * @since 4.7.15\r\n     * @param position (0-1)\r\n     * @return coordinate (px)\r\n     */\r\n    Axis.prototype.positionToCoordinate = function (position) {\r\n        return this.renderer.positionToCoordinate(position);\r\n    };\r\n    /**\r\n     * [getAnyRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param start  [description]\r\n     * @param end    [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getAnyRangePath = function (start, end) {\r\n        return this.renderer.getPositionRangePath(start, end);\r\n    };\r\n    /**\r\n     * Converts any positional parameter to a relative position on axis.\r\n     *\r\n     * @todo Description (review)\r\n     * @param value  Pisition\r\n     * @return Position (0-1)\r\n     */\r\n    Axis.prototype.anyToPosition = function (value) {\r\n        return 0;\r\n    };\r\n    /**\r\n     * Converts any positional parameter to a relative position on axis.\r\n     *\r\n     * @todo Description (review)\r\n     * @param value  Pisition\r\n     * @return Orientation point\r\n     */\r\n    Axis.prototype.anyToPoint = function (value) {\r\n        return { x: 0, y: 0, angle: 0 };\r\n    };\r\n    /**\r\n     * [getPositionRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param startPosition [description]\r\n     * @param endPosition   [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getPositionRangePath = function (startPosition, endPosition) {\r\n        if (this.renderer) {\r\n            return this.renderer.getPositionRangePath(startPosition, endPosition);\r\n        }\r\n        return \"\";\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"axisLength\", {\r\n        /**\r\n         * Actual axis length in pixels.\r\n         *\r\n         * @return Axis length (px)\r\n         */\r\n        get: function () {\r\n            if (this.renderer) {\r\n                return this.renderer.axisLength;\r\n            }\r\n            return 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Axis.prototype, \"cursorTooltipEnabled\", {\r\n        /**\r\n         * @return Display tooltip?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cursorTooltipEnabled\");\r\n        },\r\n        /**\r\n         * Indicates if axis should display a tooltip for chart's cursor.\r\n         *\r\n         * @param value Display tooltip?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"cursorTooltipEnabled\", value)) {\r\n                if (value && this.renderer) {\r\n                    this.renderer.updateTooltip();\r\n                }\r\n                else if (this.tooltip) {\r\n                    this.tooltip.hide(0);\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Axis.prototype, \"toggleZoomOutButton\", {\r\n        /**\r\n         * @return Toggle zoom out button?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"toggleZoomOutButton\");\r\n        },\r\n        /**\r\n         * Normally, when axis is zoomed in, a zoom out button is shown by a chart,\r\n         * and vice versa: when axis is zoomed out completely, zoom out button is\r\n         * hidden.\r\n         *\r\n         * Setting this to `false` will disable this behavior. Zooming in our out\r\n         * this axis will not reveal or hide zoom out button.\r\n         *\r\n         * @default true\r\n         * @since 4.6.2\r\n         * @param  value  Toggle zoom out button?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"toggleZoomOutButton\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Hides element's [[Tooltip]].\r\n     *\r\n     * @see {@link Tooltip}\r\n     */\r\n    Axis.prototype.hideTooltip = function (duration) {\r\n        _super.prototype.hideTooltip.call(this, duration);\r\n        this._tooltipPosition = undefined;\r\n    };\r\n    /**\r\n     * Shows Axis tooltip at specific relative position within Axis. (0-1)\r\n     *\r\n     * @param position Position (0-1)\r\n     * @param local or global position\r\n     */\r\n    Axis.prototype.showTooltipAtPosition = function (position, local) {\r\n        var tooltip = this._tooltip;\r\n        if (!tooltip || this.dataItems.length <= 0) {\r\n            this._tooltipPosition = undefined;\r\n        }\r\n        else {\r\n            if (!local) {\r\n                position = this.toAxisPosition(position);\r\n            }\r\n            if (!$type.isNumber(position) || position < this.start || position > this.end) {\r\n                tooltip.hide(0);\r\n                this._tooltipPosition = undefined;\r\n                return;\r\n            }\r\n            var renderer = this.renderer;\r\n            //@todo: think of how to solve this better\r\n            if (!tooltip.parent) {\r\n                tooltip.parent = this.tooltipContainer;\r\n            }\r\n            var tooltipLocation = renderer.tooltipLocation;\r\n            var startPosition = this.getCellStartPosition(position);\r\n            var endPosition = this.getCellEndPosition(position);\r\n            if (this.tooltipPosition == \"fixed\") {\r\n                position = $math.ceil(startPosition + (endPosition - startPosition) * tooltipLocation, 4);\r\n            }\r\n            position = $math.fitToRange(position, this.start, this.end);\r\n            if (this._tooltipPosition != position) {\r\n                this._tooltipPosition = position;\r\n                var tooltipLocation2 = renderer.tooltipLocation2;\r\n                var startPoint = renderer.positionToPoint(startPosition, tooltipLocation2);\r\n                var endPoint = renderer.positionToPoint(endPosition, tooltipLocation2);\r\n                // save values so cursor could use them\r\n                this.currentItemStartPoint = startPoint;\r\n                this.currentItemEndPoint = endPoint;\r\n                if (renderer.fullWidthTooltip) {\r\n                    tooltip.width = endPoint.x - startPoint.x;\r\n                    tooltip.height = endPoint.y - startPoint.y;\r\n                }\r\n                var point = renderer.positionToPoint(position, tooltipLocation2);\r\n                var globalPoint = $utils.spritePointToSvg(point, this.renderer.line);\r\n                tooltip.text = this.getTooltipText(position);\r\n                if (tooltip.text) {\r\n                    tooltip.pointTo(globalPoint);\r\n                    tooltip.show();\r\n                }\r\n            }\r\n            if (!this.cursorTooltipEnabled || this.tooltip.disabled) {\r\n                tooltip.hide(0);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Converts relative position (0-1) to Axis position with zoom level and\r\n     * inversed taken into account.\r\n     *\r\n     * @param position Global position (0-1)\r\n     * @return Position within Axis (0-1)\r\n     */\r\n    Axis.prototype.toAxisPosition = function (position) {\r\n        position = this.renderer.toAxisPosition(position);\r\n        if (position == undefined) {\r\n            return;\r\n        }\r\n        position = position * (this.end - this.start);\r\n        if (this.renderer.inversed) {\r\n            position = this.end - position;\r\n        }\r\n        else {\r\n            position = this.start + position;\r\n        }\r\n        return position;\r\n    };\r\n    /**\r\n     * Converts position on the axis with zoom level and\r\n     * inversed taken into account to global position.\r\n     *\r\n     * @param position Axis position (0-1)\r\n     * @return Global position (0-1)\r\n     */\r\n    Axis.prototype.toGlobalPosition = function (position) {\r\n        if (this.renderer.inversed) {\r\n            position = this.end - position;\r\n        }\r\n        else {\r\n            position = position - this.start;\r\n        }\r\n        return position / (this.end - this.start);\r\n    };\r\n    /**\r\n     * Returns text to be used for cursor's Axis tooltip.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Position coordinate (px)\r\n     * @return Label text\r\n     */\r\n    Axis.prototype.getTooltipText = function (position) {\r\n        return;\r\n    };\r\n    /**\r\n     * Updates Axis' tooltip's position and possibly size, and pointer (stem)\r\n     * place.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param pointerOrientation  Pointer (stem) orientation\r\n     * @param boundingRectangle   A rectangle for tooltip to fit within\r\n     */\r\n    Axis.prototype.updateTooltip = function (pointerOrientation, boundingRectangle) {\r\n        var tooltip = this._tooltip;\r\n        if (tooltip) {\r\n            tooltip.pointerOrientation = pointerOrientation;\r\n            tooltip.setBounds($utils.spriteRectToSvg(boundingRectangle, this.renderer.line));\r\n        }\r\n    };\r\n    /**\r\n     * [roundPosition description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param position  Relative position\r\n     * @param location  Location on axis\r\n     * @return Rounded position\r\n     */\r\n    Axis.prototype.roundPosition = function (position, location, axisLocation) {\r\n        return position;\r\n    };\r\n    /**\r\n     * [getCellStartPosition description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param position [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getCellStartPosition = function (position) {\r\n        return position;\r\n    };\r\n    /**\r\n     * [getCellEndPosition description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param position [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getCellEndPosition = function (position) {\r\n        return position;\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"axisRanges\", {\r\n        /**\r\n         * A list of axis ranges for this Axis.\r\n         *\r\n         * @return Axis ranges\r\n         */\r\n        get: function () {\r\n            if (!this._axisRanges) {\r\n                var dataItem = this.createDataItem();\r\n                dataItem.isRange = true;\r\n                dataItem.axisFill = this.renderer.axisFills.template.clone();\r\n                dataItem.grid = this.renderer.grid.template.clone();\r\n                dataItem.tick = this.renderer.ticks.template.clone();\r\n                dataItem.label = this.renderer.labels.template.clone();\r\n                dataItem.isTemplate = true;\r\n                dataItem.component = this;\r\n                dataItem.axisFill.disabled = false;\r\n                dataItem.tick.disabled = false;\r\n                dataItem.grid.disabled = false;\r\n                dataItem.label.disabled = false;\r\n                this._axisRanges = new ListTemplate(dataItem);\r\n                this._axisRanges.events.on(\"inserted\", this.processAxisRange, this, false);\r\n                this._disposers.push(new ListDisposer(this._axisRanges));\r\n                this._disposers.push(this._axisRanges.template);\r\n            }\r\n            return this._axisRanges;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Decorates an axis range after it has been added to the axis range list.\r\n     *\r\n     * @param event Event\r\n     */\r\n    Axis.prototype.processAxisRange = function (event) {\r\n        var axisRange = event.newValue;\r\n        axisRange.component = this;\r\n        axisRange.isRange = true;\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"axisBreaks\", {\r\n        /**\r\n         * A list of axis breaks on this Axis.\r\n         *\r\n         * @return Axis breaks.\r\n         */\r\n        get: function () {\r\n            if (!this._axisBreaks) {\r\n                this._axisBreaks = new SortedListTemplate(this.createAxisBreak(), function (a, b) {\r\n                    return $number.order(a.adjustedStartValue, b.adjustedStartValue);\r\n                });\r\n                this._axisBreaks.events.on(\"inserted\", this.processBreak, this, false);\r\n                this._disposers.push(new ListDisposer(this._axisBreaks));\r\n                this._disposers.push(this._axisBreaks.template);\r\n            }\r\n            return this._axisBreaks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates a new axis break.\r\n     *\r\n     * @return Axis break\r\n     */\r\n    Axis.prototype.createAxisBreak = function () {\r\n        return new AxisBreak();\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"series\", {\r\n        /**\r\n         * A list of Series currently associated with this Axis.\r\n         *\r\n         * @return Series\r\n         */\r\n        get: function () {\r\n            if (!this._series) {\r\n                this._series = new List();\r\n            }\r\n            return this._series;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Processes Series' data items.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.processSeriesDataItems = function () {\r\n    };\r\n    /**\r\n     * Processes Series' single data item.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem Data item\r\n     */\r\n    Axis.prototype.processSeriesDataItem = function (dataItem, axisLetter) {\r\n    };\r\n    /**\r\n     * Post-processes Serie's data items.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.postProcessSeriesDataItems = function () {\r\n    };\r\n    /**\r\n     * Post-processes Serie's single data item.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem Data item\r\n     */\r\n    Axis.prototype.postProcessSeriesDataItem = function (dataItem) {\r\n    };\r\n    //\r\n    /**\r\n     * Updates Axis based on all Series that might influence it.\r\n     *\r\n     * Called by Series after Series data is validated.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.updateAxisBySeries = function () {\r\n    };\r\n    /**\r\n     * Hides unused data items.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Axis.prototype.hideUnusedDataItems = function () {\r\n        var _this = this;\r\n        // hide all unused\r\n        var dataItemsIterator = this._dataItemsIterator;\r\n        dataItemsIterator.createNewItems = false;\r\n        $iter.each(dataItemsIterator.iterator(), function (dataItem) {\r\n            _this.validateDataElement(dataItem); // solves shrinking\r\n            dataItem.__disabled = true;\r\n        });\r\n        dataItemsIterator.clear();\r\n        dataItemsIterator.createNewItems = true;\r\n    };\r\n    /**\r\n     * Returns a Series' data item that corresponds to specific position on Axis.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param series    Series\r\n     * @param position  Position (0-1)\r\n     * @param findNearest  Should axis try to find nearest tooltip if there is no data item at exact position\r\n     * @return Data item\r\n     */\r\n    Axis.prototype.getSeriesDataItem = function (series, position, findNearest) {\r\n        return;\r\n    };\r\n    /**\r\n     * Returns an angle that corresponds to specific position on axis.\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       ???\r\n     * @param location  Location\r\n     * @param stackKey  ???\r\n     * @return Angle\r\n     */\r\n    Axis.prototype.getAngle = function (dataItem, key, location, stackKey, range) {\r\n        return;\r\n    };\r\n    /**\r\n     * [getX description]\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem [description]\r\n     * @param key      [description]\r\n     * @param location [description]\r\n     * @param stackKey [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getX = function (dataItem, key, location, stackKey, range) {\r\n        return;\r\n    };\r\n    /**\r\n     * [getX description]\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem [description]\r\n     * @param key      [description]\r\n     * @param location [description]\r\n     * @param stackKey [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getPositionX = function (dataItem, key, location, stackKey, range) {\r\n        return;\r\n    };\r\n    /**\r\n     * [getY description]\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem [description]\r\n     * @param key      [description]\r\n     * @param location [description]\r\n     * @param stackKey [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getY = function (dataItem, key, location, stackKey, range) {\r\n        return;\r\n    };\r\n    /**\r\n     * [getY description]\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem [description]\r\n     * @param key      [description]\r\n     * @param location [description]\r\n     * @param stackKey [description]\r\n     * @return [description]\r\n     */\r\n    Axis.prototype.getPositionY = function (dataItem, key, location, stackKey, range) {\r\n        return;\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"basePoint\", {\r\n        /**\r\n         * Coordinates of the actual axis start.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Base point coordinates\r\n         */\r\n        get: function () {\r\n            return { x: 0, y: 0 };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * [dataChangeUpdate description]\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    Axis.prototype.dataChangeUpdate = function () {\r\n    };\r\n    /**\r\n     * [dataChangeUpdate description]\r\n     *\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    Axis.prototype.seriesDataChangeUpdate = function (series) {\r\n    };\r\n    /**\r\n     * Removes axis breaks that fall between `min` and `max` (???)\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param min  Start value\r\n     * @param max  End value\r\n     * @return Spread o\r\n     */\r\n    Axis.prototype.adjustDifference = function (min, max) {\r\n        var difference = max - min;\r\n        if ($type.isNumber(difference)) {\r\n            if (this._axisBreaks) {\r\n                $iter.eachContinue(this._axisBreaks.iterator(), function (axisBreak) {\r\n                    var startValue = axisBreak.adjustedStartValue;\r\n                    var endValue = axisBreak.adjustedEndValue;\r\n                    if ($type.isNumber(startValue) && $type.isNumber(endValue)) {\r\n                        // breaks are sorted, we don't need go further anymore\r\n                        if (startValue > max) {\r\n                            return false;\r\n                        }\r\n                        if (endValue >= min) {\r\n                            if ($type.isNumber(startValue) && $type.isNumber(endValue)) {\r\n                                var breakSize = axisBreak.breakSize;\r\n                                var intersection = $math.intersection({ start: startValue, end: endValue }, { start: min, end: max });\r\n                                if (intersection) {\r\n                                    difference -= (intersection.end - intersection.start) * (1 - breakSize);\r\n                                }\r\n                            }\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n            return difference;\r\n        }\r\n    };\r\n    /**\r\n     * Checks if specific value falls within a break.\r\n     *\r\n     * Returns [[AxisBreak]] the value falls into.\r\n     *\r\n     * @param value  Value to check\r\n     * @return Axis break\r\n     */\r\n    Axis.prototype.isInBreak = function (value) {\r\n        if (this._axisBreaks) {\r\n            return $iter.find(this._axisBreaks.iterator(), function (axisBreak) {\r\n                return value >= axisBreak.adjustedStartValue &&\r\n                    value <= axisBreak.adjustedEndValue;\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * [fixAxisBreaks description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    Axis.prototype.fixAxisBreaks = function () {\r\n        var _this = this;\r\n        if (this._axisBreaks) {\r\n            var axisBreaks = this._axisBreaks;\r\n            if (axisBreaks.length > 0) {\r\n                // first make sure that startValue is <= end value\r\n                // This needs to make a copy of axisBreaks because it mutates the list while traversing\r\n                // TODO very inefficient\r\n                $array.each($iter.toArray(axisBreaks.iterator()), function (axisBreak) {\r\n                    var startValue = $math.min(axisBreak.startValue, axisBreak.endValue);\r\n                    var endValue = $math.max(axisBreak.startValue, axisBreak.endValue);\r\n                    axisBreak.adjustedStartValue = startValue;\r\n                    axisBreak.adjustedEndValue = endValue;\r\n                    _this._axisBreaks.update(axisBreak);\r\n                });\r\n                var firstAxisBreak = axisBreaks.first;\r\n                var previousEndValue_1 = Math.min(firstAxisBreak.startValue, firstAxisBreak.endValue);\r\n                // process breaks\r\n                // TODO does this need to call axisBreaks.update ?\r\n                $iter.each(axisBreaks.iterator(), function (axisBreak) {\r\n                    var startValue = axisBreak.adjustedStartValue;\r\n                    var endValue = axisBreak.adjustedEndValue;\r\n                    // breaks can't overlap\r\n                    // if break starts before previous break ends\r\n                    if (startValue < previousEndValue_1) {\r\n                        startValue = previousEndValue_1;\r\n                        if (endValue < previousEndValue_1) {\r\n                            endValue = previousEndValue_1;\r\n                        }\r\n                    }\r\n                    axisBreak.adjustedStartValue = startValue;\r\n                    axisBreak.adjustedEndValue = endValue;\r\n                });\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"startIndex\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        /**\r\n         * We need start/end indexes of axes to be 0 - `dataItems.length`.\r\n         *\r\n         * Yes, also for category axis, this helps to avoid jumping of categories\r\n         * while scrolling and does not do a lot of extra work as we use\r\n         * protected `_startIndex` and `_endIndex` when working with items.\r\n         *\r\n         * @hidden\r\n         */\r\n        /**\r\n         * [startIndex description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @param value [description]\r\n         */\r\n        set: function (value) {\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Axis.prototype, \"endIndex\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this.dataItems.length;\r\n        },\r\n        /**\r\n         * [endIndex description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @param value [description]\r\n         */\r\n        set: function (value) {\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a formatted label based on position.\r\n     *\r\n     * Individual axis types should override this method to generate a label\r\n     * that is relevant to axis type.\r\n     *\r\n     * Please note that `position` represents position within axis which may be\r\n     * zoomed and not correspond to Cursor's `position`.\r\n     *\r\n     * To convert Cursor's `position` to Axis' `position` use `toAxisPosition()` method.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v4/tutorials/tracking-cursors-position-via-api/#Tracking_Cursor_s_position} For more information about cursor tracking.\r\n     * @param position  Relative position on axis (0-1)\r\n     * @return Position label\r\n     */\r\n    Axis.prototype.getPositionLabel = function (position) {\r\n        return Math.round(position * 100) + \"%x\";\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"chart\", {\r\n        /**\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart;\r\n        },\r\n        /**\r\n         * A Chart this Axis belongs to.\r\n         *\r\n         * @param value  Chart\r\n         */\r\n        set: function (value) {\r\n            this._chart = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates a data item for a Series range.\r\n     *\r\n     * @param series  Target Series\r\n     * @return Range data item\r\n     */\r\n    Axis.prototype.createSeriesRange = function (series) {\r\n        var range = this.axisRanges.create();\r\n        range.component = this;\r\n        range.axisFill = this.renderer.axisFills.template.clone();\r\n        range.axisFill.disabled = false;\r\n        range.axisFill.fillOpacity = 0;\r\n        range.grid = this.renderer.grid.template.clone();\r\n        range.grid.disabled = true;\r\n        range.tick = this.renderer.ticks.template.clone();\r\n        range.tick.disabled = true;\r\n        range.label = this.renderer.labels.template.clone();\r\n        range.label.disabled = true;\r\n        series.axisRanges.push(range);\r\n        return range;\r\n    };\r\n    /**\r\n     * Copies all properties and related data from a different instance of Axis.\r\n     *\r\n     * @param source Source Axis\r\n     */\r\n    Axis.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.renderer) {\r\n            this.renderer.copyFrom(source.renderer);\r\n        }\r\n        else {\r\n            if (source.renderer) {\r\n                this.renderer = source.renderer.clone();\r\n                this._disposers.push(this.renderer);\r\n            }\r\n        }\r\n        if (source.title) {\r\n            if (!this.title) {\r\n                this.title = source.title.clone();\r\n                this.title.parent = this;\r\n            }\r\n            else {\r\n                this.title.copyFrom(source.title);\r\n            }\r\n            this._disposers.push(this.title);\r\n        }\r\n    };\r\n    /**\r\n     * Resets internal iterator.\r\n     */\r\n    Axis.prototype.resetIterators = function () {\r\n        this._dataItemsIterator.reset();\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    Axis.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Set up axis ranges\r\n            if ($type.hasValue(config.axisRanges) && $type.isArray(config.axisRanges)) {\r\n                for (var i = 0, len = config.axisRanges.length; i < len; i++) {\r\n                    var range = config.axisRanges[i];\r\n                    // If `series` is set, we know it's a series range\r\n                    if ($type.hasValue(range[\"series\"])) {\r\n                        if ($type.isString(range[\"series\"])) {\r\n                            if (this.map.hasKey(range[\"series\"])) {\r\n                                //range[\"series\"] = this.map.getKey(range[\"series\"]);\r\n                                config.axisRanges[i] = this.createSeriesRange(this.map.getKey(range[\"series\"]));\r\n                                delete (range[\"series\"]);\r\n                                config.axisRanges[i].config = range;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"startLocation\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startLocation\");\r\n        },\r\n        /**\r\n         * Axis start location. Works on Date/Category axis, doesn't work on Value axis.\r\n         *\r\n         * * 0 - Full first cell is shown.\r\n         * * 0.5 - Half of first cell is shown.\r\n         * * 1 - None of the first cell is visible. (you probably don't want that)\r\n         *\r\n         * @param value Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startLocation\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Axis.prototype, \"endLocation\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endLocation\");\r\n        },\r\n        /**\r\n         * Axis end location. Works on Date/Category axis, doesn't work on Value axis.\r\n         *\r\n         * * 0 - None of the last cell is shown. (don't do that)\r\n         * * 0.5 - Half of the last cell is shown.\r\n         * * 1 - Full last cell is shown.\r\n         *\r\n         * @param value Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endLocation\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Axis.prototype.setDisabled = function (value) {\r\n        var changed = _super.prototype.setDisabled.call(this, value);\r\n        if (this.renderer) {\r\n            this.renderer.gridContainer.disabled = value;\r\n        }\r\n        return changed;\r\n    };\r\n    Object.defineProperty(Axis.prototype, \"title\", {\r\n        /**\r\n         * @return Title label\r\n         */\r\n        get: function () {\r\n            return this._title;\r\n        },\r\n        /**\r\n         * A reference to a [[Label]] element which serves as a title to the axis.\r\n         *\r\n         * When axis is created it aleready has an element, so you can just modify\r\n         * it.\r\n         *\r\n         * Or you can replace it with your own instance of `Label`.\r\n         *\r\n         * @param  value  Title label\r\n         */\r\n        set: function (value) {\r\n            if (this._title && this._title != value) {\r\n                this._title.dispose();\r\n            }\r\n            if (value) {\r\n                this._title = value;\r\n                value.parent = this;\r\n                value.shouldClone = false;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Axis.prototype, \"hideTooltipWhileZooming\", {\r\n        /**\r\n         * @return Hide tooltip while zooming?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"hideTooltipWhileZooming\");\r\n        },\r\n        /**\r\n         * Indicates if axis' tooltip should be hidden while axis range is animating\r\n         * (zooming)\r\n         *\r\n         * @default true\r\n         * @since 4.7.16\r\n         * @param  value  Hide tooltip while zooming?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"hideTooltipWhileZooming\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Axis;\r\n}(Component));\r\nexport { Axis };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Axis\"] = Axis;\r\nregistry.registeredClasses[\"AxisDataItem\"] = AxisDataItem;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Disable axis tooltips.\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.maybeXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Axis && target.tooltip) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.cursorTooltipEnabled = false;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=Axis.js.map","/**\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Used to draw Axis line.\r\n *\r\n * @see {@link IAxisLineEvents} for a list of available events\r\n * @see {@link IAxisLineAdapters} for a list of available Adapters\r\n */\r\nvar AxisLine = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisLine, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function AxisLine() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"AxisLine\";\r\n        _this.element = _this.paper.add(\"path\");\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.stroke = interfaceColors.getFor(\"grid\");\r\n        _this.strokeOpacity = 0.15;\r\n        _this.pixelPerfect = true;\r\n        _this.fill = color();\r\n        _this.applyTheme();\r\n        _this.interactionsEnabled = false;\r\n        return _this;\r\n        //this.element.moveTo({ x: 0, y: 0 });\r\n    }\r\n    return AxisLine;\r\n}(Sprite));\r\nexport { AxisLine };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisLine\"] = AxisLine;\r\n//# sourceMappingURL=AxisLine.js.map","import * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * AxisFill is a base class used to defines fill shapes for various\r\n * type-specific Axes.\r\n *\r\n * Axis fills are used to add fills to specific ranges of those axes.\r\n *\r\n * @see {@link IAxisFillEvents} for a list of available events\r\n * @see {@link IAxisFillAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar AxisFill = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisFill, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Axis\r\n     */\r\n    function AxisFill(axis) {\r\n        var _this = _super.call(this) || this;\r\n        _this.axis = axis;\r\n        _this.element = _this.paper.add(\"path\");\r\n        _this.className = \"AxisFill\";\r\n        _this.isMeasured = false;\r\n        _this.location = 0;\r\n        _this.above = false;\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n        _this.fillOpacity = 0;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisFill.prototype.setDisabled = function (value) {\r\n        var changed = _super.prototype.setDisabled.call(this, value);\r\n        if (this.axis) {\r\n            this.axis.invalidateDataItems();\r\n        }\r\n        return changed;\r\n    };\r\n    /**\r\n     * Draws the fill element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisFill.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        if (this.__disabled || this.disabled) {\r\n            return;\r\n        }\r\n        if (this.axis && $type.isNumber(this.startPosition) && $type.isNumber(this.endPosition)) {\r\n            this.fillPath = this.axis.getPositionRangePath(this.startPosition, this.endPosition);\r\n            this.path = this.fillPath;\r\n        }\r\n    };\r\n    Object.defineProperty(AxisFill.prototype, \"startPosition\", {\r\n        /**\r\n         * @return Start position\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startPosition\");\r\n        },\r\n        /**\r\n         * An actual starting position of the fill.\r\n         *\r\n         * @param value  Starting position\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startPosition\", value);\r\n            this.invalidate(); // this is needed as relative position might not change when zooming\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisFill.prototype, \"endPosition\", {\r\n        /**\r\n         * @return End position\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endPosition\");\r\n        },\r\n        /**\r\n         * An actual end position of the fill.\r\n         *\r\n         * @param value End position\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endPosition\", value);\r\n            this.invalidate(); // this is needed as relative position might not change when zooming\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisFill.prototype, \"location\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"location\");\r\n        },\r\n        /**\r\n         * Relative location of the fill. (0-1)\r\n         *\r\n         * @param value Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"location\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisFill.prototype.setPath = function (value) {\r\n        if (this.setPropertyValue(\"path\", value)) {\r\n            this.element.attr({ \"d\": value });\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(AxisFill.prototype, \"above\", {\r\n        /**\r\n         * @return Draw above series?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"above\");\r\n        },\r\n        /**\r\n         * Normally fill goes below series. Set this to `true` to go above.\r\n         *\r\n         * @default false\r\n         * @since 4.5.9\r\n         * @param  value  Draw above series?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"above\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AxisFill;\r\n}(Sprite));\r\nexport { AxisFill };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisFill\"] = AxisFill;\r\n//# sourceMappingURL=AxisFill.js.map","/**\r\n * A module defining functionality for axis grid elements.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Displays an axis grid line.\r\n *\r\n * @see {@link IGridEvents} for a list of available events\r\n * @see {@link IGridAdapters} for a list of available Adapters\r\n * @todo Review: container is better, as we'll be able to attach something to the grid, also with 3d charts we might need some additional elements\r\n * @important\r\n */\r\nvar Grid = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Grid, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Grid() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"Grid\";\r\n        _this.element = _this.paper.add(\"path\");\r\n        _this.location = 0.5;\r\n        _this.isMeasured = false;\r\n        _this.above = false;\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.stroke = interfaceColors.getFor(\"grid\");\r\n        _this.pixelPerfect = true;\r\n        _this.strokeOpacity = 0.15;\r\n        _this.fill = color(); // \"none\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Grid.prototype, \"location\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"location\");\r\n        },\r\n        /**\r\n         * Location within axis cell to place grid line on.\r\n         *\r\n         * * 0 - start\r\n         * * 0.5 - middle\r\n         * * 1 - end\r\n         *\r\n         * @param value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"location\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Grid.prototype, \"above\", {\r\n        /**\r\n         * @return Draw above series?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"above\");\r\n        },\r\n        /**\r\n         * Normally fill goes below series. Set this to `true` to go above.\r\n         *\r\n         * @default false\r\n         * @since 4.5.9\r\n         * @param  value  Draw above series?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"above\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Grid.prototype.setDisabled = function (value) {\r\n        var changed = _super.prototype.setDisabled.call(this, value);\r\n        if (this.axis) {\r\n            this.axis.invalidateDataItems();\r\n        }\r\n        return changed;\r\n    };\r\n    return Grid;\r\n}(Sprite));\r\nexport { Grid };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Grid\"] = Grid;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Disable grid on smaller charts\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.maybeXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof Grid) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=Grid.js.map","/**\r\n * Axis Label module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Use to create labels on Axis.\r\n *\r\n * @see {@link IAxisLabelEvents} for a list of available events\r\n * @see {@link IAxisLabelAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar AxisLabel = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisLabel, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function AxisLabel() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"AxisLabel\";\r\n        _this.isMeasured = false;\r\n        _this.padding(10, 10, 10, 10);\r\n        _this.location = 0.5;\r\n        //this.nonScaling = true; // not good for perf\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AxisLabel.prototype, \"location\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"location\");\r\n        },\r\n        /**\r\n         * Relative location of the label. (0-1)\r\n         *\r\n         * @param value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"location\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisLabel.prototype, \"inside\", {\r\n        /**\r\n         * Returns if label is set to be drawn inside axis.\r\n         *\r\n         * @return Inside?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"inside\");\r\n        },\r\n        /**\r\n         * Sets if label should be drawn inside axis.\r\n         *\r\n         * @param value  Inside?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"inside\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisLabel.prototype.setDisabled = function (value) {\r\n        var changed = _super.prototype.setDisabled.call(this, value);\r\n        if (this.axis) {\r\n            this.axis.invalidateDataItems();\r\n        }\r\n        return changed;\r\n    };\r\n    return AxisLabel;\r\n}(Label));\r\nexport { AxisLabel };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisLabel\"] = AxisLabel;\r\n//# sourceMappingURL=AxisLabel.js.map","/**\r\n * Tick module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A basic Tick class.\r\n *\r\n * A tick is a short dash, mainly connecting an object like axis or slice to\r\n * it's textual label.\r\n *\r\n * @see {@link ITickEvents} for a list of available events\r\n * @see {@link ITickAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar Tick = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Tick, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Tick() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"Tick\";\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.fillOpacity = 0;\r\n        _this.length = 6;\r\n        _this.strokeOpacity = 0.2;\r\n        _this.stroke = interfaceColors.getFor(\"grid\");\r\n        _this.isMeasured = false;\r\n        _this.nonScalingStroke = true;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Tick.prototype, \"length\", {\r\n        /**\r\n         * @return Length (px)\r\n         */\r\n        get: function () {\r\n            if (this.disabled) {\r\n                return 0;\r\n            }\r\n            return this.getPropertyValue(\"length\");\r\n        },\r\n        /**\r\n         * Length of the tick in pixels.\r\n         *\r\n         * @param value  Length (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"length\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Tick;\r\n}(Sprite));\r\nexport { Tick };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Tick\"] = Tick;\r\n//# sourceMappingURL=Tick.js.map","/**\r\n * Axis Tick module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Tick } from \"../elements/Tick\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Draws an axis tick\r\n * @see {@link IAxisTickEvents} for a list of available events\r\n * @see {@link IAxisTickAdapters} for a list of available Adapters\r\n */\r\nvar AxisTick = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisTick, _super);\r\n    function AxisTick() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"AxisTick\";\r\n        _this.element = _this.paper.add(\"path\");\r\n        _this.location = 0.5;\r\n        _this.above = false;\r\n        _this.isMeasured = false;\r\n        _this.pixelPerfect = true;\r\n        _this.strokeOpacity = 0;\r\n        _this.length = 5;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AxisTick.prototype, \"location\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"location\");\r\n        },\r\n        /**\r\n         * Relative location of the tick. (0-1)\r\n         *\r\n         * @param value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"location\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisTick.prototype, \"inside\", {\r\n        /**\r\n         * Returns if label is set to be drawn inside axis.\r\n         *\r\n         * @return Inside?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"inside\");\r\n        },\r\n        /**\r\n         * Sets if tick should be drawn inside axis.\r\n         *\r\n         * @param value  Inside?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"inside\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisTick.prototype, \"above\", {\r\n        /**\r\n         * @return Draw above series?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"above\");\r\n        },\r\n        /**\r\n         * Normally tick goes below series. Set this to `true` to go above.\r\n         *\r\n         * @default false\r\n         * @since 4.5.9\r\n         * @param  value  Draw above series?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"above\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisTick.prototype.setDisabled = function (value) {\r\n        var changed = _super.prototype.setDisabled.call(this, value);\r\n        if (this.axis) {\r\n            this.axis.invalidateDataItems();\r\n        }\r\n        return changed;\r\n    };\r\n    return AxisTick;\r\n}(Tick));\r\nexport { AxisTick };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisTick\"] = AxisTick;\r\n//# sourceMappingURL=AxisTick.js.map","/**\r\n * Module, defining base Axis Renderer.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { AxisDataItem } from \"./Axis\";\r\nimport { AxisLine } from \"./AxisLine\";\r\nimport { AxisFill } from \"./AxisFill\";\r\nimport { Grid } from \"./Grid\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A base class for all axis renderers.\r\n *\r\n * @see {@link IAxisRendererEvents} for a list of available events\r\n * @see {@link IAxisRendererAdapters} for a list of available Adapters\r\n */\r\nvar AxisRenderer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisRenderer, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Related axis\r\n     */\r\n    function AxisRenderer() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * A related chart.\r\n         */\r\n        _this._chart = new MutableValueDisposer();\r\n        _this.className = \"AxisRenderer\";\r\n        // Set defaults\r\n        _this.minGridDistance = 50;\r\n        _this.inside = false;\r\n        _this.inversed = false;\r\n        _this.tooltipLocation = 0.5;\r\n        _this.fullWidthTooltip = false;\r\n        _this.cellStartLocation = 0;\r\n        _this.cellEndLocation = 1;\r\n        _this.minLabelPosition = 0;\r\n        _this.maxLabelPosition = 1;\r\n        _this.shouldClone = false;\r\n        var gridContainer = _this.createChild(Container);\r\n        gridContainer.shouldClone = false;\r\n        gridContainer.layout = \"none\";\r\n        //\tgridContainer.isMeasured = false;\r\n        gridContainer.virtualParent = _this;\r\n        gridContainer.width = percent(100);\r\n        gridContainer.height = percent(100);\r\n        _this.gridContainer = gridContainer;\r\n        // not good without this\r\n        gridContainer.events.on(\"maxsizechanged\", function () {\r\n            if (_this.inited) {\r\n                _this.invalidateAxisItems();\r\n            }\r\n        }, _this, false);\r\n        var breakContainer = _this.createChild(Container);\r\n        breakContainer.shouldClone = false;\r\n        breakContainer.isMeasured = false;\r\n        breakContainer.layout = \"none\";\r\n        breakContainer.width = percent(100);\r\n        breakContainer.height = percent(100);\r\n        _this.breakContainer = breakContainer;\r\n        var bulletsContainer = _this.createChild(Container);\r\n        bulletsContainer.shouldClone = false;\r\n        bulletsContainer.isMeasured = false;\r\n        bulletsContainer.layout = \"none\";\r\n        bulletsContainer.width = percent(100);\r\n        bulletsContainer.height = percent(100);\r\n        _this.bulletsContainer = bulletsContainer;\r\n        _this.line = _this.createChild(AxisLine);\r\n        _this.line.shouldClone = false;\r\n        _this.line.strokeOpacity = 0;\r\n        var baseGrid = _this.createChild(Grid);\r\n        baseGrid.shouldClone = false;\r\n        _this.baseGrid = baseGrid;\r\n        // Make elements disposable\r\n        var disposers = _this._disposers;\r\n        disposers.push(baseGrid);\r\n        disposers.push(_this.line);\r\n        disposers.push(gridContainer);\r\n        disposers.push(breakContainer);\r\n        disposers.push(bulletsContainer);\r\n        disposers.push(_this._chart);\r\n        _this.ticks.template.disabled = true;\r\n        _this.axisFills.template.disabled = true;\r\n        _this.axisFills.template.interactionsEnabled = false;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AxisRenderer.prototype, \"axis\", {\r\n        get: function () {\r\n            return this._axis;\r\n        },\r\n        set: function (axis) {\r\n            this.setAxis(axis);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n    * @ignore\r\n    */\r\n    AxisRenderer.prototype.setAxis = function (axis) {\r\n        this._axis = axis;\r\n        this.baseGrid.parent = axis;\r\n        this.line.parent = axis;\r\n        this.gridContainer.bind(\"opacity\", axis);\r\n    };\r\n    /**\r\n     * Called when rendered is attached to an Axis, as well as a property of\r\n     * Axis that might affect the appearance is updated.\r\n     *\r\n     * E.g. `axis.opposite`, `axis.inside`, etc.\r\n     *\r\n     * This method is called **before** draw, so that any related setting\r\n     * changed in this method can be changed.\r\n     *\r\n     * @todo Description (review)\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRenderer.prototype.processRenderer = function () {\r\n        this.events.on(\"sizechanged\", this.updateTooltip, this, false);\r\n        this.events.on(\"positionchanged\", this.updateTooltip, this, false);\r\n        this.labels.template.inside = this.inside;\r\n        this.ticks.template.inside = this.inside;\r\n    };\r\n    /**\r\n     * Updates Axis' tooltip.\r\n     *\r\n     * @todo Description (review)\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRenderer.prototype.updateTooltip = function () {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    Object.defineProperty(AxisRenderer.prototype, \"axisLength\", {\r\n        /**\r\n         * Returns actual length of the Axis, in pixels.\r\n         *\r\n         * @return Length (px)\r\n         */\r\n        get: function () {\r\n            // This is a placeholder method for extending classes to override.\r\n            return 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Re-positions an element to new coordinates.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param item   A target element\r\n     * @param point  New coordinates\r\n     */\r\n    AxisRenderer.prototype.positionItem = function (item, point) {\r\n        if (item) {\r\n            item.moveTo(point);\r\n        }\r\n    };\r\n    /**\r\n     * Converts relative position on axis to point coordinates.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Point\r\n     */\r\n    AxisRenderer.prototype.positionToPoint = function (position, position2) {\r\n        // This is a placeholder method for extending classes to override.\r\n        return { x: 0, y: 0 };\r\n    };\r\n    /**\r\n     * Converts relative position on axis to angle.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review / units)\r\n     * @param position  Position (0-1)\r\n     * @return Angle\r\n     */\r\n    AxisRenderer.prototype.positionToAngle = function (position) {\r\n        // This is a placeholder method for extending classes to override.\r\n        return 0;\r\n    };\r\n    /**\r\n     * Converts relative position (0-1) on axis to a pixel coordinate.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    AxisRenderer.prototype.positionToCoordinate = function (position) {\r\n        var coordinate;\r\n        var axis = this.axis;\r\n        var axisFullLength = axis.axisFullLength;\r\n        if (axis.renderer.inversed) {\r\n            coordinate = (axis.end - position) * axisFullLength;\r\n        }\r\n        else {\r\n            coordinate = (position - axis.start) * axisFullLength;\r\n        }\r\n        return coordinate;\r\n    };\r\n    AxisRenderer.prototype.updateGridContainer = function () {\r\n    };\r\n    AxisRenderer.prototype.getHeight = function () {\r\n        var gridContainer = this.gridContainer;\r\n        if (gridContainer.parent) {\r\n            return gridContainer.parent.pixelHeight;\r\n        }\r\n        return this.gridContainer.pixelHeight || 0;\r\n    };\r\n    AxisRenderer.prototype.getWidth = function () {\r\n        var gridContainer = this.gridContainer;\r\n        if (gridContainer.parent) {\r\n            return gridContainer.parent.pixelWidth;\r\n        }\r\n        return this.gridContainer.pixelWidth || 0;\r\n    };\r\n    /**\r\n     * Converts a coordinate in pixels to a relative position. (0-1)\r\n     *\r\n     * @param coordinate  Coordinate (px)\r\n     * @param coordinate2  Coordinate of a second axis, only needed for complex axes systems, like timeline (px)\r\n     * @return Position (0-1)\r\n     */\r\n    AxisRenderer.prototype.coordinateToPosition = function (coordinate, coordinate2) {\r\n        var position;\r\n        var axis = this.axis;\r\n        var axisFullLength = axis.axisFullLength;\r\n        if (axis.renderer.inversed) {\r\n            position = axis.end - coordinate / axisFullLength;\r\n        }\r\n        else {\r\n            position = coordinate / axisFullLength + axis.start;\r\n        }\r\n        return $math.round(position, 5);\r\n    };\r\n    /**\r\n     * Converts a point at specific coordinates to a relative position (0-1)\r\n     * on the axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param point  Point\r\n     * @return Position (0-1)\r\n     */\r\n    AxisRenderer.prototype.pointToPosition = function (point) {\r\n        // This is a placeholder method for extending classes to override.\r\n        return 0;\r\n    };\r\n    /**\r\n     * [getPositionRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param startPosition  Starting position\r\n     * @param endPosition    End position\r\n     * @return SVG path\r\n     */\r\n    AxisRenderer.prototype.getPositionRangePath = function (startPosition, endPosition) {\r\n        return \"\";\r\n    };\r\n    /**\r\n     * Invalidates all axis data items, effectively causing them re-evaluated.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     */\r\n    AxisRenderer.prototype.invalidateAxisItems = function () {\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            axis.invalidateDataItems();\r\n        }\r\n    };\r\n    /**\r\n     * Updates and positions a grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param grid         Grid element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRenderer.prototype.updateGridElement = function (grid, position, endPosition) {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Updates and positions a tick element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param tick         Tick element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRenderer.prototype.updateTickElement = function (tick, position, endPosition) {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Updates and positions axis bullet.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet       AxisBullet element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRenderer.prototype.updateBullet = function (bullet, position, endPosition) {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Updates and positions a label element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param label        Label element\r\n     * @param position     Starting position\r\n     * @param endPosition  Ending position\r\n     */\r\n    AxisRenderer.prototype.updateLabelElement = function (label, position, endPosition, location) {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Updates and positions the axis fill element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param fill         Fill element\r\n     * @param position     Starting position\r\n     * @param endPosition  Ending position\r\n     */\r\n    AxisRenderer.prototype.updateFillElement = function (fill, position, endPosition) {\r\n        fill.startPosition = position;\r\n        fill.endPosition = endPosition;\r\n    };\r\n    /**\r\n     * Updates and positions the axis line element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRenderer.prototype.updateAxisLine = function () {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Updates and positions the base grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRenderer.prototype.updateBaseGridElement = function () {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    /**\r\n     * Updates and positions an axis break element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Break element\r\n     */\r\n    AxisRenderer.prototype.updateBreakElement = function (axisBreak) {\r\n        this.positionItem(axisBreak.startLine, axisBreak.startPoint);\r\n        this.toggleVisibility(axisBreak.startLine, axisBreak.startPosition, 0, 1);\r\n        this.positionItem(axisBreak.endLine, axisBreak.endPoint);\r\n        this.toggleVisibility(axisBreak.endLine, axisBreak.endPosition, 0, 1);\r\n    };\r\n    Object.defineProperty(AxisRenderer.prototype, \"minGridDistance\", {\r\n        /**\r\n         * @return Min distance (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"minGridDistance\");\r\n        },\r\n        /**\r\n         * Minimum distance in pixels between grid elements.\r\n         *\r\n         * @param value  Min distance (px)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"minGridDistance\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidateLayout();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"chart\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart.get();\r\n        },\r\n        /**\r\n         * A chart, associated with the Axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @param value  Chart\r\n         */\r\n        set: function (value) {\r\n            this._chart.set(value, null);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Toggles visibility of an element, based on its current position and\r\n     * min/max position settings.\r\n     *\r\n     * E.g. labels based on `minLabelPosition` and `maxLabelPosition`.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param sprite       An element to toggle\r\n     * @param position     Elements current position\r\n     * @param minPosition  Min position setting\r\n     * @param maxPosition  Max position setting\r\n     */\r\n    AxisRenderer.prototype.toggleVisibility = function (sprite, position, minPosition, maxPosition) {\r\n        var axis = this.axis;\r\n        var dataItem = sprite.dataItem;\r\n        if (dataItem && dataItem instanceof AxisDataItem) {\r\n            if ($type.isNumber(dataItem.minPosition)) {\r\n                minPosition = dataItem.minPosition;\r\n            }\r\n            if ($type.isNumber(dataItem.maxPosition)) {\r\n                maxPosition = dataItem.maxPosition;\r\n            }\r\n        }\r\n        var updatedStart = axis.start + (axis.end - axis.start) * (minPosition - 0.0001);\r\n        var updatedEnd = axis.start + (axis.end - axis.start) * (maxPosition + 0.0001);\r\n        if (!sprite.disabled) {\r\n            if (position < updatedStart || position > updatedEnd) {\r\n                sprite.__disabled = true;\r\n            }\r\n            else {\r\n                sprite.__disabled = false;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Creates visual elements for and axis break.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Axis break\r\n     */\r\n    AxisRenderer.prototype.createBreakSprites = function (axisBreak) {\r\n        // This is a placeholder method for extending classes to override.\r\n    };\r\n    Object.defineProperty(AxisRenderer.prototype, \"axisFills\", {\r\n        /**\r\n         * A list of Axis' Fill elements.\r\n         *\r\n         * Those are fill elements that cover the space between every second set\r\n         * of grid lines, and can be configured to create striped charts.\r\n         *\r\n         * Please note that these are disabled by default. To enable them, set\r\n         * template to true.\r\n         *\r\n         * ```TypeScript\r\n         * categoryAxis.renderer.axisFills.template.disabled = false;\r\n         * ```\r\n         * ```JavaScript\r\n         * categoryAxis.renderer.axisFills.template.disabled = false;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"xAxes\": [{\r\n         *     // ...\r\n         *     \"renderer\": {\r\n         *       \"axisFills\": {\r\n         *         \"disabled\": false\r\n         *       }\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/tutorials/alternated-axis-fills/} this tutorial for more info.\r\n         * @return Fill elements\r\n         */\r\n        get: function () {\r\n            if (!this._axisFills) {\r\n                var fill = this.createFill(this.axis);\r\n                this._axisFills = new ListTemplate(fill);\r\n                fill.applyOnClones = true;\r\n                fill.events.on(\"enabled\", this.invalidateAxisItems, this, false);\r\n                this._disposers.push(new ListDisposer(this._axisFills));\r\n                this._disposers.push(this._axisFills.template);\r\n            }\r\n            return this._axisFills;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a new fill element, suitable for this Axis Renderer type.\r\n     *\r\n     * @return Fill element\r\n     */\r\n    AxisRenderer.prototype.createFill = function (axis) {\r\n        return new AxisFill(axis);\r\n    };\r\n    Object.defineProperty(AxisRenderer.prototype, \"grid\", {\r\n        /**\r\n         * A list of Axis' Grid elements.\r\n         *\r\n         * @return Grid elements\r\n         */\r\n        get: function () {\r\n            if (!this._grid) {\r\n                var grid = this.createGrid();\r\n                this._grid = new ListTemplate(grid);\r\n                grid.applyOnClones = true;\r\n                grid.events.on(\"enabled\", this.invalidateAxisItems, this, false);\r\n                this._disposers.push(new ListDisposer(this._grid));\r\n                this._disposers.push(this._grid.template);\r\n            }\r\n            return this._grid;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a new grid element, suitable for this Axis Renderer type.\r\n     *\r\n     * @return Grid element\r\n     */\r\n    AxisRenderer.prototype.createGrid = function () {\r\n        return new Grid();\r\n    };\r\n    Object.defineProperty(AxisRenderer.prototype, \"ticks\", {\r\n        /**\r\n         * A list of Axis' Tick elements.\r\n         *\r\n         * Please note that these are disabled by default. To enable them, set\r\n         * template to true.\r\n         *\r\n         * ```TypeScript\r\n         * categoryAxis.renderer.ticks.template.disabled = false;\r\n         * ```\r\n         * ```JavaScript\r\n         * categoryAxis.renderer.ticks.template.disabled = false;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"xAxes\": [{\r\n         *     // ...\r\n         *     \"renderer\": {\r\n         *       \"ticks\": {\r\n         *         \"disabled\": false\r\n         *       }\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @return Tick elements\r\n         */\r\n        get: function () {\r\n            if (!this._ticks) {\r\n                var tick = this.createTick();\r\n                tick.applyOnClones = true;\r\n                tick.isMeasured = false;\r\n                tick.events.on(\"enabled\", this.invalidateAxisItems, this, false);\r\n                this._ticks = new ListTemplate(tick);\r\n                this._disposers.push(new ListDisposer(this._ticks));\r\n                this._disposers.push(this._ticks.template);\r\n            }\r\n            return this._ticks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a new tick element, suitable for this Axis Renderer type.\r\n     *\r\n     * @return Tick element\r\n     */\r\n    AxisRenderer.prototype.createTick = function () {\r\n        return new AxisTick();\r\n    };\r\n    Object.defineProperty(AxisRenderer.prototype, \"labels\", {\r\n        /**\r\n         * A list of Axis' Label elements.\r\n         *\r\n         * @return Label elements\r\n         */\r\n        get: function () {\r\n            if (!this._labels) {\r\n                var label = this.createLabel();\r\n                this._labels = new ListTemplate(label);\r\n                label.applyOnClones = true;\r\n                label.events.on(\"enabled\", this.invalidateAxisItems, this, false);\r\n                this._disposers.push(new ListDisposer(this._labels));\r\n                this._disposers.push(this._labels.template);\r\n            }\r\n            return this._labels;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a new label element, suitable for this Axis Renderer type.\r\n     *\r\n     * @return Label element\r\n     */\r\n    AxisRenderer.prototype.createLabel = function () {\r\n        return new AxisLabel();\r\n    };\r\n    Object.defineProperty(AxisRenderer.prototype, \"inside\", {\r\n        /**\r\n         * @return Labels inside?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"inside\");\r\n        },\r\n        /**\r\n         * Indicates whether Axis' labels and ticks should be drawn inside Plot area.\r\n         *\r\n         * Does not work with all renderers, like AxisRendererRadial.\r\n         *\r\n         * @param value  Labels inside?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"inside\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                }\r\n            }\r\n            if (value) {\r\n                this.width = 0;\r\n                this.height = 0;\r\n            }\r\n            else {\r\n                this.width = undefined;\r\n                this.height = undefined;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"opposite\", {\r\n        /**\r\n         * @return Draw axis on opposite side?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"opposite\");\r\n        },\r\n        /**\r\n         * Indicates whether Axis should be drawn on the opposite side of the plot\r\n         * area than it would normally be drawn based on chart's settings.\r\n         *\r\n         * Does not work with all renderers, like [[AxisRendererRadial]] and\r\n         * [[AxisRenderer Circular].\r\n         *\r\n         * @param value  Draw axis on opposite side?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"opposite\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"fullWidthTooltip\", {\r\n        /**\r\n         * @return Full width tooltip?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"fullWidthTooltip\");\r\n        },\r\n        /**\r\n         * Indicates if Axis tooltip should take the whole width of the axis cell.\r\n         * (between two grid lines)\r\n         *\r\n         * NOTE: this setting is ignored on circular axis types.\r\n         *\r\n         * @param value Full width tooltip?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"fullWidthTooltip\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"tooltipLocation\", {\r\n        /**\r\n         * @return Tooltip location\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tooltipLocation\");\r\n        },\r\n        /**\r\n         * Location within axis cell to show tooltip on. (0-1)\r\n         *\r\n         * 0 - show at the start\r\n         * 0.5 - show right in the middle\r\n         * 1 - show at the end\r\n         *\r\n         * @param value Tooltip location\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tooltipLocation\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"tooltipLocation2\", {\r\n        /**\r\n         * @return Tooltip location\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tooltipLocation2\");\r\n        },\r\n        /**\r\n         * Location within secondary axis cell to show tooltip on. (0-1)\r\n         *\r\n         * 0 - show at the start\r\n         * 0.5 - show right in the middle\r\n         * 1 - show at the end\r\n         *\r\n         * @param value Tooltip location\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tooltipLocation2\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"cellStartLocation\", {\r\n        /**\r\n         * @return Cell start (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cellStartLocation\");\r\n        },\r\n        /**\r\n         * Location for the cell start.\r\n         *\r\n         * Normally a \"cell\" is the whole available width in a category.\r\n         *\r\n         * If there are several clustered column-like series available, the whole\r\n         * space is divided between each clustered column, or column stacks.\r\n         *\r\n         * `cellStartLocation` identifies where, within available space, the actual\r\n         * cell starts.\r\n         *\r\n         * This, together with column series' `width` will affect actual width of\r\n         * columns, and thus gaps between them.\r\n         *\r\n         * This will affect category-like axes only, like [[DateAxis]], or\r\n         * [[CategoryAxis]].\r\n         *\r\n         * This is used to limit a space occupied by series like column.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n         * @param value Cell start (0-1)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"cellStartLocation\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"cellEndLocation\", {\r\n        /**\r\n         * @return Cell end (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cellEndLocation\");\r\n        },\r\n        /**\r\n         * Location for the cell end.\r\n         *\r\n         * Normally a \"cell\" is the whole available width in a category.\r\n         *\r\n         * If there are several clustered column-like series available, the whole\r\n         * space is divided between each clustered column, or column stacks.\r\n         *\r\n         * `cellEndLocation` identifies where, within available space, the actual\r\n         * cell ends.\r\n         *\r\n         * This, together with column series' `width` will affect actual width of\r\n         * columns, and thus gaps between them.\r\n         *\r\n         * This will affect category-like axes only, like [[DateAxis]], or\r\n         * [[CategoryAxis]].\r\n         *\r\n         * This is used to limit a space occupied by series like column.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n         * @param value Cell end (0-1)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"cellEndLocation\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"inversed\", {\r\n        /**\r\n         * @return Flip axis?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"inversed\");\r\n        },\r\n        /**\r\n         * Indicates if the scale of the axis should be flipped.\r\n         *\r\n         * @param value Flip axis?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"inversed\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"minLabelPosition\", {\r\n        /**\r\n         * @return Min label position (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"minLabelPosition\");\r\n        },\r\n        /**\r\n         * Minimum position along the Axis, for labels.\r\n         *\r\n         * Labels, which have their position closer to the start of the Axis, will be\r\n         * automatically hidden.\r\n         *\r\n         * E.g., setting this to 0.05 (5% of total axis length) would hide labels,\r\n         * that would otherwise be drawn very near start of the Axis.\r\n         *\r\n         * This is especially usefull with `inside = true`, or if the chart hasn't\r\n         * got any extra margins.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n         * @param value  Min label position (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"minLabelPosition\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRenderer.prototype, \"maxLabelPosition\", {\r\n        /**\r\n         * @return Max label position (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maxLabelPosition\");\r\n        },\r\n        /**\r\n         * Maximum position along the Axis, for labels.\r\n         *\r\n         * Labels, which have their position closer to the and of the Axis, will be\r\n         * automatically hidden.\r\n         *\r\n         * E.g., setting this to 0.95 (95% of total axis length) would hide labels,\r\n         * that would otherwise be drawn very near end of the Axis.\r\n         *\r\n         * This is especially usefull with `inside = true`, or if the chart hasn't\r\n         * got any extra margins.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n         * @param value  Max label position (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"maxLabelPosition\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Copies all settings and related items from another object of the same\r\n     * type.\r\n     *\r\n     * @param source  Source object\r\n     */\r\n    AxisRenderer.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.grid.template.copyFrom(source.grid.template);\r\n        this.ticks.template.copyFrom(source.ticks.template);\r\n        this.labels.template.copyFrom(source.labels.template);\r\n        this.axisFills.template.copyFrom(source.axisFills.template);\r\n        this.line.copyFrom(source.line);\r\n        this.baseGrid.copyFrom(source.baseGrid);\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisRenderer.prototype.toAxisPosition = function (value) {\r\n        return value;\r\n    };\r\n    /**\r\n     * Sets `visibility` property:\r\n     *\r\n     * * `true` - visible\r\n     * * `false` - hidden\r\n     *\r\n     * @param value  true - visible, false - hidden\r\n     * @return Current visibility\r\n     */\r\n    AxisRenderer.prototype.setVisibility = function (value) {\r\n        _super.prototype.setVisibility.call(this, value);\r\n        this.bulletsContainer.visible = value;\r\n    };\r\n    return AxisRenderer;\r\n}(Container));\r\nexport { AxisRenderer };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRenderer\"] = AxisRenderer;\r\n//# sourceMappingURL=AxisRenderer.js.map","/**\r\n * Axis Bullet module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Used to draw a positioned bullet (element) on an Axis.\r\n *\r\n * ```TypeScript\r\n * let range = dateAxis.axisRanges.create();\r\n * range.date = new Date(2018, 0, 5);\r\n *\r\n * let flag = new am4plugins_bullets.FlagBullet();\r\n * flag.label.text = \"Hello\";\r\n *\r\n * range.bullet = flag;\r\n * ```\r\n * ```JavaScript\r\n * var range = dateAxis.axisRanges.create();\r\n * range.date = new Date(2018, 0, 5);\r\n *\r\n * var flag = new am4plugins_bullets.FlagBullet();\r\n * flag.label.text = \"Hello\";\r\n *\r\n * range.bullet = flag;\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"xAxes\": [{\r\n *     \"type\": \"DateAxis\",\r\n *     // ...\r\n *     \"axisRanges\": [{\r\n *       \"date\": new Date(2018, 0, 5),\r\n *       \"bullet: {\r\n *         \"type\": \"FlagBullet\",\r\n *         \"label\": {\r\n *           \"text\": \"Hello\"\r\n *         }\r\n *       }\r\n *     }]\r\n *   }]\r\n * }\r\n * ```\r\n *\r\n * @since 4.5.9\r\n * @see {@link IAxisBulletEvents} for a list of available events\r\n * @see {@link IAxisBulletAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar AxisBullet = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisBullet, _super);\r\n    function AxisBullet() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"AxisBullet\";\r\n        _this.location = 0.5;\r\n        _this.isMeasured = false;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AxisBullet.prototype, \"location\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"location\");\r\n        },\r\n        /**\r\n         * Relative position within cell/range.\r\n         *\r\n         * Value range is from from `0` (beginning) to `1` (end).\r\n         *\r\n         * NOTE: `location` is relative to the parent axis range's scope, i.e.\r\n         * between its `date` and `endDate` for [[DateAxis]], or `value`/`endValue`\r\n         * ([[ValueAxis]]), or `category`/`endCategory` ([[categoryAxis]]).\r\n         *\r\n         * ```TypeScript\r\n         * let range = dateAxis.axisRanges.create();\r\n         * range.date = new Date(2018, 0, 5);\r\n         * range.endDate = new Date(2018, 0, 6);\r\n         *\r\n         * let bullet = new am4charts.AxisBullet();\r\n         * bullet.location = 1;\r\n         *\r\n         * let flag = bullet.createChild(am4plugins_bullets.FlagBullet);\r\n         * flag.label.text = \"Hello\";\r\n         * ```\r\n         * ```JavaScript\r\n         * var range = dateAxis.axisRanges.create();\r\n         * range.date = new Date(2018, 0, 5);\r\n         * range.endDate = new Date(2018, 0, 6);\r\n         *\r\n         * var bullet = new am4charts.AxisBullet();\r\n         * bullet.location = 1;\r\n         *\r\n         * var flag = bullet.createChild(am4plugins_bullets.FlagBullet);\r\n         * flag.label.text = \"Hello\";\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"xAxes\": [{\r\n         *     \"type\": \"DateAxis\",\r\n         *     // ...\r\n         *     \"axisRanges\": [{\r\n         *       \"date\": new Date(2018, 0, 5),\r\n         *       \"endDate\": new Date(2018, 0, 6),\r\n         *       \"bullet: {\r\n         *         \"type\": \"AxisBullet\",\r\n         *         \"location\": 1,\r\n         *         \"children\": [{\r\n         *           \"type\": \"FlagBullet\",\r\n         *           \"label\": {\r\n         *             \"text\": \"Hello\"\r\n         *           }\r\n         *         }]\r\n         *       }\r\n         *     }]\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @default 0.5\r\n         * @param  value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"location\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisBullet.prototype.setDisabled = function (value) {\r\n        var changed = _super.prototype.setDisabled.call(this, value);\r\n        if (this.axis) {\r\n            this.axis.invalidateDataItems();\r\n        }\r\n        return changed;\r\n    };\r\n    return AxisBullet;\r\n}(Container));\r\nexport { AxisBullet };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisBullet\"] = AxisBullet;\r\n//# sourceMappingURL=AxisBullet.js.map","/**\r\n * Module, defining Axis Renderer for vertical axes.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRenderer } from \"./AxisRenderer\";\r\nimport { WavedLine } from \"../../core/elements/WavedLine\";\r\nimport { WavedRectangle } from \"../../core/elements/WavedRectangle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent, Percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\nimport { AxisBullet } from \"./AxisBullet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A renderer for vertical axis.\r\n *\r\n * @see {@link IAxisRendererYEvents} for a list of available events\r\n * @see {@link IAxisRendererYAdapters} for a list of available Adapters\r\n */\r\nvar AxisRendererY = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisRendererY, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Related axis\r\n     */\r\n    function AxisRendererY() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"AxisRendererY\";\r\n        _this.minGridDistance = 40;\r\n        _this.opposite = false;\r\n        _this.height = percent(100);\r\n        _this.labels.template.verticalCenter = \"middle\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n    * @ignore\r\n    */\r\n    AxisRendererY.prototype.setAxis = function (axis) {\r\n        _super.prototype.setAxis.call(this, axis);\r\n        axis.layout = \"horizontal\";\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisRendererY.prototype.updateGridContainer = function () {\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var gridContainer = this.gridContainer;\r\n            gridContainer.y = axis.pixelY;\r\n            gridContainer.height = axis.axisLength;\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisRendererY.prototype.toAxisPosition = function (value) {\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var inversedPosition = 1 - value;\r\n            var relativePositionSprite = axis.relativePositionSprite;\r\n            var y = axis.pixelY;\r\n            if (relativePositionSprite) {\r\n                y = $utils.spritePointToSprite({ x: 0, y: this.pixelY }, this.parent, relativePositionSprite).y;\r\n            }\r\n            else {\r\n                relativePositionSprite = axis.parent;\r\n            }\r\n            if (relativePositionSprite) {\r\n                var relativeY = y / relativePositionSprite.innerHeight;\r\n                var relativeHeight = axis.axisLength / relativePositionSprite.innerHeight;\r\n                return 1 - (inversedPosition - relativeY) / relativeHeight;\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * Called when rendered is attached to an Axis, as well as a property of\r\n     * Axis that might affect the appearance is updated.\r\n     *\r\n     * E.g. `axis.opposite`, `axis.inside`, etc.\r\n     *\r\n     * This method is called **before** draw, so that any related setting\r\n     * changed in this method can be changed.\r\n     *\r\n     * @todo Description (review)\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererY.prototype.processRenderer = function () {\r\n        _super.prototype.processRenderer.call(this);\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var title = axis.title;\r\n            title.valign = \"middle\";\r\n            if (!(axis.height instanceof Percent)) {\r\n                axis.height = percent(100);\r\n            }\r\n            if (this.opposite) {\r\n                title.rotation = 90;\r\n                this.line.toBack();\r\n                title.toFront();\r\n            }\r\n            else {\r\n                title.rotation = -90;\r\n                title.toBack();\r\n                this.line.toFront();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Updates some of the Axis tooltip's visual properties, related to\r\n     * rendering of the Axis.\r\n     *\r\n     * @todo Description (review)\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererY.prototype.updateTooltip = function () {\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var bigNum = 2000;\r\n            var bbx = 0;\r\n            var bby = 0;\r\n            var bbw = bigNum;\r\n            var bbh = this.axisLength;\r\n            // right\r\n            if (this.opposite) {\r\n                if (this.inside) {\r\n                    bbx = -bigNum;\r\n                    bbw = bigNum;\r\n                }\r\n            }\r\n            // left\r\n            else {\r\n                if (!this.inside) {\r\n                    bbx = -bigNum;\r\n                    bbw = bigNum;\r\n                }\r\n            }\r\n            this.axis.updateTooltip(\"horizontal\", { x: bbx, y: bby, width: bbw, height: bbh });\r\n        }\r\n    };\r\n    Object.defineProperty(AxisRendererY.prototype, \"axisLength\", {\r\n        /**\r\n         * Returns actual length of the Axis, in pixels.\r\n         *\r\n         * @return Length (px)\r\n         */\r\n        get: function () {\r\n            var axis = this.axis;\r\n            return (axis.measuredHeight - axis.pixelPaddingTop - axis.pixelPaddingBottom) || 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts relative position on axis to point coordinates.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @param position2  Position (0-1) Position on the second axis\r\n     * @return Point\r\n     */\r\n    AxisRendererY.prototype.positionToPoint = function (position, position2) {\r\n        return { x: 0, y: this.positionToCoordinate(position) };\r\n    };\r\n    /**\r\n     * Converts a point at specific coordinates to a relative position (0-1)\r\n     * on the axis.\r\n     *\r\n     * @param point  Point\r\n     * @return Position (0-1)\r\n     */\r\n    AxisRendererY.prototype.pointToPosition = function (point) {\r\n        return this.coordinateToPosition(point.y, point.x);\r\n    };\r\n    /**\r\n     * Converts a coordinate in pixels to a relative position. (0-1)\r\n     *\r\n     * @param coordinate  Coordinate (px)\r\n     * @param coordinate2  Coordinate of a second axis, only needed for complex axes systems, like timeline (px)\r\n     * @return Position (0-1)\r\n     */\r\n    AxisRendererY.prototype.coordinateToPosition = function (coordinate, coordinate2) {\r\n        var position;\r\n        var axis = this.axis;\r\n        var axisFullLength = axis.axisFullLength;\r\n        if (axis.renderer.inversed) {\r\n            position = (1 - axis.start) - coordinate / axisFullLength;\r\n        }\r\n        else {\r\n            position = coordinate / axisFullLength + (1 - axis.end);\r\n        }\r\n        return $math.round(position, 5);\r\n    };\r\n    /**\r\n     * [getPositionRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param startPosition  Starting position\r\n     * @param endPosition    End position\r\n     * @return SVG path\r\n     */\r\n    AxisRendererY.prototype.getPositionRangePath = function (startPosition, endPosition) {\r\n        var y1 = $math.fitToRange(this.positionToCoordinate(startPosition), 0, this.axisLength);\r\n        var y2 = $math.fitToRange(this.positionToCoordinate(endPosition), 0, this.axisLength);\r\n        var h = Math.abs(y2 - y1);\r\n        var w = this.getWidth();\r\n        var y = Math.min(y1, y2);\r\n        var x = 0;\r\n        return $path.rectToPath({\r\n            x: x,\r\n            y: y,\r\n            width: w,\r\n            height: h\r\n        }, true);\r\n    };\r\n    /**\r\n     * Updates and positions a grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param grid         Grid element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererY.prototype.updateGridElement = function (grid, position, endPosition) {\r\n        position = position + (endPosition - position) * grid.location;\r\n        var point = this.positionToPoint(position);\r\n        //\tpoint.y = $utils.spritePointToSprite({ x: 0, y: point.y }, this, this.gridContainer).y;\r\n        grid.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: this.getWidth(), y: 0 });\r\n        this.positionItem(grid, point);\r\n        this.toggleVisibility(grid, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions a tick element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param tick         Tick element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererY.prototype.updateTickElement = function (tick, position, endPosition) {\r\n        position = position + (endPosition - position) * tick.location;\r\n        var point = this.positionToPoint(position);\r\n        var tickLength = tick.length;\r\n        try {\r\n            $utils.used(this.axis.title.measuredWidth);\r\n        }\r\n        catch (_a) {\r\n            // void\r\n        }\r\n        point.x = $utils.spritePointToSprite({ x: this.line.pixelX, y: 0 }, this.line.parent, this.gridContainer).x;\r\n        if (!this.opposite) {\r\n            tickLength *= (tick.inside ? 1 : -1);\r\n        }\r\n        else {\r\n            tickLength *= (tick.inside ? -1 : 1);\r\n        }\r\n        tick.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: tickLength, y: 0 });\r\n        this.positionItem(tick, point);\r\n        this.toggleVisibility(tick, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions the axis line element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererY.prototype.updateAxisLine = function () {\r\n        this.line.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: this.axisLength });\r\n    };\r\n    /**\r\n     * Updates and positions the base grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererY.prototype.updateBaseGridElement = function () {\r\n        _super.prototype.updateBaseGridElement.call(this);\r\n        var axis = this.axis;\r\n        var w = this.getWidth();\r\n        var h = this.axisLength;\r\n        var y = axis.basePoint.y;\r\n        var baseGrid = this.baseGrid;\r\n        if (y < -0.2 || y > h + 0.2) {\r\n            baseGrid.hide(0);\r\n        }\r\n        else {\r\n            var x = $utils.spritePointToSprite({ x: 0, y: 0 }, this.gridContainer, baseGrid.parent).x;\r\n            baseGrid.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: w, y: 0 });\r\n            baseGrid.moveTo({ x: x, y: y });\r\n            baseGrid.show(0);\r\n        }\r\n    };\r\n    /**\r\n     * Updates and positions a label element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param label        Label element\r\n     * @param position     Starting position\r\n     * @param endPosition  Ending position\r\n     */\r\n    AxisRendererY.prototype.updateLabelElement = function (label, position, endPosition, location) {\r\n        if (!$type.hasValue(location)) {\r\n            location = label.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        label.isMeasured = !label.inside;\r\n        var point = this.positionToPoint(position);\r\n        var horizontalCenter;\r\n        var deltaX = 0;\r\n        var maxWidth = this.gridContainer.maxWidth;\r\n        if (this.opposite) {\r\n            if (label.inside) {\r\n                horizontalCenter = \"right\";\r\n                if (label.align == \"left\") {\r\n                    deltaX = -maxWidth;\r\n                    horizontalCenter = \"left\";\r\n                }\r\n                if (label.align == \"center\") {\r\n                    deltaX = -maxWidth / 2;\r\n                    horizontalCenter = \"middle\";\r\n                }\r\n            }\r\n            else {\r\n                horizontalCenter = \"left\";\r\n            }\r\n            point.x = 0 + deltaX;\r\n        }\r\n        else {\r\n            if (label.inside) {\r\n                horizontalCenter = \"left\";\r\n                if (label.align == \"right\") {\r\n                    deltaX = maxWidth;\r\n                    horizontalCenter = \"right\";\r\n                }\r\n                if (label.align == \"center\") {\r\n                    deltaX = maxWidth / 2;\r\n                    horizontalCenter = \"middle\";\r\n                }\r\n            }\r\n            else {\r\n                horizontalCenter = \"right\";\r\n            }\r\n            point.x = this.measuredWidth + deltaX;\r\n        }\r\n        if (label.rotation == 0) {\r\n            // Apply fuzzy logic to verticalCenter only if labels are not rotated\r\n            label.horizontalCenter = horizontalCenter;\r\n        }\r\n        this.positionItem(label, point);\r\n        this.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\r\n    };\r\n    /**\r\n     * Updates and positions an axis break element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Break element\r\n     */\r\n    AxisRendererY.prototype.updateBreakElement = function (axisBreak) {\r\n        _super.prototype.updateBreakElement.call(this, axisBreak);\r\n        var startLine = axisBreak.startLine;\r\n        var endLine = axisBreak.endLine;\r\n        var fillShape = axisBreak.fillShape;\r\n        var startPoint = axisBreak.startPoint;\r\n        var endPoint = axisBreak.endPoint;\r\n        var x1 = axisBreak.pixelMarginLeft;\r\n        var x2 = this.getWidth() - axisBreak.pixelMarginLeft - axisBreak.pixelMarginRight;\r\n        startPoint.y = $math.fitToRange(startPoint.y, -1, this.axisLength + 1);\r\n        endPoint.y = $math.fitToRange(endPoint.y, -1, this.axisLength + 1);\r\n        if (startPoint.y == endPoint.y && (startPoint.y < 0 || startPoint.y > this.axisLength)) {\r\n            axisBreak.fillShape.__disabled = true;\r\n        }\r\n        else {\r\n            axisBreak.fillShape.__disabled = false;\r\n        }\r\n        var w = Math.abs(x2 - x1);\r\n        startLine.x = x1;\r\n        startLine.height = 0;\r\n        startLine.width = w;\r\n        endLine.x = x1;\r\n        endLine.height = 0;\r\n        endLine.width = w;\r\n        fillShape.width = w;\r\n        fillShape.height = Math.abs(endPoint.y - startPoint.y);\r\n        fillShape.x = x1;\r\n        fillShape.y = endPoint.y;\r\n    };\r\n    /**\r\n     * Creates visual elements for and axis break.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Axis break\r\n     */\r\n    AxisRendererY.prototype.createBreakSprites = function (axisBreak) {\r\n        axisBreak.startLine = new WavedLine();\r\n        axisBreak.endLine = new WavedLine();\r\n        var wavedRectangle = new WavedRectangle();\r\n        wavedRectangle.setWavedSides(true, false, true, false);\r\n        axisBreak.fillShape = wavedRectangle;\r\n    };\r\n    /**\r\n     * Converts a position on the axis to a coordinate in pixels.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    AxisRendererY.prototype.positionToCoordinate = function (position) {\r\n        var coordinate;\r\n        var axis = this.axis;\r\n        var axisFullLength = axis.axisFullLength;\r\n        if (!axis.renderer.inversed) {\r\n            coordinate = (axis.end - position) * axisFullLength;\r\n        }\r\n        else {\r\n            coordinate = (position - axis.start) * axisFullLength;\r\n        }\r\n        return $math.round(coordinate, 1);\r\n    };\r\n    /**\r\n     * Updates and positions axis bullets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet       AxisBullet element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererY.prototype.updateBullet = function (bullet, position, endPosition) {\r\n        var location = 0.5;\r\n        if (bullet instanceof AxisBullet) {\r\n            location = bullet.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        var point = this.positionToPoint(position);\r\n        point.x = $utils.spritePointToSprite({ x: this.line.pixelX, y: 0 }, this.line.parent, this.gridContainer).x;\r\n        this.positionItem(bullet, point);\r\n        this.toggleVisibility(bullet, position, 0, 1);\r\n    };\r\n    return AxisRendererY;\r\n}(AxisRenderer));\r\nexport { AxisRendererY };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererY\"] = AxisRendererY;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Put labels inside plot area.\r\n * Disable first and last labels.\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.widthS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof AxisRendererY) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.inside = true;\r\n            state.properties.maxLabelPosition = 0.9;\r\n            state.properties.minLabelPosition = 0.1;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Disable labels altogather on very small charts\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.widthXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof AxisRendererY) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=AxisRendererY.js.map","/**\r\n * A module which defines functionality related to Value Axis Break.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Base class to define \"breaks\" on value axis.\r\n *\r\n * A \"break\" can be used to \"cut out\" specific ranges of the axis scale, e.g.\r\n * when comparing columns with relatively similar values, it would make sense\r\n * to cut out their mid section, so that their tip differences are more\r\n * prominent.\r\n *\r\n * @see {@link IValueAxisBreakEvents} for a list of available events\r\n * @see {@link IValueAxisBreakAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar ValueAxisBreak = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ValueAxisBreak, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ValueAxisBreak() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ValueAxisBreak\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ValueAxisBreak.prototype, \"startPosition\", {\r\n        /**\r\n         * Pixel position of the break's start.\r\n         *\r\n         * @return Position (px)\r\n         * @readonly\r\n         */\r\n        get: function () {\r\n            if (this.axis) {\r\n                return this.axis.valueToPosition(this.adjustedStartValue);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxisBreak.prototype, \"endPosition\", {\r\n        /**\r\n         * Pixel position of the break's end.\r\n         *\r\n         * @return Position (px)\r\n         * @readonly\r\n         */\r\n        get: function () {\r\n            if (this.axis) {\r\n                return this.axis.valueToPosition(this.adjustedEndValue);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ValueAxisBreak;\r\n}(AxisBreak));\r\nexport { ValueAxisBreak };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ValueAxisBreak\"] = ValueAxisBreak;\r\n//# sourceMappingURL=ValueAxisBreak.js.map","/**\r\n * Value Axis module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Axis, AxisDataItem } from \"./Axis\";\r\nimport { AxisRendererY } from \"./AxisRendererY\";\r\nimport { MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { ValueAxisBreak } from \"./ValueAxisBreak\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[ValueAxis]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar ValueAxisDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ValueAxisDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ValueAxisDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ValueAxisDataItem\";\r\n        _this.values.value = {};\r\n        _this.values.endValue = {};\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ValueAxisDataItem.prototype, \"value\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values[\"value\"].value;\r\n        },\r\n        /**\r\n         * A data point's numeric value.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"value\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxisDataItem.prototype, \"endValue\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values[\"endValue\"].value;\r\n        },\r\n        /**\r\n         * Data point's numeric end value.\r\n         *\r\n         * @param value  End value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"endValue\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ValueAxisDataItem;\r\n}(AxisDataItem));\r\nexport { ValueAxisDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Used to create a value axis for the chart.\r\n *\r\n * ```TypeScript\r\n * // Create the axis\r\n * let valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n *\r\n * // Set settings\r\n * valueAxis.title.text = \"Monthly Sales\";\r\n * ```\r\n * ```JavaScript\r\n * // Create the axis\r\n * var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n *\r\n * // Set settings\r\n * valueAxis.title.text = \"Monthly Sales\";\r\n * ```\r\n * ```JSON\r\n * \"yAxes\": [{\r\n *   \"type\": \"ValueAxis\",\r\n *   \"title\": {\r\n *     \"text\": \"Monthly Sales\"\r\n *   }\r\n * }]\r\n * ```\r\n *\r\n * @see {@link IValueAxisEvents} for a list of available Events\r\n * @see {@link IValueAxisAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar ValueAxis = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ValueAxis, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ValueAxis() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * [_stepDecimalPlaces description]\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._stepDecimalPlaces = 0;\r\n        /**\r\n         * Base value for the axis.\r\n         */\r\n        _this._baseValue = 0;\r\n        /**\r\n         * Adjusted start in case we have breaks.\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._adjustedStart = 0;\r\n        /**\r\n         * Adjusted end in case we have breaks.\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._adjustedEnd = 1;\r\n        _this._extremesChanged = false;\r\n        _this._deltaMinMax = 1;\r\n        /**\r\n         * As calculating totals is expensive operation and not often needed, we\r\n         * don't do it by default.\r\n         *\r\n         * In case you use `totalPercent` or `total` in your charts, this must be set\r\n         * to `true`.\r\n         *\r\n         * @default false\r\n         * @see {@link https://www.amcharts.com/docs/v4/chart-types/xy-chart/#100_stacks} For using `calculateTotals` for 100% stacked series.\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-strings/#Placeholders_for_numeric_values} For using `calculateTotals` in labels.\r\n         */\r\n        _this.calculateTotals = false;\r\n        _this.className = \"ValueAxis\";\r\n        // Set field name\r\n        _this.axisFieldName = \"value\";\r\n        // Set defaults\r\n        _this.setPropertyValue(\"maxZoomFactor\", 1000);\r\n        _this.setPropertyValue(\"extraMin\", 0);\r\n        _this.setPropertyValue(\"extraMax\", 0);\r\n        _this.setPropertyValue(\"strictMinMax\", false);\r\n        _this.setPropertyValue(\"maxPrecision\", Number.MAX_VALUE);\r\n        _this.keepSelection = false;\r\n        _this.includeRangesInMinMax = false;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Holds reference to a function that accepts a DataItem as parameter.\r\n     *\r\n     * It can either return a fill opacity for a fill, or manipulate data item\r\n     * directly, to create various highlighting scenarios.\r\n     */\r\n    ValueAxis.prototype.fillRule = function (dataItem) {\r\n        var value = dataItem.value;\r\n        var axis = dataItem.component;\r\n        if (!dataItem.axisFill.disabled) {\r\n            // rounding in left to solve floating point number\r\n            if ($math.round(value / axis.step / 2, 5) == Math.round(value / axis.step / 2)) {\r\n                dataItem.axisFill.__disabled = true;\r\n            }\r\n            else {\r\n                dataItem.axisFill.__disabled = false;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty [[DataItem]] of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    ValueAxis.prototype.createDataItem = function () {\r\n        return new ValueAxisDataItem();\r\n    };\r\n    /**\r\n     * Returns a new/empty [[AxisBreak]] of the appropriate type.\r\n     *\r\n     * @return Axis break\r\n     */\r\n    ValueAxis.prototype.createAxisBreak = function () {\r\n        return new ValueAxisBreak();\r\n    };\r\n    /**\r\n     * [dataChangeUpdate description]\r\n     *\r\n     * This is a placeholder to override for extending classes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    ValueAxis.prototype.dataChangeUpdate = function () {\r\n        if (!this.keepSelection) {\r\n            if (this._start != 0 || this._end != 1) {\r\n                this._start = 0;\r\n                this._end = 1;\r\n                this.dispatchImmediately(\"startendchanged\");\r\n            }\r\n        }\r\n        else {\r\n            if (this._start != 0) {\r\n                this.dispatchImmediately(\"startchanged\");\r\n            }\r\n            if (this._end != 1) {\r\n                this.dispatchImmediately(\"endchanged\");\r\n            }\r\n            if (this._start != 0 || this._end != 1) {\r\n                this.dispatchImmediately(\"startendchanged\");\r\n            }\r\n        }\r\n        this._maxZoomed = this._maxDefined;\r\n        this._minZoomed = this._minDefined;\r\n        this._maxAdjusted = this._maxDefined;\r\n        this._minAdjusted = this._minDefined;\r\n    };\r\n    /**\r\n     * Processes data items of the related Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ValueAxis.prototype.processSeriesDataItems = function () {\r\n        // @todo: add some boolean (maybe autodedect) if we need these calculations or not. this place uses a lot of cpu\r\n        if (this.calculateTotals) {\r\n            var series = this.series.getIndex(0);\r\n            var startIndex = series.startIndex;\r\n            if (series.dataItems.length > 0) {\r\n                if (startIndex > 0) {\r\n                    startIndex--;\r\n                }\r\n                var endIndex = series.endIndex;\r\n                if (endIndex < series.dataItems.length) {\r\n                    endIndex++;\r\n                }\r\n                var _loop_1 = function (i) {\r\n                    // This has to be `var` in order to avoid garbage collection\r\n                    var total = {};\r\n                    this_1.series.each(function (series) {\r\n                        if (!series.excludeFromTotal) {\r\n                            var dataItem_1 = series.dataItems.getIndex(i);\r\n                            if (dataItem_1) {\r\n                                $object.each(dataItem_1.values, function (key) {\r\n                                    var value = dataItem_1.values[key].workingValue; // can not use getWorkingValue here!\r\n                                    if ($type.isNumber(value)) {\r\n                                        if (!$type.isNumber(total[key])) {\r\n                                            total[key] = Math.abs(value);\r\n                                        }\r\n                                        else {\r\n                                            total[key] += Math.abs(value);\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                    this_1.series.each(function (series) {\r\n                        if (!series.excludeFromTotal) {\r\n                            var dataItem_2 = series.dataItems.getIndex(i);\r\n                            if (dataItem_2) {\r\n                                $object.each(dataItem_2.values, function (key) {\r\n                                    var value = dataItem_2.values[key].workingValue; // can not use getWorkingValue here!\r\n                                    if ($type.isNumber(value)) {\r\n                                        dataItem_2.setCalculatedValue(key, total[key], \"total\");\r\n                                        dataItem_2.setCalculatedValue(key, 100 * value / total[key], \"totalPercent\");\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                };\r\n                var this_1 = this;\r\n                // This has to be `var` in order to avoid garbage collection\r\n                for (var i = startIndex; i < endIndex; ++i) {\r\n                    _loop_1(i);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Validates the whole axis. Causes it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     */\r\n    ValueAxis.prototype.validate = function () {\r\n        if (this.axisLength <= 0) {\r\n            return;\r\n        }\r\n        _super.prototype.validate.call(this);\r\n        this.getMinMax();\r\n        this.fixAxisBreaks();\r\n        this.calculateZoom();\r\n        this.validateAxisElements();\r\n        this.validateAxisRanges();\r\n        this.validateBreaks();\r\n        this.hideUnusedDataItems();\r\n        this.renderer.invalidateLayout();\r\n        // hide too close\r\n        //this.hideTooCloseDataItems();\r\n    };\r\n    /**\r\n     * Calculates all positions, related to axis as per current zoom.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ValueAxis.prototype.calculateZoom = function () {\r\n        if ($type.isNumber(this.min) && $type.isNumber(this.max)) {\r\n            var min = this.positionToValue(this.start);\r\n            var max = this.positionToValue(this.end);\r\n            var differece = this.adjustDifference(min, max);\r\n            var minMaxStep = this.adjustMinMax(min, max, differece, this._gridCount, true);\r\n            min = minMaxStep.min;\r\n            max = minMaxStep.max;\r\n            this._adjustedStart = $math.round((min - this.min) / (this.max - this.min), 5);\r\n            this._adjustedEnd = $math.round((max - this.min) / (this.max - this.min), 5);\r\n            this._step = minMaxStep.step;\r\n            this._stepDecimalPlaces = $utils.decimalPlaces(this._step);\r\n            if (this._minZoomed != min || this._maxZoomed != max) {\r\n                this._minZoomed = min;\r\n                this._maxZoomed = max;\r\n                this.dispatchImmediately(\"selectionextremeschanged\");\r\n            }\r\n        }\r\n        else {\r\n            this._adjustedStart = this.start;\r\n            this._adjustedEnd = this.end;\r\n        }\r\n    };\r\n    /**\r\n     * Validates Axis elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    ValueAxis.prototype.validateAxisElements = function () {\r\n        var _this = this;\r\n        if ($type.isNumber(this.max) && $type.isNumber(this.min)) {\r\n            // first regular items\r\n            var value_1 = this.minZoomed - this._step * 2;\r\n            if (!this.logarithmic) {\r\n                value_1 = Math.floor(value_1 / this._step) * this._step;\r\n            }\r\n            else {\r\n                var differencePower = Math.log(this.max) * Math.LOG10E - Math.log(this.min) * Math.LOG10E;\r\n                if (differencePower > 1) {\r\n                    value_1 = Math.pow(10, Math.log(this.min) * Math.LOG10E);\r\n                }\r\n                else {\r\n                    value_1 = Math.floor(this.minZoomed / this._step) * this._step;\r\n                    if (value_1 == 0) {\r\n                        value_1 = this.minZoomed;\r\n                    }\r\n                }\r\n            }\r\n            var maxZoomed = this._maxZoomed + this._step;\r\n            this.resetIterators();\r\n            var dataItemsIterator_1 = this._dataItemsIterator;\r\n            var i = 0;\r\n            while (value_1 <= maxZoomed) {\r\n                var axisBreak = this.isInBreak(value_1);\r\n                if (!axisBreak) {\r\n                    var dataItem = dataItemsIterator_1.find(function (x) { return x.value === value_1; });\r\n                    if (dataItem.__disabled) {\r\n                        dataItem.__disabled = false;\r\n                    }\r\n                    //this.processDataItem(dataItem);\r\n                    this.appendDataItem(dataItem);\r\n                    dataItem.axisBreak = undefined;\r\n                    if (dataItem.value != value_1) {\r\n                        dataItem.value = value_1;\r\n                        dataItem.text = this.formatLabel(value_1);\r\n                        if (dataItem.label && dataItem.label.invalid) {\r\n                            dataItem.label.validate();\r\n                        }\r\n                        if (dataItem.value >= this.min && dataItem.value <= this.max) {\r\n                            if (dataItem.label) {\r\n                                if ((this.axisLetter == \"Y\" && dataItem.label.measuredWidth > this.ghostLabel.measuredWidth) || (this.axisLetter == \"X\" && dataItem.label.measuredHeight > this.ghostLabel.measuredHeight)) {\r\n                                    this.ghostLabel.text = dataItem.label.currentText;\r\n                                    this.ghostLabel.validate();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    this.validateDataElement(dataItem);\r\n                }\r\n                i++;\r\n                if (!this.logarithmic) {\r\n                    value_1 += this._step;\r\n                }\r\n                else {\r\n                    var differencePower = Math.log(this.max) * Math.LOG10E - Math.log(this.min) * Math.LOG10E;\r\n                    if (differencePower > 1) {\r\n                        value_1 = Math.pow(10, Math.log(this.min) * Math.LOG10E + i);\r\n                    }\r\n                    else {\r\n                        value_1 += this._step;\r\n                    }\r\n                }\r\n                var stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(this._step)) * Math.LOG10E));\r\n                if (stepPower < 1) {\r\n                    // exponent is less then 1 too. Count decimals of exponent\r\n                    var decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 2;\r\n                    // round value to avoid floating point issues\r\n                    value_1 = $math.round(value_1, decCount);\r\n                }\r\n            }\r\n            var axisBreaks = this._axisBreaks;\r\n            if (axisBreaks) {\r\n                // breaks later\r\n                var renderer_1 = this.renderer;\r\n                $iter.each(axisBreaks.iterator(), function (axisBreak) {\r\n                    if (axisBreak.breakSize > 0) {\r\n                        // only add grid if gap is bigger then minGridDistance\r\n                        if ($math.getDistance(axisBreak.startPoint, axisBreak.endPoint) > renderer_1.minGridDistance) {\r\n                            var breakValue_1 = axisBreak.adjustedMin;\r\n                            while (breakValue_1 <= axisBreak.adjustedMax) {\r\n                                if (breakValue_1 >= axisBreak.adjustedStartValue && breakValue_1 <= axisBreak.adjustedEndValue) {\r\n                                    var dataItem = dataItemsIterator_1.find(function (x) { return x.value === breakValue_1; });\r\n                                    if (dataItem.__disabled) {\r\n                                        dataItem.__disabled = false;\r\n                                    }\r\n                                    //this.processDataItem(dataItem);\r\n                                    _this.appendDataItem(dataItem);\r\n                                    dataItem.axisBreak = axisBreak;\r\n                                    if (dataItem.value != breakValue_1) {\r\n                                        dataItem.value = breakValue_1;\r\n                                        dataItem.text = _this.formatLabel(breakValue_1);\r\n                                        if (dataItem.label && dataItem.label.invalid) {\r\n                                            dataItem.label.validate();\r\n                                        }\r\n                                    }\r\n                                    _this.validateDataElement(dataItem);\r\n                                }\r\n                                breakValue_1 += axisBreak.adjustedStep;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Validates axis data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param dataItem  Data item\r\n     */\r\n    ValueAxis.prototype.validateDataElement = function (dataItem) {\r\n        _super.prototype.validateDataElement.call(this, dataItem);\r\n        //dataItem.__disabled = false;\r\n        dataItem.itemIndex = this._axisItemCount;\r\n        this._axisItemCount++;\r\n        var renderer = this.renderer;\r\n        var value = dataItem.value;\r\n        var endValue = dataItem.endValue;\r\n        var position = this.valueToPosition(value);\r\n        dataItem.position = position;\r\n        var endPosition = position;\r\n        var fillEndPosition = this.valueToPosition(value + this._step);\r\n        if ($type.isNumber(endValue)) {\r\n            endPosition = this.valueToPosition(endValue);\r\n            fillEndPosition = endPosition;\r\n        }\r\n        // this point is needed to calculate distance to satisfy minGridDistance\r\n        dataItem.point = renderer.positionToPoint(position);\r\n        var tick = dataItem.tick;\r\n        if (tick && !tick.disabled) {\r\n            renderer.updateTickElement(tick, position, endPosition);\r\n        }\r\n        var grid = dataItem.grid;\r\n        if (grid && !grid.disabled) {\r\n            renderer.updateGridElement(grid, position, endPosition);\r\n        }\r\n        var label = dataItem.label;\r\n        if (label && !label.disabled) {\r\n            renderer.updateLabelElement(label, position, endPosition);\r\n        }\r\n        var fill = dataItem.axisFill;\r\n        if (fill && !fill.disabled) {\r\n            renderer.updateFillElement(fill, position, fillEndPosition);\r\n            if (!dataItem.isRange) {\r\n                this.fillRule(dataItem);\r\n            }\r\n        }\r\n        if (dataItem.bullet) {\r\n            renderer.updateBullet(dataItem.bullet, position, endPosition);\r\n        }\r\n        var mask = dataItem.mask;\r\n        if (mask) {\r\n            renderer.updateFillElement(mask, position, fillEndPosition);\r\n        }\r\n    };\r\n    /**\r\n     * Formats the value according to axis' own [[NumberFormatter]].\r\n     *\r\n     * @param value  Source value\r\n     * @return Formatted value\r\n     */\r\n    ValueAxis.prototype.formatLabel = function (value) {\r\n        return this.numberFormatter.format(value);\r\n    };\r\n    Object.defineProperty(ValueAxis.prototype, \"basePoint\", {\r\n        /**\r\n         * Coordinates of the actual axis start.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Base point\r\n         */\r\n        get: function () {\r\n            var baseValue = this.baseValue;\r\n            var position = this.valueToPosition(baseValue);\r\n            var basePoint = this.renderer.positionToPoint(position);\r\n            return basePoint;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"baseValue\", {\r\n        /**\r\n         * @return base value\r\n         */\r\n        get: function () {\r\n            var baseValue = this._baseValue;\r\n            if (this.logarithmic) {\r\n                baseValue = this.min;\r\n            }\r\n            if (!this._adapterO) {\r\n                return baseValue;\r\n            }\r\n            else {\r\n                return this._adapterO.apply(\"baseValue\", baseValue);\r\n            }\r\n        },\r\n        /**\r\n         * A base value.\r\n         *\r\n         * This is a threshold value that will divide \"positive\" and \"negative\"\r\n         * value ranges.\r\n         *\r\n         * Other scale-related functionality also depend on base value. E.g. stacks,\r\n         * value-dependent coloring, etc.\r\n         *\r\n         * @param value Base value\r\n         */\r\n        set: function (value) {\r\n            this._baseValue = value;\r\n            this.invalidateLayout();\r\n            this.invalidateSeries();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts a numeric value to relative position on axis\r\n     *\r\n     * An alias to `valueToPosition()`.\r\n     *\r\n     * @param value  Value\r\n     * @return Position\r\n     */\r\n    ValueAxis.prototype.anyToPosition = function (value) {\r\n        return this.valueToPosition(value);\r\n    };\r\n    /**\r\n     * Converts a numeric value to orientation point (x, y, angle) on axis\r\n     *\r\n     * @param value  Value\r\n     * @return Orientation point\r\n     */\r\n    ValueAxis.prototype.valueToPoint = function (value) {\r\n        var position = this.valueToPosition(value);\r\n        var point = this.renderer.positionToPoint(position);\r\n        var angle = this.renderer.positionToAngle(position);\r\n        return { x: point.x, y: point.y, angle: angle };\r\n    };\r\n    /**\r\n     * Converts a numeric value to orientation (x, y, angle) point on axis\r\n     *\r\n     * @param value  Value\r\n     * @return Orientation point\r\n     */\r\n    ValueAxis.prototype.anyToPoint = function (value) {\r\n        return this.valueToPoint(value);\r\n    };\r\n    /**\r\n     * Converts a numeric value to relative position on axis.\r\n     *\r\n     * @param value  Value\r\n     * @return relative position\r\n     */\r\n    ValueAxis.prototype.valueToPosition = function (value) {\r\n        if ($type.isNumber(value)) {\r\n            // todo: think if possible to take previous value and do not go through all previous breaks\r\n            var min_1 = this.min;\r\n            var max_1 = this.max;\r\n            if ($type.isNumber(min_1) && $type.isNumber(max_1)) {\r\n                var difference = this._difference;\r\n                var axisBreaks = this._axisBreaks;\r\n                if (axisBreaks && axisBreaks.length > 0) {\r\n                    $iter.eachContinue(axisBreaks.iterator(), function (axisBreak) {\r\n                        var startValue = axisBreak.adjustedStartValue;\r\n                        var endValue = axisBreak.adjustedEndValue;\r\n                        if ($type.isNumber(startValue) && $type.isNumber(endValue)) {\r\n                            if (value < startValue) {\r\n                                return false;\r\n                            }\r\n                            if ($math.intersect({ start: startValue, end: endValue }, { start: min_1, end: max_1 })) { // todo: check this once and set some flag in axisBreak\r\n                                startValue = Math.max(startValue, min_1);\r\n                                endValue = Math.min(endValue, max_1);\r\n                                var breakSize = axisBreak.breakSize;\r\n                                // value to the right of break end\r\n                                if (value > endValue) {\r\n                                    min_1 += (endValue - startValue) * (1 - breakSize); // todo: maybe this can be done differently?\r\n                                }\r\n                                // value to the left of break start\r\n                                else if (value < startValue) {\r\n                                }\r\n                                // value within break\r\n                                else {\r\n                                    value = startValue + (value - startValue) * breakSize;\r\n                                }\r\n                            }\r\n                        }\r\n                        return true;\r\n                    });\r\n                }\r\n                var position = void 0;\r\n                if (!this.logarithmic) {\r\n                    position = (value - min_1) / difference;\r\n                }\r\n                else {\r\n                    position = (Math.log(value) * Math.LOG10E - Math.log(this.min) * Math.LOG10E) / ((Math.log(this.max) * Math.LOG10E - Math.log(this.min) * Math.LOG10E));\r\n                }\r\n                //position = $math.round(position, 10);\r\n                return position;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    /**\r\n     * Converts an relative position to a corresponding value within\r\n     * axis' scale.\r\n     *\r\n     * @param position  Position (px)\r\n     * @return Value\r\n     */\r\n    ValueAxis.prototype.positionToValue = function (position) {\r\n        position = $math.round(position, 10);\r\n        var min = this.min;\r\n        var max = this.max;\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            var difference_1 = max - min; //no need to adjust!\r\n            var value_2 = null;\r\n            var axisBreaks = this._axisBreaks;\r\n            if (axisBreaks) {\r\n                // in case we have some axis breaks\r\n                if (axisBreaks.length > 0) {\r\n                    $iter.eachContinue(axisBreaks.iterator(), function (axisBreak) {\r\n                        var breakStartPosition = axisBreak.startPosition;\r\n                        var breakEndPosition = axisBreak.endPosition;\r\n                        var breakStartValue = axisBreak.adjustedStartValue;\r\n                        var breakEndValue = axisBreak.adjustedEndValue;\r\n                        if ($type.isNumber(breakStartValue) && $type.isNumber(breakEndValue)) {\r\n                            if (breakStartValue > max) {\r\n                                return false;\r\n                            }\r\n                            if ($math.intersect({ start: breakStartValue, end: breakEndValue }, { start: min, end: max })) {\r\n                                breakStartValue = $math.max(breakStartValue, min);\r\n                                breakEndValue = $math.min(breakEndValue, max);\r\n                                var breakSize = axisBreak.breakSize;\r\n                                difference_1 -= (breakEndValue - breakStartValue) * (1 - breakSize);\r\n                                // position to the right of break end\r\n                                if (position > breakEndPosition) {\r\n                                    min += (breakEndValue - breakStartValue) * (1 - breakSize);\r\n                                }\r\n                                // position to the left of break start\r\n                                else if (position < breakStartPosition) {\r\n                                }\r\n                                // value within break\r\n                                else {\r\n                                    var breakPosition = (position - breakStartPosition) / (breakEndPosition - breakStartPosition);\r\n                                    value_2 = breakStartValue + breakPosition * (breakEndValue - breakStartValue);\r\n                                    return false;\r\n                                }\r\n                            }\r\n                            return true;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (!$type.isNumber(value_2)) {\r\n                if (this.logarithmic) {\r\n                    value_2 = Math.pow(Math.E, (position * ((Math.log(this.max) * Math.LOG10E - Math.log(this.min) * Math.LOG10E)) + Math.log(this.min) * Math.LOG10E) / Math.LOG10E);\r\n                }\r\n                else {\r\n                    value_2 = position * difference_1 + min;\r\n                }\r\n            }\r\n            return value_2;\r\n        }\r\n        //}\r\n    };\r\n    /**\r\n     * Converts an X coordinate to a relative value in axis' scale.\r\n     *\r\n     * @param x  X (px)\r\n     * @return Value\r\n     */\r\n    ValueAxis.prototype.xToValue = function (x) {\r\n        return this.positionToValue(this.pointToPosition({ x: x, y: 0 }));\r\n    };\r\n    /**\r\n     * Converts an Y coordinate to a relative value in axis' scale.\r\n     *\r\n     * @param y  Y (px)\r\n     * @return Value\r\n     */\r\n    ValueAxis.prototype.yToValue = function (y) {\r\n        return this.positionToValue(this.pointToPosition({ x: 0, y: y }));\r\n    };\r\n    /**\r\n     * Converts pixel coordinates to a relative position. (0-1)\r\n     *\r\n     * @param point  Coorinates (px)\r\n     * @return Position (0-1)\r\n     */\r\n    ValueAxis.prototype.pointToPosition = function (point) {\r\n        if (this.renderer instanceof AxisRendererY) {\r\n            return 1 - this.renderer.pointToPosition(point);\r\n        }\r\n        else {\r\n            return this.renderer.pointToPosition(point);\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    ValueAxis.prototype.animateMinMax = function (min, max) {\r\n        return this.animate([{ property: \"_minAdjusted\", from: this._minAdjusted, to: min }, { property: \"_maxAdjusted\", from: this._maxAdjusted, to: max }], this.rangeChangeDuration, this.rangeChangeEasing);\r\n    };\r\n    /**\r\n     * Calculates smallest and biggest value for the axis scale.\r\n     * @ignore\r\n     * @todo Description (review)\r\n     */\r\n    ValueAxis.prototype.getMinMax = function () {\r\n        var _this = this;\r\n        this.updateGridCount();\r\n        var min = Number.POSITIVE_INFINITY;\r\n        var max = Number.NEGATIVE_INFINITY;\r\n        // only if min and max are not set from outside, we go through min and max influencers\r\n        if (!$type.isNumber(this._minDefined) || !$type.isNumber(this._maxDefined)) {\r\n            this.series.each(function (series) {\r\n                if (!series.ignoreMinMax) {\r\n                    // check min\r\n                    var seriesMin = series.min(_this);\r\n                    if ($type.isNumber(seriesMin) && (seriesMin < min)) {\r\n                        min = seriesMin;\r\n                    }\r\n                    // check max\r\n                    var seriesMax = series.max(_this);\r\n                    if ($type.isNumber(seriesMax) && (seriesMax > max)) {\r\n                        max = seriesMax;\r\n                    }\r\n                }\r\n            });\r\n            if (this.includeRangesInMinMax) {\r\n                this.axisRanges.each(function (range) {\r\n                    if (!range.ignoreMinMax) {\r\n                        var minValue = $math.min(range.value, range.endValue);\r\n                        var maxValue = $math.max(range.value, range.endValue);\r\n                        if (minValue < min || !$type.isNumber(min)) {\r\n                            min = minValue;\r\n                        }\r\n                        if (maxValue > max || !$type.isNumber(max)) {\r\n                            max = maxValue;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        if (this.logarithmic) {\r\n            if (min <= 0) {\r\n                throw Error(\"Logarithmic value axis can not have vales <= 0.\");\r\n            }\r\n        }\r\n        if (min == 0 && max == 0) {\r\n            max = 0.9;\r\n            min = -0.9;\r\n        }\r\n        // if defined from outside\r\n        if ($type.isNumber(this._minDefined)) {\r\n            min = this._minDefined;\r\n        }\r\n        if ($type.isNumber(this._maxDefined)) {\r\n            max = this._maxDefined;\r\n        }\r\n        if (this._adapterO) {\r\n            min = this._adapterO.apply(\"min\", min);\r\n        }\r\n        if (this._adapterO) {\r\n            max = this._adapterO.apply(\"max\", max);\r\n        }\r\n        if (!$type.isNumber(min) || !$type.isNumber(max)) {\r\n            return;\r\n        }\r\n        this._minReal = min;\r\n        this._maxReal = max;\r\n        if (min == Number.POSITIVE_INFINITY) {\r\n            min = undefined;\r\n        }\r\n        if (max == Number.NEGATIVE_INFINITY) {\r\n            max = undefined;\r\n        }\r\n        var dif = this.adjustDifference(min, max); // previously it was max-min, but not worked well\r\n        min = this.fixMin(min);\r\n        max = this.fixMax(max);\r\n        // this happens if starLocation and endLocation are 0.5 and DateAxis has only one date\r\n        if (max - min <= 1 / Math.pow(10, 15)) {\r\n            if (max - min != 0) {\r\n                this._deltaMinMax = (max - min) / 2;\r\n            }\r\n            else {\r\n                // the number by which we need to raise 10 to get difference\r\n                var exponent = Math.log(Math.abs(max)) * Math.LOG10E;\r\n                // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n                var power = Math.pow(10, Math.floor(exponent));\r\n                // reduce this number by 10 times\r\n                power = power / 10;\r\n                this._deltaMinMax = power;\r\n            }\r\n            min -= this._deltaMinMax;\r\n            max += this._deltaMinMax;\r\n        }\r\n        min -= (max - min) * this.extraMin;\r\n        max += (max - min) * this.extraMax;\r\n        var strict = this.strictMinMax;\r\n        if ($type.isNumber(this._maxDefined)) {\r\n            strict = true;\r\n        }\r\n        var minMaxStep = this.adjustMinMax(min, max, dif, this._gridCount, strict);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        dif = max - min; //new\r\n        // do it for the second time (importat!)\r\n        minMaxStep = this.adjustMinMax(min, max, max - min, this._gridCount, true);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        // return min max if strict\r\n        if (this.strictMinMax) {\r\n            if ($type.isNumber(this._minDefined)) {\r\n                min = this._minDefined;\r\n            }\r\n            else {\r\n                min = this._minReal;\r\n            }\r\n            if ($type.isNumber(this._maxDefined)) {\r\n                max = this._maxDefined;\r\n            }\r\n            else {\r\n                max = this._maxReal;\r\n            }\r\n            if (max - min <= 0.00000001) {\r\n                min -= this._deltaMinMax;\r\n                max += this._deltaMinMax;\r\n            }\r\n            min -= (max - min) * this.extraMin;\r\n            max += (max - min) * this.extraMax;\r\n        }\r\n        if (this._adapterO) {\r\n            min = this._adapterO.apply(\"min\", min);\r\n        }\r\n        if (this._adapterO) {\r\n            max = this._adapterO.apply(\"max\", max);\r\n        }\r\n        // checking isNumber is good when all series are hidden\r\n        if ((this._minAdjusted != min || this._maxAdjusted != max) && $type.isNumber(min) && $type.isNumber(max)) {\r\n            var animation = this._minMaxAnimation;\r\n            if (this._extremesChanged && $type.isNumber(this._minAdjusted) && $type.isNumber(this._maxAdjusted) && this.inited) {\r\n                if ((animation && !animation.isFinished()) && this._finalMax == max && this._finalMin == min) {\r\n                    return;\r\n                }\r\n                else {\r\n                    this._finalMin = min;\r\n                    this._finalMax = max;\r\n                    animation = this.animateMinMax(min, max);\r\n                    if (animation && !animation.isFinished()) {\r\n                        animation.events.on(\"animationprogress\", this.validateDataItems, this);\r\n                        animation.events.on(\"animationended\", function () {\r\n                            //this.validateDataItems();\r\n                            _this.series.each(function (series) {\r\n                                series.validate();\r\n                            });\r\n                            _this.validateDataItems();\r\n                            _this.handleSelectionExtremesChange();\r\n                        });\r\n                        this._minMaxAnimation = animation;\r\n                    }\r\n                    else {\r\n                        this.series.each(function (series) {\r\n                            series.validate();\r\n                        });\r\n                    }\r\n                    this.validateDataItems();\r\n                    this.dispatchImmediately(\"extremeschanged\");\r\n                    this.handleSelectionExtremesChange();\r\n                }\r\n            }\r\n            else {\r\n                if ((animation && !animation.isFinished()) && this._finalMax == max && this._finalMin == min) {\r\n                    return;\r\n                }\r\n                else {\r\n                    this._minAdjusted = min;\r\n                    this._maxAdjusted = max;\r\n                    this._finalMin = min;\r\n                    this._finalMax = max;\r\n                    this.invalidateDataItems();\r\n                    this.dispatchImmediately(\"extremeschanged\");\r\n                }\r\n            }\r\n        }\r\n        this._extremesChanged = false;\r\n        this._difference = this.adjustDifference(min, max);\r\n    };\r\n    /**\r\n     * Adjusts the minimum value.\r\n     *\r\n     * This is a placeholder method for extending classes to override.\r\n     *\r\n     * For numeric values this does nothing, however for more complex types, like\r\n     * dates, it may be necessary to adjust.\r\n     *\r\n     * @param value  Value\r\n     * @return Adjusted value\r\n     */\r\n    ValueAxis.prototype.fixMin = function (value) {\r\n        return value;\r\n    };\r\n    /**\r\n     * Adjusts the maximum value.\r\n     *\r\n     * This is a placeholder method for extending classes to override.\r\n     *\r\n     * For numeric values this does nothing, however for more complex types, like\r\n     * dates, it may be necessary to adjust.\r\n     *\r\n     * @param value  Value\r\n     * @return Adjusted value\r\n     */\r\n    ValueAxis.prototype.fixMax = function (value) {\r\n        return value;\r\n    };\r\n    /**\r\n     * Adjusts actual min and max scale values so that the axis starts and ends\r\n     * at \"nice\" values, unless `strictMinMax` is set.\r\n     *\r\n     * The `difference` can be something else than `max - min`, because of the\r\n     * axis breaks.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param min        [description]\r\n     * @param max        [description]\r\n     * @param difference [description]\r\n     * @param gridCount  [description]\r\n     * @param strictMode [description]\r\n     * @return [description]\r\n     */\r\n    ValueAxis.prototype.adjustMinMax = function (min, max, difference, gridCount, strictMode) {\r\n        // will fail if 0\r\n        if (gridCount <= 1) {\r\n            gridCount = 1;\r\n        }\r\n        gridCount = Math.round(gridCount);\r\n        var initialMin = min;\r\n        var initialMax = max;\r\n        // in case min and max is the same, use max\r\n        if (difference === 0) {\r\n            difference = Math.abs(max);\r\n        }\r\n        // the number by which we need to raise 10 to get difference\r\n        var exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n        var power = Math.pow(10, Math.floor(exponent));\r\n        // reduce this number by 10 times\r\n        power = power / 10;\r\n        var extra = power;\r\n        if (strictMode) {\r\n            extra = 0;\r\n        }\r\n        if (!this.logarithmic) {\r\n            // round down min\r\n            if (strictMode) {\r\n                min = Math.floor(min / power) * power;\r\n                // round up max\r\n                max = Math.ceil(max / power) * power;\r\n            }\r\n            else {\r\n                min = Math.ceil(min / power) * power - extra;\r\n                // round up max\r\n                max = Math.floor(max / power) * power + extra;\r\n            }\r\n            // don't let min go below 0 if real min is >= 0\r\n            if (min < 0 && initialMin >= 0) {\r\n                min = 0;\r\n            }\r\n            // don't let max go above 0 if real max is <= 0\r\n            if (max > 0 && initialMax <= 0) {\r\n                max = 0;\r\n            }\r\n        }\r\n        else {\r\n            if (min <= 0) {\r\n                //throw Error(\"Logarithmic value axis can not have vales <= 0.\");\r\n                min = this.baseValue;\r\n            }\r\n            // @todo: think of a better way or to restrict zooming when no series are selected\r\n            if (min == Infinity) {\r\n                min = 1;\r\n            }\r\n            if (max == -Infinity) {\r\n                max = 10;\r\n            }\r\n            min = Math.pow(10, Math.floor(Math.log(Math.abs(min)) * Math.LOG10E));\r\n            max = Math.pow(10, Math.ceil(Math.log(Math.abs(max)) * Math.LOG10E));\r\n        }\r\n        // repeat diff, exponent and power again with rounded values\r\n        //difference = this.adjustDifference(min, max);\r\n        /*\r\n\r\n                if(min > initialMin){\r\n                    min = initialMin;\r\n                }\r\n\r\n                if(max < initialMax){\r\n                    max = initialMax;\r\n                }\r\n        */\r\n        exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        power = Math.pow(10, Math.floor(exponent));\r\n        power = power / 10;\r\n        // approximate difference between two grid lines\r\n        var step = Math.ceil((difference / gridCount) / power) * power;\r\n        var stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n        // TODO: in v3 I had fixStepE here, ommiting it for a while, need to think about other solution\r\n        // the step should divide by  2, 5, and 10.\r\n        var stepDivisor = Math.ceil(step / stepPower); // number 0 - 10\r\n        if (stepDivisor > 5) {\r\n            stepDivisor = 10;\r\n        }\r\n        else if (stepDivisor <= 5 && stepDivisor > 2) {\r\n            stepDivisor = 5;\r\n        }\r\n        // now get real step\r\n        step = Math.ceil(step / (stepPower * stepDivisor)) * stepPower * stepDivisor;\r\n        if (this.maxPrecision < Number.MAX_VALUE && step != $math.ceil(step, this.maxPrecision)) {\r\n            step = $math.ceil(step, this.maxPrecision);\r\n        }\r\n        var decCount = 0;\r\n        // in case numbers are smaller than 1\r\n        if (stepPower < 1) {\r\n            // exponent is less then 1 too. Count decimals of exponent\r\n            decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 1;\r\n            // round step\r\n            step = $math.round(step, decCount);\r\n        }\r\n        if (!this.logarithmic) {\r\n            // final min and max\r\n            var minCount = Math.floor(min / step);\r\n            min = $math.round(step * minCount, decCount);\r\n            var maxCount = void 0;\r\n            if (!strictMode) {\r\n                maxCount = Math.ceil(max / step);\r\n            }\r\n            else {\r\n                maxCount = Math.floor(max / step);\r\n            }\r\n            if (maxCount == minCount) {\r\n                maxCount++;\r\n            }\r\n            max = $math.round(step * maxCount, decCount);\r\n            if (max < initialMax) {\r\n                max = max + step;\r\n            }\r\n            if (min > initialMin) {\r\n                min = min - step;\r\n            }\r\n        }\r\n        return { min: min, max: max, step: step };\r\n    };\r\n    Object.defineProperty(ValueAxis.prototype, \"min\", {\r\n        /**\r\n         * @return Min value\r\n         */\r\n        get: function () {\r\n            var min = this._minAdjusted;\r\n            if (!$type.isNumber(min)) {\r\n                min = this._minDefined;\r\n            }\r\n            return min;\r\n        },\r\n        /**\r\n         * A minimum value for the axis scale.\r\n         *\r\n         * This value might be auto-adjusted by the Axis in order to accomodate the\r\n         * grid nicely, i.e. plot area is divided by grid in nice equal cells.\r\n         *\r\n         * The above might be overridden by `strictMinMax` which will force exact\r\n         * user-defined min and max values to be used for scale.\r\n         *\r\n         * @param value  Min value\r\n         */\r\n        set: function (value) {\r\n            if (this._minDefined != value) {\r\n                this._minDefined = value;\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"minDefined\", {\r\n        /**\r\n         * Min value as defined by user's code, not auto-calculated.\r\n         *\r\n         * @readonly\r\n         * @return Min value\r\n         */\r\n        get: function () {\r\n            return this._minDefined;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"maxDefined\", {\r\n        /**\r\n         * Max value as defined by user's code, not auto-calculated.\r\n         *\r\n         * @readonly\r\n         * @return Man value\r\n         */\r\n        get: function () {\r\n            return this._maxDefined;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"extraMin\", {\r\n        /**\r\n         * @return {number}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"extraMin\");\r\n        },\r\n        /**\r\n         * Allows relatively adjusting minimum value of the axis' scale.\r\n         *\r\n         * The value is relative to the actual range of values currently displayed\r\n         * on the axis.\r\n         *\r\n         * E.g.: 0.5 will mean half of the current range. If we have axis displaying\r\n         * from 100 to 200, we will now have axis displaying from 50 to 200 because\r\n         * we asked to expand minimum value by 50% (0.5).\r\n         *\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"extraMin\", value)) {\r\n                this.invalidateDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"extraMax\", {\r\n        /**\r\n         * @return Min multiplier\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"extraMax\");\r\n        },\r\n        /**\r\n         * Allows relatively adjusting maximum value of the axis' scale.\r\n         *\r\n         * The value is relative to the actual range of values currently displayed\r\n         * on the axis.\r\n         *\r\n         * E.g.: 0.5 will mean half of the current range. If we have axis displaying\r\n         * from 100 to 200, we will now have axis displaying from 100 to 250 because\r\n         * we asked to expand maximum value by 50% (0.5).\r\n         *\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"extraMax\", value)) {\r\n                this.invalidateDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"step\", {\r\n        /**\r\n         * Current calculated delta in values between two adjacent grid lines (step).\r\n         *\r\n         * This is a read-only value and cannot be used to set actual step.\r\n         *\r\n         * @readonly\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/#Setting_the_density_of_the_the_grid_labels} For more information about modifying density of labels\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this._step;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"max\", {\r\n        /**\r\n         * @return Max value\r\n         */\r\n        get: function () {\r\n            var max = this._maxAdjusted;\r\n            if (!$type.isNumber(max)) {\r\n                max = this._maxDefined;\r\n            }\r\n            return max;\r\n        },\r\n        /**\r\n         * A maximum value for the axis scale.\r\n         *\r\n         * This value might be auto-adjusted by the Axis in order to accomodate the\r\n         * grid nicely, i.e. plot area is divided by grid in nice equal cells.\r\n         *\r\n         * The above might be overridden by `strictMinMax` which will force exact\r\n         * user-defined min and max values to be used for scale.\r\n         *\r\n         * @param value  Max value\r\n         */\r\n        set: function (value) {\r\n            if (this._maxDefined != value) {\r\n                this._maxDefined = value;\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Used for the Series to register itself as the user of this Axis.\r\n     *\r\n     * This will also decorate both the Series and Axis with event handlers, used\r\n     * to redraw on Axis position/zoom change.\r\n     *\r\n     * A disposer for those events is returned, so that they can be disposed\r\n     * together with Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param series  Series\r\n     * @return Disposer for events\r\n     */\r\n    ValueAxis.prototype.registerSeries = function (series) {\r\n        return new MultiDisposer([\r\n            _super.prototype.registerSeries.call(this, series),\r\n            series.events.on(\"extremeschanged\", this.handleExtremesChange, this, false),\r\n            series.events.on(\"selectionextremeschanged\", this.handleSelectionExtremesChange, this, false),\r\n            this.events.on(\"extremeschanged\", series.invalidate, series, false)\r\n        ]);\r\n    };\r\n    /**\r\n     * Perform tasks after Axis zoom.\r\n     */\r\n    ValueAxis.prototype.handleSelectionExtremesChange = function () {\r\n        var _this = this;\r\n        var selectionMin;\r\n        var selectionMax;\r\n        var allHidden = true;\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            if (!series.ignoreMinMax && !series.isHidden) {\r\n                if (series.visible && !series.isHiding) {\r\n                    allHidden = false;\r\n                }\r\n                var seriesSelectionMin = series.selectionMin(_this);\r\n                var seriesSelectionMax = series.selectionMax(_this);\r\n                if ($type.isNumber(seriesSelectionMin)) {\r\n                    if (!$type.isNumber(selectionMin) || (seriesSelectionMin < selectionMin)) {\r\n                        selectionMin = seriesSelectionMin;\r\n                    }\r\n                }\r\n                // check max\r\n                if ($type.isNumber(seriesSelectionMax)) {\r\n                    if (!$type.isNumber(selectionMax) || (seriesSelectionMax > selectionMax)) {\r\n                        selectionMax = seriesSelectionMax;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (this.includeRangesInMinMax) {\r\n            this.axisRanges.each(function (range) {\r\n                if (!range.ignoreMinMax) {\r\n                    var minValue = $math.min(range.value, range.endValue);\r\n                    var maxValue = $math.max(range.value, range.endValue);\r\n                    if (minValue < selectionMax) {\r\n                        selectionMax = minValue;\r\n                    }\r\n                    if (maxValue > selectionMax) {\r\n                        selectionMax = maxValue;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        // this is not good, as if date axis is initially zoomed, selection of y axis is reset to 0, 1 at the end of this method\r\n        //$iter.each(this.series.iterator(), (series) => {\r\n        //\tif (!series.appeared) {\r\n        //\t\tallHidden = true;\r\n        //\t}\r\n        //})\r\n        if ($type.isNumber(this._minDefined)) {\r\n            if (this.strictMinMax) {\r\n                selectionMin = this._minDefined;\r\n            }\r\n            else {\r\n                selectionMin = this.min;\r\n            }\r\n        }\r\n        else if (this.strictMinMax) {\r\n            selectionMin = this._minReal;\r\n        }\r\n        if ($type.isNumber(this._maxDefined)) {\r\n            if (this.strictMinMax) {\r\n                selectionMax = this._maxDefined;\r\n            }\r\n            else {\r\n                selectionMax = this.max;\r\n            }\r\n        }\r\n        else if (this.strictMinMax) {\r\n            selectionMax = this._maxReal;\r\n        }\r\n        if (selectionMin == selectionMax) {\r\n            selectionMin -= this._deltaMinMax;\r\n            selectionMax += this._deltaMinMax;\r\n            var minMaxStep2 = this.adjustMinMax(selectionMin, selectionMax, 0, this._gridCount, this.strictMinMax);\r\n            selectionMin = minMaxStep2.min;\r\n            selectionMax = minMaxStep2.max;\r\n        }\r\n        var dif = this.adjustDifference(selectionMin, selectionMax);\r\n        var minMaxStep = this.adjustMinMax(selectionMin, selectionMax, dif, this._gridCount);\r\n        selectionMin = minMaxStep.min;\r\n        selectionMax = minMaxStep.max;\r\n        selectionMin -= (selectionMax - selectionMin) * this.extraMin;\r\n        selectionMax += (selectionMax - selectionMin) * this.extraMax;\r\n        selectionMin = $math.fitToRange(selectionMin, this.min, this.max);\r\n        selectionMax = $math.fitToRange(selectionMax, this.min, this.max);\r\n        // do it for the second time !important\r\n        dif = this.adjustDifference(selectionMin, selectionMax);\r\n        minMaxStep = this.adjustMinMax(selectionMin, selectionMax, dif, this._gridCount, true);\r\n        selectionMin = minMaxStep.min;\r\n        selectionMax = minMaxStep.max;\r\n        if (this.strictMinMax) {\r\n            selectionMin = $math.max(selectionMin, this._minDefined);\r\n            selectionMax = $math.min(selectionMax, this._maxDefined);\r\n        }\r\n        this._minZoomed = selectionMin;\r\n        this._maxZoomed = selectionMax;\r\n        this._step = minMaxStep.step;\r\n        var start = this.valueToPosition(selectionMin);\r\n        var end = this.valueToPosition(selectionMax);\r\n        // in case all series are hidden or hiding, full zoomout\r\n        if (allHidden) {\r\n            start = 0;\r\n            end = 1;\r\n        }\r\n        if (!this.keepSelection) {\r\n            this.zoom({ start: start, end: end }, false, false, 0);\r\n        }\r\n    };\r\n    Object.defineProperty(ValueAxis.prototype, \"strictMinMax\", {\r\n        /**\r\n         * @return Use exact values?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"strictMinMax\");\r\n        },\r\n        /**\r\n         * Indicates whether to blindly use exact `min` and `max` values set by user\r\n         * when generating Axis scale.\r\n         *\r\n         * If not set, the Axis might slightly adjust those values to accomodate a\r\n         * better looking grid.\r\n         *\r\n         * NOTE: if `min` and `max` are not set, setting `strictMinMax` to `true`\r\n         * will result in fixing the scale of the axis to actual lowest and highest\r\n         * values in the series within currently selected scope.\r\n         *\r\n         * @default false\r\n         * @param value Use exact values?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"strictMinMax\", value)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"logarithmic\", {\r\n        /**\r\n         * @return Logarithmic scale?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"logarithmic\");\r\n        },\r\n        /**\r\n         * Indicates if this axis should use a logarithmic scale.\r\n         *\r\n         * Please note that logarithmic axis can **only** accommodate values bigger\r\n         * than zero.\r\n         *\r\n         * Having zero or negative values will result in error and failure of the\r\n         * whole chart.\r\n         *\r\n         * @param value Logarithmic scale?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"logarithmic\", value)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"keepSelection\", {\r\n        /**\r\n         * @return Preseve zoom after data update?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"keepSelection\");\r\n        },\r\n        /**\r\n         * Indicates if a current selection (zoom) should be kept across data updates.\r\n         *\r\n         * If your axis is zoomed while chart's data is updated, the axis will try\r\n         * to retain the same start and end values.\r\n         *\r\n         * You can also use this to initially pre-zoom axis:\r\n         *\r\n         * ```TypeScript\r\n         * axis.keepSelection = true;\r\n         * axis.start = 0.5;\r\n         * axis.end = 0.7;\r\n         * ```\r\n         * ```JavaScript\r\n         * axis.keepSelection = true;\r\n         * axis.start = 0.5;\r\n         * axis.end = 0.7;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   \"xAxes\": [{\r\n         *     // ...\r\n         *     \"keepSelection\": true,\r\n         *     \"start\": 0.5,\r\n         *     \"end\": 0.7\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * The above will start the chart zoomed from the middle of the actual scope\r\n         * to 70%.\r\n         *\r\n         * @since 4.1.1\r\n         * @default flase\r\n         * @param  value  Preseve zoom after data update?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"keepSelection\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"includeRangesInMinMax\", {\r\n        /**\r\n         * @return Include ranges?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"includeRangesInMinMax\");\r\n        },\r\n        /**\r\n         * If set to `true`, values of axis ranges will be included when calculating\r\n         * range of values / scale of the [[ValueAxis]].\r\n         *\r\n         * @default false\r\n         * @since 4.4.9\r\n         * @param  value  Include ranges?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"includeRangesInMinMax\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"maxPrecision\", {\r\n        /**\r\n         * @return max precision\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maxPrecision\");\r\n        },\r\n        /**\r\n         * Maximum number of decimals to allow when placing grid lines and labels\r\n         * on axis.\r\n         *\r\n         * Set it to `0` (zero) to force integer-only axis labels.\r\n         *\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"maxPrecision\", value)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Invalidates axis data items when series extremes change\r\n     */\r\n    ValueAxis.prototype.handleExtremesChange = function () {\r\n        var _this = this;\r\n        this._extremesChanged = true;\r\n        this.getMinMax();\r\n        if (this.ghostLabel) {\r\n            var mw_1 = 0;\r\n            this.dataItems.each(function (dataItem) {\r\n                if (dataItem.label && dataItem.label.pixelWidth > mw_1) {\r\n                    _this.ghostLabel.text = dataItem.label.currentText;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Returns relative position on axis for series' data item's value.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       Data field to get value from\r\n     * @param location  Location (0-1)\r\n     * @param stackKey  ?\r\n     * @return X coordinate (px)\r\n     */\r\n    ValueAxis.prototype.getX = function (dataItem, key, location, stackKey, range) {\r\n        return this.renderer.positionToPoint(this.getPositionX(dataItem, key, location, stackKey, range)).x;\r\n    };\r\n    /**\r\n     * Returns the X coordinate for series' data item's value.\r\n     *\r\n     * @since 4.5.14\r\n     * @param  dataItem  Data item\r\n     * @param  key       Data field to get value from\r\n     * @param  location  Location (0-1)\r\n     * @param  stackKey  ?\r\n     * @return           Relative position\r\n     */\r\n    ValueAxis.prototype.getPositionX = function (dataItem, key, location, stackKey, range) {\r\n        var value = dataItem.getWorkingValue(key);\r\n        if (!$type.hasValue(stackKey)) {\r\n            stackKey = \"valueX\";\r\n        }\r\n        var stack = dataItem.getValue(stackKey, \"stack\");\r\n        if (!$type.isNumber(value)) {\r\n            value = this.baseValue;\r\n            if (this.logarithmic) {\r\n                if (stack > 0) {\r\n                    value = 0;\r\n                }\r\n            }\r\n        }\r\n        var position = this.valueToPosition(value + stack);\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return position;\r\n    };\r\n    /**\r\n     * Returns the Y coordinate for series' data item's value.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       Data field to get value from\r\n     * @param location  Location (0-1)\r\n     * @param stackKey  Stack ID\r\n     * @return Y coordinate (px)\r\n     */\r\n    ValueAxis.prototype.getY = function (dataItem, key, location, stackKey, range) {\r\n        return this.renderer.positionToPoint(this.getPositionY(dataItem, key, location, stackKey, range)).y;\r\n    };\r\n    /**\r\n     * Returns relative position on axis for series' data item's value.\r\n     *\r\n     * @since 4.5.14\r\n     * @param  dataItem  Data item\r\n     * @param  key       Data field to get value from\r\n     * @param  location  Location (0-1)\r\n     * @param  stackKey  Stack ID\r\n     * @return           Relative position\r\n     */\r\n    ValueAxis.prototype.getPositionY = function (dataItem, key, location, stackKey, range) {\r\n        var value = dataItem.getWorkingValue(key);\r\n        if (!$type.hasValue(stackKey)) {\r\n            stackKey = \"valueY\";\r\n        }\r\n        var stack = dataItem.getValue(stackKey, \"stack\");\r\n        if (!$type.isNumber(value)) {\r\n            value = this.baseValue;\r\n            if (this.logarithmic) {\r\n                if (stack > 0) {\r\n                    value = 0;\r\n                }\r\n            }\r\n        }\r\n        var position = this.valueToPosition(value + stack);\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return position;\r\n    };\r\n    /**\r\n     * Returns an angle for series data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       Data field to get value from\r\n     * @param location  Location (0-1)\r\n     * @param stackKey  Stack ID\r\n     * @param range Range to fit in\r\n     * @return Angle\r\n     */\r\n    ValueAxis.prototype.getAngle = function (dataItem, key, location, stackKey, range) {\r\n        var value = dataItem.getWorkingValue(key);\r\n        var stack = dataItem.getValue(stackKey, \"stack\");\r\n        if (!$type.isNumber(value)) {\r\n            value = this.baseValue;\r\n        }\r\n        var position = this.valueToPosition(value + stack);\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return this.positionToAngle(position);\r\n    };\r\n    /**\r\n     * [getAnyRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param start     [description]\r\n     * @param end       [description]\r\n     * @param location  [description]\r\n     * @return [description]\r\n     */\r\n    ValueAxis.prototype.getAnyRangePath = function (start, end, location) {\r\n        var startPosition = this.valueToPosition(start);\r\n        var endPosition = this.valueToPosition(end);\r\n        return this.getPositionRangePath(startPosition, endPosition); // Base class (Axis) gets range shape from AxisRenderer\r\n    };\r\n    /**\r\n     * Returns text to show in a axis tooltip, based on specific position within\r\n     * axis.\r\n     *\r\n     * The label will be formatted as per [[NumberFormatter]] set for the whole\r\n     * chart, or explicitly for this Axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Position (px)\r\n     * @return Label (numeric value)\r\n     */\r\n    ValueAxis.prototype.getTooltipText = function (position) {\r\n        var value = $math.round(this.positionToValue(position), this._stepDecimalPlaces);\r\n        var valueStr = this.tooltip.numberFormatter.format(value);\r\n        if (!this._adapterO) {\r\n            return valueStr;\r\n        }\r\n        else {\r\n            return this._adapterO.apply(\"getTooltipText\", valueStr);\r\n        }\r\n    };\r\n    /**\r\n     * Zooms axis to specific values.\r\n     *\r\n     * @param startValue      Start value\r\n     * @param endValue        End value\r\n     * @param skipRangeEvent  Do not invoke events\r\n     * @param instantly       Do not play zoom animations\r\n     */\r\n    ValueAxis.prototype.zoomToValues = function (startValue, endValue, skipRangeEvent, instantly) {\r\n        var start = (startValue - this.min) / (this.max - this.min);\r\n        var end = (endValue - this.min) / (this.max - this.min);\r\n        this.zoom({ start: start, end: end }, skipRangeEvent, instantly);\r\n    };\r\n    Object.defineProperty(ValueAxis.prototype, \"minZoomed\", {\r\n        /**\r\n         * A smallest value in axis scale within current zoom.\r\n         *\r\n         * @return Min zoom value\r\n         */\r\n        get: function () {\r\n            return $math.max(this.min, this._minZoomed);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValueAxis.prototype, \"maxZoomed\", {\r\n        /**\r\n         * A biggest value in axis scale within current zoom.\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return $math.min(this.max, this._maxZoomed);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates positioning of Axis breaks after something changes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ValueAxis.prototype.fixAxisBreaks = function () {\r\n        var _this = this;\r\n        _super.prototype.fixAxisBreaks.call(this);\r\n        var axisBreaks = this._axisBreaks;\r\n        if (axisBreaks && axisBreaks.length > 0) {\r\n            // process breaks\r\n            axisBreaks.each(function (axisBreak) {\r\n                var startValue = axisBreak.adjustedStartValue;\r\n                var endValue = axisBreak.adjustedEndValue;\r\n                // break difference\r\n                var axisBreakDif = endValue - startValue;\r\n                var axisBreakGridCount = Math.ceil(axisBreakDif * axisBreak.breakSize) * _this._gridCount / (_this.max - _this.min);\r\n                // calculate min, max and step for axis break\r\n                var breakMinMaxStep = _this.adjustMinMax(startValue, endValue, axisBreakDif, axisBreakGridCount, true);\r\n                axisBreak.adjustedStep = breakMinMaxStep.step;\r\n                axisBreak.adjustedMin = breakMinMaxStep.min;\r\n                axisBreak.adjustedMax = breakMinMaxStep.max;\r\n            });\r\n        }\r\n        this._difference = this.adjustDifference(this.min, this.max);\r\n    };\r\n    /**\r\n     * Returns value based on position.\r\n     *\r\n     * Please note that `position` represents position within axis which may be\r\n     * zoomed and not correspond to Cursor's `position`.\r\n     *\r\n     * To convert Cursor's `position` to Axis' `position` use `toAxisPosition()` method.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v4/tutorials/tracking-cursors-position-via-api/#Tracking_Cursor_s_position} For more information about cursor tracking.\r\n     * @param position  Relative position on axis (0-1)\r\n     * @return Position label\r\n     */\r\n    ValueAxis.prototype.getPositionLabel = function (position) {\r\n        var value = this.positionToValue(position);\r\n        return this.numberFormatter.format(value);\r\n    };\r\n    /**\r\n     * Shows Axis tooltip at specific value\r\n     *\r\n     * @param value Value\r\n     */\r\n    ValueAxis.prototype.showTooltipAt = function (value) {\r\n        this.showTooltipAtPosition(this.valueToPosition(value));\r\n    };\r\n    /**\r\n     * Copies all properties and related data from a different instance of Axis.\r\n     *\r\n     * @param source Source Axis\r\n     */\r\n    ValueAxis.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.min = source.min;\r\n        this.max = source.max;\r\n        this.calculateTotals = source.calculateTotals;\r\n        this._baseValue = source.baseValue;\r\n    };\r\n    return ValueAxis;\r\n}(Axis));\r\nexport { ValueAxis };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ValueAxis\"] = ValueAxis;\r\nregistry.registeredClasses[\"ValueAxisDataItem\"] = ValueAxisDataItem;\r\n//# sourceMappingURL=ValueAxis.js.map","/**\r\n * DateAxisBreak includes functionality to add breaks on a [[DateAxis]].\r\n *\r\n * A \"break\" can be used to \"cut out\" specific ranges of the axis scale, e.g.\r\n * weekends and holidays out of the Date-based axis.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ValueAxisBreak } from \"./ValueAxisBreak\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to define breaks for [[DateAxis]].\r\n *\r\n * A \"break\" can be used to \"cut out\" specific ranges of the axis scale, e.g.\r\n * weekends and holidays out of the Date-based axis.\r\n *\r\n * @see {@link IDateAxisBreakEvents} for a list of available events\r\n * @see {@link IDateAxisBreakAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar DateAxisBreak = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DateAxisBreak, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function DateAxisBreak() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"DateAxisBreak\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DateAxisBreak.prototype, \"startDate\", {\r\n        /**\r\n         * @return Start date\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startDate\");\r\n        },\r\n        /**\r\n         * Starting date for the break.\r\n         *\r\n         * @param value Start date\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"startDate\", value)) {\r\n                this.startValue = value.getTime();\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxisBreak.prototype, \"endDate\", {\r\n        /**\r\n         * @return End date\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endDate\");\r\n        },\r\n        /**\r\n         * Ending date for the break.\r\n         *\r\n         * @param value End date\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"endDate\", value)) {\r\n                this.endValue = value.getTime();\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return DateAxisBreak;\r\n}(ValueAxisBreak));\r\nexport { DateAxisBreak };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"DateAxisBreak\"] = DateAxisBreak;\r\n//# sourceMappingURL=DateAxisBreak.js.map","/**\r\n * DateAxis module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ValueAxis, ValueAxisDataItem } from \"./ValueAxis\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { Dictionary } from \"../../core/utils/Dictionary\";\r\nimport { DateAxisBreak } from \"./DateAxisBreak\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $time from \"../../core/utils/Time\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport { OrderedListTemplate } from \"../../core/utils/SortedList\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines data item for [[DateAxis]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar DateAxisDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DateAxisDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function DateAxisDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"DateAxisDataItem\";\r\n        _this.applyTheme();\r\n        _this.values.date = {};\r\n        _this.values.endDate = {};\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DateAxisDataItem.prototype, \"date\", {\r\n        /**\r\n         * @return Date\r\n         */\r\n        get: function () {\r\n            return this.dates[\"date\"];\r\n        },\r\n        /**\r\n         * Date position of the data item.\r\n         *\r\n         * @param date  Date\r\n         */\r\n        set: function (date) {\r\n            this.setDate(\"date\", date);\r\n            this.value = date.getTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxisDataItem.prototype, \"endDate\", {\r\n        /**\r\n         * @return End date\r\n         */\r\n        get: function () {\r\n            return this.dates[\"endDate\"];\r\n        },\r\n        /**\r\n         * End date for data item.\r\n         *\r\n         * @param date End date\r\n         */\r\n        set: function (date) {\r\n            this.setDate(\"endDate\", date);\r\n            this.endValue = date.getTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return DateAxisDataItem;\r\n}(ValueAxisDataItem));\r\nexport { DateAxisDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Used to create a date/time-based axis for the chart.\r\n *\r\n * ```TypeScript\r\n * // Create the axis\r\n * let xAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n *\r\n * // Set settings\r\n * xAxis.title.text = \"Time\";\r\n * ```\r\n * ```JavaScript\r\n * // Create the axis\r\n * var valueAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n *\r\n * // Set settings\r\n * valueAxis.title.text = \"Time\";\r\n * ```\r\n * ```JSON\r\n * \"xAxes\": [{\r\n *   \"type\": \"DateAxis\",\r\n *   \"title\": {\r\n *     \"text\": \"Time\"\r\n *   }\r\n * }]\r\n * ```\r\n *\r\n * @see {@link IDateAxisEvents} for a list of available Events\r\n * @see {@link IDateAxisAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/date-axis/} got `DateAxis` documention\r\n * @important\r\n */\r\nvar DateAxis = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DateAxis, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function DateAxis() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this._gapBreaks = false;\r\n        /**\r\n         * A list of date/time intervals for Date axis.\r\n         *\r\n         * This define various granularities available for the axis. For example\r\n         * if you have an axis spanning an hour, and space for 6 grid lines / labels\r\n         * the axis will choose the granularity of 10 minutes, displaying a label\r\n         * every 10 minutes.\r\n         *\r\n         * Default intervals:\r\n         *\r\n         * ```JSON\r\n         * [\r\n         *  { timeUnit: \"millisecond\", count: 1 },\r\n         *  { timeUnit: \"millisecond\", count: 5 },\r\n         *  { timeUnit: \"millisecond\", count: 10 },\r\n         *  { timeUnit: \"millisecond\", count: 50 },\r\n         *  { timeUnit: \"millisecond\", count: 100 },\r\n         *  { timeUnit: \"millisecond\", count: 500 },\r\n         *  { timeUnit: \"second\", count: 1 },\r\n         *  { timeUnit: \"second\", count: 5 },\r\n         *  { timeUnit: \"second\", count: 10 },\r\n         *  { timeUnit: \"second\", count: 30 },\r\n         *  { timeUnit: \"minute\", count: 1 },\r\n         *  { timeUnit: \"minute\", count: 5 },\r\n         *  { timeUnit: \"minute\", count: 10 },\r\n         *  { timeUnit: \"minute\", count: 30 },\r\n         *  { timeUnit: \"hour\", count: 1 },\r\n         *  { timeUnit: \"hour\", count: 3 },\r\n         *  { timeUnit: \"hour\", count: 6 },\r\n         *  { timeUnit: \"hour\", count: 12 },\r\n         *  { timeUnit: \"day\", count: 1 },\r\n         *  { timeUnit: \"day\", count: 2 },\r\n         *  { timeUnit: \"day\", count: 3 },\r\n         *  { timeUnit: \"day\", count: 4 },\r\n         *  { timeUnit: \"day\", count: 5 },\r\n         *  { timeUnit: \"week\", count: 1 },\r\n         *  { timeUnit: \"month\", count: 1 },\r\n         *  { timeUnit: \"month\", count: 2 },\r\n         *  { timeUnit: \"month\", count: 3 },\r\n         *  { timeUnit: \"month\", count: 6 },\r\n         *  { timeUnit: \"year\", count: 1 },\r\n         *  { timeUnit: \"year\", count: 2 },\r\n         *  { timeUnit: \"year\", count: 5 },\r\n         *  { timeUnit: \"year\", count: 10 },\r\n         *  { timeUnit: \"year\", count: 50 },\r\n         *  { timeUnit: \"year\", count: 100 }\r\n         * ]\r\n         * ```\r\n         */\r\n        _this.gridIntervals = new List();\r\n        /**\r\n         * If data aggregation is enabled by setting Axis' `groupData = true`, the\r\n         * chart will try to aggregate data items into grouped data items.\r\n         *\r\n         * If there are more data items in selected period than `groupCount`, it will\r\n         * group data items into bigger period.\r\n         *\r\n         * For example seconds might be grouped into 10-second aggregate data items.\r\n         *\r\n         * This setting indicates what group intervals can the chart group to.\r\n         *\r\n         * Default intervals:\r\n         *\r\n         * ```JSON\r\n         * [\r\n         *   { timeUnit: \"millisecond\", count: 1},\r\n         *   { timeUnit: \"millisecond\", count: 10 },\r\n         *   { timeUnit: \"millisecond\", count: 100 },\r\n         *   { timeUnit: \"second\", count: 1 },\r\n         *   { timeUnit: \"second\", count: 10 },\r\n         *   { timeUnit: \"minute\", count: 1 },\r\n         *   { timeUnit: \"minute\", count: 10 },\r\n         *   { timeUnit: \"hour\", count: 1 },\r\n         *   { timeUnit: \"day\", count: 1 },\r\n         *   { timeUnit: \"week\", count: 1 },\r\n         *   { timeUnit: \"month\", count: 1 },\r\n         *   { timeUnit: \"year\", count: 1 }\r\n         * ]\r\n         * ```\r\n         *\r\n         * @since 4.7.0\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/date-axis/#Dynamic_data_item_grouping} for more information about dynamic data item grouping.\r\n         */\r\n        _this.groupIntervals = new List();\r\n        /**\r\n         * A collection of date formats to use when formatting different time units\r\n         * on Date/time axis.\r\n         *\r\n         * Actual defaults will depend on the language locale set for the chart.\r\n         *\r\n         * To override format for a specific time unit, say days, you need to set\r\n         * the appropriate key to a format string. E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * axis.dateFormats.setKey(\"day\", \"MMMM d, yyyy\");\r\n         * ```\r\n         * ```JavaScript\r\n         * axis.dateFormats.setKey(\"day\", \"MMMM d, yyyy\");\r\n         * ```\r\n         * ```JSON\r\n         * \"xAxes\": [{\r\n         *   \"type\": \"DateAxis\",\r\n         *   \"dateFormats\": {\r\n         *     \"day\": \"MMMM d, yyyy\"\r\n         *   }\r\n         * }]\r\n         * ```\r\n         *\r\n         * @see {@link DateFormatter}\r\n         */\r\n        _this.dateFormats = new Dictionary();\r\n        /**\r\n         * These formats are applied to labels that are first in a larger unit.\r\n         *\r\n         * For example, if we have a DateAxis with days on it, the first day of month\r\n         * indicates a break in month - a start of the bigger period.\r\n         *\r\n         * For those labels, `periodChangeDateFormats` are applied instead of\r\n         * `dateFormats`.\r\n         *\r\n         * This allows us implement convenient structures, like instead of:\r\n         *\r\n         * `Jan 1 - Jan 2 - Jan 3 - ...`\r\n         *\r\n         * We can have:\r\n         *\r\n         * `Jan - 1 - 2 - 3 - ...`\r\n         *\r\n         * This can be disabled by setting `markUnitChange = false`.\r\n         */\r\n        _this.periodChangeDateFormats = new Dictionary();\r\n        /**\r\n         * Actual interval (granularity) derived from the actual data.\r\n         */\r\n        _this._baseIntervalReal = { timeUnit: \"day\", count: 1 };\r\n        /**\r\n         * [_minDifference description]\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._minDifference = {};\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this._firstWeekDay = 1;\r\n        /**\r\n         * A collection of start timestamps to use as axis' min timestamp for\r\n         * particular data item item periods.\r\n         *\r\n         * @since 4.7.0\r\n         * @readonly\r\n         */\r\n        _this.groupMin = {};\r\n        /**\r\n         * A collection of start timestamps to use as axis' max timestamp for\r\n         * particular data item item periods.\r\n         *\r\n         * @since 4.7.0\r\n         * @readonly\r\n         */\r\n        _this.groupMax = {};\r\n        _this.className = \"DateAxis\";\r\n        _this.setPropertyValue(\"markUnitChange\", true);\r\n        _this.snapTooltip = true;\r\n        _this.tooltipPosition = \"pointer\";\r\n        _this.setPropertyValue(\"groupData\", false);\r\n        _this.groupCount = 200;\r\n        _this.events.on(\"parentset\", _this.getDFFormatter, _this, false);\r\n        // Translatable defaults are applied in `applyInternalDefaults()`\r\n        // ...\r\n        // Define default intervals\r\n        _this.gridIntervals.pushAll([\r\n            { timeUnit: \"millisecond\", count: 1 },\r\n            { timeUnit: \"millisecond\", count: 5 },\r\n            { timeUnit: \"millisecond\", count: 10 },\r\n            { timeUnit: \"millisecond\", count: 50 },\r\n            { timeUnit: \"millisecond\", count: 100 },\r\n            { timeUnit: \"millisecond\", count: 500 },\r\n            { timeUnit: \"second\", count: 1 },\r\n            { timeUnit: \"second\", count: 5 },\r\n            { timeUnit: \"second\", count: 10 },\r\n            { timeUnit: \"second\", count: 30 },\r\n            { timeUnit: \"minute\", count: 1 },\r\n            { timeUnit: \"minute\", count: 5 },\r\n            { timeUnit: \"minute\", count: 10 },\r\n            { timeUnit: \"minute\", count: 15 },\r\n            { timeUnit: \"minute\", count: 30 },\r\n            { timeUnit: \"hour\", count: 1 },\r\n            { timeUnit: \"hour\", count: 3 },\r\n            { timeUnit: \"hour\", count: 6 },\r\n            { timeUnit: \"hour\", count: 12 },\r\n            { timeUnit: \"day\", count: 1 },\r\n            { timeUnit: \"day\", count: 2 },\r\n            { timeUnit: \"day\", count: 3 },\r\n            { timeUnit: \"day\", count: 4 },\r\n            { timeUnit: \"day\", count: 5 },\r\n            { timeUnit: \"week\", count: 1 },\r\n            { timeUnit: \"month\", count: 1 },\r\n            { timeUnit: \"month\", count: 2 },\r\n            { timeUnit: \"month\", count: 3 },\r\n            { timeUnit: \"month\", count: 6 },\r\n            { timeUnit: \"year\", count: 1 },\r\n            { timeUnit: \"year\", count: 2 },\r\n            { timeUnit: \"year\", count: 5 },\r\n            { timeUnit: \"year\", count: 10 },\r\n            { timeUnit: \"year\", count: 50 },\r\n            { timeUnit: \"year\", count: 100 },\r\n            { timeUnit: \"year\", count: 200 },\r\n            { timeUnit: \"year\", count: 500 },\r\n            { timeUnit: \"year\", count: 1000 },\r\n            { timeUnit: \"year\", count: 2000 },\r\n            { timeUnit: \"year\", count: 5000 },\r\n            { timeUnit: \"year\", count: 10000 },\r\n            { timeUnit: \"year\", count: 100000 }\r\n        ]);\r\n        _this.groupIntervals.pushAll([\r\n            { timeUnit: \"millisecond\", count: 1 },\r\n            { timeUnit: \"millisecond\", count: 10 },\r\n            { timeUnit: \"millisecond\", count: 100 },\r\n            { timeUnit: \"second\", count: 1 },\r\n            { timeUnit: \"second\", count: 10 },\r\n            { timeUnit: \"minute\", count: 1 },\r\n            { timeUnit: \"minute\", count: 10 },\r\n            { timeUnit: \"hour\", count: 1 },\r\n            { timeUnit: \"day\", count: 1 },\r\n            { timeUnit: \"week\", count: 1 },\r\n            { timeUnit: \"month\", count: 1 },\r\n            { timeUnit: \"year\", count: 1 }\r\n        ]);\r\n        // Set field name\r\n        _this.axisFieldName = \"date\";\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * A function which applies fills to axis cells.\r\n     *\r\n     * Default function fills every second fill. You can set this to a function\r\n     * that follows some other logic.\r\n     *\r\n     * Function should accept a [[DateAxisDataItem]] and modify its `axisFill`\r\n     * property accordingly.\r\n     */\r\n    DateAxis.prototype.fillRule = function (dataItem) {\r\n        var value = dataItem.value;\r\n        var axis = dataItem.component;\r\n        var gridInterval = axis._gridInterval;\r\n        var gridDuration = $time.getDuration(gridInterval.timeUnit, gridInterval.count);\r\n        if (Math.round((value - axis.min) / gridDuration) / 2 == Math.round(Math.round((value - axis.min) / gridDuration) / 2)) {\r\n            dataItem.axisFill.__disabled = true;\r\n        }\r\n        else {\r\n            dataItem.axisFill.__disabled = false;\r\n        }\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    DateAxis.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Set default date formats\r\n        if (!this.dateFormats.hasKey(\"millisecond\")) {\r\n            this.dateFormats.setKey(\"millisecond\", this.language.translate(\"_date_millisecond\"));\r\n        }\r\n        if (!this.dateFormats.hasKey(\"second\")) {\r\n            this.dateFormats.setKey(\"second\", this.language.translate(\"_date_second\"));\r\n        }\r\n        if (!this.dateFormats.hasKey(\"minute\")) {\r\n            this.dateFormats.setKey(\"minute\", this.language.translate(\"_date_minute\"));\r\n        }\r\n        if (!this.dateFormats.hasKey(\"hour\")) {\r\n            this.dateFormats.setKey(\"hour\", this.language.translate(\"_date_hour\"));\r\n        }\r\n        if (!this.dateFormats.hasKey(\"day\")) {\r\n            this.dateFormats.setKey(\"day\", this.language.translate(\"_date_day\"));\r\n        }\r\n        if (!this.dateFormats.hasKey(\"week\")) {\r\n            this.dateFormats.setKey(\"week\", this.language.translate(\"_date_day\")); // not a mistake\r\n        }\r\n        if (!this.dateFormats.hasKey(\"month\")) {\r\n            this.dateFormats.setKey(\"month\", this.language.translate(\"_date_month\"));\r\n        }\r\n        if (!this.dateFormats.hasKey(\"year\")) {\r\n            this.dateFormats.setKey(\"year\", this.language.translate(\"_date_year\"));\r\n        }\r\n        if (!this.periodChangeDateFormats.hasKey(\"millisecond\")) {\r\n            this.periodChangeDateFormats.setKey(\"millisecond\", this.language.translate(\"_date_millisecond\"));\r\n        }\r\n        if (!this.periodChangeDateFormats.hasKey(\"second\")) {\r\n            this.periodChangeDateFormats.setKey(\"second\", this.language.translate(\"_date_second\"));\r\n        }\r\n        if (!this.periodChangeDateFormats.hasKey(\"minute\")) {\r\n            this.periodChangeDateFormats.setKey(\"minute\", this.language.translate(\"_date_minute\"));\r\n        }\r\n        if (!this.periodChangeDateFormats.hasKey(\"hour\")) {\r\n            this.periodChangeDateFormats.setKey(\"hour\", this.language.translate(\"_date_hour\"));\r\n        }\r\n        if (!this.periodChangeDateFormats.hasKey(\"day\")) {\r\n            this.periodChangeDateFormats.setKey(\"day\", this.language.translate(\"_date_day\"));\r\n        }\r\n        if (!this.periodChangeDateFormats.hasKey(\"week\")) {\r\n            this.periodChangeDateFormats.setKey(\"week\", this.language.translate(\"_date_day\"));\r\n        }\r\n        if (!this.periodChangeDateFormats.hasKey(\"month\")) {\r\n            this.periodChangeDateFormats.setKey(\"month\", this.language.translate(\"_date_month\") + \" \" + this.language.translate(\"_date_year\"));\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty [[DataItem]] of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    DateAxis.prototype.createDataItem = function () {\r\n        return new DateAxisDataItem();\r\n    };\r\n    /**\r\n     * Returns a new/empty [[AxisBreak]] of the appropriate type.\r\n     *\r\n     * @return Axis break\r\n     */\r\n    DateAxis.prototype.createAxisBreak = function () {\r\n        return new DateAxisBreak();\r\n    };\r\n    /**\r\n     * Validates Axis' data items.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    DateAxis.prototype.validateDataItems = function () {\r\n        // allows to keep selection of the same size\r\n        var start = this.start;\r\n        var end = this.end;\r\n        var baseDuration = this.baseDuration;\r\n        var periodCount = (this.max - this.min) / baseDuration;\r\n        this._firstWeekDay = this.getFirstWeekDay();\r\n        this.getDFFormatter();\r\n        _super.prototype.validateDataItems.call(this);\r\n        var mainBaseDuration = $time.getDuration(this.mainBaseInterval.timeUnit, this.mainBaseInterval.count);\r\n        this.maxZoomFactor = (this.max - this.min) / mainBaseDuration;\r\n        this._deltaMinMax = this.baseDuration / 2;\r\n        // allows to keep selection of the same size\r\n        var newPeriodCount = (this.max - this.min) / baseDuration;\r\n        start = start + (end - start) * (1 - periodCount / newPeriodCount);\r\n        this.zoom({ start: start, end: end }, false, true); // added instantlyto solve zoomout problem when we have axes gaps. @todo: check how this affects maxZoomFactor\r\n    };\r\n    /**\r\n     * Handles process after zoom.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Does nothing?\r\n     */\r\n    DateAxis.prototype.handleSelectionExtremesChange = function () {\r\n    };\r\n    /**\r\n     * Calculates all positions, related to axis as per current zoom.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    DateAxis.prototype.calculateZoom = function () {\r\n        var _this = this;\r\n        _super.prototype.calculateZoom.call(this);\r\n        var difference = this.adjustDifference(this._minZoomed, this._maxZoomed);\r\n        var dataSetChanged = false;\r\n        // if data has to be grouped, choose interval and set dataset\r\n        if (this.groupData && $type.hasValue(difference)) {\r\n            var mainBaseInterval = this.mainBaseInterval;\r\n            var groupInterval = this.chooseInterval(0, difference, this.groupCount, this.groupIntervals);\r\n            if ($time.getDuration(groupInterval.timeUnit, groupInterval.count) < $time.getDuration(mainBaseInterval.timeUnit, mainBaseInterval.count)) {\r\n                groupInterval = tslib_1.__assign({}, mainBaseInterval);\r\n            }\r\n            this._groupInterval = groupInterval;\r\n            this._currentDataSetId = groupInterval.timeUnit + groupInterval.count;\r\n            this.series.each(function (series) {\r\n                if (series.baseAxis == _this) {\r\n                    if (series.setDataSet(_this._currentDataSetId)) {\r\n                        dataSetChanged = true;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        var gridInterval = this.chooseInterval(0, difference, this._gridCount);\r\n        if ($time.getDuration(gridInterval.timeUnit, gridInterval.count) < this.baseDuration) {\r\n            gridInterval = tslib_1.__assign({}, this.baseInterval);\r\n        }\r\n        this._gridInterval = gridInterval;\r\n        this._nextGridUnit = $time.getNextUnit(gridInterval.timeUnit);\r\n        // the following is needed to avoid grid flickering while scrolling\r\n        this._intervalDuration = $time.getDuration(gridInterval.timeUnit, gridInterval.count);\r\n        this._gridDate = $time.round(new Date(this.minZoomed - $time.getDuration(gridInterval.timeUnit, gridInterval.count)), gridInterval.timeUnit, gridInterval.count, this._firstWeekDay, this._df.utc, new Date(this.min));\r\n        // tell series start/end\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            if (series.baseAxis == _this) {\r\n                var field_1 = series.getAxisField(_this);\r\n                var minZoomed = $time.round(new Date(_this._minZoomed), _this.baseInterval.timeUnit, _this.baseInterval.count).getTime();\r\n                var minZoomedStr = minZoomed.toString();\r\n                var startDataItem = series.dataItemsByAxis.getKey(_this.uid).getKey(minZoomedStr + series.currentDataSetId);\r\n                var startIndex = 0;\r\n                if (_this.start != 0) {\r\n                    if (startDataItem) {\r\n                        startDataItem = _this.findFirst(startDataItem, minZoomed, field_1);\r\n                        startIndex = startDataItem.index;\r\n                    }\r\n                    else {\r\n                        startIndex = series.dataItems.findClosestIndex(_this._minZoomed, function (x) { return x[field_1]; }, \"left\");\r\n                    }\r\n                }\r\n                // 1 millisecond is removed so that if only first item is selected, it would not count in the second.\r\n                var baseInterval = _this.baseInterval;\r\n                var maxZoomed = $time.add($time.round(new Date(_this._maxZoomed), baseInterval.timeUnit, baseInterval.count, _this._firstWeekDay, _this._df.utc), baseInterval.timeUnit, baseInterval.count, _this._df.utc).getTime();\r\n                var maxZoomedStr = maxZoomed.toString();\r\n                var endDataItem = series.dataItemsByAxis.getKey(_this.uid).getKey(maxZoomedStr + series.currentDataSetId);\r\n                var endIndex = series.dataItems.length;\r\n                if (_this.end != 1) {\r\n                    if (endDataItem) {\r\n                        endIndex = endDataItem.index;\r\n                    }\r\n                    else {\r\n                        maxZoomed -= 1;\r\n                        endIndex = series.dataItems.findClosestIndex(maxZoomed, function (x) { return x[field_1]; }, \"right\");\r\n                        if (endIndex < series.dataItems.length) {\r\n                            endIndex++;\r\n                        }\r\n                    }\r\n                }\r\n                series.startIndex = startIndex;\r\n                series.endIndex = endIndex;\r\n                if (!dataSetChanged && series.dataRangeInvalid) {\r\n                    series.validateDataRange();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    DateAxis.prototype.findFirst = function (dataItem, time, key) {\r\n        var index = dataItem.index;\r\n        if (index > 0) {\r\n            var series = dataItem.component;\r\n            var previousDataItem = series.dataItems.getIndex(index - 1);\r\n            var previousDate = previousDataItem[key];\r\n            if (!previousDate || previousDate.getTime() < time) {\r\n                return dataItem;\r\n            }\r\n            else {\r\n                return this.findFirst(previousDataItem, time, key);\r\n            }\r\n        }\r\n        else {\r\n            return dataItem;\r\n        }\r\n    };\r\n    /**\r\n     * (Re)validates data.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    DateAxis.prototype.validateData = function () {\r\n        _super.prototype.validateData.call(this);\r\n        if (!$type.isNumber(this.baseInterval.count)) {\r\n            this.baseInterval.count = 1;\r\n        }\r\n    };\r\n    Object.defineProperty(DateAxis.prototype, \"minDifference\", {\r\n        /**\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            var minDifference = Number.MAX_VALUE;\r\n            this.series.each(function (series) {\r\n                if (minDifference > _this._minDifference[series.uid]) {\r\n                    minDifference = _this._minDifference[series.uid];\r\n                }\r\n            });\r\n            if (minDifference == Number.MAX_VALUE || minDifference == 0) {\r\n                minDifference = $time.getDuration(\"day\");\r\n            }\r\n            return minDifference;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * [dataChangeUpdate description]\r\n     *\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    DateAxis.prototype.seriesDataChangeUpdate = function (series) {\r\n        this._minDifference[series.uid] = Number.MAX_VALUE;\r\n    };\r\n    /**\r\n     * [postProcessSeriesDataItems description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    DateAxis.prototype.postProcessSeriesDataItems = function () {\r\n        var _this = this;\r\n        this.series.each(function (series) {\r\n            if (JSON.stringify(series._baseInterval[_this.uid]) != JSON.stringify(_this.mainBaseInterval)) {\r\n                series.mainDataSet.each(function (dataItem) {\r\n                    _this.postProcessSeriesDataItem(dataItem);\r\n                });\r\n                series._baseInterval[_this.uid] = _this.mainBaseInterval;\r\n                if (_this.groupData) {\r\n                    _this.groupSeriesData(series);\r\n                }\r\n            }\r\n        });\r\n        this.addEmptyUnitsBreaks();\r\n    };\r\n    DateAxis.prototype.groupSeriesData = function (series) {\r\n        var _this = this;\r\n        if (series.baseAxis == this && series.dataItems.length > 0 && !series.dataGrouped) {\r\n            // make array of intervals which will be used;\r\n            var intervals_1 = [];\r\n            var mainBaseInterval = this.mainBaseInterval;\r\n            var mainIntervalDuration_1 = $time.getDuration(mainBaseInterval.timeUnit, mainBaseInterval.count);\r\n            this.groupIntervals.each(function (interval) {\r\n                var intervalDuration = $time.getDuration(interval.timeUnit, interval.count);\r\n                if (intervalDuration > mainIntervalDuration_1 && intervalDuration < (_this.max - _this.min)) {\r\n                    intervals_1.push(interval);\r\n                }\r\n            });\r\n            if (series._dataSets) {\r\n                series._dataSets.each(function (key, dataItems) {\r\n                    dataItems.each(function (dataItem) {\r\n                        dataItem.dispose();\r\n                    });\r\n                    dataItems.clear();\r\n                });\r\n                series._dataSets.clear();\r\n            }\r\n            $array.each(intervals_1, function (interval) {\r\n                //let mainBaseInterval = this._mainBaseInterval;\r\n                var key = \"date\" + _this.axisLetter;\r\n                // create data set\r\n                var dataSetId = interval.timeUnit + interval.count;\r\n                // todo: check where this clone goes\r\n                var dataSet = new OrderedListTemplate(series.mainDataSet.template.clone());\r\n                series.dataSets.setKey(dataSetId, dataSet);\r\n                series.dataGrouped = true;\r\n                var dataItems = series.mainDataSet;\r\n                var previousTime = Number.NEGATIVE_INFINITY;\r\n                var i = 0;\r\n                var newDataItem;\r\n                var dataFields = [];\r\n                $object.each(series.dataFields, function (dfkey, df) {\r\n                    var dfk = dfkey;\r\n                    if (dfk != key && dfk.indexOf(\"Show\") == -1) {\r\n                        dataFields.push(dfk);\r\n                    }\r\n                });\r\n                dataItems.each(function (dataItem) {\r\n                    var date = dataItem.getDate(key);\r\n                    if (date) {\r\n                        var time = date.getTime();\r\n                        var roundedDate = $time.round(new Date(time), interval.timeUnit, interval.count, _this._df.firstDayOfWeek, _this._df.utc);\r\n                        var currentTime = roundedDate.getTime();\r\n                        // changed period\t\t\t\t\t\t\t\t\r\n                        if (previousTime < currentTime) {\r\n                            newDataItem = dataSet.create();\r\n                            newDataItem.dataContext = {};\r\n                            newDataItem.component = series;\r\n                            // other Dates?\r\n                            newDataItem.setDate(key, roundedDate);\r\n                            newDataItem._index = i;\r\n                            i++;\r\n                            $array.each(dataFields, function (vkey) {\r\n                                //let groupFieldName = vkey + \"Group\";\r\n                                var dvalues = dataItem.values[vkey];\r\n                                if (dvalues) {\r\n                                    var value = dvalues.value;\r\n                                    var values = newDataItem.values[vkey];\r\n                                    if ($type.isNumber(value)) {\r\n                                        values.value = value;\r\n                                        values.workingValue = value;\r\n                                        values.open = value;\r\n                                        values.close = value;\r\n                                        values.low = value;\r\n                                        values.high = value;\r\n                                        values.sum = value;\r\n                                        values.average = value;\r\n                                        values.count = 1;\r\n                                    }\r\n                                    else {\r\n                                        values.count = 0;\r\n                                    }\r\n                                }\r\n                            });\r\n                            _this.postProcessSeriesDataItem(newDataItem, interval);\r\n                            $object.each(series.propertyFields, function (key, fieldValue) {\r\n                                var f = key;\r\n                                var value = dataItem.properties[key];\r\n                                if ($type.hasValue(value)) {\r\n                                    newDataItem.hasProperties = true;\r\n                                    newDataItem.setProperty(f, value);\r\n                                }\r\n                            });\r\n                            newDataItem.groupDataItems = [dataItem];\r\n                            previousTime = currentTime;\r\n                        }\r\n                        else {\r\n                            if (newDataItem) {\r\n                                $array.each(dataFields, function (vkey) {\r\n                                    var groupFieldName = series.groupFields[vkey];\r\n                                    var dvalues = dataItem.values[vkey];\r\n                                    if (dvalues) {\r\n                                        var value = dvalues.value;\r\n                                        if ($type.isNumber(value)) {\r\n                                            var values = newDataItem.values[vkey];\r\n                                            if (!$type.isNumber(values.open)) {\r\n                                                values.open = value;\r\n                                            }\r\n                                            values.close = value;\r\n                                            if (values.low > value || !$type.isNumber(values.low)) {\r\n                                                values.low = value;\r\n                                            }\r\n                                            if (values.high < value || !$type.isNumber(values.high)) {\r\n                                                values.high = value;\r\n                                            }\r\n                                            if ($type.isNumber(values.sum)) {\r\n                                                values.sum += value;\r\n                                            }\r\n                                            else {\r\n                                                values.sum = value;\r\n                                            }\r\n                                            values.count++;\r\n                                            values.average = values.sum / values.count;\r\n                                            if ($type.isNumber(values[groupFieldName])) {\r\n                                                values.value = values[groupFieldName];\r\n                                                values.workingValue = values.value;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                                $utils.copyProperties(dataItem.properties, newDataItem.properties);\r\n                                $object.each(series.propertyFields, function (key, fieldValue) {\r\n                                    var f = key;\r\n                                    var value = dataItem.properties[key];\r\n                                    if ($type.hasValue(value)) {\r\n                                        newDataItem.hasProperties = true;\r\n                                        newDataItem.setProperty(f, value);\r\n                                    }\r\n                                });\r\n                                newDataItem.groupDataItems.push(dataItem);\r\n                            }\r\n                        }\r\n                    }\r\n                    if (newDataItem) {\r\n                        $utils.copyProperties(dataItem.dataContext, newDataItem.dataContext);\r\n                    }\r\n                });\r\n            });\r\n            this.calculateZoom();\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    DateAxis.prototype.getDFFormatter = function () {\r\n        this._df = this.dateFormatter;\r\n    };\r\n    /**\r\n     * [postProcessSeriesDataItem description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param dataItem Data item\r\n     */\r\n    DateAxis.prototype.postProcessSeriesDataItem = function (dataItem, interval) {\r\n        var _this = this;\r\n        // we need to do this for all series data items not only added recently, as baseInterval might change\r\n        var intervalID = \"\";\r\n        if (interval) {\r\n            intervalID = interval.timeUnit + interval.count;\r\n        }\r\n        else {\r\n            interval = this.mainBaseInterval;\r\n        }\r\n        var series = dataItem.component;\r\n        var dataItemsByAxis = series.dataItemsByAxis.getKey(this.uid);\r\n        $object.each(dataItem.dates, function (key) {\r\n            var date = dataItem.getDate(key);\r\n            var time = date.getTime();\r\n            var startDate = $time.round(new Date(time), interval.timeUnit, interval.count, _this._firstWeekDay, _this._df.utc);\r\n            var startTime = startDate.getTime();\r\n            var endDate = $time.add(new Date(startTime), interval.timeUnit, interval.count, _this._df.utc);\r\n            dataItem.setCalculatedValue(key, startTime, \"open\");\r\n            dataItem.setCalculatedValue(key, endDate.getTime(), \"close\");\r\n            dataItemsByAxis.setKey(startTime + intervalID, dataItem);\r\n        });\r\n    };\r\n    /**\r\n     * Collapses empty stretches of date/time scale by creating [[AxisBreak]]\r\n     * elements for them.\r\n     *\r\n     * Can be used to automatically remove strethes without data, like weekends.\r\n     *\r\n     * No, need to call this manually. It will automatically be done if\r\n     * `skipEmptyPeriods = true`.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    DateAxis.prototype.addEmptyUnitsBreaks = function () {\r\n        var _this = this;\r\n        if (this.skipEmptyPeriods && $type.isNumber(this.min) && $type.isNumber(this.max)) {\r\n            var timeUnit = this.baseInterval.timeUnit;\r\n            var count = this.baseInterval.count;\r\n            if (this._axisBreaks) {\r\n                this._axisBreaks.clear(); // TODO: what about breaks added by user?\r\n            }\r\n            var date = $time.round(new Date(this.min), timeUnit, count, this._firstWeekDay, this._df.utc);\r\n            var axisBreak = void 0;\r\n            var _loop_1 = function () {\r\n                $time.add(date, timeUnit, count, this_1._df.utc);\r\n                var startTime = date.getTime();\r\n                var startTimeStr = startTime.toString();\r\n                var hasData = $iter.contains(this_1.series.iterator(), function (series) {\r\n                    return !!series.dataItemsByAxis.getKey(_this.uid).getKey(startTimeStr + series.currentDataSetId);\r\n                });\r\n                // open break if not yet opened\r\n                if (!hasData) {\r\n                    if (!axisBreak) {\r\n                        axisBreak = this_1.axisBreaks.create();\r\n                        axisBreak.startDate = new Date(startTime);\r\n                        this_1._gapBreaks = true;\r\n                    }\r\n                }\r\n                else {\r\n                    // close if already opened\r\n                    if (axisBreak) {\r\n                        // close at end time minus one millisecond\r\n                        axisBreak.endDate = new Date(startTime - 1);\r\n                        axisBreak = undefined;\r\n                    }\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            while (date.getTime() < this.max - this.baseDuration) {\r\n                _loop_1();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Updates positioning of Axis breaks after something changes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    DateAxis.prototype.fixAxisBreaks = function () {\r\n        var _this = this;\r\n        _super.prototype.fixAxisBreaks.call(this);\r\n        var axisBreaks = this._axisBreaks;\r\n        if (axisBreaks) {\r\n            if (axisBreaks.length > 0) {\r\n                // process breaks\r\n                axisBreaks.each(function (axisBreak) {\r\n                    var breakGridCount = Math.ceil(_this._gridCount * (Math.min(_this.end, axisBreak.endPosition) - Math.max(_this.start, axisBreak.startPosition)) / (_this.end - _this.start));\r\n                    axisBreak.gridInterval = _this.chooseInterval(0, axisBreak.adjustedEndValue - axisBreak.adjustedStartValue, breakGridCount);\r\n                    var gridDate = $time.round(new Date(axisBreak.adjustedStartValue), axisBreak.gridInterval.timeUnit, axisBreak.gridInterval.count, _this._firstWeekDay, _this._df.utc);\r\n                    if (gridDate.getTime() > axisBreak.startDate.getTime()) {\r\n                        $time.add(gridDate, axisBreak.gridInterval.timeUnit, axisBreak.gridInterval.count, _this._df.utc);\r\n                    }\r\n                    axisBreak.gridDate = gridDate;\r\n                });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    DateAxis.prototype.getFirstWeekDay = function () {\r\n        if (this._df) {\r\n            return this._df.firstDayOfWeek;\r\n        }\r\n        return 1;\r\n    };\r\n    /**\r\n     * [getGridDate description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param date           [description]\r\n     * @param intervalCount  [description]\r\n     * @return [description]\r\n     */\r\n    DateAxis.prototype.getGridDate = function (date, intervalCount) {\r\n        var timeUnit = this._gridInterval.timeUnit;\r\n        var realIntervalCount = this._gridInterval.count;\r\n        // round date\r\n        $time.round(date, timeUnit, 1, this._firstWeekDay, this._df.utc);\r\n        var prevTimestamp = date.getTime();\r\n        var newDate = $time.copy(date);\r\n        // modify date by adding intervalcount\r\n        var timestamp = $time.add(newDate, timeUnit, intervalCount, this._df.utc).getTime();\r\n        // if it's axis break, get first rounded date which is not in a break\r\n        var axisBreak = this.isInBreak(timestamp);\r\n        if (axisBreak && axisBreak.endDate) {\r\n            newDate = new Date(axisBreak.endDate.getTime());\r\n            $time.round(newDate, timeUnit, realIntervalCount, this._firstWeekDay, this._df.utc);\r\n            if (newDate.getTime() < axisBreak.endDate.getTime()) {\r\n                $time.add(newDate, timeUnit, realIntervalCount, this._df.utc);\r\n            }\r\n            timestamp = newDate.getTime();\r\n        }\r\n        // get duration between grid lines with break duration removed\r\n        var durationBreaksRemoved = this.adjustDifference(prevTimestamp, timestamp);\r\n        // calculate how many time units fit to this duration\r\n        var countBreaksRemoved = Math.round(durationBreaksRemoved / $time.getDuration(timeUnit));\r\n        // if less units fit, add one and repeat\r\n        if (countBreaksRemoved < realIntervalCount) {\r\n            return this.getGridDate(date, intervalCount + realIntervalCount);\r\n        }\r\n        return newDate;\r\n    };\r\n    /**\r\n     * [getBreaklessDate description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param axisBreak  [description]\r\n     * @param timeUnit   [description]\r\n     * @param count      [description]\r\n     * @return [description]\r\n     */\r\n    DateAxis.prototype.getBreaklessDate = function (axisBreak, timeUnit, count) {\r\n        var date = new Date(axisBreak.endValue);\r\n        $time.round(date, timeUnit, count, this._firstWeekDay, this._df.utc);\r\n        $time.add(date, timeUnit, count, this._df.utc);\r\n        var timestamp = date.getTime();\r\n        axisBreak = this.isInBreak(timestamp);\r\n        if (axisBreak) {\r\n            return this.getBreaklessDate(axisBreak, timeUnit, count);\r\n        }\r\n        return date;\r\n    };\r\n    /**\r\n     * (Re)validates all Axis elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     */\r\n    DateAxis.prototype.validateAxisElements = function () {\r\n        var _this = this;\r\n        if ($type.isNumber(this.max) && $type.isNumber(this.min)) {\r\n            this.calculateZoom();\r\n            // first regular items\r\n            var timestamp = this._gridDate.getTime();\r\n            var timeUnit = this._gridInterval.timeUnit;\r\n            var intervalCount = this._gridInterval.count;\r\n            var prevGridDate = $time.copy(this._gridDate);\r\n            var dataItemsIterator_1 = this._dataItemsIterator;\r\n            this.resetIterators();\r\n            var _loop_2 = function () {\r\n                var date = this_2.getGridDate($time.copy(prevGridDate), intervalCount);\r\n                timestamp = date.getTime();\r\n                var endDate = $time.copy(date); // you might think it's easier to add intervalduration to timestamp, however it won't work for months or years which are not of the same length\r\n                endDate = $time.add(endDate, timeUnit, intervalCount, this_2._df.utc);\r\n                var format = this_2.dateFormats.getKey(timeUnit);\r\n                if (this_2.markUnitChange && prevGridDate) {\r\n                    if ($time.checkChange(date, prevGridDate, this_2._nextGridUnit, this_2._df.utc)) {\r\n                        if (timeUnit !== \"year\") {\r\n                            format = this_2.periodChangeDateFormats.getKey(timeUnit);\r\n                        }\r\n                    }\r\n                }\r\n                var text = this_2._df.format(date, format);\r\n                var dataItem = dataItemsIterator_1.find(function (x) { return x.text === text; });\r\n                if (dataItem.__disabled) {\r\n                    dataItem.__disabled = false;\r\n                }\r\n                this_2.appendDataItem(dataItem);\r\n                dataItem.axisBreak = undefined;\r\n                dataItem.date = date;\r\n                dataItem.endDate = endDate;\r\n                dataItem.text = text;\r\n                this_2.validateDataElement(dataItem);\r\n                prevGridDate = date;\r\n            };\r\n            var this_2 = this;\r\n            while (timestamp <= this._maxZoomed) {\r\n                _loop_2();\r\n            }\r\n            // breaks later\r\n            var renderer_1 = this.renderer;\r\n            if (this._axisBreaks) {\r\n                $iter.each(this._axisBreaks.iterator(), function (axisBreak) {\r\n                    if (axisBreak.breakSize > 0) {\r\n                        var timeUnit_1 = axisBreak.gridInterval.timeUnit;\r\n                        var intervalCount_1 = axisBreak.gridInterval.count;\r\n                        // only add grid if gap is bigger then minGridDistance\r\n                        if ($math.getDistance(axisBreak.startPoint, axisBreak.endPoint) > renderer_1.minGridDistance * 4) {\r\n                            var timestamp_1 = axisBreak.gridDate.getTime();\r\n                            var prevGridDate_1;\r\n                            var count = 0;\r\n                            var _loop_3 = function () {\r\n                                var date = $time.copy(axisBreak.gridDate);\r\n                                timestamp_1 = $time.add(date, timeUnit_1, intervalCount_1 * count, _this._df.utc).getTime();\r\n                                count++;\r\n                                if (timestamp_1 > axisBreak.adjustedStartValue && timestamp_1 < axisBreak.adjustedEndValue) {\r\n                                    var endDate = $time.copy(date); // you might think it's easier to add intervalduration to timestamp, however it won't work for months or years which are not of the same length\r\n                                    endDate = $time.add(endDate, timeUnit_1, intervalCount_1, _this._df.utc);\r\n                                    var format = _this.dateFormats.getKey(timeUnit_1);\r\n                                    if (_this.markUnitChange && prevGridDate_1) {\r\n                                        if ($time.checkChange(date, prevGridDate_1, _this._nextGridUnit, _this._df.utc)) {\r\n                                            if (timeUnit_1 !== \"year\") {\r\n                                                format = _this.periodChangeDateFormats.getKey(timeUnit_1);\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    var text_1 = _this._df.format(date, format);\r\n                                    var dataItem = dataItemsIterator_1.find(function (x) { return x.text === text_1; });\r\n                                    if (dataItem.__disabled) {\r\n                                        dataItem.__disabled = false;\r\n                                    }\r\n                                    //this.processDataItem(dataItem);\r\n                                    _this.appendDataItem(dataItem);\r\n                                    dataItem.axisBreak = axisBreak;\r\n                                    axisBreak.dataItems.moveValue(dataItem);\r\n                                    dataItem.date = date;\r\n                                    dataItem.endDate = endDate;\r\n                                    dataItem.text = text_1;\r\n                                    prevGridDate_1 = date;\r\n                                    _this.validateDataElement(dataItem);\r\n                                }\r\n                            };\r\n                            while (timestamp_1 <= axisBreak.adjustedMax) {\r\n                                _loop_3();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Validates Axis data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem Data item\r\n     */\r\n    DateAxis.prototype.validateDataElement = function (dataItem) {\r\n        dataItem.itemIndex = this._axisItemCount;\r\n        this._axisItemCount++;\r\n        if ($type.isNumber(this.max) && $type.isNumber(this.min)) {\r\n            var renderer = this.renderer;\r\n            var timestamp = dataItem.value;\r\n            var endTimestamp = dataItem.endValue;\r\n            if (!$type.isNumber(endTimestamp)) {\r\n                endTimestamp = timestamp;\r\n            }\r\n            var position = this.valueToPosition(timestamp);\r\n            var endPosition = this.valueToPosition(endTimestamp);\r\n            var fillEndPosition = endPosition;\r\n            if (!dataItem.isRange && this._gridInterval.count > this.baseInterval.count) {\r\n                endPosition = position + (endPosition - position) / (this._gridInterval.count / this.baseInterval.count);\r\n            }\r\n            dataItem.position = position;\r\n            var tick = dataItem.tick;\r\n            if (tick && !tick.disabled) {\r\n                renderer.updateTickElement(tick, position, endPosition);\r\n            }\r\n            var grid = dataItem.grid;\r\n            if (grid && !grid.disabled) {\r\n                renderer.updateGridElement(grid, position, endPosition);\r\n            }\r\n            var fill = dataItem.axisFill;\r\n            if (fill && !fill.disabled) {\r\n                renderer.updateFillElement(fill, position, fillEndPosition);\r\n                if (!dataItem.isRange) {\r\n                    this.fillRule(dataItem);\r\n                }\r\n            }\r\n            var mask = dataItem.mask;\r\n            if (mask) {\r\n                renderer.updateFillElement(mask, position, endPosition);\r\n            }\r\n            if (dataItem.bullet) {\r\n                renderer.updateBullet(dataItem.bullet, position, endPosition);\r\n            }\r\n            var label = dataItem.label;\r\n            if (label && !label.disabled) {\r\n                var location_1 = label.location;\r\n                if (location_1 == 0) {\r\n                    if (this._gridInterval.count == 1 && this._gridInterval.timeUnit != \"week\" && !dataItem.isRange) {\r\n                        location_1 = 0.5;\r\n                    }\r\n                    else {\r\n                        location_1 = 0;\r\n                    }\r\n                }\r\n                renderer.updateLabelElement(label, position, endPosition, location_1);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(DateAxis.prototype, \"baseDuration\", {\r\n        /**\r\n         * A duration in milliseconds of the `baseInterval`.\r\n         *\r\n         * @return Duration (ms)\r\n         */\r\n        get: function () {\r\n            return $time.getDuration(this.baseInterval.timeUnit, this.baseInterval.count);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adjusts min/max values.\r\n     *\r\n     * @ignore Exclude from docs.\r\n     * @todo Description (review)\r\n     * @param min  Min timestamp\r\n     * @param max  Max timestamp\r\n     * @return Adjusted min/max step\r\n     */\r\n    DateAxis.prototype.adjustMinMax = function (min, max) {\r\n        return { min: min, max: max, step: this.baseDuration };\r\n    };\r\n    /**\r\n     * Adjusts the minimum timestamp as per cell start location.\r\n     *\r\n     * @param value  Value\r\n     * @return Adjusted value\r\n     */\r\n    DateAxis.prototype.fixMin = function (value) {\r\n        // like this because months are not equal\r\n        var interval = this.baseInterval;\r\n        var startTime = $time.round(new Date(value), interval.timeUnit, interval.count, this._firstWeekDay, this._df.utc).getTime();\r\n        var endTime = $time.add(new Date(startTime), interval.timeUnit, interval.count, this._df.utc).getTime();\r\n        return startTime + (endTime - startTime) * this.startLocation;\r\n    };\r\n    /**\r\n     * Adjusts the maximum timestamp as per cell start location.\r\n     *\r\n     * @param value  Value\r\n     * @return Adjusted value\r\n     */\r\n    DateAxis.prototype.fixMax = function (value) {\r\n        // like this because months are not equal\r\n        var interval = this.baseInterval;\r\n        var startTime = $time.round(new Date(value), interval.timeUnit, interval.count, this._firstWeekDay, this._df.utc).getTime();\r\n        var endTime = $time.add(new Date(startTime), interval.timeUnit, interval.count, this._df.utc).getTime();\r\n        return startTime + (endTime - startTime) * this.endLocation;\r\n    };\r\n    /**\r\n     * [chooseInterval description]\r\n     *\r\n     * @ignore Exclude from docs.\r\n     * @todo Description\r\n     * @param index      [description]\r\n     * @param duration   [description]\r\n     * @param gridCount  [description]\r\n     * @return [description]\r\n     */\r\n    DateAxis.prototype.chooseInterval = function (index, duration, gridCount, intervals) {\r\n        if (!intervals) {\r\n            intervals = this.gridIntervals;\r\n        }\r\n        var gridInterval = intervals.getIndex(index);\r\n        var intervalDuration = $time.getDuration(gridInterval.timeUnit, gridInterval.count);\r\n        var lastIndex = intervals.length - 1;\r\n        if (index >= lastIndex) {\r\n            return tslib_1.__assign({}, intervals.getIndex(lastIndex));\r\n        }\r\n        var count = Math.ceil(duration / intervalDuration);\r\n        if (duration < intervalDuration && index > 0) {\r\n            return tslib_1.__assign({}, intervals.getIndex(index - 1));\r\n        }\r\n        if (count <= gridCount) {\r\n            return tslib_1.__assign({}, intervals.getIndex(index));\r\n        }\r\n        else {\r\n            if (index + 1 < intervals.length) {\r\n                return this.chooseInterval(index + 1, duration, gridCount, intervals);\r\n            }\r\n            else {\r\n                return tslib_1.__assign({}, intervals.getIndex(index));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Formats the value according to axis' own [[DateFormatter]].\r\n     *\r\n     * @param value  Source value\r\n     * @return Formatted value\r\n     */\r\n    DateAxis.prototype.formatLabel = function (value) {\r\n        return this._df.format(value);\r\n    };\r\n    /**\r\n     * Converts a Date to an asbolute pixel position within Axis.\r\n     *\r\n     * @param date  Date\r\n     * @return Position (px)\r\n     */\r\n    DateAxis.prototype.dateToPosition = function (date) {\r\n        return this.valueToPosition(date.getTime());\r\n    };\r\n    /**\r\n     * Converts a numeric timestamp or a `Date` to a relative position on axis.\r\n     *\r\n     * @param date  Date or a timestamp\r\n     * @return Relative position\r\n     */\r\n    DateAxis.prototype.anyToPosition = function (date) {\r\n        if (date instanceof Date) {\r\n            return this.dateToPosition(date);\r\n        }\r\n        else {\r\n            return this.valueToPosition(date);\r\n        }\r\n    };\r\n    /**\r\n     * Converts date to orientation point (x, y, angle) on axis\r\n     *\r\n     * @param date Date\r\n     * @return IOrientationPoint\r\n     */\r\n    DateAxis.prototype.dateToPoint = function (date) {\r\n        var position = this.dateToPosition(date);\r\n        var point = this.renderer.positionToPoint(position);\r\n        var angle = this.renderer.positionToAngle(position);\r\n        return { x: point.x, y: point.y, angle: angle };\r\n    };\r\n    /**\r\n     * Converts a numeric value to orientation (x, y, angle) point on axis\r\n     *\r\n     * @param value  Value\r\n     * @return Orientation point\r\n     */\r\n    DateAxis.prototype.anyToPoint = function (date) {\r\n        if (date instanceof Date) {\r\n            return this.dateToPoint(date);\r\n        }\r\n        else {\r\n            return this.valueToPoint(date);\r\n        }\r\n    };\r\n    /**\r\n     * Converts pixel position within Axis to a corresponding Date.\r\n     *\r\n     * @param position  Position (px)\r\n     * @return Date\r\n     */\r\n    DateAxis.prototype.positionToDate = function (position) {\r\n        return new Date(this.positionToValue(position));\r\n    };\r\n    /**\r\n     * Returns the relative position on axis for series' data item's value.\r\n     *\r\n     * @since 4.5.14\r\n     * @param  dataItem  Data item\r\n     * @param  key       Data field to get value from\r\n     * @param  location  Location (0-1)\r\n     * @return           Relative position\r\n     */\r\n    DateAxis.prototype.getPositionX = function (dataItem, key, location, stackKey, range) {\r\n        var value = this.getTimeByLocation(dataItem, key, location);\r\n        //let stack: number = dataItem.getValue(\"valueX\", \"stack\");\r\n        if (!$type.isNumber(value)) {\r\n            value = this.baseValue;\r\n        }\r\n        var position = this.valueToPosition(value);\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return position;\r\n    };\r\n    /**\r\n     * Returns relative position on axis for series' data item's value.\r\n     *\r\n     * @since 4.5.14\r\n     * @param  dataItem  Data item\r\n     * @param  key       Data field to get value from\r\n     * @param  location  Location (0-1)\r\n     * @return           Relative position\r\n     */\r\n    DateAxis.prototype.getPositionY = function (dataItem, key, location, stackKey, range) {\r\n        var value = this.getTimeByLocation(dataItem, key, location);\r\n        var stack = dataItem.getValue(\"valueX\", \"stack\");\r\n        if (!$type.isNumber(value)) {\r\n            value = this.baseValue;\r\n        }\r\n        var position = this.valueToPosition(value + stack);\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return position;\r\n    };\r\n    /**\r\n     * Returns an angle for series data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       Data field to get value from\r\n     * @param location  Location (0-1)\r\n     * @param stackKey  Stack ID\r\n     * @param range Range to fit in\r\n     * @return Angle\r\n     */\r\n    DateAxis.prototype.getAngle = function (dataItem, key, location, stackKey, range) {\r\n        var value = this.getTimeByLocation(dataItem, key, location);\r\n        var stack = dataItem.getValue(stackKey, \"stack\");\r\n        if (!$type.isNumber(value)) {\r\n            value = this.baseValue;\r\n        }\r\n        var position = this.valueToPosition(value + stack);\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return this.positionToAngle(position);\r\n    };\r\n    /**\r\n     * [getTimeByLocation description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param dataItem  [description]\r\n     * @param key       [description]\r\n     * @param location  [description]\r\n     * @return [description]\r\n     */\r\n    DateAxis.prototype.getTimeByLocation = function (dataItem, key, location) {\r\n        if (!$type.hasValue(key)) {\r\n            return;\r\n        }\r\n        if (!$type.isNumber(location)) {\r\n            location = dataItem.workingLocations[key];\r\n            if (!$type.isNumber(location)) {\r\n                location = 0;\r\n            }\r\n        }\r\n        var startTime = dataItem.values[key][\"open\"];\r\n        var endTime = dataItem.values[key][\"close\"];\r\n        var workingValue = dataItem.values[key].workingValue;\r\n        var value = dataItem.values[key].value;\r\n        var difference = value - workingValue;\r\n        startTime -= difference;\r\n        endTime -= difference;\r\n        if ($type.isNumber(startTime) && $type.isNumber(endTime)) {\r\n            return startTime + (endTime - startTime) * location;\r\n        }\r\n    };\r\n    /**\r\n     * Processes a related series' data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param dataItem  Data item\r\n     */\r\n    DateAxis.prototype.processSeriesDataItem = function (dataItem, axisLetter) {\r\n        var series = dataItem.component;\r\n        var time;\r\n        var date = dataItem[\"date\" + axisLetter];\r\n        if (date) {\r\n            time = date.getTime();\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        var openDate = dataItem[\"openDate\" + axisLetter];\r\n        var prevSeriesTime = this._prevSeriesTime;\r\n        var openTime;\r\n        if (openDate) {\r\n            openTime = openDate.getTime();\r\n        }\r\n        if ($type.isNumber(openTime)) {\r\n            var difference = Math.abs(time - openTime);\r\n            if (this._minDifference[series.uid] > difference) {\r\n                this._minDifference[series.uid] = difference;\r\n            }\r\n        }\r\n        var differece = time - prevSeriesTime;\r\n        if (differece > 0) {\r\n            if (this._minDifference[series.uid] > differece) {\r\n                this._minDifference[series.uid] = differece;\r\n            }\r\n        }\r\n        this._prevSeriesTime = time;\r\n        if (series._baseInterval[this.uid]) {\r\n            this.postProcessSeriesDataItem(dataItem);\r\n        }\r\n        else {\r\n            if (this._baseInterval) {\r\n                series._baseInterval[this.uid] = this._baseInterval;\r\n                this.postProcessSeriesDataItem(dataItem);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * [updateAxisBySeries description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    DateAxis.prototype.updateAxisBySeries = function () {\r\n        _super.prototype.updateAxisBySeries.call(this);\r\n        var baseInterval = this.chooseInterval(0, this.minDifference, 1);\r\n        // handle short months\r\n        if (this.minDifference >= $time.getDuration(\"day\", 27) && baseInterval.timeUnit == \"week\") {\r\n            baseInterval.timeUnit = \"month\";\r\n            baseInterval.count = 1;\r\n        }\r\n        if (baseInterval.timeUnit == \"month\") {\r\n            if (this.minDifference >= $time.getDuration(\"day\", 29 * 2) && baseInterval.count == 1) {\r\n                baseInterval.count = 2;\r\n            }\r\n            if (this.minDifference >= $time.getDuration(\"day\", 29 * 3) && baseInterval.count == 2) {\r\n                baseInterval.count = 3;\r\n            }\r\n            if (this.minDifference >= $time.getDuration(\"day\", 29 * 6) && baseInterval.count == 5) {\r\n                baseInterval.count = 6;\r\n            }\r\n        }\r\n        // handle daylight saving\r\n        if (this.minDifference >= $time.getDuration(\"hour\", 23) && baseInterval.timeUnit == \"hour\") {\r\n            baseInterval.timeUnit = \"day\";\r\n            baseInterval.count = 1;\r\n        }\r\n        if (this.minDifference >= $time.getDuration(\"week\", 1) - $time.getDuration(\"hour\", 1) && baseInterval.timeUnit == \"day\") {\r\n            baseInterval.timeUnit = \"week\";\r\n            baseInterval.count = 1;\r\n        }\r\n        if (this.minDifference >= $time.getDuration(\"year\", 1) - $time.getDuration(\"day\", 1.01) && baseInterval.timeUnit == \"month\") {\r\n            baseInterval.timeUnit = \"year\";\r\n            baseInterval.count = 1;\r\n        }\r\n        this._baseIntervalReal = baseInterval;\r\n        this._mainBaseInterval = baseInterval;\r\n        // no need to invalidate\r\n    };\r\n    Object.defineProperty(DateAxis.prototype, \"baseInterval\", {\r\n        /**\r\n         * @return Base interval\r\n         */\r\n        get: function () {\r\n            if (this._groupInterval) {\r\n                return this._groupInterval;\r\n            }\r\n            else if (this._baseInterval) {\r\n                return this._baseInterval;\r\n            }\r\n            else {\r\n                return this._baseIntervalReal;\r\n            }\r\n        },\r\n        /**\r\n         * A base interval (granularity) of data.\r\n         *\r\n         * Used to indicate what are the base units of your data.\r\n         *\r\n         * For example, if you have a data set that has a data point every 5 minutes,\r\n         * you may want to set this to `{ timeUnit: \"minute\", count: 5 }`.\r\n         *\r\n         * If not set, the Axis will try to determine the setting by its own, looking\r\n         * at actual data.\r\n         *\r\n         * For best results, try to follow these values for `count`:\r\n         *\r\n         * When unit is \"month\", use 12 / count = round number\r\n         * When unit is \"hour\", use 24 / count = round number\r\n         * When unit is \"second\" and \"minute\", use 60 / count = round number\r\n         *\r\n         * @param timeInterval base interval\r\n         */\r\n        set: function (timeInterval) {\r\n            if (JSON.stringify(this._baseInterval) != JSON.stringify(timeInterval)) {\r\n                this._baseInterval = timeInterval;\r\n                this._mainBaseInterval = timeInterval;\r\n                if (!$type.isNumber(timeInterval.count)) {\r\n                    timeInterval.count = 1;\r\n                }\r\n                this.invalidate();\r\n                this.postProcessSeriesDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxis.prototype, \"mainBaseInterval\", {\r\n        /**\r\n         * Indicates granularity of the data of source (unaggregated) data.\r\n         *\r\n         * @since 4.7.0\r\n         * @return Granularity of the main data set\r\n         */\r\n        get: function () {\r\n            if (this._baseInterval) {\r\n                return this._baseInterval;\r\n            }\r\n            else if (this._mainBaseInterval) {\r\n                return this._mainBaseInterval;\r\n            }\r\n            else {\r\n                return this._baseIntervalReal;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxis.prototype, \"skipEmptyPeriods\", {\r\n        /**\r\n         * @return Remove empty stretches of time?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"skipEmptyPeriods\");\r\n        },\r\n        /**\r\n         * If enabled, axis will automatically collapse empty (without data points)\r\n         * periods of time, i.e. weekends.\r\n         *\r\n         * An \"empty\" period is considered a stretch of time in the length of current\r\n         * `baseInterval` without a single data point in it.\r\n         *\r\n         * For each such empty period, axis will automatically create an\r\n         * [[AxisBreak]]. By default they will be invisible. You can still configure\r\n         * them by accessing `axis.breaks.template`.\r\n         *\r\n         * [More info about breaks](https://www.amcharts.com/docs/v4/concepts/axes/#Breaks).\r\n         *\r\n         * Important notes:\r\n         * * If you set this property to `true`, you can not add your custom axis breaks to this axis anymore.\r\n         * * Using this feature affects performance. Use only if you need it.\r\n         * * Setting this to `true` will reset appearance of breaks. If you want to modify appearance, do it *after* you set `skipEmptyPeriods`.\r\n         *\r\n         * @default false\r\n         * @param value  Remove empty stretches of time?\r\n         */\r\n        set: function (value) {\r\n            if (value) {\r\n                var breakTemplate = this.axisBreaks.template;\r\n                breakTemplate.startLine.disabled = true;\r\n                breakTemplate.endLine.disabled = true;\r\n                breakTemplate.fillShape.disabled = true;\r\n                breakTemplate.breakSize = 0;\r\n            }\r\n            else {\r\n                if (this._gapBreaks) {\r\n                    this.axisBreaks.clear();\r\n                    this._gapBreaks = false;\r\n                }\r\n            }\r\n            if (this.setPropertyValue(\"skipEmptyPeriods\", value)) {\r\n                this.invalidate();\r\n                this.postProcessSeriesDataItems();\r\n                this.invalidateSeries();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxis.prototype, \"tooltipDateFormat\", {\r\n        /**\r\n         * @return Date format\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tooltipDateFormat\");\r\n        },\r\n        /**\r\n         * A special date format to apply axis tooltips.\r\n         *\r\n         * Will use same format as for labels, if not set.\r\n         *\r\n         * @param value  Date format\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tooltipDateFormat\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxis.prototype, \"markUnitChange\", {\r\n        /**\r\n         * @return Use different format for period beginning?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"markUnitChange\");\r\n        },\r\n        /**\r\n         * Use `periodChangeDateFormats` to apply different formats to the first\r\n         * label in bigger time unit.\r\n         *\r\n         * @default true\r\n         * @param value  Use different format for period beginning?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"markUnitChange\", value)) {\r\n                this.invalidateData();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns text to show in a tooltip, based on specific relative position\r\n     * within axis.\r\n     *\r\n     * The label will be formatted as per [[DateFormatter]] set for the whole\r\n     * chart, or explicitly for this Axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Position\r\n     * @return Label (formatted date)\r\n     */\r\n    DateAxis.prototype.getTooltipText = function (position) {\r\n        var text;\r\n        var date = this.positionToDate(position);\r\n        date = $time.round(date, this.baseInterval.timeUnit, this.baseInterval.count, this._firstWeekDay, this._df.utc, new Date(this.min));\r\n        if ($type.hasValue(this.tooltipDateFormat)) {\r\n            text = this._df.format(date, this.tooltipDateFormat);\r\n        }\r\n        else {\r\n            var dateFormat = this.dateFormats.getKey(this.baseInterval.timeUnit);\r\n            if (dateFormat) {\r\n                text = this._df.format(date, dateFormat);\r\n            }\r\n            else {\r\n                text = this.getPositionLabel(position);\r\n            }\r\n        }\r\n        if (!this._adapterO) {\r\n            return text;\r\n        }\r\n        else {\r\n            return this._adapterO.apply(\"getTooltipText\", text);\r\n        }\r\n    };\r\n    /**\r\n     * Takes an absolute position within axis and adjust it to a specific position within base interval. (cell)\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position Source position\r\n     * @param location  Location in the cell\r\n     * @return Adjusted position\r\n     */\r\n    DateAxis.prototype.roundPosition = function (position, location, axisLocation) {\r\n        var baseInterval = this.baseInterval;\r\n        var timeUnit = baseInterval.timeUnit;\r\n        var count = baseInterval.count;\r\n        var date = this.positionToDate(position);\r\n        $time.round(date, timeUnit, count, this._firstWeekDay, this._df.utc);\r\n        if (location > 0) {\r\n            $time.add(date, timeUnit, location * count, this._df.utc);\r\n        }\r\n        if (axisLocation > 0 && axisLocation < 1) {\r\n            date.setTime(date.getTime() + this.baseDuration * axisLocation);\r\n        }\r\n        if (this.isInBreak(date.getTime())) {\r\n            while (date.getTime() < this.max) {\r\n                $time.add(date, timeUnit, count, this._df.utc);\r\n                if (!this.isInBreak(date.getTime())) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return this.dateToPosition(date);\r\n    };\r\n    /**\r\n     * Returns an relative position of the start of the cell (period), that specific position value falls into.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param position  Relative position\r\n     * @return Cell start relative position\r\n     */\r\n    DateAxis.prototype.getCellStartPosition = function (position) {\r\n        return this.roundPosition(position, 0);\r\n    };\r\n    /**\r\n     * Returns an relative position of the end of the cell (period), that specific position value falls into.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param position  Relative position\r\n     * @return Cell end relative position\r\n     */\r\n    DateAxis.prototype.getCellEndPosition = function (position) {\r\n        return this.roundPosition(position, 1);\r\n        //return this.dateToPosition($time.add(this.positionToDate(this.roundPosition(position, 1)), this.baseInterval.timeUnit, this.baseInterval.count));\r\n    };\r\n    /**\r\n     * Returns a Series data item that corresponds to the specific pixel position\r\n     * of the Axis.\r\n     *\r\n     * If `findNearest` (third parameter) is set to `true`, the method will try\r\n     * to locate nearest available data item if none is found directly under\r\n     * `position`.\r\n     *\r\n     * @param series       Series\r\n     * @param position     Position (px)\r\n     * @param findNearest  Should axis try to find nearest tooltip if there is no data item at exact position\r\n     * @return Data item\r\n     */\r\n    DateAxis.prototype.getSeriesDataItem = function (series, position, findNearest) {\r\n        var value = this.positionToValue(position);\r\n        var date = $time.round(new Date(value), this.baseInterval.timeUnit, this.baseInterval.count, this._firstWeekDay, this._df.utc);\r\n        var dataItemsByAxis = series.dataItemsByAxis.getKey(this.uid);\r\n        var dataItem = dataItemsByAxis.getKey(date.getTime().toString());\r\n        // todo:  alternatively we can find closiest here\r\n        if (!dataItem && findNearest) {\r\n            var key_1;\r\n            if (this.axisLetter == \"Y\") {\r\n                key_1 = \"dateY\";\r\n            }\r\n            else {\r\n                key_1 = \"dateX\";\r\n            }\r\n            dataItem = series.dataItems.getIndex(series.dataItems.findClosestIndex(date.getTime(), function (x) {\r\n                if (x[key_1]) {\r\n                    return x[key_1].getTime();\r\n                }\r\n                else {\r\n                    return -Infinity;\r\n                }\r\n            }, \"any\"));\r\n        }\r\n        return dataItem;\r\n    };\r\n    /**\r\n     * Returns a formatted date based on position in axis scale.\r\n     *\r\n     * Please note that `position` represents position within axis which may be\r\n     * zoomed and not correspond to Cursor's `position`.\r\n     *\r\n     * To convert Cursor's `position` to Axis' `position` use `toAxisPosition()` method.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v4/tutorials/tracking-cursors-position-via-api/#Tracking_Cursor_s_position} For more information about cursor tracking.\r\n     * @param position  Relative position on axis (0-1)\r\n     * @return Position label\r\n     */\r\n    DateAxis.prototype.getPositionLabel = function (position) {\r\n        // @todo Better format recognition\r\n        var date = this.positionToDate(position);\r\n        return this._df.format(date, this.getCurrentLabelFormat());\r\n    };\r\n    /**\r\n     * Returns label date format based on currently used time units\r\n     *\r\n     * @return Format\r\n     */\r\n    DateAxis.prototype.getCurrentLabelFormat = function () {\r\n        return this.dateFormats.getKey(this._gridInterval ? this._gridInterval.timeUnit : \"day\");\r\n    };\r\n    /**\r\n     * Initializes an Axis renderer.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    DateAxis.prototype.initRenderer = function () {\r\n        _super.prototype.initRenderer.call(this);\r\n        var renderer = this.renderer;\r\n        if (renderer) {\r\n            // Set defaults\r\n            renderer.ticks.template.location = 0;\r\n            renderer.grid.template.location = 0;\r\n            renderer.labels.template.location = 0;\r\n            renderer.baseGrid.disabled = true;\r\n        }\r\n    };\r\n    Object.defineProperty(DateAxis.prototype, \"basePoint\", {\r\n        /**\r\n         * Coordinates of the actual axis start.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Base point\r\n         */\r\n        get: function () {\r\n            return { x: 0, y: 0 };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    DateAxis.prototype.animateMinMax = function (min, max) {\r\n        var _this = this;\r\n        var animation = this.animate([{ property: \"_minAdjusted\", from: this._minAdjusted, to: min }, { property: \"_maxAdjusted\", from: this._maxAdjusted, to: max }], this.rangeChangeDuration, this.rangeChangeEasing);\r\n        animation.events.on(\"animationprogress\", function () {\r\n            _this.dispatch(\"extremeschanged\");\r\n        });\r\n        return animation;\r\n    };\r\n    /**\r\n     * Invalidates axis data items when series extremes change\r\n     */\r\n    DateAxis.prototype.handleExtremesChange = function () {\r\n        _super.prototype.handleExtremesChange.call(this);\r\n        if (this.groupData) {\r\n            var id = this.baseInterval.timeUnit + this.baseInterval.count;\r\n            this.groupMin[id] = this.min;\r\n            this.groupMax[id] = this.max;\r\n        }\r\n    };\r\n    /**\r\n     * Zooms axis to specific Dates.\r\n     *\r\n     * @param startDate       Start date\r\n     * @param endValue        End date\r\n     * @param skipRangeEvent  Do not invoke events\r\n     * @param instantly       Do not play zoom animations\r\n     */\r\n    DateAxis.prototype.zoomToDates = function (startDate, endDate, skipRangeEvent, instantly, adjust) {\r\n        startDate = this._df.parse(startDate);\r\n        endDate = this._df.parse(endDate);\r\n        this.zoomToValues(startDate.getTime(), endDate.getTime(), skipRangeEvent, instantly, adjust);\r\n    };\r\n    /**\r\n     * Zooms axis to specific values.\r\n     *\r\n     * @param startValue      Start value\r\n     * @param endValue        End value\r\n     * @param skipRangeEvent  Do not invoke events\r\n     * @param instantly       Do not play zoom animations\r\n     */\r\n    DateAxis.prototype.zoomToValues = function (startValue, endValue, skipRangeEvent, instantly, adjust) {\r\n        var _this = this;\r\n        if (!this.groupData) {\r\n            var start = (startValue - this.min) / (this.max - this.min);\r\n            var end = (endValue - this.min) / (this.max - this.min);\r\n            this.zoom({ start: start, end: end }, skipRangeEvent, instantly);\r\n        }\r\n        else {\r\n            var difference = this.adjustDifference(startValue, endValue);\r\n            var isEnd = false;\r\n            if (endValue == this.max) {\r\n                isEnd = true;\r\n            }\r\n            var isStart = false;\r\n            if (startValue == this.min) {\r\n                isStart = true;\r\n            }\r\n            if ($type.hasValue(difference)) {\r\n                var mainBaseInterval = this.mainBaseInterval;\r\n                var groupInterval = this.chooseInterval(0, difference, this.groupCount, this.groupIntervals);\r\n                if ((groupInterval.timeUnit == mainBaseInterval.timeUnit && groupInterval.count < mainBaseInterval.count) || $time.getDuration(groupInterval.timeUnit, 1) < $time.getDuration(mainBaseInterval.timeUnit, 1)) {\r\n                    groupInterval = tslib_1.__assign({}, mainBaseInterval);\r\n                }\r\n                var id = groupInterval.timeUnit + groupInterval.count;\r\n                var min_1 = this.groupMin[id];\r\n                var max_1 = this.groupMax[id];\r\n                if (!$type.isNumber(min_1) || !$type.isNumber(max_1)) {\r\n                    min_1 = Number.POSITIVE_INFINITY;\r\n                    max_1 = Number.NEGATIVE_INFINITY;\r\n                    this.series.each(function (series) {\r\n                        var seriesMin = series.min(_this);\r\n                        var seriesMax = series.max(_this);\r\n                        if (seriesMin < min_1) {\r\n                            min_1 = seriesMin;\r\n                        }\r\n                        if (seriesMax < max_1) {\r\n                            max_1 = seriesMax;\r\n                        }\r\n                    });\r\n                    this.groupMin[id] = min_1;\r\n                    this.groupMax[id] = max_1;\r\n                }\r\n                startValue = $math.fitToRange(startValue, min_1, max_1);\r\n                endValue = $math.fitToRange(endValue, min_1, max_1);\r\n                if (adjust) {\r\n                    if (isEnd) {\r\n                        startValue = endValue - difference;\r\n                        startValue = $math.fitToRange(startValue, min_1, max_1);\r\n                    }\r\n                    if (isStart) {\r\n                        endValue = startValue + difference;\r\n                        endValue = $math.fitToRange(endValue, min_1, max_1);\r\n                    }\r\n                }\r\n                var start = (startValue - min_1) / (max_1 - min_1);\r\n                var end = (endValue - min_1) / (max_1 - min_1);\r\n                this.zoom({ start: start, end: end }, skipRangeEvent, instantly);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Adds `baseInterval` to \"as is\" fields.\r\n     *\r\n     * @param field  Field name\r\n     * @return Assign as is?\r\n     */\r\n    DateAxis.prototype.asIs = function (field) {\r\n        return field == \"baseInterval\" || _super.prototype.asIs.call(this, field);\r\n    };\r\n    /**\r\n     * Copies all properties and related data from a different instance of Axis.\r\n     *\r\n     * @param source Source Axis\r\n     */\r\n    DateAxis.prototype.copyFrom = function (source) {\r\n        var _this = this;\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.dateFormats = source.dateFormats;\r\n        this.periodChangeDateFormats = source.periodChangeDateFormats;\r\n        this.groupIntervals.clear();\r\n        source.groupIntervals.each(function (interval) {\r\n            _this.groupIntervals.push(tslib_1.__assign({}, interval));\r\n        });\r\n        this.gridIntervals.clear();\r\n        source.gridIntervals.each(function (interval) {\r\n            _this.gridIntervals.push(tslib_1.__assign({}, interval));\r\n        });\r\n        if (source._baseInterval) {\r\n            this.baseInterval = source._baseInterval;\r\n        }\r\n    };\r\n    /**\r\n     * Shows Axis tooltip at specific relative position within Axis. (0-1)\r\n     *\r\n     * @param position Position (0-1)\r\n     * @param local or global position\r\n     */\r\n    DateAxis.prototype.showTooltipAtPosition = function (position, local) {\r\n        var _this = this;\r\n        if (!local) {\r\n            position = this.toAxisPosition(position);\r\n        }\r\n        if (this.snapTooltip) {\r\n            // rounding is not good, pen/aac4e7f66f019d36b2447f050c600c13 (no last tootltip shown)\r\n            var actualDate = this.positionToDate(position); //$time.round(this.positionToDate(position), this.baseInterval.timeUnit, 1, this.getFirstWeekDay(), this.dateFormatter.utc);\r\n            var actualTime_1 = actualDate.getTime();\r\n            var closestDate_1;\r\n            this.series.each(function (series) {\r\n                if (series.baseAxis == _this) {\r\n                    var dataItem = _this.getSeriesDataItem(series, position, true);\r\n                    if (dataItem) {\r\n                        var date = void 0;\r\n                        if (series.xAxis == _this) {\r\n                            date = dataItem.dateX;\r\n                        }\r\n                        if (series.yAxis == _this) {\r\n                            date = dataItem.dateY;\r\n                        }\r\n                        if (!closestDate_1) {\r\n                            closestDate_1 = date;\r\n                        }\r\n                        else {\r\n                            if (Math.abs(closestDate_1.getTime() - actualTime_1) > Math.abs(date.getTime() - actualTime_1)) {\r\n                                closestDate_1 = date;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (closestDate_1) {\r\n                var closestTime_1 = closestDate_1.getTime();\r\n                closestDate_1 = $time.round(new Date(closestTime_1), this.baseInterval.timeUnit, this.baseInterval.count, this._firstWeekDay, this._df.utc);\r\n                closestTime_1 = closestDate_1.getTime();\r\n                var tooltipLocation = this.renderer.tooltipLocation;\r\n                if (tooltipLocation == 0) {\r\n                    tooltipLocation = 0.0001;\r\n                }\r\n                closestDate_1 = new Date(closestDate_1.getTime() + this.baseDuration * tooltipLocation);\r\n                position = this.dateToPosition(closestDate_1);\r\n                this.series.each(function (series) {\r\n                    var dataItem = series.dataItemsByAxis.getKey(_this.uid).getKey(closestTime_1 + series.currentDataSetId);\r\n                    var point = series.showTooltipAtDataItem(dataItem);\r\n                    if (point) {\r\n                        _this.chart._seriesPoints.push({ series: series, point: point });\r\n                    }\r\n                    else {\r\n                        // check, otherwise column tooltip will be hidden\r\n                        if (series.tooltipText || series.tooltipHTML) {\r\n                            series.hideTooltip();\r\n                        }\r\n                    }\r\n                });\r\n                //this.chart.sortSeriesTooltips(seriesPoints);\r\n            }\r\n        }\r\n        _super.prototype.showTooltipAtPosition.call(this, position, true);\r\n    };\r\n    Object.defineProperty(DateAxis.prototype, \"snapTooltip\", {\r\n        /**\r\n         * @return Should snap?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"snapTooltip\");\r\n        },\r\n        /**\r\n         * Should the nearest tooltip be shown if no data item is found on the\r\n         * current cursor position.\r\n         *\r\n         * @default true\r\n         * @param value  Should snap?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"snapTooltip\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxis.prototype, \"groupData\", {\r\n        /**\r\n         * @return Group data points?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"groupData\");\r\n        },\r\n        /**\r\n         * Indicates if data should be aggregated to composide data items if there\r\n         * are more data items in selected range than `groupCount`.\r\n         *\r\n         * Grouping will occur automatically, based on current selection range, and\r\n         * will change dynamically when user zooms in/out the chart.\r\n         *\r\n         * NOTE: This works only if [[DateAxis]] is base axis of an [[XYSeries]].\r\n         *\r\n         * The related [[XYSeries]] also needs to be set up to take advantage of, by\r\n         * setting its [`groupFields`](https://www.amcharts.com/docs/v4/reference/xyseries/#groupFields_property).\r\n         *\r\n         * The group intervals to aggregate data to is defined by `groupIntervals`\r\n         * property.\r\n         *\r\n         * ```TypeScript\r\n         * let dateAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n         * dateAxis.groupData = true;\r\n         *\r\n         * let valueAxis = chart.xAxes.push(new am4charts.valueAxis());\r\n         *\r\n         * let series = chart.series.push(new am4charts.LineSeries());\r\n         * series.dataFields.dateX = \"date\";\r\n         * series.dataFields.valueY = \"value\";\r\n         * series.groupFields.valueY = \"average\";\r\n         * ```\r\n         * ```JavaScript\r\n         * var dateAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n         * dateAxis.groupData = true;\r\n         *\r\n         * var valueAxis = chart.xAxes.push(new am4charts.valueAxis());\r\n         *\r\n         * var series = chart.series.push(new am4charts.LineSeries());\r\n         * series.dataFields.dateX = \"date\";\r\n         * series.dataFields.valueY = \"value\";\r\n         * series.groupFields.valueY = \"average\";\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"xAxes\": [{\r\n         *     \"type\": \"DateAxis\",\r\n         *     \"groupData\": true\r\n         *   }],\r\n         *   \"yAxes\": [{\r\n         *     \"type\": \"ValueAxis\"\r\n         *   }],\r\n         *   \"series\": [{\r\n         *     \"type\": \"LineSeries\",\r\n         *     \"dataFields\": {\r\n         *       \"dateX\": \"date\",\r\n         *       \"valueY\": \"value\"\r\n         *     },\r\n         *     \"groupFields\": {\r\n         *       \"valueY\": \"average\"\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @default false\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/date-axis/#Dynamic_data_item_grouping} for more information about dynamic data item grouping.\r\n         * @since 4.7.0\r\n         * @param  value  Group data points?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"groupData\", value)) {\r\n                this.series.each(function (series) {\r\n                    series.setDataSet(\"\");\r\n                });\r\n                this._currentDataSetId = \"\";\r\n                this._groupInterval = undefined;\r\n                this.invalidate();\r\n                this.invalidateSeries();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxis.prototype, \"groupCount\", {\r\n        /**\r\n         * @return Number of data items\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"groupCount\");\r\n        },\r\n        /**\r\n         * Indicates threshold of data items in selected range at which to start\r\n         * aggregating data items if `groupData = true`.\r\n         *\r\n         * @default 200\r\n         * @since 4.7.0\r\n         * @param  value  Number of data items\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"groupCount\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateAxis.prototype, \"gridInterval\", {\r\n        /**\r\n         * Current grid interval.\r\n         *\r\n         * @return Grid interval\r\n         */\r\n        get: function () {\r\n            return this._gridInterval;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    DateAxis.prototype.makeGap = function (dataItem, previous) {\r\n        var series = dataItem.component;\r\n        if (dataItem && previous) {\r\n            if (!series.connect && $type.isNumber(series.autoGapCount)) {\r\n                if (series.baseAxis == this) {\r\n                    var date = dataItem.dates[\"date\" + this.axisLetter];\r\n                    var prevDate = previous.dates[\"date\" + this.axisLetter];\r\n                    if (date && prevDate) {\r\n                        var time = date.getTime();\r\n                        var prevTime = prevDate.getTime();\r\n                        if (time - prevTime > series.autoGapCount * this.baseDuration) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(DateAxis.prototype, \"baseValue\", {\r\n        /**\r\n         * @return base value\r\n         */\r\n        get: function () {\r\n            return this.min;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return DateAxis;\r\n}(ValueAxis));\r\nexport { DateAxis };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"DateAxis\"] = DateAxis;\r\nregistry.registeredClasses[\"DateAxisDataItem\"] = DateAxisDataItem;\r\n//# sourceMappingURL=DateAxis.js.map","/**\r\n * Module, defining Axis Renderer for vertical axes.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRenderer } from \"./AxisRenderer\";\r\nimport { AxisBullet } from \"./AxisBullet\";\r\nimport { WavedLine } from \"../../core/elements/WavedLine\";\r\nimport { WavedRectangle } from \"../../core/elements/WavedRectangle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent, Percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A renderer for horizontal axis.\r\n *\r\n * @see {@link IAxisRendererEvents} for a list of available events\r\n * @see {@link IAxisRendererAdapters} for a list of available Adapters\r\n */\r\nvar AxisRendererX = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisRendererX, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Related axis\r\n     */\r\n    function AxisRendererX() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"AxisRendererX\";\r\n        _this.minGridDistance = 120;\r\n        _this.opposite = false;\r\n        _this.rotation = 0;\r\n        _this.width = percent(100);\r\n        _this.labels.template.horizontalCenter = \"middle\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n    * @ignore\r\n    */\r\n    AxisRendererX.prototype.setAxis = function (axis) {\r\n        _super.prototype.setAxis.call(this, axis);\r\n        axis.layout = \"vertical\";\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisRendererX.prototype.updateGridContainer = function () {\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var gridContainer = this.gridContainer;\r\n            gridContainer.x = axis.pixelX;\r\n            gridContainer.width = axis.axisLength;\r\n        }\r\n    };\r\n    /**\r\n     * Called when rendered is attached to an Axis, as well as a property of\r\n     * Axis that might affect the appearance is updated.\r\n     *\r\n     * E.g. `axis.opposite`, `axis.inside`, etc.\r\n     *\r\n     * This method is called **before** draw, so that any related setting\r\n     * changed in this method can be changed.\r\n     *\r\n     * @todo Description (review)\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererX.prototype.processRenderer = function () {\r\n        _super.prototype.processRenderer.call(this);\r\n        // can not do this in init, as axis is set later\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            if (!(axis.width instanceof Percent)) {\r\n                axis.width = percent(100);\r\n            }\r\n            // @todo Is thi sneeded?\r\n            $utils.used(this.line);\r\n            var title = axis.title;\r\n            title.rotation = 0;\r\n            title.align = \"center\";\r\n            if (this.opposite) {\r\n                this.line.toFront();\r\n                title.toBack();\r\n            }\r\n            else {\r\n                title.toFront();\r\n                this.toBack();\r\n                this.line.toBack();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Updates some of the Axis tooltip's visual properties, related to\r\n     * rendering of the Axis.\r\n     *\r\n     * @todo Description (review)\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererX.prototype.updateTooltip = function () {\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var bigNum = 1000;\r\n            var bbx = this.line.pixelX;\r\n            var bby = this.line.pixelY;\r\n            var bbw = this.axisLength;\r\n            var bbh = bigNum;\r\n            // top\r\n            if (this.opposite) {\r\n                if (!this.inside) {\r\n                    bby = -bigNum;\r\n                    bbh = bigNum;\r\n                }\r\n            }\r\n            // bottom\r\n            else {\r\n                if (this.inside) {\r\n                    bby = -bigNum;\r\n                    bbh = bigNum;\r\n                }\r\n            }\r\n            this.axis.updateTooltip(\"vertical\", { x: bbx, y: bby, width: bbw, height: bbh });\r\n        }\r\n    };\r\n    /**\r\n     * Updates and positions a label element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param label        Label element\r\n     * @param position     Starting position\r\n     * @param endPosition  Ending position\r\n     */\r\n    AxisRendererX.prototype.updateLabelElement = function (label, position, endPosition, location) {\r\n        if (!$type.hasValue(location)) {\r\n            location = label.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        var point = this.positionToPoint(position);\r\n        label.isMeasured = !label.inside;\r\n        var deltaY = 0;\r\n        var verticalCenter;\r\n        var maxHeight = this.gridContainer.maxHeight;\r\n        if (this.opposite) {\r\n            if (label.inside) {\r\n                verticalCenter = \"top\";\r\n                if (label.valign == \"bottom\") {\r\n                    deltaY = maxHeight;\r\n                    verticalCenter = \"bottom\";\r\n                }\r\n                if (label.valign == \"middle\") {\r\n                    deltaY = maxHeight / 2;\r\n                    verticalCenter = \"middle\";\r\n                }\r\n            }\r\n            else {\r\n                verticalCenter = \"bottom\";\r\n            }\r\n            point.y = deltaY;\r\n        }\r\n        else {\r\n            if (label.inside) {\r\n                verticalCenter = \"bottom\";\r\n                if (label.valign == \"top\") {\r\n                    deltaY = -maxHeight;\r\n                    verticalCenter = \"top\";\r\n                }\r\n                if (label.valign == \"middle\") {\r\n                    deltaY = -maxHeight / 2;\r\n                    verticalCenter = \"middle\";\r\n                }\r\n            }\r\n            else {\r\n                verticalCenter = \"top\";\r\n            }\r\n            point.y += deltaY;\r\n        }\r\n        if (label.rotation == 0) {\r\n            // Apply fuzzy logic to verticalCenter only if labels are not rotated\r\n            label.verticalCenter = verticalCenter;\r\n        }\r\n        this.positionItem(label, point);\r\n        this.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\r\n    };\r\n    Object.defineProperty(AxisRendererX.prototype, \"axisLength\", {\r\n        /**\r\n         * Returns actual length of the Axis, in pixels.\r\n         *\r\n         * @return Length (px)\r\n         */\r\n        get: function () {\r\n            var axis = this.axis;\r\n            return (axis.measuredWidth - axis.pixelPaddingRight - axis.pixelPaddingLeft) || 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts relative position on axis to point coordinates.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @param position2  Position (0-1) Position on the second axis\r\n     * @return Point\r\n     */\r\n    AxisRendererX.prototype.positionToPoint = function (position, position2) {\r\n        return { x: this.positionToCoordinate(position), y: 0 };\r\n    };\r\n    /**\r\n     * Converts a point at specific coordinates to a relative position (0-1)\r\n     * on the axis.\r\n     *\r\n     * @param point  Point\r\n     * @return Position (0-1)\r\n     */\r\n    AxisRendererX.prototype.pointToPosition = function (point) {\r\n        return this.coordinateToPosition(point.x, point.y);\r\n    };\r\n    /**\r\n     * [getPositionRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param startPosition  Starting position\r\n     * @param endPosition    End position\r\n     * @return SVG path\r\n     */\r\n    AxisRendererX.prototype.getPositionRangePath = function (startPosition, endPosition) {\r\n        var x1 = $math.fitToRange(this.positionToCoordinate(startPosition), 0, this.axisLength);\r\n        var x2 = $math.fitToRange(this.positionToCoordinate(endPosition), 0, this.axisLength);\r\n        var w = Math.abs(x2 - x1);\r\n        var h = this.getHeight();\r\n        var x = Math.min(x1, x2);\r\n        var y = 0;\r\n        return $path.rectToPath({\r\n            x: x,\r\n            y: y,\r\n            width: w,\r\n            height: h\r\n        }, true);\r\n    };\r\n    /**\r\n     * Updates and positions an axis break element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Break element\r\n     */\r\n    AxisRendererX.prototype.updateBreakElement = function (axisBreak) {\r\n        _super.prototype.updateBreakElement.call(this, axisBreak);\r\n        var startLine = axisBreak.startLine;\r\n        var endLine = axisBreak.endLine;\r\n        var fillShape = axisBreak.fillShape;\r\n        var startPoint = axisBreak.startPoint;\r\n        var endPoint = axisBreak.endPoint;\r\n        var y1 = axisBreak.pixelMarginLeft;\r\n        var y2 = this.getHeight() - axisBreak.pixelMarginTop - axisBreak.pixelMarginBottom;\r\n        startPoint.x = $math.fitToRange(startPoint.x, -1, this.axisLength + 1);\r\n        endPoint.x = $math.fitToRange(endPoint.x, -1, this.axisLength + 1);\r\n        if (startPoint.x == endPoint.x && (startPoint.x < 0 || startPoint.x > this.axisLength)) {\r\n            axisBreak.fillShape.__disabled = true;\r\n        }\r\n        else {\r\n            axisBreak.fillShape.__disabled = false;\r\n        }\r\n        startLine.y = y1;\r\n        startLine.width = 0;\r\n        startLine.height = y2;\r\n        endLine.y = y1;\r\n        endLine.width = 0;\r\n        endLine.height = y2;\r\n        fillShape.height = y2;\r\n        fillShape.width = Math.abs(endPoint.x - startPoint.x);\r\n        fillShape.y = y1;\r\n        fillShape.x = startPoint.x;\r\n    };\r\n    /**\r\n     * Updates and positions a grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param grid         Grid element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererX.prototype.updateGridElement = function (grid, position, endPosition) {\r\n        position = position + (endPosition - position) * grid.location;\r\n        var point = this.positionToPoint(position);\r\n        //point.x = $utils.spritePointToSprite({x:point.x, y:0}, this, this.gridContainer).x;\r\n        grid.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: this.getHeight() });\r\n        this.positionItem(grid, point);\r\n        this.toggleVisibility(grid, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions a tick element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param tick         Tick element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererX.prototype.updateTickElement = function (tick, position, endPosition) {\r\n        position = position + (endPosition - position) * tick.location;\r\n        var point = this.positionToPoint(position);\r\n        var tickLength = tick.length;\r\n        point.y = $utils.spritePointToSprite({ x: 0, y: this.line.pixelY }, this.line.parent, this.gridContainer).y;\r\n        if (this.opposite) {\r\n            tickLength *= (tick.inside ? 1 : -1);\r\n        }\r\n        else {\r\n            tickLength *= (tick.inside ? -1 : 1);\r\n        }\r\n        tick.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: tickLength });\r\n        this.positionItem(tick, point);\r\n        this.toggleVisibility(tick, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions the axis line element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererX.prototype.updateAxisLine = function () {\r\n        this.line.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: this.axisLength, y: 0 });\r\n    };\r\n    /**\r\n     * Updates and positions the base grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererX.prototype.updateBaseGridElement = function () {\r\n        _super.prototype.updateBaseGridElement.call(this);\r\n        var axis = this.axis;\r\n        var h = this.getHeight();\r\n        var w = this.axisLength;\r\n        var baseGrid = this.baseGrid;\r\n        var x = axis.basePoint.x;\r\n        if (x < -0.2 || x > w + 0.2) {\r\n            baseGrid.hide(0);\r\n        }\r\n        else {\r\n            var y = $utils.spritePointToSprite({ x: 0, y: 0 }, this.gridContainer, baseGrid.parent).y;\r\n            baseGrid.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: h });\r\n            baseGrid.moveTo({ x: x, y: y });\r\n            baseGrid.show(0);\r\n        }\r\n    };\r\n    /**\r\n     * Creates visual elements for and axis break.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Axis break\r\n     */\r\n    AxisRendererX.prototype.createBreakSprites = function (axisBreak) {\r\n        axisBreak.startLine = new WavedLine();\r\n        axisBreak.endLine = new WavedLine();\r\n        var wavedRectangle = new WavedRectangle();\r\n        wavedRectangle.setWavedSides(false, true, false, true);\r\n        axisBreak.fillShape = wavedRectangle;\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    AxisRendererX.prototype.toAxisPosition = function (value) {\r\n        var inversedPosition = value;\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var relativePositionSprite = axis.relativePositionSprite;\r\n            var x = axis.pixelX;\r\n            if (relativePositionSprite) {\r\n                x = $utils.spritePointToSprite({ x: this.pixelX, y: 0 }, this.parent, relativePositionSprite).x;\r\n            }\r\n            else {\r\n                relativePositionSprite = axis.parent;\r\n            }\r\n            if (relativePositionSprite) {\r\n                var relativeX = x / relativePositionSprite.innerWidth;\r\n                var relativeWidth = axis.axisLength / relativePositionSprite.innerWidth;\r\n                return (inversedPosition - relativeX) / relativeWidth;\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * Updates and positions axis bullets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet       AxisBullet element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererX.prototype.updateBullet = function (bullet, position, endPosition) {\r\n        var location = 0.5;\r\n        if (bullet instanceof AxisBullet) {\r\n            location = bullet.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        var point = this.positionToPoint(position);\r\n        point.y = $utils.spritePointToSprite({ x: 0, y: this.line.pixelY }, this.line.parent, this.gridContainer).y;\r\n        this.positionItem(bullet, point);\r\n        this.toggleVisibility(bullet, position, 0, 1);\r\n    };\r\n    return AxisRendererX;\r\n}(AxisRenderer));\r\nexport { AxisRendererX };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererX\"] = AxisRendererX;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Put labels inside plot area.\r\n * Disable first and last labels.\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.heightXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof AxisRendererX) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.inside = true;\r\n            state.properties.maxLabelPosition = 0.9;\r\n            state.properties.minLabelPosition = 0.1;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Disable labels altogather on very small charts\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.heightXXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof AxisRendererX) {\r\n            var state = target.states.create(stateId);\r\n            state.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=AxisRendererX.js.map","/**\r\n * A module which defines functionality related to Category Axis Break.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Base class to define \"breaks\" in axes\r\n * @see {@link ICategoryAxisBreakEvents} for a list of available events\r\n * @see {@link ICategoryAxisBreakAdapters} for a list of available Adapters\r\n */\r\nvar CategoryAxisBreak = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoryAxisBreak, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CategoryAxisBreak() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"CategoryAxisBreak\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CategoryAxisBreak.prototype, \"startPosition\", {\r\n        /**\r\n         * Pixel position of the break's start.\r\n         *\r\n         * @return Position (px)\r\n         * @readonly\r\n         */\r\n        get: function () {\r\n            if (this.axis) {\r\n                return this.axis.indexToPosition(this.adjustedStartValue);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoryAxisBreak.prototype, \"endPosition\", {\r\n        /**\r\n         * Pixel position of the break's end.\r\n         *\r\n         * @return Position (px)\r\n         * @readonly\r\n         */\r\n        get: function () {\r\n            if (this.axis) {\r\n                return this.axis.indexToPosition(this.adjustedEndValue);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoryAxisBreak.prototype, \"startCategory\", {\r\n        /**\r\n         * @return Start category\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startCategory\");\r\n        },\r\n        /**\r\n         * A category break starts on.\r\n         *\r\n         * @param value Start category\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"startCategory\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidateDataItems();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoryAxisBreak.prototype, \"endCategory\", {\r\n        /**\r\n         * @return End category\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endCategory\");\r\n        },\r\n        /**\r\n         * A category break ends on.\r\n         *\r\n         * @param value  End category\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"endCategory\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidateDataItems();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoryAxisBreak.prototype, \"startValue\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            var category = this.getPropertyValue(\"startCategory\");\r\n            if (category) {\r\n                return this.axis.categoryToIndex(category);\r\n            }\r\n            else {\r\n                return this.getPropertyValue(\"startValue\");\r\n            }\r\n        },\r\n        /**\r\n         * An index of start category.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"startValue\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidateDataItems();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoryAxisBreak.prototype, \"endValue\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            var category = this.getPropertyValue(\"endCategory\");\r\n            if (category) {\r\n                return this.axis.categoryToIndex(category);\r\n            }\r\n            else {\r\n                return this.getPropertyValue(\"endValue\");\r\n            }\r\n        },\r\n        /**\r\n         * An index of end category or a end value.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"endValue\", value)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidateDataItems();\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return CategoryAxisBreak;\r\n}(AxisBreak));\r\nexport { CategoryAxisBreak };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"CategoryAxisBreak\"] = CategoryAxisBreak;\r\n//# sourceMappingURL=CategoryAxisBreak.js.map","/**\r\n * Category axis module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Axis, AxisDataItem } from \"./Axis\";\r\nimport { AxisRendererX } from \"./AxisRendererX\";\r\nimport { AxisRendererY } from \"./AxisRendererY\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Dictionary } from \"../../core/utils/Dictionary\";\r\nimport { CategoryAxisBreak } from \"./CategoryAxisBreak\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport { Adapter } from \"../../core/utils/Adapter\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[CategoryAxis]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar CategoryAxisDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoryAxisDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CategoryAxisDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.seriesDataItems = {};\r\n        _this.className = \"CategoryAxisDataItem\";\r\n        _this.text = \"{category}\";\r\n        _this.locations.category = 0;\r\n        _this.locations.endCategory = 1;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CategoryAxisDataItem.prototype, \"adapter\", {\r\n        /**\r\n         * Holds Adapter.\r\n         */\r\n        get: function () {\r\n            if (!this._adapterO) {\r\n                this._adapterO = new Adapter(this);\r\n            }\r\n            return this._adapterO;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoryAxisDataItem.prototype, \"category\", {\r\n        /**\r\n         * @return Category\r\n         */\r\n        get: function () {\r\n            if (this._adapterO) {\r\n                if (this._adapterO.isEnabled(\"category\")) {\r\n                    return this._adapterO.apply(\"category\", this.properties.category);\r\n                }\r\n            }\r\n            return this.properties.category;\r\n        },\r\n        /**\r\n         * Category.\r\n         *\r\n         * @param value  Category\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"category\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoryAxisDataItem.prototype, \"endCategory\", {\r\n        /**\r\n         * @return End category\r\n         */\r\n        get: function () {\r\n            return this.properties.endCategory;\r\n        },\r\n        /**\r\n         * End category.\r\n         *\r\n         * Used for items that span several categories, like [[CategoryAxisBreak]].\r\n         *\r\n         * @param value  End category\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"endCategory\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return CategoryAxisDataItem;\r\n}(AxisDataItem));\r\nexport { CategoryAxisDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Used to create a category-based axis for the chart.\r\n *\r\n * ```TypeScript\r\n * // Create the axis\r\n * let xAxis = chart.xAxes.push(new am4charts.CategoryAxis());\r\n *\r\n * // Set settings\r\n * xAxis.title.text = \"Clients\";\r\n * ```\r\n * ```JavaScript\r\n * // Create the axis\r\n * var valueAxis = chart.xAxes.push(new am4charts.CategoryAxis());\r\n *\r\n * // Set settings\r\n * valueAxis.title.text = \"Clients\";\r\n * ```\r\n * ```JSON\r\n * \"xAxes\": [{\r\n *   \"type\": \"CategoryAxis\",\r\n *   \"title\": {\r\n *     \"text\": \"Clients\"\r\n *   }\r\n * }]\r\n * ```\r\n *\r\n * @see {@link ICategoryAxisEvents} for a list of available Events\r\n * @see {@link ICategoryAxisAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar CategoryAxis = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoryAxis, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CategoryAxis() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * A collection that holds Axis' data items sorted by each category.\r\n         */\r\n        _this.dataItemsByCategory = new Dictionary();\r\n        _this.className = \"CategoryAxis\";\r\n        // Set field name\r\n        _this.axisFieldName = \"category\";\r\n        _this._lastDataItem = _this.createDataItem();\r\n        _this._lastDataItem.component = _this;\r\n        _this._disposers.push(_this._lastDataItem);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns a new/empty [[DataItem]] of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    CategoryAxis.prototype.createDataItem = function () {\r\n        return new CategoryAxisDataItem();\r\n    };\r\n    /**\r\n     * Returns a new/empty [[AxisBreak]] of the appropriate type.\r\n     *\r\n     * @return Axis break\r\n     */\r\n    CategoryAxis.prototype.createAxisBreak = function () {\r\n        return new CategoryAxisBreak();\r\n    };\r\n    /**\r\n     * Processes a related series' data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param dataItem  Data item\r\n     */\r\n    CategoryAxis.prototype.processSeriesDataItem = function (dataItem, axisLetter) {\r\n        _super.prototype.processSeriesDataItem.call(this, dataItem, axisLetter);\r\n        var category = dataItem[\"category\" + this.axisLetter];\r\n        if ($type.hasValue(category)) {\r\n            var categoryAxisDataItem = this.dataItemsByCategory.getKey(category);\r\n            if (categoryAxisDataItem) {\r\n                var seriesId = dataItem.component.uid;\r\n                var seriesDataItems = categoryAxisDataItem.seriesDataItems[seriesId];\r\n                if (!seriesDataItems) {\r\n                    seriesDataItems = [];\r\n                    categoryAxisDataItem.seriesDataItems[seriesId] = seriesDataItems;\r\n                }\r\n                seriesDataItems.push(dataItem);\r\n            }\r\n        }\r\n        else {\r\n            dataItem.component.dataItems.remove(dataItem);\r\n        }\r\n    };\r\n    /**\r\n     * Validates the data range.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     */\r\n    CategoryAxis.prototype.validateDataRange = function () {\r\n        var _this = this;\r\n        _super.prototype.validateDataRange.call(this);\r\n        $iter.each(this._series.iterator(), function (series) {\r\n            if ((series.xAxis instanceof CategoryAxis) && (series.yAxis instanceof CategoryAxis)) {\r\n                series.invalidateDataRange();\r\n            }\r\n            else {\r\n                var startIndex = _this.positionToIndex(_this.start);\r\n                var endIndex = _this.positionToIndex(_this.end);\r\n                if (endIndex >= _this.dataItems.length) {\r\n                    endIndex--;\r\n                }\r\n                var seriesId = series.uid;\r\n                var minIndex = void 0;\r\n                var maxIndex = void 0;\r\n                for (var i = startIndex; i <= endIndex; i++) {\r\n                    var axisDataItem = _this.dataItems.getIndex(i);\r\n                    if (axisDataItem) {\r\n                        var seriesDataItems = axisDataItem.seriesDataItems[seriesId];\r\n                        if (seriesDataItems) {\r\n                            for (var i_1 = 0; i_1 < seriesDataItems.length; i_1++) {\r\n                                var seriesDataItem = seriesDataItems[i_1];\r\n                                if (seriesDataItem) {\r\n                                    var index = seriesDataItem.index;\r\n                                    if (!$type.isNumber(minIndex) || index < minIndex) {\r\n                                        minIndex = index;\r\n                                    }\r\n                                    if (!$type.isNumber(maxIndex) || index > maxIndex) {\r\n                                        maxIndex = index;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if ($type.isNumber(minIndex)) {\r\n                    series.startIndex = minIndex;\r\n                }\r\n                else {\r\n                    series.start = _this.start;\r\n                }\r\n                if ($type.isNumber(maxIndex)) {\r\n                    series.endIndex = maxIndex + 1;\r\n                }\r\n                else {\r\n                    series.end = _this.end;\r\n                }\r\n                // range might not change, but axis breaks might.\r\n                if (_this._axisBreaks && _this._axisBreaks.length > 0) {\r\n                    series.invalidateDataRange();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Validates the whole axis. Causes it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     */\r\n    CategoryAxis.prototype.validate = function () {\r\n        var _this = this;\r\n        _super.prototype.validate.call(this);\r\n        var dataCount = this.dataItems.length;\r\n        var startIndex = $math.fitToRange(Math.floor(this.start * dataCount - 1), 0, dataCount);\r\n        var endIndex = $math.fitToRange(Math.ceil(this.end * dataCount), 0, dataCount);\r\n        if (this.renderer.invalid) {\r\n            this.renderer.validate();\r\n        }\r\n        // find frequency at which we'll show items\r\n        var maxCount = this.renderer.axisLength / this.renderer.minGridDistance;\r\n        var frequency = Math.min(this.dataItems.length, Math.ceil((endIndex - startIndex) / maxCount));\r\n        this._startIndex = Math.floor(startIndex / frequency) * frequency;\r\n        this._endIndex = Math.ceil(this.end * dataCount);\r\n        this.fixAxisBreaks();\r\n        if (this._startIndex == this._endIndex) {\r\n            this._endIndex++;\r\n        }\r\n        this._frequency = frequency;\r\n        if (this.axisLength <= 0) {\r\n            return;\r\n        }\r\n        this.maxZoomFactor = this.dataItems.length;\r\n        if (this.dataItems.length <= 0) {\r\n            this.maxZoomFactor = 1;\r\n        }\r\n        this.resetIterators();\r\n        // it's important to use protected variables here, as getters will return 0 - length\r\n        // TODO use iterator instead\r\n        // @ todo: not solved cat axis item fading\r\n        startIndex = $math.max(0, this._startIndex - this._frequency);\r\n        endIndex = $math.min(this.dataItems.length, this._endIndex + this._frequency);\r\n        var itemIndex = 0;\r\n        for (var i = 0; i < startIndex; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            dataItem.__disabled = true;\r\n        }\r\n        for (var i = endIndex, len = this.dataItems.length; i < len; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            dataItem.__disabled = true;\r\n        }\r\n        for (var i = startIndex; i < endIndex; i++) {\r\n            if (i < this.dataItems.length) {\r\n                var dataItem = this.dataItems.getIndex(i);\r\n                if (i / this._frequency == Math.round(i / this._frequency)) {\r\n                    var axisBreak = this.isInBreak(i);\r\n                    if (!axisBreak) {\r\n                        this.appendDataItem(dataItem);\r\n                        this.validateDataElement(dataItem, itemIndex);\r\n                    }\r\n                    itemIndex++;\r\n                }\r\n                else {\r\n                    //previously we disabled all before, but this is better for cpu\r\n                    //this.validateDataElement(dataItem, itemIndex); // helps to solve shrinking // not good - creates all items\r\n                    dataItem.__disabled = true;\r\n                }\r\n            }\r\n        }\r\n        this.appendDataItem(this._lastDataItem);\r\n        this.validateDataElement(this._lastDataItem, itemIndex + 1, this.dataItems.length);\r\n        if (this._axisBreaks) {\r\n            var axisBreaks = this._axisBreaks;\r\n            axisBreaks.each(function (axisBreak) {\r\n                var adjustedStartValue = axisBreak.adjustedStartValue;\r\n                var adjustedEndValue = axisBreak.adjustedEndValue;\r\n                if ($math.intersect({ start: adjustedStartValue, end: adjustedEndValue }, { start: _this._startIndex, end: _this._endIndex })) {\r\n                    var frequency_1 = $math.fitToRange(Math.ceil(_this._frequency / axisBreak.breakSize), 1, adjustedEndValue - adjustedStartValue);\r\n                    var itemIndex_1 = 0;\r\n                    // TODO use iterator instead\r\n                    for (var b = adjustedStartValue; b <= adjustedEndValue; b = b + frequency_1) {\r\n                        var dataItem = _this.dataItems.getIndex(b);\r\n                        _this.appendDataItem(dataItem);\r\n                        _this.validateDataElement(dataItem, itemIndex_1);\r\n                        itemIndex_1++;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        this.validateBreaks();\r\n        this.validateAxisRanges();\r\n        this.ghostLabel.invalidate(); // solves font issue\r\n        this.renderer.invalidateLayout();\r\n    };\r\n    /**\r\n     * [validateDataElement description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param dataItem   [description]\r\n     * @param itemIndex  [description]\r\n     */\r\n    CategoryAxis.prototype.validateDataElement = function (dataItem, itemIndex, index) {\r\n        _super.prototype.validateDataElement.call(this, dataItem);\r\n        dataItem.itemIndex = this._axisItemCount;\r\n        this._axisItemCount++;\r\n        //dataItem.__disabled = false;\r\n        var renderer = this.renderer;\r\n        if (!$type.isNumber(index)) {\r\n            index = this.categoryToIndex(dataItem.category);\r\n        }\r\n        var endIndex = this.categoryToIndex(dataItem.endCategory);\r\n        if (!$type.isNumber(endIndex)) {\r\n            endIndex = index;\r\n        }\r\n        var position = this.indexToPosition(index, dataItem.locations.category);\r\n        var endPosition = this.indexToPosition(endIndex, dataItem.locations.endCategory);\r\n        dataItem.position = position;\r\n        var fillEndIndex;\r\n        var fillPosition;\r\n        var fillEndPosition;\r\n        if (dataItem.isRange) {\r\n            fillEndIndex = endIndex;\r\n            fillPosition = this.indexToPosition(index, dataItem.locations.category);\r\n            fillEndPosition = this.indexToPosition(fillEndIndex, dataItem.locations.endCategory);\r\n        }\r\n        dataItem.point = renderer.positionToPoint(position);\r\n        var tick = dataItem.tick;\r\n        if (tick && !tick.disabled) {\r\n            renderer.updateTickElement(tick, position, endPosition);\r\n        }\r\n        var grid = dataItem.grid;\r\n        if (grid && !grid.disabled) {\r\n            renderer.updateGridElement(grid, position, endPosition);\r\n        }\r\n        var label = dataItem.label;\r\n        if (label && !label.disabled) {\r\n            // theorethically this might result problems if category text changes, the range text won't change. But otherwise range.label.text = \"custom text\" wont' work, which is not intuitive.\r\n            if (!dataItem.isRange || label.text == undefined) {\r\n                dataItem.text = dataItem.text;\r\n            }\r\n            renderer.updateLabelElement(label, position, endPosition);\r\n            if ((renderer instanceof AxisRendererY && dataItem.label.measuredWidth > this.ghostLabel.measuredWidth) || (renderer instanceof AxisRendererX && dataItem.label.measuredHeight > this.ghostLabel.measuredHeight)) {\r\n                if (dataItem.label.html) {\r\n                    this.ghostLabel.html = dataItem.label.currentText;\r\n                }\r\n                else {\r\n                    this.ghostLabel.text = dataItem.label.currentText;\r\n                }\r\n            }\r\n        }\r\n        var fill = dataItem.axisFill;\r\n        if (fill && !fill.disabled) {\r\n            if (!dataItem.isRange) {\r\n                fillEndIndex = index + this._frequency;\r\n                fillPosition = this.indexToPosition(index, fill.location);\r\n                fillEndPosition = this.indexToPosition(fillEndIndex, fill.location);\r\n            }\r\n            renderer.updateFillElement(fill, fillPosition, fillEndPosition);\r\n            if (!dataItem.isRange) {\r\n                this.fillRule(dataItem, itemIndex);\r\n            }\r\n        }\r\n        if (dataItem.bullet) {\r\n            renderer.updateBullet(dataItem.bullet, position, endPosition);\r\n        }\r\n        var mask = dataItem.mask;\r\n        if (mask) {\r\n            renderer.updateFillElement(mask, fillPosition, fillEndPosition);\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    CategoryAxis.prototype.disposeData = function () {\r\n        this.dataItemsByCategory.clear();\r\n        _super.prototype.disposeData.call(this);\r\n    };\r\n    /**\r\n     * Processes the axis data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem     Data item\r\n     * @param dataContext  The raw data that corresponds to this data item\r\n     */\r\n    CategoryAxis.prototype.processDataItem = function (dataItem, dataContext) {\r\n        if (dataItem) {\r\n            // creat a collection for fast access\r\n            _super.prototype.processDataItem.call(this, dataItem, dataContext);\r\n            // check if such category already exists\r\n            //let existingDataItem: CategoryAxisDataItem = this.dataItemsByCategory.getKey(dataItem.category);\r\n            //if (existingDataItem && existingDataItem != dataItem) {\r\n            //\tthis.dataItems.remove(existingDataItem);\r\n            //}\r\n            if ($type.hasValue(dataItem.category)) {\r\n                this.dataItemsByCategory.setKey(dataItem.category, dataItem);\r\n            }\r\n        }\r\n    };\r\n    CategoryAxis.prototype.getDataItem = function (dataContext) {\r\n        var category = (dataContext[this.dataFields.category]);\r\n        if ($type.hasValue(category)) {\r\n            var dataItem = this.dataItemsByCategory.getKey(category);\r\n            if (dataItem) {\r\n                return dataItem;\r\n            }\r\n            else {\r\n                return this.dataItems.create();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Converts a category index to an actual screen coordinate on the axis.\r\n     *\r\n     * `location` identifies relative location within category. 0 - beginning,\r\n     * 0.5 - middle, 1 - end, and anything inbetween.\r\n     *\r\n     * @param index     Index\r\n     * @param location  Location (0-1)\r\n     * @return Position (px)\r\n     */\r\n    CategoryAxis.prototype.indexToPosition = function (index, location) {\r\n        if (!$type.isNumber(location)) {\r\n            location = 0.5;\r\n        }\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        var difference = this.adjustDifference(startIndex, endIndex);\r\n        var startLocation = this.startLocation;\r\n        var endLocation = this.endLocation;\r\n        difference -= startLocation;\r\n        difference -= (1 - endLocation);\r\n        if (this._axisBreaks) {\r\n            var axisBreaks = this._axisBreaks;\r\n            $iter.eachContinue(axisBreaks.iterator(), function (axisBreak) {\r\n                var breakStartIndex = axisBreak.adjustedStartValue;\r\n                var breakEndIndex = axisBreak.adjustedEndValue;\r\n                if (index < startIndex) {\r\n                    return false;\r\n                }\r\n                if ($math.intersect({ start: breakStartIndex, end: breakEndIndex }, { start: startIndex, end: endIndex })) {\r\n                    breakStartIndex = Math.max(startIndex, breakStartIndex);\r\n                    breakEndIndex = Math.min(endIndex, breakEndIndex);\r\n                    var breakSize = axisBreak.breakSize;\r\n                    // value to the right of break end\r\n                    if (index > breakEndIndex) {\r\n                        startIndex += (breakEndIndex - breakStartIndex) * (1 - breakSize);\r\n                    }\r\n                    // value to the left of break start\r\n                    else if (index < breakStartIndex) {\r\n                    }\r\n                    // value within break\r\n                    else {\r\n                        index = breakStartIndex + (index - breakStartIndex) * breakSize;\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n        return $math.round((index + location - startLocation - startIndex) / difference, 5);\r\n    };\r\n    /**\r\n     * Converts a string category name to relative position on axis.\r\n     *\r\n     * `location` identifies relative location within category. 0 - beginning,\r\n     * 0.5 - middle, 1 - end, and anything inbetween.\r\n     *\r\n     * @param category  Category name\r\n     * @param location  Location (0-1)\r\n     * @return Position\r\n     */\r\n    CategoryAxis.prototype.categoryToPosition = function (category, location) {\r\n        var index = this.categoryToIndex(category);\r\n        return this.indexToPosition(index, location);\r\n    };\r\n    /**\r\n     * Converts a string category name to a orientation point (x, y, angle) on axis\r\n     *\r\n     * `location` identifies relative location within category. 0 - beginning,\r\n     * 0.5 - middle, 1 - end, and anything inbetween.\r\n     * @param category  Category name\r\n     * @param location  Location (0-1)\r\n     * @return Orientation point\r\n     */\r\n    CategoryAxis.prototype.categoryToPoint = function (category, location) {\r\n        var position = this.categoryToPosition(category, location);\r\n        var point = this.renderer.positionToPoint(position);\r\n        var angle = this.renderer.positionToAngle(position);\r\n        return { x: point.x, y: point.y, angle: angle };\r\n    };\r\n    /**\r\n     * Converts a string category name to a orientation point (x, y, angle) on axis\r\n     *\r\n     * `location` identifies relative location within category. 0 - beginning,\r\n     * 0.5 - middle, 1 - end, and anything inbetween.\r\n     * @param category  Category name\r\n     * @param location  Location (0-1)\r\n     * @return Orientation point\r\n     */\r\n    CategoryAxis.prototype.anyToPoint = function (category, location) {\r\n        return this.categoryToPoint(category, location);\r\n    };\r\n    /**\r\n     * Converts a string category name to relative position on axis.\r\n     *\r\n     * An alias to `categoryToPosition()`.\r\n     *\r\n     * @param category  Category name\r\n     * @param location  Location (0-1)\r\n     * @return Relative position\r\n     */\r\n    CategoryAxis.prototype.anyToPosition = function (category, location) {\r\n        return this.categoryToPosition(category, location);\r\n    };\r\n    /**\r\n     * Converts named category to an index of data item it corresponds to.\r\n     *\r\n     * @param category  Category\r\n     * @return Data item index\r\n     */\r\n    CategoryAxis.prototype.categoryToIndex = function (category) {\r\n        if ($type.hasValue(category)) {\r\n            var dataItem = this.dataItemsByCategory.getKey(category);\r\n            if (dataItem) {\r\n                return dataItem.index;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Zooms the axis to specific named ctaegories.\r\n     *\r\n     * @param startCategory  Start category\r\n     * @param endCategory    End category\r\n     */\r\n    CategoryAxis.prototype.zoomToCategories = function (startCategory, endCategory) {\r\n        this.zoomToIndexes(this.categoryToIndex(startCategory), this.categoryToIndex(endCategory) + 1);\r\n    };\r\n    /**\r\n     * [getAnyRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param start         [description]\r\n     * @param end           [description]\r\n     * @param startLocation [description]\r\n     * @param endLocation   [description]\r\n     * @return [description]\r\n     */\r\n    CategoryAxis.prototype.getAnyRangePath = function (start, end, startLocation, endLocation) {\r\n        var startPos = this.categoryToPosition(start, startLocation);\r\n        var endPos = this.categoryToPosition(end, endLocation);\r\n        return this.getPositionRangePath(startPos, endPos); // Base class (Axis) gets range shape from AxisRenderer\r\n    };\r\n    /**\r\n     * Takes an absolute position (px) within axis and adjust it to a specific\r\n     * `location` within category it corresponds to.\r\n     *\r\n     * @param position  Source position (px)\r\n     * @param location  Location within category (0-1)\r\n     * @return Adjusted position (px)\r\n     */\r\n    CategoryAxis.prototype.roundPosition = function (position, location) {\r\n        var index = this.positionToIndex(position);\r\n        return this.indexToPosition(index, location);\r\n    };\r\n    /**\r\n     * Finds and returns first series data item with specific category\r\n     * @param series    Target series\r\n     * @param category  Category\r\n     * @return XYSeriesDataItem data item\r\n     */\r\n    CategoryAxis.prototype.getFirstSeriesDataItem = function (series, category) {\r\n        for (var i = 0; i < series.dataItems.length; i++) {\r\n            var dataItem = series.dataItems.getIndex(i);\r\n            if (series.xAxis == this) {\r\n                if (dataItem.categoryX == category) {\r\n                    return dataItem;\r\n                }\r\n            }\r\n            if (series.yAxis == this) {\r\n                if (dataItem.categoryY == category) {\r\n                    return dataItem;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Finds and returns last series data item with specific category.\r\n     * @param series    Target series\r\n     * @param category  Category\r\n     * @return XYSeriesDataItem data item\r\n     */\r\n    CategoryAxis.prototype.getLastSeriesDataItem = function (series, category) {\r\n        for (var i = series.dataItems.length - 1; i >= 0; i--) {\r\n            var dataItem = series.dataItems.getIndex(i);\r\n            if (series.xAxis == this) {\r\n                if (dataItem.categoryX == category) {\r\n                    return dataItem;\r\n                }\r\n            }\r\n            if (series.yAxis == this) {\r\n                if (dataItem.categoryY == category) {\r\n                    return dataItem;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a data item from Series that corresponds to a specific absolute\r\n     * position on the Axis.\r\n     *\r\n     * @param series    Target series\r\n     * @param position  Position (px)\r\n     * @return XYSeriesDataItem data item\r\n     */\r\n    CategoryAxis.prototype.getSeriesDataItem = function (series, position, findNearest) {\r\n        var _this = this;\r\n        if ($type.isNumber(position)) {\r\n            var index_1 = this.positionToIndex(position);\r\n            if (index_1 >= this.dataItems.length) {\r\n                index_1--;\r\n            }\r\n            var dataItem = this.dataItems.getIndex(index_1);\r\n            if (dataItem) {\r\n                var category_1 = dataItem.category;\r\n                var sdi_1;\r\n                var seriesDataItem = series.dataItems.getIndex(index_1);\r\n                if (seriesDataItem) {\r\n                    if (series.xAxis == this) {\r\n                        if (seriesDataItem.categoryX == category_1) {\r\n                            return seriesDataItem;\r\n                        }\r\n                    }\r\n                    if (series.yAxis == this) {\r\n                        if (seriesDataItem.categoryY == category_1) {\r\n                            return seriesDataItem;\r\n                        }\r\n                    }\r\n                }\r\n                series.dataItems.each(function (dataItem) {\r\n                    if (series.xAxis == _this) {\r\n                        if (dataItem.categoryX == category_1) {\r\n                            if (!sdi_1) {\r\n                                sdi_1 = dataItem;\r\n                            }\r\n                            if (Math.abs(index_1 - sdi_1.index) > Math.abs(index_1 - dataItem.index)) {\r\n                                sdi_1 = dataItem;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (series.yAxis == _this) {\r\n                        if (dataItem.categoryY == category_1) {\r\n                            if (!sdi_1) {\r\n                                sdi_1 = dataItem;\r\n                            }\r\n                            if (Math.abs(index_1 - sdi_1.index) > Math.abs(index_1 - dataItem.index)) {\r\n                                sdi_1 = dataItem;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                //@todo\r\n                if (findNearest) {\r\n                }\r\n                return sdi_1;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns the X coordinate for series' data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       Category\r\n     * @param location  Location (0-1)\r\n     * @return X coordinate (px)\r\n     */\r\n    CategoryAxis.prototype.getX = function (dataItem, key, location, stackKey, range) {\r\n        var position = this.getPositionX(dataItem, key, location, stackKey, range);\r\n        if ($type.isNaN(position)) {\r\n            return this.basePoint.x;\r\n        }\r\n        else {\r\n            return this.renderer.positionToPoint(position).x;\r\n        }\r\n    };\r\n    /**\r\n     * Returns relative position on axis for series' data item.\r\n     *\r\n     * @since 4.5.14\r\n     * @param  dataItem  Data item\r\n     * @param  key       Category\r\n     * @param  location  Location (0-1)\r\n     * @return           Relative position\r\n     */\r\n    CategoryAxis.prototype.getPositionX = function (dataItem, key, location, stackKey, range) {\r\n        var position;\r\n        if ($type.hasValue(key)) {\r\n            position = this.categoryToPosition(dataItem.categories[key], location);\r\n        }\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return position;\r\n    };\r\n    /**\r\n     * Returns the Y coordinate for series' data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       Category\r\n     * @param location  Location (0-1)\r\n     * @return Y coordinate (px)\r\n     */\r\n    CategoryAxis.prototype.getY = function (dataItem, key, location, stackKey, range) {\r\n        var position = this.getPositionY(dataItem, key, location, stackKey, range);\r\n        if ($type.isNaN(position)) {\r\n            return this.basePoint.y;\r\n        }\r\n        else {\r\n            return this.renderer.positionToPoint(position).y;\r\n        }\r\n    };\r\n    /**\r\n     * Returns relative position on axis for series' data item.\r\n     *\r\n     * @since 4.5.14\r\n     * @param  dataItem  Data item\r\n     * @param  key       Category\r\n     * @param  location  Location (0-1)\r\n     * @return           Relative position\r\n     */\r\n    CategoryAxis.prototype.getPositionY = function (dataItem, key, location, stackKey, range) {\r\n        var position;\r\n        if ($type.hasValue(key)) {\r\n            position = this.categoryToPosition(dataItem.categories[key], location);\r\n        }\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return position;\r\n    };\r\n    /**\r\n     * Returns an angle for series data item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param dataItem  Data item\r\n     * @param key       Category\r\n     * @param location  Location (0-1)\r\n     * @param stackKey  Stack key (?)\r\n     * @param range Range to fit in\r\n     * @return Angle\r\n     */\r\n    CategoryAxis.prototype.getAngle = function (dataItem, key, location, stackKey, range) {\r\n        var position = this.categoryToPosition(dataItem.categories[key], location);\r\n        if (range) {\r\n            position = $math.fitToRange(position, range.start, range.end);\r\n        }\r\n        return this.positionToAngle(position);\r\n    };\r\n    /**\r\n     * Returns an absolute pixel coordinate of the start of the cell (category),\r\n     * that specific position value falls into.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param position  Position (px)\r\n     * @return Cell start position (px)\r\n     */\r\n    CategoryAxis.prototype.getCellStartPosition = function (position) {\r\n        return this.roundPosition(position, 0);\r\n    };\r\n    /**\r\n     * Returns an absolute pixel coordinate of the end of the cell (category),\r\n     * that specific position value falls into.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description (review)\r\n     * @param position  Position (px)\r\n     * @return Cell end position (px)\r\n     */\r\n    CategoryAxis.prototype.getCellEndPosition = function (position) {\r\n        return this.roundPosition(position, 1);\r\n    };\r\n    /**\r\n     * Returns text to show in a category tooltip, based on specific position\r\n     * within axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Position (px)\r\n     * @return Label (category)\r\n     */\r\n    CategoryAxis.prototype.getTooltipText = function (position) {\r\n        var dataItem = this.dataItems.getIndex(this.positionToIndex(position));\r\n        if (dataItem) {\r\n            this.tooltipDataItem = dataItem;\r\n            this.tooltip.dataItem = dataItem;\r\n            if (this.tooltipText) {\r\n                return this.tooltipText;\r\n            }\r\n            if (!this._adapterO) {\r\n                return dataItem.category;\r\n            }\r\n            else {\r\n                return this._adapterO.apply(\"getTooltipText\", dataItem.category);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns an index of the category that corresponds to specific pixel\r\n     * position within axis.\r\n     *\r\n     * @param position  Position (px)\r\n     * @return Category index\r\n     */\r\n    CategoryAxis.prototype.positionToIndex = function (position) {\r\n        position = $math.round(position, 10);\r\n        if (position < 0) {\r\n            position = 0;\r\n        }\r\n        if (position > 1) {\r\n            position = 1;\r\n        }\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        var difference = endIndex - startIndex - this.startLocation - (1 - this.endLocation);\r\n        position += 1 / difference * this.startLocation;\r\n        var index = null;\r\n        if (this._axisBreaks) {\r\n            var axisBreaks = this._axisBreaks;\r\n            // in case we have some axis breaks\r\n            $iter.eachContinue(axisBreaks.iterator(), function (axisBreak) {\r\n                var breakStartPosition = axisBreak.startPosition;\r\n                var breakEndPosition = axisBreak.endPosition;\r\n                var breakStartIndex = axisBreak.adjustedStartValue;\r\n                var breakEndIndex = axisBreak.adjustedEndValue;\r\n                breakStartIndex = $math.max(breakStartIndex, startIndex);\r\n                breakEndIndex = $math.min(breakEndIndex, endIndex);\r\n                var breakSize = axisBreak.breakSize;\r\n                difference -= (breakEndIndex - breakStartIndex) * (1 - breakSize);\r\n                // position to the right of break end\r\n                if (position > breakEndPosition) {\r\n                    startIndex += (breakEndIndex - breakStartIndex) * (1 - breakSize);\r\n                }\r\n                // position to the left of break start\r\n                else if (position < breakStartPosition) {\r\n                }\r\n                // value within break\r\n                else {\r\n                    var breakPosition = (position - breakStartPosition) / (breakEndPosition - breakStartPosition);\r\n                    index = breakStartIndex + Math.round(breakPosition * (breakEndIndex - breakStartIndex));\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n        if (!$type.isNumber(index)) {\r\n            index = Math.floor(position * difference + startIndex);\r\n        }\r\n        if (index >= this.dataItems.length) {\r\n            index = this.dataItems.length - 1;\r\n        }\r\n        // not good, when panning out of bounds, each time one less item gets selected\r\n        //if (index >= endIndex) {\r\n        //\tindex--;\r\n        //}\r\n        return index;\r\n    };\r\n    /**\r\n     * Returns category based on position.\r\n     *\r\n     * Please note that `position` represents position within axis which may be\r\n     * zoomed and not correspond to Cursor's `position`.\r\n     *\r\n     * To convert Cursor's `position` to Axis' `position` use `toAxisPosition()` method.\r\n     *\r\n     * This is a synonim of `getPositionLabel()` implemented here for consistentcy.\r\n     *\r\n     * @since 4.3.8\r\n     * @see {@link https://www.amcharts.com/docs/v4/tutorials/tracking-cursors-position-via-api/#Tracking_Cursor_s_position} For more information about cursor tracking.\r\n     * @param position  Relative position on axis (0-1)\r\n     * @return Position label\r\n     */\r\n    CategoryAxis.prototype.positionToCategory = function (position) {\r\n        return this.getPositionLabel(position);\r\n    };\r\n    /**\r\n     * Returns category based on position.\r\n     *\r\n     * Please note that `position` represents position within axis which may be\r\n     * zoomed and not correspond to Cursor's `position`.\r\n     *\r\n     * To convert Cursor's `position` to Axis' `position` use `toAxisPosition()` method.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v4/tutorials/tracking-cursors-position-via-api/#Tracking_Cursor_s_position} For more information about cursor tracking.\r\n     * @param position  Relative position on axis (0-1)\r\n     * @return Position label\r\n     */\r\n    CategoryAxis.prototype.getPositionLabel = function (position) {\r\n        var dataItem = this.dataItems.getIndex(this.positionToIndex(position));\r\n        if (dataItem) {\r\n            return dataItem.category;\r\n        }\r\n    };\r\n    Object.defineProperty(CategoryAxis.prototype, \"basePoint\", {\r\n        /**\r\n         * Coordinates of the actual axis start.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Base point\r\n         */\r\n        get: function () {\r\n            // This makes base grid to be drawn at the end of the axis and adds extra\r\n            // grid which we need to nicely close the chart.\r\n            return this.renderer.positionToPoint(1);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Initializes Axis' renderer.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    CategoryAxis.prototype.initRenderer = function () {\r\n        _super.prototype.initRenderer.call(this);\r\n        var renderer = this.renderer;\r\n        renderer.baseGrid.disabled = true;\r\n    };\r\n    Object.defineProperty(CategoryAxis.prototype, \"frequency\", {\r\n        /**\r\n         * Current frequency of labels of the axis.\r\n         *\r\n         * Normally it would be 1, but when labels start to be hidden due\r\n         * to `minGridDistance` this read-only property will increase.\r\n         *\r\n         * @readonly\r\n         * @since 4.2.0\r\n         * @return Label frequency\r\n         */\r\n        get: function () {\r\n            return this._frequency;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return CategoryAxis;\r\n}(Axis));\r\nexport { CategoryAxis };\r\n/**\r\n * Register class, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"CategoryAxis\"] = CategoryAxis;\r\nregistry.registeredClasses[\"CategoryAxisDataItem\"] = CategoryAxisDataItem;\r\n//# sourceMappingURL=CategoryAxis.js.map","/**\r\n * XY series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Series, SeriesDataItem } from \"./Series\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { ValueAxis } from \"../axes/ValueAxis\";\r\nimport { Dictionary } from \"../../core/utils/Dictionary\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { XYChart } from \"../types/XYChart\";\r\nimport { CategoryAxis } from \"../axes/CategoryAxis\";\r\nimport { DateAxis } from \"../axes/DateAxis\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $time from \"../../core/utils/Time\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[XYSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar XYSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function XYSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"XYSeriesDataItem\";\r\n        _this.values.customValue = {};\r\n        _this.values.valueX = { stack: 0 };\r\n        _this.values.valueY = { stack: 0 };\r\n        _this.values.openValueX = {};\r\n        _this.values.openValueY = {};\r\n        _this.values.dateX = {};\r\n        _this.values.dateY = {};\r\n        _this.values.openDateX = {};\r\n        _this.values.openDateY = {};\r\n        _this.setLocation(\"dateX\", 0.5, 0);\r\n        _this.setLocation(\"dateY\", 0.5, 0);\r\n        _this.setLocation(\"categoryX\", 0.5, 0);\r\n        _this.setLocation(\"categoryY\", 0.5, 0);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"valueX\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.valueX.value;\r\n        },\r\n        /**\r\n         * Item's numeric value on X value axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"valueX\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"customValue\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.customValue.value;\r\n        },\r\n        /**\r\n         * Item's custom numeric value.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"customValue\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"valueY\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.valueY.value;\r\n        },\r\n        /**\r\n         * Item's numeric value on Y value axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"valueY\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"dateX\", {\r\n        /**\r\n         * @return Date\r\n         */\r\n        get: function () {\r\n            return this.getDate(\"dateX\");\r\n        },\r\n        /**\r\n         * Item's date value on X date-based axis.\r\n         *\r\n         * @param date  Date\r\n         */\r\n        set: function (date) {\r\n            this.setDate(\"dateX\", date);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"dateY\", {\r\n        /**\r\n         * @return Date\r\n         */\r\n        get: function () {\r\n            return this.getDate(\"dateY\");\r\n        },\r\n        /**\r\n         * Item's date value on Y date-based axis.\r\n         *\r\n         * @param date  Date\r\n         */\r\n        set: function (date) {\r\n            this.setDate(\"dateY\", date);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"categoryX\", {\r\n        /**\r\n         * @return Category\r\n         */\r\n        get: function () {\r\n            return this.categories.categoryX;\r\n        },\r\n        /**\r\n         * Item's category on X category axis.\r\n         *\r\n         * @param category  Category\r\n         */\r\n        set: function (category) {\r\n            this.setCategory(\"categoryX\", category);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"categoryY\", {\r\n        /**\r\n         * @return Category\r\n         */\r\n        get: function () {\r\n            return this.categories.categoryY;\r\n        },\r\n        /**\r\n         * Item's category on Y category axis.\r\n         *\r\n         * @param category  Category\r\n         */\r\n        set: function (category) {\r\n            this.setCategory(\"categoryY\", category);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"openValueX\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.openValueX.value;\r\n        },\r\n        /**\r\n         * Item's open numeric value on X value axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"openValueX\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"openValueY\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.openValueY.value;\r\n        },\r\n        /**\r\n         * Item's open numeric value on Y value axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"openValueY\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"openDateX\", {\r\n        /**\r\n         * @return Date\r\n         */\r\n        get: function () {\r\n            return this.getDate(\"openDateX\");\r\n        },\r\n        /**\r\n         * Item's open date value on X date-based axis.\r\n         *\r\n         * @param date  Date\r\n         */\r\n        set: function (date) {\r\n            this.setDate(\"openDateX\", date);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"openDateY\", {\r\n        /**\r\n         * @return Date\r\n         */\r\n        get: function () {\r\n            return this.getDate(\"openDateY\");\r\n        },\r\n        /**\r\n         * Item's open date value on Y date-based axis.\r\n         *\r\n         * @param date  Date\r\n         */\r\n        set: function (date) {\r\n            this.setDate(\"openDateY\", date);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"openCategoryX\", {\r\n        /**\r\n         * @return Category\r\n         */\r\n        get: function () {\r\n            return this.categories.openCategoryX;\r\n        },\r\n        /**\r\n         * Item's open category on X category axis.\r\n         *\r\n         * @param category  Category\r\n         */\r\n        set: function (category) {\r\n            this.setCategory(\"openCategoryX\", category);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeriesDataItem.prototype, \"openCategoryY\", {\r\n        /**\r\n         * @return Category\r\n         */\r\n        get: function () {\r\n            return this.categories.openCategoryY;\r\n        },\r\n        /**\r\n         * Item's open category on Y category axis.\r\n         *\r\n         * @param category  Category\r\n         */\r\n        set: function (category) {\r\n            this.setCategory(\"openCategoryY\", category);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Return smallest value out of all item's value fields.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param fields      Fields to check in\r\n     * @param working     Include working (temporary) values\r\n     * @param stackValue  If item is in a stack, the value item starts as\r\n     * @return Value\r\n     */\r\n    XYSeriesDataItem.prototype.getMin = function (fields, working, stackValue) {\r\n        var _this = this;\r\n        //if (this.visible) {  // dumped because of non smooth zooming\r\n        var min;\r\n        if (!$type.isNumber(stackValue)) {\r\n            stackValue = 0;\r\n        }\r\n        $array.each(fields, function (field) {\r\n            var value;\r\n            if (working) {\r\n                value = _this.getWorkingValue(field);\r\n            }\r\n            else {\r\n                value = _this.getValue(field);\r\n            }\r\n            value += stackValue;\r\n            if (value < min || !$type.isNumber(min)) {\r\n                min = value;\r\n            }\r\n        });\r\n        return min;\r\n        //}\r\n    };\r\n    /**\r\n     * Return biggest value out of all item's value fields.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param fields      Fields to check in\r\n     * @param working     Include working (temporary) values\r\n     * @param stackValue  If item is in a stack, the value item starts as\r\n     * @return Value\r\n     */\r\n    XYSeriesDataItem.prototype.getMax = function (fields, working, stackValue) {\r\n        var _this = this;\r\n        //if (this.visible) { // dumped because of non smooth zooming\r\n        var max;\r\n        if (!$type.isNumber(stackValue)) {\r\n            stackValue = 0;\r\n        }\r\n        $array.each(fields, function (field) {\r\n            var value;\r\n            if (working) {\r\n                value = _this.getWorkingValue(field);\r\n            }\r\n            else {\r\n                value = _this.getValue(field);\r\n            }\r\n            value += stackValue;\r\n            if (value > max || !$type.isNumber(max)) {\r\n                max = value;\r\n            }\r\n        });\r\n        return max;\r\n        //}\r\n    };\r\n    return XYSeriesDataItem;\r\n}(SeriesDataItem));\r\nexport { XYSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines Series for [[XYChart]].\r\n *\r\n * @see {@link IXYSeriesEvents} for a list of available Events\r\n * @see {@link IXYSeriesAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar XYSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function XYSeries() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Indicates which of the series' `dataFields` to calculate aggregate values\r\n         * for.\r\n         *\r\n         * Available data fields for all [[XYSeries]] are:\r\n         * `valueX`, `valueY`, `openValueX`, and `openValueY`.\r\n         *\r\n         * [[CandlestickSeries]] adds:\r\n         * `lowValueX`, `lowValueY`, `highValueX`, and `highValueY`.\r\n         *\r\n         * Available options:\r\n         * `\"open\"`, `\"close\"`, `\"low\"`, `\"high\"`, \"average\", `\"sum\"`.\r\n         *\r\n         * Defaults are as follows:\r\n         * * `valueX`: `\"close\"`\r\n         * * `valueY`: `\"close\"`\r\n         * * `openValueX`: `\"open\"`\r\n         * * `openValueY`: `\"open\"`\r\n         * * `lowValueX`: `\"low\"`\r\n         * * `lowValueY`: `\"low\"`\r\n         * * `highValueX`: `\"high\"`\r\n         * * `highValueY`: `\"high\"`\r\n         *\r\n         * Is required only if data being plotted on a `DateAxis` and\r\n         * its `groupData` is set to `true`.\r\n         *\r\n         * ```TypeScript\r\n         * let dateAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n         * dateAxis.groupData = true;\r\n         *\r\n         * let valueAxis = chart.xAxes.push(new am4charts.valueAxis());\r\n         *\r\n         * let series = chart.series.push(new am4charts.LineSeries());\r\n         * series.dataFields.dateX = \"date\";\r\n         * series.dataFields.valueY = \"value\";\r\n         * series.groupFields.valueY = \"average\";\r\n         * ```\r\n         * ```JavaScript\r\n         * var dateAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n         * dateAxis.groupData = true;\r\n         *\r\n         * var valueAxis = chart.xAxes.push(new am4charts.valueAxis());\r\n         *\r\n         * var series = chart.series.push(new am4charts.LineSeries());\r\n         * series.dataFields.dateX = \"date\";\r\n         * series.dataFields.valueY = \"value\";\r\n         * series.groupFields.valueY = \"average\";\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"xAxes\": [{\r\n         *     \"type\": \"DateAxis\",\r\n         *     \"groupData\": true\r\n         *   }],\r\n         *   \"yAxes\": [{\r\n         *     \"type\": \"ValueAxis\"\r\n         *   }],\r\n         *   \"series\": [{\r\n         *     \"type\": \"LineSeries\",\r\n         *     \"dataFields\": {\r\n         *       \"dateX\": \"date\",\r\n         *       \"valueY\": \"value\"\r\n         *     },\r\n         *     \"groupFields\": {\r\n         *       \"valueY\": \"average\"\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * The above setup will ensure, that if there are many data items within\r\n         * selected range, they will be grouped into aggregated data points, using\r\n         * average value of all the values.\r\n         *\r\n         * For example if we have 2 years worth of daily data (~700 data items), when\r\n         * fully zoomed out, the chart would show ~100 data items instead: one for\r\n         * each week in those two years.\r\n         *\r\n         * Grouping will occur automatically, based on current selection range, and\r\n         * will change dynamically when user zooms in/out the chart.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/date-axis/#Dynamic_data_item_grouping} for more information about dynamic data item grouping.\r\n         * @since 4.7.0\r\n         */\r\n        _this.groupFields = {};\r\n        /**\r\n         * X axis the series is attached to.\r\n         */\r\n        _this._xAxis = new MutableValueDisposer();\r\n        /**\r\n         * Y axis the series is attached to.\r\n         */\r\n        _this._yAxis = new MutableValueDisposer();\r\n        /**\r\n         * [_xValueFields description]\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._xValueFields = [];\r\n        /**\r\n         * [_yValueFields description]\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._yValueFields = [];\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this._baseInterval = {};\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this.dataGrouped = false;\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this.usesShowFields = false;\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this._dataSetChanged = false;\r\n        _this.className = \"XYSeries\";\r\n        _this.isMeasured = false;\r\n        _this.groupFields.valueX = \"close\";\r\n        _this.groupFields.valueY = \"close\";\r\n        _this.groupFields.customValue = \"close\";\r\n        _this.groupFields.openValueX = \"open\";\r\n        _this.groupFields.openValueY = \"open\";\r\n        _this.cursorTooltipEnabled = true;\r\n        _this.cursorHoverEnabled = true;\r\n        _this.excludeFromTotal = false;\r\n        _this.mainContainer.mask = new Sprite();\r\n        _this.mainContainer.mask.setElement(_this.paper.add(\"path\"));\r\n        _this.stacked = false;\r\n        _this.snapTooltip = false;\r\n        _this.tooltip.pointerOrientation = \"horizontal\";\r\n        _this.hideTooltipWhileZooming = true;\r\n        _this.tooltip.events.on(\"hidden\", function () {\r\n            _this.returnBulletDefaultState();\r\n        }, undefined, false);\r\n        _this._disposers.push(_this._xAxis);\r\n        _this._disposers.push(_this._yAxis);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    XYSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"X/Y Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    XYSeries.prototype.createDataItem = function () {\r\n        return new XYSeriesDataItem();\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYSeries.prototype.dataChangeUpdate = function () {\r\n        this._tmin.clear();\r\n        this._tmax.clear();\r\n        this._smin.clear();\r\n        this._smax.clear();\r\n        if (this.xAxis) {\r\n            this.xAxis.seriesDataChangeUpdate(this);\r\n        }\r\n        if (this.yAxis) {\r\n            this.yAxis.seriesDataChangeUpdate(this);\r\n        }\r\n    };\r\n    /**\r\n     * (Re)validates the series' data.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYSeries.prototype.validateData = function () {\r\n        this._baseInterval = {};\r\n        var dataFields = this.dataFields;\r\n        if (dataFields.valueYShow || dataFields.openValueXShow || dataFields.openValueXShow || dataFields.openValueYShow) {\r\n            this.usesShowFields = true;\r\n        }\r\n        else {\r\n            this.usesShowFields = false;\r\n        }\r\n        this.defineFields();\r\n        if (this.data.length > 0) {\r\n            this.dataChangeUpdate();\r\n        }\r\n        _super.prototype.validateData.call(this);\r\n        this.updateItemReaderText();\r\n        if (this.chart) {\r\n            if (!$type.hasValue(this.dataFields[this._xField]) || !$type.hasValue(this.dataFields[this._yField])) {\r\n                throw Error(\"Data fields for series \\\"\" + (this.name ? this.name : this.uid) + \"\\\" are not properly defined.\");\r\n            }\r\n        }\r\n        this.dataGrouped = false;\r\n    };\r\n    /**\r\n     * Processes data item.\r\n     *\r\n     * @param dataItem     Data item\r\n     * @param dataContext  Raw data\r\n     * @param index        Index of the data item\r\n     */\r\n    XYSeries.prototype.processDataItem = function (dataItem, dataContext) {\r\n        try {\r\n            _super.prototype.processDataItem.call(this, dataItem, dataContext);\r\n            this.xAxis.processSeriesDataItem(dataItem, \"X\");\r\n            this.yAxis.processSeriesDataItem(dataItem, \"Y\");\r\n            this.setInitialWorkingValues(dataItem);\r\n        }\r\n        catch (e) {\r\n            if (this._chart) {\r\n                this._chart.raiseCriticalError(e);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * When validating raw data, instead of processing data item, we update it\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param item\r\n     */\r\n    XYSeries.prototype.updateDataItem = function (dataItem) {\r\n        _super.prototype.updateDataItem.call(this, dataItem);\r\n        //dataItem.events.disable();\r\n        this.xAxis.processSeriesDataItem(dataItem, \"X\");\r\n        this.yAxis.processSeriesDataItem(dataItem, \"Y\");\r\n        //dataItem.events.enable();\t\t\r\n    };\r\n    /**\r\n     * Inits data item's working values.\r\n     *\r\n     * @param dataItem  Data item\r\n     * @param index     Data item's index\r\n     */\r\n    XYSeries.prototype.setInitialWorkingValues = function (dataItem) {\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYSeries.prototype.disposeData = function () {\r\n        _super.prototype.disposeData.call(this);\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (xAxis) {\r\n            var dataItemsX = this.dataItemsByAxis.getKey(xAxis.uid);\r\n            if (dataItemsX) {\r\n                dataItemsX.clear();\r\n            }\r\n            if (xAxis instanceof CategoryAxis) {\r\n                this.clearCatAxis(xAxis);\r\n            }\r\n        }\r\n        if (yAxis) {\r\n            var dataItemsY = this.dataItemsByAxis.getKey(yAxis.uid);\r\n            if (dataItemsY) {\r\n                dataItemsY.clear();\r\n            }\r\n            if (yAxis instanceof CategoryAxis) {\r\n                this.clearCatAxis(yAxis);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYSeries.prototype.clearCatAxis = function (axis) {\r\n        var uid = this.uid;\r\n        axis.dataItems.each(function (dataItem) {\r\n            if (dataItem.seriesDataItems[uid]) {\r\n                dataItem.seriesDataItems[uid] = [];\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Sets up which data fields to use for data access.\r\n     */\r\n    XYSeries.prototype.defineFields = function () {\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (xAxis && yAxis) {\r\n            var xAxisFieldName = xAxis.axisFieldName;\r\n            var xField = (xAxisFieldName + \"X\");\r\n            var xOpenField = (\"open\" + $utils.capitalize(xAxisFieldName) + \"X\");\r\n            var yAxisFieldName = yAxis.axisFieldName;\r\n            var yField = (yAxisFieldName + \"Y\");\r\n            var yOpenField = (\"open\" + $utils.capitalize(yAxisFieldName) + \"Y\");\r\n            this._xField = xField;\r\n            this._yField = yField;\r\n            if (this.dataFields[xOpenField]) {\r\n                this._xOpenField = xOpenField;\r\n            }\r\n            if (this.dataFields[yOpenField]) {\r\n                this._yOpenField = yOpenField;\r\n            }\r\n            if (!this.dataFields[yOpenField] && this.baseAxis == yAxis) {\r\n                this._yOpenField = yField;\r\n            }\r\n            if (!this.dataFields[xOpenField] && this.baseAxis == xAxis) {\r\n                this._xOpenField = xField;\r\n            }\r\n            if (this.stacked && this.baseAxis == xAxis) {\r\n                this._xOpenField = xField;\r\n            }\r\n            if (this.stacked && this.baseAxis == yAxis) {\r\n                this._yOpenField = yField;\r\n            }\r\n            if ((xAxis instanceof CategoryAxis) && (yAxis instanceof CategoryAxis)) {\r\n                if (!this._yOpenField) {\r\n                    this._yOpenField = yField;\r\n                }\r\n            }\r\n            this._xValueFields = [];\r\n            this._yValueFields = [];\r\n            this.addValueField(xAxis, this._xValueFields, this._xField);\r\n            this.addValueField(xAxis, this._xValueFields, this._xOpenField);\r\n            this.addValueField(yAxis, this._yValueFields, this._yField);\r\n            this.addValueField(yAxis, this._yValueFields, this._yOpenField);\r\n        }\r\n    };\r\n    /**\r\n     * [axis description]\r\n     *\r\n     * @todo Description\r\n     * @param axis    Axis\r\n     * @param fields  Fields (?)\r\n     * @param field   Field\r\n     */\r\n    XYSeries.prototype.addValueField = function (axis, fields, field) {\r\n        if (axis instanceof ValueAxis) {\r\n            if ($type.hasValue(this.dataFields[field]) && fields.indexOf(field) == -1) {\r\n                fields.push(field);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Sets category field from the category axis.\r\n     *\r\n     * User might set field for category axis only, but not for series. In such\r\n     * case, we take field value from axis and set it for series.\r\n     *\r\n     * @param field  Field\r\n     * @param axis   Axis\r\n     */\r\n    XYSeries.prototype.setCategoryAxisField = function (field, axis) {\r\n        if (!$type.hasValue(this.dataFields[field])) {\r\n            this.dataFields[field] = axis.dataFields.category;\r\n        }\r\n    };\r\n    /**\r\n     * Sets date field from the date axis.\r\n     *\r\n     * User might set field for category axis only, but not for series. In such\r\n     * case, we take field value from axis and set it for series.\r\n     *\r\n     * @param field  Field\r\n     * @param axis   Axis\r\n     */\r\n    XYSeries.prototype.setDateAxisField = function (field, axis) {\r\n        if (!$type.hasValue(this.dataFields[field])) {\r\n            this.dataFields[field] = axis.dataFields.date;\r\n        }\r\n    };\r\n    /**\r\n     * Performs after-draw tasks, e.g. creates masks.\r\n     */\r\n    XYSeries.prototype.afterDraw = function () {\r\n        _super.prototype.afterDraw.call(this);\r\n        this.createMask();\r\n    };\r\n    /**\r\n     * Create a mask for the series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYSeries.prototype.createMask = function () {\r\n        // this mask from which we cut out ranges. does not work well if ranges overlap.\r\n        if (this.mainContainer.mask) {\r\n            var path_1 = this.getMaskPath();\r\n            // @todo: this approach won't work well on circluar or other non x/y axes\r\n            $iter.each(this.axisRanges.iterator(), function (range) {\r\n                if (range.axisFill.fillPath) {\r\n                    range.axisFill.validate();\r\n                    path_1 += range.axisFill.fillPath;\r\n                }\r\n            });\r\n            this.mainContainer.mask.path = path_1;\r\n        }\r\n    };\r\n    /**\r\n     * Returns an SVG path to use as series mask.\r\n     *\r\n     * @return SVG path\r\n     */\r\n    XYSeries.prototype.getMaskPath = function () {\r\n        if (this.xAxis && this.yAxis) {\r\n            return $path.rectToPath({\r\n                x: 0,\r\n                y: 0,\r\n                width: this.xAxis.axisLength,\r\n                height: this.yAxis.axisLength\r\n            });\r\n        }\r\n        return \"\";\r\n    };\r\n    /**\r\n     * Returns axis data field to use.\r\n     *\r\n     * @param axis  Axis\r\n     * @return Field name\r\n     */\r\n    XYSeries.prototype.getAxisField = function (axis) {\r\n        if (axis == this.xAxis) {\r\n            return this.xField;\r\n        }\r\n        if (axis == this.yAxis) {\r\n            return this.yField;\r\n        }\r\n    };\r\n    /**\r\n     * Validates data items.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYSeries.prototype.validateDataItems = function () {\r\n        // this helps date axis to check which baseInterval we should use\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (xAxis && yAxis) {\r\n            xAxis.updateAxisBySeries();\r\n            yAxis.updateAxisBySeries();\r\n        }\r\n        _super.prototype.validateDataItems.call(this);\r\n        if (xAxis && yAxis) {\r\n            xAxis.postProcessSeriesDataItems();\r\n            yAxis.postProcessSeriesDataItems();\r\n        }\r\n    };\r\n    /**\r\n     * Validates data range.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYSeries.prototype.validateDataRange = function () {\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (xAxis && yAxis) {\r\n            if (xAxis.dataRangeInvalid) {\r\n                xAxis.validateDataRange();\r\n            }\r\n            if (yAxis.dataRangeInvalid) {\r\n                yAxis.validateDataRange();\r\n            }\r\n        }\r\n        _super.prototype.validateDataRange.call(this);\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYSeries.prototype.validate = function () {\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (xAxis && yAxis) {\r\n            if (xAxis.invalid) {\r\n                xAxis.validate();\r\n            }\r\n            if (yAxis.invalid) {\r\n                yAxis.validate();\r\n            }\r\n            this.y = yAxis.pixelY;\r\n            this.x = xAxis.pixelX;\r\n            this._showBullets = true;\r\n            var minBulletDistance = this.minBulletDistance;\r\n            if ($type.isNumber(minBulletDistance)) {\r\n                if (this.baseAxis.axisLength / (this.endIndex - this.startIndex) < minBulletDistance) {\r\n                    this._showBullets = false;\r\n                }\r\n            }\r\n        }\r\n        _super.prototype.validate.call(this);\r\n    };\r\n    Object.defineProperty(XYSeries.prototype, \"xAxis\", {\r\n        /**\r\n         * @return Axis\r\n         */\r\n        get: function () {\r\n            if (this.chart) {\r\n                if (!this._xAxis.get()) {\r\n                    var axis = this.chart.xAxes.getIndex(0);\r\n                    if (!axis) {\r\n                        throw Error(\"There are no X axes on chart.\");\r\n                    }\r\n                    this.xAxis = axis;\r\n                }\r\n                return this._xAxis.get();\r\n            }\r\n        },\r\n        /**\r\n         * X axis the series is attached to.\r\n         *\r\n         * @param axis  Axis\r\n         */\r\n        set: function (axis) {\r\n            this.setXAxis(axis);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    XYSeries.prototype.setXAxis = function (axis) {\r\n        var oldAxis = this._xAxis.get();\r\n        if (oldAxis != axis) {\r\n            if (oldAxis) {\r\n                this.dataItemsByAxis.removeKey(oldAxis.uid);\r\n                // TODO why is this here ?\r\n                this._xAxis.dispose();\r\n                // temp @todo: why it is not disposed?\r\n                oldAxis.series.removeValue(this);\r\n            }\r\n            this._xAxis.set(axis, axis.registerSeries(this));\r\n            this.dataItemsByAxis.setKey(axis.uid, new Dictionary());\r\n            this.invalidateData();\r\n        }\r\n    };\r\n    Object.defineProperty(XYSeries.prototype, \"yAxis\", {\r\n        /**\r\n         * @return Axis\r\n         */\r\n        get: function () {\r\n            if (this.chart) {\r\n                if (!this._yAxis.get()) {\r\n                    var axis = this.chart.yAxes.getIndex(0);\r\n                    if (!axis) {\r\n                        throw Error(\"There are no Y axes on chart.\");\r\n                    }\r\n                    this.yAxis = axis;\r\n                }\r\n                return this._yAxis.get();\r\n            }\r\n        },\r\n        /**\r\n         * Y axis the series is attached to.\r\n         *\r\n         * @param axis  Axis\r\n         */\r\n        set: function (axis) {\r\n            this.setYAxis(axis);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    XYSeries.prototype.setYAxis = function (axis) {\r\n        var oldAxis = this._yAxis.get();\r\n        if (oldAxis != axis) {\r\n            if (oldAxis) {\r\n                this.dataItemsByAxis.removeKey(oldAxis.uid);\r\n                // TODO why is this here ?\r\n                this._yAxis.dispose();\r\n                // temp @todo: why it is not disposed?\r\n                oldAxis.series.removeValue(this);\r\n            }\r\n            this._yAxis.set(axis, axis.registerSeries(this));\r\n            if (axis.chart instanceof XYChart) {\r\n                axis.chart.handleYAxisSet(this);\r\n            }\r\n            this.dataItemsByAxis.setKey(axis.uid, new Dictionary());\r\n            this.invalidateData();\r\n        }\r\n    };\r\n    Object.defineProperty(XYSeries.prototype, \"baseAxis\", {\r\n        /**\r\n         * @return Axis\r\n         */\r\n        get: function () {\r\n            var xAxis = this.xAxis;\r\n            var yAxis = this.yAxis;\r\n            if (!this._baseAxis && xAxis && yAxis) {\r\n                if (yAxis instanceof DateAxis) {\r\n                    this._baseAxis = yAxis;\r\n                }\r\n                if (xAxis instanceof DateAxis) {\r\n                    this._baseAxis = xAxis;\r\n                }\r\n                if (yAxis instanceof CategoryAxis) {\r\n                    this._baseAxis = yAxis;\r\n                }\r\n                if (xAxis instanceof CategoryAxis) {\r\n                    this._baseAxis = xAxis;\r\n                }\r\n                if (!this._baseAxis) {\r\n                    this._baseAxis = xAxis;\r\n                }\r\n            }\r\n            return this._baseAxis;\r\n        },\r\n        /**\r\n         * The main (base) axis.\r\n         *\r\n         * This is the axis that series fills will go to, or grow animations will\r\n         * happen from.\r\n         *\r\n         * @param value  Axis\r\n         */\r\n        set: function (value) {\r\n            if (this._baseAxis != value) {\r\n                this._baseAxis = value;\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Makes the chart use particular data set.\r\n     *\r\n     * If `id` is not provided or there is no such data set, main data will be\r\n     * used.\r\n     *\r\n     * @ignore\r\n     * @since 4.7.0\r\n     * @param  id  Data set id\r\n     */\r\n    XYSeries.prototype.setDataSet = function (id) {\r\n        var changed = _super.prototype.setDataSet.call(this, id);\r\n        if (changed) {\r\n            this._dataSetChanged = true;\r\n            var dataItems = this.dataItems;\r\n            var xAxis = this.xAxis;\r\n            var yAxis = this.yAxis;\r\n            if (xAxis instanceof DateAxis && xAxis == this.baseAxis) {\r\n                this._tmin.setKey(xAxis.uid, dataItems.getIndex(0).dateX.getTime());\r\n                this._tmax.setKey(xAxis.uid, dataItems.getIndex(dataItems.length - 1).dateX.getTime());\r\n                this.dispatchImmediately(\"extremeschanged\");\r\n            }\r\n            if (yAxis instanceof DateAxis && yAxis == this.baseAxis) {\r\n                this._tmin.setKey(yAxis.uid, dataItems.getIndex(0).dateY.getTime());\r\n                this._tmax.setKey(yAxis.uid, dataItems.getIndex(dataItems.length - 1).dateY.getTime());\r\n                this.dispatchImmediately(\"extremeschanged\");\r\n            }\r\n        }\r\n        return changed;\r\n    };\r\n    /**\r\n     * Processes values after data items' were added.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItems  Data items\r\n     */\r\n    XYSeries.prototype.processValues = function (working) {\r\n        _super.prototype.processValues.call(this, working);\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (!xAxis || !yAxis) {\r\n            return;\r\n        }\r\n        var dataItems = this.dataItems;\r\n        var minX = Infinity;\r\n        var maxX = -Infinity;\r\n        var minY = Infinity;\r\n        var maxY = -Infinity;\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        var workingStartIndex = startIndex;\r\n        var workingEndIndex = endIndex;\r\n        if (!working) {\r\n            startIndex = 0;\r\n            endIndex = this.dataItems.length;\r\n        }\r\n        for (var i = startIndex; i < endIndex; i++) {\r\n            var dataItem = dataItems.getIndex(i);\r\n            this.getStackValue(dataItem, working);\r\n            var stackX = dataItem.getValue(\"valueX\", \"stack\");\r\n            var stackY = dataItem.getValue(\"valueY\", \"stack\");\r\n            minX = $math.min(dataItem.getMin(this._xValueFields, working, stackX), minX);\r\n            minY = $math.min(dataItem.getMin(this._yValueFields, working, stackY), minY);\r\n            maxX = $math.max(dataItem.getMax(this._xValueFields, working, stackX), maxX);\r\n            maxY = $math.max(dataItem.getMax(this._yValueFields, working, stackY), maxY);\r\n            // if it's stacked, pay attention to stack value\r\n            if (this.stacked) {\r\n                if (this.baseAxis == xAxis) {\r\n                    if (stackY < minY) {\r\n                        minY = stackY;\r\n                    }\r\n                    if (stackY > maxY) {\r\n                        maxY = stackY;\r\n                    }\r\n                }\r\n                if (this.baseAxis == yAxis) {\r\n                    if (stackX < minX) {\r\n                        minX = stackX;\r\n                    }\r\n                    if (stackX > maxX) {\r\n                        maxX = stackX;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // this is mainly for value axis to calculate total and perecent.total of each series category\r\n        xAxis.processSeriesDataItems();\r\n        yAxis.processSeriesDataItems();\r\n        var xAxisId = xAxis.uid;\r\n        var yAxisId = yAxis.uid;\r\n        if (this.xAxis instanceof ValueAxis && (minX == Infinity || maxX == -Infinity)) {\r\n            return;\r\n        }\r\n        if (this.yAxis instanceof ValueAxis && (minY == Infinity || maxY == -Infinity)) {\r\n            return;\r\n        }\r\n        if (!working) {\r\n            if (this._tmin.getKey(xAxisId) != minX || this._tmax.getKey(xAxisId) != maxX || this._tmin.getKey(yAxisId) != minY || this._tmax.getKey(yAxisId) != maxY) {\r\n                this._tmin.setKey(xAxisId, minX);\r\n                this._tmax.setKey(xAxisId, maxX);\r\n                this._tmin.setKey(yAxisId, minY);\r\n                this._tmax.setKey(yAxisId, maxY);\r\n                var stackedSeries = this.stackedSeries;\r\n                if (stackedSeries) {\r\n                    if (stackedSeries.isDisposed()) {\r\n                        this.stackedSeries = undefined;\r\n                    }\r\n                    else {\r\n                        stackedSeries.processValues(false);\r\n                    }\r\n                }\r\n                this.dispatchImmediately(\"extremeschanged\");\r\n            }\r\n        }\r\n        if (startIndex != workingStartIndex || endIndex != workingEndIndex) {\r\n            minX = Infinity;\r\n            maxX = -Infinity;\r\n            minY = Infinity;\r\n            maxY = -Infinity;\r\n            for (var i = workingStartIndex; i < workingEndIndex; i++) {\r\n                var dataItem = dataItems.getIndex(i);\r\n                this.getStackValue(dataItem, working);\r\n                var stackX = dataItem.getValue(\"valueX\", \"stack\");\r\n                var stackY = dataItem.getValue(\"valueY\", \"stack\");\r\n                minX = $math.min(dataItem.getMin(this._xValueFields, working, stackX), minX);\r\n                minY = $math.min(dataItem.getMin(this._yValueFields, working, stackY), minY);\r\n                maxX = $math.max(dataItem.getMax(this._xValueFields, working, stackX), maxX);\r\n                maxY = $math.max(dataItem.getMax(this._yValueFields, working, stackY), maxY);\r\n                // if it's stacked, pay attention to stack value\r\n                if (this.stacked) {\r\n                    if (this.baseAxis == xAxis) {\r\n                        if (stackY < minY) {\r\n                            minY = stackY;\r\n                        }\r\n                        if (stackY > maxY) {\r\n                            maxY = stackY;\r\n                        }\r\n                    }\r\n                    if (this.baseAxis == yAxis) {\r\n                        if (stackX < minX) {\r\n                            minX = stackX;\r\n                        }\r\n                        if (stackX > maxX) {\r\n                            maxX = stackX;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.xAxis instanceof ValueAxis && (minX == Infinity || maxX == -Infinity)) {\r\n            return;\r\n        }\r\n        if (this.yAxis instanceof ValueAxis && (minY == Infinity || maxY == -Infinity)) {\r\n            return;\r\n        }\r\n        if (this._smin.getKey(xAxisId) != minX || this._smax.getKey(xAxisId) != maxX || this._smin.getKey(yAxisId) != minY || this._smax.getKey(yAxisId) != maxY) {\r\n            this._smin.setKey(xAxisId, minX);\r\n            this._smax.setKey(xAxisId, maxX);\r\n            this._smin.setKey(yAxisId, minY);\r\n            this._smax.setKey(yAxisId, maxY);\r\n            if (this.appeared || this.start != 0 || this.end != 1 || this.dataItems != this.mainDataSet) {\r\n                /// new, helps to handle issues with change percent\r\n                var changed = false;\r\n                if (yAxis instanceof ValueAxis && !(yAxis instanceof DateAxis)) {\r\n                    var tmin = this._tmin.getKey(yAxisId);\r\n                    if (!$type.isNumber(tmin) || ((this.usesShowFields || this._dataSetChanged) && minY < tmin)) {\r\n                        this._tmin.setKey(yAxisId, minY);\r\n                        changed = true;\r\n                    }\r\n                    var tmax = this._tmax.getKey(yAxisId);\r\n                    if (!$type.isNumber(tmax) || ((this.usesShowFields || this._dataSetChanged) && maxY > tmax)) {\r\n                        this._tmax.setKey(yAxisId, maxY);\r\n                        changed = true;\r\n                    }\r\n                }\r\n                if (xAxis instanceof ValueAxis && !(xAxis instanceof DateAxis)) {\r\n                    var tmin = this._tmin.getKey(xAxisId);\r\n                    if (!$type.isNumber(tmin) || ((this.usesShowFields || this._dataSetChanged) && minX < tmin)) {\r\n                        this._tmin.setKey(xAxisId, minX);\r\n                        changed = true;\r\n                    }\r\n                    var tmax = this._tmax.getKey(xAxisId);\r\n                    if (!$type.isNumber(tmax) || ((this.usesShowFields || this._dataSetChanged) && maxX > tmax)) {\r\n                        this._tmax.setKey(xAxisId, maxX);\r\n                        changed = true;\r\n                    }\r\n                }\r\n                if (changed) {\r\n                    this.dispatchImmediately(\"extremeschanged\");\r\n                }\r\n                this.dispatchImmediately(\"selectionextremeschanged\");\r\n            }\r\n        }\r\n        if (!working && this.stacked) {\r\n            this.processValues(true);\r\n        }\r\n        this._dataSetChanged = false;\r\n    };\r\n    /**\r\n     * Hides element's [[Tooltip]].\r\n     *\r\n     * @see {@link Tooltip}\r\n     */\r\n    XYSeries.prototype.hideTooltip = function () {\r\n        _super.prototype.hideTooltip.call(this);\r\n        this.returnBulletDefaultState();\r\n        this._prevTooltipDataItem = undefined;\r\n    };\r\n    /**\r\n     * Shows series tooltip at specific position.\r\n     *\r\n     * @param xPosition  X\r\n     * @param yPosition  Y\r\n     */\r\n    XYSeries.prototype.showTooltipAtPosition = function (xPosition, yPosition) {\r\n        var dataItem;\r\n        if (this.visible && !this.isHiding && !this.isShowing) {\r\n            var xAxis = this._xAxis.get();\r\n            var yAxis = this._yAxis.get();\r\n            if (xAxis == this.baseAxis) {\r\n                dataItem = xAxis.getSeriesDataItem(this, xAxis.toAxisPosition(xPosition), this.snapTooltip);\r\n            }\r\n            if (yAxis == this.baseAxis) {\r\n                dataItem = yAxis.getSeriesDataItem(this, yAxis.toAxisPosition(yPosition), this.snapTooltip);\r\n            }\r\n            var point = this.showTooltipAtDataItem(dataItem);\r\n            if (point) {\r\n                return point;\r\n            }\r\n            // so that if tooltip is shown on columns or bullets for it not to be hidden\r\n            if (!this.tooltipText) {\r\n                return;\r\n            }\r\n        }\r\n        this.hideTooltip();\r\n    };\r\n    XYSeries.prototype.getAdjustedXLocation = function (dataItem, field) {\r\n        return dataItem.locations[field];\r\n    };\r\n    XYSeries.prototype.getAdjustedYLocation = function (dataItem, field) {\r\n        return dataItem.locations[field];\r\n    };\r\n    /**\r\n     * Shows series tooltip at specific dataItem.\r\n     *\r\n     * @param dataItem\r\n     */\r\n    XYSeries.prototype.showTooltipAtDataItem = function (dataItem) {\r\n        var cursor = this.chart.cursor;\r\n        if (cursor && cursor.hideSeriesTooltipsOnSelection && cursor.selection.visible && cursor.downPoint) {\r\n            this.hideTooltip();\r\n            return;\r\n        }\r\n        this.returnBulletDefaultState(dataItem);\r\n        if (dataItem && dataItem.visible) {\r\n            this.updateLegendValue(dataItem);\r\n            if (this.cursorTooltipEnabled) {\r\n                this.tooltipDataItem = dataItem;\r\n                // todo: add tooltipXField and tooltipYField.\r\n                var tooltipXField = this.tooltipXField;\r\n                var tooltipYField = this.tooltipYField;\r\n                if ($type.hasValue(dataItem[tooltipXField]) && $type.hasValue(dataItem[tooltipYField])) {\r\n                    var tooltipPoint = this.getPoint(dataItem, tooltipXField, tooltipYField, this.getAdjustedXLocation(dataItem, tooltipXField), this.getAdjustedYLocation(dataItem, tooltipYField));\r\n                    if (tooltipPoint) {\r\n                        this.tooltipX = tooltipPoint.x;\r\n                        this.tooltipY = tooltipPoint.y;\r\n                        if (this._prevTooltipDataItem != dataItem) {\r\n                            this.dispatchImmediately(\"tooltipshownat\", {\r\n                                type: \"tooltipshownat\",\r\n                                target: this,\r\n                                dataItem: dataItem\r\n                            });\r\n                            this._prevTooltipDataItem = dataItem;\r\n                        }\r\n                        if (this.cursorHoverEnabled) {\r\n                            try {\r\n                                for (var _a = tslib_1.__values(dataItem.sprites), _b = _a.next(); !_b.done; _b = _a.next()) {\r\n                                    var sprite = _b.value;\r\n                                    if (!sprite.parent.visible || sprite.isHidden || sprite.__disabled || sprite.disabled || sprite.isHiding) {\r\n                                    }\r\n                                    else {\r\n                                        sprite.isHover = true;\r\n                                    }\r\n                                }\r\n                            }\r\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n                            finally {\r\n                                try {\r\n                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\r\n                                }\r\n                                finally { if (e_1) throw e_1.error; }\r\n                            }\r\n                        }\r\n                        if (this.showTooltip()) {\r\n                            return $utils.spritePointToSvg({ x: tooltipPoint.x, y: tooltipPoint.y }, this);\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.updateLegendValue(dataItem, true);\r\n        }\r\n        var e_1, _c;\r\n    };\r\n    /**\r\n     * returns default state to bullets when tooltip is shown at some other data item or hidden\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYSeries.prototype.returnBulletDefaultState = function (dataItem) {\r\n        if (this._prevTooltipDataItem && this._prevTooltipDataItem != dataItem) {\r\n            try {\r\n                for (var _a = tslib_1.__values(this._prevTooltipDataItem.sprites), _b = _a.next(); !_b.done; _b = _a.next()) {\r\n                    var sprite = _b.value;\r\n                    if (!sprite.isDisposed()) {\r\n                        sprite.isHover = false;\r\n                    }\r\n                    else {\r\n                        this._prevTooltipDataItem = undefined;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        }\r\n        var e_2, _c;\r\n    };\r\n    XYSeries.prototype.shouldCreateBullet = function (dataItem, bulletTemplate) {\r\n        // use series xField/yField if bullet doesn't have fields set\r\n        var xField = bulletTemplate.xField;\r\n        if (!$type.hasValue(xField)) {\r\n            xField = this.xField;\r\n        }\r\n        var yField = bulletTemplate.yField;\r\n        if (!$type.hasValue(yField)) {\r\n            yField = this.yField;\r\n        }\r\n        if ((this.xAxis instanceof ValueAxis && !dataItem.hasValue([xField])) || (this.yAxis instanceof ValueAxis && !dataItem.hasValue([yField]))) {\r\n            return false;\r\n        }\r\n        if (bulletTemplate.disabled) {\r\n            var disabledField = bulletTemplate.propertyFields.disabled;\r\n            var dataContext = dataItem.dataContext;\r\n            if (dataContext && dataContext[disabledField] === false) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    XYSeries.prototype.positionBullet = function (bullet) {\r\n        _super.prototype.positionBullet.call(this, bullet);\r\n        var dataItem = bullet.dataItem;\r\n        // use series xField/yField if bullet doesn't have fields set\r\n        var xField = bullet.xField;\r\n        if (!$type.hasValue(xField)) {\r\n            xField = this.xField;\r\n        }\r\n        var yField = bullet.yField;\r\n        if (!$type.hasValue(yField)) {\r\n            yField = this.yField;\r\n        }\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if ((xAxis instanceof ValueAxis && !dataItem.hasValue([xField])) || (yAxis instanceof ValueAxis && !dataItem.hasValue([yField]))) {\r\n            bullet.visible = false;\r\n        }\r\n        else {\r\n            var bulletLocationX = this.getBulletLocationX(bullet, xField);\r\n            var bulletLocationY = this.getBulletLocationY(bullet, yField);\r\n            var point = this.getPoint(dataItem, xField, yField, bulletLocationX, bulletLocationY);\r\n            if (point) {\r\n                var xOpenField = this.xOpenField;\r\n                var yOpenField = this.yOpenField;\r\n                var positionX = void 0;\r\n                var positionY = void 0;\r\n                if (xAxis instanceof DateAxis) {\r\n                    if (!$type.isNumber(bulletLocationX)) {\r\n                        bulletLocationX = 0;\r\n                    }\r\n                    var openValue = void 0;\r\n                    var closeValue = dataItem.getWorkingValue(xField);\r\n                    if (!xOpenField) {\r\n                        if (xAxis == this.baseAxis) {\r\n                            openValue = xAxis.baseValue;\r\n                        }\r\n                    }\r\n                    else {\r\n                        openValue = dataItem.getWorkingValue(xOpenField);\r\n                    }\r\n                    if (!$type.isNumber(openValue)) {\r\n                        openValue = closeValue;\r\n                    }\r\n                    var stack = dataItem.getValue(\"valueX\", \"stack\");\r\n                    openValue += stack;\r\n                    closeValue += stack;\r\n                    if (openValue == closeValue) {\r\n                        var baseInterval = xAxis.baseInterval;\r\n                        var dateFormatter = xAxis.dateFormatter;\r\n                        openValue = $time.round(new Date(openValue), baseInterval.timeUnit, baseInterval.count, dateFormatter.firstDayOfWeek, dateFormatter.utc).getTime();\r\n                        closeValue = $time.add(new Date(openValue), baseInterval.timeUnit, baseInterval.count, dateFormatter.utc).getTime();\r\n                    }\r\n                    var middleValue = void 0;\r\n                    if (xAxis == this.baseAxis) {\r\n                        middleValue = openValue + (closeValue - openValue) * bulletLocationX;\r\n                    }\r\n                    else {\r\n                        middleValue = openValue + (closeValue - openValue) * (1 - bulletLocationX);\r\n                    }\r\n                    positionX = xAxis.valueToPosition(middleValue);\r\n                }\r\n                else if (xAxis instanceof ValueAxis) {\r\n                    if (!$type.isNumber(bulletLocationX)) {\r\n                        bulletLocationX = 0;\r\n                    }\r\n                    var openValue = void 0;\r\n                    var closeValue = dataItem.getWorkingValue(xField);\r\n                    if (!xOpenField) {\r\n                        openValue = xAxis.baseValue;\r\n                    }\r\n                    else {\r\n                        openValue = dataItem.getWorkingValue(xOpenField);\r\n                    }\r\n                    var stack = dataItem.getValue(\"valueX\", \"stack\");\r\n                    openValue += stack;\r\n                    closeValue += stack;\r\n                    var middleValue = openValue + (closeValue - openValue) * (1 - bulletLocationX);\r\n                    positionX = xAxis.valueToPosition(middleValue);\r\n                }\r\n                else if (xAxis instanceof CategoryAxis) {\r\n                    var rightLocation = this.getAdjustedXLocation(dataItem, xField);\r\n                    var leftLocation = this.getAdjustedXLocation(dataItem, xOpenField);\r\n                    positionX = xAxis.categoryToPosition(dataItem[xField], rightLocation);\r\n                    var openPositionX = void 0;\r\n                    if (xOpenField) {\r\n                        openPositionX = xAxis.categoryToPosition(dataItem[xOpenField], leftLocation);\r\n                    }\r\n                    if (!$type.isNumber(openPositionX)) {\r\n                        openPositionX = 1;\r\n                    }\r\n                    positionX = openPositionX + (positionX - openPositionX) * bulletLocationX;\r\n                }\r\n                if (yAxis instanceof DateAxis) {\r\n                    if (!$type.isNumber(bulletLocationY)) {\r\n                        bulletLocationY = 0;\r\n                    }\r\n                    var openValue = void 0;\r\n                    var closeValue = dataItem.getWorkingValue(yField);\r\n                    if (!yOpenField) {\r\n                        if (yAxis == this.baseAxis) {\r\n                            openValue = yAxis.baseValue;\r\n                        }\r\n                    }\r\n                    else {\r\n                        openValue = dataItem.getWorkingValue(yOpenField);\r\n                    }\r\n                    if (!$type.isNumber(openValue)) {\r\n                        openValue = closeValue;\r\n                    }\r\n                    var stack = dataItem.getValue(\"valueY\", \"stack\");\r\n                    openValue += stack;\r\n                    closeValue += stack;\r\n                    if (openValue == closeValue) {\r\n                        var baseInterval = yAxis.baseInterval;\r\n                        var dateFormatter = yAxis.dateFormatter;\r\n                        openValue = $time.round(new Date(openValue), baseInterval.timeUnit, baseInterval.count, dateFormatter.firstDayOfWeek, dateFormatter.utc).getTime();\r\n                        closeValue = $time.add(new Date(openValue), baseInterval.timeUnit, baseInterval.count, dateFormatter.utc).getTime();\r\n                    }\r\n                    var middleValue = void 0;\r\n                    if (yAxis == this.baseAxis) {\r\n                        middleValue = openValue + (closeValue - openValue) * bulletLocationY;\r\n                    }\r\n                    else {\r\n                        middleValue = openValue + (closeValue - openValue) * (1 - bulletLocationY);\r\n                    }\r\n                    positionY = yAxis.valueToPosition(middleValue);\r\n                }\r\n                else if (yAxis instanceof ValueAxis) {\r\n                    if (!$type.isNumber(bulletLocationY)) {\r\n                        bulletLocationY = 0;\r\n                    }\r\n                    var openValue = void 0;\r\n                    var closeValue = dataItem.getWorkingValue(yField);\r\n                    if (!yOpenField) {\r\n                        openValue = yAxis.baseValue;\r\n                    }\r\n                    else {\r\n                        openValue = dataItem.getWorkingValue(yOpenField);\r\n                    }\r\n                    var stack = dataItem.getValue(\"valueY\", \"stack\");\r\n                    openValue += stack;\r\n                    closeValue += stack;\r\n                    var middleValue = openValue + (closeValue - openValue) * (1 - bulletLocationY);\r\n                    positionY = yAxis.valueToPosition(middleValue);\r\n                }\r\n                else if (yAxis instanceof CategoryAxis) {\r\n                    positionY = yAxis.categoryToPosition(dataItem[yField], bulletLocationY);\r\n                    var topLocation = this.getAdjustedYLocation(dataItem, yField);\r\n                    var bottomLocation = this.getAdjustedYLocation(dataItem, yOpenField);\r\n                    positionY = yAxis.categoryToPosition(dataItem[yField], topLocation);\r\n                    var openPositionY = void 0;\r\n                    if (yOpenField) {\r\n                        openPositionY = yAxis.categoryToPosition(dataItem[yOpenField], bottomLocation);\r\n                    }\r\n                    if (!$type.isNumber(openPositionY)) {\r\n                        openPositionY = 1;\r\n                    }\r\n                    positionY = openPositionY + (positionY - openPositionY) * bulletLocationY;\r\n                }\r\n                bullet.visible = true;\r\n                this.positionBulletReal(bullet, positionX, positionY);\r\n            }\r\n            else {\r\n                bullet.visible = false;\r\n            }\r\n        }\r\n    };\r\n    XYSeries.prototype.positionBulletReal = function (bullet, positionX, positionY) {\r\n        bullet.x = this.xAxis.renderer.positionToPoint(positionX, positionY).x;\r\n        bullet.y = this.yAxis.renderer.positionToPoint(positionY, positionX).y;\r\n    };\r\n    /**\r\n    * returns bullet x location\r\n    * @ignore\r\n    */\r\n    XYSeries.prototype.getBulletLocationX = function (bullet, field) {\r\n        var bulletLocation = bullet.locationX;\r\n        var dataItem = bullet.dataItem;\r\n        if (!$type.isNumber(bulletLocation)) {\r\n            bulletLocation = dataItem.workingLocations[field];\r\n        }\r\n        return bulletLocation;\r\n    };\r\n    /**\r\n    * returns bullet x location\r\n    * @ignore\r\n    */\r\n    XYSeries.prototype.getBulletLocationY = function (bullet, field) {\r\n        var bulletLocation = bullet.locationY;\r\n        var dataItem = bullet.dataItem;\r\n        if (!$type.isNumber(bulletLocation)) {\r\n            bulletLocation = dataItem.workingLocations[field];\r\n        }\r\n        return bulletLocation;\r\n    };\r\n    Object.defineProperty(XYSeries.prototype, \"stacked\", {\r\n        /**\r\n         * @return Can be stacked?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"stacked\");\r\n        },\r\n        /**\r\n         * Can items from this series be included into stacks?\r\n         *\r\n         * Note: proper stacking is only possible if series have the same number\r\n         * of data items. To ensure this, don't set data directly on series\r\n         * but do this on chart instead.\r\n         *\r\n         * @default false\r\n         * @param stacked  Can be stacked?\r\n         */\r\n        set: function (stacked) {\r\n            this.setPropertyValue(\"stacked\", stacked, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"snapTooltip\", {\r\n        /**\r\n         * @return Should snap?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"snapTooltip\");\r\n        },\r\n        /**\r\n         * Should the nearest tooltip be shown if no data item is found on the\r\n         * current cursor position? In order this to work, you should set snapTooltip = false on the series baseAxis.\r\n         *\r\n         * @default false\r\n         * @param value  Should snap?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"snapTooltip\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Shows hidden series.\r\n     *\r\n     * @param duration  Duration of reveal animation (ms)\r\n     * @return Animation\r\n     */\r\n    XYSeries.prototype.show = function (duration) {\r\n        var _this = this;\r\n        var fields;\r\n        if (this.xAxis instanceof ValueAxis && this.xAxis != this.baseAxis) {\r\n            fields = this._xValueFields;\r\n        }\r\n        if (this.yAxis instanceof ValueAxis && this.yAxis != this.baseAxis) {\r\n            fields = this._yValueFields;\r\n        }\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        var delay = 0;\r\n        var interpolationDuration = this.defaultState.transitionDuration;\r\n        if ($type.isNumber(duration)) {\r\n            interpolationDuration = duration;\r\n        }\r\n        var anim;\r\n        $iter.each($iter.indexed(this.dataItems.iterator()), function (a) {\r\n            var i = a[0];\r\n            var dataItem = a[1];\r\n            if (_this.sequencedInterpolation && interpolationDuration > 0) {\r\n                delay = _this.sequencedInterpolationDelay * i + interpolationDuration * (i - startIndex) / (endIndex - startIndex);\r\n            }\r\n            anim = dataItem.show(interpolationDuration, delay, fields);\r\n        });\r\n        // other data sets\r\n        this.dataSets.each(function (key, dataSet) {\r\n            if (dataSet != _this.dataItems) {\r\n                dataSet.each(function (dataItem) {\r\n                    dataItem.events.disable();\r\n                    dataItem.show(0, 0, fields);\r\n                    dataItem.events.enable();\r\n                });\r\n            }\r\n        });\r\n        if (this.mainDataSet != this.dataItems) {\r\n            this.mainDataSet.each(function (dataItem) {\r\n                dataItem.events.disable();\r\n                dataItem.show(0, 0, fields);\r\n                dataItem.events.enable();\r\n            });\r\n        }\r\n        var animation = _super.prototype.show.call(this, duration);\r\n        if (anim && !anim.isFinished()) {\r\n            animation = anim;\r\n        }\r\n        if (this.hidden) {\r\n            this.dispatchImmediately(\"selectionextremeschanged\");\r\n            this.hidden = false;\r\n        }\r\n        return animation;\r\n    };\r\n    /**\r\n     * Hides series.\r\n     *\r\n     * @param duration  Duration of hiding animation (ms)\r\n     * @return Animation\r\n     */\r\n    XYSeries.prototype.hide = function (duration) {\r\n        var _this = this;\r\n        var fields;\r\n        var value;\r\n        var xAxis = this.xAxis;\r\n        if (xAxis instanceof ValueAxis && xAxis != this.baseAxis) {\r\n            fields = this._xValueFields;\r\n            // animate to zero if 0 is within zoomMin/zoomMax\r\n            if (this.stacked || (xAxis.minZoomed < xAxis.baseValue && xAxis.maxZoomed > xAxis.baseValue) || this.stackedSeries) {\r\n                value = xAxis.baseValue;\r\n            }\r\n            else {\r\n                value = xAxis.min;\r\n            }\r\n        }\r\n        var yAxis = this.yAxis;\r\n        if (yAxis instanceof ValueAxis && yAxis != this.baseAxis) {\r\n            fields = this._yValueFields;\r\n            // animate to zero if 0 is within zoomMin/zoomMax\r\n            if (this.stacked || (yAxis.minZoomed < yAxis.baseValue && yAxis.maxZoomed > yAxis.baseValue) || this.stackedSeries) {\r\n                value = yAxis.baseValue;\r\n            }\r\n            else {\r\n                value = yAxis.min;\r\n            }\r\n        }\r\n        //if ($type.hasValue(fields)) {\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        var interpolationDuration = this.hiddenState.transitionDuration;\r\n        if ($type.isNumber(duration)) {\r\n            interpolationDuration = duration;\r\n        }\r\n        var delay = 0;\r\n        var anim;\r\n        $iter.each($iter.indexed(this.dataItems.iterator()), function (a) {\r\n            var i = a[0];\r\n            var dataItem = a[1];\r\n            if (interpolationDuration == 0) {\r\n                dataItem.hide(0, 0, value, fields);\r\n            }\r\n            else {\r\n                if (_this.sequencedInterpolation && interpolationDuration > 0) {\r\n                    delay = _this.sequencedInterpolationDelay * i + interpolationDuration * (i - startIndex) / (endIndex - startIndex);\r\n                }\r\n                anim = dataItem.hide(interpolationDuration, delay, value, fields);\r\n            }\r\n        });\r\n        var animation = _super.prototype.hide.call(this, interpolationDuration);\r\n        if (animation && !animation.isFinished()) {\r\n            animation.delay(delay);\r\n        }\r\n        if (anim && !anim.isFinished()) {\r\n            animation = anim;\r\n        }\r\n        // helps to avoid flicker. otherwise columns will show up at full size and only on next frame will animate from 0\r\n        this.validateDataElements();\r\n        //}\r\n        return animation;\r\n    };\r\n    /**\r\n     * [handleDataItemWorkingValueChange description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYSeries.prototype.handleDataItemWorkingValueChange = function (dataItem, name) {\r\n        _super.prototype.handleDataItemWorkingValueChange.call(this, dataItem, name);\r\n        // to calculate stack values\r\n        var axisSeries = this.baseAxis.series;\r\n        $iter.each(axisSeries.iterator(), function (series) {\r\n            if (series.stacked) {\r\n                series.invalidateProcessedData();\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * [getStackValue description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param dataItem  Data item\r\n     */\r\n    XYSeries.prototype.getStackValue = function (dataItem, working) {\r\n        // todo: here wer stack x and y values only. question is - what should we do with other values, like openX, openY?\r\n        // if this series is not stacked or new stack begins, return.\r\n        var _this = this;\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (!this.stacked || !xAxis || !yAxis) {\r\n            return;\r\n        }\r\n        else {\r\n            // it might seem that it's better to go through base axis series, but we do not maintain the same order as in chart.series there.\r\n            var chart = this.chart;\r\n            var index = chart.series.indexOf(this);\r\n            var field_1;\r\n            if (xAxis != this.baseAxis && xAxis instanceof ValueAxis) {\r\n                field_1 = this.xField;\r\n            }\r\n            if (yAxis != this.baseAxis && yAxis instanceof ValueAxis) {\r\n                field_1 = this.yField;\r\n            }\r\n            if (!field_1) {\r\n                return;\r\n            }\r\n            //this is good for removing series, otherwise stack values will remain the same and chart won't pay atention when adding/removing series\t\t\t\r\n            dataItem.setCalculatedValue(field_1, 0, \"stack\");\r\n            $iter.eachContinue(chart.series.range(0, index).backwards().iterator(), function (prevSeries) {\r\n                // stacking is only possible if both axes are the same\r\n                if (prevSeries.xAxis == xAxis && prevSeries.yAxis == yAxis) {\r\n                    // saving value\r\n                    prevSeries.stackedSeries = _this;\r\n                    var prevDataItem = prevSeries.dataItems.getIndex(dataItem.index); // indexes should match\r\n                    if (prevDataItem && prevDataItem.hasValue(_this._xValueFields) && prevDataItem.hasValue(_this._yValueFields)) {\r\n                        var value = dataItem.getValue(field_1);\r\n                        var prevValue = void 0;\r\n                        var prevRealValue = prevDataItem.getValue(field_1) + prevDataItem.getValue(field_1, \"stack\");\r\n                        if (working) {\r\n                            prevValue = prevDataItem.getWorkingValue(field_1) + prevDataItem.getValue(field_1, \"stack\");\r\n                        }\r\n                        else {\r\n                            prevValue = prevDataItem.getValue(field_1) + prevDataItem.getValue(field_1, \"stack\");\r\n                        }\r\n                        if ((value >= 0 && prevRealValue >= 0) || (value < 0 && prevRealValue < 0)) {\r\n                            //dataItem.events.disable();\r\n                            dataItem.setCalculatedValue(field_1, prevValue, \"stack\");\r\n                            //dataItem.events.enable();\r\n                            return false;\r\n                        }\r\n                    }\r\n                    else if (!prevSeries.stacked) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n    };\r\n    Object.defineProperty(XYSeries.prototype, \"xField\", {\r\n        /**\r\n         * [xField description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this._xField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"yField\", {\r\n        /**\r\n         * [yField description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this._yField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"xOpenField\", {\r\n        /**\r\n         * [xOpenField description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this._xOpenField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"yOpenField\", {\r\n        /**\r\n         * [yOpenField description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this._yOpenField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"tooltipXField\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            if (this._tooltipXField) {\r\n                return this._tooltipXField;\r\n            }\r\n            return this._xField;\r\n        },\r\n        /**\r\n         * [tooltipXField description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @param value [description]\r\n         */\r\n        set: function (value) {\r\n            this._tooltipXField = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"tooltipYField\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            if (this._tooltipYField) {\r\n                return this._tooltipYField;\r\n            }\r\n            return this._yField;\r\n        },\r\n        /**\r\n         * [tooltipYField description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         * @param value [description]\r\n         */\r\n        set: function (value) {\r\n            this._tooltipYField = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns lowest value in the series for the specific axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis  Axis\r\n     * @return value\r\n     */\r\n    XYSeries.prototype.min = function (axis) {\r\n        return this._tmin.getKey(axis.uid);\r\n    };\r\n    /**\r\n     * Returns highest value in the series for the specific axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis  Axis\r\n     * @return value\r\n     */\r\n    XYSeries.prototype.max = function (axis) {\r\n        return this._tmax.getKey(axis.uid);\r\n    };\r\n    /**\r\n     * Returns lowest value in the series for the specific axis within current\r\n     * selection.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis  Axis\r\n     * @return value\r\n     */\r\n    XYSeries.prototype.selectionMin = function (axis) {\r\n        var value = this._smin.getKey(axis.uid);\r\n        if (!$type.isNumber(value)) {\r\n            value = this.min(axis);\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * Returns highest value in the series for the specific axis within current\r\n     * selection.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis  Axis\r\n     * @return value\r\n     */\r\n    XYSeries.prototype.selectionMax = function (axis) {\r\n        var value = this._smax.getKey(axis.uid);\r\n        if (!$type.isNumber(value)) {\r\n            value = this.max(axis);\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    XYSeries.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Set up base axes\r\n            if ($type.hasValue(config.baseAxis) && $type.isString(config.baseAxis)) {\r\n                if (this.map.hasKey(config.baseAxis)) {\r\n                    config.baseAxis = this.map.getKey(config.baseAxis);\r\n                }\r\n                else {\r\n                    this.processingErrors.push(\"[XYSeries (\" + (this.name || \"unnamed\") + \")] No axis with id \\\"\" + config.baseAxis + \"\\\" found for `baseAxis`.\");\r\n                    delete config.baseAxis;\r\n                }\r\n            }\r\n            // Set up axes\r\n            if ($type.hasValue(config.xAxis) && $type.isString(config.xAxis)) {\r\n                if (this.map.hasKey(config.xAxis)) {\r\n                    config.xAxis = this.map.getKey(config.xAxis);\r\n                }\r\n                else {\r\n                    this.processingErrors.push(\"[XYSeries (\" + (this.name || \"unnamed\") + \")] No axis with id \\\"\" + config.xAxis + \"\\\" found for `xAxis`.\");\r\n                    delete config.xAxis;\r\n                }\r\n            }\r\n            if ($type.hasValue(config.yAxis) && $type.isString(config.yAxis)) {\r\n                if (this.map.hasKey(config.yAxis)) {\r\n                    config.yAxis = this.map.getKey(config.yAxis);\r\n                }\r\n                else {\r\n                    this.processingErrors.push(\"[XYSeries (\" + (this.name || \"unnamed\") + \")] No axis with id \\\"\" + config.yAxis + \"\\\" found for `yAxis`.\");\r\n                    delete config.yAxis;\r\n                }\r\n            }\r\n            // Set up axis ranges\r\n            if ($type.hasValue(config.axisRanges) && $type.isArray(config.axisRanges)) {\r\n                for (var i = 0, len = config.axisRanges.length; i < len; i++) {\r\n                    var range = config.axisRanges[i];\r\n                    if (!$type.hasValue(range.type)) {\r\n                        range.type = \"AxisDataItem\";\r\n                    }\r\n                    if ($type.hasValue(range.axis) && $type.isString(range.axis) && this.map.hasKey(range.axis)) {\r\n                        range.component = this.map.getKey(range.axis);\r\n                    }\r\n                    else if ($type.hasValue(range.component) && $type.isString(range.component) && this.map.hasKey(range.component)) {\r\n                        range.component = this.map.getKey(range.component);\r\n                    }\r\n                }\r\n            }\r\n            // Parse date fields based on the series fields\r\n            if (!$type.hasValue(config.dataFields) || !$type.isObject(config.dataFields)) {\r\n                this.processingErrors.push(\"`dataFields` is not set for series [\" + (this.name || \"unnamed\") + \"]\");\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    /**\r\n     * Returns an [[IPoint]] coordinates of the specific Serie's data point.\r\n     *\r\n     * @param    dataItem   Data item\r\n     * @param    xKey       Name of X data field\r\n     * @param    yKey       Name of Y data field\r\n     * @param    locationX  X location\r\n     * @param    locationY  Y location\r\n     * @param    stackKeyX  ?\r\n     * @param    stackKeyY  ?\r\n     * @returns             Coordinates\r\n     */\r\n    XYSeries.prototype.getPoint = function (dataItem, xKey, yKey, locationX, locationY, stackKeyX, stackKeyY) {\r\n        if (this.xAxis && this.yAxis) {\r\n            var x = this.xAxis.getX(dataItem, xKey, locationX);\r\n            var y = this.yAxis.getY(dataItem, yKey, locationY);\r\n            x = $math.fitToRange(x, -100000, 100000); // from geometric point of view this is not right, but practically it's ok. this is done to avoid too big objects.\r\n            y = $math.fitToRange(y, -100000, 100000); // from geometric point of view this is not right, but practically it's ok. this is done to avoid too big objects.\r\n            return { x: x, y: y };\r\n        }\r\n    };\r\n    /**\r\n     * Updates item reader text based on the type and set up of axis.\r\n     */\r\n    XYSeries.prototype.updateItemReaderText = function () {\r\n        // We do not want to overwrite this if `itemReaderText` was changed by\r\n        // user code.\r\n        if (this._itemReaderTextChanged) {\r\n            return;\r\n        }\r\n        var text = \"\";\r\n        $object.each(this.dataFields, function (key, val) {\r\n            text += \"{\" + key + \"} \";\r\n        });\r\n        this.itemReaderText = text;\r\n        this._itemReaderTextChanged = false;\r\n    };\r\n    Object.defineProperty(XYSeries.prototype, \"cursorTooltipEnabled\", {\r\n        /**\r\n         * @return Display tooltip?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cursorTooltipEnabled\");\r\n        },\r\n        /**\r\n         * Indicates if series should display a tooltip for chart's cursor.\r\n         *\r\n         * If set to `true` (default), the tooltips set for all series item's\r\n         * elements like columns and bullets will be automatically shown\r\n         * when [[XYCursor]] passes over category/date, even if its not hovered\r\n         * directly over the item.\r\n         *\r\n         * Set this to `false` to disable such behavior and display item-specific\r\n         * tooltips only when hovered directly over them\r\n         *\r\n         * @default true\r\n         * @param value Display tooltip?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"cursorTooltipEnabled\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"cursorHoverEnabled\", {\r\n        /**\r\n         * @return Hover enabled?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cursorHoverEnabled\");\r\n        },\r\n        /**\r\n         * Indicates if series should apply hover state on bullets/columns/etc when\r\n         * cursor is over the data item.\r\n         *\r\n         * If set to `true` (default) and chart cursor is enabled on th chart,\r\n         * hovering over date/category will trigger hover states on related Series\r\n         * items like bullets and columns.\r\n         *\r\n         * @default true\r\n         * @since 4.2.2\r\n         * @param  value  Hover enabled?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"cursorHoverEnabled\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"excludeFromTotal\", {\r\n        /**\r\n         * @return Exclude from totals?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"excludeFromTotal\");\r\n        },\r\n        /**\r\n         * Indicates if series' values should be excluded when calculating totals.\r\n         *\r\n         * @default false\r\n         * @since 4.4.9\r\n         * @param  value  Exclude from totals?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"excludeFromTotal\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYSeries.prototype, \"hideTooltipWhileZooming\", {\r\n        /**\r\n         * @return Hide tooltip while zooming?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"hideTooltipWhileZooming\");\r\n        },\r\n        /**\r\n         * Indicates if series' tooltip should be hidden while series axis range is\r\n         * animating (zooming).\r\n         *\r\n         * @default true\r\n         * @since 4.7.16\r\n         * @param  value  Hide tooltip while zooming?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"hideTooltipWhileZooming\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return XYSeries;\r\n}(Series));\r\nexport { XYSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"XYSeries\"] = XYSeries;\r\nregistry.registeredClasses[\"XYSeriesDataItem\"] = XYSeriesDataItem;\r\n//# sourceMappingURL=XYSeries.js.map","/**\r\n * A module with functionality for buildin a scrollbar with an XY graph in it.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Scrollbar } from \"../../core/elements/Scrollbar\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { XYChart } from \"../types/XYChart\";\r\nimport { ValueAxis } from \"../axes/ValueAxis\";\r\nimport { DateAxis } from \"../axes/DateAxis\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { DesaturateFilter } from \"../../core/rendering/filters/DesaturateFilter\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A special version of the Scrollbar that has an XY chart in it.\r\n *\r\n * Used mainly as an advanced scrollbar with a preview for other XY charts.\r\n *\r\n * However, can be used as standalone element.\r\n *\r\n * @see {@link IXYChartScrollbarEvents} for a list of available events\r\n * @see {@link IXYChartScrollbarAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar XYChartScrollbar = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYChartScrollbar, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function XYChartScrollbar() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * A chart element Scrollbar is for.\r\n         */\r\n        _this._chart = new MutableValueDisposer();\r\n        _this.className = \"XYChartScrollbar\";\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.padding(0, 0, 0, 0);\r\n        var scrollbarChart = _this.createChild(XYChart);\r\n        scrollbarChart.shouldClone = false;\r\n        scrollbarChart.margin(0, 0, 0, 0);\r\n        scrollbarChart.padding(0, 0, 0, 0);\r\n        scrollbarChart.interactionsEnabled = false;\r\n        _this._scrollbarChart = scrollbarChart;\r\n        _this._disposers.push(_this._scrollbarChart);\r\n        _this.minHeight = 60;\r\n        _this.minWidth = 60;\r\n        var unselectedOverlay = _this.createChild(Sprite);\r\n        unselectedOverlay.shouldClone = false;\r\n        unselectedOverlay.setElement(_this.paper.add(\"path\"));\r\n        unselectedOverlay.fill = interfaceColors.getFor(\"background\");\r\n        unselectedOverlay.fillOpacity = 0.8;\r\n        unselectedOverlay.interactionsEnabled = false;\r\n        unselectedOverlay.isMeasured = false;\r\n        unselectedOverlay.toBack();\r\n        _this._unselectedOverlay = unselectedOverlay;\r\n        _this._disposers.push(_this._unselectedOverlay);\r\n        scrollbarChart.toBack();\r\n        _this.background.cornerRadius(0, 0, 0, 0);\r\n        var thumbBackground = _this.thumb.background;\r\n        thumbBackground.cornerRadius(0, 0, 0, 0);\r\n        thumbBackground.fillOpacity = 0;\r\n        thumbBackground.fill = interfaceColors.getFor(\"background\");\r\n        var hoverState = thumbBackground.states.getKey(\"hover\");\r\n        if (hoverState) {\r\n            hoverState.properties.fillOpacity = 0.2;\r\n        }\r\n        var downState = thumbBackground.states.getKey(\"down\");\r\n        if (downState) {\r\n            downState.properties.fillOpacity = 0.4;\r\n        }\r\n        _this._disposers.push(_this._chart);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(XYChartScrollbar.prototype, \"series\", {\r\n        /**\r\n         * A list of series that are used to draw graph(s) on the scrollbar.\r\n         *\r\n         * @readonly\r\n         * @return Series\r\n         */\r\n        get: function () {\r\n            if (!this._series) {\r\n                this._series = new List();\r\n                this._disposers.push(this._series.events.on(\"inserted\", this.handleSeriesAdded, this, false));\r\n                this._disposers.push(this._series.events.on(\"removed\", this.handleSeriesRemoved, this, false));\r\n            }\r\n            return this._series;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Decorates a new series when they are pushed into a `series` list.\r\n     *\r\n     * @param event Event\r\n     */\r\n    XYChartScrollbar.prototype.handleSeriesAdded = function (event) {\r\n        var sourceSeries = event.newValue;\r\n        if (!sourceSeries.xAxis || !sourceSeries.yAxis) {\r\n            return;\r\n        }\r\n        var scrollbarChart = this.scrollbarChart;\r\n        scrollbarChart.zoomOutButton.disabled = true;\r\n        this.chart = sourceSeries.chart;\r\n        // Ensure that scrollbar chart shares the same locale as parent chart\r\n        scrollbarChart.language.locale = this.chart.language.locale;\r\n        var addXAxis = true;\r\n        var addYAxis = true;\r\n        // check if we haven't added clone of x or y axis before\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            if (series != sourceSeries) {\r\n                if (series.xAxis == sourceSeries.xAxis) {\r\n                    addXAxis = false;\r\n                }\r\n                if (series.yAxis == sourceSeries.yAxis) {\r\n                    addYAxis = false;\r\n                }\r\n            }\r\n        });\r\n        var interfaceColors = new InterfaceColorSet();\r\n        var series = sourceSeries.clone();\r\n        if (addXAxis) {\r\n            var xAxis = sourceSeries.xAxis.clone();\r\n            scrollbarChart.xAxes.moveValue(xAxis);\r\n            xAxis.title.disabled = true;\r\n            xAxis.rangeChangeDuration = 0;\r\n            //xAxis.id = sourceSeries.uid;\r\n            var renderer = xAxis.renderer;\r\n            renderer.ticks.template.disabled = true;\r\n            renderer.inside = true;\r\n            renderer.labels.template.inside = true;\r\n            renderer.line.strokeOpacity = 0;\r\n            renderer.minLabelPosition = 0.02;\r\n            renderer.maxLabelPosition = 0.98;\r\n            renderer.line.disabled = true;\r\n            renderer.axisFills.template.disabled = true;\r\n            renderer.baseGrid.disabled = true;\r\n            renderer.grid.template.strokeOpacity = 0.05;\r\n            renderer.minWidth = undefined;\r\n            renderer.minHeight = undefined;\r\n            renderer.padding(0, 0, 0, 0);\r\n            renderer.chart = scrollbarChart;\r\n            renderer.margin(0, 0, 0, 0);\r\n            xAxis.width = percent(100);\r\n            var labelsTemplate = renderer.labels.template;\r\n            labelsTemplate.fillOpacity = 0.5;\r\n            xAxis.maxZoomCount = undefined;\r\n            xAxis.minZoomCount = undefined;\r\n            if (xAxis instanceof DateAxis) {\r\n                var vAxis_1 = xAxis;\r\n                var sourceAxis = sourceSeries.xAxis;\r\n                xAxis.groupCount = sourceAxis.groupCount * 5;\r\n                this._disposers.push(vAxis_1.clonedFrom.events.on(\"extremeschanged\", function () {\r\n                    if ($type.isNumber(vAxis_1.clonedFrom.minDefined)) {\r\n                        vAxis_1.min = vAxis_1.clonedFrom.minDefined;\r\n                    }\r\n                    if ($type.isNumber(vAxis_1.clonedFrom.maxDefined)) {\r\n                        vAxis_1.max = vAxis_1.clonedFrom.maxDefined;\r\n                    }\r\n                }, undefined, false));\r\n            }\r\n            else if (xAxis instanceof ValueAxis) {\r\n                var vAxis_2 = xAxis;\r\n                if (!$type.isNumber(vAxis_2.clonedFrom.minDefined)) {\r\n                    vAxis_2.min = undefined;\r\n                }\r\n                if (!$type.isNumber(vAxis_2.clonedFrom.maxDefined)) {\r\n                    vAxis_2.max = undefined;\r\n                }\r\n                this._disposers.push(vAxis_2.clonedFrom.events.on(\"extremeschanged\", function () {\r\n                    if ($type.isNumber(vAxis_2.clonedFrom.minDefined)) {\r\n                        vAxis_2.min = vAxis_2.clonedFrom.min;\r\n                    }\r\n                    if ($type.isNumber(vAxis_2.clonedFrom.maxDefined)) {\r\n                        vAxis_2.max = vAxis_2.clonedFrom.max;\r\n                    }\r\n                }, undefined, false));\r\n            }\r\n            series.xAxis = xAxis;\r\n        }\r\n        else {\r\n            this.scrollbarChart.xAxes.each(function (xAxis) {\r\n                if (xAxis.clonedFrom == sourceSeries.xAxis) {\r\n                    series.xAxis = xAxis;\r\n                }\r\n            });\r\n        }\r\n        if (addYAxis) {\r\n            var yAxis = sourceSeries.yAxis.clone();\r\n            scrollbarChart.yAxes.moveValue(yAxis);\r\n            yAxis.title.disabled = true;\r\n            yAxis.rangeChangeDuration = 0;\r\n            var renderer = yAxis.renderer;\r\n            renderer.ticks.template.disabled = true;\r\n            renderer.inside = true;\r\n            renderer.labels.template.inside = true;\r\n            renderer.line.strokeOpacity = 0;\r\n            renderer.minLabelPosition = 0.02;\r\n            renderer.maxLabelPosition = 0.98;\r\n            renderer.line.disabled = true;\r\n            renderer.axisFills.template.disabled = true;\r\n            renderer.grid.template.stroke = interfaceColors.getFor(\"background\");\r\n            renderer.baseGrid.disabled = true;\r\n            renderer.grid.template.strokeOpacity = 0.05;\r\n            renderer.minWidth = undefined;\r\n            renderer.minHeight = undefined;\r\n            renderer.chart = scrollbarChart;\r\n            renderer.padding(0, 0, 0, 0);\r\n            renderer.margin(0, 0, 0, 0);\r\n            yAxis.height = percent(100);\r\n            var labelsTemplate = renderer.labels.template;\r\n            labelsTemplate.fillOpacity = 0.5;\r\n            series.yAxis = yAxis;\r\n            yAxis.maxZoomCount = undefined;\r\n            yAxis.minZoomCount = undefined;\r\n            if (yAxis instanceof DateAxis) {\r\n                var vAxis_3 = yAxis;\r\n                var sourceAxis = sourceSeries.yAxis;\r\n                yAxis.groupCount = sourceAxis.groupCount * 5;\r\n                this._disposers.push(vAxis_3.clonedFrom.events.on(\"extremeschanged\", function () {\r\n                    if ($type.isNumber(vAxis_3.clonedFrom.minDefined)) {\r\n                        vAxis_3.min = vAxis_3.clonedFrom.minDefined;\r\n                    }\r\n                    if ($type.isNumber(vAxis_3.clonedFrom.maxDefined)) {\r\n                        vAxis_3.max = vAxis_3.clonedFrom.maxDefined;\r\n                    }\r\n                }));\r\n            }\r\n            else if (yAxis instanceof ValueAxis) {\r\n                var vAxis_4 = yAxis;\r\n                if (!$type.isNumber(vAxis_4.clonedFrom.minDefined)) {\r\n                    vAxis_4.min = undefined;\r\n                }\r\n                if (!$type.isNumber(vAxis_4.clonedFrom.maxDefined)) {\r\n                    vAxis_4.max = undefined;\r\n                }\r\n                this._disposers.push(vAxis_4.clonedFrom.events.on(\"extremeschanged\", function () {\r\n                    if ($type.isNumber(vAxis_4.clonedFrom.minDefined)) {\r\n                        vAxis_4.min = vAxis_4.clonedFrom.minDefined;\r\n                    }\r\n                    if ($type.isNumber(vAxis_4.clonedFrom.maxDefined)) {\r\n                        vAxis_4.max = vAxis_4.clonedFrom.maxDefined;\r\n                    }\r\n                }));\r\n            }\r\n        }\r\n        else {\r\n            this.scrollbarChart.yAxes.each(function (yAxis) {\r\n                if (yAxis.clonedFrom == sourceSeries.yAxis) {\r\n                    series.yAxis = yAxis;\r\n                }\r\n            });\r\n        }\r\n        series.rangeChangeDuration = 0;\r\n        series.interpolationDuration = 0;\r\n        series.defaultState.transitionDuration = 0;\r\n        series.showOnInit = false;\r\n        this._disposers.push(series.events.on(\"validated\", this.zoomOutAxes, this, false));\r\n        // data might be set drectly on series\r\n        this._disposers.push(sourceSeries.events.on(\"datavalidated\", function () {\r\n            if (series.data != sourceSeries.data) { // data setter doesn't check this\r\n                series.data = sourceSeries.data;\r\n            }\r\n        }, undefined, false));\r\n        series.defaultState.properties.visible = true;\r\n        series.filters.push(new DesaturateFilter());\r\n        scrollbarChart.series.push(series);\r\n        this.updateByOrientation();\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChartScrollbar.prototype.updateByOrientation = function () {\r\n        var _this = this;\r\n        if (this._scrollbarChart) {\r\n            $iter.each(this._scrollbarChart.xAxes.iterator(), function (xAxis) {\r\n                var renderer = xAxis.renderer;\r\n                if (_this.orientation == \"vertical\") {\r\n                    renderer.grid.template.disabled = true;\r\n                    renderer.labels.template.disabled = true;\r\n                    renderer.minGridDistance = 10;\r\n                }\r\n                else {\r\n                    renderer.grid.template.disabled = false;\r\n                    renderer.labels.template.disabled = false;\r\n                    renderer.minGridDistance = xAxis.clonedFrom.renderer.minGridDistance;\r\n                }\r\n            });\r\n            $iter.each(this._scrollbarChart.yAxes.iterator(), function (yAxis) {\r\n                var renderer = yAxis.renderer;\r\n                if (_this.orientation == \"horizontal\") {\r\n                    renderer.grid.template.disabled = true;\r\n                    renderer.labels.template.disabled = true;\r\n                    renderer.minGridDistance = 10;\r\n                }\r\n                else {\r\n                    renderer.grid.template.disabled = false;\r\n                    renderer.labels.template.disabled = false;\r\n                    renderer.minGridDistance = yAxis.clonedFrom.renderer.minGridDistance;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Cleans up after series are removed from Scrollbar.\r\n     *\r\n     * @param event  Event\r\n     */\r\n    XYChartScrollbar.prototype.handleSeriesRemoved = function (event) {\r\n        var sourceSeries = event.oldValue;\r\n        var scrollbarChart = this.scrollbarChart;\r\n        scrollbarChart.series.each(function (series) {\r\n            if (series.clonedFrom == sourceSeries) {\r\n                scrollbarChart.series.removeValue(series);\r\n            }\r\n        });\r\n        if (scrollbarChart.series.length == 0) {\r\n            scrollbarChart.xAxes.clear();\r\n            scrollbarChart.yAxes.clear();\r\n        }\r\n        try {\r\n            sourceSeries.events.off(\"validated\", this.zoomOutAxes, this);\r\n        }\r\n        catch (err) {\r\n        }\r\n    };\r\n    Object.defineProperty(XYChartScrollbar.prototype, \"scrollbarChart\", {\r\n        /**\r\n         * A chart element that is used to display graphs in the Scrollbar.\r\n         *\r\n         * This is not the same as `chart`. It's a totally independent instance of\r\n         * [[XYChart]] with separate config, series, etc.\r\n         *\r\n         * It can be configured just like any other [[XYChart]].\r\n         *\r\n         * @readonly\r\n         * @return Scrollbar's internal chart\r\n         */\r\n        get: function () {\r\n            return this._scrollbarChart;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChartScrollbar.prototype, \"chart\", {\r\n        /**\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart.get();\r\n        },\r\n        /**\r\n         * A chart that Scrollbar belongs to.\r\n         *\r\n         * @param chart  Chart\r\n         */\r\n        set: function (chart) {\r\n            if (this._chart.get() !== chart) {\r\n                this._chart.set(chart, chart.events.on(\"datavalidated\", this.handleDataChanged, this, false));\r\n                this.handleDataChanged();\r\n                this._scrollbarChart.dataProvider = chart; // this makes scrollbar chart do not validate data untill charts' data is validated\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChartScrollbar.prototype, \"unselectedOverlay\", {\r\n        /**\r\n         * A [[Sprite]] object representing overlay that is used to dim area of the\r\n         * scrollbar that is currently not selected.\r\n         *\r\n         * Use its `fillOpacity` to set opacity of the fill, with `0` (zero)\r\n         * completely disabling the dimming, and `1` making unselected area completely\r\n         * blank.\r\n         *\r\n         * @since 4.6.1\r\n         * @readonly\r\n         * @return Unselected area curtain element\r\n         */\r\n        get: function () {\r\n            return this._unselectedOverlay;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates Scrollbar's internal chart's data when the main chart's data\r\n     * changes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChartScrollbar.prototype.handleDataChanged = function () {\r\n        if (this.chart.data != this.scrollbarChart.data) {\r\n            this.scrollbarChart.data = this.chart.data;\r\n        }\r\n        this.scrollbarChart.invalidateData();\r\n    };\r\n    /**\r\n     * Zooms out all axes on the internal chart.\r\n     */\r\n    XYChartScrollbar.prototype.zoomOutAxes = function () {\r\n        var scrollbarChart = this.scrollbarChart;\r\n        $iter.each(scrollbarChart.xAxes.iterator(), function (x) {\r\n            x.zoom({ start: 0, end: 1 }, true, true);\r\n        });\r\n        $iter.each(scrollbarChart.yAxes.iterator(), function (y) {\r\n            y.zoom({ start: 0, end: 1 }, true, true);\r\n        });\r\n    };\r\n    /**\r\n     * Updates scrollbar thumb.\r\n     */\r\n    XYChartScrollbar.prototype.updateThumb = function () {\r\n        _super.prototype.updateThumb.call(this);\r\n        if (this._unselectedOverlay) {\r\n            var thumb = this.thumb;\r\n            var x = thumb.pixelX || 0;\r\n            var y = thumb.pixelY || 0;\r\n            var w = thumb.pixelWidth || 0;\r\n            var h = thumb.pixelHeight || 0;\r\n            var path = \"\";\r\n            if (this.orientation == \"horizontal\") {\r\n                path = $path.rectToPath({\r\n                    x: -1,\r\n                    y: 0,\r\n                    width: x,\r\n                    height: h\r\n                });\r\n                path += $path.rectToPath({\r\n                    x: x + w,\r\n                    y: 0,\r\n                    width: (this.pixelWidth || 0) - x - w,\r\n                    height: h\r\n                });\r\n            }\r\n            else {\r\n                path = $path.rectToPath({\r\n                    x: 0,\r\n                    y: 0,\r\n                    width: w,\r\n                    height: y\r\n                });\r\n                path += $path.rectToPath({\r\n                    x: 0,\r\n                    y: y + h,\r\n                    width: w,\r\n                    height: (this.pixelHeight || 0) - y - h\r\n                });\r\n            }\r\n            this._unselectedOverlay.path = path;\r\n        }\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    XYChartScrollbar.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            if ($type.hasValue(config.series) && $type.isArray(config.series)) {\r\n                for (var i = 0, len = config.series.length; i < len; i++) {\r\n                    var series = config.series[i];\r\n                    if ($type.hasValue(series) && $type.isString(series)) {\r\n                        if (this.map.hasKey(series)) {\r\n                            config.series[i] = this.map.getKey(series);\r\n                        }\r\n                        else {\r\n                            throw Error(\"XYChartScrollbar error: Series with id `\" + series + \"` does not exist.\");\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    return XYChartScrollbar;\r\n}(Scrollbar));\r\nexport { XYChartScrollbar };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"XYChartScrollbar\"] = XYChartScrollbar;\r\n//# sourceMappingURL=XYChartScrollbar.js.map","/**\r\n * XY Chart module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { SerialChart, SerialChartDataItem } from \"./SerialChart\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { ValueAxis } from \"../axes/ValueAxis\";\r\nimport { DateAxis } from \"../axes/DateAxis\";\r\nimport { AxisRendererX } from \"../axes/AxisRendererX\";\r\nimport { AxisRendererY } from \"../axes/AxisRendererY\";\r\nimport { CategoryAxis } from \"../axes/CategoryAxis\";\r\nimport { XYSeries } from \"../series/XYSeries\";\r\nimport { Disposer } from \"../../core/utils/Disposer\";\r\nimport { ZoomOutButton } from \"../../core/elements/ZoomOutButton\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { XYChartScrollbar } from \"../elements/XYChartScrollbar\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $number from \"../../core/utils/Number\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[XYChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar XYChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function XYChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"XYChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return XYChartDataItem;\r\n}(SerialChartDataItem));\r\nexport { XYChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates an XY chart, and any derivative chart, like Serial, Date-based, etc.\r\n *\r\n * Basically this is a chart type, that is used to display any chart\r\n * information in a square plot area.\r\n *\r\n * The horizontal and vertical scale is determined by the type of Axis.\r\n *\r\n * The plot types are determined by type of Series.\r\n *\r\n * ```TypeScript\r\n * // Includes\r\n * import * as am4core from \"@amcharts/amcharts4/core\";\r\n * import * as am4charts from \"@amcharts/amcharts4/charts\";\r\n *\r\n * // Create chart\r\n * let chart = am4core.create(\"chartdiv\", am4charts.XYChart);\r\n *\r\n * // Add Data\r\n * chart.data = [{\r\n * \"country\": \"USA\",\r\n * \"visits\": 3025\r\n * }, {\r\n * \t\"country\": \"China\",\r\n * \t\"visits\": 1882\r\n * }, {\r\n * \t\"country\": \"Japan\",\r\n * \t\"visits\": 1809\r\n * }];\r\n *\r\n * // Add category axis\r\n * let categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());\r\n * categoryAxis.dataFields.category = \"country\";\r\n *\r\n * // Add value axis\r\n * let valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n *\r\n * // Add series\r\n * let series = chart.series.push(new am4charts.ColumnSeries());\r\n * series.name = \"Web Traffic\";\r\n * series.dataFields.categoryX = \"country\";\r\n * series.dataFields.valueY = \"visits\";\r\n * ```\r\n * ```JavaScript\r\n * // Create chart\r\n * var chart = am4core.create(\"chartdiv\", am4charts.XYChart);\r\n *\r\n * // The following would work as well:\r\n * // var chart = am4core.create(\"chartdiv\", \"XYChart\");\r\n *\r\n * // Add Data\r\n * chart.data = [{\r\n * \"country\": \"USA\",\r\n * \"visits\": 3025\r\n * }, {\r\n * \t\"country\": \"China\",\r\n * \t\"visits\": 1882\r\n * }, {\r\n * \t\"country\": \"Japan\",\r\n * \t\"visits\": 1809\r\n * }];\r\n *\r\n * // Add category axis\r\n * var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());\r\n * categoryAxis.dataFields.category = \"country\";\r\n *\r\n * // Add value axis\r\n * var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n *\r\n * // Add series\r\n * var series = chart.series.push(new am4charts.ColumnSeries());\r\n * series.name = \"Web Traffic\";\r\n * series.dataFields.categoryX = \"country\";\r\n * series.dataFields.valueY = \"visits\";\r\n * ```\r\n * ```JSON\r\n * var chart = am4core.createFromConfig({\r\n *\r\n * \t// Category axis\r\n * \t\"xAxes\": [{\r\n * \t\t\"type\": \"CategoryAxis\",\r\n * \t\t\"dataFields\": {\r\n * \t\t\t\"category\": \"country\"\r\n * \t\t}\r\n * \t}],\r\n *\r\n * \t// Value axis\r\n * \t\"yAxes\": [{\r\n * \t\t\"type\": \"ValueAxis\"\r\n * \t}],\r\n *\r\n * \t// Series\r\n * \t\"series\": [{\r\n * \t\t\"type\": \"ColumnSeries\",\r\n * \t\t\"dataFields\": {\r\n * \t\t\t\"categoryX\": \"country\",\r\n * \t\t\t\"valueY\": \"visits\"\r\n * \t\t},\r\n * \t\t\"name\": \"Web Traffic\"\r\n * \t}],\r\n *\r\n * \t// Cursor\r\n * \t\"cursor\": {},\r\n *\r\n * \t// Data\r\n * \t\"data\": [{\r\n * \t\t\"country\": \"USA\",\r\n * \t\t\"visits\": 3025\r\n * \t}, {\r\n * \t\t\"country\": \"China\",\r\n * \t\t\"visits\": 1882\r\n * \t}, {\r\n * \t\t\"country\": \"Japan\",\r\n * \t\t\"visits\": 1809\r\n * \t}]\r\n *\r\n * }, \"chartdiv\", \"XYChart\");\r\n * ```\r\n *\r\n *\r\n * @see {@link IXYChartEvents} for a list of available Events\r\n * @see {@link IXYChartAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/xy-chart/} for documentation\r\n * @important\r\n */\r\nvar XYChart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYChart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function XYChart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Defines the type of horizontal axis rederer.\r\n         */\r\n        _this._axisRendererX = AxisRendererX;\r\n        /**\r\n         * Defines the type of vertical axis rederer.\r\n         */\r\n        _this._axisRendererY = AxisRendererY;\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this._seriesPoints = [];\r\n        _this.className = \"XYChart\";\r\n        // Set defaults\r\n        //this.margin(10, 10, 10, 10);\r\n        _this.maskBullets = true;\r\n        _this.arrangeTooltips = true;\r\n        // Create main chart container\r\n        var chartContainer = _this.chartContainer;\r\n        chartContainer.layout = \"vertical\";\r\n        _this.padding(15, 15, 15, 15);\r\n        // Create top axes container\r\n        var topAxesCont = chartContainer.createChild(Container);\r\n        topAxesCont.shouldClone = false;\r\n        topAxesCont.layout = \"vertical\";\r\n        topAxesCont.width = percent(100);\r\n        topAxesCont.zIndex = 1;\r\n        _this.topAxesContainer = topAxesCont;\r\n        // Create vertical axes and plot area container\r\n        // Plot area and vertical axes share the whole width of the chart,\r\n        // so we need to put then into a separate container so that layouting\r\n        // engine takes care of the positioning\r\n        var yAxesAndPlotCont = chartContainer.createChild(Container);\r\n        yAxesAndPlotCont.shouldClone = false;\r\n        yAxesAndPlotCont.layout = \"horizontal\";\r\n        yAxesAndPlotCont.width = percent(100);\r\n        yAxesAndPlotCont.height = percent(100);\r\n        yAxesAndPlotCont.zIndex = 0;\r\n        _this.yAxesAndPlotContainer = yAxesAndPlotCont;\r\n        // Create a container for bottom axes\r\n        var bottomAxesCont = chartContainer.createChild(Container);\r\n        bottomAxesCont.shouldClone = false;\r\n        bottomAxesCont.width = percent(100);\r\n        bottomAxesCont.layout = \"vertical\";\r\n        bottomAxesCont.zIndex = 1;\r\n        _this.bottomAxesContainer = bottomAxesCont;\r\n        // Create a container for left-side axes\r\n        var leftAxesCont = yAxesAndPlotCont.createChild(Container);\r\n        leftAxesCont.shouldClone = false;\r\n        leftAxesCont.layout = \"horizontal\";\r\n        leftAxesCont.height = percent(100);\r\n        leftAxesCont.contentAlign = \"right\";\r\n        leftAxesCont.events.on(\"transformed\", _this.updateXAxesMargins, _this, false);\r\n        leftAxesCont.zIndex = 1;\r\n        _this.leftAxesContainer = leftAxesCont;\r\n        // Create a container for plot area\r\n        var plotCont = yAxesAndPlotCont.createChild(Container);\r\n        plotCont.shouldClone = false;\r\n        plotCont.height = percent(100);\r\n        plotCont.width = percent(100);\r\n        // Create transparend background for plot container so that hover works\r\n        // on all of it\r\n        plotCont.background.fillOpacity = 0;\r\n        _this.plotContainer = plotCont;\r\n        // must go below plot container\r\n        _this.mouseWheelBehavior = \"none\";\r\n        _this._cursorContainer = plotCont;\r\n        // Create a container for right-side axes\r\n        var rightAxesCont = yAxesAndPlotCont.createChild(Container);\r\n        rightAxesCont.shouldClone = false;\r\n        rightAxesCont.layout = \"horizontal\";\r\n        rightAxesCont.height = percent(100);\r\n        rightAxesCont.zIndex = 1;\r\n        rightAxesCont.events.on(\"transformed\", _this.updateXAxesMargins, _this, false);\r\n        _this.rightAxesContainer = rightAxesCont;\r\n        _this.seriesContainer.parent = plotCont;\r\n        _this.bulletsContainer.parent = plotCont;\r\n        var zoomOutButton = plotCont.createChild(ZoomOutButton);\r\n        zoomOutButton.shouldClone = false;\r\n        zoomOutButton.align = \"right\";\r\n        zoomOutButton.valign = \"top\";\r\n        zoomOutButton.zIndex = Number.MAX_SAFE_INTEGER;\r\n        zoomOutButton.marginTop = 5;\r\n        zoomOutButton.marginRight = 5;\r\n        zoomOutButton.hide(0);\r\n        _this.zoomOutButton = zoomOutButton;\r\n        // Create a container for bullets\r\n        var axisBulletsContainer = _this.plotContainer.createChild(Container);\r\n        axisBulletsContainer.shouldClone = false;\r\n        axisBulletsContainer.width = percent(100);\r\n        axisBulletsContainer.height = percent(100);\r\n        axisBulletsContainer.isMeasured = false;\r\n        axisBulletsContainer.zIndex = 4;\r\n        axisBulletsContainer.layout = \"none\";\r\n        _this.axisBulletsContainer = axisBulletsContainer;\r\n        _this._bulletMask = _this.plotContainer;\r\n        _this.events.on(\"beforedatavalidated\", function () {\r\n            _this.series.each(function (series) {\r\n                series.dataGrouped = false;\r\n                series._baseInterval = {};\r\n            });\r\n        }, _this, false);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    XYChart.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        this.zoomOutButton.exportable = false;\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"X/Y chart\");\r\n        }\r\n    };\r\n    /**\r\n     * Draws the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        this.seriesContainer.toFront();\r\n        this.bulletsContainer.toFront();\r\n        if (this.maskBullets) {\r\n            this.bulletsContainer.mask = this._bulletMask;\r\n        }\r\n        this.updateSeriesLegend();\r\n    };\r\n    /**\r\n     * Triggers a redrawing of all chart's series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.updatePlotElements = function () {\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            series.invalidate();\r\n        });\r\n    };\r\n    /**\r\n     * Triggers data (re)validation which in turn can cause a redraw of the\r\n     * whole chart or just aprticular series / elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.validateData = function () {\r\n        // tell axes that data changed\r\n        if (this._parseDataFrom == 0) {\r\n            $iter.each(this.xAxes.iterator(), function (axis) {\r\n                axis.dataChangeUpdate();\r\n            });\r\n            $iter.each(this.yAxes.iterator(), function (axis) {\r\n                axis.dataChangeUpdate();\r\n            });\r\n            $iter.each(this.series.iterator(), function (series) {\r\n                series.dataChangeUpdate();\r\n            });\r\n        }\r\n        _super.prototype.validateData.call(this);\r\n    };\r\n    /**\r\n     * Updates margins for horizontal axes based on settings and available space.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.updateXAxesMargins = function () {\r\n        var leftAxesWidth = this.leftAxesContainer.measuredWidth;\r\n        var rightAxesWidth = this.rightAxesContainer.measuredWidth;\r\n        var bottomAxesCont = this.bottomAxesContainer;\r\n        if (bottomAxesCont.paddingLeft != leftAxesWidth || bottomAxesCont.paddingRight != rightAxesWidth) {\r\n            bottomAxesCont.paddingLeft = leftAxesWidth;\r\n            bottomAxesCont.paddingRight = rightAxesWidth;\r\n        }\r\n        var topAxesCont = this.topAxesContainer;\r\n        if (topAxesCont.paddingLeft != leftAxesWidth || topAxesCont.paddingRight != rightAxesWidth) {\r\n            topAxesCont.paddingLeft = leftAxesWidth;\r\n            topAxesCont.paddingRight = rightAxesWidth;\r\n        }\r\n    };\r\n    /**\r\n     * Triggers a re-initialization of this element.\r\n     *\r\n     * Will result in complete redrawing of the element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.reinit = function () {\r\n        _super.prototype.reinit.call(this);\r\n        this.series.each(function (series) {\r\n            series.appeared = false;\r\n        });\r\n    };\r\n    /**\r\n     * Triggers an update on the horizontal axis when one of its properties\r\n     * change.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event An event object\r\n     */\r\n    XYChart.prototype.handleXAxisChange = function (event) {\r\n        this.updateXAxis(event.target);\r\n    };\r\n    /**\r\n     * Triggers an update on the vertical axis when one of its properties\r\n     * change.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event An event object\r\n     */\r\n    XYChart.prototype.handleYAxisChange = function (event) {\r\n        this.updateYAxis(event.target);\r\n    };\r\n    /**\r\n     * Sets up a new horizontal (X) axis when it is added to the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event  Axis insert event\r\n     */\r\n    XYChart.prototype.processXAxis = function (event) {\r\n        var axis = event.newValue;\r\n        axis.chart = this;\r\n        if (!axis.renderer) {\r\n            axis.renderer = new this._axisRendererX();\r\n            axis.renderer.observe([\"opposite\", \"inside\", \"inversed\", \"minGridDistance\"], this.handleXAxisChange, this, false);\r\n        }\r\n        axis.axisLetter = \"X\";\r\n        axis.events.on(\"startendchanged\", this.handleXAxisRangeChange, this, false);\r\n        //axis.events.on(\"endchanged\", this.handleXAxisRangeChange, this, false);\r\n        // Although axis does not use data directly, we set dataProvider here\r\n        // (but not add to chart data users) to hold up rendering before data\r\n        // is parsed (system handles this)\r\n        axis.dataProvider = this;\r\n        this.updateXAxis(axis.renderer);\r\n        this.processAxis(axis);\r\n    };\r\n    /**\r\n     * Sets up a new vertical (Y) axis when it is added to the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event Axis insert event\r\n     */\r\n    XYChart.prototype.processYAxis = function (event) {\r\n        var axis = event.newValue;\r\n        axis.chart = this;\r\n        if (!axis.renderer) {\r\n            axis.renderer = new this._axisRendererY();\r\n            axis.renderer.observe([\"opposite\", \"inside\", \"inversed\", \"minGridDistance\"], this.handleYAxisChange, this, false);\r\n        }\r\n        axis.axisLetter = \"Y\";\r\n        axis.events.on(\"startendchanged\", this.handleYAxisRangeChange, this, false);\r\n        //axis.events.on(\"endchanged\", this.handleYAxisRangeChange, this, false);\r\n        // Although axis does not use data directly, we set dataProvider here\r\n        // (but not add to chart data users) to hold up rendering before data\r\n        // is parsed (system handles this)\r\n        axis.dataProvider = this;\r\n        this.updateYAxis(axis.renderer);\r\n        this.processAxis(axis);\r\n    };\r\n    /**\r\n     * Updates horizontal (X) scrollbar and other horizontal axis whenever axis'\r\n     * value range changes.\r\n     */\r\n    XYChart.prototype.handleXAxisRangeChange = function () {\r\n        var range = this.getCommonAxisRange(this.xAxes);\r\n        if (this.scrollbarX) {\r\n            this.zoomAxes(this.xAxes, range, true);\r\n        }\r\n        this.toggleZoomOutButton();\r\n        this.updateScrollbar(this.scrollbarX, range);\r\n    };\r\n    /**\r\n     * Shows or hides the Zoom Out button depending on whether the chart is fully\r\n     * zoomed out or not.\r\n     */\r\n    XYChart.prototype.toggleZoomOutButton = function () {\r\n        if (this.zoomOutButton) {\r\n            var show_1 = false;\r\n            $iter.eachContinue(this.xAxes.iterator(), function (axis) {\r\n                if (axis.toggleZoomOutButton) {\r\n                    if (axis.maxZoomCount > 0) {\r\n                        var minZoomFactor = axis.maxZoomFactor / axis.maxZoomCount;\r\n                        if ($math.round(axis.end - axis.start, 3) < 1 / minZoomFactor) {\r\n                            show_1 = true;\r\n                            return false;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if ($math.round(axis.start, 3) != 0 || $math.round(axis.end, 3) != 1) {\r\n                            show_1 = true;\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n            $iter.eachContinue(this.yAxes.iterator(), function (axis) {\r\n                if (axis.toggleZoomOutButton) {\r\n                    if (axis.maxZoomCount > 0) {\r\n                        var minZoomFactor = axis.maxZoomFactor / axis.maxZoomCount;\r\n                        if ($math.round(axis.end - axis.start, 3) < 1 / minZoomFactor) {\r\n                            show_1 = true;\r\n                            return false;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if ($math.round(axis.start, 3) != 0 || $math.round(axis.end, 3) != 1) {\r\n                            show_1 = true;\r\n                            return false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n            if (!this.seriesAppeared) {\r\n                show_1 = false;\r\n            }\r\n            if (show_1) {\r\n                this.zoomOutButton.show();\r\n            }\r\n            else {\r\n                this.zoomOutButton.hide();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     * moved this check to a separate method so that we could override it in TreeMapSeries\r\n     */\r\n    XYChart.prototype.seriesAppeared = function () {\r\n        var appeared = false;\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            if (!series.appeared) {\r\n                appeared = false;\r\n                return false;\r\n            }\r\n        });\r\n        return appeared;\r\n    };\r\n    /**\r\n     * Updates vertical (Y) scrollbar and other horizontal axis whenever axis'\r\n     * value range changes.\r\n     */\r\n    XYChart.prototype.handleYAxisRangeChange = function () {\r\n        var range = this.getCommonAxisRange(this.yAxes);\r\n        if (this.scrollbarY) {\r\n            this.zoomAxes(this.yAxes, range, true);\r\n        }\r\n        this.toggleZoomOutButton();\r\n        this.updateScrollbar(this.scrollbarY, range);\r\n    };\r\n    /**\r\n     * Updates a relative scrollbar whenever data range of the axis changes.\r\n     *\r\n     * @param scrollbar  Scrollbar instance\r\n     * @param range      New data (values) range of the axis\r\n     */\r\n    XYChart.prototype.updateScrollbar = function (scrollbar, range) {\r\n        if (scrollbar) {\r\n            scrollbar.skipRangeEvents();\r\n            scrollbar.start = range.start;\r\n            scrollbar.end = range.end;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a common range of values between a list of axes.\r\n     *\r\n     * This is used to synchronize the zoom between multiple axes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axes  A list of axes\r\n     * @return Common value range\r\n     */\r\n    XYChart.prototype.getCommonAxisRange = function (axes) {\r\n        var start;\r\n        var end;\r\n        $iter.each(axes.iterator(), function (axis) {\r\n            var axisStart = axis.start;\r\n            var axisEnd = axis.end;\r\n            if (axis.renderer.inversed) {\r\n                axisStart = 1 - axis.end;\r\n                axisEnd = 1 - axis.start;\r\n            }\r\n            if (!$type.isNumber(start) || (axisStart < start)) {\r\n                start = axisStart;\r\n            }\r\n            if (!$type.isNumber(end) || (axisEnd > end)) {\r\n                end = axisEnd;\r\n            }\r\n        });\r\n        return { start: start, end: end };\r\n    };\r\n    /**\r\n     * Triggers (re)rendering of the horizontal (X) axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis  Axis\r\n     */\r\n    XYChart.prototype.updateXAxis = function (renderer) {\r\n        var axis = renderer.axis;\r\n        if (renderer.opposite) {\r\n            axis.parent = this.topAxesContainer;\r\n            axis.toFront();\r\n        }\r\n        else {\r\n            axis.parent = this.bottomAxesContainer;\r\n            axis.toBack();\r\n        }\r\n        if (axis.renderer) {\r\n            axis.renderer.processRenderer();\r\n        }\r\n    };\r\n    /**\r\n     * Triggers (re)rendering of the vertical (Y) axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis  Axis\r\n     */\r\n    XYChart.prototype.updateYAxis = function (renderer) {\r\n        var axis = renderer.axis;\r\n        if (renderer.opposite) {\r\n            axis.parent = this.rightAxesContainer;\r\n            axis.toBack();\r\n        }\r\n        else {\r\n            axis.parent = this.leftAxesContainer;\r\n            axis.toFront();\r\n        }\r\n        if (axis.renderer) {\r\n            axis.renderer.processRenderer();\r\n        }\r\n    };\r\n    /**\r\n     * Decorates an Axis for use with this chart, e.g. sets proper renderer\r\n     * and containers for placement.\r\n     *\r\n     * @param axis  Axis\r\n     */\r\n    XYChart.prototype.processAxis = function (axis) {\r\n        var _this = this;\r\n        // Value axis does not use data directly, only category axis does\r\n        if (axis instanceof CategoryAxis) {\r\n            this._dataUsers.moveValue(axis);\r\n        }\r\n        var renderer = axis.renderer;\r\n        renderer.gridContainer.parent = this.plotContainer;\r\n        renderer.gridContainer.toBack();\r\n        renderer.breakContainer.parent = this.plotContainer;\r\n        renderer.breakContainer.toFront();\r\n        renderer.breakContainer.zIndex = 10;\r\n        axis.addDisposer(new Disposer(function () {\r\n            _this.dataUsers.removeValue(axis);\r\n        }));\r\n        renderer.bulletsContainer.parent = this.axisBulletsContainer;\r\n        this._disposers.push(axis.events.on(\"positionchanged\", function () {\r\n            var point = $utils.spritePointToSprite({ x: 0, y: 0 }, axis, _this.axisBulletsContainer);\r\n            if (axis.renderer instanceof AxisRendererY) {\r\n                renderer.bulletsContainer.y = point.y;\r\n            }\r\n            if (axis.renderer instanceof AxisRendererX) {\r\n                renderer.bulletsContainer.x = point.x;\r\n            }\r\n        }, undefined, false));\r\n        this.plotContainer.events.on(\"maxsizechanged\", function () {\r\n            if (_this.inited) {\r\n                axis.invalidateDataItems();\r\n                _this.updateSeriesMasks();\r\n            }\r\n        }, axis, false);\r\n    };\r\n    /**\r\n     * This is done because for some reason IE doesn't change mask if path of a\r\n     * mask changes.\r\n     */\r\n    XYChart.prototype.updateSeriesMasks = function () {\r\n        if ($utils.isIE()) {\r\n            this.series.each(function (series) {\r\n                var mask = series.mainContainer.mask;\r\n                series.mainContainer.mask = undefined;\r\n                series.mainContainer.mask = mask;\r\n            });\r\n        }\r\n    };\r\n    Object.defineProperty(XYChart.prototype, \"xAxes\", {\r\n        /**\r\n         * A list of horizontal (X) axes.\r\n         *\r\n         * @return List of axes\r\n         */\r\n        get: function () {\r\n            if (!this._xAxes) {\r\n                this._xAxes = new List();\r\n                this._xAxes.events.on(\"inserted\", this.processXAxis, this, false);\r\n                this._xAxes.events.on(\"removed\", this.handleAxisRemoval, this, false);\r\n            }\r\n            return this._xAxes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChart.prototype.handleAxisRemoval = function (event) {\r\n        var axis = event.oldValue;\r\n        this.dataUsers.removeValue(axis); // need to remove, as it might not be disposed\r\n        if (axis.autoDispose) {\r\n            axis.dispose();\r\n        }\r\n    };\r\n    Object.defineProperty(XYChart.prototype, \"yAxes\", {\r\n        /**\r\n         * A list of vertical (Y) axes.\r\n         *\r\n         * @return List of axes\r\n         */\r\n        get: function () {\r\n            if (!this._yAxes) {\r\n                this._yAxes = new List();\r\n                this._yAxes.events.on(\"inserted\", this.processYAxis, this, false);\r\n                this._yAxes.events.on(\"removed\", this.handleAxisRemoval, this, false);\r\n            }\r\n            return this._yAxes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Decorates a new [[XYSeries]] object with required parameters when it is\r\n     * added to the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event  Event\r\n     */\r\n    XYChart.prototype.handleSeriesAdded = function (event) {\r\n        try {\r\n            _super.prototype.handleSeriesAdded.call(this, event);\r\n            var series = event.newValue;\r\n            if (this.xAxes.length == 0 || this.yAxes.length == 0) {\r\n                registry.removeFromInvalidComponents(series);\r\n                series.dataInvalid = false;\r\n            }\r\n            $utils.used(series.xAxis); // this is enough to get axis, handled in getter\r\n            $utils.used(series.yAxis); // this is enough to get axis, handled in getter\r\n            if (series.fill == undefined) {\r\n                if (this.patterns) {\r\n                    if (!$type.hasValue(series.stroke)) {\r\n                        series.stroke = this.colors.next();\r\n                    }\r\n                    series.fill = this.patterns.next();\r\n                    if ($type.hasValue(series.fillOpacity)) {\r\n                        series.fill.backgroundOpacity = series.fillOpacity;\r\n                    }\r\n                    if (series.stroke instanceof Color) {\r\n                        series.fill.stroke = series.stroke;\r\n                        series.fill.fill = series.stroke;\r\n                    }\r\n                }\r\n                else {\r\n                    series.fill = this.colors.next();\r\n                }\r\n            }\r\n            if (!$type.hasValue(series.stroke)) {\r\n                series.stroke = series.fill;\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.raiseCriticalError(e);\r\n        }\r\n    };\r\n    Object.defineProperty(XYChart.prototype, \"cursor\", {\r\n        /**\r\n         * @return Cursor\r\n         */\r\n        get: function () {\r\n            return this._cursor;\r\n        },\r\n        /**\r\n         * Chart's [[Cursor]].\r\n         *\r\n         * @param cursor  Cursor\r\n         */\r\n        set: function (cursor) {\r\n            if (this._cursor != cursor) {\r\n                if (this._cursor) {\r\n                    this.removeDispose(this._cursor);\r\n                }\r\n                this._cursor = cursor;\r\n                if (cursor) {\r\n                    // TODO this is wrong, fix it\r\n                    this._disposers.push(cursor);\r\n                    cursor.chart = this;\r\n                    cursor.shouldClone = false;\r\n                    cursor.parent = this._cursorContainer;\r\n                    cursor.events.on(\"cursorpositionchanged\", this.handleCursorPositionChange, this, false);\r\n                    cursor.events.on(\"zoomstarted\", this.handleCursorZoomStart, this, false);\r\n                    cursor.events.on(\"zoomended\", this.handleCursorZoomEnd, this, false);\r\n                    cursor.events.on(\"panstarted\", this.handleCursorPanStart, this, false);\r\n                    cursor.events.on(\"panning\", this.handleCursorPanning, this, false);\r\n                    cursor.events.on(\"panended\", this.handleCursorPanEnd, this, false);\r\n                    cursor.events.on(\"behaviorcanceled\", this.handleCursorCanceled, this, false);\r\n                    cursor.events.on(\"hidden\", this.handleHideCursor, this, false);\r\n                    cursor.zIndex = Number.MAX_SAFE_INTEGER - 1;\r\n                    if (this.tapToActivate) {\r\n                        // We need this in order to setup cursor properly\r\n                        this.setTapToActivate(this.tapToActivate);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Performs tasks when the cursor's position changes, e.g. shows proper\r\n     * tooltips on axes and series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.handleCursorPositionChange = function () {\r\n        var cursor = this.cursor;\r\n        if (cursor.visible && !cursor.isHiding) {\r\n            var xPosition_1 = this.cursor.xPosition;\r\n            var yPosition_1 = this.cursor.yPosition;\r\n            this.showSeriesTooltip({\r\n                x: xPosition_1,\r\n                y: yPosition_1\r\n            });\r\n            var exceptAxis = void 0;\r\n            var snapToSeries = cursor.snapToSeries;\r\n            if (snapToSeries) {\r\n                if (snapToSeries.baseAxis == snapToSeries.xAxis) {\r\n                    exceptAxis = snapToSeries.yAxis;\r\n                }\r\n                if (snapToSeries.baseAxis == snapToSeries.yAxis) {\r\n                    exceptAxis = snapToSeries.xAxis;\r\n                }\r\n                var xAxis_1 = snapToSeries.xAxis;\r\n                var yAxis_1 = snapToSeries.yAxis;\r\n                if (xAxis_1 instanceof ValueAxis && !(xAxis_1 instanceof DateAxis) && yAxis_1 instanceof ValueAxis && !(yAxis_1 instanceof DateAxis)) {\r\n                    var closestDataItem_1;\r\n                    var minDistance_1 = Infinity;\r\n                    snapToSeries.dataItems.each(function (dataItem) {\r\n                        //let xxPosition = xAxis.toAxisPosition(xPosition);\r\n                        //let yyPosition = yAxis.toAxisPosition(xPosition);\r\n                        var dxPosition = xAxis_1.toGlobalPosition(xAxis_1.getPositionX(dataItem, \"valueX\")) * xAxis_1.axisFullLength;\r\n                        var dyPosition = yAxis_1.toGlobalPosition(yAxis_1.getPositionY(dataItem, \"valueY\")) * yAxis_1.axisFullLength;\r\n                        var distance = Math.sqrt(Math.pow(xPosition_1 * xAxis_1.axisFullLength - dxPosition, 2) + Math.pow(yPosition_1 * yAxis_1.axisFullLength - dyPosition, 2));\r\n                        if (distance < minDistance_1) {\r\n                            minDistance_1 = distance;\r\n                            closestDataItem_1 = dataItem;\r\n                        }\r\n                    });\r\n                    if (closestDataItem_1) {\r\n                        snapToSeries.showTooltipAtDataItem(closestDataItem_1);\r\n                    }\r\n                }\r\n            }\r\n            this._seriesPoints = [];\r\n            if (this._cursorXPosition != xPosition_1) {\r\n                this.showAxisTooltip(this.xAxes, xPosition_1, exceptAxis);\r\n            }\r\n            if (this._cursorYPosition != yPosition_1) {\r\n                this.showAxisTooltip(this.yAxes, yPosition_1, exceptAxis);\r\n            }\r\n            if (this.arrangeTooltips) {\r\n                this.sortSeriesTooltips(this._seriesPoints);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Hides all cursor-related tooltips when the cursor itself is hidden.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.handleHideCursor = function () {\r\n        this.hideObjectTooltip(this.xAxes);\r\n        this.hideObjectTooltip(this.yAxes);\r\n        this.hideObjectTooltip(this.series);\r\n        this._cursorXPosition = undefined;\r\n        this._cursorYPosition = undefined;\r\n        this.updateSeriesLegend();\r\n    };\r\n    /**\r\n     * Updates values for each series' legend item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart.prototype.updateSeriesLegend = function () {\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            series.updateLegendValue();\r\n        });\r\n    };\r\n    /**\r\n     * Hides a tooltip for a list of objects.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param sprites  A list of sprites to hide tooltip for\r\n     */\r\n    XYChart.prototype.hideObjectTooltip = function (sprites) {\r\n        $iter.each(sprites.iterator(), function (sprite) {\r\n            sprite.hideTooltip(0);\r\n        });\r\n    };\r\n    /**\r\n     * Shows a tooltip for all chart's series, using specific coordinates as a\r\n     * reference point.\r\n     *\r\n     * The tooltip might be shown at different coordinates depending on the\r\n     * actual data point's position, overlapping with other tooltips, etc.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Reference point\r\n     */\r\n    XYChart.prototype.showSeriesTooltip = function (position) {\r\n        var _this = this;\r\n        if (!position) {\r\n            this.series.each(function (series) {\r\n                series.hideTooltip();\r\n            });\r\n            return;\r\n        }\r\n        var seriesPoints = [];\r\n        this.series.each(function (series) {\r\n            //if (series.tooltipText || series.tooltipHTML) { // not good, bullets are not hovered then\r\n            if ((series.xAxis instanceof DateAxis && series.xAxis.snapTooltip) || (series.yAxis instanceof DateAxis && series.yAxis.snapTooltip)) {\r\n                // void\r\n            }\r\n            else {\r\n                var point = series.showTooltipAtPosition(position.x, position.y);\r\n                if (point) {\r\n                    series.tooltip.setBounds($utils.spriteRectToSvg({ x: 0, y: 0, width: _this.pixelWidth, height: _this.pixelHeight }, _this));\r\n                    seriesPoints.push({ series: series, point: point });\r\n                }\r\n            }\r\n            //}\r\n        });\r\n        if (this.arrangeTooltips) {\r\n            this.sortSeriesTooltips(seriesPoints);\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChart.prototype.sortSeriesTooltips = function (seriesPoints) {\r\n        var topLeft = $utils.spritePointToSvg({ x: -0.5, y: -0.5 }, this.plotContainer);\r\n        var bottomRight = $utils.spritePointToSvg({ x: this.plotContainer.pixelWidth + 0.5, y: this.plotContainer.pixelHeight + 0.5 }, this.plotContainer);\r\n        var sum = 0;\r\n        var filteredSeriesPoints = [];\r\n        $array.each(seriesPoints, function (seriesPoint) {\r\n            var point = seriesPoint.point;\r\n            if (point && $math.isInRectangle(point, { x: topLeft.x, y: topLeft.y, width: bottomRight.x - topLeft.x, height: bottomRight.y - topLeft.y })) {\r\n                filteredSeriesPoints.push({ point: point, series: seriesPoint.series });\r\n                sum += point.y;\r\n            }\r\n        });\r\n        seriesPoints = filteredSeriesPoints;\r\n        var firstSeries = this.series.getIndex(0);\r\n        var inversed = false;\r\n        if (firstSeries && firstSeries.yAxis && firstSeries.yAxis.renderer.inversed) {\r\n            inversed = true;\r\n        }\r\n        if (inversed) {\r\n            seriesPoints.sort(function (a, b) { return $number.order(a.point.y, b.point.y); });\r\n        }\r\n        else {\r\n            seriesPoints.sort(function (a, b) { return $number.order(b.point.y, a.point.y); });\r\n            seriesPoints.reverse();\r\n        }\r\n        var averageY = sum / seriesPoints.length;\r\n        var maxY = $utils.svgPointToDocument({ x: 0, y: 0 }, this.svgContainer.SVGContainer).y;\r\n        if (seriesPoints.length > 0) {\r\n            var top_1 = topLeft.y;\r\n            var bottom = bottomRight.y;\r\n            // TODO is this needed ?\r\n            $utils.spritePointToDocument({ x: 0, y: top_1 }, this);\r\n            var dropped = false;\r\n            if (averageY > top_1 + (bottom - top_1) / 2) {\r\n                var nextHeight = bottom;\r\n                for (var i = seriesPoints.length - 1; i >= 0; i--) {\r\n                    var series = seriesPoints[i].series;\r\n                    var tooltip = series.tooltip;\r\n                    var pointY = seriesPoints[i].point.y;\r\n                    tooltip.setBounds({ x: 0, y: -maxY, width: this.pixelWidth, height: nextHeight + maxY });\r\n                    if (tooltip.invalid) {\r\n                        tooltip.validate();\r\n                    }\r\n                    tooltip.toBack();\r\n                    nextHeight = $utils.spritePointToSvg({ x: 0, y: tooltip.label.pixelY - tooltip.pixelY + pointY - tooltip.pixelMarginTop }, tooltip).y;\r\n                    if (nextHeight < -maxY) {\r\n                        dropped = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (averageY <= top_1 + (bottom - top_1) / 2 || dropped) {\r\n                var nextY = top_1;\r\n                for (var i = 0, len = seriesPoints.length; i < len; i++) {\r\n                    var series = seriesPoints[i].series;\r\n                    var pointY = seriesPoints[i].point.y;\r\n                    var tooltip = series.tooltip;\r\n                    tooltip.setBounds({ x: 0, y: nextY, width: this.pixelWidth, height: bottom });\r\n                    if (tooltip.invalid) {\r\n                        tooltip.validate();\r\n                    }\r\n                    tooltip.toBack();\r\n                    nextY = $utils.spritePointToSvg({ x: 0, y: tooltip.label.pixelY + tooltip.label.measuredHeight - tooltip.pixelY + pointY + tooltip.pixelMarginBottom }, tooltip).y;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Shows tooltips for a list of axes at specific position.\r\n     *\r\n     * Position might be X coordinate for horizontal axes, and Y coordinate for\r\n     * vertical axes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axes      List of axes to show tooltip on\r\n     * @param position  Position (px)\r\n     */\r\n    XYChart.prototype.showAxisTooltip = function (axes, position, except) {\r\n        var _this = this;\r\n        $iter.each(axes.iterator(), function (axis) {\r\n            if (axis != except) {\r\n                if (_this.dataItems.length > 0 || axis.dataItems.length > 0) {\r\n                    axis.showTooltipAtPosition(position);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Recalculates the value range for the axis taking into account zoom level & inversed.\r\n     *\r\n     * @param axis   Axis\r\n     * @param range  Range\r\n     * @return Modified range\r\n     */\r\n    XYChart.prototype.getUpdatedRange = function (axis, range) {\r\n        if (!axis) {\r\n            return;\r\n        }\r\n        var start;\r\n        var end;\r\n        var inversed = axis.renderer.inversed;\r\n        if (inversed) {\r\n            $math.invertRange(range);\r\n            start = 1 - axis.end;\r\n            end = 1 - axis.start;\r\n        }\r\n        else {\r\n            start = axis.start;\r\n            end = axis.end;\r\n        }\r\n        var difference = end - start;\r\n        return {\r\n            start: start + range.start * difference,\r\n            end: start + range.end * difference\r\n        };\r\n    };\r\n    /**\r\n     * Performs zoom and other operations when user finishes zooming using chart\r\n     * cursor, e.g. zooms axes.\r\n     *\r\n     * @param event Cursor's event\r\n     */\r\n    XYChart.prototype.handleCursorZoomEnd = function (event) {\r\n        var cursor = this.cursor;\r\n        var behavior = cursor.behavior;\r\n        if (behavior == \"zoomX\" || behavior == \"zoomXY\") {\r\n            var xRange = cursor.xRange;\r\n            if (xRange && this.xAxes.length > 0) {\r\n                xRange = this.getUpdatedRange(this.xAxes.getIndex(0), xRange);\r\n                xRange.priority = \"start\";\r\n                this.zoomAxes(this.xAxes, xRange);\r\n            }\r\n        }\r\n        if (behavior == \"zoomY\" || behavior == \"zoomXY\") {\r\n            var yRange = cursor.yRange;\r\n            if (yRange && this.yAxes.length > 0) {\r\n                yRange = this.getUpdatedRange(this.yAxes.getIndex(0), yRange);\r\n                yRange.priority = \"start\";\r\n                this.zoomAxes(this.yAxes, yRange);\r\n            }\r\n        }\r\n        this.handleHideCursor();\r\n    };\r\n    /**\r\n     * Performs zoom and other operations when user is panning chart plot using chart cursor.\r\n     *\r\n     * @param event Cursor's event\r\n     */\r\n    XYChart.prototype.handleCursorPanStart = function (event) {\r\n        var xAxis = this.xAxes.getIndex(0);\r\n        if (xAxis) {\r\n            this._panStartXRange = { start: xAxis.start, end: xAxis.end };\r\n        }\r\n        var yAxis = this.yAxes.getIndex(0);\r\n        if (yAxis) {\r\n            this._panStartYRange = { start: yAxis.start, end: yAxis.end };\r\n        }\r\n    };\r\n    /**\r\n     * Performs zoom and other operations when user ends panning\r\n     *\r\n     * @param event Cursor's event\r\n     */\r\n    XYChart.prototype.handleCursorPanEnd = function (event) {\r\n        var cursor = this.cursor;\r\n        var behavior = cursor.behavior;\r\n        if (this._panEndXRange && (behavior == \"panX\" || behavior == \"panXY\")) {\r\n            var panEndRange = this._panEndXRange;\r\n            var delta = 0;\r\n            if (panEndRange.start < 0) {\r\n                delta = panEndRange.start;\r\n            }\r\n            if (panEndRange.end > 1) {\r\n                delta = panEndRange.end - 1;\r\n            }\r\n            this.zoomAxes(this.xAxes, { start: panEndRange.start - delta, end: panEndRange.end - delta }, false, true);\r\n            this._panEndXRange = undefined;\r\n            this._panStartXRange = undefined;\r\n        }\r\n        if (this._panEndYRange && (behavior == \"panY\" || behavior == \"panXY\")) {\r\n            var panEndRange = this._panEndYRange;\r\n            var delta = 0;\r\n            if (panEndRange.start < 0) {\r\n                delta = panEndRange.start;\r\n            }\r\n            if (panEndRange.end > 1) {\r\n                delta = panEndRange.end - 1;\r\n            }\r\n            this.zoomAxes(this.yAxes, { start: panEndRange.start - delta, end: panEndRange.end - delta }, false, true);\r\n            this._panEndYRange = undefined;\r\n            this._panStartYRange = undefined;\r\n        }\r\n    };\r\n    XYChart.prototype.handleCursorCanceled = function () {\r\n        this._panEndXRange = undefined;\r\n        this._panStartXRange = undefined;\r\n    };\r\n    /**\r\n     * Performs zoom and other operations when user is panning chart plot using chart cursor.\r\n     *\r\n     * @param event Cursor's event\r\n     */\r\n    XYChart.prototype.handleCursorPanning = function (event) {\r\n        var cursor = this.cursor;\r\n        var behavior = cursor.behavior;\r\n        var maxPanOut = cursor.maxPanOut;\r\n        if (this._panStartXRange && (behavior == \"panX\" || behavior == \"panXY\")) {\r\n            var panStartRange = this._panStartXRange;\r\n            var range = cursor.xRange;\r\n            var axisRange = this.getCommonAxisRange(this.xAxes);\r\n            var difference = (panStartRange.end - panStartRange.start);\r\n            var delta = range.start * (axisRange.end - axisRange.start);\r\n            var newStart = Math.max(-maxPanOut, delta + panStartRange.start);\r\n            var newEnd = Math.min(delta + panStartRange.end, 1 + maxPanOut);\r\n            if (newStart <= 0) {\r\n                newEnd = newStart + difference;\r\n            }\r\n            if (newEnd >= 1) {\r\n                newStart = newEnd - difference;\r\n            }\r\n            var newRange = {\r\n                start: newStart,\r\n                end: newEnd\r\n            };\r\n            this._panEndXRange = newRange;\r\n            this.zoomAxes(this.xAxes, newRange, false, false, cursor.maxPanOut);\r\n        }\r\n        if (this._panStartYRange && (behavior == \"panY\" || behavior == \"panXY\")) {\r\n            var panStartRange = this._panStartYRange;\r\n            var range = cursor.yRange;\r\n            var axisRange = this.getCommonAxisRange(this.yAxes);\r\n            var difference = panStartRange.end - panStartRange.start;\r\n            var delta = range.start * (axisRange.end - axisRange.start);\r\n            var newStart = Math.max(-maxPanOut, delta + panStartRange.start);\r\n            var newEnd = Math.min(delta + panStartRange.end, 1 + maxPanOut);\r\n            if (newStart <= 0) {\r\n                newEnd = newStart + difference;\r\n            }\r\n            if (newEnd >= 1) {\r\n                newStart = newEnd - difference;\r\n            }\r\n            var newRange = {\r\n                start: newStart,\r\n                end: newEnd\r\n            };\r\n            this._panEndYRange = newRange;\r\n            this.zoomAxes(this.yAxes, newRange, false, false, cursor.maxPanOut);\r\n        }\r\n        this.handleHideCursor();\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChart.prototype.handleYAxisSet = function (series) {\r\n    };\r\n    /**\r\n     * Performs zoom and other operations when user starts zooming using chart\r\n     * cursor, e.g. zooms axes.\r\n     *\r\n     * @param event Cursor's event\r\n     */\r\n    XYChart.prototype.handleCursorZoomStart = function (event) {\r\n        // Nothing here\r\n        // This method is here only as a \"placeholder\" for extending classes to\r\n        // override if necessary\r\n    };\r\n    Object.defineProperty(XYChart.prototype, \"scrollbarX\", {\r\n        /**\r\n         * @return Scrollbar\r\n         */\r\n        get: function () {\r\n            return this._scrollbarX;\r\n        },\r\n        /**\r\n         * Horizontal (X) scrollbar.\r\n         *\r\n         * @param scrollbar Scrollbar\r\n         */\r\n        set: function (scrollbar) {\r\n            var _this = this;\r\n            if (this._scrollbarX) {\r\n                this.removeDispose(this._scrollbarX);\r\n            }\r\n            this._scrollbarX = scrollbar;\r\n            if (scrollbar) {\r\n                this._disposers.push(scrollbar);\r\n                scrollbar.parent = this.topAxesContainer;\r\n                scrollbar.shouldClone = false;\r\n                scrollbar.startGrip.exportable = false;\r\n                scrollbar.endGrip.exportable = false;\r\n                scrollbar.toBack();\r\n                scrollbar.orientation = \"horizontal\";\r\n                scrollbar.events.on(\"rangechanged\", this.handleXScrollbarChange, this, false);\r\n                // accessibility related\r\n                scrollbar.adapter.add(\"positionValue\", function (arg) {\r\n                    var xAxis = _this.xAxes.getIndex(0);\r\n                    if (xAxis) {\r\n                        arg.value = xAxis.getPositionLabel(xAxis.renderer.inversed\r\n                            ? 1 - arg.position\r\n                            : arg.position);\r\n                    }\r\n                    return arg;\r\n                });\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChart.prototype, \"scrollbarY\", {\r\n        /**\r\n         * @return Scrollbar\r\n         */\r\n        get: function () {\r\n            return this._scrollbarY;\r\n        },\r\n        /**\r\n         * Vertical (Y) scrollbar.\r\n         *\r\n         * @param scrollbar Scrollbar\r\n         */\r\n        set: function (scrollbar) {\r\n            var _this = this;\r\n            if (this._scrollbarY) {\r\n                this.removeDispose(this._scrollbarY);\r\n            }\r\n            this._scrollbarY = scrollbar;\r\n            if (scrollbar) {\r\n                this._disposers.push(scrollbar);\r\n                scrollbar.parent = this.rightAxesContainer;\r\n                scrollbar.startGrip.exportable = false;\r\n                scrollbar.shouldClone = false;\r\n                scrollbar.endGrip.exportable = false;\r\n                scrollbar.toFront();\r\n                scrollbar.orientation = \"vertical\";\r\n                scrollbar.events.on(\"rangechanged\", this.handleYScrollbarChange, this, false);\r\n                // accessibility related\r\n                scrollbar.adapter.add(\"positionValue\", function (arg) {\r\n                    var yAxis = _this.yAxes.getIndex(0);\r\n                    if (yAxis) {\r\n                        arg.value = yAxis.getPositionLabel(arg.position);\r\n                    }\r\n                    return arg;\r\n                });\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Zooms axes affected by the horizontal (X) scrollbar when the selection\r\n     * on it changes.\r\n     *\r\n     * @param event Scrollbar range change event\r\n     */\r\n    XYChart.prototype.handleXScrollbarChange = function (event) {\r\n        if (this.inited) {\r\n            var scrollbar = event.target;\r\n            var range = scrollbar.range;\r\n            if (range.start == 0) {\r\n                range.priority = \"start\";\r\n            }\r\n            if (range.end == 1) {\r\n                range.priority = \"end\";\r\n            }\r\n            range = this.zoomAxes(this.xAxes, range);\r\n            scrollbar.fixRange(range);\r\n        }\r\n    };\r\n    /**\r\n     * Zooms axes affected by the vertical (Y) scrollbar when the selection\r\n     * on it changes.\r\n     *\r\n     * @param event Scrollbar range change event\r\n     */\r\n    XYChart.prototype.handleYScrollbarChange = function (event) {\r\n        if (this.inited) {\r\n            var scrollbar = event.target;\r\n            var range = scrollbar.range;\r\n            if (range.end == 1) {\r\n                range.priority = \"end\";\r\n            }\r\n            if (range.start == 0) {\r\n                range.priority = \"start\";\r\n            }\r\n            range = this.zoomAxes(this.yAxes, range);\r\n            scrollbar.fixRange(range);\r\n        }\r\n    };\r\n    /**\r\n     * Zooms axes that are affected by to specific relative range.\r\n     *\r\n     * @param axes       List of axes to zoom\r\n     * @param range      Range of values to zoom to (0-1)\r\n     * @param instantly  If set to `true` will skip zooming animation\r\n     * @return Recalculated range that is common to all involved axes\r\n     */\r\n    XYChart.prototype.zoomAxes = function (axes, range, instantly, round, declination) {\r\n        var realRange = { start: 0, end: 1 };\r\n        this.showSeriesTooltip(); // hides\r\n        if (!this.dataInvalid) {\r\n            $iter.each(axes.iterator(), function (axis) {\r\n                if (axis.renderer.inversed) {\r\n                    range = $math.invertRange(range);\r\n                }\r\n                axis.hideTooltip(0);\r\n                if (round) {\r\n                    //let diff = range.end - range.start;\r\n                    if (axis instanceof CategoryAxis) {\r\n                        var cellWidth = axis.getCellEndPosition(0) - axis.getCellStartPosition(0);\r\n                        range.start = axis.roundPosition(range.start + cellWidth / 2 - (axis.startLocation) * cellWidth, axis.startLocation);\r\n                        range.end = axis.roundPosition(range.end - cellWidth / 2 + (1 - axis.endLocation) * cellWidth, axis.endLocation);\r\n                    }\r\n                    else {\r\n                        range.start = axis.roundPosition(range.start + 0.0001, 0, axis.startLocation);\r\n                        range.end = axis.roundPosition(range.end + 0.0001, 0, axis.endLocation);\r\n                    }\r\n                }\r\n                var axisRange = axis.zoom(range, instantly, instantly, declination);\r\n                if (axis.renderer.inversed) {\r\n                    axisRange = $math.invertRange(axisRange);\r\n                }\r\n                realRange = axisRange;\r\n            });\r\n        }\r\n        return realRange;\r\n    };\r\n    Object.defineProperty(XYChart.prototype, \"maskBullets\", {\r\n        /**\r\n         * @return Mask bullet container?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maskBullets\");\r\n        },\r\n        /**\r\n         * Indicates if bullet container is masked.\r\n         *\r\n         * If it is set to `true`, any bullets that do not fit into bullet container\r\n         * will be clipped off. Settting to `false` will allow bullets to \"spill out\"\r\n         * of the plot area so they are not cut off.\r\n         *\r\n         * @param value Mask bullet container?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"maskBullets\", value, true) && this.bulletsContainer) {\r\n                if (value) {\r\n                    this.bulletsContainer.mask = this._bulletMask;\r\n                }\r\n                else {\r\n                    this.bulletsContainer.mask = undefined;\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChart.prototype, \"arrangeTooltips\", {\r\n        /**\r\n         * @return Arrange tooltips?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"arrangeTooltips\");\r\n        },\r\n        /**\r\n         * Indicates if chart should arrange series tooltips so that they would not\r\n         * overlap.\r\n         *\r\n         * If set to `true` (default), the chart will adjust vertical positions of\r\n         * all simultaneously shown tooltips to avoid overlapping.\r\n         *\r\n         * However, if you have a vertically-arranged chart, it might not make sense,\r\n         * because tooltips would most probably not be aligned horizontally. In this\r\n         * case it would probably be a good idea to set this setting to `false`.\r\n         *\r\n         * @default true\r\n         * @param value Arrange tooltips?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"arrangeTooltips\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Handles mouse wheel event.\r\n     *\r\n     * @param event  Original event\r\n     */\r\n    XYChart.prototype.handleWheel = function (event) {\r\n        var plotContainer = this.plotContainer;\r\n        var svgPoint = $utils.documentPointToSvg(event.point, this.htmlContainer, this.svgContainer.cssScale);\r\n        var plotPoint = $utils.svgPointToSprite(svgPoint, plotContainer);\r\n        var shift = event.shift.y;\r\n        this.handleWheelReal(shift, this.mouseWheelBehavior, plotPoint);\r\n    };\r\n    /**\r\n     * Handles mouse wheel event.\r\n     *\r\n     * @param event  Original event\r\n     */\r\n    XYChart.prototype.handleHorizontalWheel = function (event) {\r\n        var plotContainer = this.plotContainer;\r\n        var svgPoint = $utils.documentPointToSvg(event.point, this.htmlContainer, this.svgContainer.cssScale);\r\n        var plotPoint = $utils.svgPointToSprite(svgPoint, plotContainer);\r\n        this.handleWheelReal(event.shift.x, this.horizontalMouseWheelBehavior, plotPoint);\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChart.prototype.handleWheelReal = function (shift, mouseWheelBehavior, plotPoint) {\r\n        if (shift != 0) {\r\n            var plotContainer = this.plotContainer;\r\n            var rangeX = this.getCommonAxisRange(this.xAxes);\r\n            var rangeY = this.getCommonAxisRange(this.yAxes);\r\n            var shiftStep = 0.05;\r\n            var maxPanOut = 0;\r\n            if (mouseWheelBehavior == \"panX\" || mouseWheelBehavior == \"panXY\") {\r\n                var differenceX = rangeX.end - rangeX.start;\r\n                var newStartX = Math.max(-maxPanOut, rangeX.start + shiftStep * shift / 100);\r\n                var newEndX = Math.min(rangeX.end + shiftStep * shift / 100, 1 + maxPanOut);\r\n                if (newStartX <= 0) {\r\n                    newEndX = newStartX + differenceX;\r\n                }\r\n                if (newEndX >= 1) {\r\n                    newStartX = newEndX - differenceX;\r\n                }\r\n                this.zoomAxes(this.xAxes, { start: newStartX, end: newEndX });\r\n            }\r\n            if (mouseWheelBehavior == \"panY\" || mouseWheelBehavior == \"panXY\") {\r\n                shift *= -1;\r\n                var differenceY = rangeY.end - rangeY.start;\r\n                var newStartY = Math.max(-maxPanOut, rangeY.start + shiftStep * shift / 100);\r\n                var newEndY = Math.min(rangeY.end + shiftStep * shift / 100, 1 + maxPanOut);\r\n                if (newStartY <= 0) {\r\n                    newEndY = newStartY + differenceY;\r\n                }\r\n                if (newEndY >= 1) {\r\n                    newStartY = newEndY - differenceY;\r\n                }\r\n                this.zoomAxes(this.yAxes, { start: newStartY, end: newEndY });\r\n            }\r\n            if (mouseWheelBehavior == \"zoomX\" || mouseWheelBehavior == \"zoomXY\") {\r\n                var locationX = plotPoint.x / plotContainer.maxWidth;\r\n                var newStartX = Math.max(-maxPanOut, rangeX.start - shiftStep * shift / 100 * locationX);\r\n                newStartX = Math.min(newStartX, rangeX.start + (rangeX.end - rangeX.start) * locationX - shiftStep * 0.05);\r\n                var newEndX = Math.min(rangeX.end + shiftStep * shift / 100 * (1 - locationX), 1 + maxPanOut);\r\n                newEndX = Math.max(newEndX, rangeX.start + (rangeX.end - rangeX.start) * locationX + shiftStep * 0.05);\r\n                this.zoomAxes(this.xAxes, { start: newStartX, end: newEndX });\r\n            }\r\n            if (mouseWheelBehavior == \"zoomY\" || mouseWheelBehavior == \"zoomXY\") {\r\n                var locationY = plotPoint.y / plotContainer.maxHeight;\r\n                var newStartY = Math.max(-maxPanOut, rangeY.start - shiftStep * shift / 100 * (1 - locationY));\r\n                newStartY = Math.min(newStartY, rangeY.start + (rangeY.end - rangeY.start) * locationY - shiftStep * 0.05);\r\n                var newEndY = Math.min(rangeY.end + shiftStep * shift / 100 * locationY, 1 + maxPanOut);\r\n                newEndY = Math.max(newEndY, rangeY.start + (rangeY.end - rangeY.start) * locationY + shiftStep * 0.05);\r\n                this.zoomAxes(this.yAxes, { start: newStartY, end: newEndY });\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(XYChart.prototype, \"mouseWheelBehavior\", {\r\n        /**\r\n         * @return Mouse wheel behavior\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"mouseWheelBehavior\");\r\n        },\r\n        /**\r\n         * Specifies action for when mouse wheel is used when over the chart.\r\n         *\r\n         * Options: Options: `\"zoomX\"`, `\"zoomY\"`, `\"zoomXY\"`, `\"panX\"`, `\"panY\"`, `\"panXY\"`, `\"none\"` (default).\r\n         *\r\n         * @default \"none\"\r\n         * @param mouse wheel behavior\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"mouseWheelBehavior\", value)) {\r\n                if (value != \"none\") {\r\n                    this._mouseWheelDisposer = this.plotContainer.events.on(\"wheel\", this.handleWheel, this, false);\r\n                    this._disposers.push(this._mouseWheelDisposer);\r\n                }\r\n                else {\r\n                    if (this._mouseWheelDisposer) {\r\n                        this.plotContainer.wheelable = false;\r\n                        this.plotContainer.hoverable = false;\r\n                        this._mouseWheelDisposer.dispose();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChart.prototype, \"horizontalMouseWheelBehavior\", {\r\n        /**\r\n         * @return Horizontal mouse wheel behavior\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"horizontalMouseWheelBehavior\");\r\n        },\r\n        /**\r\n         * Specifies action for when horizontal mouse wheel is used when over the chart.\r\n         *\r\n         * Options: Options: `\"zoomX\"`, `\"zoomY\"`, `\"zoomXY\"`, `\"panX\"`, `\"panY\"`, `\"panXY\"`, `\"none\"` (default).\r\n         *\r\n         * @default \"none\"\r\n         * @param mouse wheel behavior\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"horizontalMouseWheelBehavior\", value)) {\r\n                if (value != \"none\") {\r\n                    this._mouseWheelDisposer2 = this.plotContainer.events.on(\"wheel\", this.handleHorizontalWheel, this, false);\r\n                    this._disposers.push(this._mouseWheelDisposer2);\r\n                }\r\n                else {\r\n                    if (this._mouseWheelDisposer2) {\r\n                        this.plotContainer.wheelable = false;\r\n                        this.plotContainer.hoverable = false;\r\n                        this._mouseWheelDisposer2.dispose();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * This function is called by the [[DataSource]]'s `dateFields` adapater\r\n     * so that particular chart types can popuplate this setting with their\r\n     * own type-specific data fields so they are parsed properly.\r\n     *\r\n     * @param fields  Array of date fields\r\n     * @return Array of date fields populated with chart's date fields\r\n     */\r\n    XYChart.prototype.dataSourceDateFields = function (fields) {\r\n        var _this = this;\r\n        // Process parent\r\n        fields = _super.prototype.dataSourceDateFields.call(this, fields);\r\n        // Check if we have any series with date-fields\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            fields = _this.populateDataSourceFields(fields, series.dataFields, [\"dateX\", \"dateY\", \"openDateX\", \"openDateY\"]);\r\n        });\r\n        return fields;\r\n    };\r\n    /**\r\n     * This function is called by the [[DataSource]]'s `numberFields` adapater\r\n     * so that particular chart types can popuplate this setting with their\r\n     * own type-specific data fields so they are parsed properly.\r\n     *\r\n     * @param value  Array of number fields\r\n     * @return Array of number fields populated with chart's number fields\r\n     */\r\n    XYChart.prototype.dataSourceNumberFields = function (fields) {\r\n        var _this = this;\r\n        fields = _super.prototype.dataSourceDateFields.call(this, fields);\r\n        // Check if we have any series with date-fields\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            fields = _this.populateDataSourceFields(fields, series.dataFields, [\"valueX\", \"valueY\", \"openValueX\", \"openValueY\"]);\r\n        });\r\n        return fields;\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    XYChart.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Save axis ranges for later processing\r\n            var xAxes = [];\r\n            var yAxes = [];\r\n            // Set up axes\r\n            if ($type.hasValue(config.xAxes) && $type.isArray(config.xAxes)) {\r\n                for (var i = 0, len = config.xAxes.length; i < len; i++) {\r\n                    if (!config.xAxes[i].type) {\r\n                        throw Error(\"[XYChart error] No type set for xAxes[\" + i + \"].\");\r\n                    }\r\n                    else if ($type.hasValue(config.xAxes[i][\"axisRanges\"])) {\r\n                        // Maybe convert string dates?\r\n                        for (var x = 0, len_1 = config.xAxes[i][\"axisRanges\"].length; x < len_1; x++) {\r\n                            var range = config.xAxes[i][\"axisRanges\"][x];\r\n                            if ($type.hasValue(range.date) && $type.isString(range.date)) {\r\n                                range.date = this.dateFormatter.parse(range.date);\r\n                            }\r\n                            if ($type.hasValue(range.endDate) && $type.isString(range.endDate)) {\r\n                                range.endDate = this.dateFormatter.parse(range.endDate);\r\n                            }\r\n                        }\r\n                        xAxes.push({\r\n                            axisRanges: config.xAxes[i][\"axisRanges\"],\r\n                            index: i\r\n                        });\r\n                        delete (config.xAxes[i][\"axisRanges\"]);\r\n                    }\r\n                }\r\n            }\r\n            if ($type.hasValue(config.yAxes) && $type.isArray(config.yAxes)) {\r\n                for (var i = 0, len = config.yAxes.length; i < len; i++) {\r\n                    if (!config.yAxes[i].type) {\r\n                        throw Error(\"[XYChart error] No type set for yAxes[\" + i + \"].\");\r\n                    }\r\n                    else if ($type.hasValue(config.yAxes[i][\"axisRanges\"])) {\r\n                        // Maybe convert string dates?\r\n                        for (var x = 0, len_2 = config.yAxes[i][\"axisRanges\"].length; x < len_2; x++) {\r\n                            var range = config.yAxes[i][\"axisRanges\"][x];\r\n                            if ($type.hasValue(range.date) && $type.isString(range.date)) {\r\n                                range.date = this.dateFormatter.parse(range.date);\r\n                            }\r\n                            if ($type.hasValue(range.endDate) && $type.isString(range.endDate)) {\r\n                                range.endDate = this.dateFormatter.parse(range.endDate);\r\n                            }\r\n                        }\r\n                        yAxes.push({\r\n                            axisRanges: config.yAxes[i][\"axisRanges\"],\r\n                            index: i\r\n                        });\r\n                        delete (config.yAxes[i][\"axisRanges\"]);\r\n                    }\r\n                }\r\n            }\r\n            // Set up series\r\n            if ($type.hasValue(config.series) && $type.isArray(config.series)) {\r\n                for (var i = 0, len = config.series.length; i < len; i++) {\r\n                    config.series[i].type = config.series[i].type || \"LineSeries\";\r\n                }\r\n            }\r\n            // Set up cursor\r\n            if ($type.hasValue(config.cursor) && !$type.hasValue(config.cursor.type)) {\r\n                config.cursor.type = \"XYCursor\";\r\n            }\r\n            // Set up scrollbars\r\n            if ($type.hasValue(config.scrollbarX) && !$type.hasValue(config.scrollbarX.type)) {\r\n                config.scrollbarX.type = \"Scrollbar\";\r\n            }\r\n            if ($type.hasValue(config.scrollbarY) && !$type.hasValue(config.scrollbarY.type)) {\r\n                config.scrollbarY.type = \"Scrollbar\";\r\n            }\r\n            _super.prototype.processConfig.call(this, config);\r\n            // Finish up with ranges.\r\n            // We need to do this here because series are processed last in JSON\r\n            // config. Therefore their respective objects are not yet are available\r\n            // when axis (and respectively their ranges) are being processed.\r\n            if (yAxes.length) {\r\n                for (var i = 0, len = yAxes.length; i < len; i++) {\r\n                    this.yAxes.getIndex(yAxes[i].index).config = {\r\n                        axisRanges: yAxes[i].axisRanges\r\n                    };\r\n                }\r\n            }\r\n            if (xAxes.length) {\r\n                for (var i = 0, len = xAxes.length; i < len; i++) {\r\n                    this.xAxes.getIndex(xAxes[i].index).config = {\r\n                        axisRanges: xAxes[i].axisRanges\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * This function is used to sort element's JSON config properties, so that\r\n     * some properties that absolutely need to be processed last, can be put at\r\n     * the end.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param a  Element 1\r\n     * @param b  Element 2\r\n     * @return Sorting number\r\n     */\r\n    XYChart.prototype.configOrder = function (a, b) {\r\n        if (a == b) {\r\n            return 0;\r\n        }\r\n        // Must come last\r\n        else if (a == \"scrollbarX\") {\r\n            return 1;\r\n        }\r\n        else if (b == \"scrollbarX\") {\r\n            return -1;\r\n        }\r\n        else if (a == \"scrollbarY\") {\r\n            return 1;\r\n        }\r\n        else if (b == \"scrollbarY\") {\r\n            return -1;\r\n        }\r\n        else if (a == \"cursor\") {\r\n            return 1;\r\n        }\r\n        else if (b == \"cursor\") {\r\n            return -1;\r\n        }\r\n        else if (a == \"series\") {\r\n            return 1;\r\n        }\r\n        else if (b == \"series\") {\r\n            return -1;\r\n        }\r\n        else {\r\n            return _super.prototype.configOrder.call(this, a, b);\r\n        }\r\n    };\r\n    /**\r\n     * Creates a new Series of type suitable for this chart.\r\n     *\r\n     * @return New series\r\n     */\r\n    XYChart.prototype.createSeries = function () {\r\n        return new XYSeries();\r\n    };\r\n    Object.defineProperty(XYChart.prototype, \"zoomOutButton\", {\r\n        /**\r\n         * @return Zoom out button\r\n         */\r\n        get: function () {\r\n            return this._zoomOutButton;\r\n        },\r\n        /**\r\n         * A [[Button]] element that is used for zooming out the chart.\r\n         *\r\n         * This button appears only when chart is zoomed in, and disappears\r\n         * autoamatically when it is zoome dout.\r\n         *\r\n         * @param button  Zoom out button\r\n         */\r\n        set: function (button) {\r\n            var _this = this;\r\n            this._zoomOutButton = button;\r\n            if (button) {\r\n                button.events.on(\"hit\", function () {\r\n                    _this.zoomAxes(_this.xAxes, { start: 0, end: 1 });\r\n                    _this.zoomAxes(_this.yAxes, { start: 0, end: 1 });\r\n                }, undefined, false);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Copies all parameters from another [[XYChart]].\r\n     *\r\n     * @param source Source XYChart\r\n     */\r\n    XYChart.prototype.copyFrom = function (source) {\r\n        var _this = this;\r\n        source.xAxes.each(function (axis) {\r\n            _this.xAxes.push(axis.clone());\r\n        });\r\n        source.yAxes.each(function (axis) {\r\n            _this.yAxes.push(axis.clone());\r\n        });\r\n        //this.xAxes.copyFrom(source.xAxes);\r\n        //this.yAxes.copyFrom(source.yAxes);\r\n        _super.prototype.copyFrom.call(this, source);\r\n        //this.zoomOutButton.copyFrom(source.zoomOutButton);\r\n        if (source.cursor) {\r\n            this.cursor = source.cursor.clone();\r\n        }\r\n        if (source.scrollbarX) {\r\n            this.scrollbarX = source.scrollbarX.clone();\r\n        }\r\n        if (source.scrollbarY) {\r\n            this.scrollbarY = source.scrollbarY.clone();\r\n        }\r\n        //@todo copy all container properties\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChart.prototype.disposeData = function () {\r\n        _super.prototype.disposeData.call(this);\r\n        var scrollbarX = this.scrollbarX;\r\n        if (scrollbarX && scrollbarX instanceof XYChartScrollbar) {\r\n            scrollbarX.scrollbarChart.disposeData();\r\n        }\r\n        var scrollbarY = this.scrollbarY;\r\n        if (scrollbarY && scrollbarY instanceof XYChartScrollbar) {\r\n            scrollbarY.scrollbarChart.disposeData();\r\n        }\r\n        this.xAxes.each(function (axis) {\r\n            axis.disposeData();\r\n        });\r\n        this.yAxes.each(function (axis) {\r\n            axis.disposeData();\r\n        });\r\n    };\r\n    /**\r\n     * Adds one or several (array) of data items to the existing data.\r\n     *\r\n     * @param rawDataItem One or many raw data item objects\r\n     */\r\n    XYChart.prototype.addData = function (rawDataItem, removeCount) {\r\n        if (this.scrollbarX instanceof XYChartScrollbar) {\r\n            this.addScrollbarData(this.scrollbarX, removeCount);\r\n        }\r\n        if (this.scrollbarY instanceof XYChartScrollbar) {\r\n            this.addScrollbarData(this.scrollbarY, removeCount);\r\n        }\r\n        _super.prototype.addData.call(this, rawDataItem, removeCount);\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChart.prototype.addScrollbarData = function (scrollbar, removeCount) {\r\n        var chart = scrollbar.scrollbarChart;\r\n        chart._parseDataFrom = chart.data.length;\r\n        chart.invalidateData();\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    XYChart.prototype.removeScrollbarData = function (scrollbar, removeCount) {\r\n        var chart = scrollbar.scrollbarChart;\r\n        if ($type.isNumber(removeCount)) {\r\n            while (removeCount > 0) {\r\n                var dataItem = this.dataItems.getIndex(0);\r\n                if (dataItem) {\r\n                    chart.dataItems.remove(dataItem);\r\n                }\r\n                chart.dataUsers.each(function (dataUser) {\r\n                    var dataItem = dataUser.dataItems.getIndex(0);\r\n                    if (dataItem) {\r\n                        dataUser.dataItems.remove(dataItem);\r\n                    }\r\n                });\r\n                chart._parseDataFrom--;\r\n                removeCount--;\r\n            }\r\n            chart.invalidateData();\r\n        }\r\n    };\r\n    /**\r\n     * Removes elements from the beginning of data\r\n     *\r\n     * @param count number of elements to remove\r\n     */\r\n    XYChart.prototype.removeData = function (count) {\r\n        if (this.scrollbarX instanceof XYChartScrollbar) {\r\n            this.removeScrollbarData(this.scrollbarX, count);\r\n        }\r\n        if (this.scrollbarY instanceof XYChartScrollbar) {\r\n            this.removeScrollbarData(this.scrollbarY, count);\r\n        }\r\n        _super.prototype.removeData.call(this, count);\r\n    };\r\n    /**\r\n     * @param  value  Tap to activate?\r\n     */\r\n    XYChart.prototype.setTapToActivate = function (value) {\r\n        _super.prototype.setTapToActivate.call(this, value);\r\n        if (this.cursor) {\r\n            this.cursor.interactions.isTouchProtected = value;\r\n            this.plotContainer.interactions.isTouchProtected = value;\r\n        }\r\n    };\r\n    XYChart.prototype.handleTapToActivate = function () {\r\n        _super.prototype.handleTapToActivate.call(this);\r\n        if (this.cursor) {\r\n            this.cursor.interactions.isTouchProtected = false;\r\n            this.plotContainer.interactions.isTouchProtected = false;\r\n        }\r\n    };\r\n    XYChart.prototype.handleTapToActivateDeactivation = function () {\r\n        _super.prototype.handleTapToActivateDeactivation.call(this);\r\n        if (this.cursor) {\r\n            this.cursor.interactions.isTouchProtected = true;\r\n            this.plotContainer.interactions.isTouchProtected = true;\r\n        }\r\n    };\r\n    return XYChart;\r\n}(SerialChart));\r\nexport { XYChart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"XYChart\"] = XYChart;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Remove horizontal scrollbar on narrow charts.\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.maybeXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof XYChart && target.scrollbarX) {\r\n            var state = target.states.create(stateId);\r\n            var sbstate = target.scrollbarX.states.create(stateId);\r\n            sbstate.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n/**\r\n * Remove vertical scrollbar on short charts.\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.maybeXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof XYChart && target.scrollbarY) {\r\n            var state = target.states.create(stateId);\r\n            var sbstate = target.scrollbarY.states.create(stateId);\r\n            sbstate.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=XYChart.js.map","/**\r\n * Line series segment module.\r\n * @todo Add description about what this is\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { Sprite, visualProperties } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport * as $smoothing from \"../../core/rendering/Smoothing\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Represents a line series segment.\r\n *\r\n * A line segment can be used to apply different properties to a part of the\r\n * line series, between two data points.\r\n *\r\n * @see {@link ILineSeriesSegmentEvents} for a list of available events\r\n * @see {@link ILineSeriesSegmentAdapters} for a list of available Adapters\r\n * @todo Example\r\n */\r\nvar LineSeriesSegment = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LineSeriesSegment, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function LineSeriesSegment() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"LineSeriesSegment\";\r\n        // Set defaults\r\n        _this.isMeasured = false;\r\n        _this.interactionsEnabled = false;\r\n        _this.layout = \"none\";\r\n        // Create fill element\r\n        var fillSprite = _this.createChild(Sprite);\r\n        _this.fillSprite = fillSprite;\r\n        fillSprite.shouldClone = false;\r\n        fillSprite.setElement(_this.paper.add(\"path\"));\r\n        fillSprite.isMeasured = false;\r\n        _this._disposers.push(fillSprite);\r\n        // Create line element\r\n        var strokeSprite = _this.createChild(Sprite);\r\n        _this.strokeSprite = strokeSprite;\r\n        strokeSprite.shouldClone = false;\r\n        strokeSprite.fill = color();\r\n        strokeSprite.setElement(_this.paper.add(\"path\"));\r\n        strokeSprite.isMeasured = false;\r\n        _this._disposers.push(strokeSprite);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Draws the series segment.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param points       Points to connect\r\n     * @param closePoints  ?\r\n     * @param smoothnessX  Horizontal bezier setting (?)\r\n     * @param smoothnessY  Vertical bezier setting (?)\r\n     */\r\n    LineSeriesSegment.prototype.drawSegment = function (points, closePoints, smoothnessX, smoothnessY) {\r\n        if (!this.disabled) {\r\n            if (points.length > 0 && closePoints.length > 0) {\r\n                // first moveTo helps to avoid Chrome straight line in the mask bug.\r\n                var path = $path.moveTo({ x: points[0].x - 0.2, y: points[0].y - 0.2 }) + $path.moveTo(points[0]) + new $smoothing.Tension(smoothnessX, smoothnessY).smooth(points);\r\n                if (this.strokeOpacity == 0 || this.strokeSprite.strokeOpacity == 0) {\r\n                    // like this and not if != 0, otherwise ranges stroke won't be drawn.\r\n                }\r\n                else {\r\n                    this.strokeSprite.path = path;\r\n                }\r\n                if (this.fillOpacity > 0 || this.fillSprite.fillOpacity > 0) { // helps to avoid drawing fill object if fill is not visible\r\n                    path += $path.lineTo(closePoints[0]) + new $smoothing.Tension(smoothnessX, smoothnessY).smooth(closePoints);\r\n                    path += $path.lineTo(points[0]);\r\n                    path += $path.closePath();\r\n                    this.fillSprite.path = path;\r\n                }\r\n            }\r\n            else {\r\n                this.fillSprite.path = \"\";\r\n                this.strokeSprite.path = \"\";\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Copies properties from a [[Sprite]] to both line and fill elements.\r\n     *\r\n     * @param source Source [[Sprite]] to copy properties from\r\n     */\r\n    LineSeriesSegment.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        var lineElement = this.strokeSprite;\r\n        $object.copyProperties(source, lineElement.properties, visualProperties);\r\n        lineElement.events.copyFrom(source.strokeSprite.events);\r\n        lineElement.fillOpacity = 0;\r\n        var fillElement = this.fillSprite;\r\n        $object.copyProperties(source, fillElement.properties, visualProperties);\r\n        fillElement.events.copyFrom(source.fillSprite.events);\r\n        fillElement.strokeOpacity = 0;\r\n    };\r\n    return LineSeriesSegment;\r\n}(Container));\r\nexport { LineSeriesSegment };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"LineSeriesSegment\"] = LineSeriesSegment;\r\n//# sourceMappingURL=LineSeriesSegment.js.map","/**\r\n * Line series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { XYSeries, XYSeriesDataItem } from \"./XYSeries\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { LineSeriesSegment } from \"./LineSeriesSegment\";\r\nimport { ValueAxis } from \"../axes/ValueAxis\";\r\nimport { DateAxis } from \"../axes/DateAxis\";\r\nimport { CategoryAxis } from \"../axes/CategoryAxis\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Line } from \"../../core/elements/Line\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { Rectangle } from \"../../core/elements/Rectangle\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[LineSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar LineSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LineSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function LineSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"LineSeriesDataItem\";\r\n        return _this;\r\n    }\r\n    return LineSeriesDataItem;\r\n}(XYSeriesDataItem));\r\nexport { LineSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a line graph.\r\n *\r\n * @see {@link ILineSeriesEvents} for a list of available Events\r\n * @see {@link ILineSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar LineSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LineSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function LineSeries() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Minimum distance in pixels between two adjacent points.\r\n         *\r\n         * If the distance is less than this setting, a point is skipped.\r\n         *\r\n         * This allows acceptable performance with huge amounts of data points.\r\n         *\r\n         * @default 0.5\r\n         */\r\n        _this.minDistance = 0.5;\r\n        _this.segments = new ListTemplate(_this.createSegment());\r\n        _this.segments.template.applyOnClones = true;\r\n        _this._disposers.push(new ListDisposer(_this.segments));\r\n        _this._disposers.push(_this.segments.template);\r\n        _this._segmentsIterator = new $iter.ListIterator(_this.segments, function () { return _this.segments.create(); });\r\n        _this._segmentsIterator.createNewItems = true;\r\n        _this.className = \"LineSeries\";\r\n        _this.strokeOpacity = 1;\r\n        _this.fillOpacity = 0;\r\n        _this.connect = true;\r\n        _this.tensionX = 1;\r\n        _this.tensionY = 1;\r\n        _this.autoGapCount = 1.1;\r\n        _this.segmentsContainer = _this.mainContainer.createChild(Container);\r\n        _this.segmentsContainer.isMeasured = false;\r\n        // line series might have multiple segments and it has a separate sprite for fill and stroke for each segment. So we need to observe all the changes on series and set them on the segments\r\n        // todo: we need list here, otherwise everything will be redrawn event on change of properties like tooltipX or similar.\r\n        // this.addEventListener(SpriteEvent.PROPERTY_CHANGED, this.validateDataElements, false, this);\r\n        _this.bulletsContainer.toFront();\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    LineSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Line Series\");\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    LineSeries.prototype.createSegment = function () {\r\n        return new LineSeriesSegment();\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    LineSeries.prototype.createDataItem = function () {\r\n        return new LineSeriesDataItem();\r\n    };\r\n    /**\r\n     * Inits data item's working values.\r\n     *\r\n     * @param dataItem  Data item\r\n     * @param index     Data item's index\r\n     */\r\n    LineSeries.prototype.setInitialWorkingValues = function (dataItem) {\r\n        // this makes data items animate when added\r\n        var yAxis = this._yAxis.get();\r\n        var xAxis = this._xAxis.get();\r\n        if (this.appeared && this.visible) {\r\n            var previousDataItem = this.dataItems.getIndex(dataItem.index - 1);\r\n            dataItem.component = this; // as these values are set before, we don't know component yet\r\n            if (this.baseAxis == xAxis) {\r\n                if (yAxis instanceof ValueAxis) {\r\n                    var initialY = yAxis.minZoomed;\r\n                    if (previousDataItem) {\r\n                        initialY = previousDataItem.values[\"valueY\"].workingValue;\r\n                    }\r\n                    // this makes line animate from previous point to newly added point\r\n                    dataItem.setWorkingValue(\"valueY\", initialY, 0);\r\n                    dataItem.setWorkingValue(\"valueY\", dataItem.values.valueY.value);\r\n                    if (xAxis instanceof DateAxis) {\r\n                        dataItem.setWorkingLocation(\"dateX\", dataItem.locations.dateX - 1, 0); // instantly move it to previous\r\n                        dataItem.setWorkingLocation(\"dateX\", dataItem.locations.dateX); // animate to it's location\r\n                    }\r\n                }\r\n            }\r\n            if (this.baseAxis == yAxis) {\r\n                if (xAxis instanceof ValueAxis) {\r\n                    var initialX = xAxis.minZoomed;\r\n                    if (previousDataItem) {\r\n                        initialX = previousDataItem.values[\"valueX\"].workingValue;\r\n                    }\r\n                    dataItem.setWorkingValue(\"valueX\", initialX, 0);\r\n                    dataItem.setWorkingValue(\"valueX\", dataItem.values.valueX.value);\r\n                    if (yAxis instanceof DateAxis) {\r\n                        dataItem.setWorkingLocation(\"dateY\", dataItem.locations.dateX - 1, 0); // instantly move it to previous\r\n                        dataItem.setWorkingLocation(\"dateY\", dataItem.locations.dateY); // animate to it's location\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.baseAxis == xAxis) {\r\n                if (yAxis instanceof ValueAxis) {\r\n                    if (xAxis instanceof DateAxis) {\r\n                        dataItem.setWorkingLocation(\"dateX\", dataItem.locations.dateX);\r\n                    }\r\n                    if (xAxis instanceof CategoryAxis) {\r\n                        dataItem.setWorkingLocation(\"categoryX\", dataItem.locations.categoryX);\r\n                    }\r\n                }\r\n            }\r\n            if (this.baseAxis == yAxis) {\r\n                if (xAxis instanceof ValueAxis) {\r\n                    if (yAxis instanceof DateAxis) {\r\n                        dataItem.setWorkingLocation(\"dateY\", dataItem.locations.dateY);\r\n                    }\r\n                    if (yAxis instanceof CategoryAxis) {\r\n                        dataItem.setWorkingLocation(\"categoryY\", dataItem.locations.categoryY);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Updates corresponding legend data item with current values.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    LineSeries.prototype.updateLegendValue = function (dataItem, notRange) {\r\n        _super.prototype.updateLegendValue.call(this, dataItem, notRange);\r\n        //This is hack to save some methos, used to set tooltip color source only\r\n        if (dataItem && dataItem.segment) {\r\n            this.tooltipColorSource = dataItem.segment;\r\n        }\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    LineSeries.prototype.validate = function () {\r\n        var _this = this;\r\n        _super.prototype.validate.call(this);\r\n        if (this.xAxis && this.yAxis) {\r\n            this._segmentsIterator.reset();\r\n            this.openSegmentWrapper(this._adjustedStartIndex);\r\n            $iter.each(this.axisRanges.iterator(), function (range) {\r\n                _this.openSegmentWrapper(_this._adjustedStartIndex, range);\r\n            });\r\n            $iter.each(this._segmentsIterator.iterator(), function (segment) {\r\n                segment.__disabled = true;\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * [sliceData description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    LineSeries.prototype.sliceData = function () {\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        // we need extra one item to both sides with values for line series, otherwise the line will not continue out of bounds of the chart while scrolling\r\n        // find first to the left\r\n        // TODO use iterator instead\r\n        for (var i = this.startIndex - 1; i >= 0; i--) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            if (dataItem && dataItem.hasValue(this._xValueFields) && dataItem.hasValue(this._yValueFields)) {\r\n                startIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        this._adjustedStartIndex = this.findAdjustedIndex(startIndex, [\"stroke\", \"strokeWidth\", \"strokeDasharray\", \"strokeOpacity\", \"fill\", \"fillOpacity\", \"opacity\"]);\r\n        // find first to the right\r\n        // TODO use iterator instead\r\n        for (var i = this.endIndex, len = this.dataItems.length; i < len; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            if (dataItem && dataItem.hasValue(this._xValueFields) && dataItem.hasValue(this._yValueFields)) {\r\n                endIndex = i + 1;\r\n                break;\r\n            }\r\n        }\r\n        this._workingStartIndex = startIndex;\r\n        this._workingEndIndex = endIndex;\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    LineSeries.prototype.findAdjustedIndex = function (adjustedIndex, properties) {\r\n        var _this = this;\r\n        var propertyFields = this.propertyFields;\r\n        var startIndex = adjustedIndex;\r\n        $array.each(properties, function (property) {\r\n            if ($type.hasValue(propertyFields[property])) {\r\n                for (var i = startIndex; i >= 0; i--) {\r\n                    var dataItem = _this.dataItems.getIndex(i);\r\n                    if (dataItem) {\r\n                        if ($type.hasValue(dataItem.properties[property])) {\r\n                            if (adjustedIndex > i) {\r\n                                adjustedIndex = i;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return adjustedIndex;\r\n    };\r\n    /**\r\n     * Wraps openSegment call with iterative solution to prevent stack overflow\r\n     *\r\n     * @param openIndex  Index\r\n     * @param axisRange  Range\r\n     */\r\n    LineSeries.prototype.openSegmentWrapper = function (openIndex, axisRange) {\r\n        var params = {\r\n            \"index\": openIndex,\r\n            \"axisRange\": axisRange\r\n        };\r\n        do {\r\n            params = this.openSegment(params.index, params.axisRange);\r\n        } while (params);\r\n    };\r\n    /**\r\n     * [openSegment description]\r\n     *\r\n     * @todo Description\r\n     * @param openIndex  [description]\r\n     * @param axisRange  [description]\r\n     */\r\n    LineSeries.prototype.openSegment = function (openIndex, axisRange) {\r\n        var addToClose = false;\r\n        var points = [];\r\n        openIndex = Math.min(openIndex, this.dataItems.length);\r\n        var endIndex = Math.min(this._workingEndIndex, this.dataItems.length);\r\n        this._workingEndIndex = Math.min(this._workingEndIndex, this.dataItems.length);\r\n        var closeIndex;\r\n        var propertiesChanged = false;\r\n        var segment = this._segmentsIterator.getFirst();\r\n        segment.__disabled = false;\r\n        if (axisRange) {\r\n            segment.parent = axisRange.contents;\r\n            $object.copyProperties(axisRange.contents, segment, visualProperties);\r\n        }\r\n        else {\r\n            $object.copyProperties(this, segment, visualProperties);\r\n            segment.filters.clear();\r\n            segment.parent = this.segmentsContainer;\r\n        }\r\n        var connect = this.connect;\r\n        var valuesFound = false; // some flag to avoid multiple closes if no values found\r\n        for (var i = openIndex; i < endIndex; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            dataItem.segment = segment;\r\n            if (dataItem.hasProperties) {\r\n                // if this is first item of segment\r\n                if (i == openIndex) {\r\n                    this.updateSegmentProperties(dataItem.properties, segment);\r\n                }\r\n                else {\r\n                    // this time we only need to know if properties changed, so we don't pass segment\r\n                    propertiesChanged = this.updateSegmentProperties(dataItem.properties, segment, true);\r\n                }\r\n            }\r\n            if (dataItem.hasValue(this._xValueFields) && dataItem.hasValue(this._yValueFields)) {\r\n                this.addPoints(points, dataItem, this.xField, this.yField);\r\n                valuesFound = true;\r\n            }\r\n            else {\r\n                // if no values in first data item, go to next\r\n                if (i == openIndex) {\r\n                    continue;\r\n                }\r\n                else {\r\n                    // stop cycle\r\n                    if (!connect && valuesFound) {\r\n                        closeIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            closeIndex = i;\r\n            if (this.baseAxis instanceof DateAxis) {\r\n                var next = this.dataItems.getIndex(i + 1);\r\n                if (next && this.baseAxis.makeGap(next, dataItem)) {\r\n                    addToClose = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (propertiesChanged) {\r\n                break;\r\n            }\r\n        }\r\n        return this.closeSegment(segment, points, openIndex, closeIndex, axisRange, addToClose);\r\n    };\r\n    /**\r\n     * [addPoints description]\r\n     *\r\n     * @todo Description\r\n     * @param points    [description]\r\n     * @param dataItem  [description]\r\n     * @param xField    [description]\r\n     * @param yField    [description]\r\n     * @param backwards [description]\r\n     */\r\n    LineSeries.prototype.addPoints = function (points, dataItem, xField, yField, backwards) {\r\n        var point = this.getPoint(dataItem, xField, yField, dataItem.workingLocations[xField], dataItem.workingLocations[yField]);\r\n        if (!backwards) {\r\n            dataItem.point = point;\r\n        }\r\n        points.push(point);\r\n    };\r\n    /**\r\n     * [closeSegment description]\r\n     *\r\n     * @todo Description\r\n     * @param segment    [description]\r\n     * @param points     [description]\r\n     * @param openIndex  [description]\r\n     * @param closeIndex [description]\r\n     * @param axisRange  [description]\r\n     */\r\n    LineSeries.prototype.closeSegment = function (segment, points, openIndex, closeIndex, axisRange, add) {\r\n        var closePoints = [];\r\n        if (this.dataFields[this._xOpenField] ||\r\n            this.dataFields[this._yOpenField] ||\r\n            this.stacked) {\r\n            for (var i = closeIndex; i >= openIndex; i--) {\r\n                var dataItem = this.dataItems.getIndex(i);\r\n                if (dataItem.hasValue(this._xValueFields) && dataItem.hasValue(this._yValueFields)) { // not sure, this means that open point will only be added if value is also set for this point, but maybe it's ok.\r\n                    this.addPoints(closePoints, dataItem, this.xOpenField, this.yOpenField, true);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var baseAxis = this.baseAxis;\r\n            var count = points.length;\r\n            var xAxis = this.xAxis;\r\n            var yAxis = this.yAxis;\r\n            if (count > 0) {\r\n                if (baseAxis == xAxis) {\r\n                    closePoints.push({ x: points[count - 1].x, y: yAxis.basePoint.y }); // last x\r\n                    closePoints.push({ x: points[0].x, y: yAxis.basePoint.y }); // first x\r\n                }\r\n                else {\r\n                    closePoints.push({ x: xAxis.basePoint.x, y: points[count - 1].y }); // last y\r\n                    closePoints.push({ x: xAxis.basePoint.x, y: points[0].y }); // first y\r\n                }\r\n            }\r\n        }\r\n        this.drawSegment(segment, points, closePoints);\r\n        if (add) {\r\n            closeIndex++;\r\n        }\r\n        if (closeIndex < this._workingEndIndex - 1) {\r\n            return { \"index\": closeIndex, \"axisRange\": axisRange };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Draws the line segment.\r\n     *\r\n     * @param segment     Segment\r\n     * @param points      Segment points\r\n     * @param closePoints Segment close points\r\n     */\r\n    LineSeries.prototype.drawSegment = function (segment, points, closePoints) {\r\n        segment.drawSegment(points, closePoints, this.tensionX, this.tensionY);\r\n    };\r\n    /**\r\n     * Segement will get its colors from `this.dataItem`, as thats how\r\n     * `getPropertyValue()` method works.\r\n     *\r\n     * We pass `lineSeriesDataItem.properties` as item here each time when a flag\r\n     * `hasProperties` is set to `true` on data item (this means it can contain\r\n     * some properties set).\r\n     *\r\n     * @param itemProperties  Item properties\r\n     * @param segment         Segment\r\n     * @return Properties changed?\r\n     */\r\n    LineSeries.prototype.updateSegmentProperties = function (itemProperties, segment, checkOnly) {\r\n        var changed = false;\r\n        $object.each(itemProperties, function (propertyName, value) {\r\n            // some value must be defined\r\n            if ($type.hasValue(value)) {\r\n                var currentValue = segment[propertyName];\r\n                var currentValueStr = void 0;\r\n                // current value can be Color, number, anything. So we check if it has toString, otherwise just do String().\r\n                // toString() will return hex if it's color. The only problem is that it will return lowercased hex and if we have uppercase in data, it will think that it changed\r\n                if (currentValue) {\r\n                    if (currentValue.toString) {\r\n                        currentValueStr = currentValue.toString();\r\n                    }\r\n                    else {\r\n                        currentValueStr = currentValue; // not doing String(currentValue) as this will make all Objects the same\r\n                    }\r\n                }\r\n                var valueStr = void 0;\r\n                if (value) {\r\n                    if (value.toString) {\r\n                        valueStr = value.toString();\r\n                    }\r\n                    else {\r\n                        valueStr = value; // not doing String(currentValue) as this will make all Objects the same\r\n                    }\r\n                }\r\n                if (currentValue == value || (currentValueStr != undefined && valueStr != undefined && currentValueStr == valueStr)) {\r\n                    // void\r\n                }\r\n                else {\r\n                    if (!checkOnly) {\r\n                        segment[propertyName] = value;\r\n                    }\r\n                    changed = true;\r\n                }\r\n            }\r\n        });\r\n        return changed;\r\n    };\r\n    Object.defineProperty(LineSeries.prototype, \"connect\", {\r\n        /**\r\n         * @return Connect?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"connect\");\r\n        },\r\n        /**\r\n         * Connect the lines over empty data points?\r\n         *\r\n         * If set to `true` the line will connect two adjacent data points by a\r\n         * straight line. Even if there are data points with missing values\r\n         * in-between.\r\n         *\r\n         * If you set this to `false`, the line will break when there are missing\r\n         * values.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/chart-types/xy-chart/#Line_series_with_gaps} for more information about this feature\r\n         * @default true\r\n         * @param value  Connect?\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"connect\", value)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LineSeries.prototype, \"tensionX\", {\r\n        /**\r\n         * @return Horizontal tension (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tensionX\");\r\n        },\r\n        /**\r\n         * Horizontal tension setting of the line (0-1).\r\n         *\r\n         * Can be used to create smoothed lines. It works like this:\r\n         *\r\n         * Accepted values are in the range between 0 and 1. The biggest value (1)\r\n         * will mean that the \"tension\" is very high, so the line is maximally\r\n         * attracted to the points it connects, hence the straight line.\r\n         *\r\n         * Using smaller numbers will \"relax\" the tension, creating some curving.\r\n         *\r\n         * The smaller the tension setting, the more relaxed the line and the more\r\n         * wide the curve.\r\n         *\r\n         * This setting is for horizontal tension, meaning the curve will bend in\r\n         * such way that it never goes below or above connecting points. To enable\r\n         * vertical bending as well, use `tensionY`.\r\n         *\r\n         * @default 1\r\n         * @param value  Horizontal tension (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tensionX\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LineSeries.prototype, \"tensionY\", {\r\n        /**\r\n         * @return Vertical tension (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tensionY\");\r\n        },\r\n        /**\r\n         * Can be used to create smoothed lines. It works like this:\r\n         *\r\n         * Accepted values are in the range between 0 and 1. The biggest value (1)\r\n         * will mean that the \"tension\" is very high, so the line is maximally\r\n         * attracted to the points it connects, hence the straight line.\r\n         *\r\n         * Using smaller numbers will \"relax\" the tension, creating some curving.\r\n         *\r\n         * The smaller the tension setting, the more relaxed the line and the more\r\n         * wide the curve.\r\n         *\r\n         * This setting is for vertical tension, meaning the curve might bend in\r\n         * such way that it will go below or above connected points.\r\n         *\r\n         * Combine this setting with `tensionX` to create beautifully looking\r\n         * smoothed line series.\r\n         *\r\n         * @default 1\r\n         * @param value  Vertical tension (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tensionY\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates elements in related legend container, that mimics the look of this\r\n     * Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Legend item container\r\n     */\r\n    LineSeries.prototype.createLegendMarker = function (marker) {\r\n        var _this = this;\r\n        var w = marker.pixelWidth;\r\n        var h = marker.pixelHeight;\r\n        marker.disposeChildren();\r\n        var line = marker.createChild(Line);\r\n        line.shouldClone = false;\r\n        //line.copyFrom(<any>this); coppies events which is not good\r\n        $object.copyProperties(this, line, visualProperties);\r\n        line.x2 = w;\r\n        line.y = h / 2;\r\n        line.visible = true;\r\n        if (this.fillOpacity > 0) {\r\n            var fill = marker.createChild(Rectangle);\r\n            //fill.copyFrom(<any>this); coppies events which is not good\r\n            $object.copyProperties(this, fill, visualProperties);\r\n            fill.width = w;\r\n            fill.height = h;\r\n            fill.y = 0;\r\n            fill.strokeOpacity = 0;\r\n            fill.visible = true;\r\n            line.y = 0;\r\n        }\r\n        var legendDataItem = marker.dataItem;\r\n        legendDataItem.color = this.stroke;\r\n        legendDataItem.colorOrig = this.fill;\r\n        $iter.eachContinue(this.bullets.iterator(), function (bullet) {\r\n            if ((bullet instanceof Bullet) && !bullet.copyToLegendMarker) {\r\n                return false;\r\n            }\r\n            var hasLabels = false;\r\n            if (bullet instanceof Container) {\r\n                // do not copy bullets with labels\r\n                $iter.each(bullet.children.iterator(), function (child) {\r\n                    if (child instanceof Label) {\r\n                        hasLabels = true;\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n            if (!hasLabels) {\r\n                var clone = bullet.clone();\r\n                clone.parent = marker;\r\n                clone.isMeasured = true;\r\n                clone.tooltipText = undefined;\r\n                clone.x = w / 2;\r\n                if (_this.fillOpacity > 0) {\r\n                    clone.y = 0;\r\n                }\r\n                else {\r\n                    clone.y = h / 2;\r\n                }\r\n                clone.visible = true;\r\n                // otherwise will not transit to color after hiding\r\n                if (!$type.hasValue(clone.fill)) {\r\n                    clone.fill = _this.fill;\r\n                }\r\n                if (!$type.hasValue(clone.stroke)) {\r\n                    clone.stroke = _this.stroke;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    LineSeries.prototype.disposeData = function () {\r\n        _super.prototype.disposeData.call(this);\r\n        this.segments.clear();\r\n    };\r\n    Object.defineProperty(LineSeries.prototype, \"autoGapCount\", {\r\n        /**\r\n         * @return Gap count\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"autoGapCount\");\r\n        },\r\n        /**\r\n         * If `connect = false` and distance between two data points is bigger\r\n         * than `baseInterval * autoGapCount`, a line will break automatically.\r\n         *\r\n         * @since 4.2.4\r\n         * @param  value  Gap count\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"autoGapCount\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return LineSeries;\r\n}(XYSeries));\r\nexport { LineSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"LineSeries\"] = LineSeries;\r\nregistry.registeredClasses[\"LineSeriesDataItem\"] = LineSeriesDataItem;\r\n//# sourceMappingURL=LineSeries.js.map","/**\r\n * Radar series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { LineSeries, LineSeriesDataItem } from \"./LineSeries\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n//import { AxisRendererCircular } from \"../axes/AxisRendererCircular\";\r\n//import { Sprite } from \"../../core/Sprite\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[RadarSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar RadarSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"RadarSeriesDataItem\";\r\n        _this.setLocation(\"dateX\", 0, 0);\r\n        _this.setLocation(\"dateY\", 0, 0);\r\n        _this.setLocation(\"categoryX\", 0, 0);\r\n        _this.setLocation(\"categoryY\", 0, 0);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return RadarSeriesDataItem;\r\n}(LineSeriesDataItem));\r\nexport { RadarSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a radar graph.\r\n *\r\n * @see {@link IRadarSeriesEvents} for a list of available Events\r\n * @see {@link IRadarSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar RadarSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"RadarSeries\";\r\n        _this.connectEnds = true;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    RadarSeries.prototype.validate = function () {\r\n        // so that radius would be updated\r\n        if (this.chart.invalid) {\r\n            this.chart.validate();\r\n        }\r\n        _super.prototype.validate.call(this);\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    RadarSeries.prototype.createDataItem = function () {\r\n        return new RadarSeriesDataItem();\r\n    };\r\n    /**\r\n     * Returns an [[IPoint]] coordinates of the specific Serie's data point.\r\n     *\r\n     * @param    dataItem   Data item\r\n     * @param    xKey       Name of X data field\r\n     * @param    yKey       Name of Y data field\r\n     * @param    locationX  X location\r\n     * @param    locationY  Y location\r\n     * @param    stackKeyX  ?\r\n     * @param    stackKeyY  ?\r\n     * @returns             Coordinates\r\n     */\r\n    RadarSeries.prototype.getPoint = function (dataItem, xKey, yKey, locationX, locationY, stackKeyX, stackKeyY) {\r\n        if (!stackKeyX) {\r\n            stackKeyX = \"valueX\";\r\n        }\r\n        if (!stackKeyY) {\r\n            stackKeyY = \"valueY\";\r\n        }\r\n        var x = this.yAxis.getX(dataItem, yKey, locationY, stackKeyY);\r\n        var y = this.yAxis.getY(dataItem, yKey, locationY, stackKeyY);\r\n        var radius = $math.getDistance({ x: x, y: y });\r\n        // hack to be able to determine angle later\r\n        if (radius == 0) {\r\n            radius = 0.00001;\r\n        }\r\n        var angle = this.xAxis.getAngle(dataItem, xKey, locationX, stackKeyX);\r\n        var startAngle = this.chart.startAngle;\r\n        var endAngle = this.chart.endAngle;\r\n        //\t\tangle = $math.fitToRange(angle, startAngle, endAngle);\r\n        if (angle < startAngle || angle > endAngle) {\r\n            return undefined;\r\n        }\r\n        else {\r\n            return { x: radius * $math.cos(angle), y: radius * $math.sin(angle) };\r\n        }\r\n    };\r\n    /**\r\n     * [addPoints description]\r\n     *\r\n     * @todo Description\r\n     * @param points    [description]\r\n     * @param dataItem  [description]\r\n     * @param xField    [description]\r\n     * @param yField    [description]\r\n     * @param backwards [description]\r\n     */\r\n    RadarSeries.prototype.addPoints = function (points, dataItem, xField, yField, backwards) {\r\n        var point = this.getPoint(dataItem, xField, yField, dataItem.locations[xField], dataItem.locations[yField]);\r\n        if (point) {\r\n            points.push(point);\r\n        }\r\n    };\r\n    /**\r\n     * Returns an SVG path to be used as a mask for the series.\r\n     *\r\n     * @return SVG path\r\n     */\r\n    RadarSeries.prototype.getMaskPath = function () {\r\n        var renderer = this.yAxis.renderer;\r\n        return $path.arc(renderer.startAngle, renderer.endAngle - renderer.startAngle, renderer.pixelRadius, renderer.pixelInnerRadius);\r\n    };\r\n    /**\r\n     * [drawSegment description]\r\n     *\r\n     * @todo Description\r\n     * @param segment      [description]\r\n     * @param points       [description]\r\n     * @param closePoints  [description]\r\n     */\r\n    RadarSeries.prototype.drawSegment = function (segment, points, closePoints) {\r\n        var axis = this.yAxis;\r\n        var renderer = axis.renderer;\r\n        if (this.connectEnds && Math.abs(renderer.endAngle - renderer.startAngle) == 360) {\r\n            // adds one point to the beginning of closePoints array, if needed\r\n            if (this.dataFields[this._xOpenField] ||\r\n                this.dataFields[this._yOpenField] ||\r\n                this.stacked) {\r\n                points.push(points[0]);\r\n                if (closePoints.length > 0) {\r\n                    closePoints.unshift(closePoints[closePoints.length - 1]);\r\n                }\r\n            }\r\n        }\r\n        _super.prototype.drawSegment.call(this, segment, points, closePoints);\r\n    };\r\n    Object.defineProperty(RadarSeries.prototype, \"connectEnds\", {\r\n        /**\r\n         * @return Connect?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"connectEnds\");\r\n        },\r\n        /**\r\n         * Should the last and and first data points be connected, forming a complete\r\n         * closed circle?\r\n         *\r\n         * @default true\r\n         * @param value  Connect?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"connectEnds\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RadarSeries.prototype.positionBulletReal = function (bullet, positionX, positionY) {\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (positionX < xAxis.start || positionX > xAxis.end || positionY < yAxis.start || positionY > yAxis.end) {\r\n            bullet.visible = false;\r\n        }\r\n        bullet.moveTo(this.xAxis.renderer.positionToPoint(positionX, positionY));\r\n    };\r\n    RadarSeries.prototype.setXAxis = function (axis) {\r\n        _super.prototype.setXAxis.call(this, axis);\r\n        this.updateRendererRefs();\r\n    };\r\n    RadarSeries.prototype.setYAxis = function (axis) {\r\n        _super.prototype.setYAxis.call(this, axis);\r\n        this.updateRendererRefs();\r\n    };\r\n    RadarSeries.prototype.updateRendererRefs = function () {\r\n        var rendererX = this.xAxis.renderer;\r\n        var rendererY = this.yAxis.renderer;\r\n        rendererX.axisRendererY = rendererY;\r\n    };\r\n    return RadarSeries;\r\n}(LineSeries));\r\nexport { RadarSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"RadarSeries\"] = RadarSeries;\r\nregistry.registeredClasses[\"RadarSeriesDataItem\"] = RadarSeriesDataItem;\r\n//# sourceMappingURL=RadarSeries.js.map","import * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisFill } from \"./AxisFill\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Provides fill element functionality for circular Axes.\r\n *\r\n * @see {@link IAxisFillCircularEvents} for a list of available events\r\n * @see {@link IAxisFillCircularAdapters} for a list of available Adapters\r\n * @todo Needs description\r\n */\r\nvar AxisFillCircular = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisFillCircular, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Axis\r\n     */\r\n    function AxisFillCircular(axis) {\r\n        var _this = _super.call(this, axis) || this;\r\n        _this.className = \"AxisFillCircular\";\r\n        _this.element = _this.paper.add(\"path\");\r\n        _this.radius = percent(100);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Draws the fill element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisFillCircular.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        if (this.__disabled || this.disabled) {\r\n            return;\r\n        }\r\n        if (this.axis) {\r\n            var renderer = this.axis.renderer;\r\n            this.fillPath = renderer.getPositionRangePath(this.startPosition, this.endPosition, this.radius, $type.hasValue(this.innerRadius) ? this.innerRadius : renderer.innerRadius, this.cornerRadius);\r\n            this.path = this.fillPath;\r\n        }\r\n    };\r\n    Object.defineProperty(AxisFillCircular.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Inner radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius of the fill. Relative ([[Percent]]) or absolute (pixels).\r\n         *\r\n         * @param value  Inner radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisFillCircular.prototype, \"radius\", {\r\n        /**\r\n         * @return Outer radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius of the fill. Relative ([[Percent]]) or absolute (pixels).\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisFillCircular.prototype, \"cornerRadius\", {\r\n        /**\r\n         * @return Corner radius (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cornerRadius\");\r\n        },\r\n        /**\r\n         * Corner radius for the fill. In pixels.\r\n         *\r\n         * @param value  Corner radius (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"cornerRadius\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AxisFillCircular;\r\n}(AxisFill));\r\nexport { AxisFillCircular };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisFillCircular\"] = AxisFillCircular;\r\n//# sourceMappingURL=AxisFillCircular.js.map","/**\r\n * A module defining functionality for circular axis grid elements.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Grid } from \"./Grid\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a circular grid element for circular-type axis.\r\n *\r\n * @see {@link IGridCircularEvents} for a list of available events\r\n * @see {@link IGridCircularAdapters} for a list of available Adapters\r\n * @todo Review: container is better, as we'll be able to attach something to the GridCircular, also with 3d charts we might need some additional elements\r\n */\r\nvar GridCircular = /** @class */ (function (_super) {\r\n    tslib_1.__extends(GridCircular, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function GridCircular() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"GridCircular\";\r\n        _this.pixelPerfect = false;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(GridCircular.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Inner radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius of the circular grid. (absolute or relative)\r\n         *\r\n         * @param value Inner radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GridCircular.prototype, \"radius\", {\r\n        /**\r\n         * @return Outer radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius of the circular grid. (absolute or relative)\r\n         *\r\n         * @param value Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return GridCircular;\r\n}(Grid));\r\nexport { GridCircular };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"GridCircular\"] = GridCircular;\r\n//# sourceMappingURL=GridCircular.js.map","/**\r\n * Axis Label module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport { Percent } from \"../../core/utils/Percent\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Use to create labels on circular axis.\r\n *\r\n * @see {@link IAxisLabelCircularEvents} for a list of available events\r\n * @see {@link IAxisLabelCircularAdapters} for a list of available Adapters\r\n */\r\nvar AxisLabelCircular = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisLabelCircular, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function AxisLabelCircular() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         *\r\n         * @ignore\r\n         */\r\n        _this.fdx = 0;\r\n        /**\r\n         *\r\n         * @ignore\r\n         */\r\n        _this.fdy = 0;\r\n        _this.className = \"AxisLabelCircular\";\r\n        _this.padding(0, 0, 0, 0);\r\n        _this.location = 0.5;\r\n        _this.radius = 0;\r\n        _this.isMeasured = false;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AxisLabelCircular.prototype, \"relativeRotation\", {\r\n        /**\r\n         * @return Rotation angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"relativeRotation\");\r\n        },\r\n        /**\r\n         * Relative rotation of the label.\r\n         *\r\n         * It is an angle to circle. In case 90, labels will be positioned like rays\r\n         * of light, if 0 - positioned along the circle.\r\n         *\r\n         * @param value Rotation angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"relativeRotation\", value, true);\r\n            if (!$type.hasValue(value)) {\r\n                this.rotation = undefined;\r\n                var dataItem = this.dataItem;\r\n                if (dataItem && dataItem.component) {\r\n                    dataItem.component.invalidateDataItems();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisLabelCircular.prototype, \"radius\", {\r\n        /**\r\n         * @return Distance (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Distance from axis circle to label in pixels or percent.\r\n         *\r\n         * @param value Distance (px or percent)\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisLabelCircular.prototype, \"bent\", {\r\n        /**\r\n         * @return Bent?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"bent\");\r\n        },\r\n        /**\r\n         * Specifies if label should be bent along the circle.\r\n         *\r\n         * IMPORTANT: Use this with caution, since it is quite CPU-greedy.\r\n         *\r\n         * @since 4.1.2\r\n         * @default false\r\n         * @param  value  Bent?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"bent\", value, true);\r\n            this.setPropertyValue(\"wrap\", false);\r\n            this.setPropertyValue(\"horizontalCenter\", \"none\");\r\n            this.setPropertyValue(\"verticalCenter\", \"none\");\r\n            if (value) {\r\n                this.textAlign = \"middle\";\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns label radius in pixels.\r\n     *\r\n     * @param   axisRadius  Radius\r\n     * @return              Pixel radius\r\n     */\r\n    AxisLabelCircular.prototype.pixelRadius = function (axisRadius) {\r\n        var sign = 1;\r\n        if (this.inside) {\r\n            sign = -1;\r\n        }\r\n        return $utils.relativeToValue(this.radius, axisRadius) * sign;\r\n    };\r\n    /**\r\n     * Returns label horizontal radius in pixels.\r\n     *\r\n     * @param   axisRadius   Radius\r\n     * @param   axisRadiusY  Vertical radius\r\n     * @return               Radius\r\n     */\r\n    AxisLabelCircular.prototype.pixelRadiusY = function (axisRadius, axisRadiusY) {\r\n        var sign = 1;\r\n        if (this.inside) {\r\n            sign = -1;\r\n        }\r\n        var radius = this.radius;\r\n        if ($type.isNumber(radius)) {\r\n            radius *= axisRadiusY / axisRadius;\r\n            return $utils.relativeToValue(radius, axisRadius) * sign;\r\n        }\r\n        else {\r\n            return $utils.relativeToValue(radius, axisRadiusY) * sign;\r\n        }\r\n    };\r\n    /**\r\n     * [fixPosition description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param point       Label affixation point\r\n     * @param axisRadius  Distance from point (px)\r\n     */\r\n    AxisLabelCircular.prototype.fixPosition = function (angle, axisRadius, axisRadiusY, dx, dy) {\r\n        if (!$type.isNumber(axisRadiusY)) {\r\n            axisRadiusY = axisRadius;\r\n        }\r\n        if (!$type.isNumber(dx)) {\r\n            dx = 0;\r\n        }\r\n        if (!$type.isNumber(dy)) {\r\n            dy = 0;\r\n        }\r\n        var point = { x: axisRadius * $math.cos(angle), y: axisRadiusY * $math.sin(angle) };\r\n        if (this.invalid) {\r\n            this.validate(); //@todo\" check if we need this\r\n        }\r\n        var isNegative = false;\r\n        var realRadius = this.radius;\r\n        if (realRadius instanceof Percent && realRadius.value < 0) {\r\n            isNegative = true;\r\n        }\r\n        else if (realRadius < 0) {\r\n            isNegative = true;\r\n        }\r\n        var relativeRotation = this.relativeRotation;\r\n        var labelRadius = this.pixelRadius(axisRadius);\r\n        if (this.bent) {\r\n            var point_1 = { x: axisRadius * $math.cos(angle + 180), y: axisRadiusY * $math.sin(angle + 180) };\r\n            this.path = $path.moveTo(point_1) + $path.arcTo(angle + 180, 360, axisRadius + labelRadius, axisRadiusY + labelRadius * axisRadiusY / axisRadius);\r\n            this.locationOnPath = 0.5;\r\n            return;\r\n        }\r\n        // WHEN ROTATED\r\n        if ($type.isNumber(relativeRotation)) {\r\n            this.horizontalCenter = \"none\";\r\n            this.verticalCenter = \"none\";\r\n            angle = $math.fitAngleToRange(angle, -180, 180);\r\n            var pixelWidth = this.bbox.width;\r\n            var pixelHeight = this.bbox.height;\r\n            var pixelPaddingBottom = this.pixelPaddingBottom;\r\n            var pixelPaddingTop = this.pixelPaddingTop;\r\n            var pixelPaddingLeft = this.pixelPaddingLeft;\r\n            var pixelPaddingRight = this.pixelPaddingRight;\r\n            if (angle > 90 || angle < -90) {\r\n                if (relativeRotation == -90) {\r\n                    relativeRotation = 90;\r\n                    pixelWidth = 0;\r\n                }\r\n            }\r\n            else {\r\n                if (relativeRotation == -90) {\r\n                    pixelHeight = -pixelHeight;\r\n                }\r\n                if (relativeRotation == 90) {\r\n                    relativeRotation = -90;\r\n                    pixelWidth = -pixelPaddingLeft - pixelPaddingRight;\r\n                    pixelHeight = -pixelHeight - pixelPaddingTop - pixelPaddingBottom;\r\n                }\r\n            }\r\n            this.rotation = relativeRotation + angle + 90;\r\n            var dH = $math.sin(relativeRotation) / 2;\r\n            var dW = $math.cos(relativeRotation) / 2;\r\n            var rotation = this.rotation;\r\n            this.dx = pixelHeight * dH * $math.sin(rotation) - pixelWidth * dW * $math.cos(rotation);\r\n            this.dy = -pixelHeight * dH * $math.cos(rotation) - pixelWidth * dW * $math.sin(rotation);\r\n            if (!this.inside) {\r\n                labelRadius += (pixelHeight + pixelPaddingBottom + pixelPaddingTop) * $math.cos(relativeRotation) + (pixelWidth + pixelPaddingLeft + pixelPaddingRight) * $math.sin(relativeRotation);\r\n            }\r\n            else {\r\n                if (angle > 90 || angle < -90) {\r\n                    labelRadius -= (pixelPaddingBottom + pixelPaddingTop) * $math.cos(relativeRotation) + (pixelPaddingLeft + pixelPaddingRight) * $math.sin(relativeRotation);\r\n                }\r\n                else {\r\n                    labelRadius += (pixelPaddingBottom + this.bbox.height + pixelPaddingTop) * $math.cos(relativeRotation) + (pixelPaddingLeft + pixelPaddingRight + this.bbox.width) * $math.sin(relativeRotation);\r\n                }\r\n            }\r\n            point.x += $math.cos(angle) * labelRadius;\r\n            point.y += $math.sin(angle) * labelRadius * axisRadiusY / axisRadius;\r\n        }\r\n        else {\r\n            // END OF ROTATED\r\n            this.horizontalCenter = \"middle\";\r\n            this.verticalCenter = \"middle\";\r\n            if (isNegative) {\r\n                this.dx = 0;\r\n                this.dy = 0;\r\n                point.x = (axisRadius + labelRadius) * $math.cos(angle);\r\n                point.y = (axisRadiusY + labelRadius * axisRadiusY / axisRadius) * $math.sin(angle);\r\n            }\r\n            else {\r\n                // we don't use valign for labels because then they would jump while animating. instead we modify dy depending on a y position\r\n                // this math makes dy to be 1 at the top of the circle, 0.5 at the middle and 1 at the bottom\r\n                // @todo with this math doesn't work well with inside = true\r\n                this.dy = this._measuredHeight / 2 * $math.sin(angle); //(1 - (point.y + axisRadiusY) / (2 * axisRadiusY));\r\n                // simmilar with dx\r\n                this.dx = this._measuredWidth / 2 * $math.cos(angle); //(1 - (point.x + axisRadius) / (2 * axisRadius));\r\n                point.x += $math.cos(angle) * labelRadius;\r\n                point.y += $math.sin(angle) * labelRadius * axisRadiusY / axisRadius;\r\n            }\r\n        }\r\n        point.x += dx;\r\n        point.y += dy;\r\n        this.fdx = this.dx;\r\n        this.fdy = this.dy;\r\n        this.moveTo(point);\r\n    };\r\n    return AxisLabelCircular;\r\n}(AxisLabel));\r\nexport { AxisLabelCircular };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisLabelCircular\"] = AxisLabelCircular;\r\n//# sourceMappingURL=AxisLabelCircular.js.map","/**\r\n * Module, defining Axis Renderer for circular axes.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRenderer } from \"./AxisRenderer\";\r\nimport { AxisFillCircular } from \"./AxisFillCircular\";\r\nimport { GridCircular } from \"./GridCircular\";\r\nimport { AxisLabelCircular } from \"./AxisLabelCircular\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { AxisBullet } from \"./AxisBullet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A renderer for circular axis.\r\n */\r\nvar AxisRendererCircular = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisRendererCircular, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Related axis\r\n     */\r\n    function AxisRendererCircular() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this.pixelRadiusReal = 0;\r\n        // axis.layout = \"none\"; // does not trigger redraw when size changes\r\n        _this.layout = \"none\";\r\n        _this.className = \"AxisRendererCircular\";\r\n        _this.isMeasured = false;\r\n        _this.startAngle = -90;\r\n        _this.endAngle = 270;\r\n        _this.useChartAngles = true;\r\n        _this.radius = percent(100);\r\n        _this.isMeasured = false;\r\n        _this.grid.template.location = 0;\r\n        _this.labels.template.location = 0;\r\n        _this.labels.template.radius = 15;\r\n        _this.ticks.template.location = 0;\r\n        _this.ticks.template.pixelPerfect = false;\r\n        _this.tooltipLocation = 0;\r\n        _this.line.strokeOpacity = 0;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n    * @ignore\r\n    */\r\n    AxisRendererCircular.prototype.setAxis = function (axis) {\r\n        var _this = this;\r\n        _super.prototype.setAxis.call(this, axis);\r\n        axis.isMeasured = false;\r\n        // modify x and y so that tooltip would always be on circle\r\n        var tooltip = axis.tooltip;\r\n        tooltip.adapter.add(\"dx\", function (x, target) {\r\n            var point = $utils.svgPointToSprite({ x: target.pixelX, y: target.pixelY }, _this);\r\n            return _this.pixelRadius * Math.cos(Math.atan2(point.y, point.x)) - point.x;\r\n        });\r\n        tooltip.adapter.add(\"dy\", function (y, target) {\r\n            var point = $utils.svgPointToSprite({ x: target.pixelX, y: target.pixelY }, _this);\r\n            return _this.pixelRadius * Math.sin(Math.atan2(point.y, point.x)) - point.y;\r\n        });\r\n    };\r\n    /**\r\n     * Validates Axis renderer.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererCircular.prototype.validate = function () {\r\n        // so that radius would be updated\r\n        if (this.chart && this.chart.invalid) {\r\n            this.chart.validate();\r\n        }\r\n        _super.prototype.validate.call(this);\r\n    };\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"axisLength\", {\r\n        /**\r\n         * Returns actual length of the Axis, in pixels.\r\n         *\r\n         * @return Length (px)\r\n         */\r\n        get: function () {\r\n            return 2 * Math.PI * this.pixelRadius;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"radius\", {\r\n        /**\r\n         * @return Outer radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius of the axis.\r\n         *\r\n         * Can be absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            if (this.setPercentProperty(\"radius\", value, false, false, 10, false)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"pixelRadius\", {\r\n        /**\r\n         * Outer radius in pixels.\r\n         *\r\n         * @return Outer radius (px)\r\n         */\r\n        get: function () {\r\n            return $utils.relativeRadiusToValue(this.radius, this.pixelRadiusReal) || 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Inner radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius of the axis.\r\n         *\r\n         * Can be absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @param value  Inner radius\r\n         */\r\n        set: function (value) {\r\n            if (this.setPercentProperty(\"innerRadius\", value, false, false, 10, false)) {\r\n                if (this.axis) {\r\n                    this.axis.invalidate();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"useChartAngles\", {\r\n        /**\r\n         * @return Use chart angles\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"useChartAngles\");\r\n        },\r\n        /**\r\n         * Specifies if axis should use its own `startAngle` and `endAngle` or\r\n         * inherit them from relative properties from chart.\r\n         *\r\n         * @default false\r\n         * @param value  Use chart's angles\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"useChartAngles\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"pixelInnerRadius\", {\r\n        /**\r\n         * Inner radius in pixels.\r\n         *\r\n         * @return Inner radius (px)\r\n         */\r\n        get: function () {\r\n            return $utils.relativeRadiusToValue(this.innerRadius, this.pixelRadiusReal) || 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts relative position on axis to point coordinates.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @param position2  Position (0-1) Position on the second axis\r\n     * @return Point\r\n     */\r\n    AxisRendererCircular.prototype.positionToPoint = function (position, position2) {\r\n        if (!$type.isNumber(position2)) {\r\n            position2 = 1;\r\n        }\r\n        var coordinate = this.positionToCoordinate(position);\r\n        var angle = this.startAngle + (this.endAngle - this.startAngle) * coordinate / this.axisLength;\r\n        var radius = this.pixelRadius;\r\n        var innerRadius = this.pixelInnerRadius;\r\n        if (this.axisRendererY) {\r\n            var realRadius = $math.fitToRange(this.axisRendererY.positionToCoordinate(position2), 0, Infinity);\r\n            return { x: realRadius * $math.cos(angle), y: realRadius * $math.sin(angle) };\r\n        }\r\n        return { x: $math.cos(angle) * innerRadius + (radius - innerRadius) * $math.cos(angle) * position2, y: $math.sin(angle) * innerRadius + (radius - innerRadius) * $math.sin(angle) * position2 };\r\n    };\r\n    /**\r\n     * Converts relative position (0-1) on axis to angle in degrees (0-360).\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Angle (0-360)\r\n     */\r\n    AxisRendererCircular.prototype.positionToAngle = function (position) {\r\n        var axis = this.axis;\r\n        var arc = (this.endAngle - this.startAngle) / (axis.end - axis.start);\r\n        var angle;\r\n        if (axis.renderer.inversed) {\r\n            angle = this.startAngle + (axis.end - position) * arc;\r\n        }\r\n        else {\r\n            angle = this.startAngle + (position - axis.start) * arc;\r\n        }\r\n        return $math.round(angle, 3);\r\n    };\r\n    /**\r\n     * Updates and positions the axis line element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererCircular.prototype.updateAxisLine = function () {\r\n        var radius = this.pixelRadius;\r\n        var startAngle = this.startAngle;\r\n        var endAngle = this.endAngle;\r\n        var arc = endAngle - startAngle;\r\n        this.line.path = $path.moveTo({ x: radius * $math.cos(startAngle), y: radius * $math.sin(startAngle) }) + $path.arcTo(startAngle, arc, radius, radius);\r\n    };\r\n    /**\r\n     * Updates and positions a grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param grid         Grid element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererCircular.prototype.updateGridElement = function (grid, position, endPosition) {\r\n        position = position + (endPosition - position) * grid.location;\r\n        var point = this.positionToPoint(position);\r\n        if ($type.isNumber(point.x) && $type.isNumber(point.y) && grid.element) {\r\n            var angle = $math.DEGREES * Math.atan2(point.y, point.x);\r\n            var radius = $utils.relativeRadiusToValue($type.hasValue(grid.radius) ? grid.radius : percent(100), this.pixelRadius);\r\n            var gridInnerRadius = $utils.relativeRadiusToValue(grid.innerRadius, this.pixelRadius);\r\n            grid.zIndex = 0;\r\n            var innerRadius = $utils.relativeRadiusToValue($type.isNumber(gridInnerRadius) ? gridInnerRadius : this.innerRadius, this.pixelRadius, true);\r\n            grid.path = $path.moveTo({ x: innerRadius * $math.cos(angle), y: innerRadius * $math.sin(angle) }) + $path.lineTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n        }\r\n        this.toggleVisibility(grid, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions a tick element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param tick         Tick element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererCircular.prototype.updateTickElement = function (tick, position, endPosition) {\r\n        position = position + (endPosition - position) * tick.location;\r\n        var point = this.positionToPoint(position);\r\n        if (tick.element) {\r\n            var radius = this.pixelRadius;\r\n            var angle = $math.DEGREES * Math.atan2(point.y, point.x);\r\n            var tickLength = tick.length;\r\n            if (tick.inside) {\r\n                tickLength = -tickLength;\r\n            }\r\n            tick.zIndex = 1;\r\n            tick.path = $path.moveTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) }) + $path.lineTo({ x: (radius + tickLength) * $math.cos(angle), y: (radius + tickLength) * $math.sin(angle) });\r\n        }\r\n        this.toggleVisibility(tick, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions axis bullet.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet       AxisBullet element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererCircular.prototype.updateBullet = function (bullet, position, endPosition) {\r\n        var location = 0.5;\r\n        if (bullet instanceof AxisBullet) {\r\n            location = bullet.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        var point = this.positionToPoint(position);\r\n        var radius = this.pixelRadius;\r\n        var angle = $math.DEGREES * Math.atan2(point.y, point.x);\r\n        point = { x: radius * $math.cos(angle), y: radius * $math.sin(angle) };\r\n        this.positionItem(bullet, point);\r\n        this.toggleVisibility(bullet, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions a label element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param label        Label element\r\n     * @param position     Starting position\r\n     * @param endPosition  Ending position\r\n     */\r\n    AxisRendererCircular.prototype.updateLabelElement = function (label, position, endPosition, location) {\r\n        if (!$type.hasValue(location)) {\r\n            location = label.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        label.fixPosition(this.positionToAngle(position), this.pixelRadius);\r\n        label.zIndex = 2;\r\n        this.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\r\n    };\r\n    /**\r\n     * Checks if point is within bounds of a container.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param point Point coordinates\r\n     * @return Fits?\r\n     */\r\n    AxisRendererCircular.prototype.fitsToBounds = function (point) {\r\n        return true;\r\n    };\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Start angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startAngle\");\r\n        },\r\n        /**\r\n         * Start angle of the axis in degrees (0-360).\r\n         *\r\n         * @param value  Start angle\r\n         */\r\n        set: function (value) {\r\n            // do not normalize angel here!\r\n            if (this.setPropertyValue(\"startAngle\", value)) {\r\n                this.invalidateAxisItems();\r\n                if (this.axis) {\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererCircular.prototype, \"endAngle\", {\r\n        /**\r\n         * @return End angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endAngle\");\r\n        },\r\n        /**\r\n         * End angle of the axis in degrees (0-360).\r\n         *\r\n         * @param value  End angle\r\n         */\r\n        set: function (value) {\r\n            // do not normalize angel here!\r\n            if (this.setPropertyValue(\"endAngle\", value)) {\r\n                this.invalidateAxisItems();\r\n                if (this.axis) {\r\n                    this.axis.invalidateSeries();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * [getPositionRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param startPosition  Starting position\r\n     * @param endPosition    End position\r\n     * @return SVG path\r\n     */\r\n    AxisRendererCircular.prototype.getPositionRangePath = function (startPosition, endPosition, radius, innerRadius, cornerRadius) {\r\n        var path = \"\";\r\n        if ($type.isNumber(startPosition) && $type.isNumber(endPosition)) {\r\n            if (!$type.hasValue(radius)) {\r\n                radius = this.radius;\r\n            }\r\n            startPosition = $math.max(startPosition, this.axis.start);\r\n            endPosition = $math.min(endPosition, this.axis.end);\r\n            if (endPosition < startPosition) {\r\n                endPosition = startPosition;\r\n            }\r\n            var pixelRadius = $utils.relativeRadiusToValue(radius, this.pixelRadius);\r\n            var pixelInnerRadius = $utils.relativeRadiusToValue(innerRadius, this.pixelRadius, true);\r\n            var startAngle = this.positionToAngle(startPosition);\r\n            var endAngle = this.positionToAngle(endPosition);\r\n            var arc = endAngle - startAngle;\r\n            path = $path.arc(startAngle, arc, pixelRadius, pixelInnerRadius, pixelRadius, cornerRadius);\r\n        }\r\n        return path;\r\n    };\r\n    /**\r\n     * Returns a new grid element, suitable for this Axis Renderer type.\r\n     *\r\n     * @return Grid element\r\n     */\r\n    AxisRendererCircular.prototype.createGrid = function () {\r\n        return new GridCircular();\r\n    };\r\n    /**\r\n     * Returns a new fill element, suitable for this Axis Renderer type.\r\n     *\r\n     * @return Fill element\r\n     */\r\n    AxisRendererCircular.prototype.createFill = function (axis) {\r\n        return new AxisFillCircular(axis);\r\n    };\r\n    /**\r\n     * Returns a new label element, suitable for this Axis Renderer type.\r\n     *\r\n     * @return Label element\r\n     */\r\n    AxisRendererCircular.prototype.createLabel = function () {\r\n        return new AxisLabelCircular();\r\n    };\r\n    /**\r\n     * Converts a point at specific coordinates to a relative position (0-1)\r\n     * on the axis.\r\n     *\r\n     * @param point  Point\r\n     * @return Position (0-1)\r\n     */\r\n    AxisRendererCircular.prototype.pointToPosition = function (point) {\r\n        var angle = $math.fitAngleToRange($math.getAngle(point), this.startAngle, this.endAngle);\r\n        return this.coordinateToPosition((angle - this.startAngle) / 360 * this.axisLength);\r\n    };\r\n    return AxisRendererCircular;\r\n}(AxisRenderer));\r\nexport { AxisRendererCircular };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererCircular\"] = AxisRendererCircular;\r\n//# sourceMappingURL=AxisRendererCircular.js.map","/**\r\n * Module, defining Axis Renderer for radial axes.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRendererY } from \"./AxisRendererY\";\r\nimport { CategoryAxis } from \"./CategoryAxis\";\r\nimport { WavedCircle } from \"../../core/elements/WavedCircle\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { AxisBullet } from \"./AxisBullet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A renderer for radial axis.\r\n */\r\nvar AxisRendererRadial = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisRendererRadial, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Related axis\r\n     */\r\n    function AxisRendererRadial() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * A related chart.\r\n         */\r\n        _this._chart = new MutableValueDisposer();\r\n        /**\r\n         * @ignore\r\n         */\r\n        _this.pixelRadiusReal = 0;\r\n        _this.className = \"AxisRendererRadial\";\r\n        _this.isMeasured = false;\r\n        _this.startAngle = -90;\r\n        _this.endAngle = 270;\r\n        _this.minGridDistance = 30;\r\n        _this.gridType = \"circles\";\r\n        _this.axisAngle = -90;\r\n        _this.isMeasured = false;\r\n        _this.layout = \"none\";\r\n        _this.radius = percent(100);\r\n        _this.line.strokeOpacity = 0;\r\n        _this.labels.template.horizontalCenter = \"middle\";\r\n        _this._disposers.push(_this._chart);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Validates Axis renderer.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererRadial.prototype.validate = function () {\r\n        // so that radius would be updated\r\n        if (this.chart && this.chart.invalid) {\r\n            this.chart.validate();\r\n        }\r\n        _super.prototype.validate.call(this);\r\n    };\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"axisLength\", {\r\n        /**\r\n         * Returns actual length of the Axis, in pixels.\r\n         *\r\n         * @return Length (px)\r\n         */\r\n        get: function () {\r\n            return this.pixelRadius - this.pixelInnerRadius;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"radius\", {\r\n        /**\r\n         * @return Outer radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius of the axis.\r\n         *\r\n         * Can be absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, false, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"pixelRadius\", {\r\n        /**\r\n         * Outer radius in pixels.\r\n         *\r\n         * @return Outer radius (px)\r\n         */\r\n        get: function () {\r\n            return $utils.relativeRadiusToValue(this.radius, this.pixelRadiusReal) || 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Inner radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius of the axis.\r\n         *\r\n         * Can be absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, false, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"pixelInnerRadius\", {\r\n        /**\r\n         * Inner radius in pixels.\r\n         *\r\n         * @return Inner radius (px)\r\n         */\r\n        get: function () {\r\n            return $utils.relativeRadiusToValue(this.innerRadius, this.pixelRadiusReal) || 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"chart\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart.get();\r\n        },\r\n        /**\r\n         * Chart, associated with the Axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @param value Chart\r\n         */\r\n        set: function (chart) {\r\n            this._chart.set(chart, null);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts relative position on axis to point coordinates.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @param position2  Position (0-1) Position on the second axis\r\n     * @return Point\r\n     */\r\n    AxisRendererRadial.prototype.positionToPoint = function (position, position2) {\r\n        var radius = $math.fitToRange(this.positionToCoordinate(position), 0, Infinity);\r\n        return { x: radius * $math.cos(this.axisAngle), y: radius * $math.sin(this.axisAngle) };\r\n    };\r\n    /**\r\n     * Updates and positions the axis line element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererRadial.prototype.updateAxisLine = function () {\r\n        this.line.path = $path.moveTo({ x: this.pixelInnerRadius * $math.cos(this.axisAngle), y: this.pixelInnerRadius * $math.sin(this.axisAngle) }) + $path.lineTo({ x: this.pixelRadius * $math.cos(this.axisAngle), y: this.pixelRadius * $math.sin(this.axisAngle) });\r\n        var title = this.axis.title;\r\n        title.valign = \"none\";\r\n        title.horizontalCenter = \"middle\";\r\n        title.verticalCenter = \"bottom\";\r\n        title.y = -this.axisLength / 2;\r\n        var rotation = 90;\r\n        if (this.opposite) {\r\n            if (!this.inside) {\r\n                rotation = -90;\r\n            }\r\n        }\r\n        else {\r\n            if (this.inside) {\r\n                rotation = -90;\r\n            }\r\n        }\r\n        title.rotation = rotation;\r\n    };\r\n    /**\r\n     * Updates and positions a grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param grid         Grid element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererRadial.prototype.updateGridElement = function (grid, position, endPosition) {\r\n        position = position + (endPosition - position) * grid.location;\r\n        var point = this.positionToPoint(position);\r\n        var path;\r\n        var radius = $math.getDistance(point);\r\n        var startAngle = this.startAngle;\r\n        var endAngle = this.endAngle;\r\n        if ($type.isNumber(radius) && grid.element) {\r\n            var chart = this.chart;\r\n            var xAxis = chart.xAxes.getIndex(0);\r\n            var count = 0;\r\n            var series = chart.series.getIndex(0);\r\n            if (series) {\r\n                count = series.dataItems.length;\r\n            }\r\n            // polygons are only possible if x axis is present\r\n            // @todo: review this\r\n            if (this.gridType == \"polygons\" && count > 0 && series && xAxis && xAxis instanceof CategoryAxis) {\r\n                var gridLocation = xAxis.renderer.grid.template.location;\r\n                var angle = xAxis.getAngle(series.dataItems.getIndex(0), \"categoryX\", gridLocation);\r\n                path = $path.moveTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n                for (var i = 1; i < count; i++) {\r\n                    angle = xAxis.getAngle(series.dataItems.getIndex(i), \"categoryX\", gridLocation);\r\n                    path += $path.lineTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n                }\r\n                angle = xAxis.getAngle(series.dataItems.getIndex(count - 1), \"categoryX\", xAxis.renderer.cellEndLocation);\r\n                path += $path.lineTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n            }\r\n            else {\r\n                path = $path.moveTo({ x: radius * $math.cos(startAngle), y: radius * $math.sin(startAngle) }) + $path.arcTo(startAngle, endAngle - startAngle, radius, radius);\r\n            }\r\n            grid.path = path;\r\n        }\r\n        this.toggleVisibility(grid, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions a label element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param label        Label element\r\n     * @param position     Starting position\r\n     * @param endPosition  Ending position\r\n     */\r\n    AxisRendererRadial.prototype.updateLabelElement = function (label, position, endPosition, location) {\r\n        if (!$type.hasValue(location)) {\r\n            location = label.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        var point = this.positionToPoint(position);\r\n        this.positionItem(label, point);\r\n        this.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\r\n    };\r\n    /**\r\n     * Updates and positions the base grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererRadial.prototype.updateBaseGridElement = function () {\r\n        // @todo? zero grid for radar chart, is it needed?\r\n    };\r\n    /**\r\n     * Checks if point is within bounds of a container.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param point Point coordinates\r\n     * @return Fits?\r\n     */\r\n    AxisRendererRadial.prototype.fitsToBounds = function (point) {\r\n        return true;\r\n    };\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Start angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startAngle\");\r\n        },\r\n        /**\r\n         * Start angle of the axis in degrees. (0-360)\r\n         *\r\n         * @param value  Start angle\r\n         */\r\n        set: function (value) {\r\n            // do not normalize angle here!\r\n            if (this.setPropertyValue(\"startAngle\", value)) {\r\n                this.invalidateAxisItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"endAngle\", {\r\n        /**\r\n         * @return End angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endAngle\");\r\n        },\r\n        /**\r\n         * End angle of the axis in degrees. (0-360)\r\n         *\r\n         * @param value  End angle\r\n         */\r\n        set: function (value) {\r\n            // do not normalize angel here!\r\n            if (this.setPropertyValue(\"endAngle\", value)) {\r\n                this.invalidateAxisItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"axisAngle\", {\r\n        /**\r\n         * @return Axis angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"axisAngle\");\r\n            //return $math.fitToRange(this.getPropertyValue(\"axisAngle\"), this.startAngle, this.endAngle); // no good, as less flexible\r\n        },\r\n        /**\r\n         * Angle of the radial axis in degrees. (0-360)\r\n         *\r\n         * @param value  Axis angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"axisAngle\", $math.normalizeAngle(value));\r\n            this.invalidateAxisItems();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AxisRendererRadial.prototype, \"gridType\", {\r\n        /**\r\n         * Grid type\r\n         */\r\n        get: function () {\r\n            var axis = this.chart.xAxes.getIndex(0);\r\n            if (axis instanceof CategoryAxis) {\r\n                return this.getPropertyValue(\"gridType\");\r\n            }\r\n            else {\r\n                return \"circles\";\r\n            }\r\n        },\r\n        // polygons grid type is only possible under these conditions: xAxis is available and it is CategoryAxis, also at least one series should be added to a chart\r\n        /**\r\n         * Grid type for radial axis.\r\n         *\r\n         * A grid on radia axis can either be perfect circles (\"circles\"), or\r\n         * straight lines (\"polygons\").\r\n         *\r\n         * @default \"circles\"\r\n         * @param value  Grid type\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"gridType\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * [getPositionRangePath description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param startPosition  Starting position\r\n     * @param endPosition    End position\r\n     * @return SVG path\r\n     */\r\n    AxisRendererRadial.prototype.getPositionRangePath = function (startPosition, endPosition) {\r\n        var pixelInnerRadius = this.pixelInnerRadius;\r\n        var pixelRadius = this.axisLength + pixelInnerRadius;\r\n        var innerRadius = $math.fitToRange(this.positionToCoordinate(startPosition), pixelInnerRadius, pixelRadius);\r\n        var radius = $math.fitToRange(this.positionToCoordinate(endPosition), pixelInnerRadius, pixelRadius);\r\n        //let angleCount: number = this.angleCount;\r\n        var startAngle = this.startAngle;\r\n        var endAngle = this.endAngle;\r\n        var arc = endAngle - startAngle;\r\n        var path;\r\n        var chart = this.chart;\r\n        var xAxis = chart.xAxes.getIndex(0);\r\n        var series = chart.series.getIndex(0);\r\n        var count = 0;\r\n        if (series) {\r\n            count = series.dataItems.length;\r\n        }\r\n        // polygons are only possible if x axis is present\r\n        // @todo: review this\r\n        if (this.gridType == \"polygons\" && count > 0 && series && xAxis && xAxis instanceof CategoryAxis) {\r\n            var gridLocation = xAxis.renderer.grid.template.location;\r\n            var angle = xAxis.getAngle(series.dataItems.getIndex(0), \"categoryX\", gridLocation);\r\n            path = $path.moveTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n            for (var i = 1; i < count; i++) {\r\n                angle = xAxis.getAngle(series.dataItems.getIndex(i), \"categoryX\", gridLocation);\r\n                path += $path.lineTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n            }\r\n            angle = xAxis.getAngle(series.dataItems.getIndex(count - 1), \"categoryX\", xAxis.renderer.cellEndLocation);\r\n            path += $path.lineTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n            path += $path.moveTo({ x: innerRadius * $math.cos(angle), y: innerRadius * $math.sin(angle) });\r\n            for (var i = count - 1; i >= 0; i--) {\r\n                angle = xAxis.getAngle(series.dataItems.getIndex(i), \"categoryX\", gridLocation);\r\n                path += $path.lineTo({ x: innerRadius * $math.cos(angle), y: innerRadius * $math.sin(angle) });\r\n            }\r\n        }\r\n        else {\r\n            path = $path.arc(startAngle, arc, radius, innerRadius);\r\n        }\r\n        return path;\r\n    };\r\n    /**\r\n     * Updates and positions an axis break element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Break element\r\n     */\r\n    AxisRendererRadial.prototype.updateBreakElement = function (axisBreak) {\r\n        // @todo: someday we might need axis break when gridType is polygons\r\n        var startLine = axisBreak.startLine;\r\n        var endLine = axisBreak.endLine;\r\n        var fillShape = axisBreak.fillShape;\r\n        var startPoint = axisBreak.startPoint;\r\n        var endPoint = axisBreak.endPoint;\r\n        startLine.radius = Math.abs(startPoint.y);\r\n        endLine.radius = Math.abs(endPoint.y);\r\n        fillShape.radius = Math.abs(endPoint.y);\r\n        fillShape.innerRadius = Math.abs(startPoint.y);\r\n    };\r\n    /**\r\n     * Creates visual elements for and axis break.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axisBreak Axis break\r\n     */\r\n    AxisRendererRadial.prototype.createBreakSprites = function (axisBreak) {\r\n        axisBreak.startLine = new WavedCircle();\r\n        axisBreak.endLine = new WavedCircle();\r\n        axisBreak.fillShape = new WavedCircle();\r\n    };\r\n    /**\r\n     * Updates some of the Axis tooltip's visual properties, related to\r\n     * rendering of the Axis.\r\n     *\r\n     * @todo Description (review)\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererRadial.prototype.updateTooltip = function () {\r\n        var axis = this.axis;\r\n        if (axis) {\r\n            var bigNum = 4000;\r\n            var bbx = -4000;\r\n            var bby = -4000;\r\n            var bbw = bigNum * 2;\r\n            var bbh = bigNum * 2;\r\n            var axisAngle = this.axisAngle;\r\n            if (axisAngle < 0) {\r\n                axisAngle += 360;\r\n            }\r\n            var tooltipOrientation = \"vertical\";\r\n            if ((axisAngle > 45 && axisAngle < 135) || (axisAngle > 225 && axisAngle < 315)) {\r\n                tooltipOrientation = \"horizontal\";\r\n            }\r\n            this.axis.updateTooltip(tooltipOrientation, { x: bbx, y: bby, width: bbw, height: bbh });\r\n        }\r\n    };\r\n    /**\r\n     * Updates and positions a tick element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param tick      Tick element\r\n     * @param position  Position\r\n     */\r\n    AxisRendererRadial.prototype.updateTickElement = function (tick, position, endPosition) {\r\n        position = position + (endPosition - position) * tick.location;\r\n        var point = this.positionToPoint(position);\r\n        if (tick.element) {\r\n            var angle = $math.normalizeAngle(this.axisAngle + 90);\r\n            if (angle / 90 != Math.round(angle / 90)) {\r\n                tick.pixelPerfect = false;\r\n            }\r\n            else {\r\n                tick.pixelPerfect = true;\r\n            }\r\n            var tickLength = -tick.length;\r\n            if (tick.inside) {\r\n                tickLength *= -1;\r\n            }\r\n            tick.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: tickLength * $math.cos(angle), y: tickLength * $math.sin(angle) });\r\n        }\r\n        this.positionItem(tick, point);\r\n        this.toggleVisibility(tick, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions axis bullet.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet       AxisBullet element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererRadial.prototype.updateBullet = function (bullet, position, endPosition) {\r\n        var location = 0.5;\r\n        if (bullet instanceof AxisBullet) {\r\n            location = bullet.location;\r\n        }\r\n        position = position + (endPosition - position) * location;\r\n        var point = this.positionToPoint(position);\r\n        this.positionItem(bullet, point);\r\n        this.toggleVisibility(bullet, position, 0, 1);\r\n    };\r\n    /**\r\n     * Converts a position on the axis to a coordinate in pixels.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    AxisRendererRadial.prototype.positionToCoordinate = function (position) {\r\n        var coordinate;\r\n        var axis = this.axis;\r\n        var axisFullLength = axis.axisFullLength;\r\n        var innerRadius = this.pixelInnerRadius;\r\n        if (axis.renderer.inversed) {\r\n            coordinate = (axis.end - position) * axisFullLength + innerRadius;\r\n        }\r\n        else {\r\n            coordinate = (position - axis.start) * axisFullLength + innerRadius;\r\n        }\r\n        return $math.round(coordinate, 1);\r\n    };\r\n    /**\r\n     * Converts a point at specific coordinates to a relative position (0-1)\r\n     * on the axis.\r\n     *\r\n     * @param point  Point\r\n     * @return Position (0-1)\r\n     */\r\n    AxisRendererRadial.prototype.pointToPosition = function (point) {\r\n        var coordinate = ($math.getDistance(point) - this.pixelInnerRadius);\r\n        return this.coordinateToPosition(coordinate);\r\n    };\r\n    return AxisRendererRadial;\r\n}(AxisRendererY));\r\nexport { AxisRendererRadial };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererRadial\"] = AxisRendererRadial;\r\n//# sourceMappingURL=AxisRendererRadial.js.map","/**\r\n * Radar chart module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { XYChart, XYChartDataItem } from \"./XYChart\";\r\nimport { percent, Percent } from \"../../core/utils/Percent\";\r\nimport { RadarSeries } from \"../series/RadarSeries\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { Circle } from \"../../core/elements/Circle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { AxisRendererCircular } from \"../axes/AxisRendererCircular\";\r\nimport { AxisRendererRadial } from \"../axes/AxisRendererRadial\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[RadarChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar RadarChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"RadarChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return RadarChartDataItem;\r\n}(XYChartDataItem));\r\nexport { RadarChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a Radar chart.\r\n *\r\n * @see {@link IRadarChartEvents} for a list of available Events\r\n * @see {@link IRadarChartAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/radar-chart/} for documentation\r\n * @important\r\n */\r\nvar RadarChart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarChart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarChart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Defines X axis renderer type.\r\n         */\r\n        _this._axisRendererX = AxisRendererCircular;\r\n        /**\r\n         * Defines Y axis renderer type.\r\n         */\r\n        _this._axisRendererY = AxisRendererRadial;\r\n        /**\r\n         * used by cursor. We adjust innerradius if start and end angle are close to each other\r\n         * @ignore Exclude from docs\r\n         */\r\n        _this.innerRadiusModifyer = 1;\r\n        _this.className = \"RadarChart\";\r\n        _this.startAngle = -90;\r\n        _this.endAngle = 270;\r\n        _this.radius = percent(80);\r\n        _this.innerRadius = 0;\r\n        var radarContainer = _this.plotContainer.createChild(Container);\r\n        radarContainer.shouldClone = false;\r\n        radarContainer.layout = \"absolute\";\r\n        radarContainer.align = \"center\";\r\n        radarContainer.valign = \"middle\";\r\n        _this.seriesContainer.parent = radarContainer;\r\n        _this.radarContainer = radarContainer;\r\n        _this.bulletsContainer.parent = radarContainer;\r\n        _this.axisBulletsContainer = radarContainer;\r\n        _this._cursorContainer = radarContainer;\r\n        _this._bulletMask = radarContainer.createChild(Circle);\r\n        _this._bulletMask.shouldClone = false;\r\n        _this._bulletMask.element = _this.paper.add(\"path\");\r\n        _this._bulletMask.opacity = 0;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    RadarChart.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Radar chart\");\r\n        }\r\n    };\r\n    /**\r\n     * Decorates Axis with required properties for this chart.\r\n     *\r\n     * @param axis  Axis\r\n     */\r\n    RadarChart.prototype.processAxis = function (axis) {\r\n        _super.prototype.processAxis.call(this, axis);\r\n        var renderer = axis.renderer;\r\n        renderer.gridContainer.parent = renderer;\r\n        renderer.breakContainer.parent = renderer;\r\n        axis.parent = this.radarContainer;\r\n        renderer.toBack();\r\n    };\r\n    /**\r\n     * Updates all X axes after range change event.\r\n     */\r\n    RadarChart.prototype.handleXAxisRangeChange = function () {\r\n        _super.prototype.handleXAxisRangeChange.call(this);\r\n        $iter.each(this.yAxes.iterator(), function (axis) {\r\n            axis.invalidate();\r\n        });\r\n    };\r\n    /**\r\n     * Updates all Y axes after range change event.\r\n     */\r\n    RadarChart.prototype.handleYAxisRangeChange = function () {\r\n        _super.prototype.handleYAxisRangeChange.call(this);\r\n        $iter.each(this.xAxes.iterator(), function (axis) {\r\n            axis.invalidate();\r\n        });\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    RadarChart.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Set up cursor\r\n            if ($type.hasValue(config.cursor) && !$type.hasValue(config.cursor.type)) {\r\n                config.cursor.type = \"RadarCursor\";\r\n            }\r\n            // Set up series\r\n            if ($type.hasValue(config.series) && $type.isArray(config.series)) {\r\n                for (var i = 0, len = config.series.length; i < len; i++) {\r\n                    config.series[i].type = config.series[i].type || \"RadarSeries\";\r\n                }\r\n            }\r\n            // Set up axes\r\n            /*if ($type.hasValue(config.xAxes) && $type.isArray(config.xAxes)) {\r\n                for (let i = 0, len = config.xAxes.length; i < len; i++) {\r\n                    config.xAxes[i].type = config.xAxes[i].type || \"AxisRendererCircular\";\r\n                }\r\n            }\r\n            if ($type.hasValue(config.yAxes) && $type.isArray(config.yAxes)) {\r\n                for (let i = 0, len = config.yAxes.length; i < len; i++) {\r\n                    config.yAxes[i].type = config.yAxes[i].type || \"AxisRendererRadial\";\r\n                }\r\n            }*/\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    /**\r\n     * Does calculations before drawing the chart.\r\n     */\r\n    RadarChart.prototype.beforeDraw = function () {\r\n        _super.prototype.beforeDraw.call(this);\r\n        var plotContainer = this.plotContainer;\r\n        var rect = $math.getArcRect(this.startAngle, this.endAngle, 1);\r\n        var innerRect = { x: 0, y: 0, width: 0, height: 0 };\r\n        var wr = plotContainer.innerWidth / rect.width;\r\n        var hr = plotContainer.innerHeight / rect.height;\r\n        var innerRadius = this.innerRadius;\r\n        if (innerRadius instanceof Percent) {\r\n            var value = innerRadius.value;\r\n            var mr = Math.min(wr, hr);\r\n            value = Math.max(mr * value, mr - Math.min(plotContainer.innerHeight, plotContainer.innerWidth)) / mr;\r\n            innerRect = $math.getArcRect(this.startAngle, this.endAngle, value);\r\n            this.innerRadiusModifyer = value / innerRadius.value;\r\n            innerRadius = percent(value * 100);\r\n        }\r\n        // @todo handle this when innerRadius set in pixels (do it for pie also)\r\n        rect = $math.getCommonRectangle([rect, innerRect]);\r\n        var maxRadius = Math.min(plotContainer.innerWidth / rect.width, plotContainer.innerHeight / rect.height);\r\n        var diameter = $utils.relativeRadiusToValue(this.radius, maxRadius) * 2 || 0;\r\n        var radius = diameter / 2;\r\n        var startAngle = this.startAngle;\r\n        var endAngle = this.endAngle;\r\n        this._pixelInnerRadius = $utils.relativeRadiusToValue(innerRadius, radius);\r\n        this._bulletMask.path = $path.arc(startAngle, endAngle - startAngle, radius, this._pixelInnerRadius);\r\n        $iter.each(this.xAxes.iterator(), function (axis) {\r\n            if (axis.renderer.useChartAngles) {\r\n                axis.renderer.startAngle = startAngle;\r\n                axis.renderer.endAngle = endAngle;\r\n            }\r\n            axis.width = diameter;\r\n            axis.height = diameter;\r\n            //axis.renderer.width = diameter;\r\n            //axis.renderer.height = diameter;\r\n            axis.renderer.pixelRadiusReal = radius;\r\n            axis.renderer.innerRadius = innerRadius;\r\n        });\r\n        $iter.each(this.yAxes.iterator(), function (axis) {\r\n            axis.renderer.startAngle = startAngle;\r\n            axis.renderer.endAngle = endAngle;\r\n            axis.width = diameter;\r\n            axis.height = diameter;\r\n            //axis.renderer.width = diameter;\r\n            //axis.renderer.height = diameter;\r\n            axis.renderer.pixelRadiusReal = radius;\r\n            axis.renderer.innerRadius = innerRadius;\r\n        });\r\n        var cursor = this.cursor;\r\n        if (cursor) {\r\n            cursor.width = diameter;\r\n            cursor.height = diameter;\r\n            cursor.startAngle = startAngle;\r\n            cursor.endAngle = endAngle;\r\n        }\r\n        this.radarContainer.definedBBox = { x: radius * rect.x, y: radius * rect.y, width: radius * rect.width, height: radius * rect.height };\r\n        this.radarContainer.validatePosition();\r\n    };\r\n    /**\r\n     * Creates and returns a new Series, suitable for RadarChart.\r\n     *\r\n     * @return New Series\r\n     */\r\n    RadarChart.prototype.createSeries = function () {\r\n        return new RadarSeries();\r\n    };\r\n    Object.defineProperty(RadarChart.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Start angle (degrees)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startAngle\");\r\n        },\r\n        /**\r\n         * Starting angle of the Radar face. (degrees)\r\n         *\r\n         * Normally, a circular radar face begins (the radial axis is drawn) at the\r\n         * top center. (at -90 degrees)\r\n         *\r\n         * You can use `startAngle` to change this setting.\r\n         *\r\n         * E.g. setting this to 0 will make the radial axis start horizontally to\r\n         * the right, as opposed to vertical.\r\n         *\r\n         * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n         * needs to be 360.\r\n         *\r\n         * However, it's **not** necessary to do so. You can set those to lesser\r\n         * numbers, to create semi-circles.\r\n         *\r\n         * E.g. `startAngle = -90` with `endAngle = 0` will create a radar face that\r\n         * looks like a quarter of a circle.\r\n         *\r\n         * @default -90\r\n         * @param value  Start angle (degrees)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarChart.prototype, \"endAngle\", {\r\n        /**\r\n         * @return End angle (degrees)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endAngle\");\r\n        },\r\n        /**\r\n         * Starting angle of the Radar face. (degrees)\r\n         *\r\n         * Normally, a circular radar face ends (the radial axis is drawn) exactly\r\n         * where it has started, forming a full 360 circle. (at 270 degrees)\r\n         *\r\n         * You can use `endAngle` to end the circle somewhere else.\r\n         *\r\n         * E.g. setting this to 180 will make the radar face end at horizontal line\r\n         * to the left off the center.\r\n         *\r\n         * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n         * needs to be 360.\r\n         *\r\n         * However, it's **not** necessary to do so. You can set those to lesser\r\n         * numbers, to create semi-circles.\r\n         *\r\n         * E.g. `startAngle = -90` with `endAngle = 0` will create a radar face that\r\n         * looks like a quarter of a circle.\r\n         *\r\n         * @default -90\r\n         * @param value  End angle (degrees)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarChart.prototype, \"radius\", {\r\n        /**\r\n         * @return Outer radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius of the Radar face.\r\n         *\r\n         * This can either be in absolute pixel value, or relative [[Percent]].\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarChart.prototype, \"pixelInnerRadius\", {\r\n        /**\r\n         * @return Inner radius in pixels\r\n         */\r\n        get: function () {\r\n            return this._pixelInnerRadius;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarChart.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Inner radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius of the radar face.\r\n         *\r\n         * This can either be in absolute pixel value, or relative [[Percent]].\r\n         *\r\n         * If set in Percent, it will be relative to `radius`. (outer radius)\r\n         *\r\n         * @param value Inner radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Triggers (re)rendering of the horizontal (X) axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis Axis\r\n     */\r\n    RadarChart.prototype.updateXAxis = function (renderer) {\r\n        //do not call super!\r\n        if (renderer) {\r\n            renderer.processRenderer();\r\n        }\r\n    };\r\n    /**\r\n     * Triggers (re)rendering of the vertical (Y) axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param axis Axis\r\n     */\r\n    RadarChart.prototype.updateYAxis = function (renderer) {\r\n        // do not call super!\r\n        if (renderer) {\r\n            renderer.processRenderer();\r\n        }\r\n    };\r\n    return RadarChart;\r\n}(XYChart));\r\nexport { RadarChart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"RadarChart\"] = RadarChart;\r\n//# sourceMappingURL=RadarChart.js.map","/**\r\n * Functionality for drawing simple ClockHands\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { Circle } from \"../../core/elements/Circle\";\r\nimport { Trapezoid } from \"../../core/elements/Trapezoid\";\r\nimport { MutableValueDisposer, MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * ClockHand class is capable of drawing a simple pointy shape with optionally\r\n * rounderd corners and an icon.\r\n *\r\n * @see {@link IClockHandEvents} for a list of available events\r\n * @see {@link IClockHandAdapters} for a list of available Adapters\r\n * @todo Improve\r\n * @important\r\n */\r\nvar ClockHand = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ClockHand, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ClockHand() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * An Axis hand is related to.\r\n         */\r\n        _this._axis = new MutableValueDisposer();\r\n        _this.className = \"ClockHand\";\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n        _this.stroke = _this.fill;\r\n        var pin = new Circle();\r\n        pin.radius = 5;\r\n        _this.pin = pin;\r\n        _this.isMeasured = false;\r\n        _this.startWidth = 5;\r\n        _this.endWidth = 1;\r\n        _this.width = percent(100);\r\n        _this.height = percent(100);\r\n        _this.radius = percent(100);\r\n        _this.innerRadius = percent(0);\r\n        var hand = new Trapezoid();\r\n        _this.hand = hand;\r\n        _this._disposers.push(_this._axis);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Re(validates) the clock hand, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ClockHand.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        var hand = this.hand;\r\n        hand.width = this.pixelWidth;\r\n        var h = Math.max(this.startWidth, this.endWidth);\r\n        hand.height = h;\r\n        hand.leftSide = percent(this.startWidth / h * 100);\r\n        hand.rightSide = percent(this.endWidth / h * 100);\r\n        if (this.axis) {\r\n            var renderer = this.axis.renderer;\r\n            var x0 = $utils.relativeRadiusToValue(this.innerRadius, renderer.pixelRadius);\r\n            var x1 = $utils.relativeRadiusToValue(this.radius, renderer.pixelRadius);\r\n            hand.x = x0;\r\n            hand.y = -h / 2;\r\n            hand.width = x1 - x0;\r\n        }\r\n    };\r\n    Object.defineProperty(ClockHand.prototype, \"pin\", {\r\n        /**\r\n         * @return Pin element\r\n         */\r\n        get: function () {\r\n            return this._pin;\r\n        },\r\n        /**\r\n         * A circle element used as hand's base. (pin)\r\n         *\r\n         * @param pin  Pin element\r\n         */\r\n        set: function (pin) {\r\n            if (this._pin) {\r\n                this.removeDispose(this._pin);\r\n            }\r\n            if (pin) {\r\n                this._pin = pin;\r\n                pin.parent = this;\r\n                this._disposers.push(pin);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ClockHand.prototype, \"hand\", {\r\n        /**\r\n         * @return Hand element\r\n         */\r\n        get: function () {\r\n            return this._hand;\r\n        },\r\n        /**\r\n         * A trapezoid shape used for hand itself.\r\n         *\r\n         * The shape of the trapezoid is controlled by ClockHand's `startWidth` and\r\n         * `endWidth` properties.\r\n         *\r\n         * Set `endWidth` to 1 (px) to make it pointy.\r\n         *\r\n         * @param hand  Hand element\r\n         */\r\n        set: function (hand) {\r\n            if (this._hand) {\r\n                this.removeDispose(this._hand);\r\n            }\r\n            if (hand) {\r\n                this._hand = hand;\r\n                hand.parent = this;\r\n                this._disposers.push(hand);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ClockHand.prototype, \"radius\", {\r\n        /**\r\n         * @return Radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Radius of the hand's outer end. (tip)\r\n         *\r\n         * Absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @default Percent(0)\r\n         * @param value  Radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ClockHand.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Radius of the hand's inner end. (base)\r\n         *\r\n         * Absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @default Percent(0)\r\n         * @param value  Radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ClockHand.prototype, \"startWidth\", {\r\n        /**\r\n         * @return Width (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startWidth\");\r\n        },\r\n        /**\r\n         * Width, in pixels, of the clock hand's inner end. (base)\r\n         *\r\n         * @default 5\r\n         * @param value  Width (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startWidth\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ClockHand.prototype, \"endWidth\", {\r\n        /**\r\n         * @return Width (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endWidth\");\r\n        },\r\n        /**\r\n         * Width, in pixels, of the clock hand's outer end. (tip)\r\n         *\r\n         * @default 1\r\n         * @param value  Width (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endWidth\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ClockHand.prototype, \"rotationDirection\", {\r\n        /**\r\n         * @return rotationDirection\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"rotationDirection\");\r\n        },\r\n        /**\r\n         * Rotation direction\r\n         *\r\n         * @default any\r\n         * @param value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"rotationDirection\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Moves clock hand to particular value.\r\n     *\r\n     * If `duration` is set to a number in milliseconds, the hand will move\r\n     * to the new position gracefully, rather than jumping rigth to it.\r\n     *\r\n     * Alternatively, you can also set `value` directly.\r\n     *\r\n     * @param value     New value\r\n     * @param duration  Animation duration (ms)\r\n     * @param easing  Animation easing function\r\n     */\r\n    ClockHand.prototype.showValue = function (value, duration, easing) {\r\n        this._value = value;\r\n        if (value != undefined) {\r\n            if (!$type.isNumber(duration)) {\r\n                duration = 0;\r\n            }\r\n            if (this.axis) {\r\n                var renderer = this.axis.renderer;\r\n                var newAngle = renderer.positionToAngle(this.axis.anyToPosition(value));\r\n                var currentAngle = this.rotation;\r\n                if (this.rotationDirection == \"clockWise\") {\r\n                    if (newAngle < currentAngle) {\r\n                        this.rotation = currentAngle - 360;\r\n                    }\r\n                }\r\n                if (this.rotationDirection == \"counterClockWise\") {\r\n                    if (newAngle > currentAngle) {\r\n                        this.rotation = currentAngle + 360;\r\n                    }\r\n                }\r\n                this.animate({ property: \"rotation\", to: newAngle }, duration, easing);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ClockHand.prototype, \"value\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this._value;\r\n        },\r\n        /**\r\n         * A current value clock hand is pointing to.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.showValue(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ClockHand.prototype, \"axis\", {\r\n        /**\r\n         * @return Axis\r\n         */\r\n        get: function () {\r\n            return this._axis.get();\r\n        },\r\n        /**\r\n         * An Axis clock hand is associated with.\r\n         *\r\n         * Hand's `value` relates to values on the Axis.\r\n         *\r\n         * @param axis  Axis\r\n         */\r\n        set: function (axis) {\r\n            if (this.axis != axis) {\r\n                this._axis.set(axis, new MultiDisposer([\r\n                    axis.events.on(\"datavalidated\", this.updateValue, this, false),\r\n                    axis.events.on(\"datarangechanged\", this.updateValue, this, false),\r\n                    axis.events.on(\"dataitemsvalidated\", this.updateValue, this, false),\r\n                    axis.events.on(\"propertychanged\", this.invalidate, this, false)\r\n                ]));\r\n            }\r\n            if (axis) {\r\n                var chart = axis.chart;\r\n                if (chart) {\r\n                    this.rotation = chart.startAngle;\r\n                }\r\n            }\r\n            this.parent = axis.renderer;\r\n            this.zIndex = 5;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Triggers `value` accessor, so that Hand animates to new position, in case\r\n     * value has changed.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ClockHand.prototype.updateValue = function () {\r\n        this.value = this.value;\r\n    };\r\n    /**\r\n * Processes JSON-based config before it is applied to the object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param config  Config\r\n */\r\n    ClockHand.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Connect clock hands with axes\r\n            if ($type.hasValue(config.axis) && $type.isString(config.axis) && this.map.hasKey(config.axis)) {\r\n                config.axis = this.map.getKey(config.axis);\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    return ClockHand;\r\n}(Container));\r\nexport { ClockHand };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ClockHand\"] = ClockHand;\r\n//# sourceMappingURL=ClockHand.js.map","/**\r\n * Module for building Gauge charts.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { RadarChart, RadarChartDataItem } from \"./RadarChart\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { ClockHand } from \"../elements/ClockHand\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[GaugeChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar GaugeChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(GaugeChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function GaugeChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"GaugeChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return GaugeChartDataItem;\r\n}(RadarChartDataItem));\r\nexport { GaugeChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a Gauge chart.\r\n *\r\n * @see {@link IGaugeChartEvents} for a list of available Events\r\n * @see {@link IGaugeChartAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/gauge-chart/} for documentation\r\n * @important\r\n */\r\nvar GaugeChart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(GaugeChart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function GaugeChart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"GaugeChart\";\r\n        _this.startAngle = 180;\r\n        _this.endAngle = 360;\r\n        _this.hands = new ListTemplate(new ClockHand());\r\n        _this.hands.events.on(\"inserted\", _this.processHand, _this, false);\r\n        _this._disposers.push(new ListDisposer(_this.hands));\r\n        _this._disposers.push(_this.hands.template);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    GaugeChart.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Gauge chart\");\r\n        }\r\n    };\r\n    /**\r\n     * Decorates a [[ClockHand]] when it is added to the chart.\r\n     *\r\n     * @param event  Event\r\n     */\r\n    GaugeChart.prototype.processHand = function (event) {\r\n        var hand = event.newValue;\r\n        if (!hand.axis) {\r\n            hand.axis = this.xAxes.getIndex(0);\r\n        }\r\n    };\r\n    /**\r\n     * This function is used to sort element's JSON config properties, so that\r\n     * some properties that absolutely need to be processed last, can be put at\r\n     * the end.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param a  Element 1\r\n     * @param b  Element 2\r\n     * @return Sorting number\r\n     */\r\n    GaugeChart.prototype.configOrder = function (a, b) {\r\n        if (a == b) {\r\n            return 0;\r\n        }\r\n        // Must come last\r\n        else if (a == \"hands\") {\r\n            return 1;\r\n        }\r\n        else if (b == \"hands\") {\r\n            return -1;\r\n        }\r\n        else {\r\n            return _super.prototype.configOrder.call(this, a, b);\r\n        }\r\n    };\r\n    return GaugeChart;\r\n}(RadarChart));\r\nexport { GaugeChart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"GaugeChart\"] = GaugeChart;\r\n//# sourceMappingURL=GaugeChart.js.map","/**\r\n * Defines Percent Chart Series.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Series, SeriesDataItem } from \"./Series\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { Tick } from \"../elements/Tick\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { ColorSet } from \"../../core/utils/ColorSet\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $ease from \"../../core/utils/Ease\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { Disposer } from \"../../core/utils/Disposer\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo: sequenced?\r\n/**\r\n * Defines a [[DataItem]] for [[PercentSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PercentSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PercentSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PercentSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PercentSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Adds an `id` attribute the the slice element and returns its id.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PercentSeriesDataItem.prototype.uidAttr = function () {\r\n        return this.slice.uidAttr();\r\n    };\r\n    /**\r\n     * Hide the data item (and corresponding visual elements).\r\n     *\r\n     * @param duration  Duration (ms)\r\n     * @param delay     Delay hiding (ms)\r\n     * @param toValue   Target value for animation\r\n     * @param fields    Fields to animate while hiding\r\n     */\r\n    PercentSeriesDataItem.prototype.hide = function (duration, delay, toValue, fields) {\r\n        if (!fields) {\r\n            fields = [\"value\"];\r\n        }\r\n        return _super.prototype.hide.call(this, duration, delay, 0, fields);\r\n    };\r\n    /**\r\n     * Sets visibility of the Data Item.\r\n     *\r\n     * @param value Data Item\r\n     */\r\n    PercentSeriesDataItem.prototype.setVisibility = function (value, noChangeValues) {\r\n        if (!noChangeValues) {\r\n            if (value) {\r\n                this.setWorkingValue(\"value\", this.values[\"value\"].value, 0, 0);\r\n            }\r\n            else {\r\n                this.setWorkingValue(\"value\", 0, 0, 0);\r\n            }\r\n        }\r\n        _super.prototype.setVisibility.call(this, value, noChangeValues);\r\n    };\r\n    /**\r\n     * Show hidden data item (and corresponding cisual elements).\r\n     *\r\n     * @param duration  Duration (ms)\r\n     * @param delay     Delay hiding (ms)\r\n     * @param fields    Fields to animate while hiding\r\n     */\r\n    PercentSeriesDataItem.prototype.show = function (duration, delay, fields) {\r\n        if (!fields) {\r\n            fields = [\"value\"];\r\n        }\r\n        return _super.prototype.show.call(this, duration, delay, fields);\r\n    };\r\n    Object.defineProperty(PercentSeriesDataItem.prototype, \"category\", {\r\n        /**\r\n         * @return Category\r\n         */\r\n        get: function () {\r\n            return this.properties.category;\r\n        },\r\n        /**\r\n         * Category.\r\n         *\r\n         * @param value  Category\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"category\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates a marker used in the legend for this slice.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Marker container\r\n     */\r\n    PercentSeriesDataItem.prototype.createLegendMarker = function (marker) {\r\n        this.component.createLegendMarker(marker, this);\r\n    };\r\n    Object.defineProperty(PercentSeriesDataItem.prototype, \"legendDataItem\", {\r\n        /**\r\n         * @return Legend data item\r\n         */\r\n        get: function () {\r\n            return this._legendDataItem;\r\n        },\r\n        /**\r\n         * A legend's data item, that corresponds to this data item.\r\n         *\r\n         * @param value  Legend data item\r\n         */\r\n        set: function (value) {\r\n            this._legendDataItem = value;\r\n            if (value.label) {\r\n                value.label.dataItem = this;\r\n            }\r\n            if (value.valueLabel) {\r\n                value.valueLabel.dataItem = this;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PercentSeriesDataItem.prototype, \"tick\", {\r\n        /**\r\n         * A Tick element, related to this data item. (slice)\r\n         *\r\n         * @readonly\r\n         * @return Tick element\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._tick) {\r\n                var tick_1 = this.component.ticks.create();\r\n                this._tick = tick_1;\r\n                this.addSprite(tick_1);\r\n                this._disposers.push(tick_1);\r\n                tick_1.parent = this.component.ticksContainer;\r\n                this._disposers.push(new Disposer(function () {\r\n                    if (_this.component) {\r\n                        _this.component.ticks.removeValue(tick_1);\r\n                    }\r\n                }));\r\n                tick_1.visible = this.visible;\r\n            }\r\n            return this._tick;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PercentSeriesDataItem.prototype, \"label\", {\r\n        /**\r\n         * A Label element, related to this data item. (slice)\r\n         *\r\n         * @readonly\r\n         * @return Label element\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._label) {\r\n                var label_1 = this.component.labels.create();\r\n                this.addSprite(label_1);\r\n                this._label = label_1;\r\n                this._disposers.push(label_1);\r\n                label_1.parent = this.component.labelsContainer;\r\n                this._disposers.push(new Disposer(function () {\r\n                    if (_this.component) {\r\n                        _this.component.labels.removeValue(label_1);\r\n                    }\r\n                }));\r\n                label_1.visible = this.visible;\r\n            }\r\n            return this._label;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PercentSeriesDataItem.prototype, \"slice\", {\r\n        /**\r\n         * An element, related to this data item. (slice)\r\n         *\r\n         * @readonly\r\n         * @return Slice element\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._slice) {\r\n                var component_1 = this.component;\r\n                var slice_1 = component_1.slices.create();\r\n                this.addSprite(slice_1);\r\n                this._slice = slice_1;\r\n                this._disposers.push(slice_1);\r\n                slice_1.parent = component_1.slicesContainer;\r\n                this._disposers.push(new Disposer(function () {\r\n                    component_1.slices.removeValue(slice_1);\r\n                }));\r\n                slice_1.visible = this.visible;\r\n                // Apply accessibility\r\n                if (component_1.itemsFocusable()) {\r\n                    this.component.role = \"menu\";\r\n                    slice_1.role = \"menuitem\";\r\n                    slice_1.focusable = true;\r\n                }\r\n                else {\r\n                    this.component.role = \"list\";\r\n                    slice_1.role = \"listitem\";\r\n                    slice_1.focusable = false;\r\n                }\r\n                // Apply screen reader label\r\n                if (slice_1.focusable) {\r\n                    slice_1.events.on(\"focus\", function (ev) {\r\n                        slice_1.readerTitle = component_1.populateString(component_1.itemReaderText, _this);\r\n                    }, undefined, false);\r\n                    slice_1.events.on(\"blur\", function (ev) {\r\n                        slice_1.readerTitle = \"\";\r\n                    }, undefined, false);\r\n                }\r\n                if (slice_1.hoverable) {\r\n                    slice_1.events.on(\"over\", function (ev) {\r\n                        slice_1.readerTitle = component_1.populateString(component_1.itemReaderText, _this);\r\n                    }, undefined, false);\r\n                    slice_1.events.on(\"out\", function (ev) {\r\n                        slice_1.readerTitle = \"\";\r\n                    }, undefined, false);\r\n                }\r\n            }\r\n            return this._slice;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PercentSeriesDataItem.prototype, \"hiddenInLegend\", {\r\n        /**\r\n         * @return Disabled in legend?\r\n         */\r\n        get: function () {\r\n            return this.properties.hiddenInLegend;\r\n        },\r\n        /**\r\n         * Should dataItem (slice) be hidden in legend?\r\n         *\r\n         * @param value Visible in legend?\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"hiddenInLegend\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PercentSeriesDataItem;\r\n}(SeriesDataItem));\r\nexport { PercentSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[PercentSeries]] which is a base class for [[PieSeries]],\r\n * [[FunnelSeries]], and [[PyramidSeries]].\r\n *\r\n * @see {@link IPercentSeriesEvents} for a list of available Events\r\n * @see {@link IPercentSeriesAdapters} for a list of available Adapters\r\n */\r\nvar PercentSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PercentSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PercentSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PercentSeries\";\r\n        _this._addAllDataItems = false;\r\n        _this.colors = new ColorSet();\r\n        _this.colors.step = 1;\r\n        _this.isMeasured = true;\r\n        _this.calculatePercent = true;\r\n        var slicesContainer = _this.createChild(Container);\r\n        slicesContainer.shouldClone = false;\r\n        slicesContainer.isMeasured = false;\r\n        _this.slicesContainer = slicesContainer;\r\n        var ticksContainer = _this.createChild(Container);\r\n        ticksContainer.shouldClone = false;\r\n        ticksContainer.isMeasured = false;\r\n        ticksContainer.layout = \"none\";\r\n        _this.ticksContainer = ticksContainer;\r\n        var labelsContainer = _this.createChild(Container);\r\n        labelsContainer.shouldClone = false;\r\n        labelsContainer.isMeasured = false;\r\n        labelsContainer.layout = \"none\";\r\n        _this.labelsContainer = labelsContainer;\r\n        _this.alignLabels = false;\r\n        _this.bulletsContainer.toFront();\r\n        // Make all slices focusable\r\n        _this.skipFocusThreshold = 50;\r\n        var defaultState = _this.defaultState;\r\n        defaultState.transitionEasing = $ease.sinOut;\r\n        // Accessibility\r\n        _this.itemReaderText = \"{category}: {value.percent.formatNumber('#.#')}%\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Creates a slice element.\r\n     *\r\n     * @return Slice\r\n     */\r\n    PercentSeries.prototype.createSlice = function () {\r\n        return new Sprite();\r\n    };\r\n    /**\r\n     * Creates a tick element.\r\n     *\r\n     * @return Tick\r\n     */\r\n    PercentSeries.prototype.createTick = function () {\r\n        return new Tick();\r\n    };\r\n    /**\r\n     * Sreates label element.\r\n     *\r\n     * @return label\r\n     */\r\n    PercentSeries.prototype.createLabel = function () {\r\n        return new Label();\r\n    };\r\n    Object.defineProperty(PercentSeries.prototype, \"slices\", {\r\n        /**\r\n         * A list of slice elements for the series.\r\n         *\r\n         * Use its `template` to configure look and behavior of the slices. E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * series.slices.template.stroke = am4core.color(\"#fff\");\r\n         * series.slices.template.strokeWidth = 2;\r\n         * ```\r\n         * ```JavaScript\r\n         * series.slices.template.stroke = am4core.color(\"#fff\");\r\n         * series.slices.template.strokeWidth = 2;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"series\": [{\r\n         *     // ...\r\n         *     \"slices\": {\r\n         *       \"stroke\": \"#fff\",\r\n         *       \"strokeWidth\": 2\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/list-templates/} for more information about list templates\r\n         * @return Slices\r\n         */\r\n        get: function () {\r\n            if (!this._slices) {\r\n                var slice = this.createSlice();\r\n                slice.applyOnClones = true;\r\n                this._disposers.push(slice);\r\n                this.initSlice(slice);\r\n                this._slices = new ListTemplate(slice);\r\n                this._disposers.push(new ListDisposer(this._slices));\r\n            }\r\n            return this._slices;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PercentSeries.prototype, \"ticks\", {\r\n        /**\r\n         * A list of tick elements for the series. Ticks connect slice to its label.\r\n         *\r\n         * Use its `template` to configure look and behavior of the ticks. E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * series.ticks.template.strokeWidth = 2;\r\n         * ```\r\n         * ```JavaScript\r\n         * series.ticks.template.strokeWidth = 2;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"series\": [{\r\n         *     // ...\r\n         *     \"ticks\": {\r\n         *       \"strokeWidth\": 2\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/list-templates/} for more information about list templates\r\n         * @return Slices\r\n         */\r\n        get: function () {\r\n            if (!this._ticks) {\r\n                var tick = this.createTick();\r\n                tick.applyOnClones = true;\r\n                this._disposers.push(tick);\r\n                this.initTick(tick);\r\n                this._ticks = new ListTemplate(tick);\r\n                this._disposers.push(new ListDisposer(this._ticks));\r\n            }\r\n            return this._ticks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PercentSeries.prototype, \"labels\", {\r\n        /**\r\n         * A list of slice label elements for the series.\r\n         *\r\n         * Use its `template` to configure look and behavior of the labels. E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * series.labels.template.fill = am4core.color(\"#c00\");\r\n         * series.labels.template.fontSize = 20;\r\n         * ```\r\n         * ```JavaScript\r\n         * series.labels.template.fill = am4core.color(\"#c00\");\r\n         * series.labels.template.fontSize = 20;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"series\": [{\r\n         *     // ...\r\n         *     \"labels\": {\r\n         *       \"stroke\": \"#c00\",\r\n         *       \"fontSize\": 20\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/list-templates/} for more information about list templates\r\n         * @return Slices\r\n         */\r\n        get: function () {\r\n            if (!this._labels) {\r\n                var label = this.createLabel();\r\n                label.applyOnClones = true;\r\n                this._disposers.push(label);\r\n                this.initLabel(label);\r\n                this._labels = new ListTemplate(label);\r\n                this._disposers.push(new ListDisposer(this._labels));\r\n            }\r\n            return this._labels;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    PercentSeries.prototype.createDataItem = function () {\r\n        return new PercentSeriesDataItem();\r\n    };\r\n    /**\r\n     * Creates and returns a new slice element.\r\n     *\r\n     * @param sliceType  Type of the slice element\r\n     * @return Slice\r\n     */\r\n    PercentSeries.prototype.initSlice = function (slice) {\r\n    };\r\n    PercentSeries.prototype.initLabel = function (label) {\r\n        label.text = \"{category}: {value.percent.formatNumber('#.0')}%\";\r\n        label.isMeasured = false;\r\n        label.padding(5, 5, 5, 5);\r\n    };\r\n    PercentSeries.prototype.initTick = function (label) {\r\n    };\r\n    /**\r\n     * Validates (processes) data items.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PercentSeries.prototype.validateDataItems = function () {\r\n        this.colors.reset();\r\n        if (this.patterns) {\r\n            this.patterns.reset();\r\n        }\r\n        _super.prototype.validateDataItems.call(this);\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    PercentSeries.prototype.validateDataElement = function (dataItem) {\r\n        var slice = dataItem.slice;\r\n        if (slice) {\r\n            if (slice.fill == undefined) {\r\n                if (this.patterns) {\r\n                    if (!$type.hasValue(slice.stroke)) {\r\n                        slice.stroke = this.colors.next();\r\n                    }\r\n                    slice.fill = this.patterns.next();\r\n                    if ($type.hasValue(slice.fillOpacity)) {\r\n                        slice.fill.backgroundOpacity = slice.fillOpacity;\r\n                    }\r\n                    if (slice.stroke instanceof Color) {\r\n                        slice.fill.stroke = slice.stroke;\r\n                        slice.fill.fill = slice.stroke;\r\n                    }\r\n                }\r\n                else {\r\n                    slice.fill = this.colors.next();\r\n                }\r\n            }\r\n            else {\r\n                this.colors.currentStep += this.colors.step;\r\n            }\r\n            if (slice.stroke == undefined) {\r\n                slice.stroke = slice.fill;\r\n            }\r\n        }\r\n        // do this at the end, otherwise bullets won't be positioned properly\r\n        _super.prototype.validateDataElement.call(this, dataItem);\r\n        if (slice) {\r\n            dataItem.bullets.each(function (key, bullet) {\r\n                if (bullet.fill == undefined) {\r\n                    bullet.fill = slice.fill;\r\n                }\r\n                if (bullet.stroke == undefined) {\r\n                    bullet.stroke = slice.stroke;\r\n                }\r\n            });\r\n        }\r\n        this.updateLegendValue(dataItem);\r\n    };\r\n    /**\r\n     * Validates (processes) data.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PercentSeries.prototype.validateData = function () {\r\n        _super.prototype.validateData.call(this);\r\n        if (this.chart) {\r\n            this.chart.feedLegend();\r\n        }\r\n    };\r\n    /**\r\n     * Arranges slice labels according to position settings.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItems  Data items\r\n     */\r\n    PercentSeries.prototype.arrangeLabels = function (dataItems) {\r\n        for (var i = 0, len = dataItems.length; i < len; i++) {\r\n            var dataItem = dataItems[i];\r\n            var label = dataItem.label;\r\n            if (label) {\r\n                if (label.invalid) {\r\n                    label.validate();\r\n                }\r\n                var lh = label.measuredHeight;\r\n                if (!label.visible) {\r\n                    lh = 0;\r\n                }\r\n                if (label.pixelY - lh / 2 < -this.maxHeight / 2) {\r\n                    label.y = -this.maxHeight / 2 + lh / 2;\r\n                }\r\n                var nextLabel = this.getNextLabel(i + 1, dataItems);\r\n                var bottom = label.pixelY + lh;\r\n                if (nextLabel) {\r\n                    if (nextLabel.y < bottom) {\r\n                        nextLabel.y = bottom;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    PercentSeries.prototype.arrangeLabels2 = function (dataItems) {\r\n        var previousTop = this.maxHeight / 2;\r\n        for (var i = dataItems.length - 1; i >= 0; i--) {\r\n            var dataItem = dataItems[i];\r\n            var label = dataItem.label;\r\n            if (label) {\r\n                if (label.invalid) {\r\n                    label.validate();\r\n                }\r\n                var lh = label.measuredHeight;\r\n                if (!label.visible) {\r\n                    lh = 0;\r\n                }\r\n                if (i == dataItems.length - 1) {\r\n                    previousTop += lh / 2;\r\n                }\r\n                if (label.pixelY + lh > previousTop) {\r\n                    label.y = previousTop - lh;\r\n                    previousTop = label.y;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns the next label according to `index`.\r\n     *\r\n     * @param index      Current index\r\n     * @param dataItems  Data items\r\n     * @return Label element\r\n     */\r\n    PercentSeries.prototype.getNextLabel = function (index, dataItems) {\r\n        if (dataItems.length >= index) {\r\n            var nextDataItem = dataItems[index];\r\n            if (nextDataItem) {\r\n                if (nextDataItem.label) {\r\n                    if (nextDataItem.visible) {\r\n                        return nextDataItem.label;\r\n                    }\r\n                    else {\r\n                        return this.getNextLabel(index + 1, dataItems);\r\n                    }\r\n                }\r\n                else {\r\n                    return this.getNextLabel(index + 1, dataItems);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(PercentSeries.prototype, \"colors\", {\r\n        /**\r\n         * @return Color set\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"colors\");\r\n        },\r\n        /**\r\n         * A color set to be used for slices.\r\n         *\r\n         * For each new subsequent slice, the chart will assign the next color in\r\n         * this set.\r\n         *\r\n         * @param value  Color set\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"colors\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PercentSeries.prototype, \"patterns\", {\r\n        /**\r\n         * @return Pattern set\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"patterns\");\r\n        },\r\n        /**\r\n         * A [[PatternSet]] to use when creating patterned fills for slices.\r\n         *\r\n         * @since 4.7.5\r\n         * @param value  Pattern set\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"patterns\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Binds related legend data item's visual settings to this series' visual\r\n     * settings.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker    Container\r\n     * @param dataItem  Data item\r\n     */\r\n    PercentSeries.prototype.createLegendMarker = function (marker, dataItem) {\r\n        $iter.each(marker.children.iterator(), function (child) {\r\n            var slice = dataItem.slice;\r\n            child.defaultState.properties.fill = slice.fill;\r\n            child.defaultState.properties.stroke = slice.stroke;\r\n            child.defaultState.properties.fillOpacity = slice.fillOpacity;\r\n            child.defaultState.properties.strokeOpacity = slice.strokeOpacity;\r\n            child.fill = slice.fill;\r\n            child.stroke = slice.stroke;\r\n            child.fillOpacity = slice.fillOpacity;\r\n            child.strokeOpacity = slice.strokeOpacity;\r\n            if (child.fill == undefined) {\r\n                child.__disabled = true;\r\n            }\r\n            var legendDataItem = marker.dataItem;\r\n            legendDataItem.color = slice.fill;\r\n            legendDataItem.colorOrig = slice.fill;\r\n            child.addDisposer(slice.events.on(\"propertychanged\", function (ev) {\r\n                if (ev.property == \"fill\") {\r\n                    child.__disabled = false;\r\n                    if (!child.isActive) {\r\n                        child.fill = slice.fill;\r\n                    }\r\n                    child.defaultState.properties.fill = slice.fill;\r\n                    legendDataItem.color = slice.fill;\r\n                    legendDataItem.colorOrig = slice.fill;\r\n                }\r\n                if (ev.property == \"stroke\") {\r\n                    if (!child.isActive) {\r\n                        child.stroke = slice.stroke;\r\n                    }\r\n                    child.defaultState.properties.stroke = slice.stroke;\r\n                }\r\n            }, undefined, false));\r\n        });\r\n    };\r\n    /**\r\n     * Repositions bullets when slice's size changes.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event  Event\r\n     */\r\n    PercentSeries.prototype.handleSliceScale = function (event) {\r\n        var _this = this;\r\n        var slice = event.target;\r\n        var dataItem = slice.dataItem;\r\n        $iter.each(dataItem.bullets.iterator(), function (a) {\r\n            var value = a[1];\r\n            _this.positionBullet(value);\r\n        });\r\n    };\r\n    /**\r\n     * Repositions bullet and labels when slice moves.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event  Event\r\n     */\r\n    PercentSeries.prototype.handleSliceMove = function (event) {\r\n    };\r\n    /**\r\n     * Copies all properties from another instance of [[PercentSeries]].\r\n     *\r\n     * @param source  Source series\r\n     */\r\n    PercentSeries.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.slices.template.copyFrom(source.slices.template);\r\n        this.labels.template.copyFrom(source.labels.template);\r\n        this.ticks.template.copyFrom(source.ticks.template);\r\n    };\r\n    Object.defineProperty(PercentSeries.prototype, \"alignLabels\", {\r\n        /**\r\n         * @return Align labels?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"alignLabels\");\r\n        },\r\n        /**\r\n         * Align labels into nice vertical columns?\r\n         *\r\n         * This will ensure that labels never overlap with each other.\r\n         *\r\n         * Arranging labels into columns makes them more readble, and better user\r\n         * experience.\r\n         *\r\n         * If set to `false` labels will be positioned at `label.radius` distance,\r\n         * and may, in some cases, overlap.\r\n         *\r\n         * @default true\r\n         * @param value  Align labels?\r\n         */\r\n        set: function (value) {\r\n            this.setAlignLabels(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    PercentSeries.prototype.setAlignLabels = function (value) {\r\n        this.setPropertyValue(\"alignLabels\", value, true);\r\n    };\r\n    Object.defineProperty(PercentSeries.prototype, \"ignoreZeroValues\", {\r\n        /**\r\n         * @return Ignore zero values\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"ignoreZeroValues\");\r\n        },\r\n        /**\r\n         * If set to `true` the chart will not show slices with zero values.\r\n         *\r\n         * @default false\r\n         * @since 4.7.9\r\n         * @param  value  Ignore zero values\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"ignoreZeroValues\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates corresponding legend data item with current values.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    PercentSeries.prototype.updateLegendValue = function (dataItem) {\r\n        if (dataItem) {\r\n            var legendDataItem = dataItem.legendDataItem;\r\n            var legendSettings = dataItem.legendSettings;\r\n            if (legendDataItem && legendSettings) {\r\n                if (legendSettings) {\r\n                    if (legendSettings.labelText) {\r\n                        legendDataItem.label.text = legendSettings.labelText;\r\n                    }\r\n                    if (legendSettings.itemLabelText) {\r\n                        legendDataItem.label.text = legendSettings.itemLabelText;\r\n                    }\r\n                    if (legendSettings.valueText) {\r\n                        legendDataItem.valueLabel.text = legendSettings.valueText;\r\n                    }\r\n                    if (legendSettings.itemValueText) {\r\n                        legendDataItem.valueLabel.text = legendSettings.itemValueText;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return PercentSeries;\r\n}(Series));\r\nexport { PercentSeries };\r\n/**\r\n * bboxter class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PercentSeries\"] = PercentSeries;\r\nregistry.registeredClasses[\"PercentSeriesDataItem\"] = PercentSeriesDataItem;\r\n/**\r\n * Add default responsive rules\r\n */\r\n/**\r\n * Disable labels and ticks.\r\n */\r\ndefaultRules.push({\r\n    relevant: ResponsiveBreakpoints.maybeXS,\r\n    state: function (target, stateId) {\r\n        if (target instanceof PercentSeries) {\r\n            var state = target.states.create(stateId);\r\n            var labelState = target.labels.template.states.create(stateId);\r\n            labelState.properties.disabled = true;\r\n            var tickState = target.ticks.template.states.create(stateId);\r\n            tickState.properties.disabled = true;\r\n            return state;\r\n        }\r\n        return null;\r\n    }\r\n});\r\n//# sourceMappingURL=PercentSeries.js.map","/**\r\n * Percent chart module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { SerialChart, SerialChartDataItem } from \"./SerialChart\";\r\nimport { PercentSeries } from \"../series/PercentSeries\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[PercentChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PercentChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PercentChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PercentChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PercentChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return PercentChartDataItem;\r\n}(SerialChartDataItem));\r\nexport { PercentChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * This is a base class for \"percent-based\" chart types like Pie and Funnel.\r\n *\r\n * @see {@link IPercentChartEvents} for a list of available Events\r\n * @see {@link IPercentChartAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/pie-chart/} for Pie chart documentation\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sliced-chart/} for Sliced chart documentation\r\n */\r\nvar PercentChart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PercentChart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PercentChart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"PercentChart\";\r\n        _this.align = \"none\";\r\n        _this.valign = \"none\";\r\n        // so that the chart is always drawn, even the legend wants all the space\r\n        _this.chartContainer.minHeight = 50;\r\n        _this.chartContainer.minWidth = 50;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * (Re)validates chart data.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PercentChart.prototype.validateData = function () {\r\n        _super.prototype.validateData.call(this);\r\n        this.feedLegend();\r\n    };\r\n    /**\r\n     * Setups the legend to use the chart's data.\r\n     * @ignore\r\n     */\r\n    PercentChart.prototype.feedLegend = function () {\r\n        var legend = this.legend;\r\n        if (legend) {\r\n            var legendData_1 = [];\r\n            $iter.each(this.series.iterator(), function (series) {\r\n                if (!series.hiddenInLegend) {\r\n                    $iter.each(series.dataItems.iterator(), function (dataItem) {\r\n                        if (!dataItem.hiddenInLegend) {\r\n                            legendData_1.push(dataItem);\r\n                            if (!dataItem.legendSettings) {\r\n                                dataItem.legendSettings = series.legendSettings;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            legend.data = legendData_1;\r\n            legend.dataFields.name = \"category\";\r\n        }\r\n    };\r\n    /**\r\n     * Creates a new [[PercentSeries]].\r\n     *\r\n     * @return New series\r\n     */\r\n    PercentChart.prototype.createSeries = function () {\r\n        return new PercentSeries();\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    PercentChart.prototype.setLegend = function (legend) {\r\n        _super.prototype.setLegend.call(this, legend);\r\n        if (legend) {\r\n            legend.labels.template.text = \"{category}\";\r\n            legend.valueLabels.template.text = \"{value.percent.formatNumber('#.0')}%\";\r\n            legend.itemContainers.template.events.on(\"over\", function (event) {\r\n                var PercentSeriesDataItem = event.target.dataItem.dataContext;\r\n                if (PercentSeriesDataItem.visible && !PercentSeriesDataItem.isHiding) {\r\n                    PercentSeriesDataItem.slice.isHover = true;\r\n                }\r\n            });\r\n            legend.itemContainers.template.events.on(\"out\", function (event) {\r\n                var PercentSeriesDataItem = event.target.dataItem.dataContext;\r\n                PercentSeriesDataItem.slice.isHover = false;\r\n            });\r\n        }\r\n    };\r\n    return PercentChart;\r\n}(SerialChart));\r\nexport { PercentChart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @hidden\r\n */\r\nregistry.registeredClasses[\"PercentChart\"] = PercentChart;\r\nregistry.registeredClasses[\"PercentChartDataItem\"] = PercentChartDataItem;\r\n//# sourceMappingURL=PercentChart.js.map","/**\r\n * Pie tick module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Tick } from \"../elements/Tick\";\r\nimport { MutableValueDisposer, MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Draws an tick line for a pie slice connecting it to a related label.\r\n *\r\n * @see {@link IPieTickEvents} for a list of available events\r\n * @see {@link IPieTickAdapters} for a list of available Adapters\r\n */\r\nvar PieTick = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieTick, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieTick() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * A label element this tick is attached to.\r\n         */\r\n        _this._label = new MutableValueDisposer();\r\n        /**\r\n         * A slice element this tick is attached to.\r\n         */\r\n        _this._slice = new MutableValueDisposer();\r\n        _this.className = \"PieTick\";\r\n        _this.element = _this.paper.add(\"polyline\");\r\n        _this._disposers.push(_this._label);\r\n        _this._disposers.push(_this._slice);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Draws the tick element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PieTick.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        var slice = this.slice;\r\n        var label = this.label;\r\n        var series = slice.dataItem.component;\r\n        if (slice && slice.radius > 0 && label && label.text) {\r\n            var x0 = slice.dx + slice.slice.dx + slice.pixelX + slice.ix * slice.radius * slice.scale;\r\n            var y0 = slice.dy + slice.slice.dy + slice.pixelY + slice.iy * slice.radiusY * slice.scale;\r\n            var x1 = void 0;\r\n            var y1 = void 0;\r\n            var x2 = void 0;\r\n            var y2 = void 0;\r\n            if (series.alignLabels) {\r\n                x1 = label.pixelX - this.length;\r\n                y1 = label.pixelY;\r\n                x2 = label.pixelX;\r\n                y2 = y1;\r\n                if (label.horizontalCenter == \"right\") {\r\n                    x1 += 2 * this.length;\r\n                    x2 = x1 - this.length;\r\n                }\r\n            }\r\n            else {\r\n                var r = label.pixelRadius(slice.radius);\r\n                x1 = x0 + r * slice.ix;\r\n                y1 = y0 + r * slice.iy;\r\n                x2 = x1;\r\n                y2 = y1;\r\n            }\r\n            this.element.attr({ \"points\": [x0, y0, x1, y1, x2, y2] });\r\n        }\r\n    };\r\n    Object.defineProperty(PieTick.prototype, \"slice\", {\r\n        /**\r\n         * @return Slice\r\n         */\r\n        get: function () {\r\n            return this._slice.get();\r\n        },\r\n        /**\r\n         * Slice element tick is attached to.\r\n         *\r\n         * @param slice  Slice\r\n         */\r\n        set: function (slice) {\r\n            this._slice.set(slice, new MultiDisposer([\r\n                slice.events.on(\"transformed\", this.invalidate, this),\r\n                slice.events.on(\"validated\", this.invalidate, this)\r\n            ]));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieTick.prototype, \"label\", {\r\n        /**\r\n         * @return Label\r\n         */\r\n        get: function () {\r\n            return this._label.get();\r\n        },\r\n        /**\r\n         * Label element tick is attached to.\r\n         *\r\n         * @param label  Label\r\n         */\r\n        set: function (label) {\r\n            this._label.set(label, label.events.on(\"transformed\", this.invalidate, this, false));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PieTick;\r\n}(Tick));\r\nexport { PieTick };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PieTick\"] = PieTick;\r\n//# sourceMappingURL=PieTick.js.map","/**\r\n * Defines Pie Chart Series.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { PercentSeries, PercentSeriesDataItem } from \"./PercentSeries\";\r\nimport { Slice } from \"../../core/elements/Slice\";\r\n//import { Slice3D } from \"../../core/elements/3D/Slice3D\";\r\nimport { AxisLabelCircular } from \"../axes/AxisLabelCircular\";\r\nimport { PieTick } from \"../elements/PieTick\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { Percent, percent } from \"../../core/utils/Percent\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo: sequenced?\r\n/**\r\n * Defines a [[DataItem]] for [[PieSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PieSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PieSeriesDataItem\";\r\n        _this.values.radiusValue = {};\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(PieSeriesDataItem.prototype, \"radiusValue\", {\r\n        /**\r\n         * @return Radius\r\n         */\r\n        get: function () {\r\n            return this.values.radiusValue.value;\r\n        },\r\n        /**\r\n         * Slice's radius, if other than default.\r\n         *\r\n         * @param value  Radius\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"radiusValue\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Hide the data item (and corresponding visual elements).\r\n     *\r\n     * @param duration  Duration (ms)\r\n     * @param delay     Delay hiding (ms)\r\n     * @param toValue   Target value for animation\r\n     * @param fields    Fields to animate while hiding\r\n     */\r\n    PieSeriesDataItem.prototype.hide = function (duration, delay, toValue, fields) {\r\n        return _super.prototype.hide.call(this, duration, delay, 0, [\"value\", \"radiusValue\"]);\r\n    };\r\n    /**\r\n     * Show hidden data item (and corresponding cisual elements).\r\n     *\r\n     * @param duration  Duration (ms)\r\n     * @param delay     Delay hiding (ms)\r\n     * @param fields    Fields to animate while hiding\r\n     */\r\n    PieSeriesDataItem.prototype.show = function (duration, delay, fields) {\r\n        return _super.prototype.show.call(this, duration, delay, [\"value\", \"radiusValue\"]);\r\n    };\r\n    return PieSeriesDataItem;\r\n}(PercentSeriesDataItem));\r\nexport { PieSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a slice series on a Pie chart.\r\n *\r\n * @see {@link IPieSeriesEvents} for a list of available Events\r\n * @see {@link IPieSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar PieSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PieSeries\";\r\n        _this.alignLabels = true;\r\n        //this.startAngle = -90;\r\n        //this.endAngle = 270;\r\n        _this.layout = \"none\";\r\n        _this.labels.template.radius = percent(5);\r\n        _this.addDisposer(_this.labels.template.events.on(\"enabled\", _this.invalidate, _this, false));\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * creates slice\r\n     */\r\n    PieSeries.prototype.createSlice = function () {\r\n        return new Slice();\r\n    };\r\n    /**\r\n     * creates tick\r\n     */\r\n    PieSeries.prototype.createTick = function () {\r\n        return new PieTick();\r\n    };\r\n    /**\r\n     * creates label\r\n     */\r\n    PieSeries.prototype.createLabel = function () {\r\n        return new AxisLabelCircular();\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    PieSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Pie Slice Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    PieSeries.prototype.createDataItem = function () {\r\n        return new PieSeriesDataItem();\r\n    };\r\n    /**\r\n     * Inits slice.\r\n     *\r\n     * @param slice to init\r\n     */\r\n    PieSeries.prototype.initSlice = function (slice) {\r\n        slice.isMeasured = false;\r\n        slice.defaultState.properties.scale = 1;\r\n        slice.observe(\"scale\", this.handleSliceScale, this);\r\n        slice.observe([\"dx\", \"dy\", \"x\", \"y\", \"shiftRadius\"], this.handleSliceMove, this);\r\n        slice.tooltipText = \"{category}: {value.percent.formatNumber('#.#')}% ({value.value})\";\r\n        var hoverState = slice.states.create(\"hover\");\r\n        hoverState.properties.scale = 1.05;\r\n        var defaultState = slice.defaultState;\r\n        defaultState.properties.shiftRadius = 0;\r\n        slice.togglable = true;\r\n        slice.events.on(\"toggled\", function (event) {\r\n            event.target.hideTooltip();\r\n        });\r\n        var activeState = slice.states.create(\"active\");\r\n        activeState.properties.shiftRadius = 0.10;\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PieSeries.prototype.validate = function () {\r\n        this._leftItems = [];\r\n        this._rightItems = [];\r\n        this._currentStartAngle = this.startAngle;\r\n        this._arcRect = $math.getArcRect(this.startAngle, this.endAngle);\r\n        this._maxRadiusPercent = 0;\r\n        for (var i = this.startIndex; i < this.endIndex; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            var radiusValuePercent = dataItem.values.radiusValue.percent;\r\n            if (radiusValuePercent > this._maxRadiusPercent) {\r\n                this._maxRadiusPercent = radiusValuePercent;\r\n            }\r\n        }\r\n        _super.prototype.validate.call(this);\r\n        if (this.alignLabels) {\r\n            if (this.startAngle > this.endAngle) {\r\n                this._rightItems.reverse();\r\n            }\r\n            else {\r\n                this._leftItems.reverse();\r\n            }\r\n            this._rightItems.sort(function (a, b) {\r\n                var aAngle = (a.slice.middleAngle + 360) % 360;\r\n                var bAngle = (b.slice.middleAngle + 360) % 360;\r\n                if (aAngle > 270) {\r\n                    aAngle -= 360;\r\n                }\r\n                if (bAngle > 270) {\r\n                    bAngle -= 360;\r\n                }\r\n                if (aAngle < bAngle) {\r\n                    return -1;\r\n                }\r\n                else {\r\n                    return 1;\r\n                }\r\n            });\r\n            this._leftItems.sort(function (a, b) {\r\n                var aAngle = (a.slice.middleAngle + 360) % 360;\r\n                var bAngle = (b.slice.middleAngle + 360) % 360;\r\n                if (aAngle < bAngle) {\r\n                    return 1;\r\n                }\r\n                else {\r\n                    return -1;\r\n                }\r\n            });\r\n            this.arrangeLabels(this._rightItems);\r\n            this.arrangeLabels2(this._rightItems);\r\n            this.arrangeLabels(this._leftItems);\r\n            this.arrangeLabels2(this._leftItems);\r\n        }\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    PieSeries.prototype.validateDataElement = function (dataItem) {\r\n        if (this.pixelRadius > 0) {\r\n            if (this.ignoreZeroValues && dataItem.value == 0) {\r\n                dataItem.__disabled = true;\r\n            }\r\n            else {\r\n                dataItem.__disabled = false;\r\n            }\r\n            // SLICE\r\n            var slice = dataItem.slice;\r\n            slice.radius = this.pixelRadius;\r\n            if ($type.isNumber(dataItem.radiusValue)) {\r\n                slice.radius = this.pixelInnerRadius + (this.pixelRadius - this.pixelInnerRadius) * dataItem.values.radiusValue.percent / this._maxRadiusPercent;\r\n            }\r\n            if (!(slice.innerRadius instanceof Percent)) {\r\n                slice.innerRadius = this.pixelInnerRadius;\r\n            }\r\n            slice.startAngle = this._currentStartAngle;\r\n            slice.arc = Math.abs(dataItem.values.value.percent) * (this.endAngle - this.startAngle) / 100;\r\n            // LABEL\r\n            if (!this.labels.template.disabled) {\r\n                var label = dataItem.label;\r\n                var tick = dataItem.tick;\r\n                tick.slice = slice;\r\n                tick.label = label;\r\n                var normalizedMiddleAngle = (slice.middleAngle + 360) % 360; // force angle to be 0 - 360;\r\n                var point = void 0;\r\n                if (this.alignLabels) {\r\n                    var labelRadius = label.pixelRadius(slice.radius);\r\n                    var x = tick.length + labelRadius;\r\n                    label.dx = 0;\r\n                    label.dy = 0;\r\n                    label.verticalCenter = \"middle\";\r\n                    var arcRect = this._arcRect;\r\n                    // right half\r\n                    if (normalizedMiddleAngle > 270 || normalizedMiddleAngle <= 90) {\r\n                        x += (arcRect.width + arcRect.x) * this.pixelRadius;\r\n                        label.horizontalCenter = \"left\";\r\n                        this._rightItems.push(dataItem);\r\n                    }\r\n                    // left half\r\n                    else {\r\n                        x -= arcRect.x * this.pixelRadius;\r\n                        label.horizontalCenter = \"right\";\r\n                        this._leftItems.push(dataItem);\r\n                        x *= -1;\r\n                    }\r\n                    var distance = slice.radius + tick.length + labelRadius;\r\n                    point = { x: x, y: slice.iy * distance };\r\n                    label.moveTo(point);\r\n                }\r\n                else {\r\n                    var depth = slice[\"depth\"];\r\n                    if (!$type.isNumber(depth)) {\r\n                        depth = 0;\r\n                    }\r\n                    label.fixPosition(slice.middleAngle, slice.radius, slice.radiusY, 0, -depth);\r\n                }\r\n            }\r\n            this._currentStartAngle += slice.arc;\r\n            // do this at the end, otherwise bullets won't be positioned properly\r\n            _super.prototype.validateDataElement.call(this, dataItem);\r\n        }\r\n    };\r\n    Object.defineProperty(PieSeries.prototype, \"radius\", {\r\n        /**\r\n         * @return Radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius for the series' slices in pixels or [[Percent]].\r\n         *\r\n         * @param value  Radius\r\n         */\r\n        set: function (value) {\r\n            if (this.setPercentProperty(\"radius\", value, true, false, 10, false)) {\r\n                this.invalidateDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieSeries.prototype, \"pixelRadius\", {\r\n        /**\r\n         * @return Radius\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            return this._pixelRadius;\r\n        },\r\n        /**\r\n         * @ignore\r\n         */\r\n        set: function (value) {\r\n            if (this._pixelRadius != value) {\r\n                this._pixelRadius = value;\r\n                this.invalidateDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieSeries.prototype, \"pixelInnerRadius\", {\r\n        /**\r\n         * @return Pixel inner radius\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            return this._pixelInnerRadius;\r\n        },\r\n        /**\r\n         * @ignore\r\n         */\r\n        set: function (value) {\r\n            if (this._pixelInnerRadius != value) {\r\n                this._pixelInnerRadius = value;\r\n                this.invalidateDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieSeries.prototype, \"innerRadius\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return Radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius for the series' slices in pixels.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Redo so that users can set it\r\n         * @param value  Radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieSeries.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Angle\r\n         */\r\n        get: function () {\r\n            var startAngle = this.getPropertyValue(\"startAngle\");\r\n            if ($type.isNumber(startAngle)) {\r\n                return startAngle;\r\n            }\r\n            else {\r\n                return this._startAngleInternal;\r\n            }\r\n        },\r\n        /**\r\n         * Start angle for the series' slices in degrees. (0-360)\r\n         *\r\n         * @param value  Angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startAngle\", $math.normalizeAngle(value), true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieSeries.prototype, \"endAngle\", {\r\n        /**\r\n         * @return Angle\r\n         */\r\n        get: function () {\r\n            var endAngle = this.getPropertyValue(\"endAngle\");\r\n            if ($type.isNumber(endAngle)) {\r\n                return endAngle;\r\n            }\r\n            else {\r\n                return this._endAngleInternal;\r\n            }\r\n        },\r\n        /**\r\n         * End angle for the series' slices in degrees. (0-360)\r\n         *\r\n         * @param value  Angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Positions series bullet.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet  Bullet\r\n     */\r\n    PieSeries.prototype.positionBullet = function (bullet) {\r\n        _super.prototype.positionBullet.call(this, bullet);\r\n        var dataItem = bullet.dataItem;\r\n        var slice = dataItem.slice;\r\n        var locationX = bullet.locationX;\r\n        if (!$type.isNumber(locationX)) {\r\n            locationX = 0.5;\r\n        }\r\n        var locationY = bullet.locationY;\r\n        if (!$type.isNumber(locationY)) {\r\n            locationY = 1;\r\n        }\r\n        var angle = slice.startAngle + slice.arc * locationX;\r\n        bullet.x = locationY * slice.radius * $math.cos(angle);\r\n        bullet.y = locationY * slice.radiusY * $math.sin(angle);\r\n    };\r\n    /**\r\n     * Repositions bullet and labels when slice moves.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event  Event\r\n     */\r\n    PieSeries.prototype.handleSliceMove = function (event) {\r\n        if (!this.alignLabels) {\r\n            var slice = event.target;\r\n            var dataItem = slice.dataItem;\r\n            // moving textelement, as label dx and dy are already employed for aligning\r\n            //@labeltodo\r\n            if (dataItem) {\r\n                var label = dataItem.label;\r\n                if (label) {\r\n                    label.dx = label.fdx + slice.dx + slice.pixelX;\r\n                    label.dy = label.fdy + slice.dy + slice.pixelY;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(PieSeries.prototype, \"bbox\", {\r\n        /**\r\n         * Returns bounding box (square) for this element.\r\n         *\r\n         * @ignore Exclude from docs\r\n         */\r\n        get: function () {\r\n            if (this.definedBBox) {\r\n                return this.definedBBox;\r\n            }\r\n            var chart = this.chart;\r\n            if (chart) {\r\n                return $math.getArcRect(chart.startAngle, chart.endAngle, this.pixelRadius);\r\n            }\r\n            return $math.getArcRect(this.startAngle, this.endAngle, this.pixelRadius);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PieSeries;\r\n}(PercentSeries));\r\nexport { PieSeries };\r\n/**\r\n * bboxter class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PieSeries\"] = PieSeries;\r\nregistry.registeredClasses[\"PieSeriesDataItem\"] = PieSeriesDataItem;\r\n//# sourceMappingURL=PieSeries.js.map","/**\r\n * Pie chart module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { PercentChart, PercentChartDataItem } from \"./PercentChart\";\r\nimport { percent, Percent } from \"../../core/utils/Percent\";\r\nimport { PieSeries } from \"../series/PieSeries\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[PieChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PieChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PieChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return PieChartDataItem;\r\n}(PercentChartDataItem));\r\nexport { PieChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a Pie chart.\r\n *\r\n * ```TypeScript\r\n * // Includes\r\n * import * as am4core from \"@amcharts/amcharts4/core\";\r\n * import * as am4charts from \"@amcharts/amcharts4/charts\";\r\n *\r\n * // Create chart\r\n * let chart = am4core.create(\"chartdiv\", am4charts.PieChart);\r\n *\r\n * // Set data\r\n * chart.data = [{\r\n * \t\"country\": \"Lithuania\",\r\n * \t\"litres\": 501.9\r\n * }, {\r\n * \t\"country\": \"Czechia\",\r\n * \t\"litres\": 301.9\r\n * }, {\r\n * \t\"country\": \"Ireland\",\r\n * \t\"litres\": 201.1\r\n * }];\r\n *\r\n * // Create series\r\n * let series = chart.series.push(new am4charts.PieSeries());\r\n * series.dataFields.value = \"litres\";\r\n * series.dataFields.category = \"country\";\r\n * ```\r\n * ```JavaScript\r\n * // Create chart\r\n * var chart = am4core.create(\"chartdiv\", am4charts.PieChart);\r\n *\r\n * // The following would work as well:\r\n * // var chart = am4core.create(\"chartdiv\", \"PieChart\");\r\n *\r\n * // Set data\r\n * chart.data = [{\r\n * \t\"country\": \"Lithuania\",\r\n * \t\"litres\": 501.9\r\n * }, {\r\n * \t\"country\": \"Czechia\",\r\n * \t\"litres\": 301.9\r\n * }, {\r\n * \t\"country\": \"Ireland\",\r\n * \t\"litres\": 201.1\r\n * }];\r\n *\r\n * // Create series\r\n * var series = chart.series.push(new am4charts.PieSeries());\r\n * series.dataFields.value = \"litres\";\r\n * series.dataFields.category = \"country\";\r\n * ```\r\n * ```JSON\r\n * var chart = am4core.createFromConfig({\r\n *\r\n * \t// Series\r\n * \t\"series\": [{\r\n * \t\t\"type\": \"PieSeries\",\r\n * \t\t\"dataFields\": {\r\n * \t\t\t\"value\": \"litres\",\r\n * \t\t\t\"category\": \"country\"\r\n * \t\t}\r\n * \t}],\r\n *\r\n * \t// Data\r\n * \t\"data\": [{\r\n * \t\t\"country\": \"Lithuania\",\r\n * \t\t\"litres\": 501.9\r\n * \t}, {\r\n * \t\t\"country\": \"Czechia\",\r\n * \t\t\"litres\": 301.9\r\n * \t}, {\r\n * \t\t\"country\": \"Ireland\",\r\n * \t\t\"litres\": 201.1\r\n * \t}]\r\n *\r\n * }, \"chartdiv\", \"PieChart\");\r\n * ```\r\n *\r\n * @see {@link IPieChartEvents} for a list of available Events\r\n * @see {@link IPieChartAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/pie-chart/} for documentation\r\n * @important\r\n */\r\nvar PieChart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieChart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieChart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"PieChart\";\r\n        // Set defaults\r\n        _this.innerRadius = 0;\r\n        _this.radius = percent(80);\r\n        _this.align = \"none\";\r\n        _this.valign = \"none\";\r\n        _this.startAngle = -90;\r\n        _this.endAngle = 270;\r\n        var seriesContainer = _this.seriesContainer;\r\n        seriesContainer.isMeasured = true;\r\n        seriesContainer.valign = \"middle\";\r\n        seriesContainer.align = \"center\";\r\n        seriesContainer.layout = \"absolute\";\r\n        seriesContainer.width = undefined;\r\n        seriesContainer.height = undefined;\r\n        // so that the pie is always drawn, even the legend wants all the space\r\n        _this.chartContainer.minHeight = 50;\r\n        _this.chartContainer.minWidth = 50;\r\n        _this.chartContainer.events.on(\"maxsizechanged\", _this.updateRadius, _this, false); // need this for the chart to change radius if legend is removed/disabled\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    PieChart.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Pie chart\");\r\n        }\r\n    };\r\n    /**\r\n     * (Re)validates the chart, causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PieChart.prototype.validateLayout = function () {\r\n        _super.prototype.validateLayout.call(this);\r\n        this.updateRadius();\r\n    };\r\n    /**\r\n     * Decorates a new [[Series]] object with required parameters when it is\r\n     * added to the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event  Event\r\n     */\r\n    PieChart.prototype.handleSeriesAdded = function (event) {\r\n        _super.prototype.handleSeriesAdded.call(this, event);\r\n        this._chartPixelRadius = undefined;\r\n        this.updateSeriesAngles();\r\n    };\r\n    PieChart.prototype.updateSeriesAngles = function () {\r\n        var _this = this;\r\n        this.series.each(function (series) {\r\n            series._startAngleInternal = _this.startAngle;\r\n            series._endAngleInternal = _this.endAngle;\r\n            //series.defaultState.properties.startAngle = this.startAngle;\r\n            //series.defaultState.properties.endAngle = this.endAngle;\r\n        });\r\n    };\r\n    /**\r\n     * Recalculates pie's radius, based on a number of criteria.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PieChart.prototype.updateRadius = function () {\r\n        var chartCont = this.chartContainer;\r\n        var rect = $math.getArcRect(this.startAngle, this.endAngle, 1);\r\n        var innerRect = { x: 0, y: 0, width: 0, height: 0 };\r\n        var innerRadius = this.innerRadius;\r\n        if (innerRadius instanceof Percent) {\r\n            innerRect = $math.getArcRect(this.startAngle, this.endAngle, innerRadius.value);\r\n        }\r\n        // @todo handle this when innerRadius set in pixels (do it for radar also)\r\n        rect = $math.getCommonRectangle([rect, innerRect]);\r\n        var maxRadius = Math.min(chartCont.innerWidth / rect.width, chartCont.innerHeight / rect.height);\r\n        if (!$type.isNumber(maxRadius)) {\r\n            maxRadius = 0;\r\n        }\r\n        var chartRadius = $utils.relativeRadiusToValue(this.radius, maxRadius);\r\n        var chartPixelInnerRadius = $utils.relativeRadiusToValue(this.innerRadius, maxRadius);\r\n        var seriesRadius = (chartRadius - chartPixelInnerRadius) / this.series.length;\r\n        if (chartRadius != this._chartPixelRadius || chartPixelInnerRadius != this._chartPixelInnerRadius) {\r\n            this._chartPixelRadius = chartRadius;\r\n            this._chartPixelInnerRadius = chartPixelInnerRadius;\r\n            //@todo: make it possible to set series radius in percent\r\n            $iter.each($iter.indexed(this.series.iterator()), function (a) {\r\n                var i = a[0];\r\n                var series = a[1];\r\n                var radius = chartPixelInnerRadius + $utils.relativeRadiusToValue(series.radius, chartRadius - chartPixelInnerRadius);\r\n                var innerRadius = chartPixelInnerRadius + $utils.relativeRadiusToValue(series.innerRadius, chartRadius - chartPixelInnerRadius);\r\n                if (!$type.isNumber(radius)) {\r\n                    radius = chartPixelInnerRadius + seriesRadius * (i + 1);\r\n                }\r\n                if (!$type.isNumber(innerRadius)) {\r\n                    innerRadius = chartPixelInnerRadius + seriesRadius * i;\r\n                }\r\n                series.pixelRadius = radius;\r\n                series.pixelInnerRadius = innerRadius;\r\n            });\r\n            this.seriesContainer.definedBBox = { x: chartRadius * rect.x, y: chartRadius * rect.y, width: chartRadius * rect.width, height: chartRadius * rect.height };\r\n            this.seriesContainer.invalidateLayout();\r\n            this.bulletsContainer.x = this.seriesContainer.x;\r\n            this.bulletsContainer.y = this.seriesContainer.y;\r\n        }\r\n    };\r\n    Object.defineProperty(PieChart.prototype, \"radius\", {\r\n        /**\r\n         * @return Radius (px or relative)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Sets radius of the pie chart.\r\n         *\r\n         * Setting to a number will mean a fixed pixel radius.\r\n         *\r\n         * Setting to an instance of [[Percent]] will mean a relative radius to\r\n         * available space.\r\n         *\r\n         * E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * // Set pie chart to be at 50% of the available space\r\n         * pieChart.radius = am4core.percent.percent(50);\r\n         * ```\r\n         * ```JavaScript\r\n         * // Set pie chart to be at 50% of the available space\r\n         * pieChart.radius = am4core.percent.percent(50);\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // Set pie chart to be at 50% of the available space\r\n         *   \"radius\": \"50%\"\r\n         * }\r\n         * ```\r\n         *\r\n         * @default 80%\r\n         * @param value  Radius (px or relative)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPercentProperty(\"radius\", value, true, false, 10, false)) {\r\n                this.invalidateLayout();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieChart.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Relative inner radius (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Sets relative inner radius (to create a donut chart).\r\n         *\r\n         * Setting to a number will mean a fixed pixel radius.\r\n         *\r\n         * Setting to an instance of [[Percent]] will mean a relative radius to\r\n         * available space.\r\n         *\r\n         * NOTE: it's not related to `radius`.\r\n         *\r\n         * E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * // Set pie chart to be at 50% of the available space\r\n         * pieChart.innerRadius = am4core.percent.percent(50);\r\n         * ```\r\n         * ```JavaScript\r\n         * // Set pie chart to be at 50% of the available space\r\n         * pieChart.innerRadius = am4core.percent.percent(50);\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // Set pie chart to be at 50% of the available space\r\n         *   \"innerRadius\": \"50%\"\r\n         * }\r\n         * ```\r\n         *\r\n         * @default 0\r\n         * @param value  Relative inner radius (0-1)\r\n         * @todo Setting things like `innerRadius` modifies `slice.radius` and it then looks like it is not the same value as in default state\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates a new [[PieSeries]].\r\n     *\r\n     * @return New series\r\n     */\r\n    PieChart.prototype.createSeries = function () {\r\n        return new PieSeries();\r\n    };\r\n    Object.defineProperty(PieChart.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Start angle (degrees)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startAngle\");\r\n        },\r\n        /**\r\n         * Starting angle of the Pie circle. (degrees)\r\n         *\r\n         * Normally, a pie chart begins (the left side of the first slice is drawn)\r\n         * at the top center. (at -90 degrees)\r\n         *\r\n         * You can use `startAngle` to change this setting.\r\n         *\r\n         * E.g. setting this to 0 will make the first slice be drawn to the right.\r\n         *\r\n         * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n         * needs to be 360.\r\n         *\r\n         * However, it's **not** necessary to do so. You can set to those lesser\r\n         * numbers, to create semi-circles.\r\n         *\r\n         * E.g. `startAngle = -90` with `endAngle = 0` will create a Pie chart that\r\n         * looks like a quarter of a circle.\r\n         *\r\n         * NOTE: This setting is not supported in a 3D pie chart.\r\n         *\r\n         * @default -90\r\n         * @param value  Start angle (degrees)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"startAngle\", value)) {\r\n                this.updateRadius();\r\n                this.updateSeriesAngles();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieChart.prototype, \"endAngle\", {\r\n        /**\r\n         * @return End angle (degrees)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endAngle\");\r\n        },\r\n        /**\r\n         * End angle of the Pie circle. (degrees)\r\n         *\r\n         * Normally, a pie chart ends (the right side of the last slice is drawn)\r\n         * at the top center. (at 270 degrees)\r\n         *\r\n         * You can use `endAngle` to change this setting.\r\n         *\r\n         * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n         * needs to be 360.\r\n         *\r\n         * However, it's **not** necessary to do so. You can set to those lesser\r\n         * numbers, to create semi-circles.\r\n         *\r\n         * E.g. `startAngle = -90` with `endAngle = 0` will create a Pie chart that\r\n         * looks like a quarter of a circle.\r\n         *\r\n         * NOTE: This setting is not supported in a 3D pie chart.\r\n         *\r\n         * @default 270\r\n         * @param value  End angle (degrees)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"endAngle\", value)) {\r\n                this.updateRadius();\r\n                this.updateSeriesAngles();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PieChart;\r\n}(PercentChart));\r\nexport { PieChart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PieChart\"] = PieChart;\r\nregistry.registeredClasses[\"PieChartDataItem\"] = PieChartDataItem;\r\n//# sourceMappingURL=PieChart.js.map","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\nimport { PieSeries, PieSeriesDataItem } from \"../series/PieSeries\";\r\nimport { Slice3D } from \"../../core/elements/3d/Slice3D\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[PieSeries3D]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PieSeries3DDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieSeries3DDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieSeries3DDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PieSeries3DDataItem\";\r\n        _this.values.depthValue = {};\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(PieSeries3DDataItem.prototype, \"depthValue\", {\r\n        /**\r\n         * @return Depth\r\n         */\r\n        get: function () {\r\n            return this.values[\"depthValue\"].value;\r\n        },\r\n        /**\r\n         * Slice depth (height).\r\n         *\r\n         * @param value  Depth\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"depthValue\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PieSeries3DDataItem;\r\n}(PieSeriesDataItem));\r\nexport { PieSeries3DDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a slice series on a 3D pie chart.\r\n *\r\n * @see {@link IPieSeries3DEvents} for a list of available Events\r\n * @see {@link IPieSeries3DAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar PieSeries3D = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieSeries3D, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieSeries3D() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PieSeries3D\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    PieSeries3D.prototype.createDataItem = function () {\r\n        return new PieSeries3DDataItem();\r\n    };\r\n    /**\r\n     * creates slice\r\n     */\r\n    PieSeries3D.prototype.createSlice = function () {\r\n        return new Slice3D();\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    PieSeries3D.prototype.validateDataElement = function (dataItem) {\r\n        var slice = dataItem.slice;\r\n        var depth = this.depth;\r\n        if (!$type.isNumber(depth)) {\r\n            depth = this.chart.depth;\r\n        }\r\n        var depthPercent = dataItem.values.depthValue.percent;\r\n        if (!$type.isNumber(depthPercent)) {\r\n            depthPercent = 100;\r\n        }\r\n        slice.depth = depthPercent * depth / 100;\r\n        var angle = this.angle;\r\n        if (!$type.isNumber(angle)) {\r\n            angle = this.chart.angle;\r\n        }\r\n        slice.angle = angle;\r\n        _super.prototype.validateDataElement.call(this, dataItem);\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PieSeries3D.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        for (var i = this._workingStartIndex; i < this._workingEndIndex; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            var slice = dataItem.slice;\r\n            var startAngle = slice.startAngle;\r\n            // find quarter\r\n            //q0 || q1\r\n            if ((startAngle >= -90 && startAngle < 90)) {\r\n                slice.toFront();\r\n            }\r\n            //q2 || q3\r\n            else if ((startAngle >= 90)) {\r\n                slice.toBack();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(PieSeries3D.prototype, \"depth\", {\r\n        /**\r\n         * @return Depth (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"depth\");\r\n        },\r\n        /**\r\n         * Depth (height) of the pie slice in pixels.\r\n         *\r\n         * @param value  Depth (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"depth\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieSeries3D.prototype, \"angle\", {\r\n        /**\r\n         * @return Angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"angle\");\r\n        },\r\n        /**\r\n         * Angle of the view point of the 3D pie. (0-360)\r\n         *\r\n         * @param value  Angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"angle\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Positions series bullet.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet  Bullet\r\n     */\r\n    PieSeries3D.prototype.positionBullet = function (bullet) {\r\n        _super.prototype.positionBullet.call(this, bullet);\r\n        var dataItem = bullet.dataItem;\r\n        var slice = dataItem.slice;\r\n        bullet.y = bullet.pixelY - slice.depth;\r\n    };\r\n    return PieSeries3D;\r\n}(PieSeries));\r\nexport { PieSeries3D };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PieSeries3D\"] = PieSeries3D;\r\nregistry.registeredClasses[\"PieSeries3DDataItem\"] = PieSeries3DDataItem;\r\n//# sourceMappingURL=PieSeries3D.js.map","/**\r\n * 3D Pie chart module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * Imports\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { PieChart, PieChartDataItem } from \"./PieChart\";\r\nimport { PieSeries3D } from \"../series/PieSeries3D\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[PieChart3D]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PieChart3DDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieChart3DDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieChart3DDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PieChart3DDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return PieChart3DDataItem;\r\n}(PieChartDataItem));\r\nexport { PieChart3DDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a 3D Pie chart.\r\n *\r\n *  * ```TypeScript\r\n * // Includes\r\n * import * as am4core from \"@amcharts/amcharts4/core\";\r\n * import * as am4charts from \"@amcharts/amcharts4/charts\";\r\n *\r\n * // Create chart\r\n * let chart = am4core.create(\"chartdiv\", am4charts.Pie3DChart);\r\n *\r\n * // Set data\r\n * chart.data = [{\r\n * \t\"country\": \"Lithuania\",\r\n * \t\"litres\": 501.9\r\n * }, {\r\n * \t\"country\": \"Czechia\",\r\n * \t\"litres\": 301.9\r\n * }, {\r\n * \t\"country\": \"Ireland\",\r\n * \t\"litres\": 201.1\r\n * }];\r\n *\r\n * // Create series\r\n * let series = chart.series.push(new am4charts.Pie3DSeries());\r\n * series.dataFields.value = \"litres\";\r\n * series.dataFields.category = \"country\";\r\n * ```\r\n * ```JavaScript\r\n * // Create chart\r\n * var chart = am4core.create(\"chartdiv\", am4charts.Pie3DChart);\r\n *\r\n * // The following would work as well:\r\n * // var chart = am4core.create(\"chartdiv\", \"Pie3DChart\");\r\n *\r\n * // Set data\r\n * chart.data = [{\r\n * \t\"country\": \"Lithuania\",\r\n * \t\"litres\": 501.9\r\n * }, {\r\n * \t\"country\": \"Czechia\",\r\n * \t\"litres\": 301.9\r\n * }, {\r\n * \t\"country\": \"Ireland\",\r\n * \t\"litres\": 201.1\r\n * }];\r\n *\r\n * // Create series\r\n * var series = chart.series.push(new am4charts.Pie3DSeries());\r\n * series.dataFields.value = \"litres\";\r\n * series.dataFields.category = \"country\";\r\n * ```\r\n * ```JSON\r\n * var chart = am4core.createFromConfig({\r\n *\r\n * \t// Series\r\n * \t\"series\": [{\r\n * \t\t\"type\": \"Pie3DSeries\",\r\n * \t\t\"dataFields\": {\r\n * \t\t\t\"value\": \"litres\",\r\n * \t\t\t\"category\": \"country\"\r\n * \t\t}\r\n * \t}],\r\n *\r\n * \t// Data\r\n * \t\"data\": [{\r\n * \t\t\"country\": \"Lithuania\",\r\n * \t\t\"litres\": 501.9\r\n * \t}, {\r\n * \t\t\"country\": \"Czechia\",\r\n * \t\t\"litres\": 301.9\r\n * \t}, {\r\n * \t\t\"country\": \"Ireland\",\r\n * \t\t\"litres\": 201.1\r\n * \t}]\r\n *\r\n * }, \"chartdiv\", \"Pie3DChart\");\r\n * ```\r\n *\r\n * @see {@link IPieChart3DEvents} for a list of available Events\r\n * @see {@link IPieChart3DAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/pie-chart/} for documentation\r\n * @important\r\n */\r\nvar PieChart3D = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PieChart3D, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PieChart3D() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"PieChart3D\";\r\n        _this.depth = 20;\r\n        _this.angle = 10;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(PieChart3D.prototype, \"depth\", {\r\n        /**\r\n         * @return Depth (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"depth\");\r\n        },\r\n        /**\r\n         * Depth of the 3D pie in pixels.\r\n         *\r\n         * This will determine \"height\" of the pie.\r\n         *\r\n         * @default 20\r\n         * @param value  Depth (px)\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"depth\", value)) {\r\n                this.invalidateDataUsers();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PieChart3D.prototype, \"angle\", {\r\n        /**\r\n         * @return Angle (degrees)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"angle\");\r\n        },\r\n        /**\r\n         * An angle of a \"point of view\" in degrees. Possible range 0 - 90.\r\n         *\r\n         * @default 10\r\n         * @param value  Angle (degrees)\r\n         */\r\n        set: function (value) {\r\n            value = $math.fitToRange(value, 0, 90);\r\n            if (this.setPropertyValue(\"angle\", value)) {\r\n                this.invalidateDataUsers();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates and returns a new Series.\r\n     *\r\n     * @return New series\r\n     */\r\n    PieChart3D.prototype.createSeries = function () {\r\n        return new PieSeries3D();\r\n    };\r\n    return PieChart3D;\r\n}(PieChart));\r\nexport { PieChart3D };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PieChart3D\"] = PieChart3D;\r\n//# sourceMappingURL=PieChart3D.js.map","/**\r\n * Sliced chart module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { PercentChart, PercentChartDataItem } from \"./PercentChart\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[SlicedChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar SlicedChartDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SlicedChartDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SlicedChartDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"SlicedChartDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return SlicedChartDataItem;\r\n}(PercentChartDataItem));\r\nexport { SlicedChartDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a Sliced chart.\r\n *\r\n * @see {@link ISlicedChartEvents} for a list of available Events\r\n * @see {@link ISlicedChartAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sliced-chart/} for documentation\r\n * @important\r\n */\r\nvar SlicedChart = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SlicedChart, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SlicedChart() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"SlicedChart\";\r\n        _this.seriesContainer.layout = \"horizontal\";\r\n        _this.padding(15, 15, 15, 15);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    SlicedChart.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Sliced chart\");\r\n        }\r\n    };\r\n    /**\r\n     * (Re)validates the chart, causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    SlicedChart.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n    };\r\n    return SlicedChart;\r\n}(PercentChart));\r\nexport { SlicedChart };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SlicedChart\"] = SlicedChart;\r\nregistry.registeredClasses[\"SlicedChartDataItem\"] = SlicedChartDataItem;\r\n//# sourceMappingURL=SlicedChart.js.map","/**\r\n * FlowDiagramNode module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $string from \"../../core/utils/String\";\r\nimport * as $order from \"../../core/utils/Order\";\r\nimport * as $number from \"../../core/utils/Number\";\r\nimport { RoundedRectangle } from \"../../core/elements/RoundedRectangle\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport { LegendSettings } from \"../Legend\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a node in a Flow Diagram.\r\n *\r\n * A Flow node is a block with a value, which represents its size on the\r\n * diagram.\r\n *\r\n * Nodes are connected via [[FlowLink]] elements.\r\n *\r\n * @see {@link IFlowDiagramNodeEvents} for a list of available events\r\n * @see {@link IFlowDiagramNodeAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar FlowDiagramNode = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FlowDiagramNode, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FlowDiagramNode() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Settings for the appearance of the related legend items.\r\n         */\r\n        _this.legendSettings = new LegendSettings();\r\n        _this.className = \"FlowDiagramNode\";\r\n        _this.isMeasured = false;\r\n        // TODO can this be removed ?\r\n        new InterfaceColorSet();\r\n        _this.draggable = true;\r\n        _this.inert = true;\r\n        _this.setStateOnChildren = true;\r\n        _this.events.on(\"positionchanged\", _this.invalidateLinks, _this, false);\r\n        _this.events.on(\"sizechanged\", _this.invalidateLinks, _this, false);\r\n        return _this;\r\n        //this.events.on(\"hit\", this.handleHit, this, false);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    FlowDiagramNode.prototype.handleHit = function (event) {\r\n        if (this.isHidden || this.isHiding) {\r\n            this.show();\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    /**\r\n     * Shows hidden node.\r\n     *\r\n     * @param duration  Duration of reveal animation (ms)\r\n     * @return Animation\r\n     */\r\n    FlowDiagramNode.prototype.show = function (duration) {\r\n        var animation = _super.prototype.show.call(this, duration);\r\n        this.outgoingDataItems.each(function (dataItem) {\r\n            if (!dataItem.toNode || (dataItem.toNode && !dataItem.toNode.isHidden)) {\r\n                dataItem.setWorkingValue(\"value\", dataItem.getValue(\"value\"), duration);\r\n            }\r\n        });\r\n        this.incomingDataItems.each(function (dataItem) {\r\n            if (!dataItem.fromNode || (dataItem.fromNode && !dataItem.fromNode.isHidden)) {\r\n                dataItem.setWorkingValue(\"value\", dataItem.getValue(\"value\"), duration);\r\n            }\r\n        });\r\n        return animation;\r\n    };\r\n    /**\r\n     * Hides node.\r\n     *\r\n     * @param duration  Duration of hiding animation (ms)\r\n     * @return Animation\r\n     */\r\n    FlowDiagramNode.prototype.hide = function (duration) {\r\n        var animation = _super.prototype.hide.call(this, duration);\r\n        this.outgoingDataItems.each(function (dataItem) {\r\n            dataItem.setWorkingValue(\"value\", 0, duration);\r\n        });\r\n        this.incomingDataItems.each(function (dataItem) {\r\n            dataItem.setWorkingValue(\"value\", 0, duration);\r\n        });\r\n        return animation;\r\n    };\r\n    /**\r\n     * Marks node as invalid, for redrawal in the next update cycle.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    FlowDiagramNode.prototype.validate = function () {\r\n        if (!this.isDisposed()) {\r\n            _super.prototype.validate.call(this);\r\n            this.invalidateLinks();\r\n        }\r\n    };\r\n    /**\r\n     * Invalidates all links, attached to this node.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    FlowDiagramNode.prototype.invalidateLinks = function () {\r\n        var _this = this;\r\n        this.outgoingDataItems.each(function (dataItem) {\r\n            var link = dataItem.link;\r\n            if (link.colorMode == \"fromNode\") {\r\n                link.fill = link.dataItem.fromNode.color;\r\n            }\r\n            if (link.colorMode == \"gradient\") {\r\n                link.fill = link.gradient;\r\n                link.stroke = link.gradient;\r\n                var stop_1 = link.gradient.stops.getIndex(0);\r\n                if (stop_1) {\r\n                    stop_1.color = _this.color;\r\n                    link.gradient.validate();\r\n                }\r\n            }\r\n        });\r\n        this.incomingDataItems.each(function (dataItem) {\r\n            var link = dataItem.link;\r\n            if (link.colorMode == \"toNode\") {\r\n                link.fill = link.dataItem.toNode.color;\r\n            }\r\n            if (link.colorMode == \"gradient\") {\r\n                link.fill = link.gradient;\r\n                link.stroke = link.gradient;\r\n                var stop_2 = link.gradient.stops.getIndex(1);\r\n                if (stop_2) {\r\n                    stop_2.color = _this.color;\r\n                    link.gradient.validate();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"incomingDataItems\", {\r\n        /**\r\n         * List of incoming items (links).\r\n         *\r\n         * @readonly\r\n         * @return Incoming items\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._incomingDataItems) {\r\n                var incomingDataItems = new List();\r\n                incomingDataItems.events.on(\"inserted\", function () {\r\n                    if (_this.chart.sortBy == \"name\") {\r\n                        _this._incomingSorted = $iter.sort(_this._incomingDataItems.iterator(), function (x, y) { return $string.order(x.fromName, y.fromName); });\r\n                    }\r\n                    else if (_this.chart.sortBy == \"value\") {\r\n                        _this._incomingSorted = $iter.sort(_this._incomingDataItems.iterator(), function (x, y) { return $order.reverse($number.order(x.value, y.value)); });\r\n                    }\r\n                    else {\r\n                        _this._incomingSorted = _this._incomingDataItems.iterator();\r\n                    }\r\n                }, undefined, false);\r\n                this._incomingDataItems = incomingDataItems;\r\n            }\r\n            return this._incomingDataItems;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"outgoingDataItems\", {\r\n        /**\r\n         * List of outgoing items (links).\r\n         *\r\n         * @readonly\r\n         * @return Outgoing items\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._outgoingDataItems) {\r\n                var outgoingDataItems = new List();\r\n                outgoingDataItems.events.on(\"inserted\", function () {\r\n                    if (_this.chart.sortBy == \"name\") {\r\n                        _this._outgoingSorted = $iter.sort(_this._outgoingDataItems.iterator(), function (x, y) { return $string.order(x.fromName, y.fromName); });\r\n                    }\r\n                    else if (_this.chart.sortBy == \"value\") {\r\n                        _this._outgoingSorted = $iter.sort(_this._outgoingDataItems.iterator(), function (x, y) { return $order.reverse($number.order(x.value, y.value)); });\r\n                    }\r\n                    else {\r\n                        _this._outgoingSorted = _this._outgoingDataItems.iterator();\r\n                    }\r\n                }, undefined, false);\r\n                this._outgoingDataItems = outgoingDataItems;\r\n            }\r\n            return this._outgoingDataItems;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"name\", {\r\n        /**\r\n         * @return Name\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"name\");\r\n        },\r\n        /**\r\n         * A name of the node.\r\n         *\r\n         * @param value  Name\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"name\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"total\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"total\");\r\n        },\r\n        /**\r\n         * Sum of all incoming+outgoing link values\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"total\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"totalIncoming\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"totalIncoming\");\r\n        },\r\n        /**\r\n         * Sum of all incomming link values.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"totalIncoming\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"totalOutgoing\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"totalOutgoing\");\r\n        },\r\n        /**\r\n         * Sum of all outgoing link values.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"totalOutgoing\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"color\", {\r\n        /**\r\n         * @return Color\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"color\");\r\n        },\r\n        /**\r\n         * Node's color.\r\n         *\r\n         * @param value  Color\r\n         */\r\n        set: function (value) {\r\n            this.setColorProperty(\"color\", value);\r\n            if (this._background) {\r\n                this._background.fill = value;\r\n            }\r\n            this.fill = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates elements in related legend container, that mimics the look of this\r\n     * Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Legend item container\r\n     */\r\n    FlowDiagramNode.prototype.createLegendMarker = function (marker) {\r\n        var w = marker.pixelWidth;\r\n        var h = marker.pixelHeight;\r\n        marker.removeChildren();\r\n        var column = marker.createChild(RoundedRectangle);\r\n        column.shouldClone = false;\r\n        $object.copyProperties(this, column, visualProperties);\r\n        column.stroke = this.fill;\r\n        column.copyFrom(this);\r\n        column.padding(0, 0, 0, 0); // if columns will have padding (which is often), legend marker will be very narrow\r\n        column.width = w;\r\n        column.height = h;\r\n        var legendDataItem = marker.dataItem;\r\n        legendDataItem.color = column.fill;\r\n        legendDataItem.colorOrig = column.fill;\r\n    };\r\n    Object.defineProperty(FlowDiagramNode.prototype, \"legendDataItem\", {\r\n        /**\r\n         * @return Data item\r\n         */\r\n        get: function () {\r\n            return this._legendDataItem;\r\n        },\r\n        /**\r\n         * Legend data item that corresponds to this series.\r\n         *\r\n         * @param value  Data item\r\n         */\r\n        set: function (value) {\r\n            this._legendDataItem = value;\r\n            this._legendDataItem.itemContainer.deepInvalidate();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FlowDiagramNode;\r\n}(Container));\r\nexport { FlowDiagramNode };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FlowDiagramNode\"] = FlowDiagramNode;\r\n//# sourceMappingURL=FlowDiagramNode.js.map","/**\r\n * FlowDiagramLink module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { LinearGradient } from \"../../core/rendering/fills/LinearGradient\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Polyline } from \"../../core/elements/Polyline\";\r\nimport { Line } from \"../../core/elements/Line\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Flow Diagram.\r\n *\r\n * @see {@link IFlowDiagramLinkEvents} for a list of available events\r\n * @see {@link IFlowDiagramLinkAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar FlowDiagramLink = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FlowDiagramLink, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FlowDiagramLink() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"FlowDiagramLink\";\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.maskBullets = false;\r\n        _this.colorMode = \"fromNode\";\r\n        _this.layout = \"none\";\r\n        _this.isMeasured = false;\r\n        _this.startAngle = 0;\r\n        _this.endAngle = 0;\r\n        _this.strokeOpacity = 0;\r\n        // this is very important, otherwise the container will be shifted\r\n        _this.verticalCenter = \"none\";\r\n        _this.horizontalCenter = \"none\";\r\n        _this.tooltipText = \"{fromName}→{toName}:{value.value}\";\r\n        _this.tooltipLocation = 0.5;\r\n        _this.link = _this.createChild(Sprite);\r\n        _this.link.shouldClone = false;\r\n        _this.link.setElement(_this.paper.add(\"path\"));\r\n        _this.link.isMeasured = false;\r\n        _this.fillOpacity = 0.2;\r\n        _this.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Positions bullets\r\n     * @ignore\r\n     */\r\n    FlowDiagramLink.prototype.positionBullets = function () {\r\n        var _this = this;\r\n        $iter.each(this.bullets.iterator(), function (bullet) {\r\n            bullet.parent = _this.bulletsContainer;\r\n            bullet.maxWidth = _this.maxWidth;\r\n            bullet.maxHeight = _this.maxHeight;\r\n            _this.positionBullet(bullet);\r\n        });\r\n    };\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"bulletsContainer\", {\r\n        /**\r\n         * Bullets container\r\n         */\r\n        get: function () {\r\n            if (!this._bulletsContainer) {\r\n                var bulletsContainer = this.createChild(Container);\r\n                bulletsContainer.shouldClone = false;\r\n                bulletsContainer.layout = \"none\";\r\n                this._bulletsContainer = bulletsContainer;\r\n            }\r\n            return this._bulletsContainer;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"bulletsMask\", {\r\n        /**\r\n         * Bullets mask sprite\r\n         */\r\n        get: function () {\r\n            if (!this._bulletsMask) {\r\n                var bulletsMask = this.createChild(Sprite);\r\n                bulletsMask.shouldClone = false;\r\n                bulletsMask.setElement(this.paper.add(\"path\"));\r\n                bulletsMask.isMeasured = false;\r\n                this._bulletsMask = bulletsMask;\r\n            }\r\n            return this._bulletsMask;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Positions bullets at relative bullet.locationX position on the link.\r\n     * @ignore\r\n     */\r\n    FlowDiagramLink.prototype.positionBullet = function (bullet) {\r\n        var location = bullet.locationX;\r\n        if (!$type.isNumber(location)) {\r\n            location = bullet.locationY;\r\n        }\r\n        if (!$type.isNumber(location)) {\r\n            location = 0.5;\r\n        }\r\n        var point = this.middleLine.positionToPoint(location);\r\n        bullet.moveTo(point);\r\n        var rotationField = bullet.propertyFields.rotation;\r\n        var angle;\r\n        if (bullet.dataItem) {\r\n            var dataContext = bullet.dataItem.dataContext;\r\n            angle = dataContext[rotationField];\r\n        }\r\n        if (!$type.isNumber(angle)) {\r\n            angle = point.angle;\r\n        }\r\n        bullet.rotation = angle;\r\n    };\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Start angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startAngle\");\r\n        },\r\n        /**\r\n         * [startAngle description]\r\n         *\r\n         * @todo Description\r\n         * @param value  Start angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"endAngle\", {\r\n        /**\r\n         * @return End angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endAngle\");\r\n        },\r\n        /**\r\n         * [endAngle description]\r\n         *\r\n         * @todo Description\r\n         * @param value  End angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"colorMode\", {\r\n        /**\r\n         * Fill mode\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"colorMode\");\r\n        },\r\n        /**\r\n         * Should link be filled with a solid color, color of from node, color of toNode or gradient between node colors.\r\n         * Some of the links, like ChordLink does not support gradiens well.\r\n         *\r\n         * @param value  Fill mode\r\n         */\r\n        set: function (value) {\r\n            if (value == \"gradient\") {\r\n                var color = this.fill;\r\n                this.gradient.stops.clear();\r\n                if (color instanceof Color) {\r\n                    this.gradient.addColor(color);\r\n                    this.gradient.addColor(color);\r\n                }\r\n                this.fill = this.gradient;\r\n                this.stroke = this.gradient;\r\n            }\r\n            this.setPropertyValue(\"colorMode\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"maskBullets\", {\r\n        /**\r\n         * @return mask bullets value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maskBullets\");\r\n        },\r\n        /**\r\n         * Should link bullets be masked or not\r\n         *\r\n         * @param value\r\n         * @default false\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"maskBullets\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"tooltipLocation\", {\r\n        /**\r\n         * Tooltip location value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tooltipLocation\");\r\n        },\r\n        /**\r\n         * Relative location of a tooltip.\r\n         * @default 0.5\r\n         *\r\n         * @param value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tooltipLocation\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds color steps in the link gradient.\r\n     *\r\n     * @param value  Fill option\r\n     */\r\n    FlowDiagramLink.prototype.setFill = function (value) {\r\n        _super.prototype.setFill.call(this, value);\r\n        var gradient = this._gradient;\r\n        if (gradient && value instanceof Color) {\r\n            gradient.stops.clear();\r\n            gradient.addColor(value);\r\n            gradient.addColor(value);\r\n        }\r\n    };\r\n    /**\r\n     * Updates bounding box based on element dimension settings.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    FlowDiagramLink.prototype.measureElement = function () {\r\n    };\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"bullets\", {\r\n        /**\r\n         * List of bullets\r\n         *\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._bullets) {\r\n                this._bullets = new ListTemplate(new Bullet());\r\n                this._disposers.push(new ListDisposer(this._bullets));\r\n                this._disposers.push(this._bullets.template);\r\n                this._bullets.events.on(\"inserted\", function (event) {\r\n                    event.newValue.events.on(\"propertychanged\", function (event) {\r\n                        if (event.property == \"locationX\" || event.property == \"locationY\") {\r\n                            _this.positionBullet(event.target);\r\n                        }\r\n                    }, undefined, false);\r\n                }, undefined, false);\r\n            }\r\n            return this._bullets;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Copies properties from another [[FlowDiagramLink]].\r\n     *\r\n     * @param source  Source link\r\n     */\r\n    FlowDiagramLink.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.bullets.copyFrom(source.bullets);\r\n        var middleLine = this.middleLine;\r\n        if (middleLine) {\r\n            if (middleLine instanceof Line && source.middleLine instanceof Line) {\r\n                middleLine.copyFrom(source.middleLine);\r\n            }\r\n            if (middleLine instanceof Polyline && source.middleLine instanceof Polyline) {\r\n                middleLine.copyFrom(source.middleLine);\r\n            }\r\n        }\r\n        this.link.copyFrom(source.link);\r\n    };\r\n    /**\r\n     * @ignore Exclude from docs\r\n     * @return Tooltip X (px)\r\n     */\r\n    FlowDiagramLink.prototype.getTooltipX = function () {\r\n        if (this.middleLine) {\r\n            return this.middleLine.positionToPoint(this.tooltipLocation).x;\r\n        }\r\n    };\r\n    /**\r\n     * @ignore Exclude from docs\r\n     * @return Tooltip Y (px)\r\n     */\r\n    FlowDiagramLink.prototype.getTooltipY = function () {\r\n        if (this.middleLine) {\r\n            return this.middleLine.positionToPoint(this.tooltipLocation).y;\r\n        }\r\n    };\r\n    Object.defineProperty(FlowDiagramLink.prototype, \"gradient\", {\r\n        /**\r\n         * A gradiend instance that is used to provided colored gradient fills for\r\n         * the Flow link.\r\n         */\r\n        get: function () {\r\n            if (!this._gradient) {\r\n                this._gradient = new LinearGradient();\r\n            }\r\n            return this._gradient;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FlowDiagramLink;\r\n}(Container));\r\nexport { FlowDiagramLink };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FlowDiagramLink\"] = FlowDiagramLink;\r\n//# sourceMappingURL=FlowDiagramLink.js.map","/**\r\n * FlowDiagram module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Chart, ChartDataItem } from \"../Chart\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { DictionaryTemplate, DictionaryDisposer } from \"../../core/utils/Dictionary\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { FlowDiagramNode } from \"../elements/FlowDiagramNode\";\r\nimport { FlowDiagramLink } from \"../elements/FlowDiagramLink\";\r\nimport { LinearGradientModifier } from \"../../core/rendering/fills/LinearGradientModifier\";\r\nimport { ColorSet } from \"../../core/utils/ColorSet\";\r\nimport { toColor, Color } from \"../../core/utils/Color\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $number from \"../../core/utils/Number\";\r\nimport * as $order from \"../../core/utils/Order\";\r\nimport { Disposer } from \"../../core/utils/Disposer\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo rearange notes after dragged\r\n/**\r\n * Defines a [[DataItem]] for [[FlowDiagram]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar FlowDiagramDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FlowDiagramDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FlowDiagramDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"FlowDiagramDataItem\";\r\n        _this.values.value = {};\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(FlowDiagramDataItem.prototype, \"fromName\", {\r\n        /**\r\n         * @return name\r\n         */\r\n        get: function () {\r\n            return this.properties.fromName;\r\n        },\r\n        /**\r\n         * Source node's name.\r\n         *\r\n         * @param value  Name\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"fromName\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramDataItem.prototype, \"toName\", {\r\n        /**\r\n         * @return name\r\n         */\r\n        get: function () {\r\n            return this.properties.toName;\r\n        },\r\n        /**\r\n         * Destination node's name.\r\n         *\r\n         * @param value  Name\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"toName\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramDataItem.prototype, \"color\", {\r\n        /**\r\n         * @return color\r\n         */\r\n        get: function () {\r\n            return this.properties.color;\r\n        },\r\n        /**\r\n         * Node color\r\n         *\r\n         * @param value  Name\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"color\", toColor(value));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramDataItem.prototype, \"value\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.value.value;\r\n        },\r\n        /**\r\n         * Link's value.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"value\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagramDataItem.prototype, \"link\", {\r\n        /**\r\n         * A visual element, representing link between the source and target nodes.\r\n         *\r\n         * Link's actual thickness will be determined by `value` of this link and\r\n         * `value` of the source node.\r\n         *\r\n         * @readonly\r\n         * @return Link element\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._link) {\r\n                var link_1 = this.component.links.create();\r\n                this._link = link_1;\r\n                this.addSprite(link_1);\r\n                this._disposers.push(new Disposer(function () {\r\n                    if (_this.component) {\r\n                        _this.component.links.removeValue(link_1);\r\n                    }\r\n                }));\r\n            }\r\n            return this._link;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FlowDiagramDataItem;\r\n}(ChartDataItem));\r\nexport { FlowDiagramDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a Pie chart\r\n * @see {@link IFlowDiagramEvents} for a list of available Events\r\n * @see {@link IFlowDiagramAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar FlowDiagram = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FlowDiagram, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FlowDiagram() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * A Color Set to use when applying/generating colors for each subsequent\r\n         * node.\r\n         */\r\n        _this.colors = new ColorSet();\r\n        _this.className = \"FlowDiagram\";\r\n        _this.nodePadding = 20;\r\n        _this.sortBy = \"none\";\r\n        _this.sequencedInterpolation = true;\r\n        _this.colors.step = 2;\r\n        _this.minNodeSize = 0.02;\r\n        var linksContainer = _this.chartContainer.createChild(Container);\r\n        linksContainer.shouldClone = false;\r\n        linksContainer.layout = \"none\";\r\n        linksContainer.isMeasured = false;\r\n        _this.linksContainer = linksContainer;\r\n        var nodesContainer = _this.chartContainer.createChild(Container);\r\n        nodesContainer.shouldClone = false;\r\n        nodesContainer.layout = \"none\";\r\n        nodesContainer.isMeasured = false;\r\n        _this.nodesContainer = nodesContainer;\r\n        // this data item holds sums, averages, etc\r\n        _this.dataItem = _this.createDataItem();\r\n        _this.dataItem.component = _this;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    FlowDiagram.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.dataItem.dispose();\r\n    };\r\n    /**\r\n     * (Re)validates chart's data, effectively causing the chart to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    FlowDiagram.prototype.validateData = function () {\r\n        var _this = this;\r\n        if (this._parseDataFrom == 0) {\r\n            this.nodes.clear();\r\n        }\r\n        this.sortNodes();\r\n        this.colors.reset();\r\n        _super.prototype.validateData.call(this);\r\n        var sum = 0;\r\n        var count = 0;\r\n        var low;\r\n        var high;\r\n        // build blocks\r\n        $iter.each(this.dataItems.iterator(), function (dataItem) {\r\n            var fromName = dataItem.fromName;\r\n            if (fromName) {\r\n                var node = _this.nodes.getKey(fromName);\r\n                if (!node) {\r\n                    node = _this.nodes.create(fromName);\r\n                    node.name = fromName;\r\n                    node.chart = _this;\r\n                    node.dataItem = dataItem;\r\n                }\r\n                dataItem.fromNode = node;\r\n                dataItem.fromNode.outgoingDataItems.push(dataItem);\r\n            }\r\n            var toName = dataItem.toName;\r\n            if (toName) {\r\n                var node = _this.nodes.getKey(toName);\r\n                if (!node) {\r\n                    node = _this.nodes.create(toName);\r\n                    node.name = toName;\r\n                    node.chart = _this;\r\n                    node.dataItem = dataItem;\r\n                }\r\n                dataItem.toNode = node;\r\n                dataItem.toNode.incomingDataItems.push(dataItem);\r\n            }\r\n            if (!dataItem.fromNode) {\r\n                var strokeModifier = new LinearGradientModifier();\r\n                strokeModifier.opacities = [0, 1];\r\n                dataItem.link.strokeModifier = strokeModifier;\r\n            }\r\n            if (!dataItem.toNode) {\r\n                var fillModifier = new LinearGradientModifier();\r\n                fillModifier.opacities = [1, 0];\r\n                dataItem.link.strokeModifier = fillModifier;\r\n            }\r\n            var value = dataItem.value;\r\n            if ($type.isNumber(value)) {\r\n                sum += value;\r\n                count++;\r\n                if (low > value || !$type.isNumber(low)) {\r\n                    low = value;\r\n                }\r\n                if (high < value || !$type.isNumber(high)) {\r\n                    high = value;\r\n                }\r\n            }\r\n        });\r\n        var key = \"value\";\r\n        this.dataItem.setCalculatedValue(key, high, \"high\");\r\n        this.dataItem.setCalculatedValue(key, low, \"low\");\r\n        this.dataItem.setCalculatedValue(key, sum, \"sum\");\r\n        this.dataItem.setCalculatedValue(key, sum / count, \"average\");\r\n        this.dataItem.setCalculatedValue(key, count, \"count\");\r\n        $iter.each(this.nodes.iterator(), function (strNode) {\r\n            var node = strNode[1];\r\n            if (node.fill instanceof Color) {\r\n                node.color = node.fill;\r\n            }\r\n            if (node.color == undefined) {\r\n                node.color = _this.colors.next();\r\n            }\r\n            if (node.dataItem.color != undefined) {\r\n                node.color = node.dataItem.color;\r\n            }\r\n            if (!node.dataItem.visible) {\r\n                node.hide(0);\r\n            }\r\n            _this.getNodeValue(node);\r\n        });\r\n        this.sortNodes();\r\n        this.feedLegend();\r\n    };\r\n    /**\r\n     * [handleDataItemWorkingValueChange description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    FlowDiagram.prototype.handleDataItemWorkingValueChange = function (dataItem, name) {\r\n        this.invalidate();\r\n    };\r\n    /**\r\n     * Sorts nodes by either their values or names, based on `sortBy` setting.\r\n     */\r\n    FlowDiagram.prototype.sortNodes = function () {\r\n        if (this.sortBy == \"name\") {\r\n            this._sorted = this.nodes.sortedIterator();\r\n        }\r\n        else if (this.sortBy == \"value\") {\r\n            this._sorted = $iter.sort(this.nodes.iterator(), function (x, y) { return $order.reverse($number.order(x[1].total, y[1].total)); });\r\n        }\r\n        else {\r\n            this._sorted = this.nodes.iterator();\r\n        }\r\n    };\r\n    /**\r\n     * Updates a cummulative value of the node.\r\n     *\r\n     * A node's value is determined by summing values of all of the incoming\r\n     * links or all of the outgoing links, whichever results in bigger number.\r\n     *\r\n     * @param node  Node value\r\n     */\r\n    FlowDiagram.prototype.getNodeValue = function (node) {\r\n        // todo: totalIncomming totalOutgoing, total\r\n        var incomingTotal = 0;\r\n        var outgoingTotal = 0;\r\n        $iter.each(node.incomingDataItems.iterator(), function (dataItem) {\r\n            var value = dataItem.getWorkingValue(\"value\");\r\n            if ($type.isNumber(value)) {\r\n                incomingTotal += value;\r\n            }\r\n        });\r\n        $iter.each(node.outgoingDataItems.iterator(), function (dataItem) {\r\n            var value = dataItem.getWorkingValue(\"value\");\r\n            if ($type.isNumber(value)) {\r\n                outgoingTotal += value;\r\n            }\r\n        });\r\n        node.total = incomingTotal + outgoingTotal;\r\n        node.totalIncoming = incomingTotal;\r\n        node.totalOutgoing = outgoingTotal;\r\n    };\r\n    ;\r\n    /**\r\n     * Changes the sort type of the nodes.\r\n     *\r\n     * This will actually reshuffle nodes using nice animation.\r\n     */\r\n    FlowDiagram.prototype.changeSorting = function () {\r\n        this.sortNodes();\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    FlowDiagram.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Flow diagram\");\r\n        }\r\n    };\r\n    /**\r\n     * Creates and returns a new data item.\r\n     *\r\n     * @return Data item\r\n     */\r\n    FlowDiagram.prototype.createDataItem = function () {\r\n        return new FlowDiagramDataItem();\r\n    };\r\n    Object.defineProperty(FlowDiagram.prototype, \"nodePadding\", {\r\n        /**\r\n         * @return Padding (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"nodePadding\");\r\n        },\r\n        /**\r\n         * Padding for node square in pixels.\r\n         *\r\n         * Padding will add extra space around node's name label.\r\n         *\r\n         * @param value Padding (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"nodePadding\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagram.prototype, \"sortBy\", {\r\n        /**\r\n         * @returns Node sorting\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"sortBy\");\r\n        },\r\n        /**\r\n         * Sort nodes by \"name\" or \"value\" or do not sort at all. If not sorted, nodes will appear in the same order as they are in the data.\r\n         * @default \"none\"\r\n         * @param value  Node sorting\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"sortBy\", value);\r\n            this.changeSorting();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagram.prototype, \"minNodeSize\", {\r\n        /**\r\n         * @returns min node size\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"minNodeSize\");\r\n        },\r\n        /**\r\n         * Sometimes nodes can get very small if their value is little. With this setting you\r\n         * can set min size of a node (this is relative value from the total size of all nodes)\r\n         * @default 0.02\r\n         * @param value  Node sorting\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"minNodeSize\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FlowDiagram.prototype, \"nodes\", {\r\n        /**\r\n         * A list of chart's nodes.\r\n         *\r\n         * @param {DictionaryTemplate<string, this[\"_node\"]>}\r\n         */\r\n        get: function () {\r\n            if (!this._nodes) {\r\n                var template = this.createNode();\r\n                template.events.on(\"hit\", function (event) {\r\n                    event.target.handleHit(event);\r\n                });\r\n                this._nodes = new DictionaryTemplate(template);\r\n                this._disposers.push(new DictionaryDisposer(this._nodes));\r\n            }\r\n            return this._nodes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    FlowDiagram.prototype.createNode = function () {\r\n        var node = new FlowDiagramNode();\r\n        this._disposers.push(node);\r\n        return node;\r\n    };\r\n    Object.defineProperty(FlowDiagram.prototype, \"links\", {\r\n        /**\r\n         * A list of chart's links.\r\n         *\r\n         * @param {ListTemplate<this[\"_link\"]>}\r\n         */\r\n        get: function () {\r\n            if (!this._links) {\r\n                this._links = new ListTemplate(this.createLink());\r\n                this._disposers.push(new ListDisposer(this._links));\r\n            }\r\n            return this._links;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    FlowDiagram.prototype.createLink = function () {\r\n        var link = new FlowDiagramLink();\r\n        this._disposers.push(link);\r\n        return link;\r\n    };\r\n    /**\r\n     * Setups the legend to use the chart's data.\r\n     * @ignore\r\n     */\r\n    FlowDiagram.prototype.feedLegend = function () {\r\n        var legend = this.legend;\r\n        if (legend) {\r\n            var legendData_1 = [];\r\n            this.nodes.each(function (key, node) {\r\n                legendData_1.push(node);\r\n            });\r\n            legend.data = legendData_1;\r\n            legend.dataFields.name = \"name\";\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    FlowDiagram.prototype.disposeData = function () {\r\n        _super.prototype.disposeData.call(this);\r\n        this.nodes.clear();\r\n    };\r\n    return FlowDiagram;\r\n}(Chart));\r\nexport { FlowDiagram };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FlowDiagram\"] = FlowDiagram;\r\n//# sourceMappingURL=FlowDiagram.js.map","/**\r\n * Bullet module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Bullet } from \"./Bullet\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a bullet with a textual label.\r\n *\r\n * Uses [[Label]] instance to draw the label, so the label itself is\r\n * configurable.\r\n *\r\n * @see {@link IBulletEvents} for a list of available events\r\n * @see {@link IBulletAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar LabelBullet = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LabelBullet, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function LabelBullet() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"LabelBullet\";\r\n        var label = _this.createChild(Label);\r\n        label.shouldClone = false;\r\n        label.verticalCenter = \"middle\";\r\n        label.horizontalCenter = \"middle\";\r\n        label.truncate = true;\r\n        label.hideOversized = false;\r\n        label.maxWidth = 500;\r\n        label.maxHeight = 500;\r\n        label.stroke = color();\r\n        label.strokeOpacity = 0;\r\n        label.fill = new InterfaceColorSet().getFor(\"text\");\r\n        _this.events.on(\"maxsizechanged\", _this.handleMaxSize, _this, false);\r\n        _this.label = label;\r\n        // not good, as lineSeries will have labels somewhere in the middle.\r\n        //this.locationX = 0.5;\r\n        //this.locationY = 0.5;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    LabelBullet.prototype.handleMaxSize = function () {\r\n        this.label.maxWidth = this.maxWidth;\r\n        this.label.maxHeight = this.maxHeight;\r\n    };\r\n    /**\r\n     * Copies all proprities and related stuff from another instance of\r\n     * [[LabelBullet]].\r\n     *\r\n     * @param source  Source element\r\n     */\r\n    LabelBullet.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.label.copyFrom(source.label);\r\n    };\r\n    return LabelBullet;\r\n}(Bullet));\r\nexport { LabelBullet };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"LabelBullet\"] = LabelBullet;\r\n//# sourceMappingURL=LabelBullet.js.map","/**\r\n * SankeyNode module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { FlowDiagramNode } from \"./FlowDiagramNode\";\r\nimport { LabelBullet } from \"./LabelBullet\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a node in a Sankey Diagram.\r\n *\r\n * A Sankey node is a block with a value, which represents its size on the\r\n * diagram.\r\n *\r\n * Nodes are connected via [[SankeyLink]] elements.\r\n *\r\n * @see {@link ISankeyNodeEvents} for a list of available events\r\n * @see {@link ISankeyNodeAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar SankeyNode = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SankeyNode, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SankeyNode() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * [nextInCoord description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         */\r\n        _this.nextInCoord = 0;\r\n        /**\r\n         * [nextOutCoord description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         */\r\n        _this.nextOutCoord = 0;\r\n        _this.className = \"SankeyNode\";\r\n        _this.width = 10;\r\n        _this.height = 10;\r\n        var nameLabel = _this.createChild(LabelBullet);\r\n        nameLabel.shouldClone = false;\r\n        //@should we auto update these locations if position is changed?\r\n        nameLabel.locationX = 1;\r\n        nameLabel.locationY = 0.5;\r\n        nameLabel.label.text = \"{name}\";\r\n        //nameLabel.label.textElement.hideOversized = false;\r\n        nameLabel.width = 150;\r\n        nameLabel.height = 150;\r\n        nameLabel.label.horizontalCenter = \"left\";\r\n        nameLabel.label.padding(0, 5, 0, 5);\r\n        _this.nameLabel = nameLabel;\r\n        var valueLabel = _this.createChild(LabelBullet);\r\n        valueLabel.shouldClone = false;\r\n        valueLabel.label.hideOversized = false;\r\n        valueLabel.locationX = 0.5;\r\n        valueLabel.locationY = 0.5;\r\n        valueLabel.width = 150;\r\n        valueLabel.height = 150;\r\n        //valueLabel.label.text = \"{value}\";\r\n        valueLabel.label.horizontalCenter = \"middle\";\r\n        _this.valueLabel = valueLabel;\r\n        var hiddenState = _this.hiddenState;\r\n        hiddenState.properties.fill = new InterfaceColorSet().getFor(\"disabledBackground\");\r\n        hiddenState.properties.opacity = 0.5;\r\n        hiddenState.properties.visible = true;\r\n        _this.background.hiddenState.copyFrom(hiddenState);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Invalidates all links, attached to this node.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    SankeyNode.prototype.invalidateLinks = function () {\r\n        var _this = this;\r\n        _super.prototype.invalidateLinks.call(this);\r\n        this.nextInCoord = 0;\r\n        this.nextOutCoord = 0;\r\n        var chart = this.chart;\r\n        if (chart) {\r\n            var orientation_1 = chart.orientation;\r\n            if (this._incomingSorted) {\r\n                $iter.each(this._incomingSorted, function (dataItem) {\r\n                    var link = dataItem.link;\r\n                    var value = dataItem.getWorkingValue(\"value\");\r\n                    if ($type.isNumber(value)) {\r\n                        link.parent = _this.chart.linksContainer;\r\n                        var x = void 0;\r\n                        var y = void 0;\r\n                        var angle = void 0;\r\n                        if (orientation_1 == \"horizontal\") {\r\n                            x = _this.pixelX + _this.dx;\r\n                            y = _this.nextInCoord + _this.pixelY + _this.dy;\r\n                            angle = 0;\r\n                        }\r\n                        else {\r\n                            y = _this.pixelY + _this.dy;\r\n                            x = _this.nextInCoord + _this.pixelX + _this.dx;\r\n                            angle = 90;\r\n                        }\r\n                        link.endX = x;\r\n                        link.endY = y;\r\n                        link.startAngle = angle;\r\n                        link.endAngle = angle;\r\n                        link.gradient.rotation = angle;\r\n                        link.linkWidth = value * chart.valueHeight;\r\n                        if (!dataItem.fromNode) {\r\n                            if (orientation_1 == \"horizontal\") {\r\n                                link.maxWidth = 200;\r\n                                link.startX = _this.pixelX + _this.dx - link.maxWidth;\r\n                                link.startY = link.endY;\r\n                            }\r\n                            else {\r\n                                link.maxHeight = 200;\r\n                                link.startX = link.endX;\r\n                                link.startY = _this.pixelY + _this.dy - link.maxHeight;\r\n                            }\r\n                            // TODO is this needed ?\r\n                            $utils.used(link.gradient);\r\n                            link.fill = dataItem.toNode.color;\r\n                            var stop_1 = link.gradient.stops.getIndex(0);\r\n                            if (stop_1) {\r\n                                if (link.colorMode == \"gradient\") {\r\n                                    stop_1.color = _this.color;\r\n                                }\r\n                                stop_1.opacity = 0;\r\n                                link.fill = link.gradient;\r\n                                link.stroke = link.gradient;\r\n                                link.gradient.validate();\r\n                            }\r\n                        }\r\n                        //link.validate();\r\n                        _this.nextInCoord += link.linkWidth;\r\n                    }\r\n                });\r\n            }\r\n            if (this._outgoingSorted) {\r\n                $iter.each(this._outgoingSorted, function (dataItem) {\r\n                    var link = dataItem.link;\r\n                    link.parent = _this.chart.linksContainer;\r\n                    var value = dataItem.getWorkingValue(\"value\");\r\n                    if ($type.isNumber(value)) {\r\n                        var x = void 0;\r\n                        var y = void 0;\r\n                        var angle = void 0;\r\n                        if (orientation_1 == \"horizontal\") {\r\n                            angle = 0;\r\n                            x = _this.pixelX + _this.pixelWidth + _this.dx - 1;\r\n                            y = _this.nextOutCoord + _this.pixelY + _this.dy;\r\n                        }\r\n                        else {\r\n                            angle = 90;\r\n                            x = _this.nextOutCoord + _this.pixelX + _this.dx;\r\n                            y = _this.pixelY + _this.pixelHeight + _this.dy - 1;\r\n                        }\r\n                        link.startX = x;\r\n                        link.startY = y;\r\n                        link.startAngle = angle;\r\n                        link.endAngle = angle;\r\n                        link.gradient.rotation = angle;\r\n                        link.linkWidth = value * _this.chart.valueHeight;\r\n                        if (!dataItem.toNode) {\r\n                            if (orientation_1 == \"horizontal\") {\r\n                                link.maxWidth = 200;\r\n                                link.endX = _this.pixelX + link.maxWidth + _this.dx;\r\n                                link.endY = link.startY;\r\n                            }\r\n                            else {\r\n                                link.maxHeight = 200;\r\n                                link.endX = link.startX;\r\n                                link.endY = _this.pixelY + link.maxHeight + _this.dy;\r\n                            }\r\n                            link.opacity = _this.opacity;\r\n                            var stop_2 = link.gradient.stops.getIndex(1);\r\n                            if (stop_2) {\r\n                                if (link.colorMode == \"gradient\") {\r\n                                    stop_2.color = _this.color;\r\n                                }\r\n                                stop_2.opacity = 0;\r\n                                link.fill = link.gradient;\r\n                                link.stroke = link.gradient;\r\n                                link.gradient.validate();\r\n                            }\r\n                        }\r\n                        //link.validate();\r\n                        _this.nextOutCoord += link.linkWidth;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        this.positionBullet(this.nameLabel);\r\n        this.positionBullet(this.valueLabel);\r\n    };\r\n    /**\r\n     * Positions the bullet so it is centered within the node element.\r\n     *\r\n     * @param bullet  Target bullet\r\n     */\r\n    SankeyNode.prototype.positionBullet = function (bullet) {\r\n        if (bullet) {\r\n            bullet.x = this.measuredWidth * bullet.locationX;\r\n            bullet.y = this.measuredHeight * bullet.locationY;\r\n        }\r\n    };\r\n    Object.defineProperty(SankeyNode.prototype, \"level\", {\r\n        /**\r\n         * @return Level\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"level\");\r\n        },\r\n        /**\r\n         * A level node is displayed at. (0 - ...)\r\n         *\r\n         * Levels are measured from left to right.\r\n         *\r\n         * The nodes in the left-most column will have `level = 0`.\r\n         *\r\n         * Nodes in second column - `level = 1`, etc.\r\n         *\r\n         * @param value  Level\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"level\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Copies properties and labels from another [[SankeyNode]].\r\n     *\r\n     * @param source  Source node\r\n     */\r\n    SankeyNode.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.nameLabel.copyFrom(source.nameLabel);\r\n        this.valueLabel.copyFrom(source.valueLabel);\r\n    };\r\n    return SankeyNode;\r\n}(FlowDiagramNode));\r\nexport { SankeyNode };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SankeyNode\"] = SankeyNode;\r\n//# sourceMappingURL=SankeyNode.js.map","/**\r\n * SankeyLink module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\nimport { FlowDiagramLink } from \"./FlowDiagramLink\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Polyspline } from \"../../core/elements/Polyspline\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $smoothing from \"../../core/rendering/Smoothing\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Sankey Diagram.\r\n *\r\n * @see {@link ISankeyLinkEvents} for a list of available events\r\n * @see {@link ISankeyLinkAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar SankeyLink = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SankeyLink, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SankeyLink() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"SankeyLink\";\r\n        // TODO can this be removed ?\r\n        new InterfaceColorSet();\r\n        _this.tension = 0.8;\r\n        _this.controlPointDistance = 0.2;\r\n        _this.startAngle = 0;\r\n        _this.endAngle = 0;\r\n        _this.linkWidth = 0;\r\n        _this.startX = 0;\r\n        _this.endX = 0;\r\n        _this.startY = 0;\r\n        _this.endY = 0;\r\n        _this.middleLine = _this.createChild(Polyspline);\r\n        _this.middleLine.shouldClone = false;\r\n        _this.middleLine.strokeOpacity = 0;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * (Re)validates (redraws) the link.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    SankeyLink.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        if (!this.isTemplate) {\r\n            var x0 = this.startX;\r\n            var y0 = this.startY;\r\n            var x1 = this.endX;\r\n            var y1 = this.endY;\r\n            if (!$type.isNumber(x1)) {\r\n                x1 = x0;\r\n            }\r\n            if (!$type.isNumber(y1)) {\r\n                y1 = y0;\r\n            }\r\n            var startAngle = this.startAngle;\r\n            var endAngle = this.endAngle;\r\n            var w = this.linkWidth;\r\n            var path = \"\";\r\n            var xt0 = x0;\r\n            var yt0 = y0;\r\n            var xt1 = x1;\r\n            var yt1 = y1;\r\n            var xb0 = x0 + w * $math.sin(startAngle);\r\n            var xb1 = x1 + w * $math.sin(endAngle);\r\n            var yb0 = y0 + w * $math.cos(startAngle);\r\n            var yb1 = y1 + w * $math.cos(endAngle);\r\n            var xm0 = x0 + w / 2 * $math.sin(startAngle);\r\n            var xm1 = x1 + w / 2 * $math.sin(endAngle);\r\n            var ym0 = y0 + w / 2 * $math.cos(startAngle);\r\n            var ym1 = y1 + w / 2 * $math.cos(endAngle);\r\n            this.zIndex = this.zIndex || this.dataItem.index;\r\n            var tensionX = this.tension + (1 - this.tension) * $math.sin(startAngle);\r\n            var tensionY = this.tension + (1 - this.tension) * $math.cos(startAngle);\r\n            this.middleLine.tensionX = tensionX;\r\n            this.middleLine.tensionY = tensionY;\r\n            if ($type.isNumber(w) && ($type.isNumber(x0) && $type.isNumber(x1) && $type.isNumber(y0) && $type.isNumber(y1))) {\r\n                // solves issues with gradient fill of straight lines\r\n                if ($math.round(xt0, 3) == $math.round(xt1, 3)) {\r\n                    xt1 += 0.01;\r\n                }\r\n                if ($math.round(yt0, 3) == $math.round(yt1, 3)) {\r\n                    yt1 += 0.01;\r\n                }\r\n                if ($math.round(xb0, 3) == $math.round(xb1, 3)) {\r\n                    xb1 += 0.01;\r\n                }\r\n                if ($math.round(yb0, 3) == $math.round(yb1, 3)) {\r\n                    yb1 += 0.01;\r\n                }\r\n                var minX = Math.min(xb0, xb1, xt0, xt1);\r\n                var minY = Math.min(yb0, yb1, yt0, yt1);\r\n                var maxX = Math.max(xb0, xb1, xt0, xt1);\r\n                var maxY = Math.max(yb0, yb1, yt0, yt1);\r\n                this._bbox = {\r\n                    x: minX,\r\n                    y: minY,\r\n                    width: maxX - minX,\r\n                    height: maxY - minY\r\n                };\r\n                var cpd = this.controlPointDistance;\r\n                var kxt0 = xt0 + (xt1 - xt0) * cpd * $math.cos(startAngle);\r\n                var kyt0 = yt0 + (yt1 - yt0) * cpd * $math.sin(startAngle);\r\n                var kxt1 = xt1 - (xt1 - xt0) * cpd * $math.cos(endAngle);\r\n                var kyt1 = yt1 - (yt1 - yt0) * cpd * $math.sin(endAngle);\r\n                var kxm0 = xm0 + (xm1 - xm0) * cpd * $math.cos(startAngle);\r\n                var kym0 = ym0 + (ym1 - ym0) * cpd * $math.sin(startAngle);\r\n                var kxm1 = xm1 - (xm1 - xm0) * cpd * $math.cos(endAngle);\r\n                var kym1 = ym1 - (ym1 - ym0) * cpd * $math.sin(endAngle);\r\n                var angle = $math.getAngle({ x: kxt0, y: kyt0 }, { x: kxt1, y: kyt1 });\r\n                var dx = (w / $math.cos(angle) - w) / $math.tan(angle) * $math.cos(startAngle);\r\n                var dy = (w / $math.sin(angle) - w) * $math.tan(angle) * $math.sin(startAngle);\r\n                var kxb0 = -dx / 2 + xb0 + (xb1 - xb0) * cpd * $math.cos(startAngle);\r\n                var kyb0 = -dy / 2 + yb0 + (yb1 - yb0) * cpd * $math.sin(startAngle);\r\n                var kxb1 = -dx / 2 + xb1 - (xb1 - xb0) * cpd * $math.cos(endAngle);\r\n                var kyb1 = -dy / 2 + yb1 - (yb1 - yb0) * cpd * $math.sin(endAngle);\r\n                this.middleLine.segments = [[{ x: xm0, y: ym0 }, { x: kxm0, y: kym0 }, { x: kxm1, y: kym1 }, { x: xm1, y: ym1 }]];\r\n                kxt0 += dx / 2;\r\n                kyt0 += dy / 2;\r\n                kxt1 += dx / 2;\r\n                kyt1 += dy / 2;\r\n                path += $path.moveTo({ x: xt0, y: yt0 });\r\n                path += new $smoothing.Tension(tensionX, tensionY).smooth([{ x: xt0, y: yt0 }, { x: kxt0, y: kyt0 }, { x: kxt1, y: kyt1 }, { x: xt1, y: yt1 }]);\r\n                path += $path.lineTo({ x: xb1, y: yb1 });\r\n                path += new $smoothing.Tension(tensionX, tensionY).smooth([{ x: xb1, y: yb1 }, { x: kxb1, y: kyb1 }, { x: kxb0, y: kyb0 }, { x: xb0, y: yb0 }]);\r\n                path += $path.closePath();\r\n            }\r\n            this.link.path = path;\r\n            if (this.maskBullets) {\r\n                this.bulletsMask.path = path;\r\n                this.bulletsContainer.mask = this.bulletsMask;\r\n            }\r\n            this.positionBullets();\r\n        }\r\n    };\r\n    Object.defineProperty(SankeyLink.prototype, \"startX\", {\r\n        /**\r\n         * @return Start X\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startX\");\r\n        },\r\n        /**\r\n         * [startX description]\r\n         *\r\n         * @todo Description\r\n         * @param value  Start X\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startX\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SankeyLink.prototype, \"endX\", {\r\n        /**\r\n         * @return End X\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endX\");\r\n        },\r\n        /**\r\n         * [endX description]\r\n         *\r\n         * @todo Description\r\n         * @param value  End X\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endX\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SankeyLink.prototype, \"startY\", {\r\n        /**\r\n         * @return Start Y\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startY\");\r\n        },\r\n        /**\r\n         * [startY description]\r\n         *\r\n         * @todo Description\r\n         * @param value  Start Y\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startY\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SankeyLink.prototype, \"endY\", {\r\n        /**\r\n         * @return End Y\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endY\");\r\n        },\r\n        /**\r\n         * [endY description]\r\n         *\r\n         * @todo Description\r\n         * @param value End Y\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endY\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SankeyLink.prototype, \"linkWidth\", {\r\n        /**\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"linkWidth\");\r\n        },\r\n        /**\r\n         * [linkWidth description]\r\n         *\r\n         * @todo Description\r\n         * @param value [description]\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"linkWidth\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SankeyLink.prototype, \"controlPointDistance\", {\r\n        /**\r\n         * @return relative control point distance\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"controlPointDistance\");\r\n        },\r\n        /**\r\n         * Distance of control point of a link, defines relative distance from a node at which linke should bend\r\n         * @default 0.2\r\n         * @param value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"controlPointDistance\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SankeyLink.prototype, \"tension\", {\r\n        /**\r\n         * @return tension value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tension\");\r\n        },\r\n        /**\r\n         * Tension of a spline, 1 would make the link to have sharp edges\r\n         * @default 0.8\r\n         * @param value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tension\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SankeyLink;\r\n}(FlowDiagramLink));\r\nexport { SankeyLink };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SankeyLink\"] = SankeyLink;\r\n//# sourceMappingURL=SankeyLink.js.map","/**\r\n * Sankey diagram module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { FlowDiagram, FlowDiagramDataItem } from \"./FlowDiagram\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { SankeyNode } from \"../elements/SankeyNode\";\r\nimport { SankeyLink } from \"../elements/SankeyLink\";\r\nimport { Animation } from \"../../core/utils/Animation\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $object from \"../../core/utils/Object\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo rearange notes after dragged\r\n/**\r\n * Defines a [[DataItem]] for [[SankeyDiagram]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar SankeyDiagramDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SankeyDiagramDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SankeyDiagramDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"SankeyDiagramDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return SankeyDiagramDataItem;\r\n}(FlowDiagramDataItem));\r\nexport { SankeyDiagramDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a Sankey Diagram chart.\r\n *\r\n * @see {@link ISankeyDiagramEvents} for a list of available Events\r\n * @see {@link ISankeyDiagramAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sankey-diagram/} for documentation\r\n * @important\r\n */\r\nvar SankeyDiagram = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SankeyDiagram, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function SankeyDiagram() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"SankeyDiagram\";\r\n        _this.orientation = \"horizontal\";\r\n        _this.nodeAlign = \"middle\";\r\n        _this.nodesContainer.width = percent(100);\r\n        _this.nodesContainer.height = percent(100);\r\n        _this.linksContainer.width = percent(100);\r\n        _this.linksContainer.height = percent(100);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * (Re)validates chart's data, effectively causing the chart to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    SankeyDiagram.prototype.validateData = function () {\r\n        var _this = this;\r\n        _super.prototype.validateData.call(this);\r\n        this._levelCount = 0;\r\n        this.nodes.each(function (key, node) {\r\n            node.level = undefined;\r\n        });\r\n        this.nodes.each(function (key, node) {\r\n            node.level = _this.getNodeLevel(node, 0);\r\n            _this._levelCount = $math.max(_this._levelCount, node.level);\r\n        });\r\n    };\r\n    /**\r\n     * Returns node's highest level.\r\n     *\r\n     * @param node   Node\r\n     * @param level  Current level\r\n     * @return New level\r\n     */\r\n    SankeyDiagram.prototype.getNodeLevel = function (node, level) {\r\n        var _this = this;\r\n        //@todo solve circular so\r\n        var levels = [level];\r\n        $iter.each(node.incomingDataItems.iterator(), function (link) {\r\n            if (link.fromNode) {\r\n                if ($type.isNumber(link.fromNode.level)) {\r\n                    levels.push(link.fromNode.level + 1);\r\n                }\r\n                else {\r\n                    levels.push(_this.getNodeLevel(link.fromNode, level + 1));\r\n                }\r\n            }\r\n        });\r\n        return Math.max.apply(Math, tslib_1.__spread(levels));\r\n    };\r\n    /**\r\n     * Calculates relation between pixel height and total value.\r\n     *\r\n     * In Sankey the actual thickness of links and height of nodes will depend\r\n     * on their values.\r\n     */\r\n    SankeyDiagram.prototype.calculateValueHeight = function () {\r\n        var _this = this;\r\n        // calculate sums of each level\r\n        this._levelSum = {};\r\n        this._levelNodesCount = {};\r\n        this.maxSum = 0;\r\n        var total = this.dataItem.values.value.sum;\r\n        $iter.each(this._sorted, function (strNode) {\r\n            var node = strNode[1];\r\n            _this.getNodeValue(node);\r\n        });\r\n        this.nodes.each(function (key, node) {\r\n            var level = node.level;\r\n            var value = Math.max(node.totalIncoming, node.totalOutgoing);\r\n            if (value / total < _this.minNodeSize) {\r\n                value = total * _this.minNodeSize;\r\n            }\r\n            if ($type.isNumber(_this._levelSum[level])) {\r\n                _this._levelSum[level] += value;\r\n            }\r\n            else {\r\n                _this._levelSum[level] = value;\r\n            }\r\n            if ($type.isNumber(_this._levelNodesCount[level])) {\r\n                _this._levelNodesCount[level]++;\r\n            }\r\n            else {\r\n                _this._levelNodesCount[level] = 1;\r\n            }\r\n        });\r\n        var availableHeight;\r\n        if (this.orientation == \"horizontal\") {\r\n            availableHeight = this.chartContainer.maxHeight - 1;\r\n        }\r\n        else {\r\n            availableHeight = this.chartContainer.maxWidth - 1;\r\n        }\r\n        var maxSumLevel;\r\n        var minHeight;\r\n        $object.each(this._levelSum, function (key, value) {\r\n            var realValue = value;\r\n            var levelNodeCount = _this._levelNodesCount[key];\r\n            var valueHeight = (availableHeight - (levelNodeCount - 1) * _this.nodePadding) / realValue;\r\n            if (minHeight > valueHeight || !$type.isNumber(minHeight)) {\r\n                minHeight = valueHeight;\r\n                _this.maxSum = realValue;\r\n                maxSumLevel = $type.toNumber(key);\r\n            }\r\n        });\r\n        this._maxSumLevel = maxSumLevel;\r\n        var maxSumLevelNodeCount = this._levelNodesCount[this._maxSumLevel];\r\n        var valueHeight = (availableHeight - (maxSumLevelNodeCount - 1) * this.nodePadding) / this.maxSum;\r\n        if (!$type.isNumber(this.valueHeight)) {\r\n            this.valueHeight = valueHeight;\r\n        }\r\n        else {\r\n            var finalHeight = void 0;\r\n            try {\r\n                finalHeight = this._heightAnimation.animationOptions[0].to;\r\n            }\r\n            catch (err) {\r\n            }\r\n            // without animations it will be non-smooth as maxValue jumps from one column to another\r\n            if (finalHeight != valueHeight) {\r\n                var duration = this.interpolationDuration;\r\n                try {\r\n                    duration = this.nodes.template.states.getKey(\"active\").transitionDuration;\r\n                }\r\n                catch (err) {\r\n                }\r\n                this._heightAnimation = new Animation(this, { property: \"valueHeight\", from: this.valueHeight, to: valueHeight }, duration, this.interpolationEasing).start();\r\n                this._disposers.push(this._heightAnimation);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Redraws the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    SankeyDiagram.prototype.validate = function () {\r\n        var _this = this;\r\n        _super.prototype.validate.call(this);\r\n        this.calculateValueHeight();\r\n        var container = this.nodesContainer;\r\n        var nextCoordinate = {};\r\n        var maxSumLevelNodeCount = this._levelNodesCount[this._maxSumLevel];\r\n        var total = this.dataItem.values.value.sum;\r\n        $iter.each(this._sorted, function (strNode) {\r\n            var node = strNode[1];\r\n            var level = node.level;\r\n            var levelCoordinate = 0;\r\n            var nodeCount = _this._levelNodesCount[level];\r\n            switch (_this.nodeAlign) {\r\n                case \"bottom\":\r\n                    levelCoordinate = (_this.maxSum - _this._levelSum[level]) * _this.valueHeight - (nodeCount - maxSumLevelNodeCount) * _this.nodePadding;\r\n                    break;\r\n                case \"middle\":\r\n                    levelCoordinate = (_this.maxSum - _this._levelSum[level]) * _this.valueHeight / 2 - (nodeCount - maxSumLevelNodeCount) * _this.nodePadding / 2;\r\n                    break;\r\n            }\r\n            node.parent = container;\r\n            var delta;\r\n            var x;\r\n            var y;\r\n            var value = Math.max(node.totalIncoming, node.totalOutgoing);\r\n            if (value / total < _this.minNodeSize) {\r\n                value = total * _this.minNodeSize;\r\n            }\r\n            if (_this.orientation == \"horizontal\") {\r\n                delta = (_this.innerWidth - node.pixelWidth) / _this._levelCount;\r\n                x = delta * node.level;\r\n                y = nextCoordinate[level] || levelCoordinate;\r\n                var h = value * _this.valueHeight;\r\n                node.height = h;\r\n                node.minX = x;\r\n                node.maxX = x;\r\n                nextCoordinate[level] = y + h + _this.nodePadding;\r\n            }\r\n            else {\r\n                delta = (_this.innerHeight - node.pixelHeight) / _this._levelCount;\r\n                x = nextCoordinate[level] || levelCoordinate;\r\n                y = delta * node.level;\r\n                var w = value * _this.valueHeight;\r\n                node.width = w;\r\n                node.minY = y;\r\n                node.maxY = y;\r\n                nextCoordinate[level] = x + w + _this.nodePadding;\r\n            }\r\n            node.x = x;\r\n            node.y = y;\r\n        });\r\n    };\r\n    /**\r\n     * Performs actual operations to reveal this element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param duration Fade in duration (ms)\r\n     * @return Fade in duration (ms)\r\n     */\r\n    SankeyDiagram.prototype.showReal = function (duration) {\r\n        var _this = this;\r\n        if (this.interpolationDuration > 0) {\r\n            var container_1 = this.nodesContainer;\r\n            var i_1 = 0;\r\n            $iter.each(this.links.iterator(), function (link) {\r\n                link.hide(0);\r\n            });\r\n            $iter.each(this._sorted, function (strNode) {\r\n                var node = strNode[1];\r\n                var property;\r\n                if (_this.orientation == \"horizontal\") {\r\n                    node.dx = -(container_1.pixelWidth - node.pixelWidth) / _this._levelCount;\r\n                    property = \"dx\";\r\n                }\r\n                else {\r\n                    node.dy = -(container_1.pixelHeight - node.pixelHeight) / _this._levelCount;\r\n                    property = \"dy\";\r\n                }\r\n                var delay = 0;\r\n                var duration = _this.interpolationDuration;\r\n                if (_this.sequencedInterpolation) {\r\n                    delay = _this.sequencedInterpolationDelay * i_1 + duration * i_1 / $iter.length(_this.nodes.iterator());\r\n                }\r\n                node.opacity = 0;\r\n                node.invalidateLinks();\r\n                node.animate([{ property: \"opacity\", from: 0, to: 1 }, { property: property, to: 0 }], _this.interpolationDuration, _this.interpolationEasing).delay(delay);\r\n                $iter.each(node.outgoingDataItems.iterator(), function (dataItem) {\r\n                    var animation = dataItem.link.show(_this.interpolationDuration);\r\n                    if (animation && !animation.isFinished()) {\r\n                        animation.delay(delay);\r\n                    }\r\n                });\r\n                $iter.each(node.incomingDataItems.iterator(), function (dataItem) {\r\n                    if (!dataItem.fromNode) {\r\n                        var animation = dataItem.link.show(_this.interpolationDuration);\r\n                        if (animation && !animation.isFinished()) {\r\n                            animation.delay(delay);\r\n                        }\r\n                    }\r\n                });\r\n                i_1++;\r\n            });\r\n        }\r\n        return _super.prototype.showReal.call(this);\r\n    };\r\n    /**\r\n     * Changes the sort type of the nodes.\r\n     *\r\n     * This will actually reshuffle nodes using nice animation.\r\n     */\r\n    SankeyDiagram.prototype.changeSorting = function () {\r\n        var _this = this;\r\n        this.sortNodes();\r\n        var nextCoordinate = {};\r\n        $iter.each(this._sorted, function (strNode) {\r\n            var node = strNode[1];\r\n            var level = node.level;\r\n            var levelCoordinate = (_this.maxSum - _this._levelSum[level]) * _this.valueHeight / 2;\r\n            var property;\r\n            var nodeHeight;\r\n            if (_this.orientation == \"horizontal\") {\r\n                property = \"y\";\r\n                nodeHeight = node.pixelHeight;\r\n            }\r\n            else {\r\n                property = \"x\";\r\n                nodeHeight = node.pixelWidth;\r\n            }\r\n            node.animate({ property: property, to: nextCoordinate[level] || levelCoordinate }, _this.interpolationDuration, _this.interpolationEasing);\r\n            nextCoordinate[level] = (nextCoordinate[level] || levelCoordinate) + nodeHeight + _this.nodePadding;\r\n            node.invalidateLinks();\r\n        });\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    SankeyDiagram.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Sankey diagram\");\r\n        }\r\n    };\r\n    /**\r\n     * Creates and returns a new data item.\r\n     *\r\n     * @return Data item\r\n     */\r\n    SankeyDiagram.prototype.createDataItem = function () {\r\n        return new SankeyDiagramDataItem();\r\n    };\r\n    Object.defineProperty(SankeyDiagram.prototype, \"nodeAlign\", {\r\n        /**\r\n         * @returns Returns nodeAlign value\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"nodeAlign\");\r\n        },\r\n        /**\r\n         * How to align nodes. In case layout is vertical, top means left and bottom means right\r\n         *\r\n         * @param value  Node sorting\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"nodeAlign\", value);\r\n            this.changeSorting();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SankeyDiagram.prototype, \"orientation\", {\r\n        /**\r\n         * @return Orientation\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"orientation\");\r\n        },\r\n        /**\r\n         * Orientation of the chart: \"horizontal\" or \"vertical\";\r\n         *\r\n         * @param value Orientation\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"orientation\", value, true);\r\n            var nameLabel = this.nodes.template.nameLabel;\r\n            if (value == \"vertical\") {\r\n                this.nodes.template.width = undefined;\r\n                nameLabel.label.horizontalCenter = \"middle\";\r\n                nameLabel.locationX = 0.5;\r\n            }\r\n            else {\r\n                this.nodes.template.height = undefined;\r\n                nameLabel.label.horizontalCenter = \"left\";\r\n                nameLabel.locationX = 1;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    SankeyDiagram.prototype.createNode = function () {\r\n        var node = new SankeyNode();\r\n        this._disposers.push(node);\r\n        return node;\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    SankeyDiagram.prototype.createLink = function () {\r\n        var link = new SankeyLink();\r\n        this._disposers.push(link);\r\n        return link;\r\n    };\r\n    Object.defineProperty(SankeyDiagram.prototype, \"valueHeight\", {\r\n        /**\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            return this._valueHeight;\r\n        },\r\n        /**\r\n         * @ignore\r\n         */\r\n        set: function (value) {\r\n            if (value != this._valueHeight) {\r\n                this._valueHeight = value;\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    SankeyDiagram.prototype.disposeData = function () {\r\n        _super.prototype.disposeData.call(this);\r\n        this._sorted = this.nodes.iterator();\r\n    };\r\n    return SankeyDiagram;\r\n}(FlowDiagram));\r\nexport { SankeyDiagram };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SankeyDiagram\"] = SankeyDiagram;\r\n//# sourceMappingURL=SankeyDiagram.js.map","/**\r\n * ChordNode module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { FlowDiagramNode } from \"./FlowDiagramNode\";\r\nimport { AxisLabelCircular } from \"../axes/AxisLabelCircular\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Slice } from \"../../core/elements/Slice\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a node in a Chord Diagram.\r\n *\r\n * A Chord node is a block with a value, which represents its size on the\r\n * diagram.\r\n *\r\n * Nodes are connected via [[ChordLink]] elements.\r\n *\r\n * @see {@link IChordNodeEvents} for a list of available events\r\n * @see {@link IChordNodeAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar ChordNode = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ChordNode, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ChordNode() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ChordNode\";\r\n        var label = _this.createChild(AxisLabelCircular);\r\n        label.location = 0.5;\r\n        label.radius = 5;\r\n        label.text = \"{name}\";\r\n        label.zIndex = 1;\r\n        label.shouldClone = false;\r\n        _this.label = label;\r\n        _this.layout = \"none\";\r\n        _this.events.on(\"positionchanged\", _this.updateRotation, _this, false);\r\n        _this.isMeasured = false;\r\n        _this.slice = _this.createChild(Slice);\r\n        _this.slice.isMeasured = false;\r\n        var hiddenState = _this.hiddenState;\r\n        hiddenState.properties.fill = new InterfaceColorSet().getFor(\"disabledBackground\");\r\n        hiddenState.properties.opacity = 0.5;\r\n        hiddenState.properties.visible = true;\r\n        _this.setStateOnChildren = false;\r\n        _this.slice.hiddenState.properties.visible = true;\r\n        _this.adapter.add(\"tooltipX\", function (tooltipX, target) {\r\n            return target.slice.ix * (target.slice.radius - (target.slice.radius - target.slice.pixelInnerRadius) / 2);\r\n        });\r\n        _this.adapter.add(\"tooltipY\", function (tooltipY, target) {\r\n            return target.slice.iy * (target.slice.radius - (target.slice.radius - target.slice.pixelInnerRadius) / 2);\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * Invalidates all links, attached to this node.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ChordNode.prototype.invalidateLinks = function () {\r\n        var _this = this;\r\n        _super.prototype.invalidateLinks.call(this);\r\n        var label = this.label;\r\n        var slice = this.slice;\r\n        var chart = this.chart;\r\n        if (chart && slice) {\r\n            var sum = this.total;\r\n            var arc_1 = slice.arc;\r\n            var sliceStartAngle_1 = slice.startAngle;\r\n            this.children.each(function (child) {\r\n                if (child instanceof Bullet) {\r\n                    var locationX = child.locationX;\r\n                    if (!$type.isNumber(locationX)) {\r\n                        locationX = 0.5;\r\n                    }\r\n                    var locationY = child.locationY;\r\n                    if (!$type.isNumber(locationY)) {\r\n                        locationY = 1;\r\n                    }\r\n                    var childAngle = sliceStartAngle_1 + arc_1 * locationX;\r\n                    var childRadius = locationY * slice.radius;\r\n                    child.x = childRadius * $math.cos(childAngle);\r\n                    child.y = childRadius * $math.sin(childAngle);\r\n                }\r\n            });\r\n            var labelAngle = sliceStartAngle_1 + arc_1 * label.location;\r\n            var startAngle = sliceStartAngle_1 + (1 - sum / this.adjustedTotal) * arc_1 * 0.5; // if value of a node is > then sum of the links, add to center link\r\n            if ($type.isNaN(startAngle)) {\r\n                startAngle = sliceStartAngle_1;\r\n            }\r\n            label.fixPosition(labelAngle, slice.radius);\r\n            this.nextAngle = startAngle;\r\n            if (this._outgoingSorted) {\r\n                $iter.each(this._outgoingSorted, function (dataItem) {\r\n                    var link = dataItem.link;\r\n                    link.parent = _this.chart.linksContainer;\r\n                    var value = dataItem.getWorkingValue(\"value\");\r\n                    if ($type.isNumber(value)) {\r\n                        if (chart.nonRibbon) {\r\n                            var percentWidth = link.percentWidth;\r\n                            if (!$type.isNumber(percentWidth)) {\r\n                                percentWidth = 5;\r\n                            }\r\n                            percentWidth = percentWidth / 100;\r\n                            link.startAngle = sliceStartAngle_1 + arc_1 / 2 - arc_1 / 2 * percentWidth;\r\n                            link.arc = arc_1 * percentWidth;\r\n                        }\r\n                        else {\r\n                            link.arc = value * chart.valueAngle;\r\n                            link.startAngle = _this.nextAngle;\r\n                            _this.nextAngle += link.arc;\r\n                        }\r\n                        if (!dataItem.toNode) {\r\n                            link.endAngle = link.startAngle;\r\n                        }\r\n                        link.radius = slice.pixelInnerRadius;\r\n                    }\r\n                    //link.validate();\r\n                });\r\n            }\r\n            if (this._incomingSorted) {\r\n                $iter.each(this._incomingSorted, function (dataItem) {\r\n                    var link = dataItem.link;\r\n                    link.radius = slice.pixelInnerRadius;\r\n                    if (chart.nonRibbon) {\r\n                        var percentWidth = link.percentWidth;\r\n                        if (!$type.isNumber(percentWidth)) {\r\n                            percentWidth = 5;\r\n                        }\r\n                        percentWidth = percentWidth / 100;\r\n                        link.endAngle = sliceStartAngle_1 + arc_1 / 2 - arc_1 / 2 * percentWidth;\r\n                        link.arc = arc_1 * percentWidth;\r\n                    }\r\n                    else {\r\n                        link.endAngle = _this.nextAngle;\r\n                        var value = dataItem.getWorkingValue(\"value\");\r\n                        if ($type.isNumber(value)) {\r\n                            link.arc = value * chart.valueAngle; // yes, this is needed\r\n                            _this.nextAngle += link.arc;\r\n                        }\r\n                    }\r\n                    if (!dataItem.fromNode) {\r\n                        link.startAngle = link.endAngle;\r\n                    }\r\n                    //link.validate();\r\n                });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     * updates slice start angle so that when we drag a node it would face the center\r\n     */\r\n    ChordNode.prototype.updateRotation = function () {\r\n        var slice = this.slice;\r\n        var mAngle = this.trueStartAngle + slice.arc / 2;\r\n        var radius = slice.radius;\r\n        var tx = radius * $math.cos(mAngle);\r\n        var ty = radius * $math.sin(mAngle);\r\n        var angle = $math.getAngle({ x: tx + this.pixelX, y: ty + this.pixelY });\r\n        slice.startAngle = this.trueStartAngle + (angle - mAngle);\r\n        this.dx = -this.pixelX;\r\n        this.dy = -this.pixelY;\r\n    };\r\n    /**\r\n     * Copies properties and labels from another [[ChordNode]].\r\n     *\r\n     * @param source  Source node\r\n     */\r\n    ChordNode.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.label.copyFrom(source.label);\r\n        this.slice.copyFrom(source.slice);\r\n    };\r\n    return ChordNode;\r\n}(FlowDiagramNode));\r\nexport { ChordNode };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ChordNode\"] = ChordNode;\r\n//# sourceMappingURL=ChordNode.js.map","/**\r\n * Functionality for drawing quadratic curves.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Line } from \"./Line\";\r\nimport { color } from \"../utils/Color\";\r\nimport * as $path from \"../rendering/Path\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $type from \"../utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Draws a waved line.\r\n *\r\n * @see {@link IQuadraticCurveEvents} for a list of available events\r\n * @see {@link IQuadraticCurveAdapters} for a list of available Adapters\r\n */\r\nvar QuadraticCurve = /** @class */ (function (_super) {\r\n    tslib_1.__extends(QuadraticCurve, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function QuadraticCurve() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"QuadraticCurve\";\r\n        _this.element = _this.paper.add(\"path\");\r\n        _this.pixelPerfect = false;\r\n        _this.fill = color();\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Draws the waved line.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    QuadraticCurve.prototype.draw = function () {\r\n        //super.draw();\r\n        if ($type.isNumber(this.x1 + this.x2 + this.y1 + this.y2 + this.cpx + this.cpy)) {\r\n            var p1 = { x: this.x1, y: this.y1 };\r\n            var p2 = { x: this.x2, y: this.y2 };\r\n            var cp = { x: this.cpx, y: this.cpy };\r\n            var d = $path.moveTo(p1) + $path.quadraticCurveTo(p2, cp);\r\n            this.path = d;\r\n        }\r\n    };\r\n    Object.defineProperty(QuadraticCurve.prototype, \"cpx\", {\r\n        /**\r\n         * @return X\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cpx\");\r\n        },\r\n        /**\r\n         * X coordinate of control point.\r\n         *\r\n         * @param value X\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"cpx\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(QuadraticCurve.prototype, \"cpy\", {\r\n        /**\r\n         * @return Y\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"cpy\");\r\n        },\r\n        /**\r\n         * Y coordinate of control point.\r\n         *\r\n         * @param value Y\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"cpy\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts relative position along the line (0-1) into pixel coordinates.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Coordinates\r\n     */\r\n    QuadraticCurve.prototype.positionToPoint = function (position) {\r\n        var p1 = { x: this.x1, y: this.y1 };\r\n        var cp = { x: this.cpx, y: this.cpy };\r\n        var p2 = { x: this.x2, y: this.y2 };\r\n        var point1 = $math.getPointOnQuadraticCurve(p1, p2, cp, position);\r\n        var point2 = $math.getPointOnQuadraticCurve(p1, p2, cp, position + 0.001);\r\n        return { x: point1.x, y: point1.y, angle: $math.getAngle(point1, point2) };\r\n    };\r\n    return QuadraticCurve;\r\n}(Line));\r\nexport { QuadraticCurve };\r\n//# sourceMappingURL=QuadraticCurve.js.map","/**\r\n * ChordLink module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\nimport { FlowDiagramLink } from \"./FlowDiagramLink\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { QuadraticCurve } from \"../../core/elements/QuadraticCurve\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Chord Diagram.\r\n *\r\n * @see {@link IChordLinkEvents} for a list of available events\r\n * @see {@link IChordLinkAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar ChordLink = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ChordLink, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ChordLink() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ChordLink\";\r\n        _this.middleLine = _this.createChild(QuadraticCurve);\r\n        _this.middleLine.shouldClone = false;\r\n        _this.middleLine.strokeOpacity = 0;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * (Re)validates (redraws) the link.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ChordLink.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        if (!this.isTemplate) {\r\n            var startAngle = this.startAngle;\r\n            var endAngle = this.endAngle;\r\n            var arc = this.arc;\r\n            var radius = this.radius;\r\n            var fromNode = this.dataItem.fromNode;\r\n            var toNode = this.dataItem.toNode;\r\n            var fromX = 0;\r\n            var fromY = 0;\r\n            if (fromNode) {\r\n                fromX = fromNode.pixelX + fromNode.dx;\r\n                fromY = fromNode.pixelY + fromNode.dy;\r\n            }\r\n            var toX = 0;\r\n            var toY = 0;\r\n            if (toNode) {\r\n                toX = toNode.pixelX + toNode.dx;\r\n                toY = toNode.pixelY + toNode.dy;\r\n            }\r\n            if (radius > 0) {\r\n                var x1 = radius * $math.cos(startAngle) + fromX;\r\n                var y1 = radius * $math.sin(startAngle) + fromY;\r\n                var x2 = radius * $math.cos(endAngle) + toX;\r\n                var y2 = radius * $math.sin(endAngle) + toY;\r\n                //let cpAngle = startAngle + arc + (endAngle - startAngle - arc) / 2;\r\n                //let arcWidth = $math.getDistance({x:x1, y:y1}, {x:x4, y:y4});\r\n                //let cpx = (arcWidth) * $math.cos(cpAngle);\r\n                //let cpy = (arcWidth) * $math.sin(cpAngle);\r\n                var cp = { x: 0, y: 0 };\r\n                var path = $path.moveTo({ x: x1, y: y1 });\r\n                path += $path.arcTo(startAngle, arc, radius);\r\n                path += $path.quadraticCurveTo({ x: x2, y: y2 }, cp);\r\n                path += $path.arcTo(endAngle, arc, radius);\r\n                path += $path.quadraticCurveTo({ x: x1, y: y1 }, cp);\r\n                if (arc > 0) {\r\n                    this.link.path = path;\r\n                }\r\n                else {\r\n                    this.link.path = \"\";\r\n                }\r\n                if (this.maskBullets) {\r\n                    this.bulletsMask.path = path;\r\n                    this.bulletsContainer.mask = this.bulletsMask;\r\n                }\r\n                var mAngle1 = startAngle + arc / 2;\r\n                var mAngle2 = endAngle + arc / 2;\r\n                var middleLine = this.middleLine;\r\n                middleLine.x1 = radius * $math.cos(mAngle1) + fromX;\r\n                middleLine.y1 = radius * $math.sin(mAngle1) + fromY;\r\n                middleLine.x2 = radius * $math.cos(mAngle2) + toX;\r\n                middleLine.y2 = radius * $math.sin(mAngle2) + toY;\r\n                middleLine.cpx = 0;\r\n                middleLine.cpy = 0;\r\n                middleLine.stroke = this.fill;\r\n                this.positionBullets();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ChordLink.prototype, \"radius\", {\r\n        /**\r\n         * @return End Y\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * [radius description]\r\n         *\r\n         * @todo Description\r\n         * @param value End Y\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"radius\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ChordLink.prototype, \"arc\", {\r\n        /**\r\n         * @return [description]\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"arc\");\r\n        },\r\n        /**\r\n         * [arc description]\r\n         *\r\n         * @todo Description\r\n         * @param value [description]\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"arc\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ChordLink;\r\n}(FlowDiagramLink));\r\nexport { ChordLink };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ChordLink\"] = ChordLink;\r\n//# sourceMappingURL=ChordLink.js.map","/**\r\n * Chord diagram module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { FlowDiagram, FlowDiagramDataItem } from \"./FlowDiagram\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { ChordNode } from \"../elements/ChordNode\";\r\nimport { ChordLink } from \"../elements/ChordLink\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo rearange notes after dragged\r\n/**\r\n * Defines a [[DataItem]] for [[ChordDiagram]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar ChordDiagramDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ChordDiagramDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ChordDiagramDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ChordDiagramDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return ChordDiagramDataItem;\r\n}(FlowDiagramDataItem));\r\nexport { ChordDiagramDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a Chord Diagram chart.\r\n *\r\n * @see {@link IChordDiagramEvents} for a list of available Events\r\n * @see {@link IChordDiagramAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/chord-diagram/} for documentation\r\n * @important\r\n */\r\nvar ChordDiagram = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ChordDiagram, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ChordDiagram() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * [valueAngle description]\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description\r\n         */\r\n        _this.valueAngle = 0;\r\n        _this.className = \"ChordDiagram\";\r\n        _this.startAngle = -90;\r\n        _this.endAngle = 270;\r\n        _this.radius = percent(80);\r\n        _this.innerRadius = -15;\r\n        _this.nodePadding = 5;\r\n        var chordContainer = _this.chartContainer.createChild(Container);\r\n        chordContainer.align = \"center\";\r\n        chordContainer.valign = \"middle\";\r\n        chordContainer.shouldClone = false;\r\n        chordContainer.layout = \"absolute\";\r\n        _this.chordContainer = chordContainer;\r\n        _this.nodesContainer.parent = chordContainer;\r\n        _this.linksContainer.parent = chordContainer;\r\n        _this.chartContainer.events.on(\"maxsizechanged\", _this.invalidate, _this, false);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Redraws the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ChordDiagram.prototype.validate = function () {\r\n        var _this = this;\r\n        var chartContainer = this.chartContainer;\r\n        var endAngle = this.endAngle;\r\n        var startAngle = this.startAngle + this.nodePadding / 2;\r\n        var rect = $math.getArcRect(this.startAngle, this.endAngle, 1);\r\n        var innerRect = { x: 0, y: 0, width: 0, height: 0 };\r\n        rect = $math.getCommonRectangle([rect, innerRect]);\r\n        var maxRadius = Math.min(chartContainer.innerWidth / rect.width, chartContainer.innerHeight / rect.height);\r\n        if (!$type.isNumber(maxRadius)) {\r\n            maxRadius = 0;\r\n        }\r\n        var radius = $utils.relativeRadiusToValue(this.radius, maxRadius);\r\n        var pixelInnerRadius = $utils.relativeRadiusToValue(this.innerRadius, radius, true);\r\n        var total = this.dataItem.values.value.sum;\r\n        var count = 0;\r\n        var newTotal = 0;\r\n        $iter.each(this._sorted, function (strNode) {\r\n            var node = strNode[1];\r\n            _this.getNodeValue(node);\r\n            count++;\r\n            var value = node.total;\r\n            if (node.total / total < _this.minNodeSize) {\r\n                value = total * _this.minNodeSize;\r\n            }\r\n            newTotal += value;\r\n        });\r\n        this.valueAngle = (endAngle - this.startAngle - this.nodePadding * count) / newTotal;\r\n        $iter.each(this._sorted, function (strNode) {\r\n            var node = strNode[1];\r\n            var slice = node.slice;\r\n            slice.radius = radius;\r\n            slice.innerRadius = pixelInnerRadius;\r\n            var value = node.total;\r\n            if (node.total / total < _this.minNodeSize) {\r\n                value = total * _this.minNodeSize;\r\n            }\r\n            node.adjustedTotal = value;\r\n            var arc;\r\n            if (_this.nonRibbon) {\r\n                arc = (endAngle - _this.startAngle) / count - _this.nodePadding;\r\n            }\r\n            else {\r\n                arc = _this.valueAngle * value;\r\n            }\r\n            slice.arc = arc;\r\n            slice.startAngle = startAngle;\r\n            node.trueStartAngle = startAngle;\r\n            node.parent = _this.nodesContainer;\r\n            node.validate(); // otherwise flickers - nodes are already created, but not yet positioned etc.\r\n            startAngle += arc + _this.nodePadding;\r\n        });\r\n        this.chordContainer.definedBBox = { x: radius * rect.x, y: radius * rect.y, width: radius * rect.width, height: radius * rect.height };\r\n        this.chordContainer.invalidateLayout();\r\n        _super.prototype.validate.call(this);\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    ChordDiagram.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Chord diagram\");\r\n        }\r\n    };\r\n    /**\r\n     * Creates and returns a new data item.\r\n     *\r\n     * @return Data item\r\n     */\r\n    ChordDiagram.prototype.createDataItem = function () {\r\n        return new ChordDiagramDataItem();\r\n    };\r\n    Object.defineProperty(ChordDiagram.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Start angle (degrees)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startAngle\");\r\n        },\r\n        /**\r\n         * Starting angle of the Radar face. (degrees)\r\n         *\r\n         * Normally, a circular radar face begins (the radial axis is drawn) at the\r\n         * top center. (at -90 degrees)\r\n         *\r\n         * You can use `startAngle` to change this setting.\r\n         *\r\n         * E.g. setting this to 0 will make the radial axis start horizontally to\r\n         * the right, as opposed to vertical.\r\n         *\r\n         * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n         * needs to be 360.\r\n         *\r\n         * However, it's **not** necessary to do so. You can set those to lesser\r\n         * numbers, to create semi-circles.\r\n         *\r\n         * E.g. `startAngle = -90` with `endAngle = 0` will create a radar face that\r\n         * looks like a quarter of a circle.\r\n         *\r\n         * @default -90\r\n         * @param value  Start angle (degrees)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ChordDiagram.prototype, \"endAngle\", {\r\n        /**\r\n         * @return End angle (degrees)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endAngle\");\r\n        },\r\n        /**\r\n         * Starting angle of the Radar face. (degrees)\r\n         *\r\n         * Normally, a circular radar face ends (the radial axis is drawn) exactly\r\n         * where it has started, forming a full 360 circle. (at 270 degrees)\r\n         *\r\n         * You can use `endAngle` to end the circle somewhere else.\r\n         *\r\n         * E.g. setting this to 180 will make the radar face end at horizontal line\r\n         * to the left off the center.\r\n         *\r\n         * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n         * needs to be 360.\r\n         *\r\n         * However, it's **not** necessary to do so. You can set those to lesser\r\n         * numbers, to create semi-circles.\r\n         *\r\n         * E.g. `startAngle = -90` with `endAngle = 0` will create a radar face that\r\n         * looks like a quarter of a circle.\r\n         *\r\n         * @default -90\r\n         * @param value  End angle (degrees)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ChordDiagram.prototype, \"radius\", {\r\n        /**\r\n         * @return Outer radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius of the Radar face.\r\n         *\r\n         * This can either be in absolute pixel value, or relative [[Percent]].\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ChordDiagram.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Inner radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius of the Chord nodes.\r\n         *\r\n         * This can either be in absolute pixel value, or relative [[Percent]].\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ChordDiagram.prototype, \"nonRibbon\", {\r\n        /**\r\n         * @return Non-ribbon\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"nonRibbon\");\r\n        },\r\n        /**\r\n         *\r\n         * If you set this to true, all the lines will be of the same width. This is done by making middleLine of a ChordLink visible.\r\n         *\r\n         * @param value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"nonRibbon\", value, true);\r\n            this.links.template.middleLine.strokeOpacity = 1;\r\n            this.links.template.link.fillOpacity = 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    ChordDiagram.prototype.createNode = function () {\r\n        var node = new ChordNode();\r\n        this._disposers.push(node);\r\n        return node;\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    ChordDiagram.prototype.createLink = function () {\r\n        var link = new ChordLink();\r\n        this._disposers.push(link);\r\n        return link;\r\n    };\r\n    return ChordDiagram;\r\n}(FlowDiagram));\r\nexport { ChordDiagram };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ChordDiagram\"] = ChordDiagram;\r\n//# sourceMappingURL=ChordDiagram.js.map","/**\r\n * Module that defines everything related to building Columns.\r\n * It is a container which has column element which is a RoundedRectangle.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { RoundedRectangle } from \"../../core/elements/RoundedRectangle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates Columns.\r\n *\r\n * @see {@link IColumnEvents} for a list of available events\r\n * @see {@link IColumnAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar Column = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Column, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Column() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"Column\";\r\n        _this.width = percent(80);\r\n        _this.height = percent(80);\r\n        //this.isMeasured = true; // for correct position of the tooltip\r\n        _this.events.disableType(\"transformed\"); // not to bug parent\r\n        _this.applyOnClones = true;\r\n        _this.strokeOpacity = 1;\r\n        _this.layout = \"none\";\r\n        _this.createAssets();\r\n        // otherwise users will have to set layout themselves if they'll want to align, scale etc children\r\n        _this.events.on(\"childadded\", _this.handleKidAdded, _this, false);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Column.prototype.handleKidAdded = function () {\r\n        if (this.layout == \"none\") {\r\n            this.layout = \"absolute\";\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    Column.prototype.createAssets = function () {\r\n        this.column = this.createChild(RoundedRectangle);\r\n        this.column.shouldClone = false;\r\n        this.column.isMeasured = false;\r\n        this.column.cornerRadius(0, 0, 0, 0);\r\n        this._disposers.push(this.column);\r\n    };\r\n    /**\r\n     * @ignore Exclude from docs\r\n     */\r\n    Column.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        var column = this.column;\r\n        if (column) {\r\n            column.width = $math.min(this.pixelWidth, this.maxWidth);\r\n            column.height = $math.min(this.pixelHeight, this.maxHeight);\r\n            if (column.invalid) {\r\n                column.validate(); // important!\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[Column]].\r\n     *\r\n     * @param source Source Column\r\n     */\r\n    Column.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.column) {\r\n            this.column.copyFrom(source.column);\r\n        }\r\n    };\r\n    Object.defineProperty(Column.prototype, \"bbox\", {\r\n        /**\r\n         * Returns bounding box (square) for this element.\r\n         *\r\n         * @ignore Exclude from docs\r\n         */\r\n        get: function () {\r\n            if (this.definedBBox) {\r\n                return this.definedBBox;\r\n            }\r\n            if (this.column) {\r\n                return { x: 0, y: 0, width: this.column.measuredWidth, height: this.column.measuredHeight };\r\n            }\r\n            else {\r\n                return { x: 0, y: 0, width: $math.min(this.pixelWidth, this.maxWidth), height: $math.min(this.pixelHeight, this.maxHeight) };\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Column;\r\n}(Container));\r\nexport { Column };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Column\"] = Column;\r\n//# sourceMappingURL=Column.js.map","/**\r\n * Column series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { XYSeries, XYSeriesDataItem } from \"./XYSeries\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Dictionary } from \"../../core/utils/Dictionary\";\r\nimport { ValueAxis } from \"../axes/ValueAxis\";\r\nimport { CategoryAxis } from \"../axes/CategoryAxis\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Column } from \"../elements/Column\";\r\nimport { RoundedRectangle } from \"../../core/elements/RoundedRectangle\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { Disposer } from \"../../core/utils/Disposer\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[ColumnSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar ColumnSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ColumnSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ColumnSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ColumnSeriesDataItem\";\r\n        _this.locations[\"dateX\"] = 0.5;\r\n        _this.locations[\"dateY\"] = 0.5;\r\n        _this.locations[\"categoryX\"] = 0.5;\r\n        _this.locations[\"categoryY\"] = 0.5;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ColumnSeriesDataItem.prototype, \"column\", {\r\n        /**\r\n         * @return Column\r\n         */\r\n        get: function () {\r\n            return this._column;\r\n        },\r\n        /**\r\n         * A column used to draw a column for this data item.\r\n         *\r\n         * @param column\r\n         */\r\n        set: function (column) {\r\n            this.setColumn(column);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ColumnSeriesDataItem.prototype.setColumn = function (column) {\r\n        var _this = this;\r\n        if (this._column && column != this._column) {\r\n            $array.remove(this.sprites, this._column);\r\n        }\r\n        this._column = column;\r\n        if (column) {\r\n            var prevDataItem = column.dataItem;\r\n            if (prevDataItem && prevDataItem != this) {\r\n                prevDataItem.column = undefined;\r\n            }\r\n            this.addSprite(column);\r\n            this._disposers.push(new Disposer(function () {\r\n                // TODO investigate why component is undefined\r\n                // https://codepen.io/team/amcharts/pen/dac4be245d658233a6d7e5597df2208b?editors=0010\r\n                if (_this.component) {\r\n                    _this.component.columns.removeValue(column);\r\n                }\r\n            }));\r\n        }\r\n    };\r\n    Object.defineProperty(ColumnSeriesDataItem.prototype, \"rangesColumns\", {\r\n        /**\r\n         * A dictionary storing axes ranges columns by axis uid\r\n         */\r\n        get: function () {\r\n            if (!this._rangesColumns) {\r\n                this._rangesColumns = new Dictionary();\r\n            }\r\n            return this._rangesColumns;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ColumnSeriesDataItem;\r\n}(XYSeriesDataItem));\r\nexport { ColumnSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a column graph.\r\n *\r\n * @see {@link IColumnSeriesEvents} for a list of available Events\r\n * @see {@link IColumnSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar ColumnSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ColumnSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ColumnSeries() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Start location within cell for columns.\r\n         */\r\n        _this._startLocation = 0;\r\n        /**\r\n         * End location within cell for columns.\r\n         */\r\n        _this._endLocation = 1;\r\n        _this.className = \"ColumnSeries\";\r\n        _this.width = percent(100);\r\n        _this.height = percent(100);\r\n        _this.strokeOpacity = 0;\r\n        _this.fillOpacity = 1;\r\n        _this.clustered = true;\r\n        var columnsContainer = _this.mainContainer.createChild(Container);\r\n        columnsContainer.shouldClone = false;\r\n        columnsContainer.isMeasured = false;\r\n        columnsContainer.layout = \"none\";\r\n        _this._columnsContainer = columnsContainer;\r\n        _this.columns.template.pixelPerfect = false;\r\n        _this.tooltipColorSource = _this.columns.template;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ColumnSeries.prototype, \"columnsContainer\", {\r\n        /**\r\n         * A container that columns are created in.\r\n         *\r\n         * @ignore Exclude from docs\r\n         */\r\n        get: function () {\r\n            return this._columnsContainer;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    ColumnSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Column Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    ColumnSeries.prototype.createDataItem = function () {\r\n        return new ColumnSeriesDataItem();\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ColumnSeries.prototype.validate = function () {\r\n        var _this = this;\r\n        //@todo Check if we can do better than use `instanceof`\r\n        // find start/end locations based on clustered/stacked settings\r\n        // go through chart series instead of base axis series, because axis series doesn't maintain order\r\n        if (this.chart && this.xAxis && this.yAxis) {\r\n            var baseAxisSeries = this.chart.series;\r\n            var clusterCount_1 = 0;\r\n            var index_1 = 0;\r\n            $iter.each(baseAxisSeries.iterator(), function (series) {\r\n                if (series instanceof ColumnSeries) {\r\n                    if (_this.baseAxis == series.baseAxis) {\r\n                        if ((!series.stacked && series.clustered) || clusterCount_1 === 0) {\r\n                            clusterCount_1++;\r\n                        }\r\n                        if (series == _this) {\r\n                            index_1 = clusterCount_1 - 1;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            var renderer = this.baseAxis.renderer;\r\n            var cellStartLocation = renderer.cellStartLocation;\r\n            var cellEndLocation = renderer.cellEndLocation;\r\n            this._startLocation = cellStartLocation + (index_1 / clusterCount_1) * (cellEndLocation - cellStartLocation);\r\n            this._endLocation = cellStartLocation + (index_1 + 1) / clusterCount_1 * (cellEndLocation - cellStartLocation);\r\n        }\r\n        _super.prototype.validate.call(this);\r\n        for (var i = 0; i < this.startIndex; i++) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            this.disableUnusedColumns(dataItem);\r\n        }\r\n        for (var i = this.dataItems.length - 1; i > this.endIndex; i--) {\r\n            var dataItem = this.dataItems.getIndex(i);\r\n            this.disableUnusedColumns(dataItem);\r\n        }\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    ColumnSeries.prototype.validateDataElement = function (dataItem) {\r\n        // important oder here, first real, then super. we need this to know size\r\n        if (this.chart && this.xAxis && this.yAxis) {\r\n            this.validateDataElementReal(dataItem);\r\n            _super.prototype.validateDataElement.call(this, dataItem);\r\n        }\r\n    };\r\n    /**\r\n     * Returns relative start location for the data item.\r\n     *\r\n     * @param dataItem  Data item\r\n     * @return Location (0-1)\r\n     */\r\n    ColumnSeries.prototype.getStartLocation = function (dataItem) {\r\n        var startLocation = this._startLocation;\r\n        if (this.baseAxis == this.xAxis) {\r\n            startLocation += dataItem.locations[this.xOpenField] - 0.5;\r\n        }\r\n        else {\r\n            startLocation += dataItem.locations[this.yOpenField] - 0.5;\r\n        }\r\n        return startLocation;\r\n    };\r\n    /**\r\n     * [handleDataItemWorkingValueChange description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    /*\r\n   public handleDataItemWorkingValueChange(dataItem?: this[\"_dataItem\"], name?: string): void {\r\n       if (this.simplifiedProcessing) {\r\n           this.validateDataElement(dataItem);\r\n       }\r\n       else {\r\n           super.handleDataItemWorkingValueChange(dataItem, name);\r\n       }\r\n   }*/\r\n    /**\r\n     * Returns relative end location for the data item.\r\n     *\r\n     * @param dataItem  Data item\r\n     * @return Location (0-1)\r\n     */\r\n    ColumnSeries.prototype.getEndLocation = function (dataItem) {\r\n        var endLocation = this._endLocation;\r\n        if (this.baseAxis == this.xAxis) {\r\n            endLocation += dataItem.locations[this.xField] - 0.5;\r\n        }\r\n        else {\r\n            endLocation += dataItem.locations[this.yField] - 0.5;\r\n        }\r\n        return endLocation;\r\n    };\r\n    /**\r\n     * Validates data item's elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    ColumnSeries.prototype.validateDataElementReal = function (dataItem) {\r\n        var _this = this;\r\n        //\tif (dataItem.hasValue([this.xField, this.yField])) { // todo: this doesn't work with categories, think of a better way\r\n        var l;\r\n        var r;\r\n        var t;\r\n        var b;\r\n        var startLocation = this.getStartLocation(dataItem);\r\n        var endLocation = this.getEndLocation(dataItem);\r\n        var xField = this.xField;\r\n        var xOpenField = this.xOpenField;\r\n        var yField = this.yField;\r\n        var yOpenField = this.yOpenField;\r\n        var template = this.columns.template;\r\n        var percentWidth = template.percentWidth;\r\n        var percentHeight = template.percentHeight;\r\n        var pixelWidth = template.pixelWidth;\r\n        var pixelHeight = template.pixelHeight;\r\n        var maxWidth = template.maxWidth;\r\n        var maxHeight = template.maxHeight;\r\n        var paddingLeft = template.pixelPaddingLeft;\r\n        var paddingRight = template.pixelPaddingRight;\r\n        var paddingTop = template.pixelPaddingTop;\r\n        var paddingBottom = template.pixelPaddingBottom;\r\n        var outOfBounds = false;\r\n        // two category axes\r\n        if ((this.xAxis instanceof CategoryAxis) && (this.yAxis instanceof CategoryAxis)) {\r\n            if (!dataItem.hasValue(this._xValueFields) || !dataItem.hasValue(this._yValueFields)) {\r\n                return;\r\n            }\r\n            startLocation = 0;\r\n            endLocation = 1;\r\n            if (!$type.isNaN(percentWidth)) {\r\n                var offset = $math.round((endLocation - startLocation) * (1 - percentWidth / 100) / 2, 5);\r\n                startLocation += offset;\r\n                endLocation -= offset;\r\n            }\r\n            l = this.xAxis.getX(dataItem, xOpenField, startLocation);\r\n            r = this.xAxis.getX(dataItem, xField, endLocation);\r\n            // in case width is set in pixels\r\n            if ($type.isNaN(percentWidth)) {\r\n                var offset = ((r - l) - pixelWidth) / 2;\r\n                l += offset;\r\n                r -= offset;\r\n            }\r\n            // in case max width is set in pixels\r\n            if (!$type.isNaN(maxWidth) && maxWidth < Math.abs(r - l)) {\r\n                var offset = ((r - l) - maxWidth) / 2;\r\n                l += offset;\r\n                r -= offset;\r\n            }\r\n            startLocation = 0;\r\n            endLocation = 1;\r\n            if (!$type.isNaN(percentHeight)) {\r\n                var offset = $math.round((1 - percentHeight / 100) / 2, 5);\r\n                startLocation += offset;\r\n                endLocation -= offset;\r\n            }\r\n            t = this.yAxis.getY(dataItem, yOpenField, startLocation);\r\n            b = this.yAxis.getY(dataItem, yField, endLocation);\r\n            // in case width is set in pixels\r\n            if ($type.isNaN(percentHeight)) {\r\n                var offset = ((b - t) - pixelHeight) / 2;\r\n                b += offset;\r\n                t -= offset;\r\n            }\r\n            // in case max width is set in pixels\r\n            if (!$type.isNaN(maxHeight) && maxHeight < Math.abs(b - t)) {\r\n                var offset = ((b - t) - maxHeight) / 2;\r\n                b += offset;\r\n                t -= offset;\r\n            }\r\n            r = this.fixHorizontalCoordinate(r);\r\n            l = this.fixHorizontalCoordinate(l);\r\n            t = this.fixVerticalCoordinate(t);\r\n            b = this.fixVerticalCoordinate(b);\r\n        }\r\n        else if (this.baseAxis == this.xAxis) {\r\n            if (!dataItem.hasValue(this._yValueFields)) {\r\n                return;\r\n            }\r\n            // in case width is set in percent\r\n            if (!$type.isNaN(percentWidth)) {\r\n                var offset = $math.round((endLocation - startLocation) * (1 - percentWidth / 100) / 2, 5);\r\n                startLocation += offset;\r\n                endLocation -= offset;\r\n            }\r\n            l = this.xAxis.getX(dataItem, xOpenField, startLocation);\r\n            r = this.xAxis.getX(dataItem, xField, endLocation);\r\n            // in case width is set in pixels\r\n            if ($type.isNaN(percentWidth)) {\r\n                var offset = ((r - l) - pixelWidth) / 2;\r\n                l += offset;\r\n                r -= offset;\r\n            }\r\n            // in case width is set in pixels\r\n            if (!$type.isNaN(maxWidth) && maxWidth < Math.abs(r - l)) {\r\n                var offset = ((r - l) - maxWidth) / 2;\r\n                l += offset;\r\n                r -= offset;\r\n            }\r\n            var bottomLocation = dataItem.locations[yOpenField];\r\n            var topLocation = dataItem.locations[yField];\r\n            // otherwise gantt chart will start items in the middle of a cell\r\n            if (this.yAxis instanceof ValueAxis) {\r\n                if (this.dataFields[this.yField] != this.dataFields[this.yOpenField]) {\r\n                    bottomLocation = 0;\r\n                    topLocation = 0;\r\n                }\r\n            }\r\n            b = this.yAxis.getY(dataItem, yOpenField, bottomLocation);\r\n            t = this.yAxis.getY(dataItem, yField, topLocation);\r\n            // used to save location for bullets, but it's not a good approach\r\n            // dataItem.locations[xField] = startLocation + (endLocation - startLocation) / 2;\r\n            var axisLenght = Math.ceil(this.yAxis.axisLength);\r\n            if ((t < 0 && b < 0) || (t > axisLenght && b > axisLenght)) {\r\n                outOfBounds = true;\r\n            }\r\n            t = this.fixVerticalCoordinate(t);\r\n            b = this.fixVerticalCoordinate(b);\r\n            if (Math.abs(r - l) - paddingLeft - paddingRight == 0) {\r\n                outOfBounds = true;\r\n            }\r\n        }\r\n        // horizontal bars\r\n        else {\r\n            if (!dataItem.hasValue(this._xValueFields)) {\r\n                return;\r\n            }\r\n            if (!$type.isNaN(percentHeight)) {\r\n                var offset = $math.round((endLocation - startLocation) * (1 - percentHeight / 100) / 2, 5);\r\n                startLocation += offset;\r\n                endLocation -= offset;\r\n            }\r\n            t = this.yAxis.getY(dataItem, yOpenField, startLocation);\r\n            b = this.yAxis.getY(dataItem, yField, endLocation);\r\n            // in case height is set in pixels\r\n            if ($type.isNaN(percentHeight)) {\r\n                var offset = ((b - t) - pixelHeight) / 2;\r\n                b -= offset;\r\n                t += offset;\r\n            }\r\n            // in case height is set in pixels\r\n            if (!$type.isNaN(maxHeight) && maxHeight < Math.abs(b - t)) {\r\n                var offset = ((b - t) - maxHeight) / 2;\r\n                b -= offset;\r\n                t += offset;\r\n            }\r\n            var rightLocation = dataItem.locations[xField];\r\n            var leftLocation = dataItem.locations[xOpenField];\r\n            // otherwise gantt chart will start items in the middle of a cell\r\n            if (this.xAxis instanceof ValueAxis) {\r\n                if (this.dataFields[this.xField] != this.dataFields[this.xOpenField]) {\r\n                    rightLocation = 0;\r\n                    leftLocation = 0;\r\n                }\r\n            }\r\n            r = this.xAxis.getX(dataItem, xField, rightLocation);\r\n            l = this.xAxis.getX(dataItem, xOpenField, leftLocation);\r\n            // used to save location for bullets, but it's not a good approach\r\n            // dataItem.locations[yField] = startLocation + (endLocation - startLocation) / 2;\r\n            var axisLenght = Math.ceil(this.xAxis.axisLength);\r\n            if ((r < 0 && l < 0) || (r > axisLenght && l > axisLenght)) {\r\n                outOfBounds = true;\r\n            }\r\n            r = this.fixHorizontalCoordinate(r);\r\n            l = this.fixHorizontalCoordinate(l);\r\n            if (Math.abs(t - b) - paddingTop - paddingBottom == 0) {\r\n                outOfBounds = true;\r\n            }\r\n        }\r\n        var w = Math.abs(r - l);\r\n        var h = Math.abs(b - t);\r\n        var x = Math.min(l, r);\r\n        var y = Math.min(t, b);\r\n        if (!outOfBounds) {\r\n            var column_1;\r\n            if (!dataItem.column) {\r\n                column_1 = this.columns.create();\r\n                //$object.forceCopyProperties(this.columns.template, column, visualProperties);\r\n                $object.copyProperties(this, column_1, visualProperties); // need this because 3d columns are not in the same container\r\n                $object.copyProperties(this.columns.template, column_1, visualProperties); // second time, no force, so that columns.template would override series properties\r\n                dataItem.addSprite(column_1);\r\n                dataItem.column = column_1;\r\n                column_1.paper = this.paper; // sometimes pattern is not drawn if is set with adapter without this.\r\n                // accessibility\r\n                if (this.itemsFocusable()) {\r\n                    this.role = \"menu\";\r\n                    column_1.role = \"menuitem\";\r\n                    column_1.focusable = true;\r\n                }\r\n                else {\r\n                    this.role = \"list\";\r\n                    column_1.role = \"listitem\";\r\n                    column_1.focusable = false;\r\n                }\r\n                if (column_1.focusable) {\r\n                    column_1.events.on(\"focus\", function (ev) {\r\n                        column_1.readerTitle = _this.populateString(_this.itemReaderText, dataItem);\r\n                    }, undefined, false);\r\n                    column_1.events.on(\"blur\", function (ev) {\r\n                        column_1.readerTitle = \"\";\r\n                    }, undefined, false);\r\n                }\r\n                if (column_1.hoverable) {\r\n                    column_1.events.on(\"over\", function (ev) {\r\n                        column_1.readerTitle = _this.populateString(_this.itemReaderText, dataItem);\r\n                    }, undefined, false);\r\n                    column_1.events.on(\"out\", function (ev) {\r\n                        column_1.readerTitle = \"\";\r\n                    }, undefined, false);\r\n                }\r\n            }\r\n            else {\r\n                column_1 = dataItem.column;\r\n            }\r\n            column_1.width = w;\r\n            column_1.height = h;\r\n            column_1.x = x;\r\n            column_1.y = y;\r\n            column_1.realX = l;\r\n            column_1.realY = t;\r\n            column_1.realWidth = r - l;\r\n            column_1.realHeight = b - t;\r\n            column_1.parent = this.columnsContainer;\r\n            column_1.virtualParent = this;\r\n            this.setColumnStates(column_1);\r\n            if (column_1.invalid) {\r\n                column_1.validate(); // validate as if it was used previously, it will flicker with previous dimensions\r\n            }\r\n            column_1.__disabled = false;\r\n            //column.returnAfterTemp();\r\n            $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n                var rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\r\n                if (!rangeColumn) {\r\n                    rangeColumn = _this.columns.create();\r\n                    //$object.forceCopyProperties(this.columns.template, rangeColumn, visualProperties);\r\n                    $object.copyProperties(axisRange.contents, rangeColumn, visualProperties); // need this because 3d columns are not in the same container\r\n                    dataItem.addSprite(rangeColumn);\r\n                    dataItem.rangesColumns.setKey(axisRange.uid, rangeColumn);\r\n                    rangeColumn.paper = _this.paper; // sometimes pattern is not drawn if is set with adapter without this.\t\t\t\t\t\r\n                }\r\n                rangeColumn.parent = axisRange.contents;\r\n                rangeColumn.width = w;\r\n                rangeColumn.height = h;\r\n                rangeColumn.x = x;\r\n                rangeColumn.y = y;\r\n                _this.setColumnStates(rangeColumn);\r\n                if (rangeColumn.invalid) {\r\n                    rangeColumn.validate(); // validate as if it was used previously, it will flicker with previous dimensions\r\n                }\r\n                rangeColumn.__disabled = false;\r\n                //rangeColumn.returnAfterTemp();\r\n            });\r\n        }\r\n        else {\r\n            this.disableUnusedColumns(dataItem);\r\n        }\r\n        dataItem.itemWidth = w;\r\n        dataItem.itemHeight = h;\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    ColumnSeries.prototype.disableUnusedColumns = function (dataItem) {\r\n        if (dataItem) {\r\n            if (dataItem.column) {\r\n                // otherwise might flicker when enabling\r\n                dataItem.column.width = 0;\r\n                dataItem.column.height = 0;\r\n                dataItem.column.__disabled = true;\r\n            }\r\n            $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n                var rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\r\n                if (rangeColumn) {\r\n                    // otherwise might flicker when enabling\r\n                    rangeColumn.width = 0;\r\n                    rangeColumn.height = 0;\r\n                    rangeColumn.__disabled = true;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Apply different state/coloring to columns based on the change value.\r\n     *\r\n     * @param sprite  Sprite to apply state to\r\n     * @todo Do not apply accessibility to wicks of the candlesticks\r\n     */\r\n    ColumnSeries.prototype.setColumnStates = function (sprite) {\r\n        if (this._dropFromOpenState || this._dropFromPreviousState || this._riseFromOpenState || this._riseFromPreviousState) {\r\n            var dataItem = sprite.dataItem;\r\n            if (this.xAxis instanceof ValueAxis || this.yAxis instanceof ValueAxis) {\r\n                var open_1;\r\n                var value = void 0;\r\n                var change = void 0;\r\n                if (this.baseAxis == this.yAxis) {\r\n                    if (this.xOpenField && this.xField && this.xAxis instanceof ValueAxis) {\r\n                        open_1 = dataItem.getValue(this.xOpenField);\r\n                        value = dataItem.getValue(this.xField);\r\n                        change = dataItem.getValue(this.xAxis.axisFieldName + \"X\", \"previousChange\");\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.yOpenField && this.yField && this.yAxis instanceof ValueAxis) {\r\n                        open_1 = dataItem.getValue(this.yOpenField);\r\n                        value = dataItem.getValue(this.yField);\r\n                        change = dataItem.getValue(this.yAxis.axisFieldName + \"Y\", \"previousChange\");\r\n                    }\r\n                }\r\n                if (value < open_1) {\r\n                    dataItem.droppedFromOpen = true;\r\n                    sprite.defaultState.copyFrom(this._dropFromOpenState);\r\n                    sprite.setState(this._dropFromOpenState, 0);\r\n                }\r\n                else {\r\n                    dataItem.droppedFromOpen = false;\r\n                    sprite.defaultState.copyFrom(this._riseFromOpenState);\r\n                    sprite.setState(this._riseFromOpenState, 0);\r\n                }\r\n                if (change < 0) {\r\n                    dataItem.droppedFromPrevious = true;\r\n                    sprite.defaultState.copyFrom(this._dropFromPreviousState);\r\n                    sprite.setState((this._dropFromPreviousState), 0);\r\n                }\r\n                else {\r\n                    dataItem.droppedFromPrevious = false;\r\n                    sprite.defaultState.copyFrom(this._riseFromPreviousState);\r\n                    sprite.setState((this._riseFromPreviousState), 0);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ColumnSeries.prototype, \"columns\", {\r\n        /**\r\n         * A list of column elements in the series.\r\n         *\r\n         * @return Columns\r\n         */\r\n        get: function () {\r\n            if (!this._columns) {\r\n                this._columns = new ListTemplate(this.createColumnTemplate());\r\n                this._disposers.push(new ListDisposer(this._columns));\r\n                this._disposers.push(this._columns.template);\r\n            }\r\n            return this._columns;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates and returns a column element to use as a template.\r\n     *\r\n     * @return Column template\r\n     */\r\n    ColumnSeries.prototype.createColumnTemplate = function () {\r\n        return new Column();\r\n    };\r\n    Object.defineProperty(ColumnSeries.prototype, \"clustered\", {\r\n        /**\r\n         * @return Clustered?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"clustered\");\r\n        },\r\n        /**\r\n         * Cluster this series columns?\r\n         *\r\n         * Setting to `false` will make columns overlap with other series.\r\n         *\r\n         * @default true\r\n         * @param value  Clustered?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"clustered\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSeries.prototype, \"dropFromOpenState\", {\r\n        /**\r\n         * @return State\r\n         */\r\n        get: function () {\r\n            if (!this._dropFromOpenState) {\r\n                this._dropFromOpenState = this.states.create(\"dropFromOpenState\");\r\n            }\r\n            return this._dropFromOpenState;\r\n        },\r\n        /**\r\n         * A state to apply to a column when close value is lower than open value.\r\n         *\r\n         * Can be used to differentiate appearance based on value relations.\r\n         *\r\n         * NOTE: this will work only if at least one axis is [[ValueAxis]].\r\n         *\r\n         * @readonly You can modify state object, but can't overwrite it\r\n         * @param  value  State\r\n         */\r\n        set: function (value) {\r\n            this._dropFromOpenState = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSeries.prototype, \"dropFromPreviousState\", {\r\n        /**\r\n         * @return State\r\n         */\r\n        get: function () {\r\n            if (!this._dropFromPreviousState) {\r\n                this._dropFromPreviousState = this.states.create(\"dropFromPreviousState\");\r\n            }\r\n            return this._dropFromPreviousState;\r\n        },\r\n        /**\r\n         * A state to apply to a column when its value is lower value of a previous\r\n         * column.\r\n         *\r\n         * Can be used to differentiate appearance based on value relations.\r\n         *\r\n         * @readonly You can modify state object, but can't overwrite it\r\n         * @param  value  State\r\n         */\r\n        set: function (value) {\r\n            this._dropFromPreviousState = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSeries.prototype, \"riseFromOpenState\", {\r\n        /**\r\n         * @return State\r\n         */\r\n        get: function () {\r\n            if (!this._riseFromOpenState) {\r\n                this._riseFromOpenState = this.states.create(\"riseFromOpenState\");\r\n            }\r\n            return this._riseFromOpenState;\r\n        },\r\n        /**\r\n         * A state to apply to a column when close value is same or higher than open\r\n         * value.\r\n         *\r\n         * Can be used to differentiate appearance based on value relations.\r\n         *\r\n         * NOTE: this will work only if at least one axis is [[ValueAxis]].\r\n         *\r\n         * @readonly You can modify state object, but can't overwrite it\r\n         * @param  value  State\r\n         */\r\n        set: function (value) {\r\n            this._riseFromOpenState = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSeries.prototype, \"riseFromPreviousState\", {\r\n        /**\r\n         * @return State\r\n         */\r\n        get: function () {\r\n            if (!this._riseFromPreviousState) {\r\n                this._riseFromPreviousState = this.states.create(\"riseFromPreviousState\");\r\n            }\r\n            return this._riseFromPreviousState;\r\n        },\r\n        /**\r\n         * A state to apply to a column when its value is same or higher than value\r\n         * of a previous column.\r\n         *\r\n         * Can be used to differentiate appearance based on value relations.\r\n         *\r\n         * @readonly You can modify state object, but can't overwrite it\r\n         * @param  value  State\r\n         */\r\n        set: function (value) {\r\n            this._riseFromPreviousState = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates value of the related legend item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    ColumnSeries.prototype.updateLegendValue = function (dataItem, notRange) {\r\n        var _this = this;\r\n        _super.prototype.updateLegendValue.call(this, dataItem, notRange);\r\n        if (this.legendDataItem) {\r\n            var marker = this.legendDataItem.marker;\r\n            var fromOpenState_1;\r\n            var fromPreviousState_1;\r\n            if (dataItem) {\r\n                if (dataItem.droppedFromOpen) {\r\n                    fromOpenState_1 = this._dropFromOpenState;\r\n                }\r\n                else {\r\n                    fromOpenState_1 = this._riseFromOpenState;\r\n                }\r\n                if (dataItem.droppedFromPrevious) {\r\n                    fromPreviousState_1 = this._dropFromPreviousState;\r\n                }\r\n                else {\r\n                    fromPreviousState_1 = this._riseFromPreviousState;\r\n                }\r\n            }\r\n            $iter.each(marker.children.iterator(), function (child) {\r\n                if (dataItem) {\r\n                    child.setState(fromPreviousState_1);\r\n                    child.setState(fromOpenState_1);\r\n                }\r\n                else {\r\n                    // todo: think what to do here, maybe apply above states based on totals?\r\n                    child.setState(_this._riseFromPreviousState);\r\n                    child.setState(_this._riseFromOpenState);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Creates elements in related legend container, that mimics the look of this\r\n     * Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Legend item container\r\n     */\r\n    ColumnSeries.prototype.createLegendMarker = function (marker) {\r\n        var w = marker.pixelWidth;\r\n        var h = marker.pixelHeight;\r\n        marker.removeChildren();\r\n        var column = marker.createChild(RoundedRectangle);\r\n        column.shouldClone = false;\r\n        $object.copyProperties(this, column, visualProperties);\r\n        column.copyFrom(this.columns.template);\r\n        column.padding(0, 0, 0, 0); // if columns will have padding (which is often), legend marker will be very narrow\r\n        column.width = w;\r\n        column.height = h;\r\n        var legendDataItem = marker.dataItem;\r\n        legendDataItem.color = this.fill;\r\n        legendDataItem.colorOrig = this.fill;\r\n    };\r\n    /**\r\n     * Copies all properties from another instance of [[ColumnSeries]].\r\n     *\r\n     * @param source  Source series\r\n     */\r\n    ColumnSeries.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.columns.template.copyFrom(source.columns.template);\r\n    };\r\n    /**\r\n    * returns bullet x location\r\n    * @ignore\r\n    */\r\n    ColumnSeries.prototype.getBulletLocationX = function (bullet, field) {\r\n        if (this.baseAxis == this.xAxis) {\r\n            var bulletLocationX = bullet.locationX;\r\n            if (!$type.isNumber(bulletLocationX)) {\r\n                bulletLocationX = 0.5;\r\n            }\r\n            var endLocation = this.getEndLocation(bullet.dataItem);\r\n            var startLocation = this.getStartLocation(bullet.dataItem);\r\n            return endLocation - (endLocation - startLocation) * bulletLocationX;\r\n        }\r\n        else {\r\n            return _super.prototype.getBulletLocationX.call(this, bullet, field);\r\n        }\r\n    };\r\n    /**\r\n    * returns bullet y location\r\n    * @ignore\r\n    */\r\n    ColumnSeries.prototype.getBulletLocationY = function (bullet, field) {\r\n        if (this.baseAxis == this.yAxis) {\r\n            var bulletLocationY = bullet.locationY;\r\n            if (!$type.isNumber(bulletLocationY)) {\r\n                bulletLocationY = 0.5;\r\n            }\r\n            var endLocation = this.getEndLocation(bullet.dataItem);\r\n            var startLocation = this.getStartLocation(bullet.dataItem);\r\n            return endLocation - (endLocation - startLocation) * bulletLocationY;\r\n        }\r\n        else {\r\n            return _super.prototype.getBulletLocationY.call(this, bullet, field);\r\n        }\r\n    };\r\n    ColumnSeries.prototype.getAdjustedXLocation = function (dataItem, field) {\r\n        if (this.baseAxis == this.xAxis) {\r\n            var bulletLocationX = 0.5;\r\n            if (dataItem) {\r\n                bulletLocationX = dataItem.locations[field];\r\n            }\r\n            if (!$type.isNumber(bulletLocationX)) {\r\n                bulletLocationX = 0.5;\r\n            }\r\n            return this._endLocation - (this._endLocation - this._startLocation) * bulletLocationX;\r\n        }\r\n        else {\r\n            return _super.prototype.getAdjustedXLocation.call(this, dataItem, field);\r\n        }\r\n    };\r\n    ColumnSeries.prototype.getAdjustedYLocation = function (dataItem, field) {\r\n        if (this.baseAxis == this.yAxis) {\r\n            var bulletLocationY = 0.5;\r\n            if (dataItem) {\r\n                bulletLocationY = dataItem.locations[field];\r\n            }\r\n            if (!$type.isNumber(bulletLocationY)) {\r\n                bulletLocationY = 0.5;\r\n            }\r\n            return this._endLocation - (this._endLocation - this._startLocation) * bulletLocationY;\r\n        }\r\n        else {\r\n            return _super.prototype.getAdjustedXLocation.call(this, dataItem, field);\r\n        }\r\n    };\r\n    /**\r\n     * @ignore Exclude from docs\r\n     */\r\n    ColumnSeries.prototype.fixVerticalCoordinate = function (coordinate) {\r\n        var paddingBottom = this.columns.template.pixelPaddingBottom;\r\n        var paddingTop = this.columns.template.pixelPaddingTop;\r\n        var minY = -paddingTop;\r\n        var maxY = this.yAxis.axisLength + paddingBottom;\r\n        return $math.fitToRange(coordinate, minY, maxY);\r\n    };\r\n    /**\r\n     * @ignore Exclude from docs\r\n     */\r\n    ColumnSeries.prototype.fixHorizontalCoordinate = function (coordinate) {\r\n        var paddingLeft = this.columns.template.pixelPaddingLeft;\r\n        var paddingRight = this.columns.template.pixelPaddingRight;\r\n        var minX = -paddingLeft;\r\n        var maxX = this.xAxis.axisLength + paddingRight;\r\n        return $math.fitToRange(coordinate, minX, maxX);\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    ColumnSeries.prototype.disposeData = function () {\r\n        _super.prototype.disposeData.call(this);\r\n        this.columns.clear();\r\n    };\r\n    return ColumnSeries;\r\n}(XYSeries));\r\nexport { ColumnSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ColumnSeries\"] = ColumnSeries;\r\nregistry.registeredClasses[\"ColumnSeriesDataItem\"] = ColumnSeriesDataItem;\r\n//# sourceMappingURL=ColumnSeries.js.map","/**\r\n * TreeMap series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ColumnSeries, ColumnSeriesDataItem } from \"./ColumnSeries\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { RoundedRectangle } from \"../../core/elements/RoundedRectangle\";\r\nimport * as $object from \"../../core/utils/Object\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[TreeMapSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar TreeMapSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(TreeMapSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function TreeMapSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"TreeMapSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TreeMapSeriesDataItem.prototype, \"parentName\", {\r\n        /**\r\n         * Data for the this particular item.\r\n         *\r\n         * @param value  Item's data\r\n         */\r\n        //public set dataContext(value: Object) {\r\n        //\tthis._dataContext = value;\r\n        //}\r\n        /**\r\n         * @return Item's data\r\n         */\r\n        /*\r\n       public get dataContext(): Object {\r\n           // It's because data of tree series is TreeMapDataItems.\r\n           if (this._dataContext) {\r\n               return (<any>this._dataContext).dataContext;\r\n           }\r\n       }*/\r\n        /**\r\n         * The name of the item's parent item.\r\n         *\r\n         * @return Parent name\r\n         */\r\n        get: function () {\r\n            var treeMapDataItem = this.treeMapDataItem;\r\n            if (treeMapDataItem && treeMapDataItem.parent) {\r\n                return treeMapDataItem.parent.name;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapSeriesDataItem.prototype, \"value\", {\r\n        /**\r\n         * Item's numeric value.\r\n         *\r\n         * @readonly\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            var treeMapDataItem = this.treeMapDataItem;\r\n            if (treeMapDataItem) {\r\n                return treeMapDataItem.value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapSeriesDataItem.prototype, \"treeMapDataItem\", {\r\n        /**\r\n         * A corresponding data item from the tree map.\r\n         *\r\n         * @readonly\r\n         * @return Data item\r\n         */\r\n        get: function () {\r\n            return this._dataContext;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Hides the Data Item and related visual elements.\r\n     *\r\n     * @param duration  Animation duration (ms)\r\n     * @param delay     Delay animation (ms)\r\n     * @param toValue   A value to set to `fields` when hiding\r\n     * @param fields    A list of data fields to set value to `toValue`\r\n     */\r\n    TreeMapSeriesDataItem.prototype.hide = function (duration, delay, toValue, fields) {\r\n        var treeMapDataItem = this.treeMapDataItem;\r\n        if (treeMapDataItem) {\r\n            treeMapDataItem.hide(duration);\r\n        }\r\n        return _super.prototype.hide.call(this, duration, delay, toValue, fields);\r\n    };\r\n    /**\r\n     * Shows the Data Item and related visual elements.\r\n     *\r\n     * @param duration  Animation duration (ms)\r\n     * @param delay     Delay animation (ms)\r\n     * @param fields    A list of fields to set values of\r\n     */\r\n    TreeMapSeriesDataItem.prototype.show = function (duration, delay, fields) {\r\n        var treeMapDataItem = this.treeMapDataItem;\r\n        if (treeMapDataItem) {\r\n            treeMapDataItem.show(duration, delay, fields);\r\n        }\r\n        return _super.prototype.show.call(this, duration, delay, fields);\r\n    };\r\n    return TreeMapSeriesDataItem;\r\n}(ColumnSeriesDataItem));\r\nexport { TreeMapSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines Series for a TreeMap chart.\r\n *\r\n * @see {@link ITreeMapSeriesEvents} for a list of available Events\r\n * @see {@link ITreeMapSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar TreeMapSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(TreeMapSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function TreeMapSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"TreeMapSeries\";\r\n        _this.applyTheme();\r\n        _this.fillOpacity = 1;\r\n        _this.strokeOpacity = 1;\r\n        _this.minBulletDistance = 0;\r\n        _this.columns.template.tooltipText = \"{parentName} {name}: {value}\"; //@todo add format number?\r\n        _this.columns.template.configField = \"config\";\r\n        var interfaceColors = new InterfaceColorSet();\r\n        _this.stroke = interfaceColors.getFor(\"background\");\r\n        _this.dataFields.openValueX = \"x0\";\r\n        _this.dataFields.valueX = \"x1\";\r\n        _this.dataFields.openValueY = \"y0\";\r\n        _this.dataFields.valueY = \"y1\";\r\n        _this.sequencedInterpolation = false;\r\n        _this.showOnInit = false;\r\n        // otherwise nodes don't stack nicely to each other\r\n        _this.columns.template.pixelPerfect = false;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Processes data item.\r\n     *\r\n     * @param dataItem     Data item\r\n     * @param dataContext  Raw data\r\n     * @param index        Index of the data item\r\n     */\r\n    TreeMapSeries.prototype.processDataItem = function (dataItem, dataContext) {\r\n        dataContext.seriesDataItem = dataItem; // save a reference here. dataContext is TreeMapDataItem and we need to know dataItem sometimes\r\n        _super.prototype.processDataItem.call(this, dataItem, dataContext);\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    TreeMapSeries.prototype.createDataItem = function () {\r\n        return new TreeMapSeriesDataItem();\r\n    };\r\n    /**\r\n     * Shows series.\r\n     *\r\n     * @param duration  Duration of fade in (ms)\r\n     * @return Animation\r\n     */\r\n    TreeMapSeries.prototype.show = function (duration) {\r\n        var interpolationDuration = this.defaultState.transitionDuration;\r\n        if ($type.isNumber(duration)) {\r\n            interpolationDuration = duration;\r\n        }\r\n        this.dataItems.each(function (dataItem) {\r\n            //dataItem.treeMapDataItem.setWorkingValue(\"value\", dataItem.treeMapDataItem.values.value.value);\r\n            dataItem.show(duration);\r\n        });\r\n        return _super.prototype.showReal.call(this, interpolationDuration);\r\n    };\r\n    /**\r\n     * Hides series.\r\n     *\r\n     * @param duration  Duration of fade out (ms)\r\n     * @return Animation\r\n     */\r\n    TreeMapSeries.prototype.hide = function (duration) {\r\n        var interpolationDuration = this.defaultState.transitionDuration;\r\n        if ($type.isNumber(duration)) {\r\n            interpolationDuration = duration;\r\n        }\r\n        var animation = _super.prototype.hideReal.call(this, interpolationDuration);\r\n        this.dataItems.each(function (dataItem) {\r\n            //dataItem.treeMapDataItem.setWorkingValue(\"value\", 0);\r\n            dataItem.hide(duration);\r\n        });\r\n        return animation;\r\n    };\r\n    /**\r\n     * Process values.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    TreeMapSeries.prototype.processValues = function () {\r\n        // Just overriding so that inherited method does not kick in.\r\n    };\r\n    /**\r\n     * Returns relative start location for the data item.\r\n     *\r\n     * @param dataItem  Data item\r\n     * @return Location (0-1)\r\n     */\r\n    TreeMapSeries.prototype.getStartLocation = function (dataItem) {\r\n        return 0;\r\n    };\r\n    /**\r\n     * Returns relative end location for the data item.\r\n     *\r\n     * @param dataItem  Data item\r\n     * @return Location (0-1)\r\n     */\r\n    TreeMapSeries.prototype.getEndLocation = function (dataItem) {\r\n        return 1;\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    TreeMapSeries.prototype.dataChangeUpdate = function () {\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    TreeMapSeries.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Add empty data fields if the they are not set, so that XYSeries\r\n            // dataField check does not result in error.\r\n            if (!$type.hasValue(config.dataFields) || !$type.isObject(config.dataFields)) {\r\n                config.dataFields = {};\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    /**\r\n     * Creates elements in related legend container, that mimics the look of this\r\n     * Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Legend item container\r\n     */\r\n    TreeMapSeries.prototype.createLegendMarker = function (marker) {\r\n        var w = marker.pixelWidth;\r\n        var h = marker.pixelHeight;\r\n        marker.removeChildren();\r\n        var column = marker.createChild(RoundedRectangle);\r\n        column.shouldClone = false;\r\n        $object.copyProperties(this, column, visualProperties);\r\n        //column.copyFrom(<any>this.columns.template);\r\n        column.padding(0, 0, 0, 0); // if columns will have padding (which is often), legend marker will be very narrow\r\n        column.width = w;\r\n        column.height = h;\r\n        var legendDataItem = marker.dataItem;\r\n        legendDataItem.color = column.fill;\r\n        legendDataItem.colorOrig = column.fill;\r\n    };\r\n    return TreeMapSeries;\r\n}(ColumnSeries));\r\nexport { TreeMapSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"TreeMapSeries\"] = TreeMapSeries;\r\nregistry.registeredClasses[\"TreeMapSeriesDataItem\"] = TreeMapSeriesDataItem;\r\n//# sourceMappingURL=TreeMapSeries.js.map","/**\r\n * TreeMap chart module.\r\n *\r\n * Parts of the functionality used in this module are taken from D3.js library\r\n * (https://d3js.org/)\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { XYChart, XYChartDataItem } from \"./XYChart\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { DictionaryTemplate, DictionaryDisposer } from \"../../core/utils/Dictionary\";\r\nimport { ValueAxis } from \"../axes/ValueAxis\";\r\nimport { TreeMapSeries } from \"../series/TreeMapSeries\";\r\nimport { ColorSet } from \"../../core/utils/ColorSet\";\r\nimport { MouseCursorStyle } from \"../../core/interaction/Mouse\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $array from \"../../core/utils/Array\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[TreeMap]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar TreeMapDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(TreeMapDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function TreeMapDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Required for squarify functionality.\r\n         *\r\n         * @ignore Exclude from docs\r\n         */\r\n        _this.rows = [];\r\n        _this.className = \"TreeMapDataItem\";\r\n        _this.values.value = {};\r\n        _this.values.x0 = {};\r\n        _this.values.y0 = {};\r\n        _this.values.x1 = {};\r\n        _this.values.y1 = {};\r\n        _this.hasChildren.children = true;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"legendDataItem\", {\r\n        /**\r\n         * @return Legend data item\r\n         */\r\n        get: function () {\r\n            return this._legendDataItem;\r\n        },\r\n        /**\r\n         * A legend's data item, that corresponds to this data item.\r\n         *\r\n         * @param value  Legend data item\r\n         */\r\n        set: function (value) {\r\n            this._legendDataItem = value;\r\n            if (value.label) {\r\n                value.label.dataItem = this;\r\n            }\r\n            if (value.valueLabel) {\r\n                value.valueLabel.dataItem = this;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a duration (ms) the Data Item should take to animate from one\r\n     * value to another.\r\n     *\r\n     * If the duration is not specified via parameter, this method will try to\r\n     * request a default duration from the related `Component`.\r\n     *\r\n     * @param duration  Default duration (ms)\r\n     * @return Duration (ms)\r\n     */\r\n    TreeMapDataItem.prototype.getDuration = function () {\r\n        return 0;\r\n    };\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"value\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            var value = 0;\r\n            if (!this.children || this.children.length == 0) {\r\n                value = this.values[\"value\"].workingValue;\r\n            }\r\n            else {\r\n                $iter.each(this.children.iterator(), function (child) {\r\n                    var childValue = child.value;\r\n                    if ($type.isNumber(childValue)) {\r\n                        value += childValue;\r\n                    }\r\n                });\r\n            }\r\n            return value;\r\n            /*\r\n            let value = this.values[\"value\"].workingValue;\r\n    \r\n            if (!$type.isNumber(value)) {\r\n                value = 0;\r\n                if (this.children) {\r\n                    $iter.each(this.children.iterator(), (child) => {\r\n                        if ($type.isNumber(child.value)) {\r\n                            value += child.value;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            return value;*/\r\n        },\r\n        /**\r\n         * Numeric value of the item.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"value\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"percent\", {\r\n        get: function () {\r\n            if (this.parent) {\r\n                return this.value / this.parent.value * 100;\r\n            }\r\n            return 100;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"x0\", {\r\n        /**\r\n         * @return X\r\n         */\r\n        get: function () {\r\n            return this.values.x0.value;\r\n        },\r\n        /**\r\n         * Item's X position.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description (review)\r\n         * @param value  X\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"x0\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"x1\", {\r\n        /**\r\n         * @return X\r\n         */\r\n        get: function () {\r\n            return this.values.x1.value;\r\n        },\r\n        /**\r\n         * Item's X position.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description (review)\r\n         * @param value  X\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"x1\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"y0\", {\r\n        /**\r\n         * @return Y\r\n         */\r\n        get: function () {\r\n            return this.values.y0.value;\r\n        },\r\n        /**\r\n         * Item's Y position.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description (review)\r\n         * @param value  Y\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"y0\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"y1\", {\r\n        /**\r\n         * @return Y\r\n         */\r\n        get: function () {\r\n            return this.values.y1.value;\r\n        },\r\n        /**\r\n         * Item's Y position.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @todo Description (review)\r\n         * @param value  Y\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"y1\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"name\", {\r\n        /**\r\n         * @return Name\r\n         */\r\n        get: function () {\r\n            return this.properties.name;\r\n        },\r\n        /**\r\n         * Item's name.\r\n         *\r\n         * @param name  Name\r\n         */\r\n        set: function (name) {\r\n            this.setProperty(\"name\", name);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"children\", {\r\n        /**\r\n         * @return Item's children\r\n         */\r\n        get: function () {\r\n            return this.properties.children;\r\n        },\r\n        /**\r\n         * A list of item's sub-children.\r\n         *\r\n         * Having children means that the TreeMap chat will automatically be\r\n         * \"drillable\". Clicking on an item with children will zoom to the item, then\r\n         * display its children.\r\n         *\r\n         * Treemap can have any level of nesting.\r\n         *\r\n         * @param children  Item's children\r\n         */\r\n        set: function (children) {\r\n            this.setProperty(\"children\", children);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"level\", {\r\n        /**\r\n         * Depth level in the treemap hierarchy.\r\n         *\r\n         * The top-level item will have level set at 0. Its children will have\r\n         * level 1, and so on.\r\n         *\r\n         * @readonly\r\n         * @return Level\r\n         */\r\n        get: function () {\r\n            if (!this.parent) {\r\n                return 0;\r\n            }\r\n            else {\r\n                return this.parent.level + 1;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"color\", {\r\n        /**\r\n         * @return Color\r\n         */\r\n        get: function () {\r\n            var color = this.properties.color;\r\n            if (color == undefined) {\r\n                if (this.parent) {\r\n                    color = this.parent.color;\r\n                }\r\n            }\r\n            if (color == undefined) {\r\n                if (this.component) {\r\n                    color = this.component.colors.getIndex(this.component.colors.step * this.index);\r\n                }\r\n            }\r\n            return color;\r\n        },\r\n        /**\r\n         * Item's color.\r\n         *\r\n         * If not set, will use parent's color, or, if that is not set either,\r\n         * automatically assigned color from chart's color set. (`chart.colors`)\r\n         *\r\n         * @param value  Color\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"color\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"fill\", {\r\n        /**\r\n         * @ignore\r\n         * For the legend to work properly\r\n         */\r\n        get: function () {\r\n            return this.color;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMapDataItem.prototype, \"series\", {\r\n        get: function () {\r\n            return this._series;\r\n        },\r\n        /**\r\n         * Series of children data items\r\n         * @todo: proper descrition\r\n         */\r\n        set: function (series) {\r\n            if (series != this._series) {\r\n                if (this._series) {\r\n                    this.component.series.removeValue(this._series);\r\n                    this._series.dispose();\r\n                }\r\n                this._series = series;\r\n                this._disposers.push(series);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Hides the Data Item and related visual elements.\r\n     *\r\n     * @param duration  Animation duration (ms)\r\n     * @param delay     Delay animation (ms)\r\n     * @param toValue   A value to set to `fields` when hiding\r\n     * @param fields    A list of data fields to set value to `toValue`\r\n     */\r\n    TreeMapDataItem.prototype.hide = function (duration, delay, toValue, fields) {\r\n        this.setWorkingValue(\"value\", 0);\r\n        if (this.children) {\r\n            this.children.each(function (child) {\r\n                child.hide(duration, delay, toValue, fields);\r\n            });\r\n        }\r\n        return _super.prototype.hide.call(this, duration, delay, toValue, fields);\r\n    };\r\n    /**\r\n     * Shows the Data Item and related visual elements.\r\n     *\r\n     * @param duration  Animation duration (ms)\r\n     * @param delay     Delay animation (ms)\r\n     * @param fields    A list of fields to set values of\r\n     */\r\n    TreeMapDataItem.prototype.show = function (duration, delay, fields) {\r\n        this.setWorkingValue(\"value\", this.values.value.value);\r\n        if (this.children) {\r\n            this.children.each(function (child) {\r\n                child.show(duration, delay, fields);\r\n            });\r\n        }\r\n        return _super.prototype.show.call(this, duration, delay, fields);\r\n    };\r\n    return TreeMapDataItem;\r\n}(XYChartDataItem));\r\nexport { TreeMapDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a TreeMap chart.\r\n *\r\n * @see {@link ITreeMapEvents} for a list of available Events\r\n * @see {@link ITreeMapAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/treemap/} for documentation\r\n */\r\nvar TreeMap = /** @class */ (function (_super) {\r\n    tslib_1.__extends(TreeMap, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function TreeMap() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * An algorithm used to divide area into squares based on their value.\r\n         *\r\n         * Available options: squarify (default), binaryTree, slice, dice, sliceDice.\r\n         *\r\n         * ```TypeScript\r\n         * chart.layoutAlgorithm = chart.sliceDice;\r\n         * ```\r\n         * ```JavaScript\r\n         * chart.layoutAlgorithm = chart.sliceDice;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"layoutAlgorithm\": \"sliceDice\",\r\n         *   // ...\r\n         * }\r\n         * ```\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/chart-types/treemap/#Area_division_methods} For more info and examples.\r\n         * @default squarify\r\n         */\r\n        _this.layoutAlgorithm = _this.squarify;\r\n        /**\r\n         * Is the chart zoomable?\r\n         *\r\n         * If the chart is `zoomable`, and items have sub-items, the chart will\r\n         * drill-down to sub-items when click on their parent item.\r\n         *\r\n         * @default true\r\n         */\r\n        _this.zoomable = true;\r\n        _this.className = \"TreeMap\";\r\n        _this._usesData = true;\r\n        _this.maxLevels = 2;\r\n        _this.currentLevel = 0;\r\n        _this.hideParentColumns = false;\r\n        _this.colors = new ColorSet();\r\n        _this.sorting = \"descending\";\r\n        // create two value axes for the chart\r\n        var xAxis = _this.xAxes.push(new ValueAxis());\r\n        xAxis.title.disabled = true;\r\n        xAxis.strictMinMax = true;\r\n        var xRenderer = xAxis.renderer;\r\n        xRenderer.inside = true;\r\n        xRenderer.labels.template.disabled = true;\r\n        xRenderer.ticks.template.disabled = true;\r\n        xRenderer.grid.template.disabled = true;\r\n        xRenderer.axisFills.template.disabled = true;\r\n        xRenderer.minGridDistance = 100;\r\n        xRenderer.line.disabled = true;\r\n        xRenderer.baseGrid.disabled = true;\r\n        //xRenderer.inversed = true;\r\n        var yAxis = _this.yAxes.push(new ValueAxis());\r\n        yAxis.title.disabled = true;\r\n        yAxis.strictMinMax = true;\r\n        var yRenderer = yAxis.renderer;\r\n        yRenderer.inside = true;\r\n        yRenderer.labels.template.disabled = true;\r\n        yRenderer.ticks.template.disabled = true;\r\n        yRenderer.grid.template.disabled = true;\r\n        yRenderer.axisFills.template.disabled = true;\r\n        yRenderer.minGridDistance = 100;\r\n        yRenderer.line.disabled = true;\r\n        yRenderer.baseGrid.disabled = true;\r\n        yRenderer.inversed = true;\r\n        // shortcuts\r\n        _this.xAxis = xAxis;\r\n        _this.yAxis = yAxis;\r\n        var template = new TreeMapSeries();\r\n        _this.seriesTemplates = new DictionaryTemplate(template);\r\n        template.virtualParent = _this;\r\n        _this._disposers.push(new DictionaryDisposer(_this.seriesTemplates));\r\n        _this._disposers.push(template);\r\n        _this.zoomOutButton.events.on(\"hit\", function () {\r\n            _this.zoomToChartDataItem(_this._homeDataItem);\r\n        }, undefined, false);\r\n        _this.seriesTemplates.events.on(\"insertKey\", function (event) {\r\n            event.newValue.isTemplate = true;\r\n        }, undefined, false);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TreeMap.prototype, \"navigationBar\", {\r\n        /**\r\n         * Returns navigationBar if it is added to a chart\r\n         */\r\n        get: function () {\r\n            return this._navigationBar;\r\n        },\r\n        /**\r\n         * A navigation bar used to show \"breadcrumb\" control, indicating current\r\n         * drill-down path.\r\n         */\r\n        set: function (navigationBar) {\r\n            var _this = this;\r\n            if (this._navigationBar != navigationBar) {\r\n                this._navigationBar = navigationBar;\r\n                navigationBar.parent = this;\r\n                navigationBar.toBack();\r\n                navigationBar.links.template.events.on(\"hit\", function (event) {\r\n                    var dataItem = event.target.dataItem.dataContext;\r\n                    if (!dataItem.isDisposed()) {\r\n                        _this.zoomToChartDataItem(dataItem);\r\n                        _this.createTreeSeries(dataItem);\r\n                    }\r\n                }, undefined, true);\r\n                this._disposers.push(navigationBar);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * (Re)validates chart's data.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    TreeMap.prototype.validateData = function () {\r\n        this.series.clear();\r\n        this._tempSeries = [];\r\n        _super.prototype.validateData.call(this);\r\n        if (this._homeDataItem) {\r\n            this._homeDataItem.dispose();\r\n        }\r\n        var homeDataItem = this.dataItems.template.clone(); // cant' use createDataItem here!\r\n        this._homeDataItem = homeDataItem;\r\n        $iter.each(this.dataItems.iterator(), function (dataItem) {\r\n            dataItem.parent = homeDataItem;\r\n        });\r\n        homeDataItem.children = this.dataItems;\r\n        homeDataItem.x0 = 0;\r\n        homeDataItem.y0 = 0;\r\n        homeDataItem.name = this._homeText;\r\n        var maxX = 1000;\r\n        var maxY = Math.round((maxX * this.pixelHeight / this.pixelWidth) / 10) * 10 || 1000;\r\n        homeDataItem.x1 = maxX;\r\n        homeDataItem.y1 = maxY;\r\n        this.xAxis.min = 0;\r\n        this.xAxis.max = maxX;\r\n        this.xAxis.getMinMax();\r\n        this.yAxis.min = 0;\r\n        this.yAxis.max = maxY;\r\n        this.yAxis.getMinMax();\r\n        this.layoutItems(homeDataItem);\r\n        this.createTreeSeries(homeDataItem);\r\n    };\r\n    /**\r\n     * Layouts and sizes all items according to their value and\r\n     * `layoutAlgorithm`.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param parent  Parent data item\r\n     */\r\n    TreeMap.prototype.layoutItems = function (parent, sorting) {\r\n        if (parent) {\r\n            var children = parent.children;\r\n            if (!sorting) {\r\n                sorting = this.sorting;\r\n            }\r\n            if (sorting == \"ascending\") {\r\n                children.values.sort(function (a, b) {\r\n                    return a.value - b.value;\r\n                });\r\n            }\r\n            if (sorting == \"descending\") {\r\n                children.values.sort(function (a, b) {\r\n                    return b.value - a.value;\r\n                });\r\n            }\r\n            this._updateDataItemIndexes(0);\r\n            this.layoutAlgorithm(parent);\r\n            for (var i = 0, len = children.length; i < len; i++) {\r\n                var node = children.getIndex(i);\r\n                if (node.children) {\r\n                    this.layoutItems(node);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Creates and returns a new treemap series.\r\n     *\r\n     * @todo Description\r\n     * @param dataItem  Data item to create series out of\r\n     */\r\n    TreeMap.prototype.createTreeSeries = function (dataItem) {\r\n        var _this = this;\r\n        this._tempSeries = [];\r\n        var navigationData = [dataItem];\r\n        // create parent series and navigation data\r\n        var parentDataItem = dataItem.parent;\r\n        while (parentDataItem != undefined) {\r\n            this.initSeries(parentDataItem);\r\n            navigationData.push(parentDataItem);\r\n            parentDataItem = parentDataItem.parent;\r\n        }\r\n        navigationData.reverse();\r\n        if (this.navigationBar) {\r\n            this.navigationBar.data = navigationData;\r\n        }\r\n        // create series and children series\r\n        this.createTreeSeriesReal(dataItem);\r\n        // add those which are not in the list\r\n        $array.each(this._tempSeries, function (series) {\r\n            if (_this.series.indexOf(series) == -1) {\r\n                _this.series.push(series);\r\n            }\r\n            series.zIndex = series.level;\r\n        });\r\n    };\r\n    /**\r\n     * [createTreeSeriesReal description]\r\n     *\r\n     * @todo Description\r\n     * @param dataItem [description]\r\n     */\r\n    TreeMap.prototype.createTreeSeriesReal = function (dataItem) {\r\n        if (dataItem.children) {\r\n            var level = dataItem.level;\r\n            if (level < this.currentLevel + this.maxLevels) {\r\n                this.initSeries(dataItem);\r\n                for (var i = 0; i < dataItem.children.length; i++) {\r\n                    var child = dataItem.children.getIndex(i);\r\n                    if (child.children) {\r\n                        this.createTreeSeriesReal(child);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    TreeMap.prototype.setData = function (value) {\r\n        this.currentLevel = 0;\r\n        this.currentlyZoomed = undefined;\r\n        this.xAxis.start = 0;\r\n        this.xAxis.end = 1;\r\n        this.yAxis.start = 0;\r\n        this.yAxis.end = 1;\r\n        _super.prototype.setData.call(this, value);\r\n    };\r\n    /**\r\n     * @ignore\r\n     * Overriding, as tree map series are created on the fly all the time\r\n     */\r\n    TreeMap.prototype.seriesAppeared = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * Initializes the treemap series.\r\n     *\r\n     * @todo Description\r\n     * @param dataItem  Chart data item\r\n     */\r\n    TreeMap.prototype.initSeries = function (dataItem) {\r\n        var _this = this;\r\n        if (!dataItem.series) {\r\n            var series = void 0;\r\n            var template = this.seriesTemplates.getKey(dataItem.level.toString());\r\n            if (template) {\r\n                series = template.clone();\r\n            }\r\n            else {\r\n                series = this.series.create();\r\n            }\r\n            // for the legend to get {value}\r\n            series.dataItem.dataContext = dataItem;\r\n            series.name = dataItem.name;\r\n            series.parentDataItem = dataItem;\r\n            dataItem.series = series;\r\n            var level = dataItem.level;\r\n            series.level = level;\r\n            var dataContext = dataItem.dataContext;\r\n            if (dataContext) {\r\n                series.config = dataContext.config;\r\n            }\r\n            this.dataUsers.removeValue(series); // series do not use data directly, that's why we remove it\r\n            series.data = dataItem.children.values;\r\n            series.fill = dataItem.color;\r\n            series.columnsContainer.hide(0);\r\n            series.bulletsContainer.hide(0);\r\n            series.columns.template.adapter.add(\"fill\", function (fill, target) {\r\n                var dataItem = target.dataItem;\r\n                if (dataItem) {\r\n                    var treeMapDataItem = dataItem.treeMapDataItem;\r\n                    if (treeMapDataItem) {\r\n                        target.fill = treeMapDataItem.color;\r\n                        target.adapter.remove(\"fill\"); //@todo: make it possible adapters applied once?\r\n                        return treeMapDataItem.color;\r\n                    }\r\n                }\r\n            });\r\n            if (this.zoomable && (dataItem.level > this.currentLevel || (dataItem.children && dataItem.children.length > 0))) {\r\n                series.columns.template.cursorOverStyle = MouseCursorStyle.pointer;\r\n                if (this.zoomable) {\r\n                    series.columns.template.events.on(\"hit\", function (event) {\r\n                        var seriesDataItem = event.target.dataItem;\r\n                        if (dataItem.level > _this.currentLevel) {\r\n                            _this.zoomToChartDataItem(seriesDataItem.treeMapDataItem.parent);\r\n                        }\r\n                        else {\r\n                            _this.zoomToSeriesDataItem(seriesDataItem);\r\n                        }\r\n                    }, this, undefined);\r\n                }\r\n            }\r\n        }\r\n        this._tempSeries.push(dataItem.series);\r\n    };\r\n    /**\r\n     * Toggles bullets so that labels that belong to current drill level are\r\n     * shown.\r\n     *\r\n     * @param duration  Animation duration (ms)\r\n     */\r\n    TreeMap.prototype.toggleBullets = function (duration) {\r\n        var _this = this;\r\n        // hide all series which are not in tempSeries\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            if (_this._tempSeries.indexOf(series) == -1) {\r\n                //series.hideReal(duration);\r\n                series.columnsContainer.hide();\r\n                series.bulletsContainer.hide(duration);\r\n            }\r\n            else {\r\n                //series.showReal(duration);\r\n                series.columnsContainer.show();\r\n                series.bulletsContainer.show(duration);\r\n                series.dataItems.each(function (dataItem) {\r\n                    dataItem.bullets.each(function (key, bullet) {\r\n                        bullet.show();\r\n                    });\r\n                });\r\n                if (series.level < _this.currentLevel) {\r\n                    if (_this.hideParentColumns) {\r\n                        series.columnsContainer.hide();\r\n                    }\r\n                    series.bulletsContainer.hide(duration);\r\n                }\r\n                else if (series.level == _this.currentLevel) {\r\n                    if (_this.maxLevels > 1) {\r\n                        series.dataItems.each(function (dataItem) {\r\n                            if (dataItem.treeMapDataItem.children) {\r\n                                dataItem.bullets.each(function (key, bullet) {\r\n                                    bullet.hide();\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Zooms to particular item in series.\r\n     *\r\n     * @param dataItem  Data item\r\n     */\r\n    TreeMap.prototype.zoomToSeriesDataItem = function (dataItem) {\r\n        this.zoomToChartDataItem(dataItem.treeMapDataItem);\r\n    };\r\n    /**\r\n     * Zooms to particular item.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    TreeMap.prototype.zoomToChartDataItem = function (dataItem) {\r\n        var _this = this;\r\n        var zoomOutButton = this.zoomOutButton;\r\n        // this is needed because if there is only one fist level, it wont' be shown\r\n        if (zoomOutButton) {\r\n            if (dataItem != this._homeDataItem) {\r\n                zoomOutButton.show();\r\n            }\r\n            else {\r\n                zoomOutButton.hide();\r\n            }\r\n        }\r\n        if (dataItem && dataItem.children) {\r\n            this.xAxis.zoomToValues(dataItem.x0, dataItem.x1);\r\n            this.yAxis.zoomToValues(dataItem.y0, dataItem.y1);\r\n            this.currentLevel = dataItem.level;\r\n            this.currentlyZoomed = dataItem;\r\n            this.createTreeSeries(dataItem);\r\n            var rangeChangeAnimation = this.xAxis.rangeChangeAnimation || this.yAxis.rangeChangeAnimation;\r\n            if (rangeChangeAnimation && !rangeChangeAnimation.isDisposed() && !rangeChangeAnimation.isFinished()) {\r\n                this._dataDisposers.push(rangeChangeAnimation);\r\n                rangeChangeAnimation.events.once(\"animationended\", function () {\r\n                    _this.toggleBullets();\r\n                });\r\n            }\r\n            else {\r\n                this.toggleBullets();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    TreeMap.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        // Add a default screen reader title for accessibility\r\n        // This will be overridden in screen reader if there are any `titles` set\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"TreeMap chart\");\r\n        }\r\n        //this.homeText = this.language.translate(\"Home\");\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    TreeMap.prototype.createDataItem = function () {\r\n        return new TreeMapDataItem();\r\n    };\r\n    Object.defineProperty(TreeMap.prototype, \"maxLevels\", {\r\n        /**\r\n         * @return Maximum drill-down level\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maxLevels\");\r\n        },\r\n        /**\r\n         * Maximum number of levels the chart will display initially.\r\n         *\r\n         * @default 2\r\n         * @param value  Maximum drill-down level\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"maxLevels\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMap.prototype, \"currentLevel\", {\r\n        /**\r\n         * @return Current level\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"currentLevel\");\r\n        },\r\n        /**\r\n         * Current drill-down level the chart is at.\r\n         *\r\n         * @param value  Current level\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"currentLevel\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMap.prototype, \"hideParentColumns\", {\r\n        /**\r\n         * @return Hide?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"hideParentColumns\");\r\n        },\r\n        /**\r\n         * If set to `true`, columns of parent nodes will be hidden when user\r\n         * drills-down into deeper levels.\r\n         *\r\n         * @sice 4.7.4\r\n         * @default false\r\n         * @param  value  Hide?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"hideParentColumns\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TreeMap.prototype, \"sorting\", {\r\n        get: function () {\r\n            return this.getPropertyValue(\"sorting\");\r\n        },\r\n        /**\r\n         * Sorting direction of treemap items.\r\n         *\r\n         * Available options: \"none\", \"ascending\", and \"descending\" (default).\r\n         *\r\n         * @default \"descending\"\r\n         * @param value [description]\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"sorting\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates and returns a new series of the suitable type.\r\n     *\r\n     * @return new series\r\n     */\r\n    TreeMap.prototype.createSeries = function () {\r\n        return new TreeMapSeries();\r\n    };\r\n    Object.defineProperty(TreeMap.prototype, \"homeText\", {\r\n        /**\r\n         * @return Home text\r\n         */\r\n        get: function () {\r\n            return this._homeText;\r\n        },\r\n        /**\r\n         * A text displayed on the \"home\" button which is used to go back to level 0\r\n         * after drill into sub-items.\r\n         *\r\n         * @param value  Home text\r\n         */\r\n        set: function (value) {\r\n            this._homeText = value;\r\n            if (this._homeDataItem) {\r\n                this._homeDataItem.name = this._homeText;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    TreeMap.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Instantiate layout algorithm\r\n            if ($type.hasValue(config[\"layoutAlgorithm\"]) && $type.isString(config[\"layoutAlgorithm\"])) {\r\n                switch (config[\"layoutAlgorithm\"]) {\r\n                    case \"squarify\":\r\n                        config[\"layoutAlgorithm\"] = this.squarify;\r\n                        break;\r\n                    case \"binaryTree\":\r\n                        config[\"layoutAlgorithm\"] = this.binaryTree;\r\n                        break;\r\n                    case \"slice\":\r\n                        config[\"layoutAlgorithm\"] = this.slice;\r\n                        break;\r\n                    case \"dice\":\r\n                        config[\"layoutAlgorithm\"] = this.dice;\r\n                        break;\r\n                    case \"sliceDice\":\r\n                        config[\"layoutAlgorithm\"] = this.sliceDice;\r\n                        break;\r\n                    default:\r\n                        delete config[\"layoutAlgorithm\"];\r\n                        break;\r\n                }\r\n            }\r\n            // Set type for navigation bar\r\n            if ($type.hasValue(config.navigationBar) && !$type.hasValue(config.navigationBar.type)) {\r\n                config.navigationBar.type = \"NavigationBar\";\r\n            }\r\n            _super.prototype.processConfig.call(this, config);\r\n        }\r\n    };\r\n    /**\r\n     * Measures the size of container and informs its children of how much size\r\n     * they can occupy, by setting their relative `maxWidth` and `maxHeight`\r\n     * properties.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    TreeMap.prototype.validateLayout = function () {\r\n        _super.prototype.validateLayout.call(this);\r\n        this.layoutItems(this.currentlyZoomed);\r\n    };\r\n    /**\r\n     * Validates (processes) data items.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    TreeMap.prototype.validateDataItems = function () {\r\n        _super.prototype.validateDataItems.call(this);\r\n        this.layoutItems(this._homeDataItem);\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            series.validateRawData();\r\n        });\r\n        this.zoomToChartDataItem(this._homeDataItem);\r\n    };\r\n    /**\r\n     * ==========================================================================\r\n     * TREEMAP LAYOUT FUNCTIONS\r\n     * ==========================================================================\r\n     * @hidden\r\n     */\r\n    /**\r\n     * The functions below are from D3.js library (https://d3js.org/)\r\n     *\r\n     * --------------------------------------------------------------------------\r\n     * Copyright 2017 Mike Bostock\r\n     *\r\n     * Redistribution and use in source and binary forms, with or without\r\n     * modification, are permitted provided that the following conditions are met:\r\n     *\r\n     * 1. Redistributions of source code must retain the above copyright notice,\r\n     *    this list of conditions and the following disclaimer.\r\n     *\r\n     * 2. Redistributions in binary form must reproduce the above copyright\r\n     *    notice,this list of conditions and the following disclaimer in the\r\n     *    documentation and/or other materials provided with the distribution.\r\n     *\r\n     * 3. Neither the name of the copyright holder nor the names of its\r\n     *    contributors may be used to endorse or promote products derived from\r\n     *    this software without specific prior written permission.\r\n     *\r\n     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n     * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n     * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n     * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n     * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n     * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n     * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n     * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n     * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n     * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n     * POSSIBILITY OF SUCH DAMAGE.\r\n     * --------------------------------------------------------------------------\r\n     * @hidden\r\n     */\r\n    /**\r\n     * Treemap layout algorithm: binaryTree.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param parent  Data item\r\n     */\r\n    TreeMap.prototype.binaryTree = function (parent) {\r\n        var nodes = parent.children, i, n = nodes.length, sum, sums = new Array(n + 1);\r\n        for (sums[0] = sum = i = 0; i < n; ++i) {\r\n            sums[i + 1] = sum += nodes.getIndex(i).value;\r\n        }\r\n        partition(0, n, parent.value, parent.x0, parent.y0, parent.x1, parent.y1);\r\n        function partition(i, j, value, x0, y0, x1, y1) {\r\n            if (i >= j - 1) {\r\n                var node = nodes.getIndex(i);\r\n                node.x0 = x0;\r\n                node.y0 = y0;\r\n                node.x1 = x1;\r\n                node.y1 = y1;\r\n                return;\r\n            }\r\n            var valueOffset = sums[i], valueTarget = (value / 2) + valueOffset, k = i + 1, hi = j - 1;\r\n            while (k < hi) {\r\n                var mid = k + hi >>> 1;\r\n                if (sums[mid] < valueTarget) {\r\n                    k = mid + 1;\r\n                }\r\n                else {\r\n                    hi = mid;\r\n                }\r\n            }\r\n            if ((valueTarget - sums[k - 1]) < (sums[k] - valueTarget) && i + 1 < k) {\r\n                --k;\r\n            }\r\n            var valueLeft = sums[k] - valueOffset, valueRight = value - valueLeft;\r\n            if ((x1 - x0) > (y1 - y0)) {\r\n                var xk = (x0 * valueRight + x1 * valueLeft) / value;\r\n                partition(i, k, valueLeft, x0, y0, xk, y1);\r\n                partition(k, j, valueRight, xk, y0, x1, y1);\r\n            }\r\n            else {\r\n                var yk = (y0 * valueRight + y1 * valueLeft) / value;\r\n                partition(i, k, valueLeft, x0, y0, x1, yk);\r\n                partition(k, j, valueRight, x0, yk, x1, y1);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Treemap layout algorithm: slice.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param parent  Data item\r\n     */\r\n    TreeMap.prototype.slice = function (parent) {\r\n        var x0 = parent.x0;\r\n        var x1 = parent.x1;\r\n        var y0 = parent.y0;\r\n        var y1 = parent.y1;\r\n        var nodes = parent.children;\r\n        var node;\r\n        var i = -1;\r\n        var n = nodes.length;\r\n        var k = parent.value && (y1 - y0) / parent.value;\r\n        while (++i < n) {\r\n            node = nodes.getIndex(i);\r\n            node.x0 = x0;\r\n            node.x1 = x1;\r\n            node.y0 = y0;\r\n            y0 += node.value * k;\r\n            node.y1 = y0;\r\n        }\r\n    };\r\n    /**\r\n     * Treemap layout algorithm: dice.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param parent  Data item\r\n     */\r\n    TreeMap.prototype.dice = function (parent) {\r\n        var x0 = parent.x0;\r\n        var x1 = parent.x1;\r\n        var y0 = parent.y0;\r\n        var y1 = parent.y1;\r\n        var nodes = parent.children, node, i = -1, n = nodes.length, k = parent.value && (x1 - x0) / parent.value;\r\n        while (++i < n) {\r\n            node = nodes.getIndex(i);\r\n            node.y0 = y0;\r\n            node.y1 = y1;\r\n            node.x0 = x0;\r\n            x0 += node.value * k;\r\n            node.x1 = x0;\r\n        }\r\n    };\r\n    /**\r\n     * Treemap layout algorithm: slideDice.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param parent  Data item\r\n     */\r\n    TreeMap.prototype.sliceDice = function (parent) {\r\n        if (parent.level & 1) {\r\n            this.slice(parent);\r\n        }\r\n        else {\r\n            this.dice(parent);\r\n        }\r\n    };\r\n    /**\r\n     * Treemap layout algorithm: squarify.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param parent  Data item\r\n     */\r\n    TreeMap.prototype.squarify = function (parent) {\r\n        var ratio = (1 + Math.sqrt(5)) / 2;\r\n        var x0 = parent.x0;\r\n        var x1 = parent.x1;\r\n        var y0 = parent.y0;\r\n        var y1 = parent.y1;\r\n        var nodes = parent.children;\r\n        var nodeValue;\r\n        var i0 = 0;\r\n        var i1 = 0;\r\n        var n = nodes.length;\r\n        var dx;\r\n        var dy;\r\n        var value = parent.value;\r\n        var sumValue;\r\n        var minValue;\r\n        var maxValue;\r\n        var newRatio;\r\n        var minRatio;\r\n        var alpha;\r\n        var beta;\r\n        while (i0 < n) {\r\n            dx = x1 - x0;\r\n            dy = y1 - y0;\r\n            // Find the next non-empty node.\r\n            do {\r\n                sumValue = nodes.getIndex(i1++).value;\r\n            } while (!sumValue && i1 < n);\r\n            minValue = maxValue = sumValue;\r\n            alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\r\n            beta = sumValue * sumValue * alpha;\r\n            minRatio = Math.max(maxValue / beta, beta / minValue);\r\n            // Keep adding nodes while the aspect ratio maintains or improves.\r\n            for (; i1 < n; ++i1) {\r\n                sumValue += nodeValue = nodes.getIndex(i1).value;\r\n                if (nodeValue < minValue) {\r\n                    minValue = nodeValue;\r\n                }\r\n                if (nodeValue > maxValue) {\r\n                    maxValue = nodeValue;\r\n                }\r\n                beta = sumValue * sumValue * alpha;\r\n                newRatio = Math.max(maxValue / beta, beta / minValue);\r\n                if (newRatio > minRatio) {\r\n                    sumValue -= nodeValue;\r\n                    break;\r\n                }\r\n                minRatio = newRatio;\r\n            }\r\n            // Position and record the row orientation.\r\n            var row = this.dataItems.template.clone();\r\n            row.value = sumValue;\r\n            row.dice = dx < dy;\r\n            row.children = nodes.slice(i0, i1);\r\n            row.x0 = x0;\r\n            row.y0 = y0;\r\n            row.x1 = x1;\r\n            row.y1 = y1;\r\n            if (row.dice) {\r\n                row.y1 = value ? (y0 += (dy * sumValue) / value) : y1;\r\n                this.dice(row);\r\n            }\r\n            else {\r\n                row.x1 = value ? (x0 += (dx * sumValue) / value) : x1;\r\n                this.slice(row);\r\n            }\r\n            value -= sumValue;\r\n            i0 = i1;\r\n        }\r\n    };\r\n    TreeMap.prototype.handleSeriesAdded2 = function () {\r\n        // void\r\n    };\r\n    /**\r\n     * [handleDataItemValueChange description]\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     */\r\n    TreeMap.prototype.handleDataItemValueChange = function (dataItem, name) {\r\n        if (name == \"value\") {\r\n            this.invalidateDataItems();\r\n        }\r\n    };\r\n    TreeMap.prototype.handleDataItemWorkingValueChange = function (dataItem, name) {\r\n        if (name == \"value\") {\r\n            this.invalidateDataItems();\r\n        }\r\n    };\r\n    TreeMap.prototype.getLegendLevel = function (dataItem) {\r\n        if (!dataItem) {\r\n            return;\r\n        }\r\n        if (!dataItem.children) {\r\n            return;\r\n        }\r\n        if (dataItem.children.length > 1) {\r\n            return dataItem;\r\n        }\r\n        else if (dataItem.children.length == 1) {\r\n            return this.getLegendLevel(dataItem.children.getIndex(0));\r\n        }\r\n        else {\r\n            return dataItem;\r\n        }\r\n    };\r\n    /**\r\n     * Setups the legend to use the chart's data.\r\n     * @ignore\r\n     */\r\n    TreeMap.prototype.feedLegend = function () {\r\n        var legend = this.legend;\r\n        if (legend) {\r\n            legend.dataFields.name = \"name\";\r\n            var legendParent = this.getLegendLevel(this._homeDataItem);\r\n            if (legendParent) {\r\n                var legendData_1 = [];\r\n                legendParent.children.each(function (dataItem) {\r\n                    //if (!dataItem.hiddenInLegend) {\r\n                    legendData_1.push(dataItem);\r\n                    //}\r\n                });\r\n                legend.data = legendData_1;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    TreeMap.prototype.disposeData = function () {\r\n        _super.prototype.disposeData.call(this);\r\n        this._homeDataItem = undefined;\r\n        this.series.clear();\r\n        if (this.navigationBar) {\r\n            this.navigationBar.disposeData();\r\n        }\r\n        this.xAxis.disposeData();\r\n        this.yAxis.disposeData();\r\n    };\r\n    /**\r\n     * Since this chart uses hierarchical data, we need to remove childrent\r\n     * dataField from export of non-hierarchical formats such as CSV and XSLX.\r\n     *\r\n     * @return Export\r\n     */\r\n    TreeMap.prototype.getExporting = function () {\r\n        var _this = this;\r\n        var exporting = _super.prototype.getExporting.call(this);\r\n        exporting.adapter.add(\"formatDataFields\", function (info) {\r\n            if (info.format == \"csv\" || info.format == \"xlsx\") {\r\n                if ($type.hasValue(_this.dataFields.children)) {\r\n                    delete info.dataFields[_this.dataFields.children];\r\n                }\r\n            }\r\n            return info;\r\n        });\r\n        return exporting;\r\n    };\r\n    return TreeMap;\r\n}(XYChart));\r\nexport { TreeMap };\r\n/**\r\n * Register class, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"TreeMap\"] = TreeMap;\r\n//# sourceMappingURL=TreeMap.js.map","/**\r\n * Module, defining Axis Renderer for horizontal 3D axes.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRendererX } from \"../axes/AxisRendererX\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Renderer for horizontal 3D axis.\r\n *\r\n * @see {@link IAxisRendererX3DEvents} for a list of available events\r\n * @see {@link IAxisRendererX3DAdapters} for a list of available Adapters\r\n */\r\nvar AxisRendererX3D = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisRendererX3D, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Related axis\r\n     */\r\n    function AxisRendererX3D() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * A related chart.\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._chart = new MutableValueDisposer();\r\n        _this.className = \"AxisRendererX3D\";\r\n        _this._disposers.push(_this._chart);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Updates and positions a grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param grid         Grid element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererX3D.prototype.updateGridElement = function (grid, position, endPosition) {\r\n        position = position + (endPosition - position) * grid.location;\r\n        var point = this.positionToPoint(position);\r\n        if (grid.element) {\r\n            var dx = this.chart.dx3D || 0;\r\n            var dy = this.chart.dy3D || 0;\r\n            var h = this.getHeight();\r\n            grid.path = $path.moveTo({ x: dx, y: dy }) + $path.lineTo({ x: dx, y: h + dy }) + $path.lineTo({ x: 0, y: h });\r\n        }\r\n        this.positionItem(grid, point);\r\n        this.toggleVisibility(grid, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions the base grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererX3D.prototype.updateBaseGridElement = function () {\r\n        _super.prototype.updateBaseGridElement.call(this);\r\n        var h = this.getHeight();\r\n        var dx = this.chart.dx3D || 0;\r\n        var dy = this.chart.dy3D || 0;\r\n        this.baseGrid.path = $path.moveTo({ x: dx, y: dy }) + $path.lineTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: h });\r\n    };\r\n    Object.defineProperty(AxisRendererX3D.prototype, \"chart\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart.get();\r\n        },\r\n        /**\r\n         * Chart, associated with the Axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @param value Chart\r\n         */\r\n        set: function (chart) {\r\n            if (chart) {\r\n                this._chart.set(chart, chart.events.on(\"propertychanged\", this.handle3DChanged, this, false));\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Invoked when 3D-related settings change, like depth or angle.\r\n     *\r\n     * @param event Event\r\n     */\r\n    AxisRendererX3D.prototype.handle3DChanged = function (event) {\r\n        if (event.property == \"depth\" || event.property == \"angle\") {\r\n            this.invalidate();\r\n        }\r\n    };\r\n    return AxisRendererX3D;\r\n}(AxisRendererX));\r\nexport { AxisRendererX3D };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererX3D\"] = AxisRendererX3D;\r\n//# sourceMappingURL=AxisRendererX3D.js.map","/**\r\n * Module, defining Axis Renderer for vertical 3D axes.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRendererY } from \"../axes/AxisRendererY\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Renderer for vertical 3D axis.\r\n *\r\n * @see {@link IAxisRendererY3DEvents} for a list of available events\r\n * @see {@link IAxisRendererY3DAdapters} for a list of available Adapters\r\n */\r\nvar AxisRendererY3D = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AxisRendererY3D, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param axis Related axis\r\n     */\r\n    function AxisRendererY3D() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * A related chart.\r\n         *\r\n         * @todo Description\r\n         */\r\n        _this._chart = new MutableValueDisposer();\r\n        _this.className = \"AxisRendererY3D\";\r\n        _this._disposers.push(_this._chart);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Updates and positions a grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param grid         Grid element\r\n     * @param position     Starting position\r\n     * @param endPosition  End position\r\n     */\r\n    AxisRendererY3D.prototype.updateGridElement = function (grid, position, endPosition) {\r\n        position = position + (endPosition - position) * grid.location;\r\n        var point = this.positionToPoint(position);\r\n        if (grid.element) {\r\n            var dx = this.chart.dx3D || 0;\r\n            var dy = this.chart.dy3D || 0;\r\n            var w = this.getWidth();\r\n            grid.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: dx, y: dy }) + $path.lineTo({ x: w + dx, y: dy });\r\n        }\r\n        this.positionItem(grid, point);\r\n        this.toggleVisibility(grid, position, 0, 1);\r\n    };\r\n    /**\r\n     * Updates and positions the base grid element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    AxisRendererY3D.prototype.updateBaseGridElement = function () {\r\n        _super.prototype.updateBaseGridElement.call(this);\r\n        var dx = this.chart.dx3D || 0;\r\n        var dy = this.chart.dy3D || 0;\r\n        var w = this.getWidth();\r\n        this.baseGrid.path = $path.moveTo({ x: 0, y: 0 })\r\n            + $path.lineTo({ x: w, y: 0 })\r\n            + $path.lineTo({ x: w + dx, y: dy });\r\n    };\r\n    Object.defineProperty(AxisRendererY3D.prototype, \"chart\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart.get();\r\n        },\r\n        /**\r\n         * Chart, associated with the Axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @param value  Chart\r\n         */\r\n        set: function (chart) {\r\n            if (chart) {\r\n                this._chart.set(chart, chart.events.on(\"propertychanged\", this.handle3DChanged, this, false));\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Invoked when 3D-related settings change, like depth or angle.\r\n     *\r\n     * @param event Event\r\n     */\r\n    AxisRendererY3D.prototype.handle3DChanged = function (event) {\r\n        if (event.property == \"depth\" || event.property == \"angle\") {\r\n            this.invalidate();\r\n        }\r\n    };\r\n    return AxisRendererY3D;\r\n}(AxisRendererY));\r\nexport { AxisRendererY3D };\r\n//# sourceMappingURL=AxisRendererY3D.js.map","/**\r\n * Module that defines everything related to building 3D Columns.\r\n * It is a container which has column3D element which is a Rectangle3D.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Column } from \"./Column\";\r\nimport { Rectangle3D } from \"../../core/elements/3d/Rectangle3D\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates Column3Ds.\r\n *\r\n * @see {@link IColumn3DEvents} for a list of available events\r\n * @see {@link IColumn3DAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar Column3D = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Column3D, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Column3D() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"Column3D\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Column3D.prototype.createAssets = function () {\r\n        this.column3D = this.createChild(Rectangle3D);\r\n        this.column3D.shouldClone = false;\r\n        this.column3D.strokeOpacity = 0;\r\n        // some dirty hack so that if user access column, it won't get error\r\n        this.column = this.column3D;\r\n    };\r\n    /**\r\n     * @ignore Exclude from docs\r\n     */\r\n    Column3D.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        if (this.column3D) {\r\n            this.column3D.width = this.pixelWidth;\r\n            this.column3D.height = this.pixelHeight;\r\n            if (this.column3D.invalid) {\r\n                this.column3D.validate();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[Column3D]].\r\n     *\r\n     * @param source Source Column3D\r\n     */\r\n    Column3D.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.column3D) {\r\n            this.column3D.copyFrom(source.column3D);\r\n        }\r\n    };\r\n    /**\r\n     * Sets actual `fill` property on the SVG element, including applicable color\r\n     * modifiers.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param value  Fill\r\n     */\r\n    Column3D.prototype.setFill = function (value) {\r\n        _super.prototype.setFill.call(this, value);\r\n        this.column.fill = value;\r\n    };\r\n    return Column3D;\r\n}(Column));\r\nexport { Column3D };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Column3D\"] = Column3D;\r\n//# sourceMappingURL=Column3D.js.map","/**\r\n * 3D column series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ColumnSeries, ColumnSeriesDataItem } from \"../series/ColumnSeries\";\r\nimport { Column3D } from \"../elements/Column3D\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\nvar ColumnSeries3DDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ColumnSeries3DDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ColumnSeries3DDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ColumnSeries3DDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return ColumnSeries3DDataItem;\r\n}(ColumnSeriesDataItem));\r\nexport { ColumnSeries3DDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a 3D column graph.\r\n *\r\n * @see {@link IColumnSeries3DEvents} for a list of available Events\r\n * @see {@link IColumnSeries3DAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar ColumnSeries3D = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ColumnSeries3D, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ColumnSeries3D() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ColumnSeries3D\";\r\n        _this.columns.template.column3D.applyOnClones = true;\r\n        _this.columns.template.hiddenState.properties.visible = true;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ColumnSeries3D.prototype, \"columnsContainer\", {\r\n        /**\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            var chart = this.chart;\r\n            if (chart && chart.columnsContainer && chart.leftAxesContainer.layout != \"vertical\" && chart.rightAxesContainer.layout != \"vertical\" && chart.bottomAxesContainer.layout != \"horizontal\" && chart.topAxesContainer.layout != \"horizontal\") {\r\n                return chart.columnsContainer;\r\n            }\r\n            else {\r\n                return this._columnsContainer;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Validates data item's elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    ColumnSeries3D.prototype.validateDataElementReal = function (dataItem) {\r\n        _super.prototype.validateDataElementReal.call(this, dataItem);\r\n        if (dataItem.column) {\r\n            dataItem.column.dx = this.dx;\r\n            dataItem.column.dy = this.dy;\r\n        }\r\n    };\r\n    /**\r\n     * Validates data item's elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    ColumnSeries3D.prototype.validateDataElements = function () {\r\n        _super.prototype.validateDataElements.call(this);\r\n        if (this.chart) {\r\n            this.chart.invalidateLayout();\r\n        }\r\n    };\r\n    /**\r\n     * Returns an element to use for 3D bar.\r\n     * @ignore\r\n     * @return Element.\r\n     */\r\n    ColumnSeries3D.prototype.createColumnTemplate = function () {\r\n        return new Column3D();\r\n    };\r\n    Object.defineProperty(ColumnSeries3D.prototype, \"depth\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return Depth (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"depth\");\r\n        },\r\n        /**\r\n         * Depth (height) of the slices in the series in pixels.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @param value  Depth (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"depth\", value, true);\r\n            var template = this.columns.template; // todo: Cone is not Rectangle3D, maybe we should do some I3DShape?\r\n            template.column3D.depth = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSeries3D.prototype, \"angle\", {\r\n        /**\r\n         * @ignore Exclude from docs\r\n         * @return Angle (0-360)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"angle\");\r\n        },\r\n        /**\r\n         * Angle of view for the slices in series. (0-360)\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @param value  Angle (0-360)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"angle\", value);\r\n            var template = this.columns.template;\r\n            template.column3D.angle = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ColumnSeries3D;\r\n}(ColumnSeries));\r\nexport { ColumnSeries3D };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ColumnSeries3D\"] = ColumnSeries3D;\r\nregistry.registeredClasses[\"ColumnSeries3DDataItem\"] = ColumnSeries3DDataItem;\r\n//# sourceMappingURL=ColumnSeries3D.js.map","/**\r\n * Module for building 3D serial charts.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * Imports\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { XYChart, XYChartDataItem } from \"./XYChart\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { AxisRendererX3D } from \"../axes/AxisRendererX3D\";\r\nimport { AxisRendererY3D } from \"../axes/AxisRendererY3D\";\r\nimport { ColumnSeries3D } from \"../series/ColumnSeries3D\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[XYChart3D]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar XYChart3DDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYChart3DDataItem, _super);\r\n    function XYChart3DDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"XYChart3DDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return XYChart3DDataItem;\r\n}(XYChartDataItem));\r\nexport { XYChart3DDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a 3D XY chart.\r\n *\r\n * @see {@link IXYChart3DEvents} for a list of available Events\r\n * @see {@link IXYChart3DAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/xy-chart/} for documentation\r\n * @important\r\n */\r\nvar XYChart3D = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYChart3D, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function XYChart3D() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Type of the axis renderer to use for X axes.\r\n         */\r\n        _this._axisRendererX = AxisRendererX3D;\r\n        /**\r\n         * Type of the axis renderer to use for Y axes.\r\n         */\r\n        _this._axisRendererY = AxisRendererY3D;\r\n        _this.className = \"XYChart3D\";\r\n        // Set defaults\r\n        _this.depth = 30;\r\n        _this.angle = 30;\r\n        // Creeate container for columns\r\n        var columnsContainer = _this.seriesContainer.createChild(Container);\r\n        columnsContainer.shouldClone = false;\r\n        columnsContainer.isMeasured = false;\r\n        columnsContainer.layout = \"none\";\r\n        _this.columnsContainer = columnsContainer;\r\n        _this.columnsContainer.mask = _this.createChild(Sprite);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * This is done because for some reason IE doesn't change mask if path of a\r\n     * mask changes.\r\n     */\r\n    XYChart3D.prototype.updateSeriesMasks = function () {\r\n        _super.prototype.updateSeriesMasks.call(this);\r\n        if ($utils.isIE()) {\r\n            var columnsContainer = this.columnsContainer;\r\n            var mask = columnsContainer.mask;\r\n            columnsContainer.mask = undefined;\r\n            columnsContainer.mask = mask;\r\n        }\r\n    };\r\n    Object.defineProperty(XYChart3D.prototype, \"depth\", {\r\n        /**\r\n         * @return Depth (px)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"depth\");\r\n        },\r\n        /**\r\n         * Depth of the 3D chart / columns in pixels.\r\n         *\r\n         * @param value  Depth (px)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"depth\", value);\r\n            this.fixLayout();\r\n            this.invalidateDataUsers();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChart3D.prototype, \"angle\", {\r\n        /**\r\n         * @return Angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"angle\");\r\n        },\r\n        /**\r\n         * Angle the chart is viewed at.\r\n         *\r\n         * @todo Description (review)\r\n         * @param value  Angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"angle\", value);\r\n            this.fixLayout();\r\n            this.invalidateDataUsers();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChart3D.prototype, \"dx3D\", {\r\n        /**\r\n         * A calculated horizontal 3D offset (px).\r\n         *\r\n         * @readonly\r\n         * @return Offset (px)\r\n         */\r\n        get: function () {\r\n            return $math.cos(this.angle) * this.depth;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYChart3D.prototype, \"dy3D\", {\r\n        /**\r\n         * A calculated vertical 3D offset (px).\r\n         *\r\n         * @readonly\r\n         * @return Offset (px)\r\n         */\r\n        get: function () {\r\n            return -$math.sin(this.angle) * this.depth;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * (Re)validates layout\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYChart3D.prototype.validateLayout = function () {\r\n        _super.prototype.validateLayout.call(this);\r\n        this.fixColumns();\r\n    };\r\n    /**\r\n     * Updates the layout (padding and scrollbar positions) to accommodate for\r\n     * 3D depth and angle.\r\n     */\r\n    XYChart3D.prototype.fixLayout = function () {\r\n        this.chartContainer.marginTop = -this.dy3D;\r\n        this.chartContainer.paddingRight = this.dx3D;\r\n        if (this.scrollbarX) {\r\n            this.scrollbarX.dy = this.dy3D;\r\n            this.scrollbarX.dx = this.dx3D;\r\n        }\r\n        if (this.scrollbarY) {\r\n            this.scrollbarY.dy = this.dy3D;\r\n            this.scrollbarY.dx = this.dx3D;\r\n        }\r\n        this.fixColumns();\r\n        _super.prototype.fixLayout.call(this);\r\n    };\r\n    /**\r\n     * Updates column positions, offset and dimensions based on chart's angle\r\n     * and depth.\r\n     */\r\n    XYChart3D.prototype.fixColumns = function () {\r\n        var _this = this;\r\n        var count = 1;\r\n        var i = 0;\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            if (series instanceof ColumnSeries3D) {\r\n                if (!series.clustered && i > 0) {\r\n                    count++;\r\n                }\r\n                series.depthIndex = count - 1;\r\n                i++;\r\n            }\r\n        });\r\n        var s = 0;\r\n        $iter.each(this.series.iterator(), function (series) {\r\n            if (series instanceof ColumnSeries3D) {\r\n                series.depth = _this.depth / (count);\r\n                series.angle = _this.angle;\r\n                if (series.columnsContainer == _this.columnsContainer) {\r\n                    series.dx = _this.depth / (count) * $math.cos(_this.angle) * (series.depthIndex);\r\n                    series.dy = -_this.depth / (count) * $math.sin(_this.angle) * (series.depthIndex);\r\n                }\r\n                var inversed_1 = false;\r\n                if ((series.baseAxis == series.xAxis && series.xAxis.renderer.inversed) || (series.baseAxis == series.yAxis && series.yAxis.renderer.inversed)) {\r\n                    inversed_1 = true;\r\n                }\r\n                var i_1 = 1;\r\n                series.dataItems.each(function (dataItem) {\r\n                    var column = dataItem.column;\r\n                    if (column) {\r\n                        if (inversed_1) {\r\n                            column.zIndex = 1000 * (1000 - i_1) + s - series.depthIndex * 100;\r\n                        }\r\n                        else {\r\n                            column.zIndex = 1000 * i_1 + s - series.depthIndex * 100;\r\n                        }\r\n                        i_1++;\r\n                    }\r\n                });\r\n                if (inversed_1) {\r\n                    s--;\r\n                }\r\n                else {\r\n                    s++;\r\n                }\r\n            }\r\n        });\r\n        this.maskColumns();\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    XYChart3D.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Set up series\r\n            if ($type.hasValue(config.series) && $type.isArray(config.series)) {\r\n                for (var i = 0, len = config.series.length; i < len; i++) {\r\n                    config.series[i].type = config.series[i].type || \"ColumnSeries3D\";\r\n                }\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    XYChart3D.prototype.maskColumns = function () {\r\n        var w = this.plotContainer.pixelWidth;\r\n        var h = this.plotContainer.pixelHeight;\r\n        var dx = this.dx3D;\r\n        var dy = this.dy3D;\r\n        var path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: dx, y: dy }) + $path.lineTo({ x: w + dx, y: dy }) + $path.lineTo({ x: w + dx, y: h + dy }) + $path.lineTo({ x: w, y: h }) + $path.lineTo({ x: w, y: h }) + $path.lineTo({ x: 0, y: h }) + $path.closePath();\r\n        var columnsContainer = this.columnsContainer;\r\n        if (columnsContainer && columnsContainer.mask) {\r\n            columnsContainer.mask.path = path;\r\n        }\r\n    };\r\n    return XYChart3D;\r\n}(XYChart));\r\nexport { XYChart3D };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"XYChart3D\"] = XYChart3D;\r\n//# sourceMappingURL=XYChart3D.js.map","/**\r\n * HeatLegend module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { LinearGradient } from \"../../core/rendering/fills/LinearGradient\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { toColor, Color } from \"../../core/utils/Color\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { ValueAxis } from \"../../charts/axes/ValueAxis\";\r\nimport { AxisRendererX } from \"../../charts/axes/AxisRendererX\";\r\nimport { AxisRendererY } from \"../../charts/axes/AxisRendererY\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $colors from \"../../core/utils/Colors\";\r\nimport { RoundedRectangle } from \"../../core/elements/RoundedRectangle\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Sankey Diagram.\r\n *\r\n * @see {@link IHeatLegendEvents} for a list of available events\r\n * @see {@link IHeatLegendAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar HeatLegend = /** @class */ (function (_super) {\r\n    tslib_1.__extends(HeatLegend, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function HeatLegend() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"HeatLegend\";\r\n        _this.markerContainer = _this.createChild(Container);\r\n        _this.markerContainer.shouldClone = false;\r\n        _this.markerCount = 1;\r\n        // Create a template container and list for the a marker\r\n        var marker = new RoundedRectangle();\r\n        marker.minHeight = 20;\r\n        marker.minWidth = 20;\r\n        marker.interactionsEnabled = false;\r\n        marker.fillOpacity = 1;\r\n        marker.cornerRadius(0, 0, 0, 0);\r\n        _this.markerContainer.minHeight = 20;\r\n        _this.markerContainer.minWidth = 20;\r\n        _this.orientation = \"horizontal\";\r\n        _this.markers = new ListTemplate(marker);\r\n        _this._disposers.push(new ListDisposer(_this.markers));\r\n        _this._disposers.push(_this.markers.template);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    HeatLegend.prototype.getMinFromRules = function (property) {\r\n        var series = this.series;\r\n        if (series) {\r\n            var minValue_1;\r\n            $iter.eachContinue(series.heatRules.iterator(), function (heatRule) {\r\n                if (heatRule.property == property) {\r\n                    minValue_1 = heatRule.min;\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            return minValue_1;\r\n        }\r\n    };\r\n    HeatLegend.prototype.getMaxFromRules = function (property) {\r\n        var series = this.series;\r\n        if (series) {\r\n            var maxValue_1;\r\n            $iter.each(series.heatRules.iterator(), function (heatRule) {\r\n                if (heatRule.property == property) {\r\n                    maxValue_1 = heatRule.max;\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            return maxValue_1;\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    HeatLegend.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        this.valueAxis.renderer.inversed = this.reverseOrder;\r\n        var series = this.series;\r\n        var minColor = this.minColor;\r\n        var maxColor = this.maxColor;\r\n        if (!$type.hasValue(minColor)) {\r\n            minColor = toColor(this.getMinFromRules(\"fill\"));\r\n        }\r\n        if (!$type.hasValue(maxColor)) {\r\n            maxColor = toColor(this.getMaxFromRules(\"fill\"));\r\n        }\r\n        if (series) {\r\n            var seriesFill = series.fill;\r\n            if (!$type.hasValue(minColor) && seriesFill instanceof Color) {\r\n                minColor = seriesFill;\r\n            }\r\n            if (!$type.hasValue(maxColor) && seriesFill instanceof Color) {\r\n                maxColor = seriesFill;\r\n            }\r\n        }\r\n        if (!$type.hasValue(maxColor)) {\r\n            maxColor = toColor(this.getMaxFromRules(\"fill\"));\r\n        }\r\n        var minOpacity = $type.toNumber(this.getMinFromRules(\"fillOpacity\"));\r\n        if (!$type.isNumber(minOpacity)) {\r\n            minOpacity = 1;\r\n        }\r\n        var maxOpacity = $type.toNumber(this.getMaxFromRules(\"fillOpacity\"));\r\n        if (!$type.isNumber(maxOpacity)) {\r\n            maxOpacity = 1;\r\n        }\r\n        var minStrokeOpacity = $type.toNumber(this.getMinFromRules(\"strokeOpacity\"));\r\n        if (!$type.isNumber(minStrokeOpacity)) {\r\n            minStrokeOpacity = 1;\r\n        }\r\n        var maxStrokeOpacity = $type.toNumber(this.getMaxFromRules(\"strokeOpacity\"));\r\n        if (!$type.isNumber(maxStrokeOpacity)) {\r\n            maxStrokeOpacity = 1;\r\n        }\r\n        var minStroke = toColor(this.getMinFromRules(\"stroke\"));\r\n        var maxStroke = toColor(this.getMaxFromRules(\"stroke\"));\r\n        //if (series) {\r\n        for (var i = 0; i < this.markerCount; i++) {\r\n            var marker = this.markers.getIndex(i);\r\n            if (!marker) {\r\n                marker = this.markers.create();\r\n                marker.parent = this.markerContainer;\r\n                marker.height = percent(100);\r\n                marker.width = percent(100);\r\n            }\r\n            if (this.markerCount == 1) {\r\n                var gradient = new LinearGradient();\r\n                if (this.reverseOrder) {\r\n                    gradient.addColor(maxColor, maxOpacity);\r\n                    gradient.addColor(minColor, minOpacity);\r\n                }\r\n                else {\r\n                    gradient.addColor(minColor, minOpacity);\r\n                    gradient.addColor(maxColor, maxOpacity);\r\n                }\r\n                if (this.orientation == \"vertical\") {\r\n                    gradient.rotation = -90;\r\n                }\r\n                marker.fill = gradient;\r\n                if ($type.hasValue(minStroke) && $type.hasValue(maxStroke)) {\r\n                    var strokeGradient = new LinearGradient();\r\n                    if (this.reverseOrder) {\r\n                        strokeGradient.addColor(maxStroke, maxStrokeOpacity);\r\n                        strokeGradient.addColor(minStroke, minStrokeOpacity);\r\n                    }\r\n                    else {\r\n                        strokeGradient.addColor(minStroke, minStrokeOpacity);\r\n                        strokeGradient.addColor(maxStroke, maxStrokeOpacity);\r\n                    }\r\n                    if (this.orientation == \"vertical\") {\r\n                        strokeGradient.rotation = -90;\r\n                    }\r\n                    marker.stroke = strokeGradient;\r\n                }\r\n            }\r\n            else {\r\n                var c = i;\r\n                if (this.reverseOrder) {\r\n                    c = this.markerCount - i - 1;\r\n                }\r\n                var color = new Color($colors.interpolate(minColor.rgb, maxColor.rgb, c / this.markerCount));\r\n                marker.fill = color;\r\n                var opacity = minOpacity + (maxOpacity - minOpacity) * c / this.markerCount;\r\n                marker.fillOpacity = opacity;\r\n                if ($type.hasValue(minStroke) && $type.hasValue(maxStroke)) {\r\n                    var color_1 = new Color($colors.interpolate(minStroke.rgb, maxStroke.rgb, c / this.markerCount));\r\n                    marker.stroke = color_1;\r\n                    var opacity_1 = minStrokeOpacity + (maxStrokeOpacity - minStrokeOpacity) * c / this.markerCount;\r\n                    marker.strokeOpacity = opacity_1;\r\n                }\r\n            }\r\n        }\r\n        var renderer = this.valueAxis.renderer;\r\n        if (this.markerCount > 1) {\r\n            if (this.orientation == \"horizontal\") {\r\n                renderer.minGridDistance = this.measuredWidth / this.markerCount;\r\n            }\r\n            else {\r\n                renderer.minGridDistance = this.measuredHeight / this.markerCount;\r\n            }\r\n        }\r\n        this.valueAxis.invalidate();\r\n        for (var i = this.markerCount, len = this.markers.length; i < len; i++) {\r\n            this.markers.getIndex(i).parent = undefined;\r\n        }\r\n    };\r\n    Object.defineProperty(HeatLegend.prototype, \"minColor\", {\r\n        /**\r\n         * Returns minColor value\r\n         * @return {Color}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"minColor\");\r\n        },\r\n        /**\r\n         * Min color of a heat legend. If a series is set for the legend, minColor is taken from series.\r\n         *\r\n         * @param {Color}\r\n         */\r\n        set: function (value) {\r\n            if (!(value instanceof Color)) {\r\n                value = toColor(value);\r\n            }\r\n            this.setColorProperty(\"minColor\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeatLegend.prototype, \"maxColor\", {\r\n        /**\r\n         * Returns maxColor value\r\n         * @return {Color}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maxColor\");\r\n        },\r\n        /**\r\n         * Max color of a heat legend. If a series is set for the legend, maxColor is taken from series.\r\n         *\r\n         * @param {Color}\r\n         */\r\n        set: function (value) {\r\n            if (!$type.isObject(value)) {\r\n                value = toColor(value);\r\n            }\r\n            this.setColorProperty(\"maxColor\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeatLegend.prototype, \"markerCount\", {\r\n        /**\r\n         * Returns number of color squares (markers).\r\n         * @return {number}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"markerCount\");\r\n        },\r\n        /**\r\n         * Number of color squares (markers) in the heat legend. If only 1 marker is used, it will be filled with gradient.\r\n         *\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"markerCount\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeatLegend.prototype, \"minValue\", {\r\n        /**\r\n         * Returns minimum value of heat legend.\r\n         * @return {number}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"minValue\");\r\n        },\r\n        /**\r\n         * Minimum value of heat legend's value axis. If a series is set for the legend, min is taken from series.\r\n         *\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"minValue\", value);\r\n            this.valueAxis.min = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeatLegend.prototype, \"maxValue\", {\r\n        /**\r\n         * Returns maximum value of heat legend.\r\n         * @return {number}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maxValue\");\r\n        },\r\n        /**\r\n         * Maximum value of heat legend's value axis. If a series is set for the legend, max is taken from series.\r\n         *\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"maxValue\", value);\r\n            this.valueAxis.max = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeatLegend.prototype, \"orientation\", {\r\n        /**\r\n         * Returns orientation value.\r\n         *\r\n         * @return {\"horizontal\" | \"vertical\"}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"orientation\");\r\n        },\r\n        /**\r\n        * Heat legend orientation. Note, if you change orientation of a heat legend, you must set value axis renderer properties after that, as with orientation renderer changes.\r\n        *\r\n        * @param {\"horizontal\" | \"vertical\"}\r\n        */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"orientation\", value, true);\r\n            var markerContainer = this.markerContainer;\r\n            var valueAxis = this.valueAxis;\r\n            // HORIZONTAL\r\n            if (value == \"horizontal\") {\r\n                if (!$type.hasValue(this.width)) {\r\n                    this.width = 200;\r\n                }\r\n                this.height = undefined;\r\n                valueAxis.width = percent(100);\r\n                valueAxis.height = undefined;\r\n                valueAxis.tooltip.pointerOrientation = \"vertical\";\r\n                this.layout = \"vertical\";\r\n                markerContainer.width = percent(100);\r\n                markerContainer.height = undefined;\r\n                if (!(valueAxis.renderer instanceof AxisRendererX)) {\r\n                    valueAxis.renderer = new AxisRendererX();\r\n                }\r\n            }\r\n            // VERTICAL\r\n            else {\r\n                if (!$type.hasValue(this.height)) {\r\n                    this.height = 200;\r\n                }\r\n                this.width = undefined;\r\n                this.layout = \"horizontal\";\r\n                markerContainer.width = undefined;\r\n                markerContainer.height = percent(100);\r\n                valueAxis.height = percent(100);\r\n                valueAxis.width = undefined;\r\n                valueAxis.tooltip.pointerOrientation = \"horizontal\";\r\n                if (!(valueAxis.renderer instanceof AxisRendererY)) {\r\n                    valueAxis.renderer = new AxisRendererY();\r\n                }\r\n                valueAxis.renderer.inside = true;\r\n                valueAxis.renderer.labels.template.inside = true;\r\n                this.markerContainer.reverseOrder = true;\r\n            }\r\n            var renderer = valueAxis.renderer;\r\n            renderer.grid.template.disabled = true;\r\n            renderer.axisFills.template.disabled = true;\r\n            renderer.baseGrid.disabled = true;\r\n            renderer.labels.template.padding(2, 3, 2, 3);\r\n            renderer.minHeight = undefined;\r\n            renderer.minWidth = undefined;\r\n            this.markerContainer.layout = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeatLegend.prototype, \"valueAxis\", {\r\n        /**\r\n         * Returns valueAxis value.\r\n         * @return {ValueAxis}\r\n         */\r\n        get: function () {\r\n            if (!this._valueAxis) {\r\n                this.valueAxis = this.createChild(ValueAxis);\r\n                this.valueAxis.shouldClone = false;\r\n            }\r\n            return this._valueAxis;\r\n        },\r\n        /**\r\n         * Sets a value axis of heat legend. Value axis for heat legend is created automatically.\r\n         * @param {ValueAxis}\r\n         */\r\n        set: function (valueAxis) {\r\n            this._valueAxis = valueAxis;\r\n            valueAxis.parent = this;\r\n            valueAxis.strictMinMax = true;\r\n            this.orientation = this.orientation;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeatLegend.prototype, \"series\", {\r\n        /**\r\n         * Returns series value.\r\n         * @return {Series}\r\n         */\r\n        get: function () {\r\n            return this._series;\r\n        },\r\n        /**\r\n         * You can set series for heat legend. It will take min, max, minColor and maxColor values from this series.\r\n         * @param series\r\n         */\r\n        set: function (series) {\r\n            var _this = this;\r\n            this._series = series;\r\n            var dataField = \"value\";\r\n            try {\r\n                var dataFieldDefined = series.heatRules.getIndex(0).dataField;\r\n                if (dataFieldDefined) {\r\n                    dataField = dataFieldDefined;\r\n                }\r\n            }\r\n            catch (err) {\r\n            }\r\n            this.updateMinMax(series.dataItem.values[dataField].low, series.dataItem.values[dataField].high);\r\n            series.dataItem.events.on(\"calculatedvaluechanged\", function (event) {\r\n                _this.updateMinMax(series.dataItem.values[dataField].low, series.dataItem.values[dataField].high);\r\n            }, undefined, false);\r\n            series.heatRules.events.on(\"inserted\", this.invalidate, this, false);\r\n            series.heatRules.events.on(\"removed\", this.invalidate, this, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates min/max of value axis.\r\n     * @ignore\r\n     */\r\n    HeatLegend.prototype.updateMinMax = function (min, max) {\r\n        var valueAxis = this.valueAxis;\r\n        if (!$type.isNumber(this.minValue)) {\r\n            valueAxis.min = min;\r\n            valueAxis.invalidate();\r\n        }\r\n        if (!$type.isNumber(this.maxValue)) {\r\n            valueAxis.max = max;\r\n            valueAxis.invalidate();\r\n        }\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    HeatLegend.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Set up series\r\n            if ($type.hasValue(config.series) && $type.isString(config.series)) {\r\n                if ($type.isString(config.series)) {\r\n                    if (this.map.hasKey(config.series)) {\r\n                        config.series = this.map.getKey(config.series);\r\n                    }\r\n                    else {\r\n                        var seriesId_1 = config.series;\r\n                        var disposer_1 = this.map.events.on(\"insertKey\", function (ev) {\r\n                            if (ev.key == seriesId_1) {\r\n                                this.series = ev.newValue;\r\n                                disposer_1.dispose();\r\n                            }\r\n                        }, this);\r\n                        this._disposers.push(disposer_1);\r\n                        delete config.series;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    return HeatLegend;\r\n}(Container));\r\nexport { HeatLegend };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"HeatLegend\"] = HeatLegend;\r\n//# sourceMappingURL=HeatLegend.js.map","/**\r\n * Module that defines everything related to building Candlesticks.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Column } from \"./Column\";\r\nimport { Line } from \"../../core/elements/Line\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates Candlesticks.\r\n *\r\n * @see {@link ICandlestickEvents} for a list of available events\r\n * @see {@link ICandlestickAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar Candlestick = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Candlestick, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Candlestick() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"Candlestick\";\r\n        _this.layout = \"none\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Candlestick.prototype.createAssets = function () {\r\n        _super.prototype.createAssets.call(this);\r\n        this.lowLine = this.createChild(Line);\r\n        this.lowLine.shouldClone = false;\r\n        this.highLine = this.createChild(Line);\r\n        this.highLine.shouldClone = false;\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[Candlestick]].\r\n     *\r\n     * @param source Source Candlestick\r\n     */\r\n    Candlestick.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.lowLine) {\r\n            this.lowLine.copyFrom(source.lowLine);\r\n        }\r\n        if (this.highLine) {\r\n            this.highLine.copyFrom(source.highLine);\r\n        }\r\n    };\r\n    return Candlestick;\r\n}(Column));\r\nexport { Candlestick };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Candlestick\"] = Candlestick;\r\n//# sourceMappingURL=Candlestick.js.map","/**\r\n * Candlestick Series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ColumnSeries, ColumnSeriesDataItem } from \"./ColumnSeries\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { Candlestick } from \"../elements/Candlestick\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[CandlestickSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar CandlestickSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CandlestickSeriesDataItem, _super);\r\n    /**\r\n     * Defines a type of [[Component]] this data item is used for\r\n     * @todo Disabled to work around TS bug (see if we can re-enable it again)\r\n     */\r\n    //public _component!: CandlestickSeries;\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CandlestickSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.values.lowValueX = {};\r\n        _this.values.lowValueY = {};\r\n        _this.values.highValueX = {};\r\n        _this.values.highValueY = {};\r\n        _this.className = \"CandlestickSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CandlestickSeriesDataItem.prototype, \"lowValueX\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.lowValueX.value;\r\n        },\r\n        /**\r\n         * Low value for horizontal axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"lowValueX\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeriesDataItem.prototype, \"lowValueY\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.lowValueY.value;\r\n        },\r\n        /**\r\n         * Low value for vertical axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"lowValueY\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeriesDataItem.prototype, \"highValueX\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.highValueX.value;\r\n        },\r\n        /**\r\n         * High value for horizontal axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"highValueX\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeriesDataItem.prototype, \"highValueY\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.highValueY.value;\r\n        },\r\n        /**\r\n         * High value for vertical axis.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"highValueY\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeriesDataItem.prototype, \"closeValueX\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.valueX.value;\r\n        },\r\n        /**\r\n         * Close value for horizontal axis.\r\n         *\r\n         * This is an alias for `valueX` added for convenience only.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"valueX\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeriesDataItem.prototype, \"closeValueY\", {\r\n        /**\r\n         * @return Value\r\n         */\r\n        get: function () {\r\n            return this.values.valueY.value;\r\n        },\r\n        /**\r\n         * Close value for vertical axis.\r\n         *\r\n         * This is an alias for `valueX` added for convenience only.\r\n         *\r\n         * @param value  Value\r\n         */\r\n        set: function (value) {\r\n            this.setValue(\"valueY\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return CandlestickSeriesDataItem;\r\n}(ColumnSeriesDataItem));\r\nexport { CandlestickSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a candlestick graph.\r\n *\r\n * @see {@link ICandlestickSeriesEvents} for a list of available Events\r\n * @see {@link ICandlestickSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar CandlestickSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CandlestickSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CandlestickSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"CandlestickSeries\";\r\n        _this.groupFields.lowValueX = \"low\";\r\n        _this.groupFields.lowValueY = \"low\";\r\n        _this.groupFields.highValueX = \"high\";\r\n        _this.groupFields.highValueY = \"high\";\r\n        _this.strokeOpacity = 1;\r\n        var interfaceColors = new InterfaceColorSet();\r\n        var positiveColor = interfaceColors.getFor(\"positive\");\r\n        var negativeColor = interfaceColors.getFor(\"negative\");\r\n        _this.dropFromOpenState.properties.fill = negativeColor;\r\n        _this.dropFromOpenState.properties.stroke = negativeColor;\r\n        _this.riseFromOpenState.properties.fill = positiveColor;\r\n        _this.riseFromOpenState.properties.stroke = positiveColor;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    CandlestickSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Candlestick Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    CandlestickSeries.prototype.createDataItem = function () {\r\n        return new CandlestickSeriesDataItem();\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    CandlestickSeries.prototype.validateDataElementReal = function (dataItem) {\r\n        _super.prototype.validateDataElementReal.call(this, dataItem);\r\n        this.validateCandlestick(dataItem);\r\n    };\r\n    CandlestickSeries.prototype.validateCandlestick = function (dataItem) {\r\n        var column = dataItem.column;\r\n        if (column) {\r\n            var lowLine_1 = column.lowLine;\r\n            var highLine_1 = column.highLine;\r\n            if (this.baseAxis == this.xAxis) {\r\n                var x = column.pixelWidth / 2;\r\n                lowLine_1.x = x;\r\n                highLine_1.x = x;\r\n                var open_1 = dataItem.getWorkingValue(this.yOpenField);\r\n                var close_1 = dataItem.getWorkingValue(this.yField);\r\n                var yOpen = this.yAxis.getY(dataItem, this.yOpenField);\r\n                var yClose = this.yAxis.getY(dataItem, this.yField);\r\n                var yLow = this.yAxis.getY(dataItem, this.yLowField);\r\n                var yHigh = this.yAxis.getY(dataItem, this.yHighField);\r\n                var pixelY = column.pixelY;\r\n                lowLine_1.y1 = yLow - pixelY;\r\n                highLine_1.y1 = yHigh - pixelY;\r\n                if (open_1 < close_1) {\r\n                    lowLine_1.y2 = yOpen - pixelY;\r\n                    highLine_1.y2 = yClose - pixelY;\r\n                }\r\n                else {\r\n                    lowLine_1.y2 = yClose - pixelY;\r\n                    highLine_1.y2 = yOpen - pixelY;\r\n                }\r\n            }\r\n            if (this.baseAxis == this.yAxis) {\r\n                var y = column.pixelHeight / 2;\r\n                lowLine_1.y = y;\r\n                highLine_1.y = y;\r\n                var open_2 = dataItem.getWorkingValue(this.xOpenField);\r\n                var close_2 = dataItem.getWorkingValue(this.xField);\r\n                var xOpen = this.xAxis.getX(dataItem, this.xOpenField);\r\n                var xClose = this.xAxis.getX(dataItem, this.xField);\r\n                var xLow = this.xAxis.getX(dataItem, this.xLowField);\r\n                var xHigh = this.xAxis.getX(dataItem, this.xHighField);\r\n                var pixelX = column.pixelX;\r\n                lowLine_1.x1 = xLow - pixelX;\r\n                highLine_1.x1 = xHigh - pixelX;\r\n                if (open_2 < close_2) {\r\n                    lowLine_1.x2 = xOpen - pixelX;\r\n                    highLine_1.x2 = xClose - pixelX;\r\n                }\r\n                else {\r\n                    lowLine_1.x2 = xClose - pixelX;\r\n                    highLine_1.x2 = xOpen - pixelX;\r\n                }\r\n            }\r\n            $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n                // LOW LINE\r\n                var rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\r\n                if (rangeColumn) {\r\n                    var rangeLowLine = rangeColumn.lowLine;\r\n                    rangeLowLine.x = lowLine_1.x;\r\n                    rangeLowLine.y = lowLine_1.y;\r\n                    rangeLowLine.x1 = lowLine_1.x1;\r\n                    rangeLowLine.x2 = lowLine_1.x2;\r\n                    rangeLowLine.y1 = lowLine_1.y1;\r\n                    rangeLowLine.y2 = lowLine_1.y2;\r\n                    // HIGH LINE\r\n                    var rangehighLine = rangeColumn.highLine;\r\n                    rangehighLine.x = highLine_1.x;\r\n                    rangehighLine.y = highLine_1.y;\r\n                    rangehighLine.x1 = highLine_1.x1;\r\n                    rangehighLine.x2 = highLine_1.x2;\r\n                    rangehighLine.y1 = highLine_1.y1;\r\n                    rangehighLine.y2 = highLine_1.y2;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Object.defineProperty(CandlestickSeries.prototype, \"xLowField\", {\r\n        /**\r\n         * A data field to look for \"low\" value for horizontal axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Field name\r\n         */\r\n        get: function () {\r\n            return this._xLowField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeries.prototype, \"yLowField\", {\r\n        /**\r\n         * A data field to look for \"low\" value for vertical axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Field name\r\n         */\r\n        get: function () {\r\n            return this._yLowField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeries.prototype, \"xHighField\", {\r\n        /**\r\n         * A data field to look for \"high\" value for horizontal axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Field name\r\n         */\r\n        get: function () {\r\n            return this._xHighField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CandlestickSeries.prototype, \"yHighField\", {\r\n        /**\r\n         * A data field to look for \"high\" value for vertical axis.\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Field name\r\n         */\r\n        get: function () {\r\n            return this._yHighField;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Sets up which data fields to use for data access.\r\n     */\r\n    CandlestickSeries.prototype.defineFields = function () {\r\n        _super.prototype.defineFields.call(this);\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (xAxis && yAxis) {\r\n            if (this.baseAxis == xAxis) {\r\n                var yAxisFieldName = $utils.capitalize(yAxis.axisFieldName);\r\n                this._yLowField = (\"low\" + yAxisFieldName + \"Y\");\r\n                this._yHighField = (\"high\" + yAxisFieldName + \"Y\");\r\n            }\r\n            if (this.baseAxis == yAxis) {\r\n                var xAxisFieldName = $utils.capitalize(xAxis.axisFieldName);\r\n                this._xLowField = (\"low\" + xAxisFieldName + \"X\");\r\n                this._xHighField = (\"high\" + xAxisFieldName + \"X\");\r\n            }\r\n            this.addValueField(xAxis, this._xValueFields, this._xLowField);\r\n            this.addValueField(xAxis, this._xValueFields, this._xHighField);\r\n            this.addValueField(yAxis, this._yValueFields, this._yLowField);\r\n            this.addValueField(yAxis, this._yValueFields, this._yHighField);\r\n        }\r\n    };\r\n    /**\r\n     * Creates elements in related legend container, that mimics the look of this\r\n     * Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Legend item container\r\n     */\r\n    CandlestickSeries.prototype.createLegendMarker = function (marker) {\r\n        var w = marker.pixelWidth;\r\n        var h = marker.pixelHeight;\r\n        marker.removeChildren();\r\n        var column = marker.createChild(Candlestick);\r\n        column.shouldClone = false;\r\n        column.copyFrom(this.columns.template);\r\n        var cw;\r\n        var ch;\r\n        var highLine = column.lowLine;\r\n        var lowLine = column.highLine;\r\n        if (this.baseAxis == this.yAxis) {\r\n            cw = w / 3;\r\n            ch = h;\r\n            highLine.y = h / 2;\r\n            lowLine.y = h / 2;\r\n            highLine.x2 = w / 3;\r\n            lowLine.x2 = w / 3;\r\n            lowLine.x = w / 3 * 2;\r\n            column.column.x = w / 3;\r\n        }\r\n        else {\r\n            cw = w;\r\n            ch = h / 3;\r\n            highLine.x = w / 2;\r\n            lowLine.x = w / 2;\r\n            highLine.y2 = h / 3;\r\n            lowLine.y2 = h / 3;\r\n            lowLine.y = h / 3 * 2;\r\n            column.column.y = h / 3;\r\n        }\r\n        column.width = cw;\r\n        column.height = ch;\r\n        $object.copyProperties(this, marker, visualProperties);\r\n        $object.copyProperties(this.columns.template, column, visualProperties);\r\n        column.stroke = this.riseFromOpenState.properties.stroke;\r\n        column.fill = column.stroke;\r\n        var legendDataItem = marker.dataItem;\r\n        legendDataItem.color = column.fill;\r\n        legendDataItem.colorOrig = column.fill;\r\n    };\r\n    /**\r\n     * Returns an element to use for Candlestick\r\n     * @ignore\r\n     * @return Element.\r\n     */\r\n    CandlestickSeries.prototype.createColumnTemplate = function () {\r\n        return new Candlestick();\r\n    };\r\n    return CandlestickSeries;\r\n}(ColumnSeries));\r\nexport { CandlestickSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"CandlestickSeries\"] = CandlestickSeries;\r\nregistry.registeredClasses[\"CandlestickSeriesDataItem\"] = CandlestickSeriesDataItem;\r\n//# sourceMappingURL=CandlestickSeries.js.map","/**\r\n * Module that defines everything related to building OHLCs.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Candlestick } from \"./Candlestick\";\r\nimport { Line } from \"../../core/elements/Line\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates OHLCs.\r\n *\r\n * @see {@link IOHLCEvents} for a list of available events\r\n * @see {@link IOHLCAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar OHLC = /** @class */ (function (_super) {\r\n    tslib_1.__extends(OHLC, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function OHLC() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"OHLC\";\r\n        _this.layout = \"none\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    OHLC.prototype.createAssets = function () {\r\n        //super.createAssets();\r\n        this.openLine = this.createChild(Line);\r\n        this.openLine.shouldClone = false;\r\n        this.highLowLine = this.createChild(Line);\r\n        this.highLowLine.shouldClone = false;\r\n        this.closeLine = this.createChild(Line);\r\n        this.closeLine.shouldClone = false;\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[OHLC]].\r\n     *\r\n     * @param source Source OHLC\r\n     */\r\n    OHLC.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.openLine) {\r\n            this.openLine.copyFrom(source.openLine);\r\n        }\r\n        if (this.highLowLine) {\r\n            this.highLowLine.copyFrom(source.highLowLine);\r\n        }\r\n        if (this.closeLine) {\r\n            this.closeLine.copyFrom(source.closeLine);\r\n        }\r\n    };\r\n    return OHLC;\r\n}(Candlestick));\r\nexport { OHLC };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"OHLC\"] = OHLC;\r\n//# sourceMappingURL=OHLC.js.map","/**\r\n * Candlestick Series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { CandlestickSeries, CandlestickSeriesDataItem } from \"./CandlestickSeries\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { OHLC } from \"../elements/OHLC\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[OHLCSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar OHLCSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(OHLCSeriesDataItem, _super);\r\n    /**\r\n     * Defines a type of [[Component]] this data item is used for\r\n     * @todo Disabled to work around TS bug (see if we can re-enable it again)\r\n     */\r\n    //public _component!: OHLCSeries;\r\n    /**\r\n     * Constructor\r\n     */\r\n    function OHLCSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"OHLCSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return OHLCSeriesDataItem;\r\n}(CandlestickSeriesDataItem));\r\nexport { OHLCSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a candlestick graph.\r\n *\r\n * @see {@link IOHLCSeriesEvents} for a list of available Events\r\n * @see {@link IOHLCSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar OHLCSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(OHLCSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function OHLCSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"OHLCSeries\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    OHLCSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"OHLC Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    OHLCSeries.prototype.createDataItem = function () {\r\n        return new OHLCSeriesDataItem();\r\n    };\r\n    OHLCSeries.prototype.validateCandlestick = function (dataItem) {\r\n        var column = dataItem.column;\r\n        if (column) {\r\n            var openLine_1 = column.openLine;\r\n            var highLowLine_1 = column.highLowLine;\r\n            var closeLine_1 = column.closeLine;\r\n            if (this.baseAxis == this.xAxis) {\r\n                var x = column.pixelWidth / 2;\r\n                highLowLine_1.x = x;\r\n                // TODO can these be removed ?\r\n                dataItem.getWorkingValue(this.yOpenField);\r\n                dataItem.getWorkingValue(this.yField);\r\n                var yOpen = this.yAxis.getY(dataItem, this.yOpenField);\r\n                var yClose = this.yAxis.getY(dataItem, this.yField);\r\n                var yLow = this.yAxis.getY(dataItem, this.yLowField);\r\n                var yHigh = this.yAxis.getY(dataItem, this.yHighField);\r\n                var pixelY = column.pixelY;\r\n                openLine_1.y1 = yOpen - pixelY;\r\n                openLine_1.y2 = yOpen - pixelY;\r\n                openLine_1.x1 = 0;\r\n                openLine_1.x2 = x;\r\n                closeLine_1.y1 = yClose - pixelY;\r\n                closeLine_1.y2 = yClose - pixelY;\r\n                closeLine_1.x1 = x;\r\n                closeLine_1.x2 = 2 * x;\r\n                highLowLine_1.y1 = yHigh - pixelY;\r\n                highLowLine_1.y2 = yLow - pixelY;\r\n            }\r\n            if (this.baseAxis == this.yAxis) {\r\n                var y = column.pixelHeight / 2;\r\n                highLowLine_1.y = y;\r\n                // TODO can these be removed ?\r\n                dataItem.getWorkingValue(this.xOpenField);\r\n                dataItem.getWorkingValue(this.xField);\r\n                var xOpen = this.xAxis.getX(dataItem, this.xOpenField);\r\n                var xClose = this.xAxis.getX(dataItem, this.xField);\r\n                var xLow = this.xAxis.getX(dataItem, this.xLowField);\r\n                var xHigh = this.xAxis.getX(dataItem, this.xHighField);\r\n                var pixelX = column.pixelX;\r\n                openLine_1.x1 = xOpen - pixelX;\r\n                openLine_1.x2 = xOpen - pixelX;\r\n                openLine_1.y1 = y;\r\n                openLine_1.y2 = 2 * y;\r\n                closeLine_1.x1 = xClose - pixelX;\r\n                closeLine_1.x2 = xClose - pixelX;\r\n                closeLine_1.y1 = 0;\r\n                closeLine_1.y2 = y;\r\n                highLowLine_1.x1 = xHigh - pixelX;\r\n                highLowLine_1.x2 = xLow - pixelX;\r\n            }\r\n            $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n                var rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\r\n                if (rangeColumn) {\r\n                    var rangeOpenLine = rangeColumn.openLine;\r\n                    rangeOpenLine.x = openLine_1.x;\r\n                    rangeOpenLine.y = openLine_1.y;\r\n                    rangeOpenLine.x1 = openLine_1.x1;\r\n                    rangeOpenLine.x2 = openLine_1.x2;\r\n                    rangeOpenLine.y1 = openLine_1.y1;\r\n                    rangeOpenLine.y2 = openLine_1.y2;\r\n                    var rangeCloseLine = rangeColumn.closeLine;\r\n                    rangeCloseLine.x = closeLine_1.x;\r\n                    rangeCloseLine.y = closeLine_1.y;\r\n                    rangeCloseLine.x1 = closeLine_1.x1;\r\n                    rangeCloseLine.x2 = closeLine_1.x2;\r\n                    rangeCloseLine.y1 = closeLine_1.y1;\r\n                    rangeCloseLine.y2 = closeLine_1.y2;\r\n                    var rangeHighLowLine = rangeColumn.highLowLine;\r\n                    rangeHighLowLine.x = highLowLine_1.x;\r\n                    rangeHighLowLine.y = highLowLine_1.y;\r\n                    rangeHighLowLine.x1 = highLowLine_1.x1;\r\n                    rangeHighLowLine.x2 = highLowLine_1.x2;\r\n                    rangeHighLowLine.y1 = highLowLine_1.y1;\r\n                    rangeHighLowLine.y2 = highLowLine_1.y2;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Creates elements in related legend container, that mimics the look of this\r\n     * Series.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param marker  Legend item container\r\n     */\r\n    OHLCSeries.prototype.createLegendMarker = function (marker) {\r\n        var w = marker.pixelWidth;\r\n        var h = marker.pixelHeight;\r\n        marker.removeChildren();\r\n        var column = marker.createChild(OHLC);\r\n        column.shouldClone = false;\r\n        column.copyFrom(this.columns.template);\r\n        var cw;\r\n        var ch;\r\n        var openLine = column.openLine;\r\n        var closeLine = column.closeLine;\r\n        var highLowLine = column.highLowLine;\r\n        if (this.baseAxis == this.yAxis) {\r\n            cw = w / 3;\r\n            ch = h;\r\n            highLowLine.y = h / 2;\r\n            highLowLine.x2 = w;\r\n            openLine.x = w / 3 * 2;\r\n            openLine.y2 = h / 2;\r\n            closeLine.x = w / 3;\r\n            closeLine.y2 = h;\r\n            closeLine.y1 = h / 2;\r\n        }\r\n        else {\r\n            cw = w;\r\n            ch = h / 3;\r\n            highLowLine.x = w / 2;\r\n            highLowLine.y2 = h;\r\n            openLine.y = h / 3 * 2;\r\n            openLine.x2 = w / 2;\r\n            closeLine.y = h / 3;\r\n            closeLine.x2 = w;\r\n            closeLine.x1 = w / 2;\r\n        }\r\n        column.width = cw;\r\n        column.height = ch;\r\n        $object.copyProperties(this, marker, visualProperties);\r\n        $object.copyProperties(this.columns.template, column, visualProperties);\r\n        column.stroke = this.riseFromOpenState.properties.stroke;\r\n        var legendDataItem = marker.dataItem;\r\n        legendDataItem.color = column.stroke;\r\n        legendDataItem.colorOrig = column.stroke;\r\n    };\r\n    /**\r\n     * Returns an element to use for Candlestick\r\n     * @ignore\r\n     * @return Element.\r\n     */\r\n    OHLCSeries.prototype.createColumnTemplate = function () {\r\n        return new OHLC();\r\n    };\r\n    return OHLCSeries;\r\n}(CandlestickSeries));\r\nexport { OHLCSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"OHLCSeries\"] = OHLCSeries;\r\nregistry.registeredClasses[\"OHLCSeriesDataItem\"] = OHLCSeriesDataItem;\r\n//# sourceMappingURL=OHLCSeries.js.map","/**\r\n * Line series segment module.\r\n * @todo Add description about what this is\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { LineSeriesSegment } from \"./LineSeriesSegment\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Represents a line series segment.\r\n *\r\n * A line segment can be used to apply different properties to a part of the\r\n * line series, between two data points.\r\n *\r\n * @see {@link IStepLineSeriesSegmentEvents} for a list of available events\r\n * @see {@link IStepLineSeriesSegmentAdapters} for a list of available Adapters\r\n * @todo Example\r\n */\r\nvar StepLineSeriesSegment = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StepLineSeriesSegment, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function StepLineSeriesSegment() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"StepLineSeriesSegment\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * Draws the series segment.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param points       Points to connect\r\n     * @param closePoints  ?\r\n     * @param smoothnessX  Horizontal bezier setting (?)\r\n     * @param smoothnessY  Vertical bezier setting (?)\r\n     */\r\n    StepLineSeriesSegment.prototype.drawSegment = function (points, closePoints, smoothnessX, smoothnessY, noRisers, vertical) {\r\n        if (points.length > 0 && closePoints.length > 0) {\r\n            if (noRisers) {\r\n                var path = $path.moveTo(points[0]);\r\n                if (points.length > 0) {\r\n                    for (var i = 1; i < points.length; i++) {\r\n                        var point = points[i];\r\n                        if (i / 2 == Math.round(i / 2)) {\r\n                            path += $path.moveTo(point);\r\n                        }\r\n                        else {\r\n                            path += $path.lineTo(point);\r\n                        }\r\n                    }\r\n                }\r\n                this.strokeSprite.path = path;\r\n                if (this.fillOpacity > 0 || this.fillSprite.fillOpacity > 0) { // helps to avoid drawing fill object if fill is not visible\r\n                    path = $path.moveTo(points[0]) + $path.polyline(points);\r\n                    path += $path.lineTo(closePoints[0]) + $path.polyline(closePoints);\r\n                    path += $path.lineTo(points[0]);\r\n                    path += $path.closePath();\r\n                    this.fillSprite.path = path;\r\n                }\r\n                else {\r\n                }\r\n            }\r\n            else {\r\n                var path = $path.moveTo(points[0]) + $path.polyline(points);\r\n                this.strokeSprite.path = path;\r\n                if (this.fillOpacity > 0 || this.fillSprite.fillOpacity > 0) { // helps to avoid drawing fill object if fill is not visible\r\n                    path += $path.lineTo(closePoints[0]) + $path.polyline(closePoints);\r\n                    path += $path.lineTo(points[0]);\r\n                    path += $path.closePath();\r\n                    this.fillSprite.path = path;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return StepLineSeriesSegment;\r\n}(LineSeriesSegment));\r\nexport { StepLineSeriesSegment };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"StepLineSeriesSegment\"] = StepLineSeriesSegment;\r\n//# sourceMappingURL=StepLineSeriesSegment.js.map","/**\r\n * Step line series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { LineSeries, LineSeriesDataItem } from \"./LineSeries\";\r\nimport { StepLineSeriesSegment } from \"./StepLineSeriesSegment\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[StepLineSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar StepLineSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StepLineSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function StepLineSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"StepLineSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return StepLineSeriesDataItem;\r\n}(LineSeriesDataItem));\r\nexport { StepLineSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a step line graph.\r\n *\r\n * @see {@link IStepLineSeriesEvents} for a list of available Events\r\n * @see {@link IStepLineSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar StepLineSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StepLineSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function StepLineSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"StepLineSeries\";\r\n        _this.applyTheme();\r\n        _this.startLocation = 0;\r\n        _this.endLocation = 1;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    StepLineSeries.prototype.createDataItem = function () {\r\n        return new StepLineSeriesDataItem();\r\n    };\r\n    /**\r\n     * [addPoints description]\r\n     *\r\n     * @todo Description\r\n     * @param points     [description]\r\n     * @param dataItem   [description]\r\n     * @param xField     [description]\r\n     * @param yField     [description]\r\n     * @param backwards  [description]\r\n     */\r\n    StepLineSeries.prototype.addPoints = function (points, dataItem, xField, yField, backwards) {\r\n        var startLocationX;\r\n        var endLocationX;\r\n        var startLocationY;\r\n        var endLocationY;\r\n        if (this.baseAxis == this.xAxis) {\r\n            startLocationX = this.startLocation;\r\n            endLocationX = this.endLocation;\r\n            startLocationY = this.getAdjustedXLocation(dataItem, this.yOpenField);\r\n            endLocationY = this.getAdjustedXLocation(dataItem, this.yField);\r\n        }\r\n        if (this.baseAxis == this.yAxis) {\r\n            startLocationY = this.startLocation;\r\n            endLocationY = this.endLocation;\r\n            startLocationX = this.getAdjustedXLocation(dataItem, this.xOpenField);\r\n            endLocationX = this.getAdjustedXLocation(dataItem, this.xField);\r\n        }\r\n        var x0 = this.xAxis.getX(dataItem, xField, startLocationX);\r\n        var y0 = this.yAxis.getY(dataItem, yField, startLocationY);\r\n        var x1 = this.xAxis.getX(dataItem, xField, endLocationX);\r\n        var y1 = this.yAxis.getY(dataItem, yField, endLocationY);\r\n        x0 = $math.fitToRange(x0, -100000, 100000); // from geometric point of view this is not right, but practically it's ok. this is done to avoid too big objects.\r\n        y0 = $math.fitToRange(y0, -100000, 100000); // from geometric point of view this is not right, but practically it's ok. this is done to avoid too big objects.\r\n        x1 = $math.fitToRange(x1, -100000, 100000); // from geometric point of view this is not right, but practically it's ok. this is done to avoid too big objects.\r\n        y1 = $math.fitToRange(y1, -100000, 100000); // from geometric point of view this is not right, but practically it's ok. this is done to avoid too big objects.\r\n        // this might make an impression that points are duplicated, and they indeed are, but this is needed to handle gaps in data\r\n        if (!this.noRisers) {\r\n            if (points.length > 1) {\r\n                var prevPoint = points[points.length - 1];\r\n                if (this.baseAxis == this.xAxis) {\r\n                    if (backwards) {\r\n                        points.push({ x: prevPoint.x, y: y1 });\r\n                    }\r\n                    else {\r\n                        points.push({ x: x0, y: prevPoint.y });\r\n                    }\r\n                }\r\n                if (this.baseAxis == this.yAxis) {\r\n                    if (backwards) {\r\n                        points.push({ x: x1, y: prevPoint.y });\r\n                    }\r\n                    else {\r\n                        points.push({ x: prevPoint.x, y: y0 });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var point0 = { x: x0, y: y0 };\r\n        var point1 = { x: x1, y: y1 };\r\n        if (backwards) {\r\n            points.push(point1, point0);\r\n        }\r\n        else {\r\n            points.push(point0, point1);\r\n        }\r\n    };\r\n    /**\r\n     * Draws the line segment.\r\n     *\r\n     * @param segment     Segment\r\n     * @param points      Segment points\r\n     * @param closePoints Segment close points\r\n     */\r\n    StepLineSeries.prototype.drawSegment = function (segment, points, closePoints) {\r\n        var vertical = false;\r\n        if (this.yAxis == this.baseAxis) {\r\n            vertical = true;\r\n        }\r\n        segment.drawSegment(points, closePoints, this.tensionX, this.tensionY, this.noRisers, vertical);\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    StepLineSeries.prototype.createSegment = function () {\r\n        return new StepLineSeriesSegment();\r\n    };\r\n    Object.defineProperty(StepLineSeries.prototype, \"noRisers\", {\r\n        /**\r\n         * @return No risers\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"noRisers\");\r\n        },\r\n        /**\r\n         * Specifies if step line series should draw only horizontal (or only\r\n         * vertical, depending on base axis) lines, instead of connecting them with\r\n         * vertical (or horizontal) lines.\r\n         *\r\n         * @default false\r\n         * @param value  No risers\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"noRisers\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StepLineSeries.prototype, \"startLocation\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startLocation\");\r\n        },\r\n        /**\r\n         * start location of the step\r\n         *\r\n         * @param value Location (0-1)\r\n         * @default 0\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startLocation\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StepLineSeries.prototype, \"endLocation\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endLocation\");\r\n        },\r\n        /**\r\n         * Step end location.\r\n         *\r\n         * @param value Location (0-1)\r\n         * #default 1\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endLocation\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return StepLineSeries;\r\n}(LineSeries));\r\nexport { StepLineSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"StepLineSeries\"] = StepLineSeries;\r\nregistry.registeredClasses[\"StepLineSeriesDataItem\"] = StepLineSeriesDataItem;\r\n//# sourceMappingURL=StepLineSeries.js.map","/**\r\n * Module that defines everything related to building RadarColumns.\r\n * It is a container which has radarColumn element which is a Slice.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Column } from \"./Column\";\r\nimport { Slice } from \"../../core/elements/Slice\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates RadarColumns.\r\n *\r\n * @see {@link IRadarColumnEvents} for a list of available events\r\n * @see {@link IRadarColumnAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar RadarColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarColumn, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarColumn() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"RadarColumn\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    RadarColumn.prototype.createAssets = function () {\r\n        this.radarColumn = this.createChild(Slice);\r\n        this.radarColumn.shouldClone = false;\r\n        this.radarColumn.strokeOpacity = undefined;\r\n        // some dirty hack so that if user access column, it won't get error\r\n        this.column = this.radarColumn;\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[RadarColumn]].\r\n     *\r\n     * @param source Source RadarColumn\r\n     */\r\n    RadarColumn.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.radarColumn) {\r\n            this.radarColumn.copyFrom(source.radarColumn);\r\n        }\r\n    };\r\n    /**\r\n     * X coordinate for the slice tooltip.\r\n     *\r\n     * @return X\r\n     * @ignore\r\n     */\r\n    RadarColumn.prototype.getTooltipX = function () {\r\n        var value = this.getPropertyValue(\"tooltipX\");\r\n        if (!$type.isNumber(value)) {\r\n            return this.radarColumn.getTooltipX();\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * Y coordinate for the slice tooltip.\r\n     *\r\n     * @return Y\r\n     * @ignore\r\n     */\r\n    RadarColumn.prototype.getTooltipY = function () {\r\n        var value = this.getPropertyValue(\"tooltipX\");\r\n        if (!$type.isNumber(value)) {\r\n            return this.radarColumn.getTooltipY();\r\n        }\r\n        return value;\r\n    };\r\n    return RadarColumn;\r\n}(Column));\r\nexport { RadarColumn };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"RadarColumn\"] = RadarColumn;\r\n//# sourceMappingURL=RadarColumn.js.map","/**\r\n * Radar column series module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ColumnSeries, ColumnSeriesDataItem } from \"../series/ColumnSeries\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { RadarColumn } from \"../elements/RadarColumn\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport { Percent } from \"../../core/utils/Percent\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $array from \"../../core/utils/Array\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[RadarColumnSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar RadarColumnSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarColumnSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarColumnSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ColumnSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return RadarColumnSeriesDataItem;\r\n}(ColumnSeriesDataItem));\r\nexport { RadarColumnSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a 3D column graph.\r\n *\r\n * @see {@link IRadarColumnSeriesEvents} for a list of available Events\r\n * @see {@link IRadarColumnSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar RadarColumnSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarColumnSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarColumnSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"RadarColumnSeries\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Creates and returns a RadarColumn element to use as column in radar chart.\r\n     *\r\n     * @return RadarColumn.\r\n     */\r\n    RadarColumnSeries.prototype.createColumnTemplate = function () {\r\n        return new RadarColumn();\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    RadarColumnSeries.prototype.validate = function () {\r\n        // so that radius would be updated\r\n        if (this.chart.invalid) {\r\n            this.chart.validate();\r\n        }\r\n        _super.prototype.validate.call(this);\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    RadarColumnSeries.prototype.disableUnusedColumns = function (dataItem) {\r\n        if (dataItem) {\r\n            if (dataItem.column) {\r\n                dataItem.column.__disabled = true;\r\n            }\r\n            $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n                var rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\r\n                if (rangeColumn) {\r\n                    rangeColumn.__disabled = true;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    RadarColumnSeries.prototype.validateDataElementReal = function (dataItem) {\r\n        var _this = this;\r\n        var startAngle = this.chart.startAngle;\r\n        var endAngle = this.chart.endAngle;\r\n        var yField = this.yField;\r\n        var yOpenField = this.yOpenField;\r\n        var xField = this.xField;\r\n        var xOpenField = this.xOpenField;\r\n        var lAngle;\r\n        var rAngle;\r\n        var tRadius;\r\n        var bRadius;\r\n        var startLocation = this.getStartLocation(dataItem);\r\n        var endLocation = this.getEndLocation(dataItem);\r\n        var cellAngle = (endAngle - startAngle) / (this.dataItems.length * (this.end - this.start));\r\n        var radarColumn = dataItem.column;\r\n        if (!radarColumn) {\r\n            radarColumn = this.columns.create();\r\n            dataItem.column = radarColumn;\r\n            $object.forceCopyProperties(this.columns.template, radarColumn, visualProperties);\r\n            dataItem.addSprite(radarColumn);\r\n            radarColumn.paper = this.paper; // sometimes pattern is not drawn if is set with adapter without this.\r\n            this.setColumnStates(radarColumn);\r\n        }\r\n        var width = radarColumn.width;\r\n        var percentWidth = 100;\r\n        if (width instanceof Percent) {\r\n            percentWidth = width.percent;\r\n        }\r\n        var offset = $math.round((endLocation - startLocation) * (1 - percentWidth / 100) / 2, 5);\r\n        startLocation += offset;\r\n        endLocation -= offset;\r\n        if (this.baseAxis == this.xAxis) {\r\n            tRadius = $math.getDistance({ x: this.yAxis.getX(dataItem, yField, dataItem.locations[yField], \"valueY\"), y: this.yAxis.getY(dataItem, yField, dataItem.locations[yField], \"valueY\") });\r\n            bRadius = $math.getDistance({ x: this.yAxis.getX(dataItem, yOpenField, dataItem.locations[yOpenField], \"valueY\"), y: this.yAxis.getY(dataItem, yOpenField, dataItem.locations[yOpenField], \"valueY\") });\r\n            lAngle = this.xAxis.getAngle(dataItem, xOpenField, startLocation, \"valueX\");\r\n            rAngle = this.xAxis.getAngle(dataItem, xField, endLocation, \"valueX\");\r\n            startAngle = startAngle + startLocation * cellAngle;\r\n            endAngle = endAngle - (1 - endLocation) * cellAngle;\r\n        }\r\n        else {\r\n            tRadius = $math.getDistance({ x: this.yAxis.getX(dataItem, yField, startLocation, \"valueY\"), y: this.yAxis.getY(dataItem, yField, startLocation, \"valueY\") });\r\n            bRadius = $math.getDistance({ x: this.yAxis.getX(dataItem, yOpenField, endLocation, \"valueY\"), y: this.yAxis.getY(dataItem, yOpenField, endLocation, \"valueY\") });\r\n            lAngle = this.xAxis.getAngle(dataItem, xField, dataItem.locations[xField], \"valueX\");\r\n            rAngle = this.xAxis.getAngle(dataItem, xOpenField, dataItem.locations[xOpenField], \"valueX\");\r\n        }\r\n        if (rAngle < lAngle) {\r\n            var temp = rAngle;\r\n            rAngle = lAngle;\r\n            lAngle = temp;\r\n        }\r\n        lAngle = $math.fitToRange(lAngle, startAngle, endAngle);\r\n        rAngle = $math.fitToRange(rAngle, startAngle, endAngle);\r\n        var slice = radarColumn.radarColumn;\r\n        slice.startAngle = lAngle;\r\n        var arc = rAngle - lAngle;\r\n        if (arc > 0) {\r\n            slice.arc = arc;\r\n            slice.radius = tRadius;\r\n            slice.innerRadius = bRadius;\r\n            radarColumn.__disabled = false;\r\n            radarColumn.parent = this.columnsContainer;\r\n            $iter.each(this.axisRanges.iterator(), function (axisRange) {\r\n                var rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\r\n                if (!rangeColumn) {\r\n                    rangeColumn = _this.columns.create();\r\n                    $object.forceCopyProperties(_this.columns.template, rangeColumn, visualProperties);\r\n                    $object.copyProperties(axisRange.contents, rangeColumn, visualProperties); // need this because 3d columns are not in the same container\r\n                    if (rangeColumn.dataItem) {\r\n                        $array.remove(rangeColumn.dataItem.sprites, rangeColumn);\r\n                    }\r\n                    dataItem.addSprite(rangeColumn);\r\n                    rangeColumn.paper = _this.paper; // sometimes pattern is not drawn if is set with adapter without this.\t\t\t\t\t\r\n                    _this.setColumnStates(rangeColumn);\r\n                    dataItem.rangesColumns.setKey(axisRange.uid, rangeColumn);\r\n                }\r\n                var slice = rangeColumn.radarColumn;\r\n                slice.startAngle = lAngle;\r\n                slice.arc = arc;\r\n                slice.radius = tRadius;\r\n                slice.innerRadius = bRadius;\r\n                if (slice.invalid) {\r\n                    slice.paper = _this.paper;\r\n                    slice.validate(); // validate as if it was used previously, it will flicker with previous dimensions\r\n                }\r\n                rangeColumn.__disabled = false;\r\n                rangeColumn.parent = axisRange.contents;\r\n            });\r\n        }\r\n        else {\r\n            this.disableUnusedColumns(dataItem);\r\n        }\r\n    };\r\n    /**\r\n     * Returns an [[IPoint]] coordinates of the specific Serie's data point.\r\n     *\r\n     * @param    dataItem   Data item\r\n     * @param    xKey       Name of X data field\r\n     * @param    yKey       Name of Y data field\r\n     * @param    locationX  X location\r\n     * @param    locationY  Y location\r\n     * @param    stackKeyX  ?\r\n     * @param    stackKeyY  ?\r\n     * @returns             Coordinates\r\n     */\r\n    RadarColumnSeries.prototype.getPoint = function (dataItem, xKey, yKey, locationX, locationY, stackKeyX, stackKeyY) {\r\n        if (!stackKeyX) {\r\n            stackKeyX = \"valueX\";\r\n        }\r\n        if (!stackKeyY) {\r\n            stackKeyY = \"valueY\";\r\n        }\r\n        var x = this.yAxis.getX(dataItem, yKey, locationY, stackKeyY);\r\n        var y = this.yAxis.getY(dataItem, yKey, locationY, stackKeyY);\r\n        var radius = $math.getDistance({ x: x, y: y });\r\n        // hack to be able to determine angle later\r\n        if (radius == 0) {\r\n            radius = 0.00001;\r\n        }\r\n        var angle = this.xAxis.getAngle(dataItem, xKey, locationX, stackKeyX);\r\n        return { x: radius * $math.cos(angle), y: radius * $math.sin(angle) };\r\n    };\r\n    /**\r\n     * Returns an SVG path to be used as a mask for the series.\r\n     *\r\n     * @return SVG path\r\n     */\r\n    RadarColumnSeries.prototype.getMaskPath = function () {\r\n        var renderer = this.yAxis.renderer;\r\n        return $path.arc(renderer.startAngle, renderer.endAngle - renderer.startAngle, renderer.pixelRadius, renderer.pixelInnerRadius);\r\n    };\r\n    RadarColumnSeries.prototype.positionBulletReal = function (bullet, positionX, positionY) {\r\n        var xAxis = this.xAxis;\r\n        var yAxis = this.yAxis;\r\n        if (positionX < xAxis.start || positionX > xAxis.end || positionY < yAxis.start || positionY > yAxis.end) {\r\n            bullet.visible = false;\r\n        }\r\n        bullet.moveTo(this.xAxis.renderer.positionToPoint(positionX, positionY));\r\n    };\r\n    RadarColumnSeries.prototype.setXAxis = function (axis) {\r\n        _super.prototype.setXAxis.call(this, axis);\r\n        this.updateRendererRefs();\r\n    };\r\n    RadarColumnSeries.prototype.setYAxis = function (axis) {\r\n        _super.prototype.setYAxis.call(this, axis);\r\n        this.updateRendererRefs();\r\n    };\r\n    RadarColumnSeries.prototype.updateRendererRefs = function () {\r\n        var rendererX = this.xAxis.renderer;\r\n        var rendererY = this.yAxis.renderer;\r\n        rendererX.axisRendererY = rendererY;\r\n    };\r\n    return RadarColumnSeries;\r\n}(ColumnSeries));\r\nexport { RadarColumnSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"RadarColumnSeries\"] = RadarColumnSeries;\r\nregistry.registeredClasses[\"RadarColumnSeriesDataItem\"] = RadarColumnSeriesDataItem;\r\n//# sourceMappingURL=RadarColumnSeries.js.map","/**\r\n * Module that defines everything related to building Funnel slices.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to create [[FunnelSlice]] elements.\r\n *\r\n * @see {@link IFunnelSliceEvents} for a list of available events\r\n * @see {@link IFunnelSliceAdapters} for a list of available adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sliced-chart/} for documentation\r\n * @important\r\n */\r\nvar FunnelSlice = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FunnelSlice, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FunnelSlice() {\r\n        var _this = _super.call(this) || this;\r\n        _this.slice = _this.createChild(Sprite);\r\n        _this.slice.shouldClone = false;\r\n        _this.slice.setElement(_this.paper.add(\"path\"));\r\n        _this.slice.isMeasured = false;\r\n        _this.orientation = \"vertical\";\r\n        _this.bottomWidth = percent(100);\r\n        _this.topWidth = percent(100);\r\n        _this.isMeasured = false;\r\n        _this.width = 10;\r\n        _this.height = 10;\r\n        _this.expandDistance = 0;\r\n        _this.className = \"FunnelSlice\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Draws the element.\r\n     */\r\n    FunnelSlice.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        var pt = this.pixelPaddingTop;\r\n        var pb = this.pixelPaddingBottom;\r\n        var pr = this.pixelPaddingRight;\r\n        var pl = this.pixelPaddingLeft;\r\n        var w = this.pixelWidth - pr - pl;\r\n        var h = this.pixelHeight - pt - pb;\r\n        var ed = this.expandDistance;\r\n        var path = \"\";\r\n        if (this.orientation == \"vertical\") {\r\n            var tw = $utils.relativeToValue(this.topWidth, w);\r\n            var bw = $utils.relativeToValue(this.bottomWidth, w);\r\n            var tl = { x: (w - tw) / 2 + pl, y: pt };\r\n            var tr = { x: (w + tw) / 2 + pl, y: pt };\r\n            var br = { x: (w + bw) / 2 + pl, y: pt + h };\r\n            var bl = { x: (w - bw) / 2 + pl, y: pt + h };\r\n            var cpr = { x: tr.x + (br.x - tr.x) / 2 + ed * h, y: tr.y + 0.5 * h };\r\n            var cpl = { x: tl.x + (bl.x - tl.x) / 2 - ed * h, y: tl.y + 0.5 * h };\r\n            var qp1 = $path.lineTo(br);\r\n            var qp2 = \"\";\r\n            if (ed != 0) {\r\n                qp1 = $path.quadraticCurveTo(br, cpr);\r\n                qp2 = $path.quadraticCurveTo(tl, cpl);\r\n            }\r\n            path = $path.moveTo(tl) + $path.lineTo(tr) + qp1 + $path.lineTo(bl) + qp2;\r\n            this.tickPoint = { x: tr.x + (br.x - tr.x) / 2, y: tr.y + (br.y - tr.y) / 2 };\r\n        }\r\n        else {\r\n            var tw = $utils.relativeToValue(this.topWidth, h);\r\n            var bw = $utils.relativeToValue(this.bottomWidth, h);\r\n            var tt = { x: pl, y: (h - tw) / 2 + pt };\r\n            var tb = { x: pl, y: (h + tw) / 2 + pt };\r\n            var bt = { x: pl + w, y: (h - bw) / 2 + pt };\r\n            var bb = { x: pl + w, y: (h + bw) / 2 + pt };\r\n            var cpr = { y: tt.y + (bt.y - tt.y) / 2 - ed * w, x: tt.x + 0.5 * w };\r\n            var cpl = { y: tb.y + (bb.y - tb.y) / 2 + ed * w, x: tb.x + 0.5 * w };\r\n            var qp1 = $path.lineTo(bt);\r\n            var qp2 = \"\";\r\n            if (ed != 0) {\r\n                qp1 = $path.quadraticCurveTo(bt, cpr);\r\n                qp2 = $path.quadraticCurveTo(tb, cpl);\r\n            }\r\n            path = $path.moveTo(tb) + $path.lineTo(tt) + qp1 + $path.lineTo(bb) + qp2;\r\n            this.tickPoint = { y: tb.y + (bb.y - tb.y) / 2, x: tb.x + (bb.x - tb.x) / 2 };\r\n        }\r\n        this.slice.path = path;\r\n        this.invalidateLayout();\r\n    };\r\n    FunnelSlice.prototype.getPoint = function (locationX, locationY) {\r\n        var pt = this.pixelPaddingTop;\r\n        var pb = this.pixelPaddingBottom;\r\n        var pr = this.pixelPaddingRight;\r\n        var pl = this.pixelPaddingLeft;\r\n        var w = this.pixelWidth - pr - pl;\r\n        var h = this.pixelHeight - pt - pb;\r\n        if (this.orientation == \"vertical\") {\r\n            var tw = $utils.relativeToValue(this.topWidth, w);\r\n            var bw = $utils.relativeToValue(this.bottomWidth, w);\r\n            var tl = { x: (w - tw) / 2 + pl, y: pt };\r\n            var tr = { x: (w + tw) / 2 + pl, y: pt };\r\n            var br = { x: (w + bw) / 2 + pl, y: pt + h };\r\n            var bl = { x: (w - bw) / 2 + pl, y: pt + h };\r\n            var mlx = tl.x + (bl.x - tl.x) * locationY;\r\n            var mrx = tr.x + (br.x - tr.x) * locationY;\r\n            return { x: mlx + (mrx - mlx) * locationX, y: tr.y + (br.y - tr.y) * locationY };\r\n        }\r\n        else {\r\n            var tw = $utils.relativeToValue(this.topWidth, h);\r\n            var bw = $utils.relativeToValue(this.bottomWidth, h);\r\n            var tt = { x: pl, y: (h - tw) / 2 + pt };\r\n            var tb = { x: pl, y: (h + tw) / 2 + pt };\r\n            var bt = { x: pl + w, y: (h - bw) / 2 + pt };\r\n            var bb = { x: pl + w, y: (h + bw) / 2 + pt };\r\n            var mty = tt.y + (bt.y - tt.y) * locationX;\r\n            var mby = tb.y + (bb.y - tb.y) * locationX;\r\n            return { y: mty + (mby - mty) * locationY, x: tt.x + (bt.x - tt.x) * locationX };\r\n        }\r\n    };\r\n    Object.defineProperty(FunnelSlice.prototype, \"bottomWidth\", {\r\n        /**\r\n         * @return bottom width\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"bottomWidth\");\r\n        },\r\n        /**\r\n         * Bottom width in pixels or percent.\r\n         *\r\n         * IMPORTANT: this setting might be used to set dimensions if you use slice\r\n         * as a standalone element. If it's a part of [[FunnelSeries]] this setting\r\n         * becomes read-only as it will be automatically reset by series.\r\n         *\r\n         * @param value  Bottom width\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"bottomWidth\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelSlice.prototype, \"topWidth\", {\r\n        /**\r\n         * @return Top width\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"topWidth\");\r\n        },\r\n        /**\r\n         * Top width in pixels or percent.\r\n         *\r\n         * IMPORTANT: this setting might be used to set dimensions if you use slice\r\n         * as a standalone element. If it's a part of [[FunnelSeries]] this setting\r\n         * becomes read-only as it will be automatically reset by series.\r\n         *\r\n         * @param value  Top width\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"topWidth\", value, true, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelSlice.prototype, \"orientation\", {\r\n        /**\r\n         * @return Orientation\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"orientation\");\r\n        },\r\n        /**\r\n         * Orientation of the funnel slice: \"horizontal\" or \"vertical\".\r\n         *\r\n         * IMPORTANT: this setting might be used to set orintation if you use slice\r\n         * as a standalone element. If it's a part of [[FunnelSeries]] this setting\r\n         * becomes read-only as it will be automatically reset by series.\r\n         *\r\n         * @param value  Orientation\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"orientation\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelSlice.prototype, \"expandDistance\", {\r\n        /**\r\n         * @return expandDistance\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"expandDistance\");\r\n        },\r\n        /**\r\n         * A relative distance slice's sides should be bent to. It's relative to the\r\n         * height of the slice.\r\n         *\r\n         * Zero (default) will mean the sides will be perfectly straight.\r\n         *\r\n         * Positive value will make them bend outwards, resulting in \"puffed\" slices.\r\n         *\r\n         * Negative values will make them bend inwards.\r\n         *\r\n         * @default 0\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"expandDistance\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Copies all parameters from another [[Sprite]].\r\n     *\r\n     * @param source Source Sprite\r\n     */\r\n    FunnelSlice.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.slice) {\r\n            this.slice.copyFrom(source.slice);\r\n        }\r\n    };\r\n    return FunnelSlice;\r\n}(Container));\r\nexport { FunnelSlice };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FunnelSlice\"] = FunnelSlice;\r\n//# sourceMappingURL=FunnelSlice.js.map","/**\r\n * Funnel tick module.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Tick } from \"../elements/Tick\";\r\nimport { MutableValueDisposer, MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Draws an tick line for a funnel slice connecting it to a related label.\r\n *\r\n * @see {@link IFunnelTickEvents} for a list of available events\r\n * @see {@link IFunnelTickAdapters} for a list of available Adapters\r\n */\r\nvar FunnelTick = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FunnelTick, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FunnelTick() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * A label element this tick is attached to.\r\n         */\r\n        _this._label = new MutableValueDisposer();\r\n        /**\r\n         * A slice element this tick is attached to.\r\n         */\r\n        _this._slice = new MutableValueDisposer();\r\n        _this.className = \"FunnelTick\";\r\n        _this.element = _this.paper.add(\"path\");\r\n        _this._disposers.push(_this._label);\r\n        _this._disposers.push(_this._slice);\r\n        _this.setPropertyValue(\"locationX\", 0);\r\n        _this.setPropertyValue(\"locationY\", 0);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Draws the tick element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    FunnelTick.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        var slice = this.slice;\r\n        var point = slice.getPoint(this.locationX, this.locationY);\r\n        if (point) {\r\n            var label = this.label;\r\n            var series = slice.dataItem.component;\r\n            var p0 = void 0;\r\n            var p1 = void 0;\r\n            var p2 = void 0;\r\n            if (series.orientation == \"vertical\") {\r\n                var x1 = label.pixelX;\r\n                var y1 = label.pixelY;\r\n                if (!series.labelsOpposite) {\r\n                    x1 += label.maxRight;\r\n                }\r\n                p0 = $utils.spritePointToSprite(point, slice, this.parent);\r\n                p2 = $utils.spritePointToSprite({ x: x1, y: y1 }, label.parent, this.parent);\r\n                p1 = { x: label.parent.pixelX - this.length, y: p2.y };\r\n                if (!series.labelsOpposite) {\r\n                    p1.x = label.parent.measuredWidth + this.length;\r\n                }\r\n            }\r\n            else {\r\n                var x1 = label.pixelX;\r\n                var y1 = label.pixelY;\r\n                if (!series.labelsOpposite) {\r\n                    y1 += label.maxBottom;\r\n                }\r\n                p0 = $utils.spritePointToSprite(point, slice, this.parent);\r\n                p2 = $utils.spritePointToSprite({ x: x1, y: y1 }, label.parent, this.parent);\r\n                p1 = { x: p2.x, y: label.parent.pixelY - this.length };\r\n                if (!series.labelsOpposite) {\r\n                    p1.y = label.parent.measuredHeight + this.length;\r\n                }\r\n            }\r\n            this.path = $path.moveTo(p0) + $path.lineTo(p1) + $path.lineTo(p2);\r\n        }\r\n    };\r\n    Object.defineProperty(FunnelTick.prototype, \"slice\", {\r\n        /**\r\n         * @return FunnelSlice\r\n         */\r\n        get: function () {\r\n            return this._slice.get();\r\n        },\r\n        /**\r\n         * [[FunnelSlice]] element tick is attached to.\r\n         *\r\n         * @param slice  Slice\r\n         */\r\n        set: function (slice) {\r\n            this._slice.set(slice, new MultiDisposer([\r\n                slice.events.on(\"transformed\", this.invalidate, this, false),\r\n                slice.events.on(\"validated\", this.invalidate, this, false)\r\n            ]));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelTick.prototype, \"label\", {\r\n        /**\r\n         * @return Label\r\n         */\r\n        get: function () {\r\n            return this._label.get();\r\n        },\r\n        /**\r\n         * [[Label]] element tick is attached to.\r\n         *\r\n         * @param label  Label\r\n         */\r\n        set: function (label) {\r\n            this._label.set(label, label.events.on(\"transformed\", this.invalidate, this, false));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelTick.prototype, \"locationX\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"locationX\");\r\n        },\r\n        /**\r\n         * A relative horizontal position within target element a tick is pointing\r\n         * to.\r\n         *\r\n         * A scale is from 0 to 1, where 0 means left edge, and 1 right edge.\r\n         *\r\n         * You can also set any value in-between (e.g. 0.5 will point to the middle\r\n         * of the slice), or outside 0-1 range, which will put tick anchor position\r\n         * outside target element.\r\n         *\r\n         * @param value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"locationX\", value, false, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelTick.prototype, \"locationY\", {\r\n        /**\r\n         * @return Location (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"locationY\");\r\n        },\r\n        /**\r\n         * A relative vertical position within target element a tick is pointing\r\n         * to.\r\n         *\r\n         * A scale is from 0 to 1, where 0 means top edge, and 1 bottom edge.\r\n         *\r\n         * You can also set any value in-between (e.g. 0.5 will point to the middle\r\n         * of the slice), or outside 0-1 range, which will put tick anchor position\r\n         * outside target element.\r\n         *\r\n         * @param value  Location (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"locationY\", value, false, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FunnelTick;\r\n}(Tick));\r\nexport { FunnelTick };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FunnelTick\"] = FunnelTick;\r\n//# sourceMappingURL=FunnelTick.js.map","/**\r\n * Defines Funnel Chart Series.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { PercentSeries, PercentSeriesDataItem } from \"./PercentSeries\";\r\nimport { FunnelSlice } from \"../elements/FunnelSlice\";\r\nimport { FunnelTick } from \"../elements/FunnelTick\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { Disposer } from \"../../core/utils/Disposer\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo: sequenced?\r\n/**\r\n * Defines a [[DataItem]] for [[FunnelSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar FunnelSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FunnelSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FunnelSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"FunnelSeriesDataItem\";\r\n        // this helps to invalidate series when value is 0 an it is hidden (no other events are triggered then)\r\n        _this.events.on(\"visibilitychanged\", function () {\r\n            if (_this.component) {\r\n                _this.component.invalidateDataItems();\r\n            }\r\n        }, _this, false);\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(FunnelSeriesDataItem.prototype, \"sliceLink\", {\r\n        /**\r\n         * A [[FunnelSlice]] element, related to this data item ([[FunnelSlice]]).\r\n         *\r\n         * @readonly\r\n         * @return Slice element\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._sliceLink) {\r\n                var sliceLink_1 = this.component.sliceLinks.create();\r\n                this._sliceLink = sliceLink_1;\r\n                this._disposers.push(sliceLink_1);\r\n                sliceLink_1.parent = this.component.slicesContainer;\r\n                this._disposers.push(new Disposer(function () {\r\n                    if (_this.component) {\r\n                        _this.component.sliceLinks.removeValue(sliceLink_1);\r\n                    }\r\n                }));\r\n                this.addSprite(sliceLink_1);\r\n                sliceLink_1.visible = this.visible;\r\n            }\r\n            return this._sliceLink;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FunnelSeriesDataItem;\r\n}(PercentSeriesDataItem));\r\nexport { FunnelSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a FunnelSlice series on a [[SlicedChart]].\r\n *\r\n * @see {@link IFunnelSeriesEvents} for a list of available Events\r\n * @see {@link IFunnelSeriesAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sliced-chart/} for documentation\r\n * @important\r\n */\r\nvar FunnelSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FunnelSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function FunnelSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this._nextY = 0;\r\n        _this.className = \"FunnelSeries\";\r\n        _this.orientation = \"vertical\";\r\n        _this.width = percent(100);\r\n        _this.height = percent(100);\r\n        _this.slicesContainer.width = percent(100);\r\n        _this.slicesContainer.height = percent(100);\r\n        _this._disposers.push(_this.slicesContainer.events.on(\"maxsizechanged\", _this.invalidateDataItems, _this, false));\r\n        _this.labelsOpposite = true;\r\n        _this.labelsContainer.layout = \"absolute\";\r\n        _this.bottomRatio = 0;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Creates a [[FunnelSlice]] element.\r\n     *\r\n     * @return Slice\r\n     */\r\n    FunnelSeries.prototype.createSlice = function () {\r\n        return new FunnelSlice();\r\n    };\r\n    /**\r\n     * Creates a [[FunnelTick]] element.\r\n     *\r\n     * @return Tick\r\n     */\r\n    FunnelSeries.prototype.createTick = function () {\r\n        return new FunnelTick();\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    FunnelSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Funnel Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    FunnelSeries.prototype.createDataItem = function () {\r\n        return new FunnelSeriesDataItem();\r\n    };\r\n    /**\r\n     * Inits FunnelSlice.\r\n     *\r\n     * @param slice to init\r\n     */\r\n    FunnelSeries.prototype.initSlice = function (slice) {\r\n        slice.isMeasured = false;\r\n        slice.defaultState.properties.scale = 1;\r\n        slice.observe(\"scale\", this.handleSliceScale, this);\r\n        slice.observe([\"dx\", \"dy\", \"x\", \"y\"], this.handleSliceMove, this);\r\n        slice.tooltipText = \"{category}: {value.percent.formatNumber('#.#')}% ({value.value})\";\r\n        var hoverState = slice.states.create(\"hover\");\r\n        hoverState.properties.expandDistance = 0.2;\r\n    };\r\n    /**\r\n     * [initLabel description]\r\n     *\r\n     * @todo Description\r\n     * @param label [description]\r\n     */\r\n    FunnelSeries.prototype.initLabel = function (label) {\r\n        _super.prototype.initLabel.call(this, label);\r\n        label.verticalCenter = \"middle\";\r\n        label.horizontalCenter = \"middle\";\r\n        label.isMeasured = true;\r\n        label.padding(5, 5, 5, 5);\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    FunnelSeries.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        this._nextY = 0;\r\n    };\r\n    /**\r\n     * [validateDataElements description]\r\n     *\r\n     * @todo Description\r\n     * @ignore Exclude from docs\r\n     */\r\n    FunnelSeries.prototype.validateDataElements = function () {\r\n        var _this = this;\r\n        var slicesContainer = this.slicesContainer;\r\n        var labelsContainer = this.labelsContainer;\r\n        var labelTemplate = this.labels.template;\r\n        if (this.alignLabels) {\r\n            labelTemplate.interactionsEnabled = true;\r\n            slicesContainer.isMeasured = true;\r\n            labelsContainer.isMeasured = true;\r\n        }\r\n        else {\r\n            labelTemplate.interactionsEnabled = false;\r\n            slicesContainer.isMeasured = false;\r\n            labelsContainer.isMeasured = false;\r\n        }\r\n        var total = 0;\r\n        var count = 0;\r\n        this.dataItems.each(function (dItem) {\r\n            if ($type.hasValue(dItem.value)) {\r\n                count++;\r\n                if (dItem.value > 0) {\r\n                    total += Math.abs(dItem.getWorkingValue(\"value\") / dItem.value);\r\n                }\r\n                else {\r\n                    if (_this.ignoreZeroValues) {\r\n                        count--;\r\n                    }\r\n                    else {\r\n                        if (!dItem.visible || dItem.__disabled || dItem.isHiding) {\r\n                            count--;\r\n                        }\r\n                        else {\r\n                            total += 1;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this._total = 1 / count * total;\r\n        this._count = count;\r\n        _super.prototype.validateDataElements.call(this);\r\n        this.arrangeLabels();\r\n    };\r\n    /**\r\n     * [getNextValue description]\r\n     *\r\n     * @todo Description\r\n     * @param dataItem  [description]\r\n     * @return [description]\r\n     */\r\n    FunnelSeries.prototype.getNextValue = function (dataItem) {\r\n        var index = dataItem.index;\r\n        var nextValue = dataItem.getWorkingValue(\"value\");\r\n        if (index < this.dataItems.length - 1) {\r\n            var nextItem = this.dataItems.getIndex(index + 1);\r\n            nextValue = nextItem.getWorkingValue(\"value\");\r\n            if (!nextItem.visible || nextItem.isHiding || nextItem.__disabled || (nextItem.value == 0 && this.ignoreZeroValues)) {\r\n                return this.getNextValue(nextItem);\r\n            }\r\n        }\r\n        return nextValue;\r\n    };\r\n    /**\r\n     * [formDataElement description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    FunnelSeries.prototype.formDataElement = function () {\r\n    };\r\n    /**\r\n     * Validates data item's element, effectively redrawing it.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    FunnelSeries.prototype.validateDataElement = function (dataItem) {\r\n        if ($type.hasValue(dataItem.value)) {\r\n            // FunnelSlice\r\n            var slice = dataItem.slice;\r\n            slice.orientation = this.orientation;\r\n            var sliceLink = dataItem.sliceLink;\r\n            sliceLink.orientation = this.orientation;\r\n            var tick = dataItem.tick;\r\n            var label = dataItem.label;\r\n            tick.slice = slice;\r\n            tick.label = label;\r\n            this.decorateSlice(dataItem);\r\n            sliceLink.fill = slice.fill;\r\n            if (dataItem.index == this.dataItems.length - 1) {\r\n                sliceLink.disabled = true;\r\n            }\r\n            // do this at the end, otherwise bullets won't be positioned properly\r\n            _super.prototype.validateDataElement.call(this, dataItem);\r\n        }\r\n    };\r\n    /**\r\n     * [decorateSlice description]\r\n     *\r\n     * @todo Description\r\n     * @param dataItem [description]\r\n     */\r\n    FunnelSeries.prototype.decorateSlice = function (dataItem) {\r\n        var slice = dataItem.slice;\r\n        var sliceLink = dataItem.sliceLink;\r\n        var label = dataItem.label;\r\n        var tick = dataItem.tick;\r\n        var maxWidth = this.slicesContainer.innerWidth;\r\n        var maxHeight = this.slicesContainer.innerHeight;\r\n        var nextValue = this.getNextValue(dataItem);\r\n        var workingValue = Math.abs(dataItem.getWorkingValue(\"value\"));\r\n        var bottomRatio = this.bottomRatio;\r\n        var d = 1;\r\n        if (dataItem.value != 0) {\r\n            d = workingValue / Math.abs(dataItem.value);\r\n        }\r\n        else {\r\n            if (dataItem.__disabled || dataItem.isHiding || !dataItem.visible) {\r\n                d = 0.000001;\r\n            }\r\n        }\r\n        if (this.ignoreZeroValues && dataItem.value == 0) {\r\n            dataItem.__disabled = true;\r\n            return;\r\n        }\r\n        else {\r\n            dataItem.__disabled = false;\r\n        }\r\n        if (this._nextY == Infinity) {\r\n            this._nextY = 0;\r\n        }\r\n        if (this.orientation == \"vertical\") {\r\n            var linkHeight = sliceLink.pixelHeight * d;\r\n            maxHeight = maxHeight + linkHeight; // to avoid one link gap in the bottom\r\n            slice.topWidth = workingValue / this.dataItem.values.value.high * maxWidth;\r\n            slice.bottomWidth = (workingValue - (workingValue - nextValue) * bottomRatio) / this.dataItem.values.value.high * maxWidth;\r\n            sliceLink.topWidth = slice.bottomWidth;\r\n            sliceLink.bottomWidth = (workingValue - (workingValue - nextValue)) / this.dataItem.values.value.high * maxWidth;\r\n            slice.y = this._nextY;\r\n            slice.height = Math.min(100000, $math.max(0, maxHeight / this._count * d / this._total - linkHeight));\r\n            slice.x = maxWidth / 2;\r\n            if (!this.alignLabels) {\r\n                label.x = slice.x;\r\n            }\r\n            else {\r\n                label.x = undefined;\r\n            }\r\n            label.y = slice.pixelY + slice.pixelHeight * tick.locationY;\r\n            this._nextY += slice.pixelHeight + linkHeight;\r\n            sliceLink.y = this._nextY - linkHeight;\r\n            sliceLink.x = slice.x;\r\n        }\r\n        else {\r\n            var linkWidth = sliceLink.pixelWidth * d;\r\n            maxWidth = maxWidth + linkWidth; // to avoid one link gap in the bottom\r\n            slice.topWidth = workingValue / this.dataItem.values.value.high * maxHeight;\r\n            slice.bottomWidth = (workingValue - (workingValue - nextValue) * bottomRatio) / this.dataItem.values.value.high * maxHeight;\r\n            sliceLink.topWidth = slice.bottomWidth;\r\n            sliceLink.bottomWidth = (workingValue - (workingValue - nextValue)) / this.dataItem.values.value.high * maxHeight;\r\n            slice.x = this._nextY;\r\n            slice.width = Math.min(100000, maxWidth / this._count * d * 1 / this._total - linkWidth);\r\n            slice.y = maxHeight / 2;\r\n            if (!this.alignLabels) {\r\n                label.y = slice.y;\r\n            }\r\n            else {\r\n                label.y = this.labelsContainer.measuredHeight;\r\n            }\r\n            label.x = slice.pixelX + slice.pixelWidth * tick.locationX;\r\n            this._nextY += slice.pixelWidth + linkWidth;\r\n            sliceLink.x = this._nextY - linkWidth;\r\n            sliceLink.y = slice.y;\r\n        }\r\n    };\r\n    FunnelSeries.prototype.getLastLabel = function (index) {\r\n        if (index > 0) {\r\n            var lastLabel = this.labels.getIndex(index);\r\n            if (lastLabel.__disabled || !lastLabel.visible) {\r\n                return this.getLastLabel(index - 1);\r\n            }\r\n            else {\r\n                return lastLabel;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * [arrangeLabels description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    FunnelSeries.prototype.arrangeLabels = function () {\r\n        if (this.alignLabels) {\r\n            var count = this.labels.length;\r\n            if (count > 1) {\r\n                var lastLabel = this.getLastLabel(count - 1);\r\n                if (lastLabel) {\r\n                    var lastY = lastLabel.pixelY;\r\n                    var lastX = lastLabel.pixelX;\r\n                    if (count > 1) {\r\n                        for (var i = count - 2; i >= 0; i--) {\r\n                            var label = this.labels.getIndex(i);\r\n                            if (label.visible && !label.__disabled) {\r\n                                if (label.invalid) {\r\n                                    label.validate();\r\n                                }\r\n                                if (this.orientation == \"vertical\") {\r\n                                    if (label.pixelY + label.measuredHeight > lastY) {\r\n                                        label.y = Math.min(1000000, lastY - label.measuredHeight);\r\n                                    }\r\n                                }\r\n                                // horizontal\r\n                                else {\r\n                                    if (label.pixelX + label.measuredWidth > lastX) {\r\n                                        label.x = Math.min(1000000, lastX - label.measuredWidth);\r\n                                    }\r\n                                }\r\n                                lastY = label.pixelY;\r\n                                lastX = label.pixelX;\r\n                            }\r\n                        }\r\n                        lastY = 0;\r\n                        lastX = 0;\r\n                        for (var i = 0; i < count; i++) {\r\n                            var label = this.labels.getIndex(i);\r\n                            if (label.visible && !label.__disabled) {\r\n                                if (label.invalid) {\r\n                                    label.validate();\r\n                                }\r\n                                if (this.orientation == \"vertical\") {\r\n                                    if (label.pixelY < lastY) {\r\n                                        label.y = Math.min(1000000, lastY);\r\n                                    }\r\n                                }\r\n                                // horizontal\r\n                                else {\r\n                                    if (label.pixelX < lastX) {\r\n                                        label.x = Math.min(1000000, lastX);\r\n                                    }\r\n                                }\r\n                                lastY += label.measuredHeight;\r\n                                lastX += label.measuredWidth;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Positions series bullet.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param bullet  Bullet\r\n     */\r\n    FunnelSeries.prototype.positionBullet = function (bullet) {\r\n        _super.prototype.positionBullet.call(this, bullet);\r\n        var dataItem = bullet.dataItem;\r\n        var slice = dataItem.slice;\r\n        var locationX = bullet.locationX;\r\n        if (!$type.isNumber(locationX)) {\r\n            locationX = 0.5;\r\n        }\r\n        var locationY = bullet.locationY;\r\n        if (!$type.isNumber(locationY)) {\r\n            locationY = 1;\r\n        }\r\n        bullet.x = slice.pixelX + slice.measuredWidth * locationX;\r\n        bullet.y = slice.pixelY + slice.measuredHeight * locationY;\r\n    };\r\n    Object.defineProperty(FunnelSeries.prototype, \"orientation\", {\r\n        /**\r\n         * @return Orientation\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"orientation\");\r\n        },\r\n        /**\r\n         * Orientation of the funnel slices: \"horizontal\" or \"vertical\" (default).\r\n         *\r\n         * @default \"vertical\"\r\n         * @param value Orientation\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"orientation\", value)) {\r\n                this.labelsOpposite = this.labelsOpposite;\r\n                this.invalidate();\r\n                if (value == \"vertical\") {\r\n                    this.ticks.template.locationX = 1;\r\n                    this.ticks.template.locationY = 0.5;\r\n                    this.labels.template.rotation = 0;\r\n                    this.layout = \"horizontal\";\r\n                }\r\n                else {\r\n                    this.ticks.template.locationX = 0.5;\r\n                    this.ticks.template.locationY = 1;\r\n                    this.labels.template.rotation = -90;\r\n                    this.layout = \"vertical\";\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelSeries.prototype, \"bottomRatio\", {\r\n        /**\r\n         * @return {number}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"bottomRatio\");\r\n        },\r\n        /**\r\n         * Indicates how slice's bottom will change in relation to slices top AND\r\n         * next slices top.\r\n         *\r\n         * Basically it's a relative value (0-1) that indicates bottom width\r\n         * position between current slice's top width and the top withd of the next\r\n         * one.\r\n         *\r\n         * The scale goes from 0 (closer to current slice width) to 1 (closer to next\r\n         * slice with).\r\n         *\r\n         * `0` (default) will mean that bottom will be the same as top, resulting in\r\n         * a prefectly square slice.\r\n         *\r\n         * From the data-viz standpoint `0` is a correct setting, since area of the\r\n         * slices will depict their value correctly.\r\n         *\r\n         * `1` will mean that slice will become trapezoid with its bottom matching\r\n         * width of the next slice.\r\n         *\r\n         * `0.5` will make bottom width be in the middle of width of current slice\r\n         * and the next slice.\r\n         *\r\n         * @default 0\r\n         * @param {number}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"bottomRatio\", value)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FunnelSeries.prototype, \"sliceLinks\", {\r\n        /**\r\n         * A list of elements linking each actual slice.\r\n         *\r\n         * Please note that links are [[FunnelSlice]] objects, just like real links,\r\n         * so they have all the same configuration options.\r\n         *\r\n         * You can use `template` of this link, to specify how links will look.\r\n         *\r\n         * ```TypeScript\r\n         * series.sliceLinks.template.fillOpacity = 0.5;\r\n         * ```\r\n         * ```JavaScript\r\n         * series.sliceLinks.template.fillOpacity = 0.5;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"series\": [{\r\n         *     \"type\": \"FunnelSeries\",\r\n         *      // ...\r\n         *      \"sliceLinks\": {\r\n         *        \"fillOpacity\": 0.5\r\n         *      }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @return Funnel links\r\n         */\r\n        get: function () {\r\n            if (!this._sliceLinks) {\r\n                var sliceLink = new FunnelSlice();\r\n                sliceLink.applyOnClones = true;\r\n                sliceLink.fillOpacity = 0.5;\r\n                sliceLink.expandDistance = -0.3;\r\n                sliceLink.hiddenState.properties.opacity = 0;\r\n                this._disposers.push(sliceLink);\r\n                this._sliceLinks = new ListTemplate(sliceLink);\r\n                this._disposers.push(new ListDisposer(this._sliceLinks));\r\n            }\r\n            return this._sliceLinks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Shows hidden series.\r\n     *\r\n     * @param duration  Duration of reveal animation (ms)\r\n     * @return Animation\r\n     */\r\n    FunnelSeries.prototype.show = function (duration) {\r\n        var _this = this;\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        var interpolationDuration = this.defaultState.transitionDuration;\r\n        if ($type.isNumber(duration)) {\r\n            interpolationDuration = duration;\r\n        }\r\n        var delay = 0;\r\n        $iter.each($iter.indexed(this.dataItems.iterator()), function (a) {\r\n            var i = a[0];\r\n            var dataItem = a[1];\r\n            if (_this.sequencedInterpolation) {\r\n                delay = _this.sequencedInterpolationDelay * i + interpolationDuration * (i - startIndex) / (endIndex - startIndex);\r\n            }\r\n            dataItem.show(interpolationDuration, delay, [\"value\"]);\r\n        });\r\n        var animation = _super.prototype.show.call(this, duration);\r\n        return animation;\r\n    };\r\n    /**\r\n     * Hides series.\r\n     *\r\n     * @param duration  Duration of hiding animation (ms)\r\n     * @return Animation\r\n     */\r\n    FunnelSeries.prototype.hide = function (duration) {\r\n        var _this = this;\r\n        var fields = [\"value\"];\r\n        var value = 0;\r\n        var startIndex = this.startIndex;\r\n        var endIndex = this.endIndex;\r\n        var delay = 0;\r\n        var interpolationDuration = this.hiddenState.transitionDuration;\r\n        if ($type.isNumber(duration)) {\r\n            interpolationDuration = duration;\r\n        }\r\n        $iter.each($iter.indexed(this.dataItems.iterator()), function (a) {\r\n            var i = a[0];\r\n            var dataItem = a[1];\r\n            if (_this.sequencedInterpolation) {\r\n                delay = _this.sequencedInterpolationDelay * i + interpolationDuration * (i - startIndex) / (endIndex - startIndex);\r\n            }\r\n            dataItem.hide(interpolationDuration, delay, value, fields);\r\n        });\r\n        var animation = _super.prototype.hide.call(this, duration);\r\n        if (animation && !animation.isFinished()) {\r\n            animation.delay(delay);\r\n        }\r\n        return animation;\r\n    };\r\n    /**\r\n     * @ignore\r\n     */\r\n    FunnelSeries.prototype.setAlignLabels = function (value) {\r\n        _super.prototype.setAlignLabels.call(this, value);\r\n        this.ticks.template.disabled = !value;\r\n        var labelsContainer = this.labelsContainer;\r\n        if (labelsContainer) {\r\n            // do not align\r\n            if (!value) {\r\n                labelsContainer.width = percent(100);\r\n                labelsContainer.height = percent(100);\r\n            }\r\n            //align\r\n            else {\r\n                labelsContainer.height = undefined;\r\n                labelsContainer.width = undefined;\r\n                labelsContainer.margin(10, 10, 10, 10);\r\n            }\r\n        }\r\n        this.labelsOpposite = this.labelsOpposite;\r\n    };\r\n    Object.defineProperty(FunnelSeries.prototype, \"labelsOpposite\", {\r\n        /**\r\n         * @return Labels on opposite side?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"labelsOpposite\");\r\n        },\r\n        /**\r\n         * Put labels on the oppsite side of the series?\r\n         *\r\n         * This setting is only used if `alignLabels = true`.\r\n         *\r\n         * If set to `true` (default) labels will be drawn to the right (on vertical\r\n         * series), or to the bottom (on horizontal series).\r\n         *\r\n         * If set to `false`, labels will be positioned to the left or top\r\n         * respectively.\r\n         *\r\n         * @default true\r\n         * @since 4.1.13\r\n         * @param  value  Labels on opposite side?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"labelsOpposite\", value);\r\n            var labelTemplate = this.labels.template;\r\n            var labelAlign = \"none\";\r\n            var labelValign = \"none\";\r\n            if (!this.alignLabels) {\r\n                if (this.orientation == \"vertical\") {\r\n                    labelAlign = \"center\";\r\n                }\r\n                else {\r\n                    labelValign = \"middle\";\r\n                }\r\n            }\r\n            else {\r\n                // opposite (left/bottom)\r\n                if (value) {\r\n                    this.labelsContainer.toFront();\r\n                    // left\r\n                    if (this.orientation == \"vertical\") {\r\n                        this.ticks.template.locationX = 1;\r\n                        labelTemplate.horizontalCenter = \"left\";\r\n                        labelAlign = \"right\";\r\n                    }\r\n                    // bottom\r\n                    else {\r\n                        this.ticks.template.locationY = 1;\r\n                        labelTemplate.horizontalCenter = \"right\";\r\n                        labelValign = \"bottom\";\r\n                    }\r\n                }\r\n                // non oposite (right/top)\r\n                else {\r\n                    this.labelsContainer.toBack();\r\n                    // right\r\n                    if (this.orientation == \"vertical\") {\r\n                        this.ticks.template.locationX = 0;\r\n                        labelAlign = \"left\";\r\n                    }\r\n                    // top\r\n                    else {\r\n                        labelValign = \"top\";\r\n                        this.ticks.template.locationY = 0;\r\n                    }\r\n                }\r\n            }\r\n            labelTemplate.align = labelAlign;\r\n            labelTemplate.valign = labelValign;\r\n            this.validateLayout();\r\n            this.ticks.each(function (tick) {\r\n                tick.invalidate();\r\n            });\r\n            this.invalidateDataItems();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FunnelSeries;\r\n}(PercentSeries));\r\nexport { FunnelSeries };\r\n/**\r\n * bboxter class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FunnelSeries\"] = FunnelSeries;\r\nregistry.registeredClasses[\"FunnelSeriesDataItem\"] = FunnelSeriesDataItem;\r\n//# sourceMappingURL=FunnelSeries.js.map","/**\r\n * Defines Pyramid Series.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { FunnelSeries, FunnelSeriesDataItem } from \"./FunnelSeries\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo: sequenced?\r\n/**\r\n * Defines a [[DataItem]] for [[PyramidSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PyramidSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PyramidSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PyramidSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PyramidSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return PyramidSeriesDataItem;\r\n}(FunnelSeriesDataItem));\r\nexport { PyramidSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a FunnelSlice series on a [[SlicedChart]].\r\n *\r\n * @see {@link IPyramidSeriesEvents} for a list of available Events\r\n * @see {@link IPyramidSeriesAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sliced-chart/} for documentation\r\n * @important\r\n */\r\nvar PyramidSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PyramidSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PyramidSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PyramidSeries\";\r\n        _this.topWidth = percent(0);\r\n        _this.bottomWidth = percent(100);\r\n        _this.pyramidHeight = percent(100);\r\n        _this.valueIs = \"area\";\r\n        _this.sliceLinks.template.width = 0;\r\n        _this.sliceLinks.template.height = 0;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    PyramidSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Pyramid Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    PyramidSeries.prototype.createDataItem = function () {\r\n        return new PyramidSeriesDataItem();\r\n    };\r\n    /**\r\n     * (Re)validates the whole series, effectively causing it to redraw.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    PyramidSeries.prototype.validate = function () {\r\n        _super.prototype.validate.call(this);\r\n        this._nextWidth = undefined;\r\n    };\r\n    /**\r\n     * [getNextValue description]\r\n     *\r\n     * @todo Description\r\n     * @param dataItem [description]\r\n     * @return [description]\r\n     */\r\n    PyramidSeries.prototype.getNextValue = function (dataItem) {\r\n        var index = dataItem.index;\r\n        var nextValue = dataItem.getWorkingValue(\"value\");\r\n        if (index < this.dataItems.length - 1) {\r\n            var nextItem = this.dataItems.getIndex(index + 1);\r\n            nextValue = nextItem.getWorkingValue(\"value\");\r\n        }\r\n        if (nextValue == 0) {\r\n            nextValue = 0.000001;\r\n        }\r\n        return nextValue;\r\n    };\r\n    /**\r\n     * [validateDataElements description]\r\n     *\r\n     * @todo Description\r\n     * @ignore Exclude from docs\r\n     */\r\n    PyramidSeries.prototype.validateDataElements = function () {\r\n        var _this = this;\r\n        var maxWidth = this.slicesContainer.innerWidth;\r\n        var maxHeight = this.slicesContainer.innerHeight;\r\n        this.dataItems.each(function (dataItem) {\r\n            if (dataItem.value > 0) {\r\n                var relValue = dataItem.getWorkingValue(\"value\") / dataItem.value;\r\n                var sliceLink = dataItem.sliceLink;\r\n                if (_this.orientation == \"vertical\") {\r\n                    maxHeight -= (sliceLink.pixelHeight * relValue);\r\n                }\r\n                else {\r\n                    maxWidth -= (sliceLink.pixelWidth * relValue);\r\n                }\r\n            }\r\n        });\r\n        this._pyramidHeight = $utils.relativeToValue(this.pyramidHeight, maxHeight);\r\n        this._pyramidWidth = $utils.relativeToValue(this.pyramidHeight, maxWidth);\r\n        if (this.orientation == \"vertical\") {\r\n            var y = (maxHeight - this._pyramidHeight) / 2;\r\n            this.slicesContainer.y = y;\r\n            this.labelsContainer.y = y;\r\n            this.ticksContainer.y = y;\r\n        }\r\n        else {\r\n            var x = (maxWidth - this._pyramidWidth) / 2;\r\n            this.slicesContainer.x = x;\r\n            this.labelsContainer.x = x;\r\n            this.ticksContainer.x = x;\r\n        }\r\n        _super.prototype.validateDataElements.call(this);\r\n    };\r\n    /**\r\n     * [decorateSlice description]\r\n     *\r\n     * @todo Description\r\n     * @param dataItem [description]\r\n     */\r\n    PyramidSeries.prototype.decorateSlice = function (dataItem) {\r\n        var sum = this.dataItem.values.value.absoluteSum;\r\n        if (sum == 0) {\r\n            return;\r\n        }\r\n        var slice = dataItem.slice;\r\n        var sliceLink = dataItem.sliceLink;\r\n        var label = dataItem.label;\r\n        var tick = dataItem.tick;\r\n        // TODO can this be removed ?\r\n        this.getNextValue(dataItem);\r\n        var workingValue = Math.abs(dataItem.getWorkingValue(\"value\"));\r\n        if (workingValue == 0) {\r\n            workingValue = 0.000001;\r\n        }\r\n        var pyramidWidth = this._pyramidWidth;\r\n        var pyramidHeight = this._pyramidHeight;\r\n        var maxWidth = this.slicesContainer.innerWidth;\r\n        var maxHeight = this.slicesContainer.innerHeight;\r\n        var linkWidth = sliceLink.pixelWidth;\r\n        var linkHeight = sliceLink.pixelHeight;\r\n        if (dataItem.value == 0 && this.ignoreZeroValues) {\r\n            dataItem.__disabled = true;\r\n        }\r\n        else {\r\n            dataItem.__disabled = false;\r\n        }\r\n        if (this.orientation == \"vertical\") {\r\n            var topWidth = $utils.relativeToValue(this.topWidth, maxWidth);\r\n            if (!$type.isNumber(this._nextWidth)) {\r\n                this._nextWidth = topWidth;\r\n            }\r\n            var bottomWidth = $utils.relativeToValue(this.bottomWidth, maxWidth);\r\n            var sliceTopWidth = this._nextWidth;\r\n            var angle = Math.atan2(pyramidHeight, topWidth - bottomWidth);\r\n            var c = Math.tan(Math.PI / 2 - angle);\r\n            if (c == 0) {\r\n                c = 0.00000001;\r\n            }\r\n            var sliceHeight = void 0;\r\n            var sliceBottomWidth = void 0;\r\n            if (this.valueIs == \"area\") {\r\n                var totalSquare = (topWidth + bottomWidth) / 2 * pyramidHeight;\r\n                var square = totalSquare * workingValue / sum;\r\n                var s = Math.abs(sliceTopWidth * sliceTopWidth - 2 * square * c);\r\n                sliceHeight = (sliceTopWidth - Math.sqrt(s)) / c;\r\n                sliceBottomWidth = (2 * square - sliceHeight * sliceTopWidth) / sliceHeight;\r\n            }\r\n            else {\r\n                sliceHeight = pyramidHeight * workingValue / sum;\r\n                sliceBottomWidth = sliceTopWidth - sliceHeight * c;\r\n            }\r\n            slice.height = sliceHeight;\r\n            slice.width = maxWidth;\r\n            slice.bottomWidth = sliceBottomWidth;\r\n            slice.topWidth = sliceTopWidth;\r\n            sliceLink.topWidth = slice.bottomWidth;\r\n            sliceLink.bottomWidth = slice.bottomWidth;\r\n            slice.y = this._nextY;\r\n            //slice.x = maxWidth / 2;\r\n            if (!this.alignLabels) {\r\n                label.x = maxWidth / 2;\r\n            }\r\n            else {\r\n                label.x = 0;\r\n            }\r\n            label.y = slice.pixelY + slice.pixelHeight * tick.locationY + slice.dy;\r\n            this._nextY += slice.pixelHeight + linkHeight * workingValue / Math.max(Math.abs(dataItem.value), 0.00000001);\r\n            sliceLink.y = this._nextY - linkHeight;\r\n            sliceLink.x = maxWidth / 2;\r\n        }\r\n        else {\r\n            var topWidth = $utils.relativeToValue(this.topWidth, maxHeight);\r\n            if (!$type.isNumber(this._nextWidth)) {\r\n                this._nextWidth = topWidth;\r\n            }\r\n            var bottomWidth = $utils.relativeToValue(this.bottomWidth, maxHeight);\r\n            var sliceTopWidth = this._nextWidth;\r\n            var angle = Math.atan2(pyramidWidth, topWidth - bottomWidth);\r\n            var c = Math.tan(Math.PI / 2 - angle);\r\n            if (c == 0) {\r\n                c = 0.00000001;\r\n            }\r\n            var sliceWidth = void 0;\r\n            var sliceBottomWidth = void 0;\r\n            if (this.valueIs == \"area\") {\r\n                var totalSquare = (topWidth + bottomWidth) / 2 * pyramidWidth;\r\n                var square = totalSquare * workingValue / sum;\r\n                sliceWidth = (sliceTopWidth - Math.sqrt(sliceTopWidth * sliceTopWidth - 2 * square * c)) / c;\r\n                sliceBottomWidth = (2 * square - sliceWidth * sliceTopWidth) / sliceWidth;\r\n            }\r\n            else {\r\n                sliceWidth = pyramidWidth * workingValue / sum;\r\n                sliceBottomWidth = sliceTopWidth - sliceWidth * c;\r\n            }\r\n            slice.width = sliceWidth;\r\n            slice.height = maxHeight;\r\n            slice.bottomWidth = sliceBottomWidth;\r\n            slice.topWidth = sliceTopWidth;\r\n            sliceLink.topWidth = slice.bottomWidth;\r\n            sliceLink.bottomWidth = slice.bottomWidth;\r\n            slice.x = this._nextY;\r\n            if (!this.alignLabels) {\r\n                label.y = maxHeight / 2;\r\n            }\r\n            else {\r\n                label.y = this.labelsContainer.measuredHeight;\r\n            }\r\n            label.x = slice.pixelX + slice.pixelWidth * tick.locationX + slice.dx;\r\n            this._nextY += slice.pixelWidth + linkWidth * workingValue / Math.max(Math.abs(dataItem.value), 0.00000001);\r\n            sliceLink.x = this._nextY - linkWidth;\r\n            sliceLink.y = maxHeight / 2;\r\n        }\r\n        this._nextWidth = slice.bottomWidth;\r\n    };\r\n    Object.defineProperty(PyramidSeries.prototype, \"topWidth\", {\r\n        /**\r\n         * @return {number | Percent}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"topWidth\");\r\n        },\r\n        /**\r\n         * Width of the pyramid's tip in pixels or relative (`Percent`).\r\n         *\r\n         * `0%` (default) means the pyramid will be perfectly pointy.\r\n         * `50%` will have a cut off / blunt top that is half the width of the chart.\r\n         * `100%` will take the whole width of the chart.\r\n         *\r\n         * If you need the downward-pointing pyramid, you might want to `topWidth` to\r\n         * `100%` and `bottomWidth` to `0%`.\r\n         *\r\n         * @default 0%\r\n         * @param {number | Percent}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPercentProperty(\"topWidth\", value, false, false, 10, false)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PyramidSeries.prototype, \"pyramidHeight\", {\r\n        /**\r\n         * @return {number | Percent}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"pyramidHeight\");\r\n        },\r\n        /**\r\n         * Height of pyramid\r\n         *\r\n         *\r\n         * @default 100%\r\n         * @param {number | Percent}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPercentProperty(\"pyramidHeight\", value, false, false, 10, false)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PyramidSeries.prototype, \"bottomWidth\", {\r\n        /**\r\n         * @return {number | Percent}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"bottomWidth\");\r\n        },\r\n        /**\r\n         * Width of the pyramid's bottom (bsae) in pixels or relative (`Percent`).\r\n         *\r\n         * `0%` means the pyramid's botto will be pointy.\r\n         * `50%` will have a cut off / blunt bottom that is half the width of the chart.\r\n         * `100%` (default) will take the whole width of the chart.\r\n         *\r\n         * If you need the downward-pointing pyramid, you might want to `topWidth` to\r\n         * `100%` and `bottomWidth` to `0%`.\r\n         *\r\n         * @param {number | Percent}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPercentProperty(\"bottomWidth\", value, false, false, 10, false)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PyramidSeries.prototype, \"valueIs\", {\r\n        /**\r\n         * @return {\"area\" | \"height\"}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"valueIs\");\r\n        },\r\n        /**\r\n         * Indicates how slice's value will influence its size.\r\n         *\r\n         * `\"area\"` (default) means that the whole area of the pyramid (counting in\r\n         * modifications by `topWidth` and `bottomWidth`) will be divvied up between\r\n         * slices based on their value.\r\n         *\r\n         * With this setting at `\"area\"` the area of the trapezoids of each slice\r\n         * will represent their value relatively to values of the other slices.\r\n         *\r\n         * This is a correct way to depict \"weight\" of each slice based on their\r\n         * values.\r\n         *\r\n         * `\"height\"` means whole height (as opposed to area) of the pyramid will be\r\n         * divvied up between slices. Actual slice width or area is not counted in.\r\n         *\r\n         * From the data-viz standpoint this does not make a lot of sense, since\r\n         * slices with lesser values might appear more prominent if they are placed\r\n         * towards thick end of the pyramid since their areas will be bigger.\r\n         *\r\n         * @default \"area\"\r\n         * @param {\"area\" | \"height\"}\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"valueIs\", value)) {\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PyramidSeries;\r\n}(FunnelSeries));\r\nexport { PyramidSeries };\r\n/**\r\n * bboxter class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PyramidSeries\"] = PyramidSeries;\r\nregistry.registeredClasses[\"PyramidSeriesDataItem\"] = PyramidSeriesDataItem;\r\n//# sourceMappingURL=PyramidSeries.js.map","/**\r\n * Defines Pictorial Stacked Series.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { PyramidSeries, PyramidSeriesDataItem } from \"./PyramidSeries\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n//@todo: sequenced?\r\n/**\r\n * Defines a [[DataItem]] for [[PictorialStackedSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar PictorialStackedSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PictorialStackedSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PictorialStackedSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PictorialStackedSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return PictorialStackedSeriesDataItem;\r\n}(PyramidSeriesDataItem));\r\nexport { PictorialStackedSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a PictorialStacked series on a [[SlicedChart]].\r\n *\r\n * @see {@link IPictorialStackedSeriesEvents} for a list of available Events\r\n * @see {@link IPictorialStackedSeriesAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sliced-chart/} for documentation\r\n * @important\r\n */\r\nvar PictorialStackedSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PictorialStackedSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function PictorialStackedSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"PictorialStackedSeries\";\r\n        _this.topWidth = percent(100);\r\n        _this.bottomWidth = percent(100);\r\n        _this.valueIs = \"height\";\r\n        _this.applyTheme();\r\n        _this.startLocation = 0;\r\n        _this.endLocation = 1;\r\n        _this.align = \"center\";\r\n        _this.valign = \"middle\";\r\n        _this._maskSprite = _this.slicesContainer.createChild(Sprite);\r\n        _this._maskSprite.visible = false;\r\n        _this._maskSprite.zIndex = 100;\r\n        _this._maskSprite.shouldClone = false;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Sizes the mask to fit the series.\r\n     *\r\n     * @ignore\r\n     */\r\n    PictorialStackedSeries.prototype.validateDataElements = function () {\r\n        var maxWidth = this.slicesContainer.maxWidth;\r\n        var maxHeight = this.slicesContainer.maxHeight;\r\n        var maskSprite = this._maskSprite;\r\n        //maskSprite.validatePosition(); // for some reason size of the maskSprite is 0x0 after we removed validatePosition in afterdraw\r\n        var pictureWidth = maskSprite.measuredWidth / maskSprite.scale;\r\n        var pictureHeight = maskSprite.measuredHeight / maskSprite.scale;\r\n        var scale = $math.min(maxHeight / pictureHeight, maxWidth / pictureWidth);\r\n        if (scale == Infinity) {\r\n            scale = 1; // can't return here, won't draw legend properly\r\n        }\r\n        scale = $math.max(0.001, scale);\r\n        var startLocation = this.startLocation;\r\n        var endLocation = this.endLocation;\r\n        var newWidth = $math.min(maxWidth, pictureWidth * scale);\r\n        var newHeight = $math.min(maxHeight, pictureHeight * scale);\r\n        maskSprite.scale = scale;\r\n        if (this.orientation == \"vertical\") {\r\n            this.topWidth = newWidth + 4;\r\n            this.bottomWidth = newWidth + 4;\r\n            this.pyramidHeight = newHeight * (endLocation - startLocation);\r\n            maskSprite.x = maxWidth / 2;\r\n            maskSprite.y = newHeight / 2;\r\n        }\r\n        else {\r\n            this.topWidth = newHeight + 4;\r\n            this.bottomWidth = newHeight + 4;\r\n            this.pyramidHeight = newWidth * (endLocation - startLocation);\r\n            maskSprite.valign = \"middle\";\r\n            maskSprite.x = newWidth / 2;\r\n            maskSprite.y = maxHeight / 2;\r\n        }\r\n        maskSprite.verticalCenter = \"middle\";\r\n        maskSprite.horizontalCenter = \"middle\";\r\n        _super.prototype.validateDataElements.call(this);\r\n        var y;\r\n        var x;\r\n        if (this.orientation == \"vertical\") {\r\n            if (this.valign == \"bottom\") {\r\n                y = (maxHeight - newHeight);\r\n            }\r\n            if (this.valign == \"middle\") {\r\n                y = (maxHeight - newHeight) / 2;\r\n            }\r\n            if (this.valign == \"top\") {\r\n                y = 0;\r\n            }\r\n            if (this.align == \"left\") {\r\n                x = -(maxWidth - newWidth) / 2;\r\n            }\r\n            if (this.align == \"center\") {\r\n                x = 0;\r\n            }\r\n            if (this.align == \"right\") {\r\n                x = (maxWidth - newWidth) / 2;\r\n            }\r\n            this.slices.template.dy = startLocation * newHeight;\r\n            if (this.alignLabels) {\r\n                this.slicesContainer.dx = x;\r\n            }\r\n        }\r\n        else {\r\n            if (this.valign == \"bottom\") {\r\n                y = (maxHeight - newHeight) / 2;\r\n            }\r\n            if (this.valign == \"middle\") {\r\n                y = 0;\r\n            }\r\n            if (this.valign == \"top\") {\r\n                y = -(maxHeight - newHeight) / 2;\r\n            }\r\n            if (this.align == \"left\") {\r\n                x = 0;\r\n            }\r\n            if (this.align == \"center\") {\r\n                x = (maxWidth - newWidth) / 2;\r\n            }\r\n            if (this.align == \"right\") {\r\n                x = (maxWidth - newWidth);\r\n            }\r\n            this.slices.template.dx = startLocation * newWidth;\r\n            if (this.alignLabels) {\r\n                this.slicesContainer.dy = y;\r\n            }\r\n        }\r\n        this.slicesContainer.x = x;\r\n        this.labelsContainer.x = x;\r\n        this.ticksContainer.x = x;\r\n        this.slicesContainer.y = y;\r\n        this.labelsContainer.y = y;\r\n        this.ticksContainer.y = y;\r\n        if (newWidth > 0 && newHeight > 0) {\r\n            this.slicesContainer.mask = maskSprite;\r\n        }\r\n    };\r\n    /**\r\n     * Sets defaults that instantiate some objects that rely on parent, so they\r\n     * cannot be set in constructor.\r\n     */\r\n    PictorialStackedSeries.prototype.applyInternalDefaults = function () {\r\n        _super.prototype.applyInternalDefaults.call(this);\r\n        if (!$type.hasValue(this.readerTitle)) {\r\n            this.readerTitle = this.language.translate(\"Pyramid Series\");\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new/empty DataItem of the type appropriate for this object.\r\n     *\r\n     * @see {@link DataItem}\r\n     * @return Data Item\r\n     */\r\n    PictorialStackedSeries.prototype.createDataItem = function () {\r\n        return new PictorialStackedSeriesDataItem();\r\n    };\r\n    Object.defineProperty(PictorialStackedSeries.prototype, \"maskSprite\", {\r\n        /**\r\n         * A [[Sprite]] element that is used as a series mask.\r\n         *\r\n         * If set, this element's shape will be used to apply shape to the whole\r\n         * stacked pictorial series.\r\n         *\r\n         * You can use this element's `path` property to set an SVG path for the\r\n         * shape:\r\n         *\r\n         * ```TypeScript\r\n         * let iconPath = \"M511.82,329.991c-0.256-1.212-1.064-2.244-2.192-2.784l-24.396-11.684c17.688-29.776,11.804-68.912-15.58-91.88 c-53.756-45.084-131.696-70.936-213.828-70.936c-82.128,0-160.068,25.856-213.82,70.936c-27.416,22.992-33.28,62.18-15.524,91.972 L2.276,327.203c-1.128,0.54-1.936,1.572-2.192,2.792c-0.256,1.22,0.08,2.496,0.896,3.436l21.204,24.388 c0.764,0.88,1.868,1.376,3.02,1.376c0.084,0,0.172,0,0.26-0.008c1.244-0.084,2.384-0.74,3.072-1.776l14.852-22.376 c12.648,10.112,28.392,15.776,44.916,15.776c16.872,0,33.284-5.98,46.232-16.836c27.828-23.34,73.172-37.272,121.288-37.272 c48.12,0,93.464,13.932,121.296,37.272c12.944,10.856,29.36,16.836,46.228,16.836c16.596,0,32.4-5.724,45.08-15.916l14.94,22.512 c0.692,1.04,1.824,1.696,3.076,1.776c0.084,0.008,0.172,0.008,0.256,0.008c1.156,0,2.256-0.496,3.02-1.376l21.2-24.388C511.74,332.487,512.068,331.211,511.82,329.991z\";\r\n         * // ...\r\n         * series.maskSprite.path = iconPath;\r\n         * ```\r\n         * ```JavaScript\r\n         * let iconPath = \"M511.82,329.991c-0.256-1.212-1.064-2.244-2.192-2.784l-24.396-11.684c17.688-29.776,11.804-68.912-15.58-91.88 c-53.756-45.084-131.696-70.936-213.828-70.936c-82.128,0-160.068,25.856-213.82,70.936c-27.416,22.992-33.28,62.18-15.524,91.972 L2.276,327.203c-1.128,0.54-1.936,1.572-2.192,2.792c-0.256,1.22,0.08,2.496,0.896,3.436l21.204,24.388 c0.764,0.88,1.868,1.376,3.02,1.376c0.084,0,0.172,0,0.26-0.008c1.244-0.084,2.384-0.74,3.072-1.776l14.852-22.376 c12.648,10.112,28.392,15.776,44.916,15.776c16.872,0,33.284-5.98,46.232-16.836c27.828-23.34,73.172-37.272,121.288-37.272 c48.12,0,93.464,13.932,121.296,37.272c12.944,10.856,29.36,16.836,46.228,16.836c16.596,0,32.4-5.724,45.08-15.916l14.94,22.512 c0.692,1.04,1.824,1.696,3.076,1.776c0.084,0.008,0.172,0.008,0.256,0.008c1.156,0,2.256-0.496,3.02-1.376l21.2-24.388C511.74,332.487,512.068,331.211,511.82,329.991z\";\r\n         * // ...\r\n         * series.maskSprite.path = iconPath;\r\n         * ```\r\n         * ```JSON\r\n         * let iconPath = \"M511.82,329.991c-0.256-1.212-1.064-2.244-2.192-2.784l-24.396-11.684c17.688-29.776,11.804-68.912-15.58-91.88 c-53.756-45.084-131.696-70.936-213.828-70.936c-82.128,0-160.068,25.856-213.82,70.936c-27.416,22.992-33.28,62.18-15.524,91.972 L2.276,327.203c-1.128,0.54-1.936,1.572-2.192,2.792c-0.256,1.22,0.08,2.496,0.896,3.436l21.204,24.388 c0.764,0.88,1.868,1.376,3.02,1.376c0.084,0,0.172,0,0.26-0.008c1.244-0.084,2.384-0.74,3.072-1.776l14.852-22.376 c12.648,10.112,28.392,15.776,44.916,15.776c16.872,0,33.284-5.98,46.232-16.836c27.828-23.34,73.172-37.272,121.288-37.272 c48.12,0,93.464,13.932,121.296,37.272c12.944,10.856,29.36,16.836,46.228,16.836c16.596,0,32.4-5.724,45.08-15.916l14.94,22.512 c0.692,1.04,1.824,1.696,3.076,1.776c0.084,0.008,0.172,0.008,0.256,0.008c1.156,0,2.256-0.496,3.02-1.376l21.2-24.388C511.74,332.487,512.068,331.211,511.82,329.991z\";\r\n         * // ...\r\n         * {\r\n         *   // ...\r\n         *   \"series\": [{\r\n         *     \"type\": \"PictorialStackedSeries\",\r\n         *     // ...\r\n         *     \"maskSprite\": {\r\n         *       \"path\": iconPath\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @return Mask sprite\r\n         */\r\n        get: function () {\r\n            return this._maskSprite;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Inits FunnelSlice.\r\n     *\r\n     * @param slice to init\r\n     */\r\n    PictorialStackedSeries.prototype.initSlice = function (slice) {\r\n        _super.prototype.initSlice.call(this, slice);\r\n        var hs = slice.states.getKey(\"hover\");\r\n        if (hs) {\r\n            hs.properties.expandDistance = 0;\r\n        }\r\n    };\r\n    Object.defineProperty(PictorialStackedSeries.prototype, \"startLocation\", {\r\n        /**\r\n         * @return  Start location\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startLocation\");\r\n        },\r\n        /**\r\n         * Relative location to start series from.\r\n         *\r\n         * Range of values: 0 to 1.\r\n         *\r\n         * This setting indicates where actual slices will start relatively to the\r\n         * whole height/width of the series.\r\n         *\r\n         * For example, if we want slices to start at 30% from the top/left of the\r\n         * series, we can set `startLocation = 0.3`.\r\n         *\r\n         * To fill shape outside of the location range, use background of the\r\n         * property `slicesContainer`.\r\n         *\r\n         * ```TypeScript\r\n         * series.startLocation = 0.2;\r\n         * series.endLocation = 0.8;\r\n         * series.slicesContainer.background.fill = am4core.color(\"#eee\");\r\n         * ```\r\n         * ```JavaScript\r\n         * series.startLocation = 0.2;\r\n         * series.endLocation = 0.8;\r\n         * series.slicesContainer.background.fill = am4core.color(\"#eee\");\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"series\": [{\r\n         *     // ...\r\n         *     \"startLocation\": 0.2,\r\n         *     \"endLocation\": 0.8,\r\n         *     \"slicesContainer\": {\r\n         *       \"background\": {\r\n         *         \"fill\": \"#eee\"\r\n         *       }\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @default 0\r\n         * @since 4.1.13\r\n         * @param  value  Start location\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"startLocation\", value)) {\r\n                this.invalidateDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PictorialStackedSeries.prototype, \"endLocation\", {\r\n        /**\r\n         * @return End location\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endLocation\");\r\n        },\r\n        /**\r\n         * Relative location to end series at.\r\n         *\r\n         * Range of values: 0 to 1.\r\n         *\r\n         * This setting indicates where actual slices will end relatively to the\r\n         * whole height/width of the series.\r\n         *\r\n         * For example, if we want slices to end at 70% from the top/left of the\r\n         * series, we can set `endLocation = 0.7`.\r\n         *\r\n         * To fill shape outside of the location range, use background of the\r\n         * property `slicesContainer`.\r\n         *\r\n         * ```TypeScript\r\n         * series.startLocation = 0.2;\r\n         * series.endLocation = 0.8;\r\n         * series.slicesContainer.background.fill = am4core.color(\"#eee\");\r\n         * ```\r\n         * ```JavaScript\r\n         * series.startLocation = 0.2;\r\n         * series.endLocation = 0.8;\r\n         * series.slicesContainer.background.fill = am4core.color(\"#eee\");\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"series\": [{\r\n         *     // ...\r\n         *     \"startLocation\": 0.2,\r\n         *     \"endLocation\": 0.8,\r\n         *     \"slicesContainer\": {\r\n         *       \"background\": {\r\n         *         \"fill\": \"#eee\"\r\n         *       }\r\n         *     }\r\n         *   }]\r\n         * }\r\n         * ```\r\n         *\r\n         * @default 1\r\n         * @since 4.1.13\r\n         * @param  value  End location\r\n         */\r\n        set: function (value) {\r\n            if (this.setPropertyValue(\"endLocation\", value)) {\r\n                this.invalidateDataItems();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PictorialStackedSeries;\r\n}(PyramidSeries));\r\nexport { PictorialStackedSeries };\r\n/**\r\n * bboxter class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PictorialStackedSeries\"] = PictorialStackedSeries;\r\nregistry.registeredClasses[\"PictorialStackedSeriesDataItem\"] = PictorialStackedSeriesDataItem;\r\n//# sourceMappingURL=PictorialStackedSeries.js.map","/**\r\n * Module that defines everything related to building Cone Columns.\r\n * It is a container which has coneColumn element which is a Cone.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Column } from \"./Column\";\r\nimport { Cone } from \"../../core/elements/3d/Cone\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates ConeColumns.\r\n *\r\n * @see {@link IConeColumnEvents} for a list of available events\r\n * @see {@link IConeColumnAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar ConeColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ConeColumn, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ConeColumn() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ConeColumn\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    ConeColumn.prototype.createAssets = function () {\r\n        this.coneColumn = this.createChild(Cone);\r\n        this.coneColumn.shouldClone = false;\r\n        // some dirty hack so that if user access column, it won't get error\r\n        this.column = this.coneColumn;\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[ConeColumn]].\r\n     *\r\n     * @param source Source ConeColumn\r\n     */\r\n    ConeColumn.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.coneColumn) {\r\n            this.coneColumn.copyFrom(source.coneColumn);\r\n        }\r\n    };\r\n    return ConeColumn;\r\n}(Column));\r\nexport { ConeColumn };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ConeColumn\"] = ConeColumn;\r\n//# sourceMappingURL=ConeColumn.js.map","/**\r\n * ConeSeries module\r\n * Not recommended using if you use scrollbars or your chart is zoomable in some other way.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ColumnSeries, ColumnSeriesDataItem } from \"./ColumnSeries\";\r\nimport { ConeColumn } from \"../elements/ConeColumn\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[ConeSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar ConeSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ConeSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ConeSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ConeSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return ConeSeriesDataItem;\r\n}(ColumnSeriesDataItem));\r\nexport { ConeSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a cone graph.\r\n *\r\n * @see {@link IConeSeriesEvents} for a list of available Events\r\n * @see {@link IConeSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nvar ConeSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ConeSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ConeSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ConeSeries\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns an element to use for Candlestick\r\n     * @ignore\r\n     * @return Element.\r\n     */\r\n    ConeSeries.prototype.createColumnTemplate = function () {\r\n        return new ConeColumn();\r\n    };\r\n    /**\r\n     * Returns an SVG path to use as series mask.\r\n     *\r\n     * @return SVG path\r\n     */\r\n    ConeSeries.prototype.getMaskPath = function () {\r\n        var dx = 0;\r\n        var dy = 0;\r\n        var column = this.columns.getIndex(0);\r\n        if (column) {\r\n            if (this.baseAxis == this.xAxis) {\r\n                dy = column.coneColumn.innerWidth / 2 + 1;\r\n            }\r\n            else {\r\n                dx = column.coneColumn.innerHeight / 2 + 1;\r\n            }\r\n            return $path.rectToPath({\r\n                x: -dx,\r\n                y: 0,\r\n                width: this.xAxis.axisLength + dx,\r\n                height: this.yAxis.axisLength + dy\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Validates data item's elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    ConeSeries.prototype.validateDataElementReal = function (dataItem) {\r\n        _super.prototype.validateDataElementReal.call(this, dataItem);\r\n        var column = dataItem.column;\r\n        if (column) {\r\n            var coneColumn = dataItem.column.coneColumn;\r\n            coneColumn.fill = dataItem.column.fill;\r\n            if (this.baseAxis == this.yAxis) {\r\n                coneColumn.orientation = \"horizontal\";\r\n            }\r\n            else {\r\n                coneColumn.orientation = \"vertical\";\r\n            }\r\n        }\r\n    };\r\n    return ConeSeries;\r\n}(ColumnSeries));\r\nexport { ConeSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ConeSeries\"] = ConeSeries;\r\nregistry.registeredClasses[\"ConeSeriesDataItem\"] = ConeSeriesDataItem;\r\n//# sourceMappingURL=ConeSeries.js.map","/**\r\n * Module that defines everything related to building Curved Columns.\r\n * It is a container which has CurvedColumn element which is a Sprite.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Column } from \"./Column\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $smoothing from \"../../core/rendering/Smoothing\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Class used to creates CurvedColumns.\r\n *\r\n * @see {@link ICurvedColumnEvents} for a list of available events\r\n * @see {@link ICurvedColumnAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar CurvedColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CurvedColumn, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CurvedColumn() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"CurvedColumn\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * [createAssets description]\r\n     *\r\n     * @todo Description\r\n     * @ignore Exclude from docs\r\n     */\r\n    CurvedColumn.prototype.createAssets = function () {\r\n        this.curvedColumn = this.createChild(Sprite);\r\n        this.curvedColumn.shouldClone = false;\r\n        this.setPropertyValue(\"tension\", 0.7);\r\n        this.width = percent(120);\r\n        this.height = percent(120);\r\n        // some dirty hack so that if user access column, it won't get error\r\n        this.column = this.curvedColumn;\r\n    };\r\n    /**\r\n     * Draws the element.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    CurvedColumn.prototype.draw = function () {\r\n        _super.prototype.draw.call(this);\r\n        var w = this.realWidth;\r\n        var h = this.realHeight;\r\n        var x = this.realX - this.pixelX;\r\n        var y = this.realY - this.pixelY;\r\n        var points;\r\n        // TODO can this be removed ?\r\n        $utils.used(this.width);\r\n        var tensionX = 1;\r\n        var tensionY = 1;\r\n        if (this.orientation == \"vertical\") {\r\n            tensionX = this.tension;\r\n            points = [{ x: 0, y: h + y }, { x: w / 2, y: y }, { x: w, y: h + y }];\r\n        }\r\n        else {\r\n            tensionY = this.tension;\r\n            points = [{ x: x, y: 0 }, { x: x + w, y: h / 2 }, { x: x, y: h }];\r\n        }\r\n        var path = $path.moveTo(points[0]) + new $smoothing.Tension(tensionX, tensionY).smooth(points);\r\n        this.column.path = path;\r\n    };\r\n    /**\r\n     * Copies all parameters from another [[CurvedColumn]].\r\n     *\r\n     * @param source  Source CurvedColumn\r\n     */\r\n    CurvedColumn.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        if (this.curvedColumn) {\r\n            this.curvedColumn.copyFrom(source.curvedColumn);\r\n        }\r\n    };\r\n    Object.defineProperty(CurvedColumn.prototype, \"tension\", {\r\n        /**\r\n         * @return Tension (0-1)\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"tension\");\r\n        },\r\n        /**\r\n         * Horizontal tension of the curve.\r\n         *\r\n         * Tension defines how \"lose\" the line will be.\r\n         *\r\n         * 1 is the maximum tension which would result in pointy columns with\r\n         * straight edges.\r\n         *\r\n         * The smaller the tension th wider the column will be.\r\n         *\r\n         * @default 0.7\r\n         * @param value tension (0-1)\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"tension\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CurvedColumn.prototype, \"orientation\", {\r\n        /**\r\n         * Orientation\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"orientation\");\r\n        },\r\n        /**\r\n         * Orientation of the column.\r\n         *\r\n         * Available options: \"vertical\" (default) and \"horizontal\".\r\n         *\r\n         * @default \"vertical\"\r\n         * @param value  Orientation\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"orientation\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return CurvedColumn;\r\n}(Column));\r\nexport { CurvedColumn };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"CurvedColumn\"] = CurvedColumn;\r\n//# sourceMappingURL=CurvedColumn.js.map","/**\r\n * CurvedColumnSeries module.\r\n *\r\n * Not recommended using if you use scrollbars or your chart is zoomable in some other way.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ColumnSeries, ColumnSeriesDataItem } from \"./ColumnSeries\";\r\nimport { CurvedColumn } from \"../elements/CurvedColumn\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[CurvedColumnSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar CurvedColumnSeriesDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CurvedColumnSeriesDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CurvedColumnSeriesDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"CurvedColumnSeriesDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return CurvedColumnSeriesDataItem;\r\n}(ColumnSeriesDataItem));\r\nexport { CurvedColumnSeriesDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines [[Series]] for a curved columns graph.\r\n *\r\n * @see {@link ICurvedColumnSeriesEvents} for a list of available Events\r\n * @see {@link ICurvedColumnSeriesAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar CurvedColumnSeries = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CurvedColumnSeries, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CurvedColumnSeries() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"CurvedColumnSeries\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns an element to use for the curved column.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @return Element.\r\n     */\r\n    CurvedColumnSeries.prototype.createColumnTemplate = function () {\r\n        return new CurvedColumn();\r\n    };\r\n    /**\r\n     * Validates data item's elements.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    CurvedColumnSeries.prototype.validateDataElementReal = function (dataItem) {\r\n        _super.prototype.validateDataElementReal.call(this, dataItem);\r\n        var column = dataItem.column;\r\n        column = dataItem.column;\r\n        if (column) {\r\n            var curvedColumn = dataItem.column.curvedColumn;\r\n            curvedColumn.fill = dataItem.column.fill;\r\n            if (this.baseAxis == this.yAxis) {\r\n                column.orientation = \"horizontal\";\r\n            }\r\n            else {\r\n                column.orientation = \"vertical\";\r\n            }\r\n        }\r\n    };\r\n    return CurvedColumnSeries;\r\n}(ColumnSeries));\r\nexport { CurvedColumnSeries };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"CurvedColumnSeries\"] = CurvedColumnSeries;\r\nregistry.registeredClasses[\"CurvedColumnSeriesDataItem\"] = CurvedColumnSeriesDataItem;\r\n//# sourceMappingURL=CurvedColumnSeries.js.map","/**\r\n * DurationAxis module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ValueAxis, ValueAxisDataItem } from \"./ValueAxis\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines data item for [[DurationAxis]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar DurationAxisDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DurationAxisDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function DurationAxisDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"DurationAxisDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    return DurationAxisDataItem;\r\n}(ValueAxisDataItem));\r\nexport { DurationAxisDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Used to create an axis that shows time durations.\r\n *\r\n * ```TypeScript\r\n * // Create the axis\r\n * let xAxis = chart.xAxes.push(new am4charts.DurationAxis());\r\n *\r\n * // Set settings\r\n * xAxis.title.text = \"Time\";\r\n * ```\r\n * ```JavaScript\r\n * // Create the axis\r\n * var valueAxis = chart.xAxes.push(new am4charts.DurationAxis());\r\n *\r\n * // Set settings\r\n * valueAxis.title.text = \"Time\";\r\n * ```\r\n * ```JSON\r\n * \"xAxes\": [{\r\n *   \"type\": \"DurationAxis\",\r\n *   \"title\": {\r\n *     \"text\": \"Time\"\r\n *   }\r\n * }]\r\n * ```\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/} for mor information about duration formatters.\r\n * @see {@link IDurationAxisEvents} for a list of available Events\r\n * @see {@link IDurationAxisAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nvar DurationAxis = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DurationAxis, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function DurationAxis() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * A base unit (granularity) of data.\r\n         *\r\n         * Used to indicate what are the base units of your data.\r\n         */\r\n        _this._baseUnit = \"second\";\r\n        _this.className = \"DurationAxis\";\r\n        _this.setPropertyValue(\"maxZoomFactor\", 1000000);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Formats the value according to axis' own [[DurationFormatter]].\r\n     *\r\n     * @param value  Source value\r\n     * @return Formatted value\r\n     */\r\n    DurationAxis.prototype.formatLabel = function (value, format) {\r\n        return this.durationFormatter.format(value, format || this.axisDurationFormat);\r\n    };\r\n    /**\r\n     * Adjusts actual min and max scale values so that the axis starts and ends\r\n     * at \"nice\" values, unless `strictMinMax` is set.\r\n     *\r\n     * The `difference` can be something else than `max - min`, because of the\r\n     * axis breaks.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @todo Description\r\n     * @param min        [description]\r\n     * @param max        [description]\r\n     * @param difference [description]\r\n     * @param gridCount  [description]\r\n     * @param strictMode [description]\r\n     * @return [description]\r\n     */\r\n    DurationAxis.prototype.adjustMinMax = function (min, max, difference, gridCount, strictMode) {\r\n        var minMaxStep;\r\n        var timeUnit = this.baseUnit;\r\n        // we don't allow to go to smaller units, setting so to avoid invalidation\r\n        this.setPropertyValue(\"maxPrecision\", 0);\r\n        if (timeUnit == \"millisecond\" || timeUnit == \"second\" || timeUnit == \"minute\" || timeUnit == \"hour\") {\r\n            // will fail if 0\r\n            if (gridCount <= 1) {\r\n                gridCount = 1;\r\n            }\r\n            gridCount = Math.round(gridCount);\r\n            var initialMin = min;\r\n            var initialMax = max;\r\n            // in case min and max is the same, use max\r\n            if (difference === 0) {\r\n                difference = Math.abs(max);\r\n            }\r\n            var step = difference / gridCount;\r\n            var divisors = [60, 30, 20, 15, 10, 2, 1];\r\n            var realDivisor = 1;\r\n            if (timeUnit == \"hour\") {\r\n                divisors = [24, 12, 6, 4, 2, 1];\r\n            }\r\n            try {\r\n                for (var divisors_1 = tslib_1.__values(divisors), divisors_1_1 = divisors_1.next(); !divisors_1_1.done; divisors_1_1 = divisors_1.next()) {\r\n                    var divisor = divisors_1_1.value;\r\n                    if (difference / divisor > gridCount) {\r\n                        realDivisor = divisor;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (divisors_1_1 && !divisors_1_1.done && (_a = divisors_1.return)) _a.call(divisors_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n            var count = Math.ceil(((max - min) / realDivisor) / gridCount);\r\n            var exponent = Math.log(Math.abs(count)) * Math.LOG10E;\r\n            var power = Math.pow(10, Math.floor(exponent)) / 10;\r\n            var reducedCount = count / power;\r\n            // find closest to divisor\r\n            var closest = $math.closest(divisors, reducedCount);\r\n            count = closest * power;\r\n            step = realDivisor * count;\r\n            // TODO can this be removed ?\r\n            this.durationFormatter.getValueUnit(step, this.baseUnit);\r\n            min = Math.floor(min / step) * step;\r\n            max = Math.ceil(max / step) * step;\r\n            if (strictMode) {\r\n                min -= step;\r\n                if (min < 0 && initialMin >= 0) {\r\n                    min = 0;\r\n                }\r\n                max += step;\r\n                if (max > 0 && initialMax <= 0) {\r\n                    max = 0;\r\n                }\r\n            }\r\n            minMaxStep = { min: min, max: max, step: step };\r\n        }\r\n        else {\r\n            minMaxStep = _super.prototype.adjustMinMax.call(this, min, max, difference, gridCount, strictMode);\r\n        }\r\n        // choose duration formatter based on step\r\n        this.axisDurationFormat = this.durationFormatter.getFormat(minMaxStep.step, minMaxStep.max, this.baseUnit);\r\n        return minMaxStep;\r\n        var e_1, _a;\r\n    };\r\n    Object.defineProperty(DurationAxis.prototype, \"tooltipDurationFormat\", {\r\n        /**\r\n         * @return Duration format for axis labels\r\n         */\r\n        get: function () {\r\n            return this._tooltipDurationFormat;\r\n        },\r\n        /**\r\n         * A special duration format to apply axis tooltips.\r\n         *\r\n         * Will use same format as for labels, if not set.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/} for mor information.\r\n         * @param value  Duration format for axis labels\r\n         */\r\n        set: function (value) {\r\n            this._tooltipDurationFormat = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns text to show in a axis tooltip, based on specific position within\r\n     * axis.\r\n     *\r\n     * The label will be formatted as per [[NumberFormatter]] set for the whole\r\n     * chart, or explicitly for this Axis.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param position  Position (px)\r\n     * @return Label (numeric value)\r\n     */\r\n    DurationAxis.prototype.getTooltipText = function (position) {\r\n        var value = $math.round(this.positionToValue(position), this._stepDecimalPlaces);\r\n        var valueStr = this.formatLabel(value, this.tooltipDurationFormat);\r\n        if (!this._adapterO) {\r\n            return valueStr;\r\n        }\r\n        else {\r\n            return this._adapterO.apply(\"getTooltipText\", valueStr);\r\n        }\r\n    };\r\n    Object.defineProperty(DurationAxis.prototype, \"baseUnit\", {\r\n        /**\r\n         * @return Base unit\r\n         */\r\n        get: function () {\r\n            return this._baseUnit;\r\n        },\r\n        /**\r\n         * A base unit (granularity) of data.\r\n         *\r\n         * Used to indicate what are the base units of your data.\r\n         *\r\n         * Available options: \"millisecond\", \"second\" (default), \"minute\", \"hour\",\r\n         * \"day\", \"week\", \"month\", \"year\".\r\n         *\r\n         * @default \"second\"\r\n         * @param timeUnit\r\n         */\r\n        set: function (timeUnit) {\r\n            if (this._baseUnit != timeUnit) {\r\n                this._baseUnit = timeUnit;\r\n                this.durationFormatter.baseUnit = timeUnit;\r\n                this.invalidate();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Copies all properties and related data from a different instance of Axis.\r\n     *\r\n     * @param source Source Axis\r\n     */\r\n    DurationAxis.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.baseUnit = source.baseUnit;\r\n    };\r\n    return DurationAxis;\r\n}(ValueAxis));\r\nexport { DurationAxis };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"DurationAxis\"] = DurationAxis;\r\nregistry.registeredClasses[\"DurationAxisDataItem\"] = DurationAxisDataItem;\r\n//# sourceMappingURL=DurationAxis.js.map","/**\r\n * Bullet module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Bullet } from \"./Bullet\";\r\nimport { Circle } from \"../../core/elements/Circle\";\r\nimport { registry } from \"../../core/Registry\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a bullet with a textual label.\r\n *\r\n * Uses [[Label]] instance to draw the label, so the label itself is\r\n * configurable.\r\n *\r\n * @see {@link IBulletEvents} for a list of available events\r\n * @see {@link IBulletAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar CircleBullet = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CircleBullet, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function CircleBullet() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"CircleBullet\";\r\n        var circle = _this.createChild(Circle);\r\n        circle.shouldClone = false;\r\n        circle.radius = 5;\r\n        circle.isMeasured = false;\r\n        _this.circle = circle;\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Copies all proprities and related stuff from another instance of\r\n     * [[CircleBullet]].\r\n     *\r\n     * @param source  Source element\r\n     */\r\n    CircleBullet.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.circle.copyFrom(source.circle);\r\n    };\r\n    return CircleBullet;\r\n}(Bullet));\r\nexport { CircleBullet };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"CircleBullet\"] = CircleBullet;\r\n//# sourceMappingURL=CircleBullet.js.map","/**\r\n * Bullet module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Bullet } from \"./Bullet\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Creates a bullet with a textual label.\r\n *\r\n * Uses [[Label]] instance to draw the label, so the label itself is\r\n * configurable.\r\n *\r\n * @see {@link IBulletEvents} for a list of available events\r\n * @see {@link IBulletAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nvar ErrorBullet = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ErrorBullet, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ErrorBullet() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"ErrorBullet\";\r\n        _this.errorLine = _this.createChild(Sprite);\r\n        _this.errorLine.shouldClone = false;\r\n        _this.width = 20;\r\n        _this.height = 20;\r\n        _this.strokeOpacity = 1;\r\n        _this.isDynamic = true;\r\n        return _this;\r\n    }\r\n    ErrorBullet.prototype.validatePosition = function () {\r\n        _super.prototype.validatePosition.call(this);\r\n        var w = this.pixelWidth / 2;\r\n        var h = this.pixelHeight / 2;\r\n        this.errorLine.path = $path.moveTo({ x: -w, y: -h }) + $path.lineTo({ x: w, y: -h }) + $path.moveTo({ x: 0, y: -h }) + $path.lineTo({ x: 0, y: h }) + $path.moveTo({ x: -w, y: h }) + $path.lineTo({ x: w, y: h });\r\n    };\r\n    /**\r\n     * Copies all proprities and related stuff from another instance of\r\n     * [[ErrorBullet]].\r\n     *\r\n     * @param source  Source element\r\n     */\r\n    ErrorBullet.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.errorLine.copyFrom(source.errorLine);\r\n    };\r\n    return ErrorBullet;\r\n}(Bullet));\r\nexport { ErrorBullet };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ErrorBullet\"] = ErrorBullet;\r\n//# sourceMappingURL=ErrorBullet.js.map","/**\r\n * Functionality for drawing simple NavigationBar.\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component } from \"../../core/Component\";\r\nimport { DataItem } from \"../../core/DataItem\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { TextLink } from \"../../core/elements/TextLink\";\r\nimport { Triangle } from \"../../core/elements/Triangle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Defines a [[DataItem]] for [[NavigationBar]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nvar NavigationBarDataItem = /** @class */ (function (_super) {\r\n    tslib_1.__extends(NavigationBarDataItem, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function NavigationBarDataItem() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className = \"NavigationBarDataItem\";\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(NavigationBarDataItem.prototype, \"name\", {\r\n        /**\r\n         * @return Name\r\n         */\r\n        get: function () {\r\n            return this.properties[\"name\"];\r\n        },\r\n        /**\r\n         * Name of the navigation bar item.\r\n         *\r\n         * @param value  Name\r\n         */\r\n        set: function (value) {\r\n            this.setProperty(\"name\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return NavigationBarDataItem;\r\n}(DataItem));\r\nexport { NavigationBarDataItem };\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * NavigationBar class can be used to create a multi-level breadcrumb-style\r\n * navigation control.\r\n *\r\n * @see {@link INavigationBarEvents} for a list of available events\r\n * @see {@link INavigationBarAdapters} for a list of available Adapters\r\n * @todo Implement better\r\n * @important\r\n */\r\nvar NavigationBar = /** @class */ (function (_super) {\r\n    tslib_1.__extends(NavigationBar, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function NavigationBar() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"NavigationBar\";\r\n        var interfaceColors = new InterfaceColorSet();\r\n        var textLink = new TextLink();\r\n        textLink.valign = \"middle\";\r\n        textLink.paddingTop = 8;\r\n        textLink.paddingBottom = 8;\r\n        _this.paddingBottom = 2;\r\n        _this.links = new ListTemplate(textLink);\r\n        _this._disposers.push(new ListDisposer(_this.links));\r\n        _this._disposers.push(textLink);\r\n        _this._linksIterator = new $iter.ListIterator(_this.links, function () { return _this.links.create(); });\r\n        _this._linksIterator.createNewItems = true;\r\n        var triangle = new Triangle();\r\n        triangle.direction = \"right\";\r\n        triangle.width = 8;\r\n        triangle.height = 12;\r\n        triangle.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n        triangle.fillOpacity = 0.5;\r\n        triangle.valign = \"middle\";\r\n        triangle.marginLeft = 10;\r\n        triangle.marginRight = 10;\r\n        _this.separators = new ListTemplate(triangle);\r\n        _this._disposers.push(new ListDisposer(_this.separators));\r\n        _this._disposers.push(triangle);\r\n        var activeLink = new TextLink();\r\n        _this.activeLink = activeLink;\r\n        activeLink.copyFrom(textLink);\r\n        activeLink.valign = \"middle\";\r\n        activeLink.fontWeight = \"bold\";\r\n        _this.width = percent(100);\r\n        _this.layout = \"grid\";\r\n        _this.dataFields.name = \"name\";\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Completely redraws the navigation bar.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    NavigationBar.prototype.validateDataElements = function () {\r\n        this.removeChildren();\r\n        this._linksIterator.reset();\r\n        _super.prototype.validateDataElements.call(this);\r\n        //@todo: dispose\r\n    };\r\n    /**\r\n     * Creates a visual element for a data item (nav item).\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param dataItem  Data item\r\n     */\r\n    NavigationBar.prototype.validateDataElement = function (dataItem) {\r\n        _super.prototype.validateDataElement.call(this, dataItem);\r\n        var textLink;\r\n        if (dataItem.index < this.dataItems.length - 1) {\r\n            textLink = this._linksIterator.getLast();\r\n            textLink.parent = this;\r\n            var separator = this.separators.create();\r\n            separator.parent = this;\r\n            separator.valign = \"middle\";\r\n        }\r\n        else {\r\n            textLink = this.activeLink;\r\n            textLink.events.copyFrom(this.links.template.events);\r\n            textLink.hide(0);\r\n            textLink.show();\r\n            textLink.parent = this;\r\n        }\r\n        textLink.dataItem = dataItem;\r\n        textLink.text = dataItem.name;\r\n        textLink.validate();\r\n    };\r\n    return NavigationBar;\r\n}(Component));\r\nexport { NavigationBar };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"NavigationBar\"] = NavigationBar;\r\nregistry.registeredClasses[\"NavigationBarDataItem\"] = NavigationBarDataItem;\r\n//# sourceMappingURL=NavigationBar.js.map","/**\r\n * Cursor module\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../../core/Container\";\r\nimport { getInteraction } from \"../../core/interaction/Interaction\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { MouseCursorStyle } from \"../../core/interaction/Mouse\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { system } from \"../../core/System\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Main Cursor class with common cursor functionality.\r\n *\r\n * Chart-specific cursors must extend this class.\r\n *\r\n * @see {@link ICursorEvents} for a list of available events\r\n * @see {@link ICursorAdapters} for a list of available Adapters\r\n * @todo Add description, examples\r\n * @todo Should we allow changing `_generalBehavior`?\r\n */\r\nvar Cursor = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Cursor, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Cursor() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Current cursor position during selection.\r\n         *\r\n         * @todo Better description\r\n         */\r\n        _this.point = { x: 0, y: 0 };\r\n        /**\r\n         * Specifies the rules when cursor needs to be moved or hidden.\r\n         */\r\n        _this._stick = \"none\";\r\n        _this.className = \"Cursor\";\r\n        // Set defaults\r\n        _this.width = percent(100);\r\n        _this.height = percent(100);\r\n        _this.shouldClone = false;\r\n        _this.hide(0);\r\n        _this.trackable = true;\r\n        _this.clickable = true;\r\n        _this.isMeasured = false;\r\n        // Add events on body to trigger down and up events (to start zooming or\r\n        // selection)\r\n        var interaction = getInteraction();\r\n        _this._disposers.push(interaction.body.events.on(\"down\", _this.handleCursorDown, _this));\r\n        _this._disposers.push(interaction.body.events.on(\"up\", _this.handleCursorUp, _this));\r\n        _this._disposers.push(interaction.body.events.on(\"track\", _this.handleCursorMove, _this));\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Handle pointer movement in document and update cursor position as needed.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event Event\r\n     */\r\n    Cursor.prototype.handleCursorMove = function (event) {\r\n        if (!this.interactionsEnabled || (this.interactions.isTouchProtected && event.touch)) {\r\n            return;\r\n        }\r\n        if (((this._generalBehavior != \"zoom\" && this._generalBehavior != \"pan\") || !this.downPoint) && !getInteraction().isLocalElement(event.pointer, this.paper.svg, this.uid)) {\r\n            // We want to let zoom/pan continue even if cursor is outside chart area\r\n            if (!this.isHidden || !this.isHiding) {\r\n                this.hide();\r\n            }\r\n            return;\r\n        }\r\n        var local = $utils.documentPointToSprite(event.pointer.point, this);\r\n        if (this._stick == \"hard\" && this._stickPoint) {\r\n            local = this._stickPoint;\r\n        }\r\n        if (this._stick == \"soft\" && this._stickPoint) {\r\n            if (!this.fitsToBounds(local)) {\r\n                local = this._stickPoint;\r\n            }\r\n        }\r\n        this.triggerMove(local);\r\n        return local;\r\n    };\r\n    /**\r\n     * Hides actual SVG elements and handles hiding animations.\r\n     *\r\n     * @param duration  Fade out duration (ms)\r\n     * @return Fade out duration (ms)\r\n     * @ignore\r\n     */\r\n    Cursor.prototype.hideReal = function (duration) {\r\n        if ((this._stick == \"hard\" || this._stick == \"soft\") && this._stickPoint) {\r\n            return;\r\n        }\r\n        return _super.prototype.hideReal.call(this, duration);\r\n    };\r\n    /**\r\n     * Places the cursor at specific point.\r\n     *\r\n     * The second parameter has following options:\r\n     *\r\n     * `\"none\"` - placed cursor will only be there until mouse/touch moves, then\r\n     * it either moves to a new place (if pointer over plot area) or is hidden.\r\n     *\r\n     * `\"soft\"` - cursor will stay in the place if mouse/touch is happening\r\n     * outside chart, but will move to a new place whe plot area is hovered or\r\n     * touched.\r\n     *\r\n     * `\"hard\"` - cursor will stay in place no matter what, until it is moved by\r\n     * another `triggerMove()` call.\r\n     *\r\n     * @param point  Point to place cursor at\r\n     * @param stick  Level of cursor stickiness to the place\r\n     */\r\n    Cursor.prototype.triggerMove = function (point, stick) {\r\n        point.x = $math.round(point.x, 1);\r\n        point.y = $math.round(point.y, 1);\r\n        if (stick) {\r\n            this._stick = stick;\r\n        }\r\n        if (stick == \"hard\" || stick == \"soft\") {\r\n            this._stickPoint = point;\r\n        }\r\n        this.triggerMoveReal(point);\r\n    };\r\n    /**\r\n     * Places the cursor at specific point.\r\n     *\r\n     * @param point Point to place cursor at\r\n     */\r\n    Cursor.prototype.triggerMoveReal = function (point) {\r\n        if (this.point.x != point.x || this.point.y != point.y) {\r\n            this.point = point;\r\n            this.invalidatePosition();\r\n            // hide cursor if it's out of bounds\r\n            if (this.fitsToBounds(point)) {\r\n                this.show(0);\r\n            }\r\n            else {\r\n                // unless we are selecting (mouse is down)\r\n                if (!this.downPoint) {\r\n                    this.hide(0);\r\n                }\r\n            }\r\n            if (this.visible) {\r\n                this.getPositions();\r\n                this.dispatch(\"cursorpositionchanged\"); // not good to dispatch later (check step count example)\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Simulates pressing down (click/touch) action by a cursor.\r\n     *\r\n     * @param point               Point of action\r\n     */\r\n    Cursor.prototype.triggerDown = function (point) {\r\n        this.triggerDownReal(point);\r\n    };\r\n    /**\r\n     * Simulates pressing down (click/touch) action by a cursor.\r\n     *\r\n     * @param point               Point of action\r\n     */\r\n    Cursor.prototype.triggerDownReal = function (point) {\r\n        switch (this._generalBehavior) {\r\n            case \"zoom\":\r\n                this.dispatchImmediately(\"zoomstarted\");\r\n                break;\r\n            case \"select\":\r\n                this.dispatchImmediately(\"selectstarted\");\r\n                break;\r\n            case \"pan\":\r\n                this.dispatchImmediately(\"panstarted\");\r\n                getInteraction().setGlobalStyle(MouseCursorStyle.grabbing);\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Simulates the action of release of the mouse down / touch.\r\n     *\r\n     * @param point               Point of action\r\n     */\r\n    Cursor.prototype.triggerUp = function (point) {\r\n        this.triggerUpReal(point);\r\n    };\r\n    /**\r\n     * Simulates the action of release of the mouse down / touch.\r\n     *\r\n     * @param point               Point of action\r\n     */\r\n    Cursor.prototype.triggerUpReal = function (point) {\r\n        system.requestFrame();\r\n        this.updatePoint(this.upPoint);\r\n        var interaction = getInteraction();\r\n        if ($math.getDistance(this._upPointOrig, this._downPointOrig) > interaction.getHitOption(this.interactions, \"hitTolerance\")) {\r\n            switch (this._generalBehavior) {\r\n                case \"zoom\":\r\n                    this.dispatch(\"zoomended\");\r\n                    break;\r\n                case \"select\":\r\n                    this.dispatch(\"selectended\");\r\n                    break;\r\n                case \"pan\":\r\n                    this.dispatch(\"panended\");\r\n                    interaction.setGlobalStyle(MouseCursorStyle.default);\r\n                    break;\r\n            }\r\n            this.downPoint = undefined;\r\n            this.updateSelection();\r\n        }\r\n        /*\r\n        else {\r\n            \r\n            if(this._generalBehavior == \"select\"){\r\n                this.dispatchImmediately(\"selectended\");\r\n            }\r\n            this.dispatchImmediately(\"behaviorcanceled\");\r\n            interaction.setGlobalStyle(MouseCursorStyle.default);\r\n            this.downPoint = undefined;\r\n        }*/\r\n    };\r\n    /**\r\n     * Updates selection dimensions on size change.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Cursor.prototype.updateSelection = function () {\r\n    };\r\n    /**\r\n     * Updates cursors current positions.\r\n     */\r\n    Cursor.prototype.getPositions = function () {\r\n        // positions are used by axes or series\r\n        this.xPosition = this.point.x / this.innerWidth;\r\n        this.yPosition = 1 - this.point.y / this.innerHeight;\r\n    };\r\n    /**\r\n     * Handles pointer down event so we can start zoom or selection.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event Original event\r\n     */\r\n    Cursor.prototype.handleCursorDown = function (event) {\r\n        if (!this.interactionsEnabled || (this.interactions.isTouchProtected && event.touch) || !getInteraction().isLocalElement(event.pointer, this.paper.svg, this.uid)) {\r\n            return;\r\n        }\r\n        // Get local point\r\n        var local = $utils.documentPointToSprite(event.pointer.point, this);\r\n        this._downPointOrig = { x: local.x, y: local.y };\r\n        // We need to cancel the event to prevent gestures on touch devices\r\n        if (event.event.cancelable && this.shouldPreventGestures(event.touch) && this.fitsToBounds(local)) {\r\n            event.event.preventDefault();\r\n        }\r\n        // Make this happen\r\n        this.triggerMove(local);\r\n        this.triggerDown(local);\r\n    };\r\n    /**\r\n     * Determines whether Cursor should prevent default action on move.\r\n     *\r\n     * Child classes should override this as necessary.\r\n     *\r\n     * @return Prevent default?\r\n     */\r\n    Cursor.prototype.shouldPreventGestures = function (touch) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Updates the coordinates of where pointer down event occurred\r\n     * (was pressed).\r\n     */\r\n    Cursor.prototype.updatePoint = function (point) {\r\n    };\r\n    /**\r\n     * Handles pointer up event - finishes zoom or selection action.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event Original event\r\n     */\r\n    Cursor.prototype.handleCursorUp = function (event) {\r\n        if (!this.interactionsEnabled) {\r\n            return;\r\n        }\r\n        if (((this._generalBehavior != \"zoom\" && this._generalBehavior != \"pan\") || !this.downPoint) && !getInteraction().isLocalElement(event.pointer, this.paper.svg, this.uid)) {\r\n            return;\r\n        }\r\n        var local = $utils.documentPointToSprite(event.pointer.point, this);\r\n        this._upPointOrig = { x: local.x, y: local.y };\r\n        this.triggerMove(local);\r\n        this.triggerUp(local);\r\n    };\r\n    Object.defineProperty(Cursor.prototype, \"chart\", {\r\n        /**\r\n         * @return Chart\r\n         */\r\n        get: function () {\r\n            return this._chart;\r\n        },\r\n        /**\r\n         * A reference to a [[Chart]] the cursor belongs to.\r\n         *\r\n         * @param value  Chart\r\n         */\r\n        set: function (value) {\r\n            this._chart = value;\r\n            if ($type.hasValue(this._chart.plotContainer)) {\r\n                getInteraction().lockElement(this._chart.plotContainer.interactions);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Cursor;\r\n}(Container));\r\nexport { Cursor };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Cursor\"] = Cursor;\r\n//# sourceMappingURL=Cursor.js.map","/**\r\n * Cursor for XY chart\r\n */\r\nimport * as tslib_1 from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Cursor } from \"./Cursor\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { MutableValueDisposer, MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { getInteraction } from \"../../core/interaction/Interaction\";\r\nimport { MouseCursorStyle } from \"../../core/interaction/Mouse\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * A cursor used on [[XYChart]].\r\n *\r\n * @see {@link IXYCursorEvents} for a list of available events\r\n * @see {@link IXYCursorAdapters} for a list of available Adapters\r\n * @todo Add description, examples\r\n */\r\nvar XYCursor = /** @class */ (function (_super) {\r\n    tslib_1.__extends(XYCursor, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function XYCursor() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Vertical cursor line element.\r\n         */\r\n        _this._lineX = new MutableValueDisposer();\r\n        /**\r\n         * Horizontal cursor line element.\r\n         */\r\n        _this._lineY = new MutableValueDisposer();\r\n        /**\r\n         * Horizontal [[Axis]].\r\n         */\r\n        _this._xAxis = new MutableValueDisposer();\r\n        /**\r\n         * Vertical [[Axis]].\r\n         */\r\n        _this._yAxis = new MutableValueDisposer();\r\n        _this.className = \"XYCursor\";\r\n        // Defaults\r\n        _this.behavior = \"zoomX\";\r\n        _this.maxPanOut = 0.1;\r\n        var interfaceColors = new InterfaceColorSet();\r\n        // Create selection element\r\n        var selection = _this.createChild(Sprite);\r\n        selection.shouldClone = false;\r\n        selection.fillOpacity = 0.2;\r\n        selection.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n        selection.isMeasured = false;\r\n        selection.visible = false;\r\n        selection.interactionsEnabled = false;\r\n        _this.selection = selection;\r\n        _this._disposers.push(_this.selection);\r\n        // Create cursor's vertical line\r\n        var lineX = _this.createChild(Sprite);\r\n        lineX.shouldClone = false;\r\n        lineX.stroke = interfaceColors.getFor(\"grid\");\r\n        lineX.fill = color();\r\n        lineX.strokeDasharray = \"3,3\";\r\n        lineX.isMeasured = false;\r\n        lineX.strokeOpacity = 0.4;\r\n        lineX.interactionsEnabled = false;\r\n        lineX.y = 0; // important\r\n        _this.lineX = lineX;\r\n        _this._disposers.push(_this.lineX);\r\n        // Create cursor's horizontal line\r\n        var lineY = _this.createChild(Sprite);\r\n        lineY.shouldClone = false;\r\n        lineY.stroke = interfaceColors.getFor(\"grid\");\r\n        lineY.fill = color();\r\n        lineY.strokeDasharray = \"3,3\";\r\n        lineY.isMeasured = false;\r\n        lineY.strokeOpacity = 0.4;\r\n        lineY.interactionsEnabled = false;\r\n        lineY.x = 0; // important\r\n        _this.lineY = lineY;\r\n        _this._disposers.push(_this.lineY);\r\n        // Add handler for size changes\r\n        _this.events.on(\"sizechanged\", _this.updateSize, _this, false);\r\n        _this._disposers.push(_this._lineX);\r\n        _this._disposers.push(_this._lineY);\r\n        _this._disposers.push(_this._xAxis);\r\n        _this._disposers.push(_this._yAxis);\r\n        _this.mask = _this;\r\n        _this.hideSeriesTooltipsOnSelection = true;\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Updates cursor element dimensions on size change.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYCursor.prototype.updateSize = function () {\r\n        if (this.lineX) {\r\n            this.lineX.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: this.innerHeight });\r\n        }\r\n        if (this.lineY) {\r\n            this.lineY.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: this.innerWidth, y: 0 });\r\n        }\r\n    };\r\n    /**\r\n     * Updates selection dimensions on size change.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYCursor.prototype.updateSelection = function () {\r\n        if (this._usesSelection) {\r\n            var downPoint = this.downPoint;\r\n            var behavior = this.behavior;\r\n            if (downPoint) {\r\n                var point = this.point;\r\n                if (this.lineX) {\r\n                    point.x = this.lineX.pixelX;\r\n                }\r\n                if (this.lineY) {\r\n                    point.y = this.lineY.pixelY;\r\n                }\r\n                var selection = this.selection;\r\n                var x = Math.min(point.x, downPoint.x);\r\n                var y = Math.min(point.y, downPoint.y);\r\n                var w = $math.round(Math.abs(downPoint.x - point.x), this._positionPrecision);\r\n                var h = $math.round(Math.abs(downPoint.y - point.y), this._positionPrecision);\r\n                switch (behavior) {\r\n                    case \"zoomX\":\r\n                        y = 0;\r\n                        h = this.pixelHeight;\r\n                        break;\r\n                    case \"zoomY\":\r\n                        x = 0;\r\n                        w = this.pixelWidth;\r\n                        break;\r\n                    case \"selectX\":\r\n                        y = 0;\r\n                        h = this.pixelHeight;\r\n                        break;\r\n                    case \"selectY\":\r\n                        x = 0;\r\n                        w = this.pixelWidth;\r\n                        break;\r\n                }\r\n                selection.x = x;\r\n                selection.y = y;\r\n                selection.path = $path.rectangle(w, h);\r\n                selection.validatePosition(); // otherwise Edge shoes some incorrect size rectangle\r\n            }\r\n            else {\r\n                if (this._generalBehavior != \"select\") {\r\n                    this.selection.hide();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYCursor.prototype.fixPoint = function (point) {\r\n        point.x = Math.max(0, point.x);\r\n        point.y = Math.max(0, point.y);\r\n        point.x = Math.min(this.pixelWidth, point.x);\r\n        point.y = Math.min(this.pixelHeight, point.y);\r\n        return point;\r\n    };\r\n    /**\r\n     * Places the cursor at specific point.\r\n     *\r\n     * @param point Point to place cursor at\r\n     */\r\n    XYCursor.prototype.triggerMoveReal = function (point) {\r\n        _super.prototype.triggerMoveReal.call(this, point);\r\n        if ((this.snapToSeries && !this.snapToSeries.isHidden)) {\r\n        }\r\n        else {\r\n            this.updateLinePositions(point);\r\n        }\r\n        if (this.downPoint && $math.getDistance(this.downPoint, point) > 3) {\r\n            if (this._generalBehavior == \"pan\") {\r\n                this.getPanningRanges();\r\n                this.dispatch(\"panning\");\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    XYCursor.prototype.updateLinePositions = function (point) {\r\n        point = this.fixPoint(this.point);\r\n        if (this.lineX && this.lineX.visible && !this.xAxis) {\r\n            this.lineX.x = point.x;\r\n        }\r\n        if (this.lineY && this.lineY.visible && !this.yAxis) {\r\n            this.lineY.y = point.y;\r\n        }\r\n        this.updateSelection();\r\n    };\r\n    XYCursor.prototype.triggerDownReal = function (point) {\r\n        if (this.visible && !this.isHiding) {\r\n            if (this._generalBehavior == \"select\") {\r\n                this.selection.parent = this.parent;\r\n            }\r\n            if (this.fitsToBounds(point)) {\r\n                this.downPoint = { x: point.x, y: point.y };\r\n                this.updatePoint(point);\r\n                //this.updateLinePositions(point); // otherwise lines won't be in correct position and touch won't work fine\r\n                this.point.x = this.downPoint.x;\r\n                this.point.y = this.downPoint.y;\r\n                var selection = this.selection;\r\n                var selectionX = this.downPoint.x;\r\n                var selectionY = this.downPoint.y;\r\n                if (this._usesSelection) {\r\n                    selection.x = selectionX;\r\n                    selection.y = selectionY;\r\n                    selection.path = \"\";\r\n                    selection.show();\r\n                }\r\n                _super.prototype.triggerDownReal.call(this, point);\r\n            }\r\n            else {\r\n                this.downPoint = undefined;\r\n            }\r\n        }\r\n        else {\r\n            this.downPoint = undefined;\r\n        }\r\n    };\r\n    /**\r\n     * Updates the coordinates of where pointer down event occurred\r\n     * (was pressed).\r\n     */\r\n    XYCursor.prototype.updatePoint = function (point) {\r\n        if (this.lineX) {\r\n            point.x = this.lineX.pixelX;\r\n        }\r\n        if (this.lineY) {\r\n            point.y = this.lineY.pixelY;\r\n        }\r\n    };\r\n    XYCursor.prototype.triggerUpReal = function (point) {\r\n        if ($math.getDistance(this._upPointOrig, this._downPointOrig) > getInteraction().getHitOption(this.interactions, \"hitTolerance\")) {\r\n            if (this.downPoint) {\r\n                this.upPoint = point;\r\n                this.updatePoint(this.upPoint);\r\n                if (this._generalBehavior != \"pan\") {\r\n                    this.getRanges();\r\n                }\r\n                if (this._generalBehavior != \"select\") {\r\n                    this.selection.hide();\r\n                }\r\n                _super.prototype.triggerUpReal.call(this, point);\r\n            }\r\n        }\r\n        else {\r\n            if (this._generalBehavior != \"select\") {\r\n                this.selection.hide(0);\r\n            }\r\n            else {\r\n                this.xRange = undefined;\r\n                this.yRange = undefined;\r\n                this.dispatchImmediately(\"selectended\");\r\n            }\r\n            // reset cursor style, just in case\r\n            if (this._generalBehavior == \"pan\") {\r\n                var interaction = getInteraction();\r\n                interaction.setGlobalStyle(MouseCursorStyle.default);\r\n            }\r\n            this.dispatchImmediately(\"behaviorcanceled\");\r\n        }\r\n        this.downPoint = undefined;\r\n        this.dispatch(\"cursorpositionchanged\");\r\n    };\r\n    /**\r\n     * [getRanges description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    XYCursor.prototype.getPanningRanges = function () {\r\n        var startX = $math.round(this.downPoint.x / this.innerWidth, 5);\r\n        var startY = 1 - $math.round(this.downPoint.y / this.innerHeight, 5);\r\n        var currentX = $math.round(this.point.x / this.innerWidth, 5);\r\n        var currentY = 1 - $math.round(this.point.y / this.innerHeight, 5);\r\n        var deltaX = startX - currentX;\r\n        var deltaY = startY - currentY;\r\n        this.xRange = { start: deltaX, end: 1 + deltaX };\r\n        this.yRange = { start: deltaY, end: 1 + deltaY };\r\n        if (this.behavior == \"panX\") {\r\n            this.yRange.start = 0;\r\n            this.yRange.end = 1;\r\n        }\r\n        if (this.behavior == \"panY\") {\r\n            this.xRange.start = 0;\r\n            this.xRange.end = 1;\r\n        }\r\n    };\r\n    /**\r\n     * [getRanges description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    XYCursor.prototype.getRanges = function () {\r\n        if (this.lineX) {\r\n            this.upPoint.x = this.lineX.pixelX;\r\n        }\r\n        if (this.lineY) {\r\n            this.upPoint.y = this.lineY.pixelY;\r\n        }\r\n        // @todo Is this needed?\r\n        $utils.used(this.selection);\r\n        var startX = $math.round(this.downPoint.x / this.innerWidth, 5);\r\n        var endX = $math.round((this.upPoint.x) / this.innerWidth, 5);\r\n        var startY = 1 - $math.round(this.downPoint.y / this.innerHeight, 5);\r\n        var endY = 1 - $math.round((this.upPoint.y) / this.innerHeight, 5);\r\n        this.xRange = { start: $math.min(startX, endX), end: $math.max(startX, endX) };\r\n        this.yRange = { start: $math.min(startY, endY), end: $math.max(startY, endY) };\r\n    };\r\n    Object.defineProperty(XYCursor.prototype, \"behavior\", {\r\n        /**\r\n         * Behavior\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"behavior\");\r\n        },\r\n        /**\r\n         * Cursor's behavior when it's moved with pointer down:\r\n         *\r\n         * * \"zoomX\" - zooms horizontally;\r\n         * * \"zoomY\" - zooms vertically;\r\n         * * \"zoomXY\" - zooms both horizontally and vertically;\r\n         * * \"selectX\" - selects a range horizontally;\r\n         * * \"selectY\" - selects a range vertically;\r\n         * * \"selectXY\" - selects a range both horizontally and vertically;\r\n         * * \"panX\" - moves (pans) current selection horizontally;\r\n         * * \"panY\" - moves (pans) current selection vertically;\r\n         * * \"panXY\" - moves (pans) current selection both horizontally and vertically;\r\n         * * \"none\" - does nothing with pointer down.\r\n         *\r\n         * E.g. \"zoomXY\" will mean that pressing a mouse (or touching) over plot area\r\n         * and dragging it will start zooming the chart.\r\n         *\r\n         * @param value Bheavior\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"behavior\", value, true);\r\n            this._usesSelection = false;\r\n            if (value.indexOf(\"zoom\") != -1) {\r\n                this._generalBehavior = \"zoom\";\r\n                this._usesSelection = true;\r\n            }\r\n            if (value.indexOf(\"select\") != -1) {\r\n                this._generalBehavior = \"select\";\r\n                this._usesSelection = true;\r\n            }\r\n            if (value.indexOf(\"pan\") != -1) {\r\n                this._generalBehavior = \"pan\";\r\n                this._usesSelection = false;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Determines whether Cursor should prevent default action on move.\r\n     *\r\n     * If cursor's behavior is \"none\", it should not obstruct the page scrolling.\r\n     *\r\n     * @return Prevent default?\r\n     */\r\n    XYCursor.prototype.shouldPreventGestures = function (touch) {\r\n        return (!this.interactions.isTouchProtected || !touch) && this.behavior != \"none\";\r\n    };\r\n    Object.defineProperty(XYCursor.prototype, \"fullWidthLineX\", {\r\n        /**\r\n         * @return Full width?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"fullWidthLineX\");\r\n        },\r\n        /**\r\n         * Cursor's horizontal line is expanded to take full width of the related\r\n         * Axis' cell/category.\r\n         *\r\n         * NOTE: this setting will work properly if `xAxis` is set and only in case\r\n         * `xAxis` is [[CategoryAxis]] or [[DateAxis]].\r\n         *\r\n         * @param value Full width?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"fullWidthLineX\", value);\r\n            if (!value) {\r\n                this.updateSize();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYCursor.prototype, \"fullWidthLineY\", {\r\n        /**\r\n         * @return Full width?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"fullWidthLineY\");\r\n        },\r\n        /**\r\n         * Cursor's vertical line is expanded to take full width of the related\r\n         * Axis' cell/category.\r\n         *\r\n         * NOTE: this setting will work properly if `yAxis` is set and only in case\r\n         * `yAxis` is [[CategoryAxis]] or [[DateAxis]].\r\n         *\r\n         * @param value Full width?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"fullWidthLineY\", value);\r\n            if (!value) {\r\n                this.updateSize();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYCursor.prototype, \"hideSeriesTooltipsOnSelection\", {\r\n        /**\r\n         * @return hide tooltip?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"hideSeriesTooltipsOnSelection\");\r\n        },\r\n        /**\r\n         * If set to `true` this will hide series tooltips when selecting with cursor.\r\n         *\r\n         * @since 4.5.15\r\n         * @param  value  hide tooltips?\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"hideSeriesTooltipsOnSelection\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYCursor.prototype, \"maxPanOut\", {\r\n        /**\r\n         * @return Full width?\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"maxPanOut\");\r\n        },\r\n        /**\r\n         * If cursor behavior is panX or panY, we allow to pan plot out of it's max bounds for a better user experience.\r\n         * This setting specifies relative value by how much we can pan out the plot\r\n         *\r\n         * @param value\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"maxPanOut\", value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYCursor.prototype, \"xAxis\", {\r\n        /**\r\n         * @return X axis\r\n         */\r\n        get: function () {\r\n            return this._xAxis.get();\r\n        },\r\n        /**\r\n         * A reference to X [[Axis]].\r\n         *\r\n         * An XY cursor can live without `xAxis` set. You set xAxis for cursor when\r\n         * you have axis tooltip enabled and you want cursor line to be at the same\r\n         * position as tooltip.\r\n         *\r\n         * This works with [[CategoryAxis]] and [[DateAxis]] but not with\r\n         * [[ValueAxis]].\r\n         *\r\n         * @todo Description (review)\r\n         * @param axis X axis\r\n         */\r\n        set: function (axis) {\r\n            var _this = this;\r\n            if (this._xAxis.get() != axis) {\r\n                this._xAxis.set(axis, new MultiDisposer([\r\n                    axis.tooltip.events.on(\"positionchanged\", this.handleXTooltipPosition, this, false),\r\n                    axis.events.on(\"rangechangestarted\", function (event) {\r\n                        _this.hide(0);\r\n                        _this.__disabled = true;\r\n                    }, undefined, false),\r\n                    axis.events.on(\"rangechangeended\", function (event) {\r\n                        _this.__disabled = false;\r\n                        _this.hide(0);\r\n                        _this.dispatch(\"cursorpositionchanged\");\r\n                    }, undefined, false)\r\n                ]));\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYCursor.prototype, \"yAxis\", {\r\n        /**\r\n         * @return Y Axis\r\n         */\r\n        get: function () {\r\n            return this._yAxis.get();\r\n        },\r\n        /**\r\n         * A reference to Y [[Axis]].\r\n         *\r\n         * An XY cursor can live without `yAxis` set. You set xAxis for cursor when\r\n         * you have axis tooltip enabled and you want cursor line to be at the same\r\n         * position as tooltip.\r\n         *\r\n         * This works with [[CategoryAxis]] and [[DateAxis]] but not with\r\n         * [[ValueAxis]].\r\n         *\r\n         * @todo Description (review)\r\n         * @param axis Y axis\r\n         */\r\n        set: function (axis) {\r\n            var _this = this;\r\n            if (this._yAxis.get() != axis) {\r\n                this._yAxis.set(axis, new MultiDisposer([\r\n                    axis.tooltip.events.on(\"positionchanged\", this.handleYTooltipPosition, this, false),\r\n                    axis.events.on(\"rangechangestarted\", function (event) {\r\n                        _this.hide(0);\r\n                        _this.__disabled = true;\r\n                    }, undefined, false),\r\n                    axis.events.on(\"rangechangeended\", function (event) {\r\n                        _this.__disabled = false;\r\n                        _this.hide(0);\r\n                        _this.dispatch(\"cursorpositionchanged\");\r\n                    }, undefined, false)\r\n                ]));\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates Cursor's position when axis tooltip changes position.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event Original Axis event\r\n     */\r\n    XYCursor.prototype.handleXTooltipPosition = function (event) {\r\n        var tooltip = this.xAxis.tooltip;\r\n        var point = $utils.svgPointToSprite({ x: tooltip.pixelX, y: tooltip.pixelY }, this);\r\n        var x = point.x;\r\n        point.y = 1;\r\n        if (this.lineX) {\r\n            this.lineX.x = x;\r\n            if (!this.fitsToBounds(point)) {\r\n                this.hide();\r\n            }\r\n        }\r\n        if (this.xAxis && this.fullWidthLineX) {\r\n            var startPoint = this.xAxis.currentItemStartPoint;\r\n            var endPoint = this.xAxis.currentItemEndPoint;\r\n            if (startPoint && endPoint) {\r\n                this.lineX.x = x;\r\n                var width = endPoint.x - startPoint.x;\r\n                this.lineX.path = $path.rectangle(width, this.innerHeight, -width / 2);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Updates Cursor's position when Y axis changes position or scale.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param event Original Axis event\r\n     */\r\n    XYCursor.prototype.handleYTooltipPosition = function (event) {\r\n        var tooltip = this.yAxis.tooltip;\r\n        var point = $utils.svgPointToSprite({ x: tooltip.pixelX, y: tooltip.pixelY }, this);\r\n        var y = point.y;\r\n        point.x = 1;\r\n        if (this.lineY) {\r\n            this.lineY.y = y;\r\n            if (!this.fitsToBounds(point)) {\r\n                this.hide();\r\n            }\r\n        }\r\n        if (this.yAxis && this.fullWidthLineY) {\r\n            var startPoint = this.yAxis.currentItemStartPoint;\r\n            var endPoint = this.yAxis.currentItemEndPoint;\r\n            if (startPoint && endPoint) {\r\n                this.lineY.y = y;\r\n                var height = endPoint.y - startPoint.y;\r\n                this.lineY.path = $path.rectangle(this.innerWidth, height, 0, -height / 2);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(XYCursor.prototype, \"lineX\", {\r\n        /**\r\n         * @return Line element\r\n         */\r\n        get: function () {\r\n            return this._lineX.get();\r\n        },\r\n        /**\r\n         * A Line element to use for X axis.\r\n         *\r\n         * @param lineX Line\r\n         */\r\n        set: function (lineX) {\r\n            if (lineX) {\r\n                lineX.setElement(this.paper.add(\"path\"));\r\n                this._lineX.set(lineX, lineX.events.on(\"positionchanged\", this.updateSelection, this, false));\r\n                lineX.interactionsEnabled = false;\r\n                lineX.parent = this;\r\n            }\r\n            else {\r\n                this._lineX.reset();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYCursor.prototype, \"lineY\", {\r\n        /**\r\n         * @return Line element\r\n         */\r\n        get: function () {\r\n            return this._lineY.get();\r\n        },\r\n        /**\r\n         * A Line element to use Y axis.\r\n         *\r\n         * @param lineY Line\r\n         */\r\n        set: function (lineY) {\r\n            if (lineY) {\r\n                lineY.setElement(this.paper.add(\"path\"));\r\n                this._lineY.set(lineY, lineY.events.on(\"positionchanged\", this.updateSelection, this, false));\r\n                lineY.parent = this;\r\n                lineY.interactionsEnabled = false;\r\n            }\r\n            else {\r\n                this._lineY.reset();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(XYCursor.prototype, \"selection\", {\r\n        /**\r\n         * @return Selection rectangle\r\n         */\r\n        get: function () {\r\n            return this._selection;\r\n        },\r\n        /**\r\n         * A selection element ([[Sprite]]).\r\n         *\r\n         * @param selection Selection rectangle\r\n         */\r\n        set: function (selection) {\r\n            this._selection = selection;\r\n            if (selection) {\r\n                selection.element = this.paper.add(\"path\");\r\n                selection.parent = this;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * Looks if `xAxis` and `yAxis` is set via ID in JSON config, and replaces\r\n     * with real references.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    XYCursor.prototype.processConfig = function (config) {\r\n        if (config) {\r\n            // Set up axes\r\n            if ($type.hasValue(config.xAxis) && $type.isString(config.xAxis)) {\r\n                if (this.map.hasKey(config.xAxis)) {\r\n                    config.xAxis = this.map.getKey(config.xAxis);\r\n                }\r\n                else {\r\n                    this.processingErrors.push(\"[XYCursor] No axis with id \\\"\" + config.xAxis + \"\\\" found for `xAxis`\");\r\n                    delete config.xAxis;\r\n                }\r\n            }\r\n            if ($type.hasValue(config.yAxis) && $type.isString(config.yAxis)) {\r\n                if (this.map.hasKey(config.yAxis)) {\r\n                    config.yAxis = this.map.getKey(config.yAxis);\r\n                }\r\n                else {\r\n                    this.processingErrors.push(\"[XYCursor] No axis with id \\\"\" + config.yAxis + \"\\\" found for `yAxis`\");\r\n                    delete config.yAxis;\r\n                }\r\n            }\r\n            if ($type.hasValue(config.snapToSeries) && $type.isString(config.snapToSeries)) {\r\n                if (this.map.hasKey(config.snapToSeries)) {\r\n                    config.snapToSeries = this.map.getKey(config.snapToSeries);\r\n                }\r\n                else {\r\n                    this.processingErrors.push(\"[XYCursor] No series with id \\\"\" + config.snapToSeries + \"\\\" found for `series`\");\r\n                    delete config.snapToSeries;\r\n                }\r\n            }\r\n        }\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    Object.defineProperty(XYCursor.prototype, \"snapToSeries\", {\r\n        /**\r\n         * @return {XYSeries}\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"snapToSeries\");\r\n        },\r\n        /**\r\n         * Specifies to which series cursor lines should be snapped. Works when one\r\n         * of the axis is `DateAxis` or `CategoryAxis`.\r\n         *\r\n         * @param {XYSeries}\r\n         */\r\n        set: function (series) {\r\n            if (this.setPropertyValue(\"snapToSeries\", series)) {\r\n                if (this._snapToDisposer) {\r\n                    this._snapToDisposer.dispose();\r\n                }\r\n                if (series) {\r\n                    this._snapToDisposer = series.events.on(\"tooltipshownat\", this.handleSnap, this, false);\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * [handleSnap description]\r\n     *\r\n     * @ignore\r\n     * @todo Description\r\n     */\r\n    XYCursor.prototype.handleSnap = function () {\r\n        var series = this.snapToSeries;\r\n        var x = series.getTooltipX();\r\n        var y = series.getTooltipY();\r\n        if (this.xAxis) {\r\n            if (this.xAxis.renderer.opposite) {\r\n                y -= this.pixelHeight;\r\n            }\r\n        }\r\n        this.point = { x: x, y: y };\r\n        this.getPositions();\r\n        var xx = x;\r\n        var yy = y;\r\n        x -= this.pixelWidth;\r\n        if (this.yAxis) {\r\n            if (this.yAxis.renderer.opposite) {\r\n                x += this.pixelWidth;\r\n            }\r\n        }\r\n        var tooltip = series.tooltip;\r\n        var duration = tooltip.animationDuration;\r\n        var easing = tooltip.animationEasing;\r\n        if (series.baseAxis == series.xAxis) {\r\n            series.yAxis.showTooltipAtPosition(this.yPosition);\r\n        }\r\n        if (series.baseAxis == series.yAxis) {\r\n            series.xAxis.showTooltipAtPosition(this.xPosition);\r\n        }\r\n        this.lineX.animate([{ property: \"y\", to: y }], duration, easing);\r\n        this.lineY.animate([{ property: \"x\", to: x }], duration, easing);\r\n        if (!this.xAxis) {\r\n            this.lineX.animate([{ property: \"x\", to: xx }], duration, easing);\r\n        }\r\n        if (!this.yAxis) {\r\n            this.lineY.animate([{ property: \"y\", to: yy }], duration, easing);\r\n        }\r\n    };\r\n    /**\r\n     * Destroys this object and all related data.\r\n     */\r\n    XYCursor.prototype.dispose = function () {\r\n        this.hide(0);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return XYCursor;\r\n}(Cursor));\r\nexport { XYCursor };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"XYCursor\"] = XYCursor;\r\n//# sourceMappingURL=XYCursor.js.map","import * as tslib_1 from \"tslib\";\r\nimport { XYCursor } from \"./XYCursor\";\r\nimport { Percent, percent } from \"../../core/utils/Percent\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Cursor for [[RadarChart]].\r\n *\r\n * @see {@link IRadarCursorEvents} for a list of available events\r\n * @see {@link IRadarCursorAdapters} for a list of available Adapters\r\n */\r\nvar RadarCursor = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RadarCursor, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function RadarCursor() {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        _this.className = \"RadarCursor\";\r\n        _this.radius = percent(100);\r\n        _this.innerRadius = percent(0);\r\n        // Apply theme\r\n        _this.applyTheme();\r\n        _this.mask = undefined;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if point is within bounds of a container.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param point  Point to check\r\n     * @return Fits within container?\r\n     */\r\n    RadarCursor.prototype.fitsToBounds = function (point) {\r\n        var radius = $math.getDistance(point);\r\n        //if(!$math.isAngleInRange(angle, this.startAngle, this.endAngle)){\r\n        //return false;\r\n        //}\r\n        if (radius < this.truePixelRadius + 1 && radius > this.pixelInnerRadius - 1) { // ok to add/remove some\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(RadarCursor.prototype, \"startAngle\", {\r\n        /**\r\n         * @return Start angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"startAngle\");\r\n        },\r\n        /**\r\n         * Starting angle of the cursor's radial line.\r\n         *\r\n         * @param value Start angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"startAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarCursor.prototype, \"endAngle\", {\r\n        /**\r\n         * @return End angle\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"endAngle\");\r\n        },\r\n        /**\r\n         * End angle of the cursor's radial line.\r\n         *\r\n         * @param value End angle\r\n         */\r\n        set: function (value) {\r\n            this.setPropertyValue(\"endAngle\", value, true);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RadarCursor.prototype.triggerMoveReal = function (point) {\r\n        if (!this.xAxis || (this.xAxis && (!this.xAxis.cursorTooltipEnabled || this.xAxis.tooltip.disabled))) {\r\n            this.updateLineX(this.point);\r\n        }\r\n        if (!this.yAxis || (this.yAxis && (!this.yAxis.cursorTooltipEnabled || this.yAxis.tooltip.disabled))) {\r\n            this.updateLineY(this.point);\r\n        }\r\n        this.updateSelection();\r\n        _super.prototype.triggerMoveReal.call(this, point);\r\n    };\r\n    /**\r\n     * (Re)draws the horizontal (circular) cursor's line.\r\n     *\r\n     * @param point New target point\r\n     */\r\n    RadarCursor.prototype.updateLineX = function (point) {\r\n        var radius = this.pixelRadius;\r\n        var startAngle = this.startAngle;\r\n        var endAngle = this.endAngle;\r\n        var innerRadius = this.pixelInnerRadius;\r\n        if (radius > 0 && $type.isNumber(startAngle) && $type.isNumber(endAngle) && $type.isNumber(innerRadius)) {\r\n            var angle = $math.fitAngleToRange($math.getAngle(point), startAngle, endAngle);\r\n            var path = void 0;\r\n            if (this.lineX && this.lineX.visible) {\r\n                this.lineX.moveTo({ x: 0, y: 0 });\r\n                // fill\r\n                if (this.xAxis && this.fullWidthLineX) {\r\n                    var startPoint = this.xAxis.currentItemStartPoint;\r\n                    var endPoint = this.xAxis.currentItemEndPoint;\r\n                    if (startPoint && endPoint) {\r\n                        var fillStartAngle = $math.fitAngleToRange($math.getAngle(startPoint), startAngle, endAngle);\r\n                        var fillEndAngle = $math.fitAngleToRange($math.getAngle(endPoint), startAngle, endAngle);\r\n                        var arc = fillEndAngle - fillStartAngle;\r\n                        // clockwise\r\n                        // this is needed, normalizeAngle doesn't solve it\r\n                        if (startAngle < endAngle) {\r\n                            if (arc < 0) {\r\n                                arc += 360;\r\n                            }\r\n                        }\r\n                        // ccw\r\n                        else {\r\n                            if (arc > 0) {\r\n                                arc -= 360;\r\n                            }\r\n                        }\r\n                        angle -= arc / 2;\r\n                        path = $path.moveTo({ x: innerRadius * $math.cos(angle), y: innerRadius * $math.sin(angle) })\r\n                            + $path.lineTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) })\r\n                            + $path.arcTo(angle, arc, radius)\r\n                            + $path.lineTo({ x: innerRadius * $math.cos(angle + arc), y: innerRadius * $math.sin(angle + arc) })\r\n                            + $path.arcTo(angle + arc, -arc, innerRadius);\r\n                    }\r\n                }\r\n                // line\r\n                if (!path) {\r\n                    path = $path.moveTo({ x: innerRadius * $math.cos(angle), y: innerRadius * $math.sin(angle) }) + $path.lineTo({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n                }\r\n                this.lineX.path = path;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * (Re)draws the vertical (radial) cursor's line.\r\n     *\r\n     * @param point New target point\r\n     */\r\n    RadarCursor.prototype.updateLineY = function (point) {\r\n        if (this.lineY && this.lineY.visible) {\r\n            var startAngle = this.startAngle;\r\n            var endAngle = this.endAngle;\r\n            var truePixelRadius = this.truePixelRadius;\r\n            var radius = $math.fitToRange($math.getDistance(point), 0, this.truePixelRadius);\r\n            if ($type.isNumber(radius) && $type.isNumber(startAngle)) {\r\n                this.lineY.moveTo({ x: 0, y: 0 });\r\n                var path = void 0;\r\n                var arc = endAngle - startAngle;\r\n                if (this.yAxis && this.fullWidthLineY) {\r\n                    // fill\r\n                    var startPoint = this.yAxis.currentItemStartPoint;\r\n                    var endPoint = this.yAxis.currentItemEndPoint;\r\n                    if (startPoint && endPoint) {\r\n                        var innerRadius = $math.fitToRange($math.getDistance(startPoint), 0, truePixelRadius);\r\n                        radius = $math.fitToRange($math.getDistance(endPoint), 0, truePixelRadius);\r\n                        path = $path.moveTo({ x: radius * $math.cos(startAngle), y: radius * $math.sin(startAngle) }) + $path.arcTo(startAngle, arc, radius);\r\n                        path += $path.moveTo({ x: innerRadius * $math.cos(endAngle), y: innerRadius * $math.sin(endAngle) }) + $path.arcTo(endAngle, -arc, innerRadius);\r\n                    }\r\n                }\r\n                if (!path) {\r\n                    path = $path.moveTo({ x: radius * $math.cos(startAngle), y: radius * $math.sin(startAngle) }) + $path.arcTo(startAngle, endAngle - startAngle, radius);\r\n                }\r\n                this.lineY.path = path;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Updates selection dimensions on size change.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    RadarCursor.prototype.updateSelection = function () {\r\n        if (this._usesSelection) {\r\n            var downPoint = this.downPoint;\r\n            if (downPoint) {\r\n                var point = this.point;\r\n                var radius = this.pixelRadius;\r\n                var truePixelRadius = this.truePixelRadius;\r\n                var innerRadius = this.pixelInnerRadius;\r\n                var startAngle = Math.min(this.startAngle, this.endAngle);\r\n                var endAngle = Math.max(this.startAngle, this.endAngle);\r\n                var downAngle = $math.fitAngleToRange($math.getAngle(downPoint), startAngle, endAngle);\r\n                var angle = $math.fitAngleToRange($math.getAngle(point), startAngle, endAngle);\r\n                var downRadius = $math.getDistance(downPoint);\r\n                if (downRadius < truePixelRadius) {\r\n                    var currentRadius = $math.fitToRange($math.getDistance(point), 0, truePixelRadius);\r\n                    this._prevAngle = angle;\r\n                    var path = $path.moveTo({ x: 0, y: 0 });\r\n                    var downSin = $math.sin(downAngle);\r\n                    var downCos = $math.cos(downAngle);\r\n                    var sin = $math.sin(angle);\r\n                    var cos = $math.cos(angle);\r\n                    var behavior = this.behavior;\r\n                    if (behavior == \"zoomX\" || behavior == \"selectX\") {\r\n                        path += $path.lineTo({ x: radius * downCos, y: radius * downSin }) + $path.arcTo(downAngle, angle - downAngle, radius) + $path.lineTo({ x: innerRadius * cos, y: innerRadius * sin }) + $path.arcTo(angle, downAngle - angle, innerRadius);\r\n                    }\r\n                    else if (behavior == \"zoomY\" || behavior == \"selectY\") {\r\n                        path = $path.moveTo({ x: currentRadius * $math.cos(startAngle), y: currentRadius * $math.sin(startAngle) }) + $path.arcTo(startAngle, endAngle - startAngle, currentRadius) + $path.lineTo({ x: downRadius * $math.cos(endAngle), y: downRadius * $math.sin(endAngle) }) + $path.arcTo(endAngle, startAngle - endAngle, downRadius) + $path.closePath();\r\n                    }\r\n                    else if (behavior == \"zoomXY\") {\r\n                        path = $path.moveTo({ x: currentRadius * $math.cos(downAngle), y: currentRadius * $math.sin(downAngle) }) + $path.arcTo(downAngle, angle - downAngle, currentRadius) + $path.lineTo({ x: downRadius * $math.cos(angle), y: downRadius * $math.sin(angle) }) + $path.arcTo(angle, downAngle - angle, downRadius) + $path.closePath();\r\n                    }\r\n                    this.selection.path = path;\r\n                }\r\n                this.selection.moveTo({ x: 0, y: 0 });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Updates cursors current positions.\r\n     */\r\n    RadarCursor.prototype.getPositions = function () {\r\n        // positions are used by axes or series\r\n        var chart = this.chart;\r\n        if (chart) {\r\n            var innerRadius = this.pixelInnerRadius;\r\n            var radius = this.truePixelRadius - innerRadius;\r\n            var startAngle = this.startAngle;\r\n            var endAngle = this.endAngle;\r\n            var angle = $math.fitAngleToRange($math.getAngle(this.point), startAngle, endAngle);\r\n            var xPosition = ((angle - startAngle) / (endAngle - startAngle));\r\n            this.xPosition = xPosition;\r\n            this.yPosition = $math.fitToRange(($math.getDistance(this.point) - innerRadius) / radius, 0, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Overriding inherited method, so that nothing happens when it's triggered.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    RadarCursor.prototype.updatePoint = function (point) {\r\n    };\r\n    /**\r\n     * Updates Cursor's position when axis tooltip changes horizontal position.\r\n     *\r\n     * @param event Axis event\r\n     */\r\n    RadarCursor.prototype.handleXTooltipPosition = function (event) {\r\n        if (this.xAxis.cursorTooltipEnabled) {\r\n            var tooltip = this.xAxis.tooltip;\r\n            this.updateLineX($utils.svgPointToSprite({ x: tooltip.pixelX, y: tooltip.pixelY }, this));\r\n        }\r\n    };\r\n    /**\r\n     * Updates Cursor's position when axis tooltip changes vertical position.\r\n     *\r\n     * @todo Description\r\n     * @param event Axis event\r\n     */\r\n    RadarCursor.prototype.handleYTooltipPosition = function (event) {\r\n        if (this.yAxis.cursorTooltipEnabled) {\r\n            var tooltip = this.yAxis.tooltip;\r\n            this.updateLineY($utils.svgPointToSprite({ x: tooltip.pixelX, y: tooltip.pixelY }, this));\r\n        }\r\n    };\r\n    /**\r\n     * needs to be overriden\r\n     * @ignore\r\n     */\r\n    RadarCursor.prototype.updateLinePositions = function (point) {\r\n    };\r\n    /**\r\n     * [getRanges description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    RadarCursor.prototype.getRanges = function () {\r\n        var downPoint = this.downPoint;\r\n        if (downPoint) {\r\n            var upPoint = this.upPoint;\r\n            var chart = this.chart;\r\n            if (chart) {\r\n                var radius = this.pixelRadius;\r\n                var startAngle = this.startAngle;\r\n                var endAngle = this.endAngle;\r\n                var downAngle = $math.fitAngleToRange($math.getAngle(downPoint), this.startAngle, this.endAngle);\r\n                var upAngle = $math.fitAngleToRange($math.getAngle(upPoint), this.startAngle, this.endAngle);\r\n                var downRadius = $math.fitToRange($math.getDistance(downPoint), 0, radius);\r\n                var upRadius = $math.fitToRange($math.getDistance(upPoint), 0, radius);\r\n                var startX = 0;\r\n                var endX = 1;\r\n                var startY = 0;\r\n                var endY = 1;\r\n                var behavior = this.behavior;\r\n                if (behavior == \"zoomX\" || behavior == \"selectX\" || behavior == \"zoomXY\" || behavior == \"selectXY\") {\r\n                    var arc = endAngle - startAngle;\r\n                    startX = $math.round((downAngle - startAngle) / arc, 5);\r\n                    endX = $math.round((upAngle - startAngle) / arc, 5);\r\n                }\r\n                if (behavior == \"zoomY\" || behavior == \"selectY\" || behavior == \"zoomXY\" || behavior == \"selectXY\") {\r\n                    startY = $math.round(downRadius / radius, 5);\r\n                    endY = $math.round(upRadius / radius, 5);\r\n                }\r\n                this.xRange = { start: Math.min(startX, endX), end: Math.max(startX, endX) };\r\n                this.yRange = { start: Math.min(startY, endY), end: Math.max(startY, endY) };\r\n                if (this.behavior == \"selectX\" || this.behavior == \"selectY\" || this.behavior == \"selectXY\") {\r\n                    // void\r\n                }\r\n                else {\r\n                    this.selection.hide();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Overriding inherited method, so that nothing happens when `updateSize`\r\n     * is triggered.\r\n     *\r\n     * RadarCursor is quite complicated and needs own sizing logic.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    RadarCursor.prototype.updateSize = function () { };\r\n    Object.defineProperty(RadarCursor.prototype, \"radius\", {\r\n        /**\r\n         * @return Outer radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"radius\");\r\n        },\r\n        /**\r\n         * Outer radius of the cursor's circular line.\r\n         * Absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @param value  Outer radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"radius\", value, false, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarCursor.prototype, \"pixelRadius\", {\r\n        /**\r\n         * Outer radius of the circular line in pixels.\r\n         *\r\n         * @return Outer radius (px)\r\n         * @readonly\r\n         */\r\n        get: function () {\r\n            return $utils.relativeRadiusToValue(this.radius, this.truePixelRadius);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarCursor.prototype, \"truePixelRadius\", {\r\n        /**\r\n         * [truePixelRadius description]\r\n         *\r\n         * @todo Description\r\n         * @return Outer radius (px)\r\n         * @readonly\r\n         */\r\n        get: function () {\r\n            return $utils.relativeToValue(percent(100), $math.min(this.innerWidth / 2, this.innerHeight / 2));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarCursor.prototype, \"innerRadius\", {\r\n        /**\r\n         * @return Inner radius\r\n         */\r\n        get: function () {\r\n            return this.getPropertyValue(\"innerRadius\");\r\n        },\r\n        /**\r\n         * Inner radius of the cursor's circular line.\r\n         * Absolute (px) or relative ([[Percent]]).\r\n         *\r\n         * @param value  Inner radius\r\n         */\r\n        set: function (value) {\r\n            this.setPercentProperty(\"innerRadius\", value, false, false, 10, false);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RadarCursor.prototype, \"pixelInnerRadius\", {\r\n        /**\r\n         * Inner radius of the circular line in pixels.\r\n         *\r\n         * @return Inner radius (px)\r\n         * @readonly\r\n         */\r\n        get: function () {\r\n            var innerRadius = this.innerRadius;\r\n            if (innerRadius instanceof Percent) {\r\n                innerRadius = percent(100 * innerRadius.value * this.chart.innerRadiusModifyer);\r\n            }\r\n            return $utils.relativeRadiusToValue(innerRadius, this.truePixelRadius) || 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    RadarCursor.prototype.fixPoint = function (point) {\r\n        // overriding xy method\r\n        return point;\r\n    };\r\n    return RadarCursor;\r\n}(XYCursor));\r\nexport { RadarCursor };\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"RadarCursor\"] = RadarCursor;\r\n//# sourceMappingURL=RadarCursor.js.map","/**\r\n * Module: gauge\r\n */\r\n/**\r\n * Elements: types\r\n */\r\nexport { GaugeChartDataItem, GaugeChart } from \"./.internal/charts/types/GaugeChart\";\r\nexport { RadarChartDataItem, RadarChart } from \"./.internal/charts/types/RadarChart\";\r\nexport { XYChartDataItem, XYChart } from \"./.internal/charts/types/XYChart\";\r\nexport { SerialChartDataItem, SerialChart } from \"./.internal/charts/types/SerialChart\";\r\nexport { PieChart3DDataItem, PieChart3D } from \"./.internal/charts/types/PieChart3D\";\r\nexport { PieChartDataItem, PieChart } from \"./.internal/charts/types/PieChart\";\r\nexport { SlicedChart, SlicedChartDataItem } from \"./.internal/charts/types/SlicedChart\";\r\nexport { FlowDiagramDataItem, FlowDiagram } from \"./.internal/charts/types/FlowDiagram\";\r\nexport { SankeyDiagramDataItem, SankeyDiagram } from \"./.internal/charts/types/SankeyDiagram\";\r\nexport { ChordDiagramDataItem, ChordDiagram } from \"./.internal/charts/types/ChordDiagram\";\r\nexport { TreeMapDataItem, TreeMap } from \"./.internal/charts/types/TreeMap\";\r\nexport { XYChart3DDataItem, XYChart3D } from \"./.internal/charts/types/XYChart3D\";\r\n/**\r\n * Elements: charts\r\n */\r\nexport { ChartDataItem, Chart } from \"./.internal/charts/Chart\";\r\nexport { LegendDataItem, Legend, LegendSettings } from \"./.internal/charts/Legend\";\r\nexport { HeatLegend } from \"./.internal/charts/elements/HeatLegend\";\r\n/**\r\n * Elements: series\r\n */\r\nexport { SeriesDataItem, Series } from \"./.internal/charts/series/Series\";\r\nexport { XYSeriesDataItem, XYSeries } from \"./.internal/charts/series/XYSeries\";\r\nexport { LineSeriesDataItem, LineSeries } from \"./.internal/charts/series/LineSeries\";\r\nexport { LineSeriesSegment } from \"./.internal/charts/series/LineSeriesSegment\";\r\nexport { CandlestickSeriesDataItem, CandlestickSeries } from \"./.internal/charts/series/CandlestickSeries\";\r\nexport { OHLCSeriesDataItem, OHLCSeries } from \"./.internal/charts/series/OHLCSeries\";\r\nexport { ColumnSeriesDataItem, ColumnSeries } from \"./.internal/charts/series/ColumnSeries\";\r\nexport { StepLineSeriesDataItem, StepLineSeries } from \"./.internal/charts/series/StepLineSeries\";\r\nexport { RadarSeriesDataItem, RadarSeries } from \"./.internal/charts/series/RadarSeries\";\r\nexport { RadarColumnSeriesDataItem, RadarColumnSeries } from \"./.internal/charts/series/RadarColumnSeries\";\r\nexport { PieSeriesDataItem, PieSeries } from \"./.internal/charts/series/PieSeries\";\r\nexport { FunnelSeries, FunnelSeriesDataItem } from \"./.internal/charts/series/FunnelSeries\";\r\nexport { PyramidSeries, PyramidSeriesDataItem } from \"./.internal/charts/series/PyramidSeries\";\r\nexport { PictorialStackedSeries, PictorialStackedSeriesDataItem } from \"./.internal/charts/series/PictorialStackedSeries\";\r\nexport { PieTick } from \"./.internal/charts/elements/PieTick\";\r\nexport { FunnelSlice } from \"./.internal/charts/elements/FunnelSlice\";\r\nexport { PieSeries3DDataItem, PieSeries3D } from \"./.internal/charts/series/PieSeries3D\";\r\nexport { TreeMapSeriesDataItem, TreeMapSeries } from \"./.internal/charts/series/TreeMapSeries\";\r\nexport { ColumnSeries3DDataItem, ColumnSeries3D } from \"./.internal/charts/series/ColumnSeries3D\";\r\nexport { ConeSeriesDataItem, ConeSeries } from \"./.internal/charts/series/ConeSeries\";\r\nexport { CurvedColumnSeries, CurvedColumnSeriesDataItem } from \"./.internal/charts/series/CurvedColumnSeries\";\r\n/**\r\n * Elements: axes\r\n */\r\nexport { AxisDataItem, Axis } from \"./.internal/charts/axes/Axis\";\r\nexport { Grid } from \"./.internal/charts/axes/Grid\";\r\nexport { AxisTick } from \"./.internal/charts/axes/AxisTick\";\r\nexport { AxisLabel } from \"./.internal/charts/axes/AxisLabel\";\r\nexport { AxisLine } from \"./.internal/charts/axes/AxisLine\";\r\nexport { AxisFill } from \"./.internal/charts/axes/AxisFill\";\r\nexport { AxisRenderer } from \"./.internal/charts/axes/AxisRenderer\";\r\nexport { AxisBreak } from \"./.internal/charts/axes/AxisBreak\";\r\nexport { AxisBullet } from \"./.internal/charts/axes/AxisBullet\";\r\nexport { ValueAxisDataItem, ValueAxis } from \"./.internal/charts/axes/ValueAxis\";\r\nexport { CategoryAxisDataItem, CategoryAxis } from \"./.internal/charts/axes/CategoryAxis\";\r\nexport { CategoryAxisBreak } from \"./.internal/charts/axes/CategoryAxisBreak\";\r\nexport { DateAxisDataItem, DateAxis } from \"./.internal/charts/axes/DateAxis\";\r\nexport { DurationAxisDataItem, DurationAxis } from \"./.internal/charts/axes/DurationAxis\";\r\nexport { DateAxisBreak } from \"./.internal/charts/axes/DateAxisBreak\";\r\nexport { ValueAxisBreak } from \"./.internal/charts/axes/ValueAxisBreak\";\r\nexport { AxisRendererX } from \"./.internal/charts/axes/AxisRendererX\";\r\nexport { AxisRendererY } from \"./.internal/charts/axes/AxisRendererY\";\r\nexport { AxisRendererRadial } from \"./.internal/charts/axes/AxisRendererRadial\";\r\nexport { AxisLabelCircular } from \"./.internal/charts/axes/AxisLabelCircular\";\r\nexport { AxisRendererCircular } from \"./.internal/charts/axes/AxisRendererCircular\";\r\nexport { AxisFillCircular } from \"./.internal/charts/axes/AxisFillCircular\";\r\nexport { GridCircular } from \"./.internal/charts/axes/GridCircular\";\r\nexport { AxisRendererX3D } from \"./.internal/charts/axes/AxisRendererX3D\";\r\nexport { AxisRendererY3D } from \"./.internal/charts/axes/AxisRendererY3D\";\r\n/**\r\n * Elements: elements\r\n */\r\nexport { Tick } from \"./.internal/charts/elements/Tick\";\r\nexport { Bullet } from \"./.internal/charts/elements/Bullet\";\r\nexport { LabelBullet } from \"./.internal/charts/elements/LabelBullet\";\r\nexport { CircleBullet } from \"./.internal/charts/elements/CircleBullet\";\r\nexport { ErrorBullet } from \"./.internal/charts/elements/ErrorBullet\";\r\nexport { XYChartScrollbar } from \"./.internal/charts/elements/XYChartScrollbar\";\r\nexport { ClockHand } from \"./.internal/charts/elements/ClockHand\";\r\nexport { FlowDiagramNode } from \"./.internal/charts/elements/FlowDiagramNode\";\r\nexport { FlowDiagramLink } from \"./.internal/charts/elements/FlowDiagramLink\";\r\nexport { SankeyNode } from \"./.internal/charts/elements/SankeyNode\";\r\nexport { SankeyLink } from \"./.internal/charts/elements/SankeyLink\";\r\nexport { ChordNode } from \"./.internal/charts/elements/ChordNode\";\r\nexport { ChordLink } from \"./.internal/charts/elements/ChordLink\";\r\nexport { NavigationBarDataItem, NavigationBar } from \"./.internal/charts/elements/NavigationBar\";\r\nexport { Column } from \"./.internal/charts/elements/Column\";\r\nexport { Candlestick } from \"./.internal/charts/elements/Candlestick\";\r\nexport { OHLC } from \"./.internal/charts/elements/OHLC\";\r\nexport { RadarColumn } from \"./.internal/charts/elements/RadarColumn\";\r\nexport { Column3D } from \"./.internal/charts/elements/Column3D\";\r\nexport { ConeColumn } from \"./.internal/charts/elements/ConeColumn\";\r\nexport { CurvedColumn } from \"./.internal/charts/elements/CurvedColumn\";\r\n/**\r\n * Elements: cursors\r\n */\r\nexport { XYCursor } from \"./.internal/charts/cursors/XYCursor\";\r\nexport { Cursor } from \"./.internal/charts/cursors/Cursor\";\r\nexport { RadarCursor } from \"./.internal/charts/cursors/RadarCursor\";\r\n//# sourceMappingURL=charts.js.map"],"sourceRoot":""}