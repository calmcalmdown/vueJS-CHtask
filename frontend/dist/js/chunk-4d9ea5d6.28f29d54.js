(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d9ea5d6"],{"0a49":function(e,t,a){var r=a("9b43"),i=a("626a"),l=a("4bf8"),o=a("9def"),n=a("cd1c");e.exports=function(e,t){var a=1==e,c=2==e,u=3==e,s=4==e,d=6==e,p=5==e||d,m=t||n;return function(t,n,f){for(var g,y,v=l(t),b=i(v),h=r(n,f,3),C=o(b.length),F=0,V=a?m(t,C):c?m(t,0):void 0;C>F;F++)if((p||F in b)&&(g=b[F],y=h(g,F,v),e))if(a)V[F]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return F;case 2:V.push(g)}else if(s)return!1;return d?-1:u||s?s:V}}},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},7514:function(e,t,a){"use strict";var r=a("5ca1"),i=a("0a49")(5),l="find",o=!0;l in[]&&Array(1)[l]((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(l)},"95d1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("三品认证")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加认证")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业",prop:"creditCode"}},[e._v(e._s(e.filterCompanyName(e.ruleFormValue.creditCode)))])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productId"}},[a("el-select",{attrs:{disabled:!(e.productNameList.length>0)},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productNameList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"认证类型",prop:"certificationType"}},[a("el-radio-group",{model:{value:e.ruleFormValue.certificationType,callback:function(t){e.$set(e.ruleFormValue,"certificationType",t)},expression:"ruleFormValue.certificationType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("无公害产品")]),a("el-radio",{attrs:{label:"2"}},[e._v("绿色食品")]),a("el-radio",{attrs:{label:"3"}},[e._v("有机食品")]),a("el-radio",{attrs:{label:"4"}},[e._v("地理标志")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"认证类别",prop:"certificationCategory"}},[a("el-input",{model:{value:e.ruleFormValue.certificationCategory,callback:function(t){e.$set(e.ruleFormValue,"certificationCategory",t)},expression:"ruleFormValue.certificationCategory"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"农业分类",prop:"argriculturalClassification"}},[a("el-select",{model:{value:e.ruleFormValue.argriculturalClassification,callback:function(t){e.$set(e.ruleFormValue,"argriculturalClassification",t)},expression:"ruleFormValue.argriculturalClassification"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:"认证有效期",required:""}},[a("el-col",{staticClass:"text-left",attrs:{span:4}},[a("el-form-item",{attrs:{prop:"certificationStartTime"}},[a("el-date-picker",{staticClass:"w-80",staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"dd.MM.yyyy HH:mm:ss"},model:{value:e.ruleFormValue.certificationStartTime,callback:function(t){e.$set(e.ruleFormValue,"certificationStartTime",t)},expression:"ruleFormValue.certificationStartTime"}})],1)],1),a("el-col",{staticClass:"text-left",attrs:{span:1}},[e._v("至")]),a("el-col",{staticClass:"text-left",attrs:{span:4}},[a("el-form-item",{attrs:{prop:"certificationEndTime"}},[a("el-date-picker",{staticClass:"w-100",staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"dd.MM.yyyy HH:mm:ss"},model:{value:e.ruleFormValue.certificationEndTime,callback:function(t){e.$set(e.ruleFormValue,"certificationEndTime",t)},expression:"ruleFormValue.certificationEndTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产量",prop:"output"}},[a("el-input",{model:{value:e.ruleFormValue.output,callback:function(t){e.$set(e.ruleFormValue,"output",e._n(t))},expression:"ruleFormValue.output"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("el-form-item",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file?a("span",{staticClass:"margin-left-10"},[e._v("("+e._s(e.file.name)+")")]):a("span",{staticClass:"margin-left-10"},[e._v("请选择需要上传的文件...")])],1)],1)])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},i=[],l=(a("7514"),a("55a1")),o=(a("d1a0"),{data:function(){return{ruleFormValue:{creditCode:"",productId:"",certificationType:"",certificationCategory:"",argriculturalClassification:"",certificationStartTime:"",certificationEndTime:"",output:""},rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],certificationType:[{required:!0,message:"请选择",trigger:"change"}],certificationCategory:[{required:!0,message:"请插入",trigger:"change"}],argriculturalClassification:[{required:!0,message:"请选择",trigger:"change"}],certificationStartTime:[{required:!0,message:"请选择",trigger:"change"}],certificationEndTime:[{required:!0,message:"请选择",trigger:"change"}],output:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]},file:null,creditCode:"",companyNameList:[],listLoading:!1,productNameList:[],options:[{value:"1",label:"养殖业"},{value:"2",label:"畜牧业"},{value:"3",label:"种植业"}],certificationTypes:[{value:"1",label:"无公害产品"},{value:"2",label:"绿色食品"},{value:"3",label:"有机食品"},{value:"3",label:"地理标志"}]}},created:function(){this.creditCode=this.$route.query.creditCode,this.ruleFormValue.creditCode=this.$route.query.creditCode,this.getCompanyProduction(),this.getProductionDetail()},methods:{getCompanyProduction:function(){var e=this;Object(l["a"])().get("/api/company_production/name").then((function(t){e.companyNameList=t})).catch((function(e){console.log(e)}))},getProductionDetail:function(){var e=this,t=this.filterCompany(this.ruleFormValue.creditCode);Object(l["a"])().get("/api/product_production/all",{company_id:t,sortBy:"productId"}).then((function(t){e.productNameList=t.data})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a=new FormData;t.listLoading=!0,a.append("creditCode",t.ruleFormValue.creditCode),a.append("productId",t.ruleFormValue.productId),a.append("certificationType",t.ruleFormValue.certificationType),a.append("certificationCategory",t.ruleFormValue.certificationCategory),a.append("argriculturalClassification",t.ruleFormValue.argriculturalClassification),a.append("certificationStartTime",t.ruleFormValue.certificationStartTime),a.append("certificationEndTime",t.ruleFormValue.certificationEndTime),a.append("createDate",t.ruleFormValue.certificationStartTime),a.append("updateDate",t.ruleFormValue.certificationStartTime),a.append("updater","string"),a.append("creater","string"),a.append("id",0),t.file&&a.append("file",t.file),Object(l["a"])().post("/api/quality_standard/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},filterCompany:function(e){var t=this.companyNameList.find((function(t){return t.creditCode===e}));return t?t.companyId:""},filterCompanyName:function(e){var t=this.companyNameList.find((function(t){return t.creditCode===e}));return t?(this.prod,t.companyName):""},goBack:function(){this.$router.go(-1)},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}}),n=o,c=a("2877"),u=Object(c["a"])(n,r,i,!1,null,"275a607e",null);t["default"]=u.exports},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},e853:function(e,t,a){var r=a("d3f4"),i=a("1169"),l=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[l],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-4d9ea5d6.28f29d54.js.map