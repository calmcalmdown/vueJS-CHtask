{"version":3,"sources":["webpack:///./src/components/aquaticStatistics/aquaticStatistics.vue?846b","webpack:///src/components/aquaticStatistics/aquaticStatistics.vue","webpack:///./src/components/aquaticStatistics/aquaticStatistics.vue?98c0","webpack:///./src/components/aquaticStatistics/aquaticStatistics.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","handleImportExcel","handleDownloadSample","ref","staticStyle","handleFileUpload","directives","name","rawName","value","expression","tableData","rowIndex","order","total","page","pageIndex","pageSize","$set","getList","staticRenderFns","components","data","file","listLoading","filesample","created","methods","url","method","responseType","fixdata","o","l","byteLength","w","String","fromCharCode","apply","Uint8Array","slice","workbook_make_json","result","document","getElementById","click","$refs","files","reader","FileReader","readAsArrayBuffer","row","component"],"mappings":"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","file":"js/chunk-2d0c4db7.9e26449b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{staticClass:\"actived\"},[_vm._v(\"水产统计\")])],1)],1),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"iptBox\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleImportExcel()}}},[_vm._v(\"添加\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleDownloadSample()}}},[_vm._v(\"例文档下载\")]),_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"file\",\"accept\":\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\",\"name\":\"Upload Excel\"},on:{\"change\":function($event){return _vm.handleFileUpload()}}})],1),_c('el-container',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"row-class-name\":_vm.rowIndex,\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"formatter\":_vm.order,\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"prop\":\"sampleName\",\"label\":\"样品名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"sampleScientificName\",\"label\":\"样品学名\"}}),_c('el-table-column',{attrs:{\"prop\":\"sampleSerialNum\",\"label\":\"样品编号\"}}),_c('el-table-column',{attrs:{\"prop\":\"city\",\"label\":\"市别\"}}),_c('el-table-column',{attrs:{\"prop\":\"district\",\"label\":\"区县\"}}),_c('el-table-column',{attrs:{\"prop\":\"inspectedUnit\",\"label\":\"被检单位\"}}),_c('el-table-column',{attrs:{\"prop\":\"sampleType\",\"label\":\"样品类型\"}}),_c('el-table-column',{attrs:{\"prop\":\"furaMeta\",\"label\":\"呋喃唑酮代谢物\"}}),_c('el-table-column',{attrs:{\"prop\":\"malaGreen\",\"label\":\"孔雀石绿\"}}),_c('el-table-column',{attrs:{\"prop\":\"detectionRoomNum\",\"label\":\"检测室编号\"}}),_c('el-table-column',{attrs:{\"prop\":\"detectionRoomName\",\"label\":\"检测室名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"detectionTime\",\"label\":\"检测时间\"}})],1)],1),_c('div',{staticClass:\"pageBox\"},[_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total > 0),expression:\"total > 0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.page.pageIndex,\"limit\":_vm.page.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.page, \"pageIndex\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.page, \"pageSize\", $event)},\"pagination\":_vm.getList}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","  <template>\r\n  <div class=\"container\">\r\n    <div class=\"title\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item class=\"actived\">水产统计</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    <div class=\"box\">\r\n      <div class=\"iptBox\">\r\n        <el-button size=\"small\" type=\"primary\" plain v-on:click=\"handleImportExcel()\">添加</el-button>\r\n        <el-button size=\"small\" type=\"success\" plain v-on:click=\"handleDownloadSample()\">例文档下载</el-button>\r\n        <input\r\n          type=\"file\"\r\n          id=\"file\"\r\n          ref=\"file\"\r\n          accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n          v-on:change=\"handleFileUpload()\"\r\n          name=\"Upload Excel\"\r\n          style=\"display:none\"\r\n        />\r\n      </div>\r\n      <el-container>\r\n        <el-table\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\"\r\n          :row-class-name=\"rowIndex\"\r\n          v-loading=\"listLoading\"\r\n          highlight-current-row\r\n        >\r\n          <el-table-column :formatter=\"order\" label=\"序号\"></el-table-column>\r\n          <el-table-column prop=\"sampleName\" label=\"样品名称\"></el-table-column>\r\n          <el-table-column prop=\"sampleScientificName\" label=\"样品学名\"></el-table-column>\r\n          <el-table-column prop=\"sampleSerialNum\" label=\"样品编号\"></el-table-column>\r\n          <el-table-column prop=\"city\" label=\"市别\"></el-table-column>\r\n          <el-table-column prop=\"district\" label=\"区县\"></el-table-column>\r\n          <el-table-column prop=\"inspectedUnit\" label=\"被检单位\"></el-table-column>\r\n          <el-table-column prop=\"sampleType\" label=\"样品类型\"></el-table-column>\r\n          <el-table-column prop=\"furaMeta\" label=\"呋喃唑酮代谢物\"></el-table-column>\r\n          <el-table-column prop=\"malaGreen\" label=\"孔雀石绿\"></el-table-column>\r\n          <el-table-column prop=\"detectionRoomNum\" label=\"检测室编号\"></el-table-column>\r\n          <el-table-column prop=\"detectionRoomName\" label=\"检测室名称\"></el-table-column>\r\n          <el-table-column prop=\"detectionTime\" label=\"检测时间\"></el-table-column>\r\n        </el-table>\r\n      </el-container>\r\n      <div class=\"pageBox\">\r\n        <pagination\r\n          v-show=\"total > 0\"\r\n          :total=\"total\"\r\n          :page.sync=\"page.pageIndex\"\r\n          :limit.sync=\"page.pageSize\"\r\n          @pagination=\"getList\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from \"@/components/common/pagination\";\r\nimport Request from \"../../services/api/request.js\";\r\nimport Auth from \"@/services/authentication/auth.js\";\r\nimport { Urls } from \"@/services/constants\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"aquaticStatistics\",\r\n  components: { Pagination },\r\n  data() {\r\n    return {\r\n      page: {\r\n        pageIndex: 1,\r\n        pageSize: 20\r\n      },\r\n      file: null,\r\n      total: 0,\r\n      tableData: [],\r\n      listLoading: false,\r\n      filesample: \"/uploads/AquaticSample.xlsx\"\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.getList();\r\n  },\r\n\r\n  methods: {\r\n    getList() {\r\n      this.listLoading = true;\r\n      Request()\r\n        .get(\"/api/aquatic_statistics/all\", {\r\n          pageNo: this.page.pageIndex - 1,\r\n          pageSize: this.page.pageSize,\r\n          sortBy: \"id\"\r\n        })\r\n        .then(response => {\r\n          this.tableData = response.data;\r\n          this.total = response.total;\r\n          setTimeout(() => {\r\n            this.listLoading = false;\r\n          }, 0.5 * 1000);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n    handleDownloadSample() {\r\n      axios({\r\n        url: Urls.DOWNLOAD_URL() + this.filesample,\r\n        method: \"GET\",\r\n        responseType: \"blob\" // important\r\n      })\r\n        .then(response => {\r\n          const url = window.URL.createObjectURL(response.data);\r\n          const link = document.createElement(\"a\");\r\n          link.href = url;\r\n          link.setAttribute(\"download\", this.filesample.replace(\"/uploads/\",\"\")) //or any other extension\r\n          document.body.appendChild(link);\r\n          link.click();\r\n        })\r\n        .catch(() => console.log(\"error occured\"));\r\n    },\r\n\r\n    fixdata(data) {\r\n      var o = \"\",\r\n        l = 0,\r\n        w = 10240;\r\n      for (; l < data.byteLength / w; ++l)\r\n        o += String.fromCharCode.apply(\r\n          null,\r\n          new Uint8Array(data.slice(l * w, l * w + w))\r\n        );\r\n      o += String.fromCharCode.apply(null, new Uint8Array(data.slice(l * w)));\r\n      return o;\r\n    },\r\n\r\n    workbook_make_json(workbook) {\r\n      var key = {\r\n        区县: \"district\",\r\n        呋喃唑酮代谢物: \"furaMeta\",\r\n        孔雀石绿: \"malaGreen\",\r\n        市别: \"city\",\r\n        样品名称: \"sampleName\",\r\n        样品学名: \"sampleScientificName\",\r\n        样品类型: \"sampleType\",\r\n        样品编号: \"sampleSerialNum\",\r\n        检测室名称: \"detectionRoomName\",\r\n        检测室编号: \"detectionRoomNum\",\r\n        检测时间: \"detectionTime\",\r\n        被检单位: \"inspectedUnit\"\r\n      };\r\n      var result = [];\r\n      var index = 0;\r\n      // workbook.SheetNames.forEach(function(sheetName) {\r\n      //   var roa = XLSX.utils.sheet_to_row_object_array(\r\n      //     workbook.Sheets[sheetName]\r\n      //   );\r\n\r\n      //   if (roa.length > 0) {\r\n      //     roa.forEach(function(row) {\r\n      //       let changeVal = Object.keys(row).map(k => {\r\n      //         let v = key[k] || k;\r\n      //         return { [v]: row[k] };\r\n      //       });\r\n\r\n      //       result.push(\r\n      //         Object.assign(\r\n      //           {},\r\n      //           ...changeVal,\r\n      //           { createTime: new Date().toJSON() },\r\n      //           { createUserId: Auth().user().id },\r\n      //           { id: 0 },\r\n      //           { updateTime: new Date().toJSON() },\r\n      //           { updateUserId: Auth().user().id }\r\n      //         )\r\n      //       );\r\n      //     });\r\n      //   }\r\n      // });\r\n\r\n      return result;\r\n    },\r\n\r\n    handleImportExcel() {\r\n      document.getElementById(\"file\").click();\r\n    },\r\n\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n      var reader = new FileReader();\r\n      var obj = this;\r\n\r\n      // reader.onload = function(e) {\r\n      //   let fixedData = obj.fixdata(e.target.result),\r\n      //     workbook = XLSX.read(btoa(fixedData), { type: \"base64\" });\r\n      //   let val = obj.workbook_make_json(workbook);\r\n\r\n      //   Request()\r\n      //     .post(\"/api/aquatic_statistics/create\", val)\r\n      //     .then(response => {\r\n      //       obj.getList();\r\n      //     })\r\n      //     .catch(error => {\r\n      //       console.log(error);\r\n      //     });\r\n      // };\r\n\r\n      reader.readAsArrayBuffer(this.file);\r\n    },\r\n\r\n    rowIndex({ row, rowIndex }) {\r\n      row.rowIndex = rowIndex;\r\n    },\r\n\r\n    order(row) {\r\n      return this.page.pageSize * (this.page.pageIndex - 1) + row.rowIndex + 1;\r\n    }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./aquaticStatistics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./aquaticStatistics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./aquaticStatistics.vue?vue&type=template&id=f3180eb0&\"\nimport script from \"./aquaticStatistics.vue?vue&type=script&lang=js&\"\nexport * from \"./aquaticStatistics.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}