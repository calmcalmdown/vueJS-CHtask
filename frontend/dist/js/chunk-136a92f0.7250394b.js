(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-136a92f0"],{"0a49":function(e,t,r){var a=r("9b43"),l=r("626a"),o=r("4bf8"),n=r("9def"),i=r("cd1c");e.exports=function(e,t){var r=1==e,s=2==e,u=3==e,c=4==e,d=6==e,p=5==e||d,m=t||i;return function(t,i,f){for(var g,v,h=o(t),b=l(h),F=a(i,f,3),y=n(b.length),V=0,w=r?m(t,y):s?m(t,0):void 0;y>V;V++)if((p||V in b)&&(g=b[V],v=F(g,V,h),e))if(r)w[V]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return V;case 2:w.push(g)}else if(c)return!1;return d?-1:u||c?c:w}}},1169:function(e,t,r){var a=r("2d95");e.exports=Array.isArray||function(e){return"Array"==a(e)}},"512e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("生产标准")]),r("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加")])],1)],1),r("div",{staticClass:"box"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"产品名称：",prop:"productId"}},[r("el-select",{staticClass:"w-100",attrs:{loading:e.selloading},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productionList,(function(e){return r("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"类别：",prop:"category"}},[r("el-select",{staticClass:"w-80",model:{value:e.ruleFormValue.category,callback:function(t){e.$set(e.ruleFormValue,"category",t)},expression:"ruleFormValue.category"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"发布日期：",prop:"releaseTime"}},[r("el-date-picker",{staticClass:"w-100",attrs:{align:"right",type:"date",placeholder:"开始日期"},model:{value:e.ruleFormValue.releaseTime,callback:function(t){e.$set(e.ruleFormValue,"releaseTime",t)},expression:"ruleFormValue.releaseTime"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"发布者：",prop:"releasePerson"}},[r("el-input",{staticClass:"w-80",model:{value:e.ruleFormValue.releasePerson,callback:function(t){e.$set(e.ruleFormValue,"releasePerson",t)},expression:"ruleFormValue.releasePerson"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"生产标准：",prop:"productionStandard"}},[r("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.ruleFormValue.productionStandard,callback:function(t){e.$set(e.ruleFormValue,"productionStandard",t)},expression:"ruleFormValue.productionStandard"}})],1)],1)],1),r("el-form-item",{attrs:{label:""}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"item",staticStyle:{display:"flex"}},[r("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[r("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),r("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),r("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?r("span",[e._v("("+e._s(e.file.name)+")")]):r("span",[e._v("请选择需要上传的文件...")])])])])],1),r("el-form-item",{attrs:{label:""}},[r("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},l=[],o=(r("7514"),r("55a1")),n=(r("d1a0"),{name:"addProductionStandard",data:function(){return{file:null,productionList:[],selloading:!1,pageLoading:!1,options:[{id:1,name:"畜牧业"},{id:2,name:"水产业"},{id:3,name:"养殖业"}],ruleFormValue:{productId:null,category:null,releaseTime:"",releasePerson:"",productionStandard:""},rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],category:[{required:!0,message:"请选择"}],releaseTime:[{required:!0,message:"请选择"}],releasePerson:[{required:!0,message:"请插入"}],productionStandard:[{required:!0,message:"请选择"}]}}},created:function(){this.getProduction()},methods:{getProduction:function(){var e=this;this.selloading=!0,Object(o["a"])().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productionList=t.data,setTimeout((function(){e.selloading=!1}),500)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.pageLoading=!0;var r=new FormData;r=t.makeFormData(),Object(o["a"])().post("/api/production_standard/create",r).then((function(e){setTimeout((function(){t.pageLoading=!1}),500),t.$router.push({path:"/productionStandard"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",0),e.append("productId",this.ruleFormValue.productId);var t=this.filterProduct(this.ruleFormValue.productId);return e.append("productName",t),this.ruleFormValue.releaseTime=new Date(this.ruleFormValue.releaseTime).toDateString("YYYY-MM-DD"),e.append("category",this.ruleFormValue.category),e.append("releaseTime",this.ruleFormValue.releaseTime),e.append("releasePerson",this.ruleFormValue.releasePerson),e.append("productStandard",this.ruleFormValue.productionStandard),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},filterProduct:function(e){var t=this.productionList.find((function(t){return t.productId===e}));return t?t.productName:""}}}),i=n,s=r("2877"),u=Object(s["a"])(i,a,l,!1,null,null,null);t["default"]=u.exports},7514:function(e,t,r){"use strict";var a=r("5ca1"),l=r("0a49")(5),o="find",n=!0;o in[]&&Array(1)[o]((function(){n=!1})),a(a.P+a.F*n,"Array",{find:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(o)},cd1c:function(e,t,r){var a=r("e853");e.exports=function(e,t){return new(a(e))(t)}},e853:function(e,t,r){var a=r("d3f4"),l=r("1169"),o=r("2b4c")("species");e.exports=function(e){var t;return l(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!l(t.prototype)||(t=void 0),a(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-136a92f0.7250394b.js.map