(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea5b030a","chunk-2d0e2754"],{"0a49":function(e,t,a){var r=a("9b43"),o=a("626a"),n=a("4bf8"),i=a("9def"),d=a("cd1c");e.exports=function(e,t){var a=1==e,s=2==e,c=3==e,l=4==e,u=6==e,p=5==e||u,m=t||d;return function(t,d,f){for(var h,g,v=n(t),b=o(v),F=r(d,f,3),y=i(b.length),w=0,S=a?m(t,y):s?m(t,0):void 0;y>w;w++)if((p||w in b)&&(h=b[w],g=F(h,w,v),e))if(a)S[w]=g;else if(g)switch(e){case 3:return!0;case 5:return h;case 6:return w;case 2:S.push(h)}else if(l)return!1;return u?-1:c||l?l:S}}},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},7514:function(e,t,a){"use strict";var r=a("5ca1"),o=a("0a49")(5),n="find",i=!0;n in[]&&Array(1)[n]((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"7f7f":function(e,t,a){var r=a("86cc").f,o=Function.prototype,n=/^\s*function ([^ (]*)/,i="name";i in o||a("9e1e")&&r(o,i,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},8225:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产标准")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改生产标准")])],1)],1),e.listLoading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[e._v("装货...")]):a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],ref:"dataFormRef",attrs:{model:e.dataForm,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"产品名称：",prop:"productId"}},[a("el-select",{staticClass:"w-100",model:{value:e.dataForm.productId,callback:function(t){e.$set(e.dataForm,"productId",t)},expression:"dataForm.productId"}},e._l(e.productionList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类别：",prop:"category"}},[a("el-select",{staticClass:"w-80",model:{value:e.dataForm.category,callback:function(t){e.$set(e.dataForm,"category",t)},expression:"dataForm.category"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"发布日期：",prop:"createTime"}},[a("el-date-picker",{staticClass:"w-100",attrs:{align:"right",type:"date",placeholder:"开始日期"},model:{value:e.dataForm.releaseTime,callback:function(t){e.$set(e.dataForm,"releaseTime",t)},expression:"dataForm.releaseTime"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发布者：",prop:"releasePerson"}},[a("el-input",{staticClass:"w-80",model:{value:e.dataForm.releasePerson,callback:function(t){e.$set(e.dataForm,"releasePerson",t)},expression:"dataForm.releasePerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"生产标准：",prop:"productStandard"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.dataForm.productStandard,callback:function(t){e.$set(e.dataForm,"productStandard",t)},expression:"dataForm.productStandard"}})],1)],1)],1),a("el-form-item",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.dataForm.productionStandardProfiles?a("el-link",{staticClass:"margin-left-20",on:{click:function(t){return e.downloadFile()}}},[e._v(e._s(e.dataForm.productionStandardProfiles.replace("/uploads/","")))]):a("span",{staticClass:"margin-left-20"},[e._v("没有数据")])],1)])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dataFormRef")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},o=[],n=(a("7514"),a("7f7f"),a("a481"),a("55a1")),i=a("d1a0"),d=a("bc3a"),s=a.n(d),c={name:"editProdcutionStandard",data:function(){return{file:null,productionList:[],pageLoading:!1,listLoading:!1,options:[{id:"1",name:"畜牧业"},{id:"2",name:"水产业"},{id:"3",name:"养殖业"}],dataForm:null,rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],category:[{required:!0,message:"请选择"}],releaseTime:[{required:!0,message:"请选择"}],releasePerson:[{required:!0,message:"请插入"}],productStandard:[{required:!0,message:"请插入"}]}}},created:function(){this.getData(this.$route.params.id),this.getProduction()},methods:{getProduction:function(){var e=this;Object(n["a"])().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productionList=t.data})).catch((function(e){console.log(e)}))},getData:function(e){var t=this;this.listLoading=!0,Object(n["a"])().get("/api/production_standard/get/"+e).then((function(a){t.dataForm=a;var r=new FormData;r.append("visitCount",a.visitCount+1),r.append("id",a.id),r.append("productName",a.productName),r.append("category",a.category),a.releaseTime&&r.append("releaseTime",new Date(a.releaseTime)),r.append("releasePerson",a.releasePerson),r.append("productStandard",a.productStandard),r.append("productionStandardProfiles",a.productionStandardProfiles),r.append("productId",a.productId),a.createUserId&&r.append("createUserId",a.createUserId),a.updateTime&&r.append("updateTime",a.updateTime),a.updateUserId&&r.append("updateUserId",a.updateUserId),Object(n["a"])().put("/api/production_standard/update/"+e,r).then((function(e){})).catch((function(e){console.log(e)})),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;s()({url:i["b"].DOWNLOAD_URL()+this.dataForm.productionStandardProfiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",e.dataForm.productionStandardProfiles.replace("/uploads/","")),document.body.appendChild(r),r.click(),r.remove()}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.pageLoading=!0;var a=new FormData;a=t.makeFormData(),Object(n["a"])().put("/api/production_standard/update/"+t.dataForm.id,a).then((function(e){setTimeout((function(){t.pageLoading=!1}),500),t.$router.push({path:"/productionStandard"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",this.$route.params.id),e.append("productId",this.dataForm.productId);var t=this.filterProduct(this.dataForm.productId);return e.append("productName",t),e.append("category",this.dataForm.category),this.dataForm.releaseTime=new Date(this.dataForm.releaseTime).toDateString("YYYY-MM-DD"),e.append("releaseTime",this.dataForm.releaseTime),e.append("releasePerson",this.dataForm.releasePerson),e.append("productStandard",this.dataForm.productStandard),e.append("productionStandardProfiles",this.dataForm.productionStandardProfiles),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.dataForm.productionStandardProfiles="/uploads/"+this.file.name},filterProduct:function(e){var t=this.productionList.find((function(t){return t.productId===e}));return t?t.productName:""}}},l=c,u=a("2877"),p=Object(u["a"])(l,r,o,!1,null,null,null);t["default"]=p.exports},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},e853:function(e,t,a){var r=a("d3f4"),o=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-ea5b030a.2b930763.js.map