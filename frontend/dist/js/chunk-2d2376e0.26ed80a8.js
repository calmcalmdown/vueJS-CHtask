(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2376e0"],{faa0:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("监管对象")]),r("el-breadcrumb-item",[e._v("主营产品")]),r("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加动态")])],1)],1),r("div",{staticClass:"box"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.ruleFormValue.productName,callback:function(t){e.$set(e.ruleFormValue,"productName",t)},expression:"ruleFormValue.productName"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"仓库地址",prop:"warehouseId"}},[r("el-select",{attrs:{disabled:!(this.warehouseOptions.length>0)},model:{value:e.ruleFormValue.warehouseId,callback:function(t){e.$set(e.ruleFormValue,"warehouseId",t)},expression:"ruleFormValue.warehouseId"}},e._l(e.warehouseOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"储存数量",prop:"repertoryAmount"}},[r("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.repertoryAmount,callback:function(t){e.$set(e.ruleFormValue,"repertoryAmount",t)},expression:"ruleFormValue.repertoryAmount"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"品种",prop:"variety"}},[r("el-input",{model:{value:e.ruleFormValue.variety,callback:function(t){e.$set(e.ruleFormValue,"variety",t)},expression:"ruleFormValue.variety"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"评级",prop:"grade"}},[r("el-select",{attrs:{disabled:!(e.options.length>0)},model:{value:e.ruleFormValue.grade,callback:function(t){e.$set(e.ruleFormValue,"grade",t)},expression:"ruleFormValue.grade"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},l=[],o=r("55a1"),u={name:"addInventoryDynamics",data:function(){return{listLoading:!1,warehouseOptions:[],productDetail:[],ruleFormValue:{createTime:"",updateTime:"",grade:"",productId:0,companyId:0,repertoryAmount:"",variety:"",warehouseId:null,productName:""},rules:{variety:[{required:!0,message:"请插入",trigger:"change"}],repertoryAmount:[{required:!0,message:"请插入",trigger:"change"}],grade:[{required:!0,message:"请选择",trigger:"change"}],warehouseId:[{required:!0,message:"请选择",trigger:"change"}]},options:[{value:"1",label:"低级"},{value:"2",label:"中级"},{value:"3",label:"高级"},{value:"4",label:"特级"}]}},created:function(){this.ruleFormValue.productId=this.$route.query.productId,this.ruleFormValue.companyId=this.$route.params.id,this.getProductionDetail(),this.getWarehouseList(),this.getCurrentTime()},methods:{getProductionDetail:function(){var e=this;this.listLoading=!0,Object(o["a"])().get("/api/product_production/name",{productid:this.ruleFormValue.productId}).then((function(t){e.ruleFormValue.productName=t[0].productName,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCurrentTime:function(){var e=new Date;this.ruleFormValue.createTime=e.toISOString(),this.ruleFormValue.updateTime=e.toISOString()},getWarehouseList:function(){var e=this;this.listLoading=!0,Object(o["a"])().get("/api/warehose/all",{company_id:this.ruleFormValue.companyId,sortBy:"id"}).then((function(t){for(var r in t.data)e.warehouseOptions.push({value:t.data[r].id,label:t.data[r].warehouseName});setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var r={createTime:t.ruleFormValue.createTime,updateTime:t.ruleFormValue.updateTime,grade:t.ruleFormValue.grade,id:0,productId:t.ruleFormValue.productId,repertoryAmount:t.ruleFormValue.repertoryAmount,variety:t.ruleFormValue.variety,warehouseId:t.ruleFormValue.warehouseId};t.listLoading=!0,Object(o["a"])().post("/api/product_repetory/create",r).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},i=u,n=r("2877"),s=Object(n["a"])(i,a,l,!1,null,"689ce5e4",null);t["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d2376e0.26ed80a8.js.map