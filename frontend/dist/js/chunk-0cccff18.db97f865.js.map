{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/statisticsTracingCompany/statisticsTracingCompany.vue?f673","webpack:///src/components/statisticsTracingCompany/statisticsTracingCompany.vue","webpack:///./src/components/statisticsTracingCompany/statisticsTracingCompany.vue?8cdd","webpack:///./src/components/statisticsTracingCompany/statisticsTracingCompany.vue"],"names":["dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","listLoading","_e","attrs","is_ie","staticStyle","_v","ref","pie","initOptions","staticRenderFns","components","chart","ECharts","data","tableData","tableDataByCnt","companyStatics","companyStatics1","townList","colorList","renderer","created","isIE","getData","methods","getTownlist","getTableData","forEach","townname","townName","companyCnt","res","pie1Label","pie2Label","makePieChat1","makePieChat2","getTableData1","Promise","all","am4core","useTheme","am4themes_animated","responsive","enabled","title","text","fontSize","marginBottom","marginTop","fill","color","pieSeries","dataFields","category","labels","template","truncate","maxWidth","innerRadius","percent","slices","fillOpacity","ticks","strokeWidth","strokeOpacity","colorSet","list","colors","hs","properties","scale","sort","b","cnt","a","map","chartData","push","item","tooltip","trigger","formatter","series","setInterval","dispatchAction","type","seriesIndex","dataIndex","dataLen","makeStickChat","categoryAxis","minGridDistance","grid","disabled","rotation","horizontalCenter","line","stroke","valueAxis","min","valueY","categoryX","columns","tooltipText","gradient","LinearGradient","addColor","valueLabel","label","dy","columnTemplate","console","error","createGrid","range","axisRanges","create","formatNumber","ua","indexOf","component"],"mappings":"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","file":"js/chunk-0cccff18.db97f865.js","sourcesContent":["var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticClass:\"container customized\"},[(!_vm.listLoading)?_c('div',{staticClass:\"box padding-modified header statisticsTracingCompany\"}):_vm._e(),_c('div',{staticClass:\"box padding-modified body\"},[_c('el-row',{staticClass:\"W-100\"},[_c('el-col',{staticClass:\"position-relative\",attrs:{\"span\":12}},[(!_vm.is_ie)?_c('h1',{staticClass:\"gradient-colored chart-title margin-left-10\",staticStyle:{\"font-size\":\"20px\"}},[_vm._v(\"乡镇溯源企业统计\")]):_c('h1',{staticClass:\"margin-left-10 chart-title\",staticStyle:{\"font-size\":\"20px\"}},[_c('span',{staticStyle:{\"color\":\"#255ee3\",\"opacity\":\"0.8\"}},[_vm._v(\"乡镇溯\")]),_c('span',{staticStyle:{\"color\":\"#20beff\",\"opacity\":\"0.7\"}},[_vm._v(\"源企业统计\")])]),_c('div',{ref:\"chartpie1\",staticClass:\"disability-chart chart-container\"})]),_c('el-col',{staticClass:\"position-relative\",attrs:{\"span\":12}},[(!_vm.is_ie)?_c('h1',{staticClass:\"gradient-colored chart-title margin-left-10\",staticStyle:{\"font-size\":\"20px\"}},[_vm._v(\"各乡镇监管记录上传数据的比例分布\")]):_c('h1',{staticClass:\"margin-left-10 chart-title\",staticStyle:{\"font-size\":\"20px\"}},[_c('span',{staticStyle:{\"color\":\"#255ee3\",\"opacity\":\"0.8\"}},[_vm._v(\"各乡镇监管\")]),_c('span',{staticStyle:{\"color\":\"#20beff\",\"opacity\":\"0.7\"}},[_vm._v(\"记录上传数据的比例分布\")])]),_c('div',{ref:\"chartpie2\",staticClass:\"disability-chart chart-container margin-left-10\"},[_c('figure',[_c('chart',{ref:\"pie\",attrs:{\"options\":_vm.pie,\"init-options\":_vm.initOptions,\"autoresize\":\"\"}})],1)])])],1),_c('el-row',{staticClass:\"W-100 position-relative\"},[_c('el-col',[(!_vm.is_ie)?_c('h1',{staticClass:\"gradient-colored chart-title margin-left-10\",staticStyle:{\"font-size\":\"20px\"}},[_vm._v(\"各乡镇溯源记录上传数据统计\")]):_c('h1',{staticClass:\"margin-left-10 chart-title\",staticStyle:{\"font-size\":\"20px\"}},[_c('span',{staticStyle:{\"color\":\"#255ee3\",\"opacity\":\"0.8\"}},[_vm._v(\"各乡镇溯源\")]),_c('span',{staticStyle:{\"color\":\"#20beff\",\"opacity\":\"0.7\"}},[_vm._v(\"记录上传数据统计\")])]),_c('div',{ref:\"chartstick\",staticClass:\"w-100 flex-box disability-chart chart-container\"})])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container customized\" v-loading=\"listLoading\">\r\n    <div class=\"box padding-modified header statisticsTracingCompany\" v-if=\"!listLoading\"></div>\r\n    <div class=\"box padding-modified body\">\r\n      <el-row class=\"W-100\">\r\n        <el-col :span=\"12\" class=\"position-relative\">\r\n          <h1\r\n            style=\"font-size:20px\"\r\n            v-if=\"!is_ie\"\r\n            class=\"gradient-colored chart-title margin-left-10\"\r\n          >乡镇溯源企业统计</h1>\r\n          <h1 style=\"font-size:20px\" v-else class=\"margin-left-10 chart-title\">\r\n            <span style=\"color:#255ee3;opacity:0.8\">乡镇溯</span>\r\n            <span style=\"color:#20beff;opacity:0.7\">源企业统计</span>\r\n          </h1>\r\n          <div class=\"disability-chart chart-container\" ref=\"chartpie1\"></div>\r\n        </el-col>\r\n        <el-col :span=\"12\" class=\"position-relative\">\r\n          <h1\r\n            style=\"font-size:20px\"\r\n            v-if=\"!is_ie\"\r\n            class=\"gradient-colored chart-title margin-left-10\"\r\n          >各乡镇监管记录上传数据的比例分布</h1>\r\n          <h1 style=\"font-size:20px\" v-else class=\"margin-left-10 chart-title\">\r\n            <span style=\"color:#255ee3;opacity:0.8\">各乡镇监管</span>\r\n            <span style=\"color:#20beff;opacity:0.7\">记录上传数据的比例分布</span>\r\n          </h1>\r\n          <div class=\"disability-chart chart-container margin-left-10\" ref=\"chartpie2\">\r\n            <figure>\r\n              <chart :options=\"pie\" :init-options=\"initOptions\" ref=\"pie\" autoresize />\r\n            </figure>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row class=\"W-100 position-relative\">\r\n        <el-col>\r\n          <h1\r\n            style=\"font-size:20px\"\r\n            v-if=\"!is_ie\"\r\n            class=\"gradient-colored chart-title margin-left-10\"\r\n          >各乡镇溯源记录上传数据统计</h1>\r\n          <h1 style=\"font-size:20px\" v-else class=\"margin-left-10 chart-title\">\r\n            <span style=\"color:#255ee3;opacity:0.8\">各乡镇溯源</span>\r\n            <span style=\"color:#20beff;opacity:0.7\">记录上传数据统计</span>\r\n          </h1>\r\n          <div class=\"w-100 flex-box disability-chart chart-container\" ref=\"chartstick\"></div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Request from \"@/services/api/request.js\";\r\nimport Auth from \"@/services/authentication/auth.js\";\r\n// import * as am4core from \"@amcharts/amcharts4/core\";\r\n// import * as am4charts from \"@amcharts/amcharts4/charts\";\r\n// import am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\r\nconst ECharts =()=>import('vue-echarts/components/ECharts.vue');\r\nimport 'echarts/lib/chart/pie';\r\nimport 'echarts/lib/component/tooltip';\r\n\r\nexport default {\r\n  name: \"statisticsTracingCompany\",\r\n  components: {\r\n    chart: ECharts\r\n  },\r\n  data() {\r\n    return {\r\n      listLoading: true,\r\n      tableData: null,\r\n      tableDataByCnt: null,\r\n      companyStatics: null,\r\n      companyStatics1: null,\r\n      townList: null,\r\n      colorList: [\r\n        \"#229efe\",\r\n        \"#20beff\",\r\n        \"#21e3ff\",\r\n        \"#21ffda\",\r\n        \"#1fffa6\",\r\n        \"#61f779\",\r\n        \"#96f65f\",\r\n        \"#c9fb64\",\r\n        \"#c9fb64\",\r\n        \"#fbd661\",\r\n        \"#f1be51\",\r\n        \"#f68a63\",\r\n        \"#f17263\",\r\n        \"#ed6082\",\r\n        \"#ee63ca\",\r\n        \"#7366f4\"\r\n      ],\r\n      is_ie: null,\r\n      pie: {},\r\n      initOptions: {\r\n        renderer: \"canvas\"\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.isIE();\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    getData() {\r\n      this.tableData = [];\r\n      this.tableDataByCnt = [];\r\n      this.companyStatics = [];\r\n      this.townList = [];\r\n\r\n      Request()\r\n        .get(\"/api/tracing/getCompanyStatis\", {\r\n          tracingTimeFrom: \"\",\r\n          tracingTimeTo: \"\",\r\n          sortBy: \"cnt_company\"\r\n        })\r\n        .then(res => {\r\n          this.companyStatics = res.data;\r\n          this.getTownlist();\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    },\r\n\r\n    getTownlist() {\r\n      Request()\r\n        .get(\"/api/town/all\", {})\r\n        .then(response => {\r\n          this.townList = response;\r\n          this.getTableData();\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        });\r\n    },\r\n\r\n    getTableData() {\r\n      this.companyStatics.forEach(res => {\r\n        let town_id = res[1],\r\n          townname = \"\";\r\n        for (let i = 0; i < this.townList.length; i++) {\r\n          if (this.townList[i].id === town_id) {\r\n            townname = this.townList[i].name;\r\n            break;\r\n          }\r\n        }\r\n\r\n        this.tableData.push({\r\n          townName: townname,\r\n          companyCnt: res[0],\r\n          pie1Label: townname,\r\n          pie2Label: townname\r\n        });\r\n      });\r\n\r\n      this.makePieChat1();\r\n      this.makePieChat2();\r\n    },\r\n    getTableData1() {\r\n      this.companyStatics1.forEach(res => {\r\n        let town_id = res[4],\r\n          townname = \"\";\r\n        for (let i = 0; i < this.townList.length; i++) {\r\n          if (this.townList[i].id === town_id) {\r\n            townname = this.townList[i].name;\r\n            break;\r\n          }\r\n        }\r\n\r\n        this.tableDataByCnt.push({\r\n          townName: townname,\r\n          companyCnt: res[0],\r\n          pie1Label: townname,\r\n          pie2Label: townname\r\n        });\r\n      });\r\n\r\n      this.listLoading = false;\r\n    },\r\n\r\n    makePieChat1() {\r\n      Promise.all([\r\n        import(\"@amcharts/amcharts4/core\"),\r\n        import(\"@amcharts/amcharts4/charts\"),\r\n        import(\"@amcharts/amcharts4/themes/animated\")\r\n      ]).then((modules) => {\r\n        const am4core = modules[0];\r\n        const am4charts = modules[1];\r\n        const am4themes_animated = modules[2].default;\r\n        am4core.useTheme(am4themes_animated);\r\n        let chart = am4core.create(this.$refs.chartpie1, am4charts.PieChart);\r\n        Request()\r\n          .get(\"/api/company_production/getTownCreditStatis\", {\r\n            createTimeFrom: \"\",\r\n            createTimeTo: \"\",\r\n            sortBy: \"town_id\"\r\n          })\r\n          .then(res => {\r\n            this.companyStatics1 = res.data;\r\n            this.getTableData1();\r\n            chart.data = this.tableDataByCnt;\r\n            this.makeStickChat();\r\n          })\r\n          .catch(err => {\r\n            console.error(err);\r\n          });\r\n\r\n        chart.responsive.enabled = true;\r\n\r\n        let pieSeries = chart.series.push(new am4charts.PieSeries());\r\n        let title = chart.titles.create();\r\n        title.text = \"乡镇溯源企业统计\";\r\n        title.fontSize = 5;\r\n        title.marginBottom = 40;\r\n        title.marginTop = 10;\r\n        title.fill = am4core.color(\"#012f8a\");\r\n\r\n        pieSeries.dataFields.value = \"companyCnt\";\r\n        pieSeries.dataFields.category = \"pie1Label\";\r\n        pieSeries.labels.template.fill = \"white\";\r\n        pieSeries.labels.template.truncate = true;\r\n        pieSeries.labels.template.maxWidth = 150;\r\n        pieSeries.labels.template.fontSize = 15;\r\n        pieSeries.labels.template.text =\r\n          \"[bold '#20beff']{value.percent.formatNumber('#.0')}%[/] {category}\";\r\n        chart.innerRadius = am4core.percent(40);\r\n        pieSeries.slices.template.fillOpacity = 1;\r\n        pieSeries.ticks.template.fill = am4core.color(\"#FFF\");\r\n        pieSeries.ticks.template.strokeWidth = 1;\r\n        pieSeries.ticks.template.strokeOpacity = 0.7;\r\n        pieSeries.ticks.template.fillOpacity = 1;\r\n        let colorSet = new am4core.ColorSet();\r\n        colorSet.list = this.colorList.map(color => {\r\n          return new am4core.color(color);\r\n        });\r\n        pieSeries.colors = colorSet;\r\n        let hs = pieSeries.slices.template.states.getKey(\"hover\");\r\n        hs.properties.scale = 1;\r\n        hs.properties.fillOpacity = 0.5;\r\n          // Chart code goes here\r\n        }).catch((e) => {\r\n          console.error(\"Error when creating chart\", e);\r\n        }) \r\n      \r\n    },\r\n\r\n    makePieChat2() {\r\n      // let chart = am4core.create(this.$refs.chartpie2, am4charts.PieChart);\r\n      // chart.data = this.tableData;\r\n      // chart.responsive.enabled = true;\r\n      // let pieSeries = chart.series.push(new am4charts.PieSeries());\r\n\r\n      // let title = chart.titles.create();\r\n      // title.text = \"各乡镇监管记录上传数据的比例分布\";\r\n      // title.fontSize = 5;\r\n      // title.marginBottom = 40;\r\n      // title.marginTop = 10;\r\n      // title.fill = am4core.color(\"#012f8a\");\r\n\r\n      // pieSeries.dataFields.value = \"companyCnt\";\r\n      // pieSeries.dataFields.category = \"pie2Label\";\r\n      // pieSeries.dataFields.radiusValue = \"companyCnt\";\r\n      // pieSeries.labels.template.fill = \"white\";\r\n      // pieSeries.labels.template.truncate = true;\r\n      // pieSeries.labels.template.fontSize = 15;\r\n      // pieSeries.labels.template.maxWidth = 180;\r\n      // pieSeries.labels.template.text =\r\n      //   \"[bold '#20beff']{value.percent.formatNumber('#.0')}%[/] {category}\";\r\n      // pieSeries.slices.template.strokeOpacity = 1;\r\n      // pieSeries.ticks.template.fill = am4core.color(\"#FFF\");\r\n      // pieSeries.ticks.template.strokeWidth = 1;\r\n      // pieSeries.ticks.template.strokeOpacity = 0.7;\r\n      // pieSeries.ticks.template.fillOpacity = 1;\r\n      // // This creates initial animation\r\n      // pieSeries.hiddenState.properties.opacity = 1;\r\n      // pieSeries.hiddenState.properties.endAngle = -90;\r\n      // pieSeries.hiddenState.properties.startAngle = -90;\r\n      // let colorSet = new am4core.ColorSet();\r\n      // colorSet.list = this.colorList.map(color => {\r\n      //   return new am4core.color(color);\r\n      // });\r\n      // pieSeries.colors = colorSet;\r\n      this.tableData.sort(function(a, b) {\r\n        return b.cnt - a.cnt;\r\n      });\r\n      let chartData = [];\r\n      this.tableData.map(item => {\r\n        chartData.push({\r\n          value: item.companyCnt,\r\n          name: item.townName\r\n        });\r\n      });\r\n      this.pie = {\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n        },\r\n        series: [\r\n          {\r\n            name: \"各站点农残检测上传数据统计\",\r\n            type: \"pie\",\r\n            radius: \"40%\",\r\n            center: [\"54%\", \"50%\"],\r\n            data: chartData,\r\n            itemStyle: {\r\n              emphasis: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 2,\r\n                shadowColor: \"rgba(0, 0, 0, 0.5)\"\r\n              }\r\n            },\r\n            label: {\r\n              normal: {\r\n                fontSize: 16,\r\n                color: \"#FFF\",\r\n                formatter: \"{d}%: {b}\"\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        color: this.colorList\r\n      };\r\n      let dataIndex = -1;\r\n      let pie = this.$refs.pie;\r\n      let dataLen = this.pie.series[0].data.length;\r\n\r\n      setInterval(() => {\r\n        pie.dispatchAction({\r\n          type: \"downplay\",\r\n          seriesIndex: 0,\r\n          dataIndex\r\n        });\r\n        dataIndex = (dataIndex + 1) % dataLen;\r\n        pie.dispatchAction({\r\n          type: \"highlight\",\r\n          seriesIndex: 0,\r\n          dataIndex\r\n        });\r\n        // 显示 tooltip\r\n        pie.dispatchAction({\r\n          type: \"showTip\",\r\n          seriesIndex: 0,\r\n          dataIndex\r\n        });\r\n      }, 1000);\r\n    },\r\n\r\n    makeStickChat() {\r\n      Promise.all([\r\n        import(\"@amcharts/amcharts4/core\"),\r\n        import(\"@amcharts/amcharts4/charts\"),\r\n        import(\"@amcharts/amcharts4/themes/animated\")\r\n      ]).then((modules) => {\r\n        const am4core = modules[0];\r\n        const am4charts = modules[1];\r\n        const am4themes_animated = modules[2].default;\r\n        am4core.useTheme(am4themes_animated);\r\n        let chart = am4core.create(this.$refs.chartstick, am4charts.XYChart);\r\n        chart.data = this.tableDataByCnt;\r\n\r\n        let categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());\r\n        let title = chart.titles.create();\r\n        title.text = \"各乡镇溯源记录上传数据统计\";\r\n        title.fontSize = 5;\r\n        title.marginBottom = 40;\r\n        title.fill = am4core.color(\"#012f8a\");\r\n\r\n        categoryAxis.dataFields.category = \"townName\";\r\n        categoryAxis.renderer.minGridDistance = 20;\r\n        categoryAxis.renderer.grid.template.disabled = true;\r\n        categoryAxis.renderer.labels.template.fill = \"white\";\r\n        categoryAxis.renderer.labels.template.rotation = -45;\r\n        categoryAxis.renderer.labels.template.truncate = true;\r\n        categoryAxis.renderer.labels.template.maxWidth = 150;\r\n        categoryAxis.renderer.labels.template.fontSize = 15;\r\n        categoryAxis.renderer.labels.template.horizontalCenter = \"right\";\r\n        categoryAxis.renderer.line.strokeOpacity = 1;\r\n        categoryAxis.renderer.line.strokeWidth = 2;\r\n        categoryAxis.renderer.line.stroke = am4core.color(\"#3787ac\");\r\n        let valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n        // valueAxis.title.text = \"镇农产品质量安全董监管站(管站)\";\r\n        valueAxis.min = 0;\r\n        // valueAxis.max = 15000;\r\n        valueAxis.renderer.labels.template.fill = \"white\";\r\n        valueAxis.renderer.grid.template.stroke = am4core.color(\"#fff\");\r\n        valueAxis.renderer.line.strokeOpacity = 1;\r\n        valueAxis.renderer.line.strokeWidth = 2;\r\n        valueAxis.renderer.line.stroke = am4core.color(\"#3787ac\");\r\n        // valueAxis.renderer.grid.template.disabled = true;\r\n        // valueAxis.renderer.labels.template.disabled = true;\r\n        // Create series\r\n        let series = chart.series.push(new am4charts.ColumnSeries());\r\n        series.dataFields.valueY = \"companyCnt\";\r\n        series.dataFields.categoryX = \"townName\";\r\n        series.name = \"companyCnt\";\r\n        series.columns.template.tooltipText = \"{categoryX}: [bold]{valueY}[/]\";\r\n        series.columns.template.fillOpacity = 1;\r\n        var gradient = new am4core.LinearGradient();\r\n        gradient.addColor(am4core.color(\"#08d3fc\"));\r\n        gradient.addColor(am4core.color(\"#4687eb\"));\r\n        gradient.rotation = 90;\r\n        series.fill = gradient;\r\n        let valueLabel = series.bullets.push(new am4charts.LabelBullet());\r\n        valueLabel.label.text = \"{companyCnt}\";\r\n        valueLabel.label.fill = am4core.color(\"#20beff\");\r\n        valueLabel.label.truncate = true;\r\n        valueLabel.label.maxWidth = 150;\r\n        valueLabel.label.fontSize = 15;\r\n        valueLabel.label.rotation = -45;\r\n        valueLabel.label.dy = -10;\r\n        let columnTemplate = series.columns.template;\r\n        columnTemplate.strokeWidth = 2;\r\n        columnTemplate.strokeOpacity = 0;\r\n        // Chart code goes here\r\n      }).catch((e) => {\r\n        console.error(\"Error when creating chart\", e);\r\n      }) \r\n      \r\n      // this.createGrid(0, valueAxis);\r\n      // this.createGrid(5000, valueAxis);\r\n      // this.createGrid(10000, valueAxis);\r\n      // this.createGrid(15000, valueAxis);\r\n    },\r\n\r\n    createGrid(value, valueAxis) {\r\n      var range = valueAxis.axisRanges.create();\r\n      range.value = value;\r\n      range.label.text = this.formatNumber(value);\r\n    },\r\n    formatNumber(value) {\r\n      return value / 1000 + \"K\";\r\n    },\r\n    isIE() {\r\n      let ua = navigator.userAgent;\r\n      /* MSIE used to detect old browsers and Trident used to newer ones*/\r\n      this.is_ie = ua.indexOf(\"MSIE \") > -1 || ua.indexOf(\"Trident/\") > -1;\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statisticsTracingCompany.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statisticsTracingCompany.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./statisticsTracingCompany.vue?vue&type=template&id=093db9c6&\"\nimport script from \"./statisticsTracingCompany.vue?vue&type=script&lang=js&\"\nexport * from \"./statisticsTracingCompany.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}