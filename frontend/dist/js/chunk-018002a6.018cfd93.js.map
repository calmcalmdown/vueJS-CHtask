{"version":3,"sources":["webpack:///./src/components/creditRating/detailsRating/detailsRating.vue?75c8","webpack:///./src/components/creditRating/detailsRating/detailsRating.vue?7e72","webpack:///src/components/creditRating/detailsRating/detailsRating.vue","webpack:///./src/components/creditRating/detailsRating/detailsRating.vue?6cce","webpack:///./src/components/creditRating/detailsRating/detailsRating.vue?9447"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","directives","name","rawName","value","expression","_s","allStatus","data","approvalStatus","_f","gradeTime","companyName","options","grades","indexOf","originalGrade","model","callback","$$v","$set","_l","item","optionIndex","key","gradeUnit","ref","staticStyle","on","$event","handleFileUpload","uploadFileName","downloadFile","file","replace","_e","assignGrade","rejectGrade","$router","go","staticRenderFns","updateLoading","id","pageName","$route","is_ie","created","isIE","query","company","params","getData","methods","chooseFile","$refs","click","files","formData","FormData","append","approvalGrade","creditGradeId","nowGrade","originGrade","saveChangeUpdateGrade","push","creditCode","grade","url","method","responseType","window","navigator","msSaveOrOpenBlob","newBlob","link","href","setAttribute","document","body","appendChild","remove","ua","component"],"mappings":"kHAAA,yBAAilB,EAAG,G,gECAplB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,UAAY,MAAM,CAACH,EAAG,qBAAqB,CAACE,YAAY,WAAW,CAACN,EAAIQ,GAAG,WAAW,IAAI,GAAGJ,EAAG,MAAM,CAACE,YAAY,OAAO,CAAEN,EAAQ,KAAEI,EAAG,UAAU,CAACK,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOZ,EAAiB,cAAEa,WAAW,mBAAmB,CAACT,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAG,QAAQJ,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAGR,EAAIc,GAAGd,EAAIe,UAAUf,EAAIgB,KAAKC,wBAAwBb,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAG,UAAUJ,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAGR,EAAIc,GAAGd,EAAIkB,GAAG,aAAPlB,CAAqBA,EAAIgB,KAAKG,iBAAiBf,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAG,QAAQJ,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAGR,EAAIc,GAAGd,EAAIoB,oBAAoBhB,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAG,WAAWJ,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAGR,EAAIc,GAAGd,EAAIqB,QAAQrB,EAAIsB,OAAOC,QAAQvB,EAAIgB,KAAKQ,wBAAwBpB,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAG,WAAWJ,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,MAAM,SAAW,IAAIkB,MAAM,CAACb,MAAOZ,EAAIgB,KAAkB,cAAEU,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIgB,KAAM,gBAAiBW,IAAMd,WAAW,uBAAuBb,EAAI6B,GAAI7B,EAAW,SAAE,SAAS8B,EAAKC,GAAa,OAAO3B,EAAG,YAAY,CAAC4B,IAAIF,EAAKvB,MAAM,CAAC,MAAQuB,EAAK,MAAQ9B,EAAIsB,OAAOS,SAAkB,IAAI,OAAO3B,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAG,UAAUJ,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAGR,EAAIc,GAAGd,EAAIgB,KAAKiB,kBAAkB7B,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAAC8B,IAAI,OAAOC,YAAY,CAAC,QAAU,QAAQ5B,MAAM,CAAC,KAAO,OAAO,GAAK,QAAQ6B,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOrC,EAAIsC,uBAAuBlC,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAU,MAAQ,GAAG,UAAYP,EAAIgB,KAAKuB,gBAAgBH,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOrC,EAAIwC,kBAAkB,CAACxC,EAAIQ,GAAG,WAAW,IAAKR,EAAIyC,MAAQzC,EAAIgB,KAAKuB,eAAgBnC,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,UAAU,CAACgC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOrC,EAAIwC,kBAAkB,CAACxC,EAAIQ,GAAG,mBAAmBR,EAAIc,GAAGd,EAAIgB,KAAKuB,eAAeG,QAAQ,YAAa,KAAK,qBAAqB,GAAG1C,EAAI2C,KAAM3C,EAAQ,KAAEI,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIQ,GAAGR,EAAIc,GAAGd,EAAIyC,KAAK/B,SAASV,EAAI2C,SAASvC,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAU,MAAQ,GAAG,SAAoC,GAAzBP,EAAIgB,KAAKC,gBAAmBmB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOrC,EAAI4C,iBAAiB,CAAC5C,EAAIQ,GAAG,QAAQJ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,SAAS,MAAQ,GAAG,SAAoC,GAAzBP,EAAIgB,KAAKC,gBAAmBmB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOrC,EAAI6C,iBAAiB,CAAC7C,EAAIQ,GAAG,QAAQJ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,SAAS,MAAQ,IAAI6B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOrC,EAAI8C,QAAQC,IAAI,MAAM,CAAC/C,EAAIQ,GAAG,SAAS,SAASR,EAAI2C,KAAO3C,EAAIgB,KAAsChB,EAAI2C,KAApCvC,EAAG,UAAU,CAACJ,EAAIQ,GAAG,YAAqB,MAC54GwC,EAAkB,G,mEC6FtB,GACEtC,KAAM,aACNM,KAFF,WAGI,MAAO,CACLiC,eAAe,EACfC,IAAK,EACLT,KAAM,KACNU,SAAUlD,KAAKmD,OAAO1C,KACtBM,KAAM,KACNM,OAAQ,CAAC,IAAK,IAAK,KACnBD,QAAS,CAAC,SAAU,WAAY,UAChCN,UAAW,CAAC,MAAO,MAAO,OAC1BK,YAAa,GACbiC,MAAN,OAGEC,QAhBF,WAiBIrD,KAAKsD,OACLtD,KAAKmB,YAAcnB,KAAKmD,OAAOI,MAAMC,QACrCxD,KAAKiD,GAAKjD,KAAKmD,OAAOM,OAAOR,GAC7BjD,KAAK0D,QAAQ1D,KAAKmD,OAAOM,OAAOR,KAElCU,QAAS,CACPD,QADJ,SACA,cACM,OAAN,OAAM,GACN,wCACA,kBACQ,EAAR,UAEA,mBACQ,QAAR,WAIIE,WAZJ,WAaM5D,KAAK6D,MAAMrB,KAAKsB,SAGlBzB,iBAhBJ,WAiBMrC,KAAKwC,KAAOxC,KAAK6D,MAAMrB,KAAKuB,MAAM,IAGpCpB,YApBJ,WAoBA,WACM3C,KAAKgD,eAAgB,EACrB,IAAIgB,EAAW,IAAIC,SACnBD,EAASE,OAAO,kBAAmBlE,KAAKe,KAAKoD,eAC7CH,EAASE,OAAO,KAAMlE,KAAKe,KAAKqD,eAChCJ,EAASE,OAAO,gBAAiBlE,KAAKe,KAAKoD,eAC3CH,EAASE,OAAO,cAAelE,KAAKe,KAAKsD,UACzCL,EAASE,OAAO,iBAAkB,GAC9BlE,KAAKwC,MACPwB,EAASE,OAAO,OAAQlE,KAAKwC,MAE/BwB,EAASE,OAAO,OAAQlE,KAAKe,MAC7B,OAAN,OAAM,GACN,IACA,4DACA,GAEA,kBACQ,EAAR,iDAEA,wBAGI6B,YA3CJ,WA2CA,WACM5C,KAAKgD,eAAgB,EACrB,IAAIgB,EAAW,IAAIC,SACnBD,EAASE,OAAO,kBAAmBlE,KAAKe,KAAKsD,UAC7CL,EAASE,OAAO,KAAMlE,KAAKe,KAAKqD,eAChCJ,EAASE,OAAO,gBAAiBlE,KAAKe,KAAKsD,UAC3CL,EAASE,OAAO,cAAelE,KAAKe,KAAKuD,aACzCN,EAASE,OAAO,iBAAkB,GAC9BlE,KAAKwC,MACPwB,EAASE,OAAO,OAAQlE,KAAKwC,MAE/BwB,EAASE,OAAO,OAAQlE,KAAKe,MAC7B,OAAN,OAAM,GACN,IACA,4DACA,GAEA,kBACQ,EAAR,4CAEA,wBAGIwD,sBAlEJ,SAkEA,gBACA,KACMxD,EAAKyD,KAAK,CACRxD,eAAgB,EAChByD,WAAYzE,KAAKe,KAAK0D,WACtBC,MAAO1E,KAAKe,KAAKsD,WAEnB,OAAN,OAAM,GACN,IACA,uCACA,qBACA,qBACA,YAEA,kBACQ,EAAR,iBACQ,EAAR,cAAU,KAAV,qBAEA,wBAGI9B,aAvFJ,WAuFA,WACM,IAAN,CACQoC,IAAK,EAAb,6CACQC,OAAQ,MACRC,aAAc,SACtB,kBACQ,GAAR,QAWA,CACU,IAAV,uDACU,GAAIC,OAAOC,WAAaD,OAAOC,UAAUC,iBAEvC,YADAF,OAAOC,UAAUC,iBAAiBC,EAAS,EAAvD,iDAdA,CACU,IAAV,iDACA,8BACUC,EAAKC,KAAOR,EACZO,EAAKE,aACf,WACA,+CAEUC,SAASC,KAAKC,YAAYL,GAC1BA,EAAKpB,QACLoB,EAAKM,cAUXlC,KAjHJ,WAkHM,IAAN,sBAEMtD,KAAKoD,MAAQqC,EAAGnE,QAAQ,UAAY,GAAKmE,EAAGnE,QAAQ,aAAe,KCxO4S,I,wBCQjXoE,EAAY,eACd,EACA5F,EACAiD,GACA,EACA,KACA,WACA,MAIa,aAAA2C,E","file":"js/chunk-018002a6.018cfd93.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailsRating.vue?vue&type=style&index=0&id=7fa5bd99&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailsRating.vue?vue&type=style&index=0&id=7fa5bd99&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{staticClass:\"actived\"},[_vm._v(\"评级详情\")])],1)],1),_c('div',{staticClass:\"box\"},[(_vm.data)?_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.updateLoading),expression:\"updateLoading\"}]},[_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"状态\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.allStatus[_vm.data.approvalStatus]))])])]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"item inline-block-IE\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"评级时间\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.data.gradeTime)))])]),_c('div',{staticClass:\"item inline-block-IE\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"名称\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.companyName))])])]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"原信用评级\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.options[_vm.grades.indexOf(_vm.data.originalGrade)]))])])]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"现信用评级\")]),_c('div',{staticClass:\"item-value\"},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"disabled\":\"\"},model:{value:(_vm.data.approvalGrade),callback:function ($$v) {_vm.$set(_vm.data, \"approvalGrade\", $$v)},expression:\"data.approvalGrade\"}},_vm._l((_vm.options),function(item,optionIndex){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":_vm.grades[optionIndex]}})}),1)],1)])]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"评级单位\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.data.gradeUnit))])])]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-label\"},[_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"file\"},on:{\"change\":function($event){return _vm.handleFileUpload()}}}),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\",\"plain\":\"\",\"disabled\":!_vm.data.uploadFileName},on:{\"click\":function($event){return _vm.downloadFile()}}},[_vm._v(\"下载附件\")])],1),(!_vm.file && _vm.data.uploadFileName)?_c('div',{staticClass:\"item-value\"},[_c('el-link',{on:{\"click\":function($event){return _vm.downloadFile()}}},[_vm._v(\"\\n              \"+_vm._s(_vm.data.uploadFileName.replace(\"/uploads/\", \"\"))+\"\\n            \")])],1):_vm._e(),(_vm.file)?_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.file.name))]):_vm._e()])]),_c('div',{staticClass:\"item-row\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-value\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\",\"disabled\":_vm.data.approvalStatus!=0},on:{\"click\":function($event){return _vm.assignGrade()}}},[_vm._v(\"同意\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"plain\":\"\",\"disabled\":_vm.data.approvalStatus!=0},on:{\"click\":function($event){return _vm.rejectGrade()}}},[_vm._v(\"拒绝\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"返回\")])],1)])])]):_vm._e(),(!_vm.data)?_c('el-form',[_vm._v(\"装货...\")]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"title\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item class=\"actived\">评级详情</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    <div class=\"box\">\r\n      <el-form v-if=\"data\" v-loading=\"updateLoading\">\r\n        <div class=\"item-row\">\r\n          <div class=\"item\">\r\n            <div class=\"item-label\">状态</div>\r\n            <div class=\"item-value\">{{ allStatus[data.approvalStatus] }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"item-row\">\r\n          <div class=\"item inline-block-IE\">\r\n            <div class=\"item-label\">评级时间</div>\r\n            <div class=\"item-value\">{{ data.gradeTime | formatDate }}</div>\r\n          </div>\r\n          <div class=\"item inline-block-IE\">\r\n            <div class=\"item-label\">名称</div>\r\n            <div class=\"item-value\">{{ companyName }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"item-row\">\r\n          <div class=\"item\">\r\n            <div class=\"item-label\">原信用评级</div>\r\n            <div class=\"item-value\">{{ options[grades.indexOf(data.originalGrade)] }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"item-row\">\r\n          <div class=\"item\">\r\n            <div class=\"item-label\">现信用评级</div>\r\n            <div class=\"item-value\">\r\n              <el-select v-model=\"data.approvalGrade\" placeholder=\"请选择\" disabled>\r\n                <el-option\r\n                  v-for=\"(item, optionIndex) in options\"\r\n                  :key=\"item\"\r\n                  :label=\"item\"\r\n                  :value=\"grades[optionIndex]\"\r\n                ></el-option>\r\n              </el-select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"item-row\">\r\n          <div class=\"item\">\r\n            <div class=\"item-label\">评级单位</div>\r\n            <div class=\"item-value\">{{ data.gradeUnit }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"item-row\">\r\n          <div class=\"item\">\r\n            <div class=\"item-label\">\r\n              <input\r\n                type=\"file\"\r\n                id=\"file\"\r\n                style=\"display: none\"\r\n                ref=\"file\"\r\n                v-on:change=\"handleFileUpload()\"\r\n              />\r\n              <el-button size=\"small\" type=\"warning\" plain @click=\"downloadFile()\" :disabled=\"!data.uploadFileName\">下载附件</el-button>\r\n            </div>\r\n            <div class=\"item-value\" v-if=\"!file && data.uploadFileName\">\r\n              <el-link @click=\"downloadFile()\">\r\n                {{\r\n                data.uploadFileName.replace(\"/uploads/\", \"\")\r\n                }}\r\n              </el-link>\r\n            </div>\r\n            <div class=\"item-value\" v-if=\"file\">{{ file.name }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"item-row\">\r\n          <div class=\"item\">\r\n            <div class=\"item-value\">\r\n              <el-button size=\"small\" type=\"success\" plain @click=\"assignGrade()\" :disabled=\"data.approvalStatus!=0\">同意</el-button>\r\n              <el-button size=\"small\" type=\"danger\" plain @click=\"rejectGrade()\" :disabled=\"data.approvalStatus!=0\">拒绝</el-button>\r\n              <el-button size=\"small\" type=\"danger\" plain @click=\"$router.go(-1)\">返回</el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-form>\r\n      <el-form v-if=\"!data\">装货...</el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Request from \"../../../services/api/request.js\";\r\nimport { Urls } from \"../../../services/constants\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"EditRating\",\r\n  data() {\r\n    return {\r\n      updateLoading: false,\r\n      id: -1,\r\n      file: null,\r\n      pageName: this.$route.name,\r\n      data: null,\r\n      grades: [\"A\", \"B\", \"C\"],\r\n      options: [\"A级（守信）\", \"B级（基本守信）\", \"C级（失信）\"],\r\n      allStatus: [\"待审批\", \"已通过\", \"已拒绝\"],\r\n      companyName: \"\",\r\n      is_ie:null\r\n    };\r\n  },\r\n  created() {\r\n    this.isIE();\r\n    this.companyName = this.$route.query.company;\r\n    this.id = this.$route.params.id;\r\n    this.getData(this.$route.params.id);\r\n  },\r\n  methods: {\r\n    getData(id) {\r\n      Request()\r\n        .get(\"/api/company_credit_grade/get/\" + id)\r\n        .then(response => {\r\n          this.data = response;\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n    chooseFile() {\r\n      this.$refs.file.click();\r\n    },\r\n\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n    },\r\n\r\n    assignGrade() {\r\n      this.updateLoading = true;\r\n      var formData = new FormData();\r\n      formData.append(\"updatedNowGrade\", this.data.approvalGrade);\r\n      formData.append(\"id\", this.data.creditGradeId);\r\n      formData.append(\"approvalGrade\", this.data.approvalGrade);\r\n      formData.append(\"originGrade\", this.data.nowGrade);\r\n      formData.append(\"approvalStatus\", 1);\r\n      if (this.file) {\r\n        formData.append(\"file\", this.file);\r\n      }\r\n      formData.append(\"data\", this.data);\r\n      Request()\r\n        .put(\r\n          \"/api/company_credit_grade/update/\" + this.data.creditGradeId,\r\n          formData\r\n        )\r\n        .then(response => {\r\n          this.saveChangeUpdateGrade(1, this.data.approvalGrade);\r\n        })\r\n        .catch(error => {});\r\n    },\r\n\r\n    rejectGrade() {\r\n      this.updateLoading = true;\r\n      var formData = new FormData();\r\n      formData.append(\"updatedNowGrade\", this.data.nowGrade);\r\n      formData.append(\"id\", this.data.creditGradeId);\r\n      formData.append(\"approvalGrade\", this.data.nowGrade);\r\n      formData.append(\"originGrade\", this.data.originGrade);\r\n      formData.append(\"approvalStatus\", 2);\r\n      if (this.file) {\r\n        formData.append(\"file\", this.file);\r\n      }\r\n      formData.append(\"data\", this.data);\r\n      Request()\r\n        .put(\r\n          \"/api/company_credit_grade/update/\" + this.data.creditGradeId,\r\n          formData\r\n        )\r\n        .then(response => {\r\n          this.saveChangeUpdateGrade(2, this.data.nowGrade);\r\n        })\r\n        .catch(error => {});\r\n    },\r\n\r\n    saveChangeUpdateGrade(finalStatus,finalGrade) {\r\n      let data = [];\r\n      data.push({\r\n        approvalStatus: 2,\r\n        creditCode: this.data.creditCode,\r\n        grade: this.data.nowGrade\r\n      });\r\n      Request()\r\n        .put(\r\n          \"/api/company_production/updateGrade/\" +\r\n            this.data.creditCode +\r\n            \"?approvalStatus=\" + finalStatus +\r\n            \"&grade\" + finalGrade\r\n        )\r\n        .then(response => {\r\n          this.updateLoading = false;\r\n          this.$router.push({ path: \"/creditRating\" });\r\n        })\r\n        .catch(error => {});\r\n    },\r\n\r\n    downloadFile() {\r\n      axios({\r\n        url: Urls.DOWNLOAD_URL() + this.data.uploadFileName,\r\n        method: \"GET\",\r\n        responseType: \"blob\" // important\r\n      }).then(response => {\r\n        if(!this.is_ie){\r\n          const url = window.URL.createObjectURL(new Blob([response.data]));\r\n          const link = document.createElement(\"a\");\r\n          link.href = url;\r\n          link.setAttribute(\r\n            \"download\",\r\n            this.data.uploadFileName.replace(\"/uploads/\", \"\")\r\n          ); //or any other extension\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          link.remove();\r\n        }else{\r\n          const newBlob = new Blob([response.data], {type: 'application/octet-stream'});\r\n          if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n            window.navigator.msSaveOrOpenBlob(newBlob, this.data.uploadFileName.replace(\"/uploads/\", \"\"));\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    isIE() {\r\n      let ua = navigator.userAgent;\r\n      /* MSIE used to detect old browsers and Trident used to newer ones*/\r\n      this.is_ie = ua.indexOf(\"MSIE \") > -1 || ua.indexOf(\"Trident/\") > -1;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"./detailsRating.scss\";\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailsRating.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detailsRating.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detailsRating.vue?vue&type=template&id=7fa5bd99&scoped=true&\"\nimport script from \"./detailsRating.vue?vue&type=script&lang=js&\"\nexport * from \"./detailsRating.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detailsRating.vue?vue&type=style&index=0&id=7fa5bd99&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7fa5bd99\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}