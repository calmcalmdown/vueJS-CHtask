(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7997"],{7800:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[t._v("监管网格")])],1)],1),a("div",{staticClass:"box"},[a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:t.order,label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"120"}}),a("el-table-column",{attrs:{prop:"group1",label:"分管副镇长"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"w-100"},t._l(n.group1,(function(e){return a("p",{key:e.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),t._v("\n                "+t._s(e.title)+":"+t._s(e.name)+"\n              ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"group2",label:"农服办"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"w-100"},[a("p",{staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),t._v("\n                站长:"+t._s(n.level2header.name)+"\n              ")]),t._l(n.group2,(function(e){return a("p",{key:e.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),t._v("\n                "+t._s(e.title)+":"+t._s(e.name)+"\n              ")])}))],2)]}}])}),a("el-table-column",{attrs:{prop:"group3",label:"站所"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"w-100"},t._l(n.group3,(function(e){return a("p",{key:e.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),t._v("\n                "+t._s(e.title)+":"+t._s(e.name)+"\n              ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"group4",label:"村级协管"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"w-100"},t._l(n.group4,(function(e){return a("p",{key:e.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),t._v("\n                "+t._s(e.title)+":"+t._s(e.name)+"\n              ")])})),0)]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{staticClass:"no-margin-left margin-bottom-10 w-100",attrs:{size:"small",type:"warning",plain:"",disabled:""}},[t._v("网格图")]),a("el-button",{staticClass:"no-margin-left w-100",attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.$router.push({path:"/supervisionGrid/manage/"+n.id})}}},[t._v("管理")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.page.pageIndex,limit:t.page.pageSize},on:{"update:page":function(e){return t.$set(t.page,"pageIndex",e)},"update:limit":function(e){return t.$set(t.page,"pageSize",e)},pagination:t.getData}})],1)],1)])},i=[],s=(a("7f7f"),a("7514"),a("3b2b"),a("062e")),l=a("55a1"),o=(a("0010"),{name:"supervisionGrid",components:{Pagination:s["default"]},data:function(){return{page:{pageIndex:1,pageSize:50},dialogVisible:!1,total:0,tableData:[],listLoading:!1,townList:[{id:-1,name:"全部"}]}},created:function(){this.getTown()},methods:{getData:function(){var t=this;this.listLoading=!0,Object(l["a"])().get("/api/supervision_grid/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(e){var a=e.data,n=null;for(n in t.townList){for(var i={},s=function(e){var s=a.filter((function(a){return a.townId===t.townList[n].id&&a.supervisorType===e}));i["group"+e]=s||[]},l=1;l<5;l++)s(l);i.id=t.townList[n].id,t.tableData.push(i)}console.log(t.tableData),t.total=t.tableData.length,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(t){console.log(t)}))},getTown:function(){var t=this;return this.listLoading=!0,Object(l["a"])().get("/api/town/all").then((function(e){for(var a in t.townList=e,t.townList){var n=new RegExp(/(?<="level1":)(.*)(?=,"level2leader")/g),i=n.exec(t.townList[a].superviseSystem),s=i?i[1]:"[]",l=new RegExp(/(?<="level2leader":)(.*)(?=,"level2")/g),o=l.exec(t.townList[a].superviseSystem),r=o?o[1]:{},u=new RegExp(/(?<="level2":)(.*)(?=,"level3")/g),p=u.exec(t.townList[a].superviseSystem),c=p?p[1]:"[]",d=new RegExp(/(?<="level3":)(.*)(?=,"level4")/g),g=d.exec(t.townList[a].superviseSystem),w=g?g[1]:"[]",v=new RegExp(/(?<="level4":)(.*)(?=})/g),f=v.exec(t.townList[a].superviseSystem),m=f?f[1]:"[]";t.townList[a]["level2header"]=JSON.parse(r),t.townList[a]["group1"]=JSON.parse(s),t.townList[a]["group2"]=JSON.parse(c),t.townList[a]["group3"]=JSON.parse(w),t.townList[a]["group4"]=JSON.parse(m)}t.tableData=t.townList,setTimeout((function(){t.listLoading=!1}),50)})).catch((function(t){console.log(t)}))},rowIndex:function(t){var e=t.row,a=t.rowIndex;e.rowIndex=a},order:function(t){return this.page.pageSize*(this.page.pageIndex-1)+t.rowIndex+1},filterTown:function(t){var e=this.townList.find((function(e){return e.id===t}));return e?e.name:""}}}),r=o,u=a("2877"),p=Object(u["a"])(r,n,i,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0d7997.0ebcb7fb.js.map