(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216806"],{c377:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("培训经费管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[t._v("经费详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dataLoading,expression:"dataLoading"}],ref:"formData",staticClass:"form-width",attrs:{model:t.formData,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{prop:"projectName",label:"项目名称:"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"申请金额:",prop:"appliedAmount"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:t.formData.appliedAmount,callback:function(e){t.$set(t.formData,"appliedAmount",e)},expression:"formData.appliedAmount"}})],1),a("el-form-item",{staticClass:"input-width label-align",staticStyle:{"margin-right":"30px"},attrs:{label:"申请人：",prop:"proposer"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:t.formData.proposer,callback:function(e){t.$set(t.formData,"proposer",e)},expression:"formData.proposer"}})],1),a("el-form-item",{staticClass:"input-width label-align2",attrs:{label:"所在单位：",prop:"companyId"}},[a("el-select",{attrs:{disabled:""},model:{value:t.formData.companyId,callback:function(e){t.$set(t.formData,"companyId",e)},expression:"formData.companyId"}},t._l(t.companyProduction,(function(t){return a("el-option",{key:t.companyId,attrs:{label:t.companyName,value:t.companyId}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"file"}},[a("span",{staticClass:"item-label"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(e){return t.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:"",disabled:!t.file},on:{click:function(e){return t.downloadFile()}}},[t._v("下载附件")])],1),t.file?t._e():a("span",[a("el-link",{on:{click:function(e){return t.downloadFile()}}},[t._v("\n            "+t._s(t.fileName)+"\n          ")])],1),t.file?a("span",[a("el-link",{staticClass:"margin-left-10",on:{click:function(e){return t.downloadFile()}}},[t._v("\n            "+t._s(t.fileName)+"\n          ")])],1):t._e()]),a("el-form-item",[t.isShowAddButton?t._e():a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("通过")]),t.isShowAddButton?t._e():a("el-button",{attrs:{size:"small",plain:"",type:"warning"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("拒绝")]),t.isShowAddButton?t._e():a("el-button",{attrs:{size:"small",plain:"",type:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),t.isShowAddButton?a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]):t._e()],1)],1)],1)])},o=[],i=(a("a481"),a("7514"),a("55a1")),l=a("d1a0"),r=a("8ded"),s=a.n(r),c=a("bc3a"),d=a.n(c),u={data:function(){return{formData:{projectName:"",appliedAmount:"",proposer:"",companyId:"-1",status:""},companyProduction:[{id:-1,name:"全部"}],loggedinUserType:null,fileName:"",file:null,dataLoading:!1,id:0,isShowAddButton:null,appStatus:["全部","待审批","已同意","已拒绝"]}},mounted:function(){this.getCompanyProduct(),this.id=this.$route.params.id,this.getData(this.$route.params.id)},created:function(){this.isShowAddButton=!!s.a.get("authList").find((function(t){return"addTrainingFunds"==t.privilegeCode}))},methods:{getCompanyProduct:function(){var t=this;Object(i["a"])().get("/api/company_production/name").then((function(e){t.companyProduction=t.companyProduction.concat(e)})).catch((function(t){console.log(t)}))},getData:function(t){var e=this;this.dataLoading=!0,Object(i["a"])().get("/api/training_funds/get/"+t).then((function(t){e.formData=t,e.file=t.trainingFundsProfiles,e.file&&(e.fileName=e.file.replace("/uploads/","")),setTimeout((function(){e.dataLoading=!1}),10)})).catch((function(t){console.log(t)}))},downloadFile:function(){var t=this;d()({url:l["b"].DOWNLOAD_URL()+this.file,method:"GET",responseType:"blob"}).then((function(e){if(t.isIE()){var a=new Blob([e.data],{type:"application/octet-stream"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(a,t.file.replace("/uploads/",""))}else{var n=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=n,o.setAttribute("download",t.file.replace("/uploads/","")),document.body.appendChild(o),o.click(),o.remove()}}))},isIE:function(){var t=navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}}},p=u,m=a("2877"),f=Object(m["a"])(p,n,o,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d216806.d3d21cca.js.map