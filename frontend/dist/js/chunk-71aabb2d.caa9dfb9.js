(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71aabb2d","chunk-6051483f","chunk-2d0e2754"],{"0278":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管网格")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("管理")])],1)],1),a("div",{staticClass:"box no-padding-bottom"},[a("div",{staticClass:"container no-padding-bottom"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-dialog",{attrs:{visible:e.openDialog,width:"60%","before-close":e.handleClose,title:e.header},on:{"update:visible":function(t){e.openDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[e.showWebMaster?a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{prop:"webMaster",label:"站长：",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{model:{value:e.dynamicValidateForm.webMaster,callback:function(t){e.$set(e.dynamicValidateForm,"webMaster",t)},expression:"dynamicValidateForm.webMaster"}})],1)],1)],1):e._e(),e._l(e.dynamicValidateForm.rowDatas,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"职能：",prop:"rowDatas."+i+".title",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"rowData.title"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"姓名:",prop:"rowDatas."+i+".name",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"rowData.name"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"年龄:",prop:"rowDatas."+i+".age",rules:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}]}},[a("el-input",{model:{value:t.age,callback:function(a){e.$set(t,"age",e._n(a))},expression:"rowData.age"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"手机号:",prop:"rowDatas."+i+".phoneNumber",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.phoneNumber,callback:function(a){e.$set(t,"phoneNumber",a)},expression:"rowData.phoneNumber"}})],1)],1)],1)})),a("el-row",[a("el-col",{attrs:{span:15}})],1),a("el-form-item",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")]),a("el-button",{staticClass:"margin-right-40",staticStyle:{float:"right"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],2)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("div",{staticClass:"box"},[a("el-row",e._l(4,(function(t){return a("el-col",{key:t,attrs:{span:6}},[a("div",{staticClass:"container"},[a("div",{staticClass:"iptBox margin-bottom-10"},[a("div",{staticClass:"w-50 inline-block-IE"},[a("p",[e._v(e._s(e.supervisorType[t-1]))])]),a("div",{staticClass:"w-50 inline-block-IE text-right",staticStyle:{"margin-left":"auto"}},[a("el-button",{staticClass:"margin-left-60-IE",attrs:{size:"small",type:"success",plain:""},on:{click:function(a){return e.showDialog(e.tableData["group"+t],t)}}},[e._v("修改")])],1)]),a("el-container",[2!==t?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData["group"+t],"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"title",label:e.functionName[t-1]}}),a("el-table-column",{attrs:{prop:"name",label:e.headerName[t-1]}})],1):2===t?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData["group"+t],"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"title",label:"站长："+e.dynamicValidateForm.webMaster}},[a("el-table-column",{attrs:{prop:"title",label:e.functionName[t-1]}}),a("el-table-column",{attrs:{prop:"name",label:e.headerName[t-1]}})],1)],1):e._e()],1)],1)])})),1)],1)],1)},n=[],l=(a("55dd"),a("7f7f"),a("3b2b"),a("55a1")),s=(a("062e"),a("0010"),{name:"manageSupervisionGrid",data:function(){return{page:{pageIndex:1,pageSize:50},dynamicValidateForm:{rowDatas:[{id:null,title:"",name:"",age:null,phoneNumber:""}],webMaster:""},openDialog:!1,checked:[],selectedTownId:-1,total:0,tableData:{},listLoading:!1,supervisorType:["分管副镇长","农服办","站所","村级协管"],functionName:["职能","职能","站所","村"],headerName:["姓名","姓名","人员","协管员"],webMasterData:null,selectedRows:[],deletedRows:[],showWebMaster:!1,confirm_dialogVisible:!1,selectedSupervisupervisorType:null,header:""}},created:function(){this.selectedTownId=this.$route.params.id,this.getData()},methods:{getData:function(){var e=this;this.listLoading=!0,Object(l["a"])().get("/api/town/get/"+this.selectedTownId).then((function(t){var a=t,i=new RegExp(/(?<="level1":)(.*)(?=,"level2leader")/g),n=i.exec(a.superviseSystem),l=n?n[1]:"[]",s=new RegExp(/(?<="level2leader":)(.*)(?=,"level2")/g),r=s.exec(a.superviseSystem),o=r?r[1]:{},c=new RegExp(/(?<="level2":)(.*)(?=,"level3")/g),u=c.exec(a.superviseSystem),d=u?u[1]:"[]",p=new RegExp(/(?<="level3":)(.*)(?=,"level4")/g),m=p.exec(a.superviseSystem),f=m?m[1]:"[]",g=new RegExp(/(?<="level4":)(.*)(?=}")/g),h=g.exec(a.superviseSystem),b=h?h[1]:"[]";a["level2leader"]=JSON.parse(o),a["level2leader"]["name"]?(e.webMasterData=a["level2leader"],e.dynamicValidateForm.webMaster=a["level2leader"]["name"]):(e.webMasterData="",e.dynamicValidateForm.webMaster=""),a["group1"]=JSON.parse(l),a["group2"]=JSON.parse(d),a["group3"]=JSON.parse(f),a["group4"]=JSON.parse(b),e.tableData=a,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},addFormRow:function(){this.dynamicValidateForm.rowDatas.push({id:null,title:"",name:"",age:null,phoneNumber:"",$$hashKey:""})},showDialog:function(e,t){this.showWebMaster=2===t,this.selectedSupervisupervisorType=t,this.dynamicValidateForm.rowDatas=e,this.openDialog=!0,this.header=this.supervisorType[t-1]},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.rowDatas[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.rowDatas.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;console.log(this.dynamicValidateForm.rowDatas),this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},updateSelectedRows:function(){var e=this;if(this.confirm_dialogVisible=!1,this.openDialog=!1,this.dynamicValidateForm.rowDatas.length){this.listLoading=!0;for(var t={},a=1;a<5;a++)this.selectedSupervisupervisorType==a?t["level"+a]=this.dynamicValidateForm.rowDatas:t["level"+a]=this.tableData["group"+a],1==a&&(t["level2leader"]={name:this.dynamicValidateForm.webMaster});Object(l["a"])().put("/api/town/update/"+this.selectedTownId,{divisionCode:this.tableData.divisionCode,id:this.selectedTownId,name:this.tableData.name,superviseSystem:JSON.stringify(t)}).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.getData()}))}},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),t.deletedRows=[],e()})).catch((function(e){}))}}}),r=s,o=a("2877"),c=Object(o["a"])(r,i,n,!1,null,null,null);t["default"]=c.exports},"062e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function s(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,a){var i=r(),n=e-i,o=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=o;var r=Math.easeInOutQuad(c,i,n,t);s(r),c<t?l(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[5,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("update:limit",e),this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&o(0,800)},handleCurrentChange:function(e){this.$emit("update:page",e),this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&o(0,800)}}},u=c,d=(a("8367"),a("2877")),p=Object(d["a"])(u,i,n,!1,null,null,null);t["default"]=p.exports},"0aca":function(e,t,a){},"2f21":function(e,t,a){"use strict";var i=a("79e5");e.exports=function(e,t){return!!e&&i((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"55dd":function(e,t,a){"use strict";var i=a("5ca1"),n=a("d8e8"),l=a("4bf8"),s=a("79e5"),r=[].sort,o=[1,2,3];i(i.P+i.F*(s((function(){o.sort(void 0)}))||!s((function(){o.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(e){return void 0===e?r.call(l(this)):r.call(l(this),n(e))}})},"7f7f":function(e,t,a){var i=a("86cc").f,n=Function.prototype,l=/^\s*function ([^ (]*)/,s="name";s in n||a("9e1e")&&i(n,s,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(e){return""}}})},8367:function(e,t,a){"use strict";var i=a("0aca"),n=a.n(i);n.a},aa77:function(e,t,a){var i=a("5ca1"),n=a("be13"),l=a("79e5"),s=a("fdef"),r="["+s+"]",o="​",c=RegExp("^"+r+r+"*"),u=RegExp(r+r+"*$"),d=function(e,t,a){var n={},r=l((function(){return!!s[e]()||o[e]()!=o})),c=n[e]=r?t(p):s[e];a&&(n[a]=c),i(i.P+i.F*r,"String",n)},p=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},c5f6:function(e,t,a){"use strict";var i=a("7726"),n=a("69a8"),l=a("2d95"),s=a("5dbc"),r=a("6a99"),o=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,m="Number",f=i[m],g=f,h=f.prototype,b=l(a("2aeb")(h))==m,v="trim"in String.prototype,w=function(e){var t=r(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():p(t,3);var a,i,n,l=t.charCodeAt(0);if(43===l||45===l){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+t}for(var s,o=t.slice(2),c=0,u=o.length;c<u;c++)if(s=o.charCodeAt(c),s<48||s>n)return NaN;return parseInt(o,i)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof f&&(b?o((function(){h.valueOf.call(a)})):l(a)!=m)?s(new g(w(t)),a,f):w(t)};for(var y,S=a("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;S.length>N;N++)n(g,y=S[N])&&!n(f,y)&&d(f,y,u(g,y));f.prototype=h,h.constructor=f,a("2aba")(i,m,f)}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-71aabb2d.caa9dfb9.js.map