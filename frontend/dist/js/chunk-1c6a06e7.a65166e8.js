(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c6a06e7","chunk-2d0e2754"],{"1b22":function(t,e,a){"use strict";var i=a("579a"),s=a.n(i);s.a},"579a":function(t,e,a){},"7f7f":function(t,e,a){var i=a("86cc").f,s=Function.prototype,r=/^\s*function ([^ (]*)/,l="name";l in s||a("9e1e")&&i(s,l,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},ddb8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"container customized"},[t.listLoading?t._e():a("div",{staticClass:"box padding-modified header statisticsSupervision"}),a("div",{staticClass:"box padding-modified body"},[a("el-row",{staticClass:"W-100"},[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"disability-chart chart-container padding-10 large"},[a("el-row",{staticClass:"w-100 flex-center margin-top-10 margin-bottom-10"},[a("el-col",{staticClass:"margin-left-10",attrs:{span:5}},[t.is_ie?a("h1",{staticStyle:{"font-size":"20px margin-top:5px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[t._v("监管")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[t._v("记录统计")])]):a("h1",{staticClass:"gradient-colored",staticStyle:{"font-size":"20px"}},[t._v("监管记录统计")])]),a("el-col",{staticClass:"margin-left-20 flex-center margin-top-reverse-5-IE",attrs:{span:7}},[a("div",{staticClass:"select_label no-margin-left white-colored"},[t._v("开始日期")]),a("el-date-picker",{staticClass:"chart-input",staticStyle:{width:"150px"},attrs:{type:"date",size:"small",placeholder:"选择日期"},model:{value:t.createTimeFrom,callback:function(e){t.createTimeFrom=e},expression:"createTimeFrom"}})],1),a("el-col",{staticClass:"margin-left-20 flex-center margin-top-reverse-5-IE",attrs:{span:7}},[a("div",{staticClass:"select_label no-margin-left white-colored"},[t._v("结束日期")]),a("el-date-picker",{staticClass:"chart-input",staticStyle:{width:"150px"},attrs:{type:"date",size:"small",placeholder:"选择日期"},model:{value:t.createTimeTo,callback:function(e){t.createTimeTo=e},expression:"createTimeTo"}})],1),a("el-col",{staticClass:"margin-left-20 margin-top-reverse-5-IE",attrs:{span:3}},[a("el-button",{staticClass:"no-effect",attrs:{type:"primary",plain:""},on:{click:function(e){return t.getData()}}},[t._v("开始统计")])],1)],1),a("el-row",[a("el-container",[a("el-table",{staticClass:"fixed-height chart-table",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"townName",label:"乡镇名称",width:"120","class-name":"white-colored"}}),a("el-table-column",{attrs:{prop:"townCnt",label:"监管记录数量","class-name":"blue-colored"}}),a("el-table-column",{attrs:{prop:"townCnt2",label:"整改记录数量","class-name":"blue-colored"}}),a("el-table-column",{attrs:{prop:"rate",label:"不合格数量","class-name":"blue-colored"}}),a("el-table-column",{attrs:{prop:"progress",label:"不合格占比"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"blue-colored"},[t._v(t._s(i.progress)+"%")])]),a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:t.getColor(i.progress),"show-text":!1}})]}}])})],1)],1)],1),a("el-row",[a("el-container",[a("el-table",{staticClass:"border-hide chart-table",staticStyle:{width:"100%"},attrs:{data:t.totalData,"show-header":!1,"row-class-name":"success-row"}},[a("el-table-column",{attrs:{prop:"townName",width:"120","class-name":"white-colored"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("b",[t._v(t._s(i.townName))])]}}])}),a("el-table-column",{attrs:{prop:"townCnt","class-name":"blue-colored italic-font large-font"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("b",[t._v(t._s(i.townCnt))])]}}])}),a("el-table-column",{attrs:{prop:"townCnt2","class-name":"blue-colored italic-font large-font"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("b",[t._v(t._s(i.townCnt2))])]}}])}),a("el-table-column",{attrs:{prop:"rate","class-name":"blue-colored italic-font large-font"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("b",[t._v(t._s(i.rate))])]}}])}),a("el-table-column",{attrs:{prop:"progress"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:t.getColor(i.progress),"show-text":!1}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"合格率",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"large-font blue-colored italic-font"},[t._v(t._s(i.progress)+"%")])])]}}])})],1)],1)],1)],1)]),a("el-col",{staticClass:"position-relative",attrs:{span:10}},[t.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[t._v("各乡镇监管")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[t._v("记录上传数据的比例分布")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[t._v("各乡镇监管记录上传数据的比例分布")]),a("div",{ref:"chartpie",staticClass:"disability-chart chart-container margin-left-10 large"},[a("figure",[a("chart",{ref:"pie",attrs:{options:t.pie,"init-options":t.initOptions,autoresize:""}})],1)])])],1),a("el-row",{staticClass:"W-100"},[a("el-col",[a("div",{staticClass:"w-100 flex-box disability-chart chart-container"},[t.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[t._v("认证")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[t._v("统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[t._v("认证统计")]),a("div",{ref:"chartpie2",staticClass:"w-50 inline-block-IE chart-div-IE"}),a("div",{staticClass:"divider no-margin-left inline-block-IE divider-IE"}),a("div",{staticClass:"w-50 inline-block-IE chart-div-IE"},[null!==t.specialData1&&t.specialData1.length>0?a("el-row",{staticClass:"w-90 margin-left-60"},[a("el-col",{staticClass:"margin-top-10 text-left",staticStyle:{"font-size":"20px"}},[t.is_ie?a("h1",{staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[t._v("绿色优质")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[t._v("数量/占比")])]):a("h1",{staticClass:"gradient-colored",staticStyle:{"font-size":"20px"}},[t._v("绿色优质数量/占比")])])],1):t._e(),a("div",{staticStyle:{"max-height":"305px","overflow-y":"auto"}},[a("el-row",{staticClass:"w-90 margin-left-60"},[a("el-col",{attrs:{span:12}},[null!==t.specialData1&&t.specialData1.length>0?a("el-table",{staticClass:"fixed-height chart-table margin-top-10",staticStyle:{width:"100%",height:"293px"},attrs:{data:t.specialData1,"show-header":!1}},[a("el-table-column",{attrs:{prop:"townName","class-name":"no-border-bottom white-colored text-right"}}),a("el-table-column",{attrs:{prop:"progress",width:"200","class-name":"no-border-bottom blue-colored"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",[a("h3",[t._v(t._s(i.cntSpecial))])]),a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:t.getColor(i.progress),"show-text":!1}})]}}],null,!1,3858058275)}),a("el-table-column",{attrs:{prop:"label","class-name":"no-border-bottom blue-colored"}})],1):t._e()],1),a("el-col",{attrs:{span:12}},[null!==t.specialData2&&t.specialData2.length>0?a("el-table",{staticClass:"fixed-height margin-top-10 chart-table",staticStyle:{width:"100%",height:"293px"},attrs:{data:t.specialData2,"show-header":!1}},[a("el-table-column",{attrs:{prop:"townName","class-name":"no-border-bottom text-right white-colored"}}),a("el-table-column",{attrs:{prop:"progress",width:"200","class-name":"no-border-bottom blue-colored"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",[a("h3",[t._v(t._s(i.cntSpecial))])]),a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:t.getColor(i.progress),"show-text":!1}})]}}],null,!1,3858058275)}),a("el-table-column",{attrs:{prop:"label","class-name":"no-border-bottom blue-colored"}})],1):t._e()],1)],1)],1),a("el-row",{staticClass:"w-90 margin-left-60"},[a("el-col",{attrs:{span:24}},[null!==t.totalData&&t.totalData.length>0?a("el-table",{staticClass:"chart-table border-hide",staticStyle:{width:"100%"},attrs:{data:t.totalData,"show-header":!1}},[a("el-table-column",{attrs:{prop:"townName",align:"center",width:"120","class-name":"white-colored"}}),a("el-table-column",{attrs:{prop:"specialProgress","class-name":"blue-colored"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",[a("h3",[t._v(t._s(i.cntSpecial))])]),a("el-progress",{attrs:{percentage:i.specialProgress,"stroke-width":10,status:t.getColor(i.specialProgress),"show-text":!1}})]}}],null,!1,571547043)}),a("el-table-column",{attrs:{prop:"specialLabel",width:"120","class-name":"blue-colored"}})],1):t._e()],1)],1)],1)])])],1)],1)])},s=[],r=(a("5df3"),a("55dd"),a("7f7f"),a("ac6a"),a("96cf"),a("3b8d")),l=a("55a1"),o=(a("0010"),a("c037"),a("007d"),function(){return a.e("chunk-2129e83e").then(a.bind(null,"9ca8"))}),n={name:"statisticsSupervision",components:{chart:o},data:function(){return{pie:{},initOptions:{renderer:"canvas"},createTimeFrom:"",createTimeTo:"",listLoading:!1,visionData:null,visionData1:null,rectificationData:null,rectificationData1:null,tableData:null,tableData1:null,townlist:null,totalData:null,specialData1:[],specialData2:[],colorList:["#229efe","#20beff","#21e3ff","#21ffda","#1fffa6","#61f779","#96f65f","#c9fb64","#c9fb64","#fbd661","#f1be51","#f68a63","#f17263","#ed6082","#ee63ca","#7366f4"],is_ie:null}},mounted:function(){this.isIE(),this.getData()},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listLoading=!0,this.tableData=[],this.tableData1=[],this.rectificationData=[],this.rectificationData1=[],this.visionData=[],this.visionData1=[],this.townlist=[],this.townlist1=[],this.totalData=[],this.qualityData=[],this.specialData1=[],this.specialData2=[],t.next=15,Object(l["a"])().get("/api/supervision_record/statis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo,sortBy:"cnt"}).then((function(t){e.visionData=t.data,e.getTown()})).catch((function(t){console.error(t)}));case 15:Object(l["a"])().get("/api/supervision_record/statis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo,sortBy:"cnt"}).then((function(t){e.visionData1=t.data,e.getTown1()})).catch((function(t){console.error(t)}));case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTown:function(){var t=this;Object(l["a"])().get("/api/town/all",{}).then((function(e){t.townlist=e,t.getRectification()})).catch((function(t){console.error(t)}))},getTown1:function(){var t=this;Object(l["a"])().get("/api/town/all",{}).then((function(e){t.townlist1=e,t.getRectification1()})).catch((function(t){console.error(t)}))},getRectification:function(){var t=this;Object(l["a"])().get("/api/rectification_record/getStatis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo}).then((function(e){t.rectificationData=e.data;var a=0,i=0,s=0;t.visionData.forEach((function(e){for(var r=e[0],l=e[1],o=e[3],n="",c=0,p=0;p<t.townlist.length;p++)if(t.townlist[p].id===o){n=t.townlist[p].name;break}for(var d=0;d<t.rectificationData.length;d++)if(o===t.rectificationData[d][1]){c=t.rectificationData[d][0];break}a+=r,s+=c,i+=r-l,e[2],t.tableData.push({townName:n,townCnt:r,townCnt2:c,cntSpecial:e[2],rate:r-l,progress:parseInt(100*(r-l)/r),chatName:n})})),t.tableData.length>0&&(t.totalData.push({townName:"合计",townCnt:a,townCnt2:s,rate:i,progress:parseInt(i/a*100),specialLabel:"",specialProgress:0,cntSpecial:0}),t.makeQualityData())}))},getRectification1:function(){var t=this;Object(l["a"])().get("/api/rectification_record/getStatis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo}).then((function(e){t.rectificationData1=e.data;t.visionData1.forEach((function(e){for(var a=e[0],i=e[1],s=e[3],r="",l=0,o=0;o<t.townlist1.length;o++)if(t.townlist1[o].id===s){r=t.townlist1[o].name;break}for(var n=0;n<t.rectificationData1.length;n++)if(s===t.rectificationData1[n][1]){l=t.rectificationData1[n][0];break}a,l,a-i,e[2],t.tableData1.push({townName:r,townCnt:a,townCnt2:l,rate:a-i,progress:parseInt(100*(a-i)/a),chatName:r,specialLabel:e[2]+"/"+parseInt(100*e[2]/a)+"%",specialProgress:parseInt(100*e[2]/a)})})),t.tableData1.length>0&&(t.makePieChat1(),t.makePieChat2()),t.listLoading=!1}))},getColor:function(t){return 100===t?"success":"warning"},makePieChat1:function(){this.tableData1.sort((function(t,e){return e.townCnt-t.townCnt}));var t=[];this.tableData1.map((function(e){t.push({value:e.townCnt,name:e.chatName.length>10?e.chatName.substring(0,7)+"...":e.chatName})})),this.pie={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"各乡镇监管记录上传数据的",type:"pie",radius:"50%",center:["54%","50%"],data:t,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:2,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{fontSize:14,color:"#FFF",formatter:"{d}%:{b}"}}],color:this.colorList};var e=-1,a=this.$refs.pie,i=this.pie.series[0].data.length;setInterval((function(){a.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:e}),e=(e+1)%i,a.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e}),a.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e})}),1e3)},makePieChat2:function(){var t=this;Promise.all([Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-e1b01656"),a.e("chunk-2d0d6586")]).then(a.bind(null,"71c9")),Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-e1b01656"),a.e("chunk-2d216c05")]).then(a.bind(null,"c497")),Promise.all([a.e("chunk-f3e34bb0"),a.e("chunk-2d0d2b61")]).then(a.bind(null,"5a54"))]).then((function(e){var a=e[0],i=e[1],s=e[2].default;a.useTheme(s),Object(l["a"])().get("/api/quality_standard/statis",{createTimeFrom:null==t.createTimeFrom?"":t.createTimeFrom,createTimeTo:null==t.createTimeTo?"":t.createTimeTo,certification_type:0,sortBy:"cnt"}).then((function(e){e.data.forEach((function(e){var a="";switch(e[1]){case"1":a="无公害产品";break;case"2":a="绿色食品";break;case"3":a="有机食品";break;case"4":a="绿色优质基地";break}t.qualityData.push({townName:a,townCnt:e[0],qualityLabel:a})}));var s=a.create(t.$refs.chartpie2,i.PieChart);s.data=t.qualityData,s.responsive.enabled=!0;var r=s.series.push(new i.PieSeries),l=s.titles.create();l.text="认证统计",l.fontSize=5,l.marginBottom=10,l.fill=a.color("#012f8a"),r.dataFields.value="townCnt",r.dataFields.category="qualityLabel",r.ticks.template.strokeWidth=1,r.ticks.template.strokeOpacity=.7,r.ticks.template.fill=a.color("#012f8a"),r.ticks.template.fillOpacity=1,r.labels.template.truncate=!0,r.labels.template.fontSize=15,r.labels.template.maxWidth=180,r.labels.template.fill="white",r.labels.template.text="[bold '#20beff']{value.percent.formatNumber('#.0')}%[/] {category}",s.innerRadius=a.percent(40),r.slices.template.fillOpacity=1;var o=new a.ColorSet;o.list=t.colorList.map((function(t){return new a.color(t)})),r.colors=o;var n=r.slices.template.states.getKey("hover");n.properties.scale=1,n.properties.fillOpacity=.5}))})).catch((function(t){console.error("Error when creating chart",t)}))},makeQualityData:function(){var t=this;Object(l["a"])().get("/api/quality_standard/statis",{certificationType:"0",createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo}).then((function(e){Object(l["a"])().get("/api/quality_standard/statis",{certificationType:"4",createTimeFrom:null==t.createTimeFrom?"":t.createTimeFrom,createTimeTo:null==t.createTimeTo?"":t.createTimeTo}).then((function(a){for(var i=0,s=0,r=0;r<e.data.length;r+=2){for(var l="",o="",n=0;n<t.townlist.length;n++)t.townlist[n].id===e.data[r][1]&&(l=t.townlist[n].name),t.townlist[n].id===e.data[r+1][1]&&(o=t.townlist[n].name);for(var c=0,p=0,d=0;d<a.data.length;d++)a.data[d][1]==e.data[r][1]&&(c=a.data[d][0]),a.data[d][1]==e.data[r+1][1]&&(p=a.data[d][0]);t.specialData1.push({townName:l,progress:parseInt(100*c/e.data[r][0]),label:e.data[r][0]+"/"+parseInt(100*c/e.data[r][0])+"%",townCnt:e.data[r][0],cntSpecial:c}),r!==t.tableData.length-1&&t.specialData2.push({townName:o,progress:parseInt(100*p/e.data[r+1][0]),label:e.data[r+1][0]+"/"+parseInt(100*p/e.data[r+1][0])+"%",townCnt:e.data[r+1][0],cntSpecial:p}),s+=c+p,i+=e.data[r][0]+e.data[r+1][0]}t.totalData[0].specialLabel=i+"/"+parseInt(100*s/i)+"%",t.totalData[0].specialProgress=parseInt(100*s/i),t.totalData[0].cntSpecial=s}))}))},isIE:function(){var t=navigator.userAgent;this.is_ie=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}}},c=n,p=(a("1b22"),a("2877")),d=Object(p["a"])(c,i,s,!1,null,"63077e90",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-1c6a06e7.a65166e8.js.map