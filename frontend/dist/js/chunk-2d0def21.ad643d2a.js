(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0def21"],{"888c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("产品批次")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改批次")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{rules:e.dataRules,model:e.ruleFormdata,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品种",prop:"varietyId"}},[a("el-select",{model:{value:e.ruleFormdata.varietyId,callback:function(t){e.$set(e.ruleFormdata,"varietyId",t)},expression:"ruleFormdata.varietyId"}},e._l(e.varietyList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.varietyName}})})),1)],1),a("el-form-item",{attrs:{label:"等级名称",prop:"varietyGrade"}},[a("el-select",{model:{value:e.ruleFormdata.varietyGrade,callback:function(t){e.$set(e.ruleFormdata,"varietyGrade",t)},expression:"ruleFormdata.varietyGrade"}},e._l(e.gradeOption,(function(e){return a("el-option",{key:e.gradeId,attrs:{value:e.gradeId,label:e.gradeName}})})),1)],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},d=[],i=a("55a1"),o=a("0010"),n=a("8ded"),l=a.n(n),c={name:"addProductBatch",data:function(){return{id:-1,ruleFormdata:{varietyId:null,varietyGrade:null},varietyList:[],productId:null,listLoading:!1,selectedId:null,rowData:[],gradeOption:[{gradeId:1,gradeName:"特级"},{gradeId:2,gradeName:"高级"},{gradeId:3,gradeName:"中级"},{gradeId:4,gradeName:"低级"}],dataRules:{varietyId:[{required:!0,message:"请选择",trigger:"change"}],varietyGrade:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.productId=this.$route.params.id,this.selectedId=this.$route.params.id1,this.getVarietyData(),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(i["a"])().get("/api/product_batch/get/"+this.selectedId).then((function(t){e.rowData=t,e.ruleFormdata.varietyId=t.varietyId,e.ruleFormdata.varietyGrade=t.varietyGrade,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},getVarietyData:function(){var e=this;this.listLoading=!0,Object(i["a"])().get("/api/product_variety/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.varietyList=t.data})).catch((function(e){console.error(e)}))},onSubmit:function(e){var t=this,a=new FormData,r=new Date;this.$refs[e].validate((function(e){if(e){if(t.listLoading=!0,a.append("batchNumber",t.rowData.batchNumber),a.append("createTime",t.rowData.createTime),a.append("companyId",l.a.get("selectedCompanyId")),a.append("id",t.rowData.id),a.append("createUserId",t.rowData.createUserId),a.append("productId",t.productId),a.append("property",t.rowData.property),a.append("varietyGrade",t.ruleFormdata.varietyGrade),a.append("varietyId",t.ruleFormdata.varietyId),a.append("updateTime",r),a.append("updateUserId",Object(o["a"])().user().id),t.rowData.reportTime){var d=new Date(t.rowData.reportTime);a.append("reportTime",d)}t.rowData.reportResult&&a.append("reportResult",t.rowData.reportResult),Object(i["a"])().put("/api/product_batch/update/"+t.selectedId,a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/productionSubject/mainProduct/productBatch/".concat(t.productId)})})).catch((function(e){console.error(e)}))}}))}}},s=c,u=a("2877"),p=Object(u["a"])(s,r,d,!1,null,"23c1762c",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0def21.ad643d2a.js.map