(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb9b5c5e","chunk-6051483f"],{"062e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,r){return e/=r/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var r=l(),i=e-r,s=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=s;var l=Math.easeInOutQuad(u,r,i,t);o(l),u<t?n(e):a&&"function"===typeof a&&a()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[5,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("update:limit",e),this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("update:page",e),this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},c=u,d=(a("8367"),a("2877")),m=Object(d["a"])(c,r,i,!1,null,null,null);t["default"]=m.exports},"0a49":function(e,t,a){var r=a("9b43"),i=a("626a"),n=a("4bf8"),o=a("9def"),l=a("cd1c");e.exports=function(e,t){var a=1==e,s=2==e,u=3==e,c=4==e,d=6==e,m=5==e||d,h=t||l;return function(t,l,g){for(var p,f,b=n(t),v=i(b),w=r(l,g,3),T=o(v.length),y=0,C=a?h(t,T):s?h(t,0):void 0;T>y;y++)if((m||y in v)&&(p=v[y],f=w(p,y,b),e))if(a)C[y]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:C.push(p)}else if(c)return!1;return d?-1:u||c?c:C}}},"0aca":function(e,t,a){},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"4fa5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("溯源标签")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-tabs",{staticClass:"w-100",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基地",name:"base"}},[a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.deleteSelectedRow()}}},[e._v("确认")])],1)]),a("el-dialog",{attrs:{visible:e.show_AddDialog,width:"30%",modal:""},on:{"update:visible":function(t){e.show_AddDialog=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("添加基地")])])],1),a("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:e.ruleFormValue}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"基地名称",prop:"locationName",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue.locationName,callback:function(t){e.$set(e.ruleFormValue,"locationName",t)},expression:"ruleFormValue.locationName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"地址",prop:"locationAddress",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue.locationAddress,callback:function(t){e.$set(e.ruleFormValue,"locationAddress",t)},expression:"ruleFormValue.locationAddress"}})],1)],1)],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:22}},[a("el-form-item",{staticClass:"flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.closeAddDialog}},[e._v("关闭")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmitBase("ruleForm")}}},[e._v("保存")])],1)],1)],1)],1)],1),a("el-button",{staticClass:"margin-bottom-30",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.show_AddDialog=!0}}},[e._v("添加")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"locationName",label:"基地名称"}}),a("el-table-column",{attrs:{prop:"locationAddress",label:"地址"}}),a("el-table-column",{attrs:{prop:"locationNumber",label:"编号"}}),a("el-table-column",{attrs:{prop:"operations",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.editSelectedBase(r)}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedBase(r.id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getBaseList}})],1)],1),a("el-tab-pane",{attrs:{label:"打印设置",name:"printerSetting"}},[a("el-dialog",{attrs:{visible:e.confirm_storePrintSetting,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_storePrintSetting=t}}},[a("span",[a("i",{staticClass:"el-icon-circle-check"},[e._v(" 保存成功")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){e.confirm_storePrintSetting=!1}}},[e._v("关闭")])],1)]),a("el-form",{ref:"ruleForm1",attrs:{"label-width":"200px",model:e.ruleFormValue1}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"打印机串口",prop:"tmp1",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue1.tmp1,callback:function(t){e.$set(e.ruleFormValue1,"tmp1",t)},expression:"ruleFormValue1.tmp1"}},e._l(["com3","com4","com5"],(function(e){return a("el-option",{key:e.index,attrs:{value:e,label:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单次最多打印标签个数",prop:"tmp2",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue1.tmp2,callback:function(t){e.$set(e.ruleFormValue1,"tmp2",t)},expression:"ruleFormValue1.tmp2"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标签规格",prop:"tmp3",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue1.tmp3,callback:function(t){e.$set(e.ruleFormValue1,"tmp3",t)},expression:"ruleFormValue1.tmp3"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"flex-box w-100"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.savePrinterSetting}},[e._v("保存打印设置")])],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"标签查询",name:"tagQuery"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData1,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"productId",label:"品名"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterProductName(a.productId)))]}}])}),a("el-table-column",{attrs:{prop:"productionTime",label:"生产日期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.productionTime)))]}}])}),a("el-table-column",{attrs:{prop:"locationId",label:"基地"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterTracingLocation(a.locationId)))]}}])}),a("el-table-column",{attrs:{prop:"charge",label:"负责人"}}),a("el-table-column",{attrs:{prop:"batchNumber",label:"批次号"}}),a("el-table-column",{attrs:{prop:"tracingNumber",label:"溯源码"}}),a("el-table-column",{attrs:{prop:"printStatus",label:"标签生成","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0==r.printStatus?a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.goToTagGeneration(r)}}},[e._v("待生成")]):e._e(),1==r.printStatus?a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.goToTagGeneration(r)}}},[e._v("已生成")]):e._e()]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total1>0,expression:"total1 > 0"}],attrs:{total:e.total1,page:e.page1.pageIndex,limit:e.page1.pageSize},on:{"update:page":function(t){return e.$set(e.page1,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page1,"pageSize",t)},pagination:e.getTracingList}})],1)],1),a("el-tab-pane",{attrs:{label:"标签打印",name:"labelPrinting"}},[a("el-dialog",{attrs:{visible:e.show_QRCode,width:"20%",modal:""},on:{"update:visible":function(t){e.show_QRCode=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("二 维 码")])])],1),a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("qrcode-vue",{attrs:{value:e.qrValue,size:e.size,level:"H"}})],1)],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:22}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onPrint()}}},[e._v("打印")])],1)],1)],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm2",attrs:{"label-width":"200px",model:e.ruleFormValue2}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品名",prop:"productId",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",on:{change:function(t){return e.onChangeProductId()}},model:{value:e.ruleFormValue2.productId,callback:function(t){e.$set(e.ruleFormValue2,"productId",t)},expression:"ruleFormValue2.productId"}},e._l(e.productionList,(function(e){return a("el-option",{key:e.productId,attrs:{value:e.productId,label:e.productName}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"批号",prop:"batchNumber",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",on:{change:function(t){return e.onChangeBatch()}},model:{value:e.ruleFormValue2.batchNumber,callback:function(t){e.$set(e.ruleFormValue2,"batchNumber",t)},expression:"ruleFormValue2.batchNumber"}},e._l(e.batchList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.batchNumber,label:e.batchName}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"标签日期",prop:"tracingTimeType",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue2.tracingTimeType,callback:function(t){e.$set(e.ruleFormValue2,"tracingTimeType",t)},expression:"ruleFormValue2.tracingTimeType"}},e._l(e.dateOption,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{prop:"tracingTime",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.tracingTime,callback:function(t){e.$set(e.ruleFormValue2,"tracingTime",t)},expression:"ruleFormValue2.tracingTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"网页日期",prop:"webTimeType",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue2.webTimeType,callback:function(t){e.$set(e.ruleFormValue2,"webTimeType",t)},expression:"ruleFormValue2.webTimeType"}},e._l(e.dateOption,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{prop:"webTime",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.webTime,callback:function(t){e.$set(e.ruleFormValue2,"webTime",t)},expression:"ruleFormValue2.webTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"责任人",prop:"charge",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue2.charge,callback:function(t){e.$set(e.ruleFormValue2,"charge",t)},expression:"ruleFormValue2.charge"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"地址",prop:"locationId",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue2.locationId,callback:function(t){e.$set(e.ruleFormValue2,"locationId",t)},expression:"ruleFormValue2.locationId"}},e._l(e.tableData,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.locationAddress}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标签数量",prop:"tracingAmount",rules:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue2.tracingAmount,callback:function(t){e.$set(e.ruleFormValue2,"tracingAmount",e._n(t))},expression:"ruleFormValue2.tracingAmount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"有效期至",prop:"validTime",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.validTime,callback:function(t){e.$set(e.ruleFormValue2,"validTime",t)},expression:"ruleFormValue2.validTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"flex-box w-100"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.createQRCode("ruleForm2")}}},[e._v("打印二维码")])],1)],1)],1)],1)],1)],1)],1)])])},i=[],n=(a("28a5"),a("7514"),{MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8});function o(e){this.mode=n.MODE_8BIT_BYTE,this.data=e}o.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var l=o,s={L:1,M:0,Q:3,H:2};function u(e,t){this.totalCount=e,this.dataCount=t}u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(e,t){var a=u.getRsBlockTable(e,t);if(void 0==a)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=a.length/3,i=new Array,n=0;n<r;n++)for(var o=a[3*n+0],l=a[3*n+1],s=a[3*n+2],c=0;c<o;c++)i.push(new u(l,s));return i},u.getRsBlockTable=function(e,t){switch(t){case s.L:return u.RS_BLOCK_TABLE[4*(e-1)+0];case s.M:return u.RS_BLOCK_TABLE[4*(e-1)+1];case s.Q:return u.RS_BLOCK_TABLE[4*(e-1)+2];case s.H:return u.RS_BLOCK_TABLE[4*(e-1)+3];default:return}};var c=u;function d(){this.buffer=new Array,this.length=0}d.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var a=0;a<t;a++)this.putBit(1==(e>>>t-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var m=d,h={glog:function(e){if(e<1)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){while(e<0)e+=255;while(e>=256)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},g=0;g<8;g++)h.EXP_TABLE[g]=1<<g;for(g=8;g<256;g++)h.EXP_TABLE[g]=h.EXP_TABLE[g-4]^h.EXP_TABLE[g-5]^h.EXP_TABLE[g-6]^h.EXP_TABLE[g-8];for(g=0;g<255;g++)h.LOG_TABLE[h.EXP_TABLE[g]]=g;var p=h;function f(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);var a=0;while(a<e.length&&0==e[a])a++;this.num=new Array(e.length-a+t);for(var r=0;r<e.length-a;r++)this.num[r]=e[r+a]}f.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var r=0;r<e.getLength();r++)t[a+r]^=p.gexp(p.glog(this.get(a))+p.glog(e.get(r)));return new f(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=p.glog(this.get(0))-p.glog(e.get(0)),a=new Array(this.getLength()),r=0;r<this.getLength();r++)a[r]=this.get(r);for(r=0;r<e.getLength();r++)a[r]^=p.gexp(p.glog(e.get(r))+t);return new f(a,0).mod(e)}};var b=f,v={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},w={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){var t=e<<10;while(w.getBCHDigit(t)-w.getBCHDigit(w.G15)>=0)t^=w.G15<<w.getBCHDigit(t)-w.getBCHDigit(w.G15);return(e<<10|t)^w.G15_MASK},getBCHTypeNumber:function(e){var t=e<<12;while(w.getBCHDigit(t)-w.getBCHDigit(w.G18)>=0)t^=w.G18<<w.getBCHDigit(t)-w.getBCHDigit(w.G18);return e<<12|t},getBCHDigit:function(e){var t=0;while(0!=e)t++,e>>>=1;return t},getPatternPosition:function(e){return w.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,a){switch(e){case v.PATTERN000:return(t+a)%2==0;case v.PATTERN001:return t%2==0;case v.PATTERN010:return a%3==0;case v.PATTERN011:return(t+a)%3==0;case v.PATTERN100:return(Math.floor(t/2)+Math.floor(a/3))%2==0;case v.PATTERN101:return t*a%2+t*a%3==0;case v.PATTERN110:return(t*a%2+t*a%3)%2==0;case v.PATTERN111:return(t*a%3+(t+a)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new b([1],0),a=0;a<e;a++)t=t.multiply(new b([1,p.gexp(a)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),a=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var n=0,o=e.isDark(r,i),l=-1;l<=1;l++)if(!(r+l<0||t<=r+l))for(var s=-1;s<=1;s++)i+s<0||t<=i+s||0==l&&0==s||o==e.isDark(r+l,i+s)&&n++;n>5&&(a+=3+n-5)}for(r=0;r<t-1;r++)for(i=0;i<t-1;i++){var u=0;e.isDark(r,i)&&u++,e.isDark(r+1,i)&&u++,e.isDark(r,i+1)&&u++,e.isDark(r+1,i+1)&&u++,0!=u&&4!=u||(a+=3)}for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(a+=40);for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(a+=40);var c=0;for(i=0;i<t;i++)for(r=0;r<t;r++)e.isDark(r,i)&&c++;var d=Math.abs(100*c/t/t-50)/5;return a+=10*d,a}},T=w;function y(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var C=y.prototype;C.addData=function(e){var t=new l(e);this.dataList.push(t),this.dataCache=null},C.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},C.getModuleCount=function(){return this.moduleCount},C.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=c.getRSBlocks(e,this.errorCorrectLevel),a=new m,r=0,i=0;i<t.length;i++)r+=t[i].dataCount;for(i=0;i<this.dataList.length;i++){var n=this.dataList[i];a.put(n.mode,4),a.put(n.getLength(),T.getLengthInBits(n.mode,e)),n.write(a)}if(a.getLengthInBits()<=8*r)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},C.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[a][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=y.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},C.setupPositionProbePattern=function(e,t){for(var a=-1;a<=7;a++)if(!(e+a<=-1||this.moduleCount<=e+a))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+a][t+r]=0<=a&&a<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=r&&r<=4)},C.getBestMaskPattern=function(){for(var e=0,t=0,a=0;a<8;a++){this.makeImpl(!0,a);var r=T.getLostPoint(this);(0==a||e>r)&&(e=r,t=a)}return t},C.createMovieClip=function(e,t,a){var r=e.createEmptyMovieClip(t,a),i=1;this.make();for(var n=0;n<this.modules.length;n++)for(var o=n*i,l=0;l<this.modules[n].length;l++){var s=l*i,u=this.modules[n][l];u&&(r.beginFill(0,100),r.moveTo(s,o),r.lineTo(s+i,o),r.lineTo(s+i,o+i),r.lineTo(s,o+i),r.endFill())}return r},C.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},C.setupPositionAdjustPattern=function(){for(var e=T.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var a=0;a<e.length;a++){var r=e[t],i=e[a];if(null==this.modules[r][i])for(var n=-2;n<=2;n++)for(var o=-2;o<=2;o++)this.modules[r+n][i+o]=-2==n||2==n||-2==o||2==o||0==n&&0==o}},C.setupTypeNumber=function(e){for(var t=T.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var r=!e&&1==(t>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=r}for(a=0;a<18;a++){r=!e&&1==(t>>a&1);this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=r}},C.setupTypeInfo=function(e,t){for(var a=this.errorCorrectLevel<<3|t,r=T.getBCHTypeInfo(a),i=0;i<15;i++){var n=!e&&1==(r>>i&1);i<6?this.modules[i][8]=n:i<8?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(i=0;i<15;i++){n=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=n:i<9?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n}this.modules[this.moduleCount-8][8]=!e},C.mapData=function(e,t){for(var a=-1,r=this.moduleCount-1,i=7,n=0,o=this.moduleCount-1;o>0;o-=2){6==o&&o--;while(1){for(var l=0;l<2;l++)if(null==this.modules[r][o-l]){var s=!1;n<e.length&&(s=1==(e[n]>>>i&1));var u=T.getMask(t,r,o-l);u&&(s=!s),this.modules[r][o-l]=s,i--,-1==i&&(n++,i=7)}if(r+=a,r<0||this.moduleCount<=r){r-=a,a=-a;break}}}},y.PAD0=236,y.PAD1=17,y.createData=function(e,t,a){for(var r=c.getRSBlocks(e,t),i=new m,n=0;n<a.length;n++){var o=a[n];i.put(o.mode,4),i.put(o.getLength(),T.getLengthInBits(o.mode,e)),o.write(i)}var l=0;for(n=0;n<r.length;n++)l+=r[n].dataCount;if(i.getLengthInBits()>8*l)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*l+")");i.getLengthInBits()+4<=8*l&&i.put(0,4);while(i.getLengthInBits()%8!=0)i.putBit(!1);while(1){if(i.getLengthInBits()>=8*l)break;if(i.put(y.PAD0,8),i.getLengthInBits()>=8*l)break;i.put(y.PAD1,8)}return y.createBytes(i,r)},y.createBytes=function(e,t){for(var a=0,r=0,i=0,n=new Array(t.length),o=new Array(t.length),l=0;l<t.length;l++){var s=t[l].dataCount,u=t[l].totalCount-s;r=Math.max(r,s),i=Math.max(i,u),n[l]=new Array(s);for(var c=0;c<n[l].length;c++)n[l][c]=255&e.buffer[c+a];a+=s;var d=T.getErrorCorrectPolynomial(u),m=new b(n[l],d.getLength()-1),h=m.mod(d);o[l]=new Array(d.getLength()-1);for(c=0;c<o[l].length;c++){var g=c+h.getLength()-o[l].length;o[l][c]=g>=0?h.get(g):0}}var p=0;for(c=0;c<t.length;c++)p+=t[c].totalCount;var f=new Array(p),v=0;for(c=0;c<r;c++)for(l=0;l<t.length;l++)c<n[l].length&&(f[v++]=n[l][c]);for(c=0;c<i;c++)for(l=0;l<t.length;l++)c<o[l].length&&(f[v++]=o[l][c]);return f};var N=y;function A(e){for(var t="",a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?t+=String.fromCharCode(r):r<2048?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):r<55296||r>=57344?(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|63&r)):(a++,r=65536+((1023&r)<<10|1023&e.charCodeAt(a)),t+=String.fromCharCode(240|r>>18),t+=String.fromCharCode(128|r>>12&63),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|63&r))}return t}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[];return e.forEach((function(e,r){var i=null;e.forEach((function(n,o){if(!n&&null!==i)return a.push("M".concat(i+t," ").concat(r+t,"h").concat(o-i,"v1H").concat(i+t,"z")),void(i=null);if(o!==e.length-1)n&&null===i&&(i=o);else{if(!n)return;null===i?a.push("M".concat(o+t,",").concat(r+t," h1v1H").concat(o+t,"z")):a.push("M".concat(i+t,",").concat(r+t," h").concat(o+1-i,"v1H").concat(i+t,"z"))}}))})),a.join("")}var _={props:{value:{type:String,required:!0,default:""},className:{type:String,default:""},size:{type:[Number,String],default:100,validator:function(e){return!0!==isNaN(Number(e))}},level:{type:String,default:"L",validator:function(e){return["L","Q","M","H"].indexOf(e)>-1}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},renderAs:{type:String,required:!1,default:"canvas",validator:function(e){return["canvas","svg"].indexOf(e)>-1}}},data:function(){return{numCells:0,fgPath:""}},updated:function(){this.render()},mounted:function(){this.render()},methods:{render:function(){var e=this.value,t=this.size,a=this.level,r=this.background,i=this.foreground,n=this.renderAs,o=t>>>0,l=new N(-1,s[a]);l.addData(A(e)),l.make();var u=l.modules,c=o/u.length,d=o/u.length,m=window.devicePixelRatio||1;if("svg"===n)this.numCells=u.length,this.fgPath=I(u);else{var h=this.$refs["qrcode-vue"],g=h.getContext("2d");h.height=h.width=o*m,g.scale(m,m),u.forEach((function(e,t){e.forEach((function(e,a){g.fillStyle=e?i:r;var n=Math.ceil((a+1)*c)-Math.floor(a*c),o=Math.ceil((t+1)*d)-Math.floor(t*d);g.fillRect(Math.round(a*c),Math.round(t*d),n,o)}))}))}}},render:function(e){var t=this.className,a=this.value,r=this.level,i=this.background,n=this.foreground,o=this.size,l=this.renderAs,s=this.numCells,u=this.fgPath;return e("div",{class:this.class||t,attrs:{value:a,level:r,background:i,foreground:n}},["svg"===l?e("svg",{attrs:{height:o,width:o,shapeRendering:"crispEdges",viewBox:"0 0 ".concat(s," ").concat(s)},style:{width:o+"px",height:o+"px"}},[e("path",{attrs:{fill:i,d:"M0,0 h".concat(s,"v").concat(s,"H0z")}}),e("path",{attrs:{fill:n,d:u}})]):e("canvas",{attrs:{height:o,width:o},style:{width:o+"px",height:o+"px"},ref:"qrcode-vue"},[])])}},L=_,F=a("55a1"),V=a("062e"),k=a("0010"),E={name:"tracingLabelManagement",components:{Pagination:V["default"],QrcodeVue:L},data:function(){return{companyId:null,show_AddDialog:!1,confirm_dialogVisible:!1,confirm_storePrintSetting:!1,show_QRCode:!1,selectedRowId:"",selectedRowData:null,activeName:"base",qrValue:null,size:300,page:{pageIndex:1,pageSize:20},page1:{pageIndex:1,pageSize:20},total:0,total1:0,tableData:[],tableData1:[],batchList:[],varietyList:[],selectedTracingRow:null,gradeOption:[{gradeId:1,gradeName:"特级"},{gradeId:2,gradeName:"高级"},{gradeId:3,gradeName:"中级"},{gradeId:4,gradeName:"低级"}],dateOption:[{id:0,name:"出货日期"},{id:1,name:"到货日期"}],listLoading:!1,ruleFormValue:{locationName:null,locationAddress:null},ruleFormValue1:{tmp1:null,tmp2:null,tmp3:null},ruleFormValue2:{productId:null,batchNumber:null,tracingTimeType:null,tracingTime:null,webTimeType:null,webTime:null,charge:null,locationId:null,validTime:null,tracingAmount:null},productionList:[]}},created:function(){this.companyId=Object(k["a"])().user().companyId,this.getBaseList(),this.getVarietyData()},methods:{showDetailsSampleCheck:function(e){this.$router.push("/sampleCheck/detailsSampleCheck/".concat(e.id))},showDetailsSampleCheckResult:function(e){this.$router.push("/sampleCheck/detailsSampleCheckResult/".concat(e.id))},getBaseList:function(){var e=this;this.listLoading=!0,Object(F["a"])().get("/api/tracing_location/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,companyId:this.companyId,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTracingList:function(){var e=this;this.listLoading=!0,Object(F["a"])().get("/api/tracing/all",{pageNo:this.page1.pageIndex-1,pageSize:this.page1.pageSize,companyId:this.companyId,sortBy:"id"}).then((function(t){e.tableData1=t.data,e.total1=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getProductProduction:function(){var e=this;this.listLoading=!0,Object(F["a"])().get("/api/product_production/all",{company_id:this.companyId,sortBy:"productId"}).then((function(t){e.productionList=t.data})).catch((function(e){console.log(e)}))},getVarietyData:function(){var e=this;this.listLoading=!0,Object(F["a"])().get("/api/product_variety/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.varietyList=t.data})).catch((function(e){console.error(e)}))},onChangeProductId:function(){var e=this;this.listLoading=!0,Object(F["a"])().get("/api/product_batch/all",{company_id:this.companyId,productId:this.ruleFormValue2.productId,sortBy:"id"}).then((function(t){for(var a in e.batchList=t.data,e.batchList){var r=e.getVarietyName(e.batchList[a].varietyId),i=e.getGradeName(e.batchList[a].varietyGrade);e.batchList[a].batchName=e.batchList[a].batchNumber+" "+r+" "+i}setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},onChangeBatch:function(){var e=this,t=this.tableData1.find((function(t){return t.batchNumber==e.ruleFormValue2.batchNumber}));t&&(t.charge&&(this.ruleFormValue2.charge=t.charge),t.locationId&&(this.ruleFormValue2.locationId=t.locationId),t.tracingAmount&&(this.ruleFormValue2.tracingAmount=t.tracingAmount),t.tracingTime&&(this.ruleFormValue2.tracingTime=t.tracingTime),t.tracingTimeType>-1&&(this.ruleFormValue2.tracingTimeType=t.tracingTimeType),t.validTime&&(this.ruleFormValue2.validTime=t.validTime),t.webTime&&(this.ruleFormValue2.webTime=t.webTime),t.webTimeType>-1&&(this.ruleFormValue2.webTimeType=t.webTimeType))},onSubmitBase:function(e){var t=this;this.$refs[e].validate((function(e){var a=new FormData;e&&(t.selectedRowData?(t.show_AddDialog=!1,t.listLoading=!0,Object(F["a"])().put("/api/tracing_location/update/"+t.selectedRowData.id,{id:t.selectedRowData.id,companyId:t.companyId,createUserId:t.selectedRowData.createUserId,locationAddress:t.ruleFormValue.locationAddress,locationName:t.ruleFormValue.locationName,updateUserId:Object(k["a"])().user().id}).then((function(e){t.ruleFormValue.locationName="",t.ruleFormValue.locationAddress="",t.selectedRowData=null,setTimeout((function(){t.getBaseList()}),500)})).catch((function(e){console.error(e)}))):(t.show_AddDialog=!1,t.listLoading=!0,a.append("id",0),a.append("companyId",t.companyId),a.append("createTime",new Date),a.append("createUserId",Object(k["a"])().user().id),a.append("locationAddress",t.ruleFormValue.locationAddress),a.append("locationName",t.ruleFormValue.locationName),Object(F["a"])().post("/api/tracing_location/create",a).then((function(e){t.ruleFormValue.locationName="",t.ruleFormValue.locationAddress="",setTimeout((function(){t.getBaseList()}),500)})).catch((function(e){console.error(e)}))))}))},createQRCode:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=JSON.stringify(t.ruleFormValue2);t.qrValue=a,t.show_QRCode=!0}}))},onPrint:function(){var e=this;this.show_QRCode=!1,this.listLoading=!0;var t="",a=this.batchList.find((function(t){return t.batchNumber==e.ruleFormValue2.batchNumber}));a&&(t=a.batchName.split(" "),t=t[1]+","+t[2]),Object(F["a"])().put("/api/tracing/update/"+this.selectedTracingRow.id,{id:this.selectedTracingRow.id,companyId:this.companyId,createUserId:this.selectedTracingRow.createUserId,createTime:new Date(this.selectedTracingRow.createTime),batchNumber:this.ruleFormValue2.batchNumber,batchName:t,printStatus:1,validTime:new Date(this.ruleFormValue2.validTime),tracingAmount:this.ruleFormValue2.tracingAmount,productId:this.ruleFormValue2.productId,tracingTimeType:this.ruleFormValue2.tracingTimeType,tracingTime:new Date(this.ruleFormValue2.tracingTime),webTimeType:this.ruleFormValue2.webTimeType,webTime:new Date(this.ruleFormValue2.webTime),productionTime:new Date(this.selectedTracingRow.productionTime),locationId:this.ruleFormValue2.locationId,charge:this.ruleFormValue2.charge,updateUserId:Object(k["a"])().user().id}).then((function(t){e.ruleFormValue2.productId=null,e.ruleFormValue2.batchNumber=null,e.ruleFormValue2.tracingTimeType=null,e.ruleFormValue2.tracingTime=null,e.ruleFormValue2.webTimeType=null,e.ruleFormValue2.webTime=null,e.ruleFormValue2.charge=null,e.ruleFormValue2.locationId=null,e.ruleFormValue2.validTime=null,e.ruleFormValue2.tracingAmount=null,setTimeout((function(){e.listLoading=!1,document.getElementById("tab-tagQuery").click()}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},handleClick:function(e,t){0==e.index&&this.getBaseList(),2==e.index&&(this.getProductProduction(),this.getTracingList()),3==e.index&&(this.getProductProduction(),this.getTracingList())},goToTagGeneration:function(e){this.selectedTracingRow=e,document.getElementById("tab-labelPrinting").click(),e&&(e.productId&&(this.ruleFormValue2.productId=e.productId),this.onChangeProductId(),e.batchNumber&&(this.ruleFormValue2.batchNumber=e.batchNumber),e.charge&&(this.ruleFormValue2.charge=e.charge),e.locationId&&(this.ruleFormValue2.locationId=e.locationId),e.tracingAmount&&(this.ruleFormValue2.tracingAmount=e.tracingAmount),e.tracingTime&&(this.ruleFormValue2.tracingTime=e.tracingTime),e.tracingTimeType>-1&&(this.ruleFormValue2.tracingTimeType=e.tracingTimeType),e.validTime&&(this.ruleFormValue2.validTime=e.validTime),e.webTime&&(this.ruleFormValue2.webTime=e.webTime),e.webTimeType>-1&&(this.ruleFormValue2.webTimeType=e.webTimeType))},deleteSelectedBase:function(e){this.selectedRowId=e,this.confirm_dialogVisible=!0},deleteSelectedRow:function(){var e=this;this.listLoading=!0,this.confirm_dialogVisible=!1,this.show_AddDialog=!1,Object(F["a"])().delete("/api/tracing_location/delete/"+this.selectedRowId).then((function(t){e.ruleFormValue.locationName="",e.ruleFormValue.locationAddress="",setTimeout((function(){e.getBaseList()}),500)})).catch((function(e){console.error(e)}))},editSelectedBase:function(e){this.selectedRowData=e,this.ruleFormValue.locationAddress=e.locationAddress,this.ruleFormValue.locationName=e.locationName,this.show_AddDialog=!0},filterProductName:function(e){var t=this.productionList.find((function(t){return t.productId===e}));return t?t.productName:""},filterTracingLocation:function(e){var t=this.tableData.find((function(t){return t.id===e}));return t?t.locationName:""},getVarietyName:function(e){var t=this.varietyList.find((function(t){return t.id===e}));return t?t.varietyName:""},getGradeName:function(e){var t=this.gradeOption.find((function(t){return t.gradeId===e}));return t?t.gradeName:""},closeAddDialog:function(){this.show_AddDialog=!1,this.ruleFormValue.locationName="",this.ruleFormValue.locationAddress=""},savePrinterSetting:function(){this.confirm_storePrintSetting=!0}}},B=E,P=a("2877"),D=Object(P["a"])(B,r,i,!1,null,"792829ee",null);t["default"]=D.exports},7514:function(e,t,a){"use strict";var r=a("5ca1"),i=a("0a49")(5),n="find",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},8367:function(e,t,a){"use strict";var r=a("0aca"),i=a.n(r);i.a},aa77:function(e,t,a){var r=a("5ca1"),i=a("be13"),n=a("79e5"),o=a("fdef"),l="["+o+"]",s="​",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(e,t,a){var i={},l=n((function(){return!!o[e]()||s[e]()!=s})),u=i[e]=l?t(m):o[e];a&&(i[a]=u),r(r.P+r.F*l,"String",i)},m=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},c5f6:function(e,t,a){"use strict";var r=a("7726"),i=a("69a8"),n=a("2d95"),o=a("5dbc"),l=a("6a99"),s=a("79e5"),u=a("9093").f,c=a("11e9").f,d=a("86cc").f,m=a("aa77").trim,h="Number",g=r[h],p=g,f=g.prototype,b=n(a("2aeb")(f))==h,v="trim"in String.prototype,w=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():m(t,3);var a,r,i,n=t.charCodeAt(0);if(43===n||45===n){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var o,s=t.slice(2),u=0,c=s.length;u<c;u++)if(o=s.charCodeAt(u),o<48||o>i)return NaN;return parseInt(s,r)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof g&&(b?s((function(){f.valueOf.call(a)})):n(a)!=h)?o(new p(w(t)),a,g):w(t)};for(var T,y=a("9e1e")?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;y.length>C;C++)i(p,T=y[C])&&!i(g,T)&&d(g,T,c(p,T));g.prototype=f,f.constructor=g,a("2aba")(r,h,g)}},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},e853:function(e,t,a){var r=a("d3f4"),i=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-fb9b5c5e.89503f6d.js.map