(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-162e2e10","chunk-2d0e2754"],{"2d38":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("通知管理")]),i("el-breadcrumb-item",{staticClass:"actived"},[e._v("发布公告")])],1)],1),i("div",{staticClass:"box"},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"editForm",staticClass:"form-width",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{staticClass:"input-width label-align",attrs:{prop:"timingRelease",label:"定时发布"}},[i("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.editForm.timingRelease,callback:function(t){e.$set(e.editForm,"timingRelease",t)},expression:"editForm.timingRelease"}})],1),i("el-form-item",{staticClass:"input-width label-align",attrs:{label:"紧急程度",prop:"emergencyDegree"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.emergencyDegree,callback:function(t){e.$set(e.editForm,"emergencyDegree",t)},expression:"editForm.emergencyDegree"}},e._l(e.emergencyDegrees,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{staticClass:"input-width label-align",attrs:{label:"类型",prop:"type"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}})],1),i("el-form-item",{staticClass:"input-width label-align",attrs:{label:"日期",prop:"releaseTime"}},[i("el-date-picker",{attrs:{type:"date"},model:{value:e.editForm.releaseTime,callback:function(t){e.$set(e.editForm,"releaseTime",t)},expression:"editForm.releaseTime"}})],1),i("el-form-item",{staticClass:"input-width label-align",attrs:{label:"发布人",prop:"releasePerson"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.releasePerson,callback:function(t){e.$set(e.editForm,"releasePerson",t)},expression:"editForm.releasePerson"}})],1),i("el-form-item",{staticClass:"label-align",attrs:{prop:"title",label:"标题"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),i("el-form-item",{staticClass:"label-align",attrs:{prop:"content",label:"内容"}},[i("el-input",{attrs:{"auto-complete":"off",type:"textarea",rows:10},model:{value:e.editForm.content,callback:function(t){e.$set(e.editForm,"content",t)},expression:"editForm.content"}})],1),i("el-form-item",{attrs:{label:"",prop:"file"}},[i("input",{ref:"file_live_1",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),i("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file_live_1?e._e():i("span",{staticClass:"item-value"},[i("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n            "+e._s(e.fileName)+"\n          ")])],1),e.file_live_1?i("span",{staticClass:"item-value"},[e._v(" ("+e._s(e.fileName)+") ")]):e._e()],1),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("editForm")}}},[e._v("\n          保存\n        ")]),i("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n          取消\n        ")])],1)],1)],1)])},l=[],n=(i("7f7f"),i("a481"),i("55a1")),r=i("d1a0"),o=i("bc3a"),s=i.n(o),c=i("0010"),d={data:function(){return{editForm:{timingRelease:"",emergencyDegree:2,type:"",releaseTime:"",releasePerson:"",title:"",content:""},emergencyDegrees:[{id:"0",name:"高"},{id:"1",name:"中"},{id:"2",name:"低"}],rules:{content:[{required:!0,message:"请插入",trigger:"change"}],releaseTime:[{required:!0,message:"请插入",trigger:"change"}],title:[{required:!0,message:"请选择",trigger:"change"}],emergencyDegree:[{required:!0,message:"请选择",trigger:"change"}],type:[{required:!0,message:"请选择",trigger:"change"}],releasePerson:[{required:!0,message:"请选择",trigger:"change"}]},images:[],fileName:"",file_live_1:null,id:0,dataloading:!0}},beforeMount:function(){this.id=this.$route.params.id,this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;this.dataloading=!0,Object(n["a"])().get("/api/notice/get/"+e).then((function(e){t.editForm=e,e.noticeProfiles&&(t.file_live_1=e.noticeProfiles,t.fileName=t.file_live_1.replace("/uploads/","")),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;s()({url:r["b"].DOWNLOAD_URL()+this.file_live_1,method:"GET",responseType:"blob"}).then((function(t){var i=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=i,a.setAttribute("download",e.file_live_1.replace("/uploads/","")),document.body.appendChild(a),a.click(),a.remove()}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataloading=!0;var i=new FormData;i=t.makeFormData(),Object(n["a"])().put("/api/notice/update/"+t.id,i).then((function(e){t.$router.push({path:"/notice"}),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("timingRelease",""),e.append("emergencyDegree",this.editForm.emergencyDegree),e.append("type",this.editForm.type),e.append("releaseTime",new Date(this.editForm.releaseTime)),e.append("releasePerson",this.editForm.releasePerson),e.append("title",this.editForm.title),e.append("content",this.editForm.content),e.append("noticeProfiles",this.file_live_1),e.append("id",this.id),e.append("updateUserId",Object(c["a"])().user().id),e.append("file",this.file_live_1),e}}},m=d,u=i("2877"),p=Object(u["a"])(m,a,l,!1,null,null,null);t["default"]=p.exports},"7f7f":function(e,t,i){var a=i("86cc").f,l=Function.prototype,n=/^\s*function ([^ (]*)/,r="name";r in l||i("9e1e")&&a(l,r,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-162e2e10.e4118cd0.js.map