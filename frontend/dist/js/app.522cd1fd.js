(function(e){function t(t){for(var i,l,n=t[0],s=t[1],c=t[2],u=0,p=[];u<n.length;u++)l=n[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(i=!1)}i&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},r={app:0},o=[];function l(e){return n.p+"js/"+({canvg:"canvg",xlsx:"xlsx",pdfmake:"pdfmake"}[e]||e)+"."+{canvg:"6f395599","chunk-594d6d48":"635e43da","chunk-66f49cfd":"7fad072f",xlsx:"02682f35",pdfmake:"a218028a"}[e]+".js"}function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,i){a=r[e]=[t,i]}));t.push(a[2]=i);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.src=l(e);var c=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=r[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,a[1](c)}r[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("64a9"),r=a.n(i);r.a},"0487":function(e,t,a){},"04a1":function(e,t,a){},"09ef":function(e,t,a){"use strict";var i=a("31f0"),r=a.n(i);r.a},"0aca":function(e,t,a){},"0afb":function(e,t,a){"use strict";var i=a("752c"),r=a.n(i);r.a},"0afd":function(e,t,a){"use strict";var i=a("04a1"),r=a.n(i);r.a},"0eec":function(e,t,a){"use strict";var i=a("e6e0"),r=a.n(i);r.a},"0f59":function(e,t,a){"use strict";var i=a("74e1"),r=a.n(i);r.a},"0f7c":function(e,t,a){},1281:function(e,t,a){"use strict";var i=a("d942"),r=a.n(i);r.a},"1b42":function(e,t,a){"use strict";var i=a("79b0"),r=a.n(i);r.a},"1f0c":function(e,t,a){},"1f53":function(e,t,a){},"1fd3":function(e,t,a){"use strict";var i=a("88b2"),r=a.n(i);r.a},"221d":function(e,t,a){"use strict";var i=a("2550"),r=a.n(i);r.a},2550:function(e,t,a){},"263b":function(e,t,a){"use strict";var i=a("49ab"),r=a.n(i);r.a},"27b0":function(e,t,a){},"2fc5":function(e,t,a){},"31f0":function(e,t,a){},3288:function(e,t,a){"use strict";var i=a("b0e4"),r=a.n(i);r.a},"32fc":function(e,t,a){},3354:function(e,t,a){"use strict";var i=a("3ea4"),r=a.n(i);r.a},"34bb":function(e,t,a){e.exports=a.p+"img/button1.d91caaaf.png"},"34fb":function(e,t,a){"use strict";var i=a("39a4"),r=a.n(i);r.a},"366f":function(e,t,a){},3859:function(e,t,a){"use strict";var i=a("b322"),r=a.n(i);r.a},"39a4":function(e,t,a){},"39d5":function(e,t,a){},"3b62":function(e,t,a){"use strict";var i=a("51a7"),r=a.n(i);r.a},"3ea4":function(e,t,a){},"3ef0":function(e,t,a){e.exports=a.p+"img/button2.7d20db87.png"},4587:function(e,t,a){"use strict";var i=a("366f"),r=a.n(i);r.a},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab4","./zh-hk.js":"49ab4","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="4678"},"49ab":function(e,t,a){},"4da2":function(e,t,a){},"51a7":function(e,t,a){},"56d4":function(e,t,a){"use strict";var i=a("c8dc"),r=a.n(i);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view",{key:e.$route.fullPath})],1)},o=[],l=a("8ded"),n=a.n(l),s={name:"App",data:function(){return{msg:"hello everyBody!"}}},c=s,u=(a("034f"),a("2877")),d=Object(u["a"])(c,r,o,!1,null,null,null),p=d.exports,m=a("8c4f"),f=a("d225"),g=a("b0b4"),h=a("5c07"),b=(a("1310"),a("958a"),function(){function e(){Object(f["a"])(this,e)}return Object(g["a"])(e,null,[{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;h["notify"](e,"success",t/1e3)}},{key:"error",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];h["alert"]("错误",e,(function(){})).set("label","取 消")}},{key:"message",value:function(e){h["alert"]("注意",e,(function(){}))}},{key:"auth",value:function(){h["alert"]("需要登录","请登录，登录后将显示停车场的详细信息。",(function(){}))}}]),e}()),v=b,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"login-container"},[a("el-dialog",{attrs:{title:"Or connect with",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[a("i",{staticClass:"el-icon-error"},[e._v(" Can not be simulated on local, so please combine you own business simulation! ! !")]),a("br"),a("br"),a("br"),a("social-sign")],1)],1),a("div",{staticClass:"form-div"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title"},[e._v("常熟巿农业委员会  ")]),a("h3",{staticClass:"title blue-colored"},[e._v("智慧农业系统")])]),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{ref:"username",attrs:{placeholder:"账号",name:"username",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-tooltip",{attrs:{content:"CapsLock 在",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1),a("el-form-item",{staticClass:"margin-bottom-20",attrs:{prop:"isRemember"}},[a("el-checkbox",{model:{value:e.loginForm.isRemember,callback:function(t){e.$set(e.loginForm,"isRemember",t)},expression:"loginForm.isRemember"}},[e._v("记住我")])],1),a("el-button",{attrs:{size:"small",loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")])],1)],1)])},w=[],_=(a("ac6a"),a("456d"),function(){function e(){Object(f["a"])(this,e),this.bus=new i["default"]}return Object(g["a"])(e,[{key:"subscribe",value:function(e,t){this.bus.$on(e,t)}},{key:"subscribeOnce",value:function(e,t){this.bus.$once(e,t)}},{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.bus.$emit(e,t)}},{key:"unsubscribe",value:function(e){this.bus.$off(e)}}],[{key:"d",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}()),k=function(){return _.d()},C=(a("a481"),a("3b2b"),a("2ef0")),x=a("bc3a"),S=a.n(x),F="production",I={API_AUTH_URL:function(){return"http://47.94.151.103:39999"},API_BASE_URL:function(){return"local"==F?"http://118.31.54.197:8040":"production"==F?"http://118.31.54.197:8040":"NOTHING"},DOWNLOAD_URL:function(){return"http://118.31.54.197:8040/api"}},D={AUTH_TOKEN_KEY:"auth_token",ACCESS_TOKEN_KEY:"access_token",REFRESH_TOKEN_KEY:"refresh_token"},T=function(){function e(){Object(f["a"])(this,e)}return Object(g["a"])(e,[{key:"removeAccessToken",value:function(){n.a.remove(D.ACCESS_TOKEN_KEY)}},{key:"removeAuthToken",value:function(){n.a.remove(D.AUTH_TOKEN_KEY)}},{key:"removeRefreshToken",value:function(){n.a.remove(D.REFRESH_TOKEN_KEY)}},{key:"accessToken",get:function(){return n.a.get(D.ACCESS_TOKEN_KEY)},set:function(e){n.a.set(D.ACCESS_TOKEN_KEY,e)}},{key:"authToken",get:function(){return n.a.get(D.AUTH_TOKEN_KEY)},set:function(e){n.a.set(D.AUTH_TOKEN_KEY,e)}},{key:"refreshToken",get:function(){return n.a.get(D.REFRESH_TOKEN_KEY)},set:function(e){n.a.set(D.REFRESH_TOKEN_KEY,e)}}],[{key:"d",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),V=function(){return T.d()},L=S.a,N=function(){function e(){Object(f["a"])(this,e)}return Object(g["a"])(e,[{key:"baseUrl",value:function(e){return-1==e.indexOf("/agriculture")&&-1==e.indexOf("/userAuthList")&&-1==e.indexOf("/sendMsg")?I.API_BASE_URL()+e:I.API_AUTH_URL()+e}},{key:"request",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={};return"get"==e.toLowerCase()&&(o["params"]=a,this.authToken&&(o["params"]=Object.assign(o["params"],this.authToken))),"post"==e.toLowerCase()&&(o=i,this.authToken&&(o=Object.assign(o,this.authToken))),"put"==e.toLowerCase()&&(o=i,this.authToken&&(o=Object.assign(o,this.authToken))),"delete"==e.toLowerCase()&&(o["params"]=a,this.authToken&&(o["params"]=Object.assign(o["params"],this.authToken))),this.makeRequest(e,t,o,!1,r)}},{key:"makeRequest",value:function(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return-1==t.indexOf("/api/user/getAuthByAliToken")&&(L.defaults.headers.common["Authorization"]=V().accessToken),-1==t.indexOf("/userAuthList")&&-1==t.indexOf("/sendMsg")||(L.defaults.headers.common["accessToken"]=V().authToken),L[e](this.baseUrl(t),a).then((function(e){var t=e.data;return Promise.resolve(t)}),(function(e){return Promise.reject({status:"error",message:"错误的用户名或密码!",data:{error:e}})}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("get",e,t)}},{key:"post",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.request("post",e,a,t,i)}},{key:"put",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("put",e,a,t)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("delete",e,t)}}],[{key:"d",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),$=function(){return N.d()},P=a("308d"),z=a("6bb5"),A=a("4e2b"),R=(a("28a5"),a("6762"),a("2fdb"),function(){function e(){Object(f["a"])(this,e),this.attrs={}}return Object(g["a"])(e,[{key:"fill",value:function(e){for(var t in e)this.fillables.includes(t.split(".")[0])&&this.setAttr(t,e[t]);return this}},{key:"setAttr",value:function(e,t){return C["set"](this.attrs,e,t),this}},{key:"getAttr",value:function(e){return C["get"](this.attrs,e)}},{key:"toJSON",value:function(){var e={attrs:this.attrs,tmp:{}};for(var t in this)"attrs"!=t&&(e["tmp"][t]=this[t]);return e["__serializedtype"]="model",e["__serializedclass"]=this.className,e}}],[{key:"create",value:function(e){}}]),e}()),B=function(e){function t(){return Object(f["a"])(this,t),Object(P["a"])(this,Object(z["a"])(t).call(this))}return Object(A["a"])(t,e),Object(g["a"])(t,[{key:"fillables",get:function(){return["id","userId","userType","contactName","contactPerson","contactWay","createTime","createUserId","creditCode","updateTime","updateUserId","townId","companyId"]}}]),Object(g["a"])(t,[{key:"name",get:function(){var e=this.getAttr("first_name"),t=this.getAttr("last_name");return e&&t?this.getAttr("first_name")+" "+this.getAttr("last_name"):"Dear User"}}],[{key:"create",value:function(e){var a=new t;return a["id"]=e["id"],a["userId"]=e["userId"],a["userType"]=e["userType"],a["contactName"]=e["contactName"],a["contactPerson"]=e["contactPerson"],a["townId"]=e["townId"],a["createTime"]=e["createTime"],a["createUserId"]=e["createUserId"],a}}]),t}(R),O=function(){function e(){Object(f["a"])(this,e)}return Object(g["a"])(e,[{key:"setToken",value:function(){S.a.defaults.headers.common["Authorization"]=V().accessToken}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href);var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=a.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}},{key:"check",value:function(){var e=this;if(!this.getParameterByName("timestamp")||!this.getParameterByName("accessToken")||!this.getParameterByName("sign"))return!1;var t=a("8d81"),i=(t(this.getParameterByName("timestamp")+this.getParameterByName("accessToken")+"zhsnqualitysupervision"),this.getParameterByName("accessToken").replace("%20"," "));return $().post("/api/user/getAuthByAliToken",{aliToken:i}).then((function(e){return n.a.set("authData",JSON.parse(e.authListInfo).result[0].roleCode),n.a.set("authList",JSON.parse(e.authListInfo).result[0].privilegeList),window.history.replaceState({},document.title,"/"),n.a.set("userData",JSON.parse(e.userInfo).result),i&&(V().accessToken=i),Promise.resolve(e)}),(function(t){return e.clearSavedData(),console.log(t),window.history.replaceState({},document.title,"/"),i&&(V().accessToken=""),Promise.reject(t)}))}},{key:"user",value:function(){return n.a.get("userData")?n.a.get("userData"):null}},{key:"createUserFrom",value:function(e){var t=n.a.get("isRemember");t?n.a.set("userName",e["userId"]):e["userID"]==n.a.get("userName")&&(n.a.remove("userName"),n.a.remove("password")),V().accessToken=e["token"],this.setToken(),this.loggedInUser=B.create({id:e["id"],userId:e["userId"],userType:e["userType"],contactName:e["contactName"],contactPerson:e["contactPerson"],contactWay:e["contactWay"],createTime:e["createTime"],createUserId:e["createUserId"],creditCode:e["creditCode"],updateTime:e["updateTime"],updateUserId:e["updateUserId"],townId:e["townId"],companyId:e["companyId"]}),n.a.set("userData",JSON.stringify(this.loggedInUser))}},{key:"clearSavedData",value:function(){n.a.remove("password")}},{key:"signup",value:function(e){var t=this;return $().post("auth/signup",e,{},!0).then((function(a){return t.createUserFrom(C["merge"](a["data"],e)),Promise.resolve(a)}),(function(e){return Promise.reject(e)}))}},{key:"verifyHost",value:function(e){var t=this;return $().post("auth/verify-host",e,{},!0).then((function(a){return t.createUserFrom(C["merge"](a["data"],e)),Promise.resolve(a)}),(function(e){return Promise.reject(e)}))}},{key:"login",value:function(e){var t=this;return n.a.set("isRemember",e.isRemember),n.a.set("password",e.password),$().post("/api/user/login",{password:e.password,username:e.username},{},!0).then((function(e){return t.createUserFrom(e),Promise.resolve(e)}),(function(e){return t.clearSavedData(),Promise.reject(e)}))}},{key:"resetPassword",value:function(e){return $().post("auth/reset_password",{username:e}).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}},{key:"logout",value:function(){this.check()&&(this.loggedInUser=null,V().removeAccessToken(),V().removeAuthToken())}}],[{key:"d",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),j=function(){return O.d()},E={name:"login",data:function(){var e=function(e,t,a){t.length<3?a(new Error("用户名不能少于3位数字")):a()},t=function(e,t,a){t.length<6?a(new Error("密码不能少于6位数字")):a()};return{loginForm:{username:"",password:"",isRemember:!1},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){this.loginForm.isRemember=n.a.get("isRemember"),this.loginForm.password=n.a.get("password")?n.a.get("password"):"",this.loginForm.username=n.a.get("userName")?n.a.get("userName"):"",j().check()&&this.$router.push({path:this.redirect||"/"})},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},destroyed:function(){},methods:{checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shiftKey,a=e.key;a&&1===a.length&&(this.capsTooltip=!!(t&&a>="a"&&a<="z"||!t&&a>="A"&&a<="Z")),"CapsLock"===a&&!0===this.capsTooltip&&(this.capsTooltip=!1)},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,j().login(e.loginForm).then((function(t){v.success("欢迎来到智能农业！"),e.$router.push({path:e.redirect||"/",query:e.otherQuery}),e.loading=!1,k().publish("App.loggedIn")}),(function(t){console.log(t),e.loading=!1,v.error(t["message"])}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,a){return"redirect"!==a&&(t[a]=e[a]),t}),{})}}},U=E,q=(a("1b42"),Object(u["a"])(U,y,w,!1,null,"593ee7a3",null)),M=q.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("top")],1),a("el-container",[a("el-aside",{staticStyle:{width:"200px",background:"#fff"}},[a("navBar")],1),a("el-main",[a("router-view")],1)],1)],1)},G=[],W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"xyh_top flex-box justify-right"},[e._m(0),e.menuShowArr["statisticsSupervision"]&&e.creditMode<0?i("el-menu",{staticClass:"el-menu-demo",attrs:{outer:"","default-active":e.$route.fullPath,mode:"horizontal","background-color":"#253032","text-color":"#ffffff"}},[i("el-menu-item",{attrs:{index:"/statisticsCredit"}},[i("router-link",{attrs:{slot:"title",to:"/statisticsCredit"},slot:"title"},[i("span",[i("i",{staticClass:"el-icon-data-analysis vertical-text-bottom"}),e._v("诚信系统看板\n        ")])])],1),i("el-menu-item",{attrs:{index:"/statisticsSupervision"}},[i("router-link",{attrs:{slot:"title",to:"/statisticsSupervision"},slot:"title"},[i("span",[i("i",{staticClass:"el-icon-s-check vertical-text-bottom"}),e._v("监管记录看板\n        ")])])],1),i("el-menu-item",{attrs:{index:"/statisticsTracing"}},[i("router-link",{attrs:{slot:"title",to:"/statisticsTracing"},slot:"title"},[i("span",[i("i",{staticClass:"el-icon-s-data vertical-text-bottom"}),e._v("溯源记录看板\n        ")])])],1),i("el-menu-item",{attrs:{index:"/statisticsTracingCompany"}},[i("router-link",{attrs:{slot:"title",to:"/statisticsTracingCompany"},slot:"title"},[i("span",[i("i",{staticClass:"el-icon-s-marketing vertical-text-bottom"}),e._v("溯源企业看板\n        ")])])],1),i("el-menu-item",{attrs:{index:"/statisticsFarmers"}},[i("router-link",{attrs:{slot:"title",to:"/statisticsFarmers"},slot:"title"},[i("span",[i("i",{staticClass:"el-icon-pie-chart vertical-text-bottom"}),e._v("农残检测看板\n        ")])])],1)],1):e._e(),i("div",{staticClass:"quit"},[i("span",{staticStyle:{"padding-right":"20px"}},[i("img",{attrs:{src:a("e841"),alt:""}}),e._v("\n      "+e._s(e.userName)+"\n    ")]),i("span",{on:{click:function(t){return e.quit()}}})])],1)},Q=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"changshu_left"},[i("img",{attrs:{src:a("9d64"),alt:""}})])}],J=(a("96cf"),a("3b8d")),H={name:"",data:function(){return{title:"平台",userName:"",menuList:null,menuShowArr:new Array,creditMode:""}},created:function(){this.creditMode=n.a.get("creditMode"),this.menuList=n.a.get("authList").filter((function(e){return 1==e.type}));for(var e=0;e<this.menuList.length;e++){var t=this.menuList[e].privilegeCode;this.menuShowArr[t]=1}this.userName=n.a.get("userData").username?n.a.get("userData").username:n.a.get("userData").mobile},methods:{quit:function(){var e=this,t=this;t.$confirm("确定要退出吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:j().logout(),v.success("再 见"),setTimeout((function(){e.$router.push({path:"/login"})}),500);case 3:case"end":return t.stop()}}),t)})))).catch((function(e){console.error(e)}))}},components:{}},X=H,K=(a("688b1"),Object(u["a"])(X,W,Q,!1,null,"40716270",null)),Z=K.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:24}},[e.creditMode<0&&"city"===e.authData?a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{outer:"","default-active":e.$route.fullPath,"background-color":"#fff","text-color":"#333"}},[a("el-submenu",{attrs:{index:"/"}},[a("template",{slot:"title"},[a("span",[e._v("监管对象")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/productionSubject"}},[a("router-link",{attrs:{slot:"title",to:"/productionSubject"},slot:"title"},[e._v("生产主体")])],1),a("el-menu-item",{attrs:{index:"/companyBusiness"}},[a("router-link",{attrs:{slot:"title",to:"/companyBusiness"},slot:"title"},[e._v("经营主体")])],1)],1)],2),a("el-submenu",{attrs:{index:"/regulatoryContent"}},[a("template",{slot:"title"},[a("span",[e._v("监管内容")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/disabilityCheck"}},[a("router-link",{attrs:{slot:"title",to:"/disabilityCheck"},slot:"title"},[e._v("农残检测")])],1),a("el-menu-item",{attrs:{index:"/regulatoryRecord"}},[a("router-link",{attrs:{slot:"title",to:"/regulatoryRecord"},slot:"title"},[e._v("监管记录")])],1)],1)],2),a("el-submenu",{attrs:{index:"/dataStatis"}},[a("template",{slot:"title"},[a("span",[e._v("数据统计")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/sampleCheckMain"}},[a("router-link",{attrs:{slot:"title",to:"/sampleCheckMain"},slot:"title"},[e._v("例行抽样")])],1),a("el-menu-item",{attrs:{index:"/aquatic"}},[a("router-link",{attrs:{slot:"title",to:"/aquatic"},slot:"title"},[e._v("水产专项")])],1),a("el-menu-item",{attrs:{index:"/greenProducts"}},[a("router-link",{attrs:{slot:"title",to:"/greenProducts"},slot:"title"},[e._v("绿色优质产品")])],1)],1)],2),a("el-submenu",{attrs:{index:"/dayWork"}},[a("template",{slot:"title"},[a("span",[e._v("日常工作")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/workTask"}},[a("router-link",{attrs:{slot:"title",to:"/workTask"},slot:"title"},[e._v("任务发布")])],1),a("el-menu-item",{attrs:{index:"/supervisionGrid"}},[a("router-link",{attrs:{slot:"title",to:"/supervisionGrid"},slot:"title"},[e._v("监管网格")])],1),a("el-menu-item",{attrs:{index:"/notice"}},[a("router-link",{attrs:{slot:"title",to:"/notice"},slot:"title"},[e._v("通知管理")])],1),a("el-menu-item",{attrs:{index:"/threeProductsCertification"}},[a("router-link",{attrs:{slot:"title",to:"/threeProductsCertification"},slot:"title"},[e._v("认证工作")])],1),a("el-menu-item",{attrs:{index:"/seed"}},[a("router-link",{attrs:{slot:"title",to:"/seed"},slot:"title"},[e._v("种子管控")])],1),a("el-menu-item",{attrs:{index:"/trainingFunds"}},[a("router-link",{attrs:{slot:"title",to:"/trainingFunds"},slot:"title"},[e._v("培训管理")])],1),a("el-menu-item",{attrs:{index:"/productionStandard"}},[a("router-link",{attrs:{slot:"title",to:"/productionStandard"},slot:"title"},[e._v("生产标准")])],1),a("el-menu-item",{attrs:{index:"/specialCategory"}},[a("router-link",{attrs:{slot:"title",to:"/specialCategory"},slot:"title"},[e._v("专项")])],1),a("el-menu-item",{attrs:{index:"/shareFiles"}},[a("router-link",{attrs:{slot:"title",to:"/shareFiles"},slot:"title"},[e._v("共享文件")])],1),a("el-menu-item",{attrs:{index:"/internalMessage"}},[a("router-link",{attrs:{slot:"title",to:"/internalMessage"},slot:"title"},[e._v("站内消息")])],1)],1)],2)],1):e._e(),e.creditMode<0&&"ent"===e.authData?a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{outer:"","default-active":e.$route.fullPath,"background-color":"#fff","text-color":"#333"}},[a("el-submenu",{attrs:{index:"/subjectInfo"}},[a("template",{slot:"title"},[a("span",[e._v("主体信息")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/productionSubject"}},[a("router-link",{attrs:{slot:"title",to:"/productionSubject"},slot:"title"},[e._v("生产主体")])],1),a("el-menu-item",{attrs:{index:"/companyBusiness"}},[a("router-link",{attrs:{slot:"title",to:"/companyBusiness"},slot:"title"},[e._v("经营主体")])],1),e.menuShowArr["shareFiles"]&&e.creditMode<0?a("el-menu-item",{attrs:{index:"/shareFiles"}},[a("router-link",{attrs:{slot:"title",to:"/shareFiles"},slot:"title"},[e._v("内部资料")])],1):e._e(),e.menuShowArr["disabilityCheck"]&&e.creditMode<0?a("el-menu-item",{attrs:{index:"/disabilityCheck"}},[a("router-link",{attrs:{slot:"title",to:"/disabilityCheck"},slot:"title"},[e._v("农残自检")])],1):e._e()],1)],2),a("el-submenu",{attrs:{index:"/traceable"}},[a("template",{slot:"title"},[a("span",[e._v("可追溯")])]),a("el-menu-item-group",[e.menuShowArr["jobDefinition"]&&e.creditMode<0?a("el-menu-item",{attrs:{index:"/jobDefinition"}},[a("router-link",{attrs:{slot:"title",to:"/jobDefinition"},slot:"title"},[e._v("作业定义")])],1):e._e(),e.menuShowArr["productionRecord"]&&e.creditMode<0?a("el-menu-item",{attrs:{index:"/productionRecord"}},[a("router-link",{attrs:{slot:"title",to:"/productionRecord"},slot:"title"},[e._v("生产记录")])],1):e._e(),e.menuShowArr["inputManagement"]&&e.creditMode<0?a("el-menu-item",{attrs:{index:"/inputManagement"}},[a("router-link",{attrs:{slot:"title",to:"/inputManagement"},slot:"title"},[e._v("投入品管理")])],1):e._e(),e.menuShowArr["tracingLabelManagement"]&&e.creditMode<0?a("el-menu-item",{attrs:{index:"/tracingLabelManagement"}},[a("router-link",{attrs:{slot:"title",to:"/tracingLabelManagement"},slot:"title"},[e._v("溯源标签")])],1):e._e()],1)],2),a("el-submenu",{attrs:{index:"/publicInteraction"}},[a("template",{slot:"title"},[a("span",[e._v("公共交互")])]),a("el-menu-item-group",[e.menuShowArr["productionStandard"]&&e.creditMode<0?a("el-menu-item",{attrs:{index:"/productionStandard"}},[a("router-link",{attrs:{slot:"title",to:"/productionStandard"},slot:"title"},[e._v("生产标准")])],1):e._e()],1)],2)],1):e._e(),e.creditMode>-1?a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{outer:"","default-active":e.$route.fullPath,"background-color":"#fff","text-color":"#333"}},[e.creditMode>-1?a("el-menu-item",{attrs:{index:"/"}},[a("router-link",{attrs:{slot:"title",to:"/corporateCreditFile"},slot:"title"},[e._v("企业信用档案")])],1):e._e(),e.creditMode>-1?a("el-menu-item",{attrs:{index:"/creditRating"}},[a("router-link",{attrs:{slot:"title",to:"/creditRating"},slot:"title"},[e._v("信用评级")])],1):e._e(),e.creditMode>-1?a("el-menu-item",{attrs:{index:"/redBlackList"}},[a("router-link",{attrs:{slot:"title",to:"/redBlackList"},slot:"title"},[e._v("红黑名单")])],1):e._e()],1):e._e()],1)],1)},te=[],ae=(a("7514"),{data:function(){return{menu:[{menuName:"微信扫码",routerUrl:"productionSubject"}],openeds:[1],activeMenu:"",menuList:null,menuShowArr:new Array,creditMode:"",authData:""}},created:function(){this.creditMode=n.a.get("creditMode"),this.menuList=n.a.get("authList").filter((function(e){return 1==e.type})),n.a.get("authData").indexOf("city")>-1||n.a.get("authData").indexOf("town")>-1?this.authData="city":n.a.get("authData").indexOf("ent")>-1&&(this.authData="ent");for(var e=0;e<this.menuList.length;e++){var t=this.menuList[e].privilegeCode;this.menuShowArr[t]=1}},methods:{handleSelect:function(e){sessionStorage.setItem("activeMenu",e)},IsMenuExists:function(e){return this.menuList.find((function(t){return t.privilegeCode==e}))}}}),ie=ae,re=(a("af98"),Object(u["a"])(ie,ee,te,!1,null,null,null)),oe=re.exports,le={data:function(){return{}},components:{top:Z,navBar:oe}},ne=le,se=(a("3859"),Object(u["a"])(ne,Y,G,!1,null,"6de09160",null)),ce=se.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("认证工作")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/threeProductsCertification/create")}}},[e._v("添加")]),a("div",{staticClass:"select_label"},[e._v("企业名称")]),a("el-select",{on:{change:function(t){return e.getList()}},model:{value:e.creditCode,callback:function(t){e.creditCode=t},expression:"creditCode"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.creditCode,attrs:{label:e.companyName,value:e.creditCode}})})),1),a("div",{staticClass:"select_label"},[e._v("产品分类")]),a("el-select",{on:{change:function(t){return e.getList()}},model:{value:e.productCategory,callback:function(t){e.productCategory=t},expression:"productCategory"}},e._l(e.appStatus1,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1),a("div",{staticClass:"select_label"},[e._v("认证类型")]),a("el-select",{on:{change:function(t){return e.getList()}},model:{value:e.authType,callback:function(t){e.authType=t},expression:"authType"}},e._l(e.appStatus2,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 你确定你要删除?")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.handleDelete}},[e._v("确认")])],1)]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"企业名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.filterCompnay(a.creditCode))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"productName",label:"产品名称"}}),a("el-table-column",{attrs:{label:"企业分类"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.options[a.argriculturalClassification-1])+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"认证类型",prop:"certificationType"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.appStatus2[parseInt(a.certificationType)]))]}}])}),a("el-table-column",{attrs:{prop:"certificationNo",label:"证书编号"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){e.$router.push({path:"/threeProductsCertification/"+i.id,query:{company:e.filterCompnay(i.creditCode),product:e.filterProduct(i.productId)}})}}},[e._v("查看")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.confirmDelete(""+i.id)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},de=[],pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},me=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var fe=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function ge(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function he(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function be(e,t,a){var i=he(),r=e-i,o=20,l=0;t="undefined"===typeof t?500:t;var n=function e(){l+=o;var n=Math.easeInOutQuad(l,i,r,t);ge(n),l<t?fe(e):a&&"function"===typeof a&&a()};n()}var ve={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[5,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("update:limit",e),this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&be(0,800)},handleCurrentChange:function(e){this.$emit("update:page",e),this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&be(0,800)}}},ye=ve,we=(a("8367"),Object(u["a"])(ye,pe,me,!1,null,null,null)),_e=we.exports,ke={name:"threeProductCertificate",components:{Pagination:_e},data:function(){return{creditCode:"",productCategory:0,authType:0,dialogVisible:!1,selectedId:null,page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],companyProduction:[],productDetail:[],options:["养殖业","畜牧业","种植业"],appStatus1:["全部","养殖业","已同意","畜牧业","种植业"],appStatus2:["全部","无公害产品","绿色食品","有机食品","绿色优质基地"]}},created:function(){this.getCompanyProduction(),this.getProductionDetail(),this.getList()},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/quality_standard/all",{creditCode:this.creditCode,argriculturalClassification:this.productCategory,certificationType:this.authType,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,townId:this.currTown,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},getProductionDetail:function(){var e=this;$().get("/api/product_production/name").then((function(t){e.productDetail=t})).catch((function(e){console.log(e)}))},handleDelete:function(){var e=this;this.dialogVisible=!1,this.listLoading=!0,$().delete("/api/quality_standard/delete/"+this.selectedId).then((function(t){e.getList()})).catch((function(e){console.log(e)}))},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.creditCode===e}));return t?t.companyName:""},filterProduct:function(e){var t=this.productDetail.find((function(t){return t.productId===e}));return t?t.productName:""},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},confirmDelete:function(e){this.dialogVisible=!0,this.selectedId=e}}},Ce=ke,xe=Object(u["a"])(Ce,ue,de,!1,null,"5a0d9434",null),Se=xe.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("认证工作")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加认证")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业名称",prop:"creditCode"}},[a("el-select",{attrs:{disabled:!(e.companyNameList.length>0)},on:{change:function(t){return e.getProductionDetail()}},model:{value:e.ruleFormValue.creditCode,callback:function(t){e.$set(e.ruleFormValue,"creditCode",t)},expression:"ruleFormValue.creditCode"}},e._l(e.companyNameList,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.creditCode}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productId"}},[a("el-select",{attrs:{disabled:!(e.productNameList.length>0)},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productNameList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"认证类型",prop:"certificationType"}},[a("el-radio-group",{model:{value:e.ruleFormValue.certificationType,callback:function(t){e.$set(e.ruleFormValue,"certificationType",t)},expression:"ruleFormValue.certificationType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("无公害产品")]),a("el-radio",{attrs:{label:"2"}},[e._v("绿色食品")]),a("el-radio",{attrs:{label:"3"}},[e._v("有机食品")]),a("el-radio",{attrs:{label:"4"}},[e._v("绿色优质基地")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"认证类别",prop:"certificationCategory"}},[a("el-input",{model:{value:e.ruleFormValue.certificationCategory,callback:function(t){e.$set(e.ruleFormValue,"certificationCategory",t)},expression:"ruleFormValue.certificationCategory"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"农业分类",prop:"argriculturalClassification"}},[a("el-select",{model:{value:e.ruleFormValue.argriculturalClassification,callback:function(t){e.$set(e.ruleFormValue,"argriculturalClassification",t)},expression:"ruleFormValue.argriculturalClassification"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"证书编号",prop:"certificationNo"}},[a("el-input",{model:{value:e.ruleFormValue.certificationNo,callback:function(t){e.$set(e.ruleFormValue,"certificationNo",t)},expression:"ruleFormValue.certificationNo"}})],1)],1)],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:"认证有效期",required:""}},[a("el-col",{staticClass:"text-left",attrs:{span:4}},[a("el-form-item",{attrs:{prop:"certificationStartTime"}},[a("el-date-picker",{staticClass:"w-80",staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"dd.MM.yyyy HH:mm:ss"},model:{value:e.ruleFormValue.certificationStartTime,callback:function(t){e.$set(e.ruleFormValue,"certificationStartTime",t)},expression:"ruleFormValue.certificationStartTime"}})],1)],1),a("el-col",{staticClass:"text-left",attrs:{span:1}},[e._v("至")]),a("el-col",{staticClass:"text-left",attrs:{span:4}},[a("el-form-item",{attrs:{prop:"certificationEndTime"}},[a("el-date-picker",{staticClass:"w-100",staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"dd.MM.yyyy HH:mm:ss"},model:{value:e.ruleFormValue.certificationEndTime,callback:function(t){e.$set(e.ruleFormValue,"certificationEndTime",t)},expression:"ruleFormValue.certificationEndTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产量",prop:"output"}},[a("el-input",{model:{value:e.ruleFormValue.output,callback:function(t){e.$set(e.ruleFormValue,"output",e._n(t))},expression:"ruleFormValue.output"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("el-form-item",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file?a("span",{staticClass:"margin-left-10"},[e._v("("+e._s(e.file.name)+")")]):a("span",{staticClass:"margin-left-10"},[e._v("请选择需要上传的文件...")])],1)],1)])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Ie=[],De={name:"addThreeProducts",data:function(){return{listLoading:!1,ruleFormValue:{creditCode:"",productId:"",certificationType:"",certificationCategory:"",argriculturalClassification:"3",certificationStartTime:"",certificationEndTime:"",output:""},rules:{creditCode:[{required:!0,message:"请选择",trigger:"change"}],productId:[{required:!0,message:"请选择",trigger:"change"}],certificationType:[{required:!0,message:"请选择",trigger:"change"}],certificationCategory:[{required:!0,message:"请插入",trigger:"change"}],argriculturalClassification:[{required:!0,message:"请选择",trigger:"change"}],certificationNo:[{required:!0,message:"请插入",trigger:"change"}],certificationStartTime:[{required:!0,message:"请选择",trigger:"change"}],certificationEndTime:[{required:!0,message:"请选择",trigger:"change"}],output:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]},file:null,companyNameList:[],productNameList:[],options:[{value:"1",label:"畜牧业"},{value:"2",label:"种植业"},{value:"3",label:"养殖业"}]}},created:function(){this.getCompanyProduction()},methods:{getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyNameList=t})).catch((function(e){console.log(e)}))},getProductionDetail:function(){var e=this,t=this.filterCompany(this.ruleFormValue.creditCode);this.listLoading=!0,$().get("/api/product_production/all",{company_id:t,sortBy:"productId"}).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.productNameList=t.data})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.listLoading=!0;var a=new FormData;a.append("creditCode",t.ruleFormValue.creditCode),a.append("productId",t.ruleFormValue.productId),a.append("certificationType",t.ruleFormValue.certificationType),a.append("certificationCategory",t.ruleFormValue.certificationCategory),a.append("argriculturalClassification",t.ruleFormValue.argriculturalClassification),a.append("certificationNo",t.ruleFormValue.certificationNo),a.append("certificationStartTime",t.ruleFormValue.certificationStartTime),a.append("certificationEndTime",t.ruleFormValue.certificationEndTime),a.append("createDate",t.ruleFormValue.certificationStartTime),a.append("updateDate",t.ruleFormValue.certificationStartTime),a.append("output",t.ruleFormValue.output),a.append("updater","string"),a.append("updateUserId",j().user().id),a.append("createUserId",j().user().id),a.append("creater","string"),a.append("creater","string"),a.append("id",0),t.file&&a.append("file",t.file),$().post("/api/quality_standard/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/threeProductsCertification"})})).catch((function(e){}))}))},filterCompany:function(e){var t=this.companyNameList.find((function(t){return t.creditCode===e}));return t?t.companyId:""},goBack:function(){this.$router.go(-1)},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}},Te=De,Ve=Object(u["a"])(Te,Fe,Ie,!1,null,"3baaf85a",null),Le=Ve.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("认证工作")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("认证详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{"label-width":"100px"},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.companyName,callback:function(t){e.companyName=t},expression:"companyName"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})],1)],1)],1),a("el-form-item",{attrs:{label:"认证类型"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.data.argriculturalClassification,callback:function(t){e.$set(e.data,"argriculturalClassification",t)},expression:"data.argriculturalClassification"}},[a("el-radio",{attrs:{label:"1"}},[e._v("无公害产品")]),a("el-radio",{attrs:{label:"2"}},[e._v("绿色食品")]),a("el-radio",{attrs:{label:"3"}},[e._v("有机食品")]),a("el-radio",{attrs:{label:"4"}},[e._v("地理标志")])],1)],1),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"认证类别"}},[a("el-input",{attrs:{disabled:""},model:{value:e.data.certificationCategory,callback:function(t){e.$set(e.data,"certificationCategory",t)},expression:"data.certificationCategory"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"农业分类"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.data.certificationType,callback:function(t){e.$set(e.data,"certificationType",t)},expression:"data.certificationType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"证书编号"}},[a("el-input",{attrs:{disabled:""},model:{value:e.data.certificationNo,callback:function(t){e.$set(e.data,"certificationNo",t)},expression:"data.certificationNo"}})],1)],1)],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:"认证有效期"}},[a("el-col",{attrs:{span:7}},[a("el-date-picker",{staticStyle:{width:"100% !important"},attrs:{type:"date",placeholder:"",disabled:""},model:{value:e.data.certificationStartTime,callback:function(t){e.$set(e.data,"certificationStartTime",t)},expression:"data.certificationStartTime"}})],1),a("el-col",{staticClass:"line",attrs:{span:1}},[e._v("至")]),a("el-col",{attrs:{span:7}},[a("el-date-picker",{staticStyle:{width:"100% !important"},attrs:{type:"date",placeholder:"",disabled:""},model:{value:e.data.certificationEndTime,callback:function(t){e.$set(e.data,"certificationEndTime",t)},expression:"data.certificationEndTime"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产量"}},[a("el-input",{attrs:{disabled:""},model:{value:e.data.output,callback:function(t){e.$set(e.data,"output",t)},expression:"data.output"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",[a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[a("input",{ref:"files",staticStyle:{display:"none"},attrs:{type:"file",id:"files"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.downloadFile()}}},[e._v("下载附件")]),e.files?a("span",{staticClass:"item-value"},[a("el-link",{staticClass:"margin-left-10",on:{click:function(t){return e.downloadFile()}}},[e._v("\n                      "+e._s(e.files.replace("/uploads/",""))+"\n                    ")])],1):e._e(),e.files?e._e():a("span",{staticClass:"item-value"},[e._v("("+e._s(e.fileName)+")")])],1)])])])],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("返回")])],1)],1)],1)])},$e=[],Pe=(a("7f7f"),{name:"detailsThreeProducts",data:function(){return{id:-1,pageName:this.$route.name,data:[],files:null,fileName:"",companyName:"",productName:"",listLoading:!1,argriculturalClassification:0,options:[{value:"2",label:"养殖业"},{value:"1",label:"畜牧业"},{value:"3",label:"种植业"}]}},created:function(){this.companyName=this.$route.query.company,this.productName=this.$route.query.product,this.id=this.$route.params.id,this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;this.listLoading=!0,$().get("/api/quality_standard/get/"+e).then((function(e){t.data=e,t.data.argriculturalClassification=parseInt(e.argriculturalClassification),t.files=e.files,e.files||(t.fileName=""),setTimeout((function(){t.listLoading=!1}),10)})).catch((function(e){console.log(e)}))},goBack:function(){this.$router.go(-1)},chooseFile:function(){this.$refs.files.click()},handleFileUpload:function(){this.files=this.$refs.files.files[0]},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.files,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.files.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}}),ze=Pe,Ae=Object(u["a"])(ze,Ne,$e,!1,null,"2adfe608",null),Re=Ae.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("监管记录")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[!e.companyId&&e.isShowAddButton?a("el-button",{staticClass:"inline-block-IE",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/regulatoryRecord/create")}}},[e._v("添加监管记录")]):e.companyId?a("div",{staticClass:"fixed-value margin-right-20 inline-block-IE"},[e.filterCompanyName(e.companyId)?a("p",[e._v(e._s(e.filterCompanyName(e.companyId)))]):a("p",[e._v("没有数据")])]):e._e(),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/commonWords")}}},[e._v("常用语管理")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""}},[e._v("扫码下载客户端")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""}},[e._v("说明书下载")]),e.companyId?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]):e._e(),a("div",{staticClass:"special-container inline-block-IE float-right-IE",staticStyle:{"margin-left":"auto"}},[0!=e.isShowCheckbox?a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.actionConfirm(1)}}},[e._v("添加到专项")]):e._e(),0!=e.isShowCheckbox?a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"el-icon-minus",plain:""},on:{click:function(t){return e.actionConfirm(0)}}},[e._v("从专项1移除")]):e._e(),a("el-checkbox",{staticClass:"margin-top-10",attrs:{"true-label":"1","false-label":"0"},on:{change:e.showCheckbox},model:{value:e.isShowCheckbox,callback:function(t){e.isShowCheckbox=t},expression:"isShowCheckbox"}},[e._v("专项1:绿色优质农产品生产基地")])],1)],1),a("el-dialog",{attrs:{visible:e.alert_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.alert_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 请选择 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.alert_dialogVisible=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:e.btnColor,plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[0!=e.isShowCheckbox?a("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-checkbox",{staticStyle:{"margin-left":"auto"},attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i.id)}},model:{value:e.checked[i.id],callback:function(t){e.$set(e.checked,i.id,t)},expression:"checked[row.id]"}})]}}],null,!1,574067976)}):e._e(),a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"createTime",label:"日期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{prop:"township",label:"乡镇",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterTownship(a.townId)))]}}])}),a("el-table-column",{attrs:{prop:"unitinspec",label:"受检单位","class-name":"padding-left-20"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterCompanyName(a.companyId)))]}}])}),a("el-table-column",{attrs:{prop:"inspector",label:"检查人"}}),a("el-table-column",{attrs:{prop:"conclusion",label:"结论",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(1==a.conclusion?"合格":"不合格")+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"otherProblems",label:"其他",width:"80"}}),a("el-table-column",{attrs:{prop:"scenePhotos",label:"照片",width:"70","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.getCountElement(a.scenePhotos,a.sign))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"sign",label:"确认",width:"70","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.checkSign(a.sign)))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){e.$router.push({path:"/regulatoryRecord/"+i.id,query:{company:e.filterCompanyName(i.companyId),township:e.filterTownship(i.townId)}})}}},[e._v("查看")]),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.$router.push("/regulatoryRecord/edit/"+i.id)}}},[e._v("整改记录")])]}}])}),a("el-table-column",{attrs:{prop:"yield",label:"专利1",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.specialFlag?a("i",{staticClass:"el-icon-check"}):e._e()]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)])},Oe=[],je={name:"regulatoryRecord",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},total:0,tableData:[],listLoading:!1,companyList:[],companyId:0,township:[],isShowCheckbox:0,selectedRows:[],alert_dialogVisible:!1,confirm_dialogVisible:!1,btnColor:"",action:"",checked:[],isShowAddButton:null,isShowSearchOption:null}},created:function(){this.companyId=this.$route.query.companyId,this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addRegulatoryRecord"==e.privilegeCode})),this.isShowSearchOption=!!n.a.get("authList").find((function(e){return"searchregulatoryRecord"==e.privilegeCode})),this.getData(),this.getTown(),this.getCompanyProduct()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/supervision_record/all",{companyId:this.companyId,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyList=e.companyList.concat(t)})).catch((function(e){console.log(e)}))},filterTownship:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.name:""},filterCompanyName:function(e){var t=this.companyList.find((function(t){return t.companyId===e}));return t?t.companyName:""},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},getCountElement:function(e,t){return e||t?e.split(",").length+t.split(",").length:0},checkSign:function(e){return e?"签名":""},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},actionConfirm:function(e){this.action=e,this.updateSelectedRows()},updateSelectedRows:function(){var e=this;for(var t in this.selectedRows)this.confirm_dialogVisible=!1,this.listLoading=!0,$().put("/api/supervision_record/update_special_flag/"+this.selectedRows[t]+"?specialFlag="+this.action).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.selectedRows=[],e.checked=[],e.isShowCheckbox=0,e.getData()})).catch((function(e){console.log(e)}))},showCheckbox:function(){1==this.isShowCheckbox&&(this.selectedRows=[],this.checked=[])}}},Ee=je,Ue=(a("5822"),Object(u["a"])(Ee,Be,Oe,!1,null,null,null)),qe=Ue.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管记录")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加监管记录")])],1)],1),a("div",{staticClass:"box"},[a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 请选择图片 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")])],1)]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"companyType"}},[a("el-radio-group",{model:{value:e.ruleFormValue.companyType,callback:function(t){e.$set(e.ruleFormValue,"companyType",t)},expression:"ruleFormValue.companyType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("企业")]),a("el-radio",{attrs:{label:"2"}},[e._v("农户")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"乡镇",prop:"townShip"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.townShip,callback:function(t){e.$set(e.ruleFormValue,"townShip",t)},expression:"ruleFormValue.townShip"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业",prop:"companyID"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.companyID,callback:function(t){e.$set(e.ruleFormValue,"companyID",t)},expression:"ruleFormValue.companyID"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1),a("el-button",{staticClass:"min-plus",attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-plus"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选择日期",prop:"date"}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期"},model:{value:e.ruleFormValue.date,callback:function(t){e.$set(e.ruleFormValue,"date",t)},expression:"ruleFormValue.date"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检查人",prop:"checker"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.ruleFormValue.checker,callback:function(t){e.$set(e.ruleFormValue,"checker",t)},expression:"ruleFormValue.checker"}})],1)],1)],1),a("div",{staticClass:"bg-blue"},[e._v("检查内容与结果")]),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("生产记录(种养殖档案)")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.ruleFormValue.productionRecord,callback:function(t){e.$set(e.ruleFormValue,"productionRecord",t)},expression:"ruleFormValue.productionRecord"}},[a("el-radio",{attrs:{label:"1"}},[e._v("有")]),a("el-radio",{attrs:{label:"2"}},[e._v("真实完整")])],1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("农产品产地准出证明(销售记录)")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.ruleFormValue.proofOfProduct,callback:function(t){e.$set(e.ruleFormValue,"proofOfProduct",t)},expression:"ruleFormValue.proofOfProduct"}},[a("el-radio",{attrs:{label:"1"}},[e._v("有")]),a("el-radio",{attrs:{label:"2"}},[e._v("真实完整")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("农产品产投入品记录（进、销、使用）")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.ruleFormValue.productInputRecord,callback:function(t){e.$set(e.ruleFormValue,"productInputRecord",t)},expression:"ruleFormValue.productInputRecord"}},[a("el-radio",{attrs:{label:"1"}},[e._v("有")]),a("el-radio",{attrs:{label:"2"}},[e._v("真实完整")])],1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("检验记录")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.ruleFormValue.testRecord,callback:function(t){e.$set(e.ruleFormValue,"testRecord",t)},expression:"ruleFormValue.testRecord"}},[a("el-radio",{attrs:{label:"1"}},[e._v("有")]),a("el-radio",{attrs:{label:"2"}},[e._v("真实完整")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("禁用投入品及滥用添加剂行为")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.ruleFormValue.isDisableInput,callback:function(t){e.$set(e.ruleFormValue,"isDisableInput",t)},expression:"ruleFormValue.isDisableInput"}},[e._v("有")])],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("“三品一标使用”")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.ruleFormValue.isThreeProduct,callback:function(t){e.$set(e.ruleFormValue,"isThreeProduct",t)},expression:"ruleFormValue.isThreeProduct"}},[e._v("合规")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"left-margin",attrs:{label:"常用语",prop:"commonLang"}},[a("el-select",{attrs:{multiple:"",placeholder:"请插入"},model:{value:e.wordValue,callback:function(t){e.wordValue=t},expression:"wordValue"}},e._l(e.wordsList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.word,value:e.word}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("div",{staticClass:"left-margin"},[e._v("现场发现的其他问题")])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"otherProblems"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.ruleFormValue.otherProblems,callback:function(t){e.$set(e.ruleFormValue,"otherProblems",t)},expression:"ruleFormValue.otherProblems"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"left-margin"},[a("table",[a("tbody",[a("tr",[a("td",{attrs:{rowspan:"2"}},[e._v("结论")]),a("td",[e._v("合格")]),a("td",[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.ruleFormValue.conclusion,callback:function(t){e.$set(e.ruleFormValue,"conclusion",t)},expression:"ruleFormValue.conclusion"}})],1)]),a("tr",[a("td",[e._v("不合格")]),a("td",[a("table",{staticClass:"no-border"},[a("tbody",[a("tr",[a("td",[e._v("责令修改")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.ruleFormValue.conclusion},model:{value:e.ruleFormValue.orderToAmend,callback:function(t){e.$set(e.ruleFormValue,"orderToAmend",t)},expression:"ruleFormValue.orderToAmend"}})],1)]),a("tr",[a("td",[e._v("建议处罚")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.ruleFormValue.conclusion},model:{value:e.ruleFormValue.recommendPunishment,callback:function(t){e.$set(e.ruleFormValue,"recommendPunishment",t)},expression:"ruleFormValue.recommendPunishment"}})],1)]),a("tr",[a("td",[e._v("其他处理")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.ruleFormValue.conclusion},model:{value:e.ruleFormValue.otherProcessing,callback:function(t){e.$set(e.ruleFormValue,"otherProcessing",t)},expression:"ruleFormValue.otherProcessing"}})],1)])])])])])])])])]),a("el-col",{attrs:{span:11}},[a("table",{staticClass:"image-upload-table"},[a("tbody",[a("tr",[a("td",[e._v("现场图片")]),a("td",[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_Live()}}},e._l(e.images,(function(e){return a("img",{key:e,staticClass:"preview",attrs:{src:e}})})),0),a("p",[e._v(e._s(e.fileName))]),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_1",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*",name:"images"},on:{change:function(t){return e.handleFileUpload_Live()}}})])])]),a("tr",[a("td",[e._v("签名")]),a("td",[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_Sign()}}},e._l(e.signs,(function(e){return a("img",{key:e,staticClass:"preview",attrs:{src:e}})})),0),a("p",[e._v(e._s(e.signName))]),a("div",{staticClass:"image-box"},[a("input",{ref:"file_sign",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file1",accept:"image/*",name:"signs"},on:{change:function(t){return e.handleFileUpload_Sign()}}})])])])])])])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Ye=[],Ge={data:function(){return{images:[],fileName:"",signs:[],signName:"",listLoading:!1,ruleFormValue:{companyType:"1",townShip:"",companyID:"",date:"",checker:"",productionRecord:"1",productInputRecord:"1",proofOfProduct:"1",testRecord:"1",isDisableInput:"1",isThreeProduct:"1",commonLang:"",otherProblems:"",conclusion:"1",orderToAmend:"",recommendPunishment:"",otherProcessing:""},township:[],companyList:[],imageUrl_Live:"",imageUrl_Sign:"",file_live_1:null,file_sign:null,wordsList:[],wordValue:0,dialogVisible:!1,rules:{townShip:[{required:!0,message:"请选择",trigger:"change"}],companyID:[{required:!0,message:"请选择",trigger:"change"}],date:[{required:!0,message:"请选择",trigger:"change"}],checker:[{required:!0,message:"请插入",trigger:"change"}],otherProblems:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.getTown(),this.getCompanyProduct(),this.getWords()},methods:{getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyList=e.companyList.concat(t)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/supervision_record/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/regulatoryRecord"})})).catch((function(e){}))}}))},makeFormData:function(){var e=new FormData,t=1==this.ruleFormValue.conclusion?{order:" ",suggestion:" ",others:" "}:{order:this.ruleFormValue.orderToAmend?this.ruleFormValue.orderToAmend:" ",suggestion:this.ruleFormValue.recommendPunishment?this.ruleFormValue.recommendPunishment:" ",others:this.ruleFormValue.otherProcessing?this.ruleFormValue.otherProcessing:" "};t=JSON.stringify(t);var a={production:this.ruleFormValue.productionRecord,input:this.ruleFormValue.isDisableInput,abuse:this.ruleFormValue.proofOfProduct,origin:this.ruleFormValue.testRecord,inspection:this.ruleFormValue.productInputRecord,standard:this.ruleFormValue.isThreeProduct};return a=JSON.stringify(a),e.append("companyId",this.ruleFormValue.companyID),e.append("conclusion",this.ruleFormValue.conclusion),e.append("conclusionFalseInfo",t),e.append("createTime",this.ruleFormValue.date),e.append("inspector",this.ruleFormValue.checker),e.append("otherProblems",this.ruleFormValue.otherProblems),e.append("productionSubjectType",this.ruleFormValue.companyType),e.append("supervisionInfo",a),e.append("townId",this.ruleFormValue.townShip),e.append("createUserId",j().user().id),e.append("id",0),e.append("scenePhotos",""),e.append("sign",""),e.append("supervisionRecordTime",this.ruleFormValue.date),e.append("updateTime",this.ruleFormValue.date),e.append("updateUserId",j().user().id),e.append("usefulExpressions",this.selectWords(this.wordValue)),e.append("scenePhotoFile",this.file_live_1),e.append("signFile",this.file_sign),e},chooseFile_Live:function(){document.getElementById("file").click()},chooseFile_Sign:function(){document.getElementById("file1").click()},handleFileUpload_Live:function(e){this.file_live_1=this.$refs.file_live_1.files[0],this.images=[];var t=new FileReader,a=this;t.onload=function(e){a.images.push(e.target.result)},this.file_live_1?(t.readAsDataURL(this.file_live_1),this.fileName=this.file_live_1.name):this.fileName=""},handleFileUpload_Sign:function(){this.file_sign=this.$refs.file_sign.files[0],this.signs=[];var e=new FileReader,t=this;e.onload=function(e){t.signs.push(e.target.result)},this.file_sign?(e.readAsDataURL(this.file_sign),this.signName=this.file_sign.name):this.signName=""},getWords:function(){var e=this;$().get("/api/common_word/all",{sortBy:"id"}).then((function(t){e.wordsList=e.wordsList.concat(t.data)})).catch((function(e){console.log(e)}))},selectWords:function(e){var t=JSON.stringify(e);return t=t.substr(2,t.length-4),t=t.replace('","',","),t}}},We=Ge,Qe=(a("c8ed"),Object(u["a"])(We,Me,Ye,!1,null,null,null)),Je=Qe.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管记录")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("整改记录")])],1)],1),a("div",{staticClass:"box"},[a("el-row",[e.listLoading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[e._v("装货...")]):e._e()]),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 请选择图片 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]),e.listLoading||e.isNanData?e._e():a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}]},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"乡镇"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.data.townId,callback:function(t){e.$set(e.data,"townId",t)},expression:"data.townId"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"企业"}},[a("el-select",{model:{value:e.data.companyId,callback:function(t){e.$set(e.data,"companyId",t)},expression:"data.companyId"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期"},model:{value:e.data.rectificationRecordTime,callback:function(t){e.$set(e.data,"rectificationRecordTime",t)},expression:"data.rectificationRecordTime"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检查人"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.data.inspector,callback:function(t){e.$set(e.data,"inspector",t)},expression:"data.inspector"}})],1)],1)],1),a("div",{staticClass:"bg-blue"},[e._v("检查内容与结果")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"left-margin"},[a("table",[a("tbody",[a("tr",[a("td",{attrs:{rowspan:"2"}},[e._v("结论")]),a("td",[e._v("合格")]),a("td",[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.data.conclusion,callback:function(t){e.$set(e.data,"conclusion",t)},expression:"data.conclusion"}})],1)]),a("tr",[a("td",[e._v("不合格")]),a("td",[a("table",{staticClass:"no-border"},[a("tbody",[a("tr",[a("td",[e._v("责令修改")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.data.conclusion},model:{value:e.conclusionData.order,callback:function(t){e.$set(e.conclusionData,"order",t)},expression:"conclusionData.order"}})],1)]),a("tr",[a("td",[e._v("建议处罚")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.data.conclusion},model:{value:e.conclusionData.suggestion,callback:function(t){e.$set(e.conclusionData,"suggestion",t)},expression:"conclusionData.suggestion"}})],1)]),a("tr",[a("td",[e._v("其他处理")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.data.conclusion},model:{value:e.conclusionData.others,callback:function(t){e.$set(e.conclusionData,"others",t)},expression:"conclusionData.others"}})],1)])])])])])])])])]),a("el-col",{attrs:{span:11}},[a("table",{staticClass:"image-upload-table"},[a("tbody",[a("tr",[a("td",[e._v("现场图片")]),a("td",{attrs:{colspan:"3"}},[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_Live()}}},[e.images?a("img",{staticClass:"preview",attrs:{src:e.images}}):e._e(),!e.images&&e.data.scenePhotos?a("img",{staticClass:"preview",attrs:{src:e.downloadURL+e.data.scenePhotos}}):e._e()]),!e.file_live_1&&e.data.scenePhotos?a("el-link",{staticStyle:{display:"table"},on:{click:function(t){return e.downloadFile(e.data.scenePhotos)}}},[e._v("\n                    "+e._s(e.data.scenePhotos.replace("/uploads/",""))+"\n                  ")]):e._e(),e.file_live_1?a("p",[e._v(e._s(e.fileName))]):e._e(),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_1",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*",name:"images"},on:{change:function(t){return e.handleFileUpload_Live()}}})])],1)]),a("tr",[a("td",[e._v("签名")]),a("td",[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_Sign()}}},[e.signs?a("img",{staticClass:"preview",attrs:{src:e.signs}}):e._e(),!e.signs&&e.data.supervisionSign?a("img",{staticClass:"preview",attrs:{src:e.downloadURL+e.data.supervisionSign}}):e._e()]),!e.file_live_2&&e.data.supervisionSign?a("el-link",{staticStyle:{display:"table"},on:{click:function(t){return e.downloadFile(e.data.supervisionSign)}}},[e._v("\n                    "+e._s(e.data.supervisionSign.replace("/uploads/",""))+"\n                  ")]):e._e(),e.file_live_2?a("p",[e._v(e._s(e.signName))]):e._e(),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_2",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file1",accept:"image/*",name:"signs"},on:{change:function(t){return e.handleFileUpload_Sign()}}})])],1),a("td",[e._v("确认人签名")]),a("td",[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_CofirmSign()}}},[e.confirmSigns?a("img",{staticClass:"preview",attrs:{src:e.confirmSigns}}):e._e(),!e.confirmSigns&&e.data.confirmorSign?a("img",{staticClass:"preview",attrs:{src:e.downloadURL+e.data.confirmorSign}}):e._e()]),!e.file_live_3&&e.data.confirmorSign?a("el-link",{staticStyle:{display:"table"},on:{click:function(t){return e.downloadFile(e.data.confirmorSign)}}},[e._v("\n                    "+e._s(e.data.confirmorSign.replace("/uploads/",""))+"\n                  ")]):e._e(),e.file_live_3?a("p",[e._v(e._s(e.confirmSignName))]):e._e(),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_3",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file2",accept:"image/*",name:"confirmSigns"},on:{change:function(t){return e.handleFileUpload_ConfirmSign()}}})])],1)])])])])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.onSubmit}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1),!e.listLoading&&e.isNanData?a("el-form",{ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"乡镇",prop:"townId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.townId,callback:function(t){e.$set(e.ruleFormValue,"townId",t)},expression:"ruleFormValue.townId"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"企业",prop:"companyId"}},[a("el-select",{model:{value:e.ruleFormValue.companyId,callback:function(t){e.$set(e.ruleFormValue,"companyId",t)},expression:"ruleFormValue.companyId"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选择日期",prop:"createTime"}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期"},model:{value:e.ruleFormValue.createTime,callback:function(t){e.$set(e.ruleFormValue,"createTime",t)},expression:"ruleFormValue.createTime"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检查人",prop:"inspector"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.ruleFormValue.inspector,callback:function(t){e.$set(e.ruleFormValue,"inspector",t)},expression:"ruleFormValue.inspector"}})],1)],1)],1),a("div",{staticClass:"bg-blue"},[e._v("检查内容与结果")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"left-margin"},[a("table",[a("tbody",[a("tr",[a("td",{attrs:{rowspan:"2"}},[e._v("结论")]),a("td",[e._v("合格")]),a("td",[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.ruleFormValue.conclusion,callback:function(t){e.$set(e.ruleFormValue,"conclusion",t)},expression:"ruleFormValue.conclusion"}})],1)]),a("tr",[a("td",[e._v("不合格")]),a("td",[a("table",{staticClass:"no-border"},[a("tbody",[a("tr",[a("td",[e._v("责令修改")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.ruleFormValue.conclusion},model:{value:e.ruleFormValue.order,callback:function(t){e.$set(e.ruleFormValue,"order",t)},expression:"ruleFormValue.order"}})],1)]),a("tr",[a("td",[e._v("建议处罚")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.ruleFormValue.conclusion},model:{value:e.ruleFormValue.suggestion,callback:function(t){e.$set(e.ruleFormValue,"suggestion",t)},expression:"ruleFormValue.suggestion"}})],1)]),a("tr",[a("td",[e._v("其他处理")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.ruleFormValue.conclusion},model:{value:e.ruleFormValue.others,callback:function(t){e.$set(e.ruleFormValue,"others",t)},expression:"ruleFormValue.others"}})],1)])])])])])])])])]),a("el-col",{attrs:{span:11}},[a("table",{staticClass:"image-upload-table"},[a("tbody",[a("tr",[a("td",[e._v("现场图片")]),a("td",{attrs:{colspan:"3"}},[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_Live()}}},[a("img",{staticClass:"preview",attrs:{src:e.images}})]),a("p",[e._v(e._s(e.fileName))]),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_1",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*",name:"images"},on:{change:function(t){return e.handleFileUpload_Live()}}})])])]),a("tr",[a("td",[e._v("签名")]),a("td",[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_Sign()}}},[a("img",{staticClass:"preview",attrs:{src:e.signs}})]),a("p",[e._v(e._s(e.signName))]),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_2",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file1",accept:"image/*",name:"signs"},on:{change:function(t){return e.handleFileUpload_Sign()}}})])]),a("td",[e._v("确认人签名")]),a("td",[a("div",{staticClass:"img-container",on:{click:function(t){return e.chooseFile_CofirmSign()}}},[a("img",{staticClass:"preview",attrs:{src:e.confirmSigns}})]),a("p",[e._v(e._s(e.confirmSignName))]),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_3",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file2",accept:"image/*",name:"confirmSigns"},on:{change:function(t){return e.handleFileUpload_ConfirmSign()}}})])])])])])])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1):e._e()],1)])},Xe=[],Ke=a("c1df"),Ze=a.n(Ke),et={data:function(){return{images:"",fileName:"",signs:"",signName:"",confirmSigns:"",confirmSignName:"",superId:-1,listLoading:!1,data:[],pageLoading:!1,imageUrl_Live:"",imageUrl_Sign:"",imageUrl_ConfirmSign:"",file_live_1:null,file_live_2:null,file_live_3:null,township:[],companyList:[],conclusionData:null,isNanData:null,downloadURL:"",ruleFormValue:{townId:"",companyId:"",createTime:"",inspector:"",conclusion:"0",order:"",suggestion:"",others:""},dialogVisible:!1,rules:{townId:[{required:!0,message:"请选择",trigger:"change"}],companyId:[{required:!0,message:"请选择",trigger:"change"}],createTime:[{required:!0,message:"请选择",trigger:"change"}],inspector:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.superId=this.$route.params.id,this.downloadURL=I.DOWNLOAD_URL(),this.getTown(),this.getCompanyProduct(),this.getData()},methods:{getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyList=e.companyList.concat(t)})).catch((function(e){console.log(e)}))},getData:function(){var e=this;this.listLoading=!0,$().get("/api/rectification_record/all?supervisionRecordId="+this.superId,{sortBy:"id"}).then((function(t){var a=t.data;e.data=a[0],e.isNanData=!e.data,e.isNanData||(e.conclusionData=JSON.parse(e.data.conclusionFalseInfo)),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t,a=this,i=new FormData;i.append("scenePhotoFile",this.file_live_1),i.append("signFile",this.file_live_2),i.append("confirmor",this.file_live_3),i.append("supervisionRecordId",this.superId),this.isNanData?(t=1==this.ruleFormValue.conclusion?{order:" ",suggestion:" ",others:" "}:{order:this.ruleFormValue.order?this.ruleFormValue.order:" ",suggestion:this.ruleFormValue.suggestion?this.ruleFormValue.suggestion:" ",others:this.ruleFormValue.others?this.ruleFormValue.others:" "},t=JSON.stringify(t),i.append("id",0),i.append("towId",this.ruleFormValue.townId),i.append("conclusion",this.ruleFormValue.conclusion),i.append("inspector",this.ruleFormValue.inspector),i.append("companyId",this.ruleFormValue.companyId),i.append("updateTime",this.ruleFormValue.createTime),i.append("updateUserId",j().user().id),i.append("createUserId",j().user().id),i.append("createTime",this.ruleFormValue.createTime),i.append("rectificationRecordTime",this.ruleFormValue.createTime),i.append("conclusionFalseInfo",t),this.$refs[e].validate((function(e){e&&(a.listLoading=!0,$().post("/api/rectification_record/create",i).then((function(e){setTimeout((function(){a.listLoading=!1}),1e3),a.$router.push({path:"/regulatoryRecord"})})).catch((function(e){console.log(e)})))}))):(t={order:this.conclusionData.order?this.conclusionData.order:" ",suggestion:this.conclusionData.suggestion?this.conclusionData.suggestion:" ",others:this.conclusionData.others?this.conclusionData.others:" "},t=JSON.stringify(t),i.append("townId",this.data.townId),i.append("id",this.data.id),i.append("inspector",this.data.inspector),i.append("companyId",this.data.companyId),this.data.rectificationRecordTime=new Date(this.data.rectificationRecordTime).toDateString("YYYY-MM-DD"),i.append("createTime",this.data.rectificationRecordTime),i.append("rectificationRecordTime",this.data.rectificationRecordTime),i.append("updateUserId",j().user().id),i.append("conclusionFalseInfo",t),this.pageLoading=!0,$().put("/api/rectification_record/update/"+this.data.id,i).then((function(e){setTimeout((function(){a.pageLoading=!1}),500),a.$router.push({path:"/regulatoryRecord"})})).catch((function(e){})))},chooseFile_Live:function(){document.getElementById("file").click()},chooseFile_Sign:function(){document.getElementById("file1").click()},chooseFile_CofirmSign:function(){document.getElementById("file2").click()},handleFileUpload_Live:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.images="";var e=new FileReader,t=this;e.onload=function(e){t.images=e.target.result},this.file_live_1?(e.readAsDataURL(this.file_live_1),this.fileName=this.file_live_1.name):this.fileName=""},handleFileUpload_Sign:function(){this.file_live_2=this.$refs.file_live_2.files[0],this.signs="";var e=new FileReader,t=this;e.onload=function(e){t.signs=e.target.result},this.file_live_2?(e.readAsDataURL(this.file_live_2),this.signName=this.file_live_2.name):this.signName=""},handleFileUpload_ConfirmSign:function(){this.file_live_3=this.$refs.file_live_3.files[0],this.confirmSigns="";var e=new FileReader,t=this;e.onload=function(e){t.confirmSigns=e.target.result},this.file_live_3?(e.readAsDataURL(this.file_live_3),this.confirmSignName=this.file_live_3.name):this.confirmSignName=""},downloadFile:function(e){S()({url:I.DOWNLOAD_URL()+e,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},tt=et,at=Object(u["a"])(tt,He,Xe,!1,null,null,null),it=at.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管记录")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("详情")])],1)],1),a("div",{staticClass:"box"},[e.data?a("el-form",{ref:"form"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-radio-group",{model:{value:e.data.productionSubjectType,callback:function(t){e.$set(e.data,"productionSubjectType",t)},expression:"data.productionSubjectType"}},[a("el-radio",{attrs:{label:"1",disabled:""}},[e._v("企业")]),a("el-radio",{attrs:{label:"2",disabled:""}},[e._v("农户")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"乡镇"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.townShip,callback:function(t){e.townShip=t},expression:"townShip"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"企业"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.companyName,callback:function(t){e.companyName=t},expression:"companyName"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期",disabled:""},model:{value:e.data.createTime,callback:function(t){e.$set(e.data,"createTime",t)},expression:"data.createTime"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"检查人"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.data.inspector,callback:function(t){e.$set(e.data,"inspector",t)},expression:"data.inspector"}})],1)],1)],1),a("div",{staticClass:"bg-blue"},[e._v("检查内容与结果")]),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("生产记录(种养殖档案)")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.supervisionInfo.production,callback:function(t){e.$set(e.supervisionInfo,"production",t)},expression:"supervisionInfo.production"}},[a("el-radio",{attrs:{label:"1",disabled:""}},[e._v("有")]),a("el-radio",{attrs:{label:"2",disabled:""}},[e._v("真实完整")])],1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("农产品产地准出证明(销售记录)")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.supervisionInfo.abuse,callback:function(t){e.$set(e.supervisionInfo,"abuse",t)},expression:"supervisionInfo.abuse"}},[a("el-radio",{attrs:{label:"1",disabled:""}},[e._v("有")]),a("el-radio",{attrs:{label:"2",disabled:""}},[e._v("真实完整")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("农产品产投入品记录（进、销、使用）")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.supervisionInfo.inspection,callback:function(t){e.$set(e.supervisionInfo,"inspection",t)},expression:"supervisionInfo.inspection"}},[a("el-radio",{attrs:{label:"1",disabled:""}},[e._v("有")]),a("el-radio",{attrs:{label:"2",disabled:""}},[e._v("真实完整")])],1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("检验记录")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:e.supervisionInfo.origin,callback:function(t){e.$set(e.supervisionInfo,"origin",t)},expression:"supervisionInfo.origin"}},[a("el-radio",{attrs:{label:"1",disabled:""}},[e._v("有")]),a("el-radio",{attrs:{label:"2",disabled:""}},[e._v("真实完整")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("禁用投入品及滥用添加剂行为")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{disabled:"","true-label":"1","false-label":"0"},model:{value:e.supervisionInfo.input,callback:function(t){e.$set(e.supervisionInfo,"input",t)},expression:"supervisionInfo.input"}},[e._v("有")])],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"left-margin"},[e._v("“三品一标使用”")])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{disabled:"","true-label":"1","false-label":"0"},model:{value:e.supervisionInfo.standard,callback:function(t){e.$set(e.supervisionInfo,"standard",t)},expression:"supervisionInfo.standard"}},[e._v("合规")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"left-margin",attrs:{label:"常用语"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{disabled:""},model:{value:e.data.otherProblems,callback:function(t){e.$set(e.data,"otherProblems",t)},expression:"data.otherProblems"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("div",{staticClass:"left-margin"},[e._v("现场发现的其他问题")])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-input",{attrs:{type:"textarea",rows:5,disabled:""},model:{value:e.data.otherProblems,callback:function(t){e.$set(e.data,"otherProblems",t)},expression:"data.otherProblems"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"left-margin"},[a("table",[a("tbody",[a("tr",[a("td",{attrs:{rowspan:"2"}},[e._v("结论")]),a("td",[e._v("合格")]),a("td",[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0",disabled:""},model:{value:e.data.conclusion,callback:function(t){e.$set(e.data,"conclusion",t)},expression:"data.conclusion"}})],1)]),a("tr",[a("td",[e._v("不合格")]),a("td",[a("table",{staticClass:"no-border"},[a("tbody",[a("tr",[a("td",[e._v("责令修改")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.data.conclusion},model:{value:e.conclusionData.order,callback:function(t){e.$set(e.conclusionData,"order",t)},expression:"conclusionData.order"}})],1)]),a("tr",[a("td",[e._v("建议处罚")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.data.conclusion},model:{value:e.conclusionData.suggestion,callback:function(t){e.$set(e.conclusionData,"suggestion",t)},expression:"conclusionData.suggestion"}})],1)]),a("tr",[a("td",[e._v("其他处理")]),a("td",[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1==e.data.conclusion},model:{value:e.conclusionData.others,callback:function(t){e.$set(e.conclusionData,"others",t)},expression:"conclusionData.others"}})],1)])])])])])])])])]),a("el-col",{attrs:{span:11}},[a("table",{staticClass:"image-upload-table"},[a("tbody",[a("tr",[a("td",{attrs:{width:"30%"}},[e._v("现场图片")]),a("td",[a("div",{staticClass:"image-container"},[e.data.scenePhotos?a("img",{staticClass:"live_photo",attrs:{src:e.downloadUrl+e.data.scenePhotos}}):e._e()]),e.data.scenePhotos?a("el-link",{staticStyle:{display:"table"},on:{click:function(t){return e.downloadFile_Live()}}},[e._v(e._s(e.data.scenePhotos.replace("/uploads/","")))]):e._e()],1)]),a("tr",[a("td",{attrs:{width:"30%"}},[e._v("签名")]),a("td",[a("div",{staticClass:"image-container"},[e.data.sign?a("img",{staticClass:"sign_photo",attrs:{src:e.downloadUrl+e.data.sign}}):e._e()]),e.data.sign?a("el-link",{staticStyle:{display:"table"},on:{click:function(t){return e.downloadFile_Sign()}}},[e._v(e._s(e.data.sign.replace("/uploads/","")))]):e._e()],1)])])])])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1):e._e(),e.data?e._e():[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[e._v("装货...")])]],2)])},ot=[],lt={data:function(){return{id:0,townShip:"",companyName:"",imageUrl:"",data:null,conclusionData:null,supervisionInfo:null,listLoading:!0,downloadUrl:""}},created:function(){this.id=this.$route.params.id,this.townShip=this.$route.query.township,this.companyName=this.$route.query.company,this.getData(),this.downloadUrl=I.DOWNLOAD_URL()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/supervision_record/get/"+this.id,{id:this.id}).then((function(t){e.data=t,e.conclusionData=JSON.parse(e.data.conclusionFalseInfo),e.supervisionInfo=JSON.parse(e.data.supervisionInfo),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},downloadFile_Live:function(){var e=this;S()({url:this.downloadUrl+this.data.scenePhotos,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.data.scenePhotos.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},downloadFile_Sign:function(){var e=this;S()({url:this.downloadUrl+this.data.sign,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.data.sign.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},nt=lt,st=(a("5895"),Object(u["a"])(nt,rt,ot,!1,null,null,null)),ct=st.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管记录")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("常用语管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[a("i",{staticClass:"el-icon-back"}),e._v(" 返回\n      ")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加\n      ")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"word",label:"常用语"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.handleEdit(i.index,i)}}},[a("i",{staticClass:"el-icon-edit"}),e._v("查看\n            ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDel(i.index,i)}}},[a("i",{staticClass:"el-icon-close"}),e._v("删除\n            ")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules}},[a("el-form-item",{attrs:{prop:"word"}},[a("el-input",{model:{value:e.addForm.word,callback:function(t){e.$set(e.addForm,"word",t)},expression:"addForm.word"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:"",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",plain:"",type:"warning"},nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("关闭")])],1)],1),a("el-dialog",{attrs:{title:"修改",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules}},[a("el-form-item",{attrs:{prop:"word"}},[a("el-input",{model:{value:e.editForm.word,callback:function(t){e.$set(e.editForm,"word",t)},expression:"editForm.word"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:"",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"warning",plain:""},nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("关闭")])],1)],1),a("div",{staticClass:"pageBox"},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},dt=[],pt={name:"commonWords",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},total:0,listLoading:!0,editFormRules:{word:[{required:!0,message:"请输入",trigger:"blur,change"}]},editForm:{id:0,word:""},editFormVisible:!1,editLoading:!1,addFormRules:{word:[{required:!0,message:"请输入",trigger:"blur,change"}]},addForm:{id:0,word:""},addFormVisible:!1,addLoading:!1,tableData:[]}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/common_word/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=Object.assign({},t)},handleDel:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){a.listLoading=!0,$().delete("/api/common_word/delete/"+t.id).then((function(e){a.getList()})).catch((function(e){console.log(e)}))}))},handleAdd:function(){this.addFormVisible=!0,this.addForm={id:0,word:""}},editSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&(e.editLoading=!0,$().put("/api/common_word/update/"+e.editForm.id,{id:e.editForm.id,word:e.editForm.word}).then((function(t){e.editLoading=!1,e.editFormVisible=!1,e.getList()})).catch((function(e){console.log(e)})))}))},addSubmit:function(){var e=this;this.$refs.addForm.validate((function(t){t&&(e.addLoading=!0,$().post("/api/common_word/create",{id:e.addForm.id,word:e.addForm.word}).then((function(t){e.addLoading=!1,e.addFormVisible=!1,e.getList()})).catch((function(e){console.log(e)})))}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},mt=pt,ft=Object(u["a"])(mt,ut,dt,!1,null,"36b2f858",null),gt=ft.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("经营主体")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label"},[e._v("产品")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("div",{staticClass:"select_label"},[e._v("企业规模")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-container",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"企业名称"}}),a("el-table-column",{attrs:{prop:"classification",label:"企业规模"}}),a("el-table-column",{attrs:{prop:"type",label:"产品类型"}}),a("el-table-column",{attrs:{prop:"bookNo",label:"法定代表人"}}),a("el-table-column",{attrs:{prop:"date",label:"企业地址"}}),a("el-table-column",{attrs:{prop:"limitedPeriod",label:"社会信用统一代码"}}),a("el-table-column",{attrs:{prop:"yield",label:"联系方式"}}),a("el-table-column",{attrs:{prop:"yield",label:"监管对象性质"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"企业详情",placement:"top"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-search",circle:"",plain:"",type:"success"}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"经营产品",placement:"top"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-goods",circle:"",plain:"",type:"primary"},on:{click:e.goBussinessProducts}})],1)],1)],1)],1),a("div",{staticClass:"pageBox"},[e.total>e.page.pageSize?a("el-pagination",{attrs:{"current-page":e.page.pageIndex,"page-sizes":[10,20,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],1)])},bt=[],vt={data:function(){return{page:{pageIndex:1,pageSize:10},total:100,options:[{value:"全部",label:""}],tableData:[{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"},{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"},{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"},{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"}]}},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},handleSizeChange:function(e){var t=this;t.page.pageSize=e,t.fullPage(1)},handleCurrentChange:function(e){var t=this;t.page.pageIndex=e,t.fullPage(1)},goBussinessProducts:function(){this.$router.push({path:"businessProducts"})}}},yt=vt,wt=Object(u["a"])(yt,ht,bt,!1,null,"46b404d1",null),_t=wt.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("经营主体")]),a("el-breadcrumb-item",[e._v("经营产品")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",plain:"",type:"primary"}},[e._v("返回")])],1),a("el-container",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"classification",label:"单价"}}),a("el-table-column",{attrs:{prop:"type",label:"产地"}}),a("el-table-column",{attrs:{prop:"bookNo",label:"品种"}}),a("el-table-column",{attrs:{prop:"date",label:"规格"}})],1)],1),a("div",{staticClass:"pageBox"},[e.total>e.page.pageSize?a("el-pagination",{attrs:{"current-page":e.page.pageIndex,"page-sizes":[10,20,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],1)])},Ct=[],xt={data:function(){return{page:{pageIndex:1,pageSize:10},total:100,options:[{value:"全部",label:""}],tableData:[{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"},{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"},{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"},{name:"产品",classification:"分类",type:"认证类型",bookNo:"123456",date:"2018-09-01至2020-05-01",limitedPeriod:"1年",yield:"600"}]}},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},handleSizeChange:function(e){var t=this;t.page.pageSize=e,t.fullPage(1)},handleCurrentChange:function(e){var t=this;t.page.pageIndex=e,t.fullPage(1)},goAdd:function(){this.$router.push({path:"addThreeProducts"})}}},St=xt,Ft=Object(u["a"])(St,kt,Ct,!1,null,"33659ce4",null),It=Ft.exports,Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("经营主体")]),a("el-breadcrumb-item",[e._v("企业详情")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"introduce_title"},[e._v("公司简介")]),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:5}},[a("el-image",{staticStyle:{width:"100%"},attrs:{src:e.url,fit:e.cover}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"company_title"},[e._v("福鼎白茶")]),a("p",[e._v("啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊")])])],1),a("div",{staticClass:"introduce_title"},[e._v("主营产品")]),a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"company_title"},[e._v("福鼎白茶")]),a("p",[e._v("啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"company_title"},[e._v("福鼎白茶")]),a("p",[e._v("啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"company_title"},[e._v("福鼎白茶")]),a("p",[e._v("啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊")])])],1),a("div",{staticClass:"introduce_title"},[e._v("联系我们")]),a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"company_title"},[e._v("联系人")]),a("p",[e._v("啊啊啊啊")])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"company_title"},[e._v("电话")]),a("p",[e._v("15951580999")])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"company_title"},[e._v("地址")]),a("p",[e._v("无锡市新吴区国家软件园")])])],1),a("el-button",{staticStyle:{"margin-top":"50px"},attrs:{size:"small",plain:"",type:"primary"}},[e._v("返回")])],1)])},Tt=[],Vt={data:function(){return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}}},Lt=Vt,Nt=(a("bc14"),Object(u["a"])(Lt,Dt,Tt,!1,null,"5888730a",null)),$t=Nt.exports,Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:" "}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("红黑名单")])],1)],1),a("div",{staticClass:"box"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.getList},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"红名单",name:"first"}}),a("el-tab-pane",{attrs:{label:"黑名单",name:"second"}}),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("label",{staticStyle:{"margin-right":"30px"}},[e._v("乡镇")]),a("el-select",{attrs:{placeholder:"Select"},on:{change:e.getList},model:{value:e.currTown,callback:function(t){e.currTown=t},expression:"currTown"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"180"}}),e.isShowAddButton?a("el-table-column",{attrs:{label:"企业名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(e.filterCompnay(a.creditCode))+"\n            ")]}}],null,!1,3995582841)}):e._e(),a("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e.isShowAddButton?void 0:[e._v("\n              "+e._s(e.filterCompnay(a.creditCode))+"\n            ")]}}],null,!0)}),a("el-table-column",{attrs:{label:"现信用评级"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-rate",{attrs:{value:e.getGradeString(i.nowGrade),max:e.getGradeString(i.nowGrade),texts:["C级（失信）","B级（基本守信）","A级（守信）"],colors:e.colors,disabled:"","show-text":""}})]}}])}),a("el-table-column",{attrs:{prop:"gradeTime",label:"评级时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(e._f("formatDate")(a.gradeTime))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"gradeUnit",label:"评级单位"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)],1)])},zt=[],At={name:"redBlackList",components:{Pagination:_e},data:function(){return{listLoading:!0,page:{pageIndex:1,pageSize:20},total:0,options:[{value:"全部",label:""}],activeTabName:"first",township:[{id:0,name:"全部"}],currTown:0,status:1,nowGrade:"A",tableData:[],companyProduction:[],isShowAddButton:null,colors:{1:"#f00",2:"#F7BA2A",3:"#0f0"}}},created:function(){this.getTown(),this.getList(),this.getCompanyProduction(),this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addTrainingFunds"==e.privilegeCode}))},methods:{getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getList:function(){var e=this;this.listLoading=!0;var t="first"===this.activeTabName?1:2;this.status!==t&&(this.status=t,this.page.pageIndex=1,this.nowGrade=1===this.status?"A":"C"),$().get("/api/company_credit_grade/all",{approvalStatus:2,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,townId:this.currTown,nowGrade:this.nowGrade,sortBy:"creditGradeId"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},goAdd:function(){this.$router.push({path:"addRedBlackList"})},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.creditCode===e}));return t?t.companyName:""},getGradeString:function(e){var t="";switch(e){case"A":t=3;break;case"B":t=2;break;case"C":t=1;break;default:t=3}return t}}},Rt=At,Bt=Object(u["a"])(Rt,Pt,zt,!1,null,"768621f3",null),Ot=Bt.exports,jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[e.isEnterprise>-1?a("el-breadcrumb-item",{staticClass:"actived"},[e._v("农残自检")]):a("el-breadcrumb-item",{staticClass:"actived"},[e._v("农残检测")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},["undefined"==typeof this.creditCode?a("div",{staticClass:"select_label no-margin-left"},[e._v("乡镇")]):a("div",{staticClass:"select_label no-margin-left",staticStyle:{display:"none"}},[e._v("乡镇")]),"undefined"==typeof this.creditCode?a("el-select",{attrs:{placeholder:"全部"},on:{change:e.getList},model:{value:e.currTown,callback:function(t){e.currTown=t},expression:"currTown"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.divisionCode,size:"large"}})})),1):a("div",{staticClass:"select_label"},[e._v(e._s(e.getCompanyName()))]),a("div",{staticClass:"select_label"},[e._v("项目")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:e.getList},model:{value:e.itemValue,callback:function(t){e.itemValue=t},expression:"itemValue"}},e._l(e.items,(function(e){return a("el-option",{key:e.id,attrs:{label:e.item,value:e.item}})})),1),a("div",{staticClass:"select_label"},[e._v("样品")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:e.getList},model:{value:e.samplesValue,callback:function(t){e.samplesValue=t},expression:"samplesValue"}},e._l(e.samples,(function(e){return a("el-option",{key:e.id,attrs:{label:e.sample,value:e.sample}})})),1),a("div",{staticClass:"select_label"},[e._v("定性")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:e.getList},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.results,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e.isShowSearchOption?a("div",{staticClass:"select_label"},[e._v("检测单位")]):e._e(),e.isShowSearchOption?a("el-select",{attrs:{placeholder:"全部"},on:{change:e.getList},model:{value:e.detectionUnitValue,callback:function(t){e.detectionUnitValue=t},expression:"detectionUnitValue"}},e._l(e.detectionUnit,(function(e){return a("el-option",{key:e.id,attrs:{label:e.detectUnit,value:e.detectUnit}})})),1):e._e()],1),a("div",{staticClass:"iptBox"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"select_label no-margin-left"},[e._v("开始日期")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:e.getList},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"select_label no-margin-left"},[e._v("结束日期")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:e.getList},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),a("el-col",{staticClass:"flex-center",attrs:{span:5}},[a("el-button",{attrs:{size:"small",type:"success",plain:"",disabled:e.totalNo<1},on:{click:e.handleDownload}},[e._v("导出表格")]),"undefined"!=typeof this.creditCode?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]):a("el-button",{staticStyle:{display:"none"},attrs:{size:"small",plain:"",type:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]),a("span",{staticClass:"margin-left-20 margin-top-10-IE"},[e._v("\n            总计\n            "),a("b",{staticClass:"blue-colored"},[e._v(e._s(e.totalNo))]),e._v(" 条检测\n          ")])],1),a("el-col",{staticClass:"flex-center justify-right",staticStyle:{height:"40px"},attrs:{span:9}},[0!=e.isShowCheckbox?a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.actionConfirm(1)}}},[e._v("添加到专项1")]):e._e(),0!=e.isShowCheckbox?a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"el-icon-minus",plain:""},on:{click:function(t){return e.actionConfirm(0)}}},[e._v("从专项1移除")]):e._e(),a("el-checkbox",{staticClass:"margin-top-10-IE float-right-IE",attrs:{"true-label":"1","false-label":"0",disabled:e.totalNo<1},on:{change:e.showCheckbox},model:{value:e.isShowCheckbox,callback:function(t){e.isShowCheckbox=t},expression:"isShowCheckbox"}},[e._v("专项1:绿色优质农产品生产基地")])],1)],1),a("el-dialog",{attrs:{visible:e.alert_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.alert_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 请选择 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.alert_dialogVisible=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:e.btnColor,plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[0!=e.isShowCheckbox?a("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-checkbox",{staticStyle:{"margin-left":"auto"},attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i.id)}},model:{value:e.checked[i.id],callback:function(t){e.$set(e.checked,i.id,t)},expression:"checked[row.id]"}})]}}],null,!1,574067976)}):e._e(),a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"no",label:"编号"}}),a("el-table-column",{attrs:{prop:"item",label:"检测项目"}}),a("el-table-column",{attrs:{prop:"sample",label:"样品名称"}}),a("el-table-column",{attrs:{prop:"source",label:"来源"}}),a("el-table-column",{attrs:{prop:"resultDl",label:"定量结果"}}),a("el-table-column",{attrs:{prop:"resultDx",label:"定性结果"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.detect(a.resultDx))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"detectTime",label:"检测时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.detectTime)))]}}])}),a("el-table-column",{attrs:{prop:"detectUnit",label:"检测单位",width:"150"}}),a("el-table-column",{attrs:{prop:"operator",label:"检验员"}}),a("el-table-column",{attrs:{label:"专项1"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[1==t.specialFlag?a("i",{staticClass:"el-icon-check"}):a("i")]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Et=[],Ut={name:"disabilityCheck",components:{Pagination:_e},data:function(){return{isEnterprise:"",listLoading:!1,creditCode:"",page:{pageIndex:1,pageSize:20},total:0,totalNo:0,options:[{value:"全部",label:""}],township:[{id:0,name:"全部",divisionCode:0}],currTown:"",status:1,tableData:[],items:[{id:0,item:"全部"}],itemValue:"",samples:[{id:0,sample:"全部"}],samplesValue:"",results:[{id:0,name:"全部"},{id:1,name:"不合格"},{id:2,name:"合格 "},{id:3,name:"疑似"}],result:"",detectionUnit:[{id:"0",detectUnit:"全部"}],detectionUnitValue:"",startDate:"",endDate:"",isShowCheckbox:0,selectedRows:[],alert_dialogVisible:!1,confirm_dialogVisible:!1,btnColor:"",action:"",companyData:[],filename:"农残检测",checked:[],isShowSearchOption:null}},created:function(){this.isEnterprise=n.a.get("authData").indexOf("ent"),this.isShowSearchOption=!!n.a.get("authList").find((function(e){return"searchdisabilityCheck"==e.privilegeCode})),this.getTown(),this.getItem(),this.getSample(),this.getDetectUnit(),this.getList(),this.getCompanyProduction(),this.creditCode=this.$route.query.creditCode},methods:{handleDownload:function(){var e=this;this.downloadLoading=!0,Promise.all([a.e("chunk-594d6d48"),a.e("chunk-66f49cfd")]).then(a.bind(null,"4bf8d")).then((function(t){var a=["编号","检测项目","样品名称","来源","定量结果","定性结果","检测时间","检测单位","检验员","专项1"],i=["no","item","sample","source","resultDl","resultDx","detectTime","detectUnit","operator","specialFlag"],r=e.formatJson(i,e.tableData);t.export_json_to_excel({header:a,data:r,filename:e.filename,bookType:"csv"}),e.downloadLoading=!1}))},formatJson:function(e,t){var a=this;return t.map((function(t){return e.map((function(e){return"resultDx"===e?a.filterResultDx(t[e]):"detectTime"===e?t[e].substr(0,10):"specialFlag"===e?1===t[e]?"是":"":t[e]}))}))},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyData=t})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getItem:function(){var e=this;$().get("/api/disability_check/item").then((function(t){e.items=e.items.concat(t)})).catch((function(e){console.log(e)}))},getSample:function(){var e=this;$().get("/api/disability_check/sample ").then((function(t){e.samples=e.samples.concat(t)})).catch((function(e){console.log(e)}))},getDetectUnit:function(){var e=this;$().get("/api/disability_check/detect_unit").then((function(t){e.detectionUnit=e.detectionUnit.concat(t)})).catch((function(e){console.log(e)}))},getList:function(){var e=this;this.listLoading=!0;var t="";this.endDate&&(t=this.endDate.getFullYear()+"-"+parseInt(this.endDate.getMonth()+1)+"-"+this.endDate.getDate()+"T23:59:59"),$().get("/api/disability_check/all",{creditCode:this.$route.query.creditCode,detectUnit:"全部"==this.detectionUnitValue?"":this.detectionUnitValue,detectTimeFrom:this.startDate,detectTimeTo:t,sample:"全部"==this.samplesValue?"":this.samplesValue,item:"全部"==this.itemValue?"":this.itemValue,resultDx:this.result,townDivisionCode:0==this.currTown?"":this.currTown,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,e.totalNo=t.total*e.page.pageSize,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCompanyName:function(){var e=this,t=this.companyData.find((function(t){return t.creditCode===e.creditCode}));return t?t.companyName:""},detect:function(e){return""==e||"0"==e?"不合格":"1"==e?"合格":"疑似"},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},goAdd:function(){this.$router.push({path:"addDisabilityCheck"})},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},actionConfirm:function(e){this.action=e,this.updateSelectedRows()},updateSelectedRows:function(){var e=this;for(var t in this.selectedRows)this.confirm_dialogVisible=!1,this.listLoading=!0,$().put("/api/disability_check/update_special_flag/"+this.selectedRows[t]+"?specialFlag="+this.action).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.selectedRows=[],e.checked=[],e.isShowCheckbox=0,e.getList()})).catch((function(e){console.log(e)}))},showCheckbox:function(){0==this.isShowCheckbox&&(this.selectedRows=[],this.checked=[])},filterResultDx:function(e){switch(e){case 0:return"不合格";case 1:return"合格";case 2:return"疑似";default:return"不合格"}}}},qt=Ut,Mt=Object(u["a"])(qt,jt,Et,!1,null,"6bb31a55",null),Yt=Mt.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("任务发布")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"select_label no-margin-left"},[e._v("开始日期")]),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"开始日期"},on:{change:e.getList},model:{value:e.releaseTimeFrom,callback:function(t){e.releaseTimeFrom=t},expression:"releaseTimeFrom"}})],1),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"select_label no-margin-left"},[e._v("结束日期")]),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"结束日期"},on:{change:e.getList},model:{value:e.releaseTimeTo,callback:function(t){e.releaseTimeTo=t},expression:"releaseTimeTo"}})],1),a("el-col",{attrs:{span:3}},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/workTask/create")}}},[e._v("添加工作任务")]):e._e()],1)],1)],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"releaseTime",label:"发布时间","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e._f("formatDate")(a.releaseTime))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"releasePerson",label:"发布者"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.$router.push({path:"/workTask/edit/"+i.id})}}},[e._v("修改")]):e._e(),e.isShowEditButton?a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/workTask/report/create",query:{id:i.id}})}}},[e._v("查看任务")]):e._e(),e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/workTask/report/detail/"+i.id})}}},[e._v("查看任务进度")]):e._e()]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Wt=[],Qt={name:"workTask",components:{Pagination:_e},data:function(){return{releaseTimeFrom:"",releaseTimeTo:"",page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,isShowAddButton:null,isShowEditButton:null,tableData:[]}},created:function(){this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addWorkTask"==e.privilegeCode})),this.isShowEditButton=!!n.a.get("authList").find((function(e){return"addWorkTaskReport"==e.privilegeCode})),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,this.releaseTimeTo&&(this.releaseTimeTo=new Date(this.releaseTimeTo),this.releaseTimeTo.setDate(this.releaseTimeTo.getDate()+1)),$().get("/api/work_task/all",{fromDate:this.releaseTimeFrom,toDate:this.releaseTimeTo,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Jt=Qt,Ht=Object(u["a"])(Jt,Gt,Wt,!1,null,"e5df0312",null),Xt=Ht.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("工作任务")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加工作任务")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"发布日期",prop:"releaseTime"}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"开始日期"},model:{value:e.ruleFormValue.releaseTime,callback:function(t){e.$set(e.ruleFormValue,"releaseTime",t)},expression:"ruleFormValue.releaseTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发布者",prop:"releasePerson"}},[a("el-input",{model:{value:e.ruleFormValue.releasePerson,callback:function(t){e.$set(e.ruleFormValue,"releasePerson",t)},expression:"ruleFormValue.releasePerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.ruleFormValue.title,callback:function(t){e.$set(e.ruleFormValue,"title",t)},expression:"ruleFormValue.title"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.ruleFormValue.content,callback:function(t){e.$set(e.ruleFormValue,"content",t)},expression:"ruleFormValue.content"}})],1)],1)],1),a("el-row",[a("el-form-item",[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?a("span",[e._v("("+e._s(e.file.name)+")")]):a("span",[e._v("请选择需要上传的文件...")])])])])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Zt=[],ea={name:"addWorkTask",data:function(){return{file:null,ruleFormValue:{releaseTime:"",releasePerson:"",title:"",content:""},listLoading:!1,rules:{releaseTime:[{required:!0,message:"请选择",trigger:"change"}],releasePerson:[{required:!0,message:"请插入",trigger:"change"}],title:[{required:!0,message:"请插入",trigger:"change"}],content:[{required:!0,message:"请插入",trigger:"change"}]}}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/work_task/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/workTask"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",0),this.ruleFormValue.releaseTime=new Date(this.ruleFormValue.releaseTime).toDateString("YYYY-MM-DD"),e.append("releaseTime",this.ruleFormValue.releaseTime),e.append("releasePerson",this.ruleFormValue.releasePerson),e.append("title",this.ruleFormValue.title),e.append("content",this.ruleFormValue.content);var t=(new Date).toDateString("YYYY-MM-DD");return e.append("createTime",t),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}},ta=ea,aa=Object(u["a"])(ta,Kt,Zt,!1,null,null,null),ia=aa.exports,ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("工作任务")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加工作任务")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 你确定你要删除?")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.handleDelete}},[e._v("确认")])],1)]),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"发布日期",prop:"releaseTime"}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"开始日期"},model:{value:e.ruleFormValue.releaseTime,callback:function(t){e.$set(e.ruleFormValue,"releaseTime",t)},expression:"ruleFormValue.releaseTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发布者",prop:"releasePerson"}},[a("el-input",{model:{value:e.ruleFormValue.releasePerson,callback:function(t){e.$set(e.ruleFormValue,"releasePerson",t)},expression:"ruleFormValue.releasePerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.ruleFormValue.title,callback:function(t){e.$set(e.ruleFormValue,"title",t)},expression:"ruleFormValue.title"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.ruleFormValue.content,callback:function(t){e.$set(e.ruleFormValue,"content",t)},expression:"ruleFormValue.content"}})],1)],1)],1),a("el-form-item",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?a("span",[e._v("("+e._s(e.fileName)+")")]):a("span",[e._v("请选择需要上传的文件...")])])])])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.confirmDelete}},[e._v("删除")])],1)],1)],1)],1)},oa=[],la={name:"editWorkTask",data:function(){return{file:null,fileName:"",selectedId:null,data:null,dialogVisible:!1,listLoading:!1,ruleFormValue:{releaseTime:"",releasePerson:"",title:"",content:""},rules:{releaseTime:[{required:!0,message:"请选择",trigger:"change"}],releasePerson:[{required:!0,message:"请插入",trigger:"change"}],title:[{required:!0,message:"请插入",trigger:"change"}],content:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.selectedId=this.$route.params.id,this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;this.listLoading=!0,$().get("/api/work_task/get/"+e).then((function(e){t.data=e,t.ruleFormValue.releaseTime=t.data.releaseTime,t.ruleFormValue.releasePerson=t.data.releasePerson,t.ruleFormValue.title=t.data.title,t.ruleFormValue.content=t.data.content,t.file=e.workTaskProfiles,t.fileName=e.workTaskProfiles,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new FormData;a=t.makeFormData(),$().put("/api/work_task/update/"+t.selectedId,a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/workTask"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",0),this.ruleFormValue.releaseTime=new Date(this.ruleFormValue.releaseTime).toDateString("YYYY-MM-DD"),e.append("releaseTime",this.ruleFormValue.releaseTime),e.append("releasePerson",this.ruleFormValue.releasePerson),e.append("title",this.ruleFormValue.title),e.append("content",this.ruleFormValue.content);var t=(new Date).toDateString("YYYY-MM-DD");return e.append("createTime",t),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.fileName=this.file.name},handleDelete:function(){var e=this;this.dialogVisible=!1,this.listLoading=!0,$().delete("/api/work_task/delete/"+this.selectedId).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.$router.push({path:"/workTask"})})).catch((function(e){console.log(e)}))},confirmDelete:function(){this.dialogVisible=!0}}},na=la,sa=Object(u["a"])(na,ra,oa,!1,null,null,null),ca=sa.exports,ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("工作任务")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("汇报任务")])],1)],1),e.workData?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[a("el-row",{staticClass:"w-100 text-center margin-bottom-30"},[a("el-col",[a("h1",{staticClass:"middle-font"},[e._v(e._s(e.workData.title))])])],1),a("el-row",{staticClass:"w-100 text-center margin-bottom-30 flex-justify-center"},[a("el-col",{attrs:{span:5}},[e._v("发布日期："+e._s(e._f("formatDate")(e.workData.releaseTime)))]),a("el-col",{attrs:{span:5}},[e._v("发布者："+e._s(e.workData.releasePerson))])],1),a("el-row",{staticClass:"w-100 text-center flex-justify-center margin-bottom-30"},[a("el-col",{attrs:{span:12}},[e._v(e._s(e.workData.content))])],1),e.workData.workTaskProfiles?a("el-row",{staticClass:"w-100 flex-justify-center margin-bottom-30"},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.downloadFile()}}},[e._v("附件下载")]),a("span",{staticClass:"margin-left-20"},[e._v(e._s(e.workData.workTaskProfiles.replace("/uploads/","")))])],1)],1):e._e(),a("el-row",{staticClass:"margin-bottom-30"},[a("el-col",{staticClass:"middle-font margin-left-20"},[e._v("工作任务汇报")])],1),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"汇报日期：",prop:"reportTime"}},[a("el-date-picker",{staticClass:"w-100",attrs:{align:"right",type:"date",placeholder:"汇报日期"},model:{value:e.ruleFormValue.reportTime,callback:function(t){e.$set(e.ruleFormValue,"reportTime",t)},expression:"ruleFormValue.reportTime"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"汇报单位：",prop:"townId"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.ruleFormValue.townId,callback:function(t){e.$set(e.ruleFormValue,"townId",t)},expression:"ruleFormValue.townId"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"汇报人：",prop:"reportPerson"}},[a("el-input",{model:{value:e.ruleFormValue.reportPerson,callback:function(t){e.$set(e.ruleFormValue,"reportPerson",t)},expression:"ruleFormValue.reportPerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"汇报内容：",prop:"reportContent"}},[a("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.ruleFormValue.reportContent,callback:function(t){e.$set(e.ruleFormValue,"reportContent",t)},expression:"ruleFormValue.reportContent"}})],1)],1)],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1):a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"box"},[a("div",[e._v("装货...")])])])},da=[],pa={name:"addWorkTaskReport",data:function(){return{file:null,selectedId:null,workData:null,township:[],listLoading:!1,pageLoading:!0,ruleFormValue:{townId:"",reportPerson:"",title:"",reportTime:""},rules:{townId:[{required:!0,message:"请选择",trigger:"change"}],reportPerson:[{required:!0,message:"请插入",trigger:"change"}],reportTime:[{required:!0,message:"请选择",trigger:"change"}],reportContent:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.selectedId=this.$route.query.id,this.getData(this.$route.query.id),this.getTown(),this.ruleFormValue.townId=j().user().townId},methods:{getData:function(e){var t=this;$().get("/api/work_task/get/"+e).then((function(e){t.workData=e})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/work_task_report/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/workTask"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;e.append("id",0),this.ruleFormValue.reportTime=new Date(this.ruleFormValue.reportTime).toDateString("YYYY-MM-DD"),e.append("reportContent",this.ruleFormValue.reportContent),e.append("reportPerson",this.ruleFormValue.reportPerson),e.append("townId",this.ruleFormValue.townId),e.append("reportTime",this.ruleFormValue.reportTime);var t=(new Date).toDateString("YYYY-MM-DD");return e.append("createTime",t),e.append("workTaskId",this.selectedId),e},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.workData.workTaskProfiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.workData.workTaskProfiles.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},ma=pa,fa=Object(u["a"])(ma,ua,da,!1,null,null,null),ga=fa.exports,ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("工作任务")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("详情")])],1)],1),e.workData?a("div",{staticClass:"box"},[a("el-row",{staticClass:"w-100 text-center margin-bottom-30"},[a("el-col",[a("h1",{staticClass:"middle-font"},[e._v(e._s(e.workData.title))])])],1),a("el-row",{staticClass:"w-100 text-center margin-bottom-30 flex-justify-center"},[a("el-col",{attrs:{span:5}},[e._v("发布日期："+e._s(e._f("formatDate")(e.workData.releaseTime)))]),a("el-col",{attrs:{span:5}},[e._v("发布者："+e._s(e.workData.releasePerson))])],1),a("el-row",{staticClass:"w-100 text-center flex-justify-center margin-bottom-30"},[a("el-col",{attrs:{span:12}},[e._v(e._s(e.workData.content))])],1),e.workData.workTaskProfiles?a("el-row",{staticClass:"w-100 flex-justify-center margin-bottom-30"},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.downloadFile()}}},[e._v("附件下载")]),e.workData.workTaskProfiles?a("span",{staticClass:"margin-left-20"},[e._v(e._s(e.workData.workTaskProfiles.replace("/uploads/","")))]):e._e()],1)],1):e._e(),a("el-row",{staticClass:"margin-bottom-30"},[a("el-col",{staticClass:"middle-font margin-left-20"},[e._v("工作任务汇报")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"reportTime",label:"时间","class-name":"padding-left-20"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.reportTime)))]}}])}),a("el-table-column",{attrs:{prop:"reportContent",label:"汇报内容"}}),a("el-table-column",{attrs:{prop:"townId",label:"汇报单位"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterTownName(a.townId)))]}}])}),a("el-table-column",{attrs:{prop:"reportPerson",label:"汇报人"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize,layout:"prev, pager, next, sizes, jumper"},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getTableData}})],1),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1):a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"box"},[a("div",[e._v("装货...")])])])},ba=[],va={name:"detailWorkTaskReport",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},listLoading:!1,pageLoading:!0,total:0,tableData:[],file:null,selectedId:null,workData:null,township:[]}},created:function(){this.selectedId=this.$route.params.id,this.getData(this.$route.params.id),this.getTableData(),this.getTown()},methods:{getData:function(e){var t=this;$().get("/api/work_task/get/"+e).then((function(e){t.workData=e})).catch((function(e){console.log(e)}))},getTableData:function(){var e=this;this.listLoading=!0,$().get("/api/work_task_report/all",{workTaskId:this.selectedId,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.workData.workTaskProfiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.workData.workTaskProfiles.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},filterTownName:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.name:""}}},ya=va,wa=Object(u["a"])(ya,ha,ba,!1,null,null,null),_a=wa.exports,ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("种子管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/seed/upload")}}},[e._v("上传种子")]):e._e()],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"companyId",label:"企业名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterCompany(a.companyId)))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/seed/detail/"+i.id,query:{cityId:i.cityId,townId:i.townId,villageId:i.villageId}})}}},[e._v("种子")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)])},Ca=[],xa={name:"seed",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},total:0,tableData:[],listLoading:!1,isShowAddButton:null,companyProduction:null}},created:function(){this.isShowAddButton=!!n.a.get("authList").find((function(e){return"uploadSeed"==e.privilegeCode})),this.getData(),this.getCompanyProduction()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/seed/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.tableData=t.data,e.total=t.total})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},filterCompany:function(e){var t=this.companyProduction.find((function(t){return t.companyId===e}));return t?t.companyName:""}}},Sa=xa,Fa=Object(u["a"])(Sa,ka,Ca,!1,null,null,null),Ia=Fa.exports,Da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("种子管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("上传原料")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"输入市，区",prop:"cityId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.cityId,callback:function(t){e.$set(e.ruleFormValue,"cityId",t)},expression:"ruleFormValue.cityId"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"输入乡镇",prop:"townId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getCompanyList},model:{value:e.ruleFormValue.townId,callback:function(t){e.$set(e.ruleFormValue,"townId",t)},expression:"ruleFormValue.townId"}},e._l(e.townList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"输入村",prop:"villageId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.villageId,callback:function(t){e.$set(e.ruleFormValue,"villageId",t)},expression:"ruleFormValue.villageId"}},e._l(e.villageList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"输入企业",prop:"companyId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.companyId,callback:function(t){e.$set(e.ruleFormValue,"companyId",t)},expression:"ruleFormValue.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1)],1)],1),a("el-form-item",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:".xls, .xlsx"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?a("span",[e._v("("+e._s(e.file.name)+")")]):a("span",[e._v("请选择需要上传的文件...")])])]),a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.downloadFile()}}},[e._v("例文档下载")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[a("span",[e._v("种子.xlsx")])])])])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Ta=[],Va={name:"uploadSeed",data:function(){return{file:null,cityList:[],villageList:[],townList:[],companyProduction:[],listLoading:!1,ruleFormValue:{cityId:null,townId:null,villageId:null,companyId:null},rules:{cityId:[{required:!0,message:"请选择",trigger:"change"}],townId:[{required:!0,message:"请选择"}],villageId:[{required:!0,message:"请选择"}],companyId:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.getCity(),this.getVillage(),this.getTown()},methods:{getCity:function(){var e=this;this.listLoading=!0,$().get("/api/city/all").then((function(t){setTimeout((function(){e.listLoading=!1}),50),e.cityList=t})).catch((function(e){console.log(e)}))},getVillage:function(){var e=this;this.listLoading=!0,$().get("/api/village/all").then((function(t){setTimeout((function(){e.listLoading=!1}),50),e.villageList=t})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;this.listLoading=!0,$().get("/api/town/all").then((function(t){setTimeout((function(){e.listLoading=!1}),50),e.townList=t})).catch((function(e){console.log(e)}))},getCompany:function(){var e=this;this.listLoading=!0,$().get("/api/company_production/all",{townId:this.ruleFormValue.townId,sortBy:"companyId"}).then((function(t){setTimeout((function(){e.listLoading=!1}),50),e.companyProduction=t.data})).catch((function(e){console.log(e)}))},getCompanyList:function(){this.getCompany()},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new FormData;a=t.makeFormData(),t.listLoading=!0,$().post("/api/seed/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/seed"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;return this.file&&e.append("file",this.file),e.append("id",0),e.append("cityId",this.ruleFormValue.cityId),e.append("companyId",this.ruleFormValue.companyId),e.append("townId",this.ruleFormValue.townId),e.append("villageId",this.ruleFormValue.villageId),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},downloadFile:function(){var e="/uploads/default.xlsx";S()({url:I.DOWNLOAD_URL()+e,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},La=Va,Na=Object(u["a"])(La,Da,Ta,!1,null,null,null),$a=Na.exports,Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("种子管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("查看详情")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox",staticStyle:{"align-items":"center"}},[a("div",{staticClass:"header-left inline-block-IE"},[a("el-button",{staticClass:"margin-left-20",attrs:{size:"small",type:"primary",plain:"",disabled:!0}},[a("div",{staticStyle:{display:"flex"}},[e.villageId>0?a("span",[e._v(e._s(e.filterVillage(e.villageId)))]):e._e(),e.townId>0?a("span",[e._v(e._s(e.filterTown(e.townId)))]):e._e(),e.cityId>0?a("span",[e._v(e._s(e.filterCity(e.cityId)))]):e._e()])]),a("el-button",{staticClass:"margin-left-20",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("div",{staticClass:"inline-block-IE float-right-IE",staticStyle:{"margin-left":"auto",width:"70%"}},[a("el-row",{staticClass:"margin-bottom-10"},[a("el-col",{attrs:{span:1}},[e._v("合计：")]),a("el-col",{attrs:{span:5}},[e._v("补贴面积(亩)："+e._s(e.sum1))]),a("el-col",{attrs:{span:5}},[e._v("种子应收金额(元)："+e._s(e.sum2))]),a("el-col",{attrs:{span:5}},[e._v("农户自负金额(元)："+e._s(e.sum3))])],1),a("el-row",[a("el-col",{attrs:{span:1}},[e._v(" ")]),a("el-col",{attrs:{span:5}},[e._v("供种数量(公斤)："+e._s(e.sum4))]),a("el-col",{attrs:{span:5}},[e._v("种子补贴金额(元)："+e._s(e.sum5))])],1)],1)]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"field1",label:"户名"}}),a("el-table-column",{attrs:{prop:"field2",label:"品种名称"}}),a("el-table-column",{attrs:{prop:"field3",label:"补贴面积 (亩)"}}),a("el-table-column",{attrs:{prop:"field4",label:"供种面积 （亩）"}}),a("el-table-column",{attrs:{prop:"field5",label:"中标价格 （元/公斤）"}}),a("el-table-column",{attrs:{prop:"field6",label:"种子应收金额 （元）"}}),a("el-table-column",{attrs:{prop:"field7",label:"种子补贴金额 （元）"}}),a("el-table-column",{attrs:{prop:"field8",label:"农户自负金额 （元）"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)])},za=[],Aa={name:"detailSeed",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},cityList:[],villageList:[],townList:[],total:0,tableData:[],listLoading:!1,companyProduction:null,id:-1,townId:null,cityId:null,villageId:null,sum1:0,sum2:0,sum3:0,sum4:0,sum5:0}},created:function(){this.id=this.$route.params.id,this.villageId=this.$route.query.villageId,this.cityId=this.$route.query.cityId,this.townId=this.$route.query.townId,this.getData(),this.getCity(),this.getVillage(),this.getTown()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/seed/profile/"+this.id).then((function(t){for(var a in e.tableData=t.data,e.total=t.total,t.data)e.sum1=e.sum1+parseFloat(t.data[a].field3),e.sum2=e.sum2+parseInt(t.data[a].field6),e.sum3=e.sum3+parseInt(t.data[a].field8),e.sum4=e.sum4+parseInt(t.data[a].field4),e.sum5=e.sum5+parseInt(t.data[a].field7);setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCity:function(){var e=this;$().get("/api/city/all").then((function(t){e.cityList=t})).catch((function(e){console.log(e)}))},getVillage:function(){var e=this;$().get("/api/village/all").then((function(t){e.villageList=t})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.townList=t})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},filterVillage:function(e){var t=this.villageList.find((function(t){return t.id===e}));return t?t.name:""},filterTown:function(e){var t=this.townList.find((function(t){return t.id===e}));return t?t.name:""},filterCity:function(e){var t=this.cityList.find((function(t){return t.id===e}));return t?t.name:""}}},Ra=Aa,Ba=Object(u["a"])(Ra,Pa,za,!1,null,null,null),Oa=Ba.exports,ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("用户管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{staticClass:"no-margin-left",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/userManagement/create")}}},[e._v("添加用户")])],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 你确定你要删除?")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.handleDelete}},[e._v("确认")])],1)]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"contactName",label:"名称"}}),a("el-table-column",{attrs:{prop:"contactPerson",label:"联系人"}}),a("el-table-column",{attrs:{prop:"userId",label:"登录名"}}),a("el-table-column",{attrs:{prop:"userType",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.userTypeLsit[a.userType]))]}}])}),a("el-table-column",{attrs:{prop:"creditCode",label:"统一社会信用代码"}}),2===e.loggedinUserType?a("el-table-column",{attrs:{label:"操作","class-name":"text-center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[3===i.userType?a("el-button",{staticClass:"no-margin-left",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/userManagement/edit/"+i.id})}}},[e._v("管理")]):e._e(),3===i.userType?a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/userManagement/changePwd/"+i.id})}}},[e._v("修改密码")]):e._e(),3===i.userType?a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.confirmDelete(""+i.id)}}},[e._v("删除")]):e._e()]}}],null,!1,3728902722)}):e._e(),1===e.loggedinUserType||0===e.loggedinUserType?a("el-table-column",{attrs:{label:"操作","class-name":"text-center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/userManagement/edit/"+i.id})}}},[e._v("管理")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/userManagement/changePwd/"+i.id})}}},[e._v("修改密码")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.confirmDelete(""+i.id)}}},[e._v("删除")])]}}],null,!1,2982509082)}):e._e()],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)])},Ea=[],Ua={name:"userManagement",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},dialogVisible:!1,total:0,tableData:[],listLoading:!1,companyProduction:null,userTypeLsit:{1:"市级管理员",2:"乡镇管理员",3:"普通用户"},loggedinUserType:""}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/user/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.companyId===e}));return t?t.companyName:""},confirmDelete:function(e){this.dialogVisible=!0,this.selectedId=e},handleDelete:function(){var e=this;this.dialogVisible=!1,this.listLoading=!0,$().delete("/api/user/delete/"+this.selectedId).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.getData()})).catch((function(e){console.log(e)}))}}},qa=Ua,Ma=Object(u["a"])(qa,ja,Ea,!1,null,null,null),Ya=Ma.exports,Ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加用户")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"登录名：",prop:"userId"}},[a("el-input",{attrs:{placeholder:"例: admin"},model:{value:e.ruleFormValue.userId,callback:function(t){e.$set(e.ruleFormValue,"userId",t)},expression:"ruleFormValue.userId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"名称：",prop:"contactName"}},[a("el-input",{attrs:{placeholder:"例: 管理员"},model:{value:e.ruleFormValue.contactName,callback:function(t){e.$set(e.ruleFormValue,"contactName",t)},expression:"ruleFormValue.contactName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色：",prop:"userType"}},[2===e.loggedinUserType?a("el-select",{staticClass:"w-100",attrs:{disabled:""},model:{value:e.ruleFormValue.userType,callback:function(t){e.$set(e.ruleFormValue,"userType",t)},expression:"ruleFormValue.userType"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.userType,callback:function(t){e.$set(e.ruleFormValue,"userType",t)},expression:"ruleFormValue.userType"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),2===e.ruleFormValue.userType?a("el-form-item",{attrs:{label:"乡镇：",prop:"townId"}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.townId,callback:function(t){e.$set(e.ruleFormValue,"townId",t)},expression:"ruleFormValue.townId"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),3===e.ruleFormValue.userType?a("el-form-item",{attrs:{label:"企业：",prop:"companyId"}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.companyId,callback:function(t){e.$set(e.ruleFormValue,"companyId",t)},expression:"ruleFormValue.companyId"}},e._l(e.companyData,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-tooltip",{attrs:{content:"CapsLock 在",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{type:"password"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.ruleFormValue.password,callback:function(t){e.$set(e.ruleFormValue,"password",t)},expression:"ruleFormValue.password"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系人：",prop:"contactPerson"}},[a("el-input",{model:{value:e.ruleFormValue.contactPerson,callback:function(t){e.$set(e.ruleFormValue,"contactPerson",t)},expression:"ruleFormValue.contactPerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系方式：",prop:"contactWay"}},[a("el-input",{model:{value:e.ruleFormValue.contactWay,callback:function(t){e.$set(e.ruleFormValue,"contactWay",t)},expression:"ruleFormValue.contactWay"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"统一社会信用代码：",prop:"creditCode"}},[a("el-input",{model:{value:e.ruleFormValue.creditCode,callback:function(t){e.$set(e.ruleFormValue,"creditCode",t)},expression:"ruleFormValue.creditCode"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Wa=[],Qa={name:"registerUser",data:function(){var e=function(e,t,a){t.length<3?a(new Error("用户名不能少于3位数字")):a()},t=function(e,t,a){t.length<6?a(new Error("密码不能少于6位数字")):a()};return{capsTooltip:!1,listLoading:!1,ruleFormValue:{creditCode:"",contactName:"",contactPerson:"",contactWay:"",password:"",userId:"",userType:null,townId:null,companyId:null},rules:{creditCode:[{required:!0,message:"请选择",trigger:"change"}],contactName:[{required:!0,message:"请选择",trigger:"change"}],contactPerson:[{required:!0,message:"请选择",trigger:"change"}],contactWay:[{required:!0,message:"请插入",trigger:"change"}],password:[{required:!0,trigger:"change",validator:t}],userId:[{required:!0,trigger:"change",validator:e}],userType:[{required:!0,message:"请选择",trigger:"change"}],townId:[{required:!0,message:"请选择",trigger:"change"}],companyId:[{required:!0,message:"请选择",trigger:"change"}]},options:[{id:1,name:"市级管理员"},{id:2,name:"乡镇管理员"},{id:3,name:"普通用户"}],loggedinUserType:null,township:[],companyData:[]}},created:function(){this.loggedinUserType=j().user().userType,2===this.loggedinUserType&&(this.ruleFormValue.userType=3),this.getTown(),this.getCompanyProduction()},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.listLoading=!0,$().post("/api/user/create",{contactName:t.ruleFormValue.contactName,contactPerson:t.ruleFormValue.contactPerson,contactWay:t.ruleFormValue.contactWay,createUserId:j().user().id,updateUserId:j().user().id,creditCode:t.ruleFormValue.creditCode,id:0,password:t.ruleFormValue.password,userId:t.ruleFormValue.userId,userType:t.ruleFormValue.userType,townId:t.ruleFormValue.townId?t.ruleFormValue.townId:0,companyId:t.ruleFormValue.companyId?t.ruleFormValue.companyId:0}).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/userManagement"})})).catch((function(e){}))}))},getTown:function(){var e=this;this.listLoading=!0,$().get("/api/town/all").then((function(t){e.township=e.township.concat(t),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=this;this.listLoading=!0,$().get("/api/company_production/name").then((function(t){e.companyData=t,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shiftKey,a=e.key;a&&1===a.length&&(this.capsTooltip=!!(t&&a>="a"&&a<="z"||!t&&a>="A"&&a<="Z")),"CapsLock"===a&&!0===this.capsTooltip&&(this.capsTooltip=!1)},goBack:function(){this.$router.go(-1)}}},Ja=Qa,Ha=Object(u["a"])(Ja,Ga,Wa,!1,null,"35060b64",null),Xa=Ha.exports,Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加用户")])],1)],1),this.ruleFormValue.contactName?e._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[e._v("装货...")]),this.ruleFormValue.contactName?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"box"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"登录名：",prop:"userId"}},[a("el-input",{attrs:{placeholder:"例: admin"},model:{value:e.ruleFormValue.userId,callback:function(t){e.$set(e.ruleFormValue,"userId",t)},expression:"ruleFormValue.userId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"名称：",prop:"contactName"}},[a("el-input",{attrs:{placeholder:"例: 管理员"},model:{value:e.ruleFormValue.contactName,callback:function(t){e.$set(e.ruleFormValue,"contactName",t)},expression:"ruleFormValue.contactName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色：",prop:"userType"}},[2===e.loggedinUserType?a("el-select",{staticClass:"w-100",attrs:{disabled:""},model:{value:e.ruleFormValue.userType,callback:function(t){e.$set(e.ruleFormValue,"userType",t)},expression:"ruleFormValue.userType"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.userType,callback:function(t){e.$set(e.ruleFormValue,"userType",t)},expression:"ruleFormValue.userType"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),2===e.ruleFormValue.userType?a("el-form-item",{attrs:{label:"乡镇：",prop:"townId"}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.townId,callback:function(t){e.$set(e.ruleFormValue,"townId",t)},expression:"ruleFormValue.townId"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),3===e.ruleFormValue.userType?a("el-form-item",{attrs:{label:"企业：",prop:"companyId"}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.companyId,callback:function(t){e.$set(e.ruleFormValue,"companyId",t)},expression:"ruleFormValue.companyId"}},e._l(e.companyData,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系人：",prop:"contactPerson"}},[a("el-input",{model:{value:e.ruleFormValue.contactPerson,callback:function(t){e.$set(e.ruleFormValue,"contactPerson",t)},expression:"ruleFormValue.contactPerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系方式：",prop:"contactWay"}},[a("el-input",{model:{value:e.ruleFormValue.contactWay,callback:function(t){e.$set(e.ruleFormValue,"contactWay",t)},expression:"ruleFormValue.contactWay"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"统一社会信用代码：",prop:"creditCode"}},[a("el-input",{model:{value:e.ruleFormValue.creditCode,callback:function(t){e.$set(e.ruleFormValue,"creditCode",t)},expression:"ruleFormValue.creditCode"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1):e._e()])},Za=[],ei={name:"editUser",data:function(){return{listLoading:!0,pageLoading:!1,ruleFormValue:{creditCode:"",contactName:"",contactPerson:"",contactWay:"",userId:"",userType:null,townId:null,companyId:null},rules:{creditCode:[{required:!0,message:"请选择",trigger:"change"}],contactName:[{required:!0,message:"请选择",trigger:"change"}],contactPerson:[{required:!0,message:"请选择",trigger:"change"}],contactWay:[{required:!0,message:"请插入",trigger:"change"}],userType:[{required:!0,message:"请选择",trigger:"change"}],userId:[{required:!0,message:"请选择",trigger:"change"}]},options:[{id:1,name:"市级管理员"},{id:2,name:"乡镇管理员"},{id:3,name:"普通用户"}],loggedinUserType:null,township:[],companyData:[]}},created:function(){this.loggedinUserType=j().user().userType,2===this.loggedinUserType&&(this.ruleFormValue.userType=3),this.selectedId=this.$route.params.id,this.getData(),this.getTown(),this.getCompanyProduction()},methods:{getData:function(){var e=this;$().get("/api/user/get/"+this.selectedId).then((function(t){e.ruleFormValue.contactName=t.contactName,e.ruleFormValue.contactPerson=t.contactPerson,e.ruleFormValue.contactWay=t.contactWay,e.ruleFormValue.creditCode=t.creditCode,e.ruleFormValue.userType=t.userType,e.ruleFormValue.userId=t.userId,e.ruleFormValue.townId=t.townId,e.ruleFormValue.companyId=t.companyId,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;this.listLoading=!0,$().get("/api/town/all").then((function(t){e.township=e.township.concat(t),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=this;this.listLoading=!0,$().get("/api/company_production/name").then((function(t){e.companyData=t,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.pageLoading=!0,$().put("/api/user/update/"+t.selectedId,{contactName:t.ruleFormValue.contactName,contactPerson:t.ruleFormValue.contactPerson,contactWay:t.ruleFormValue.contactWay,updateUserId:j().user().id,creditCode:t.ruleFormValue.creditCode,id:t.selectedId,password:"",userId:t.ruleFormValue.userId,userType:t.ruleFormValue.userType,townId:t.ruleFormValue.townId?t.ruleFormValue.townId:0,companyId:t.ruleFormValue.companyId?t.ruleFormValue.companyId:0}).then((function(e){setTimeout((function(){t.pageLoading=!1}),500),t.$router.push({path:"/userManagement"})})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},ti=ei,ai=Object(u["a"])(ti,Ka,Za,!1,null,"206cd1a0",null),ii=ai.exports,ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改密码")])],1)],1),this.ruleFormValue.contactName?e._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[e._v("装货...")]),this.ruleFormValue.contactName?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"box"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"名称：",prop:"contactName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleFormValue.contactName,callback:function(t){e.$set(e.ruleFormValue,"contactName",t)},expression:"ruleFormValue.contactName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"登录名：",prop:"userId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleFormValue.userId,callback:function(t){e.$set(e.ruleFormValue,"userId",t)},expression:"ruleFormValue.userId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-tooltip",{attrs:{content:"CapsLock 在",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{type:"password"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit("ruleForm")}]},model:{value:e.ruleFormValue.password,callback:function(t){e.$set(e.ruleFormValue,"password",t)},expression:"ruleFormValue.password"}})],1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1):e._e()])},oi=[],li={name:"addThreeProducts",data:function(){var e=function(e,t,a){t.length<6?a(new Error("密码不能少于6位数字")):a()};return{listLoading:!0,pageLoading:!1,ruleFormValue:{contactName:"",password:"",userId:""},capsTooltip:!1,oldPassword:"",rules:{contactName:[{required:!0,message:"请选择",trigger:"change"}],password:[{required:!0,trigger:"change",validator:e}],userId:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.selectedId=this.$route.params.id,this.getData()},methods:{getData:function(){var e=this;$().get("/api/user/get/"+this.selectedId).then((function(t){e.ruleFormValue.contactName=t.contactName,e.ruleFormValue.userId=t.userId,e.oldPassword=t.password})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this,a=j().user();a?this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.pageLoading=!0,$().post("/api/user/changePassword?newPassword="+t.ruleFormValue.password+"&userId="+t.ruleFormValue.userId).then((function(e){setTimeout((function(){t.pageLoading=!1}),500),t.$router.push({path:"/userManagement"})})).catch((function(e){}))})):this.quit()},checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shiftKey,a=e.key;a&&1===a.length&&(this.capsTooltip=!!(t&&a>="a"&&a<="z"||!t&&a>="A"&&a<="Z")),"CapsLock"===a&&!0===this.capsTooltip&&(this.capsTooltip=!1)},goBack:function(){this.$router.go(-1)},quit:function(){var e=this;j().logout(),v.error("未经授权的用户"),setTimeout((function(){e.$router.push({path:"/login"})}),500)}}},ni=li,si=Object(u["a"])(ni,ri,oi,!1,null,"4220ced6",null),ci=si.exports,ui=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("生产标准")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:3}},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/productionStandard/create")}}},[e._v("添加生产标准")]):e._e()],1),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"select_label no-margin-left"},[e._v("标准名称")]),a("el-input",{staticClass:"w-80",model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})],1),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.getList()}}},[e._v("搜索")])],1)],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"productStandard",label:"标准"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(a.productStandard.indexOf("png")>-1?a.productStandard.replace(".png",""):a.productStandard)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"releaseTime",label:"发布时间","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e._f("formatDate")(a.releaseTime))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"releasePerson",label:"发布者"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.isShowEditButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionStandard/detail/"+i.id})}}},[e._v("查看")]):e._e(),""!==i.productionStandardProfiles&&void 0!==i.productionStandardProfiles?a("el-button",{attrs:{disabled:"",size:"small",type:"success",plain:""},on:{click:function(t){return e.downloadStandardProfiles(i.productionStandardProfiles)}}},[e._v("下载")]):e._e(),e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.$router.push({path:"/productionStandard/edit/"+i.id})}}},[e._v("修改")]):e._e()]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},di=[],pi={name:"productStandard",components:{Pagination:_e},data:function(){return{releaseTimeFrom:"",releaseTimeTo:"",page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],productName:"",category:0,isShowAddButton:null,isShowEditButton:null,options:[{id:0,name:"全部"},{id:1,name:"畜牧业"},{id:2,name:"水产业"},{id:3,name:"养殖业"}]}},created:function(){this.getList(),this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addProductionStandard"==e.privilegeCode})),this.isShowEditButton=!!n.a.get("authList").find((function(e){return"editRegulatoryObject"==e.privilegeCode}))},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/production_standard/all",{category:this.category,productName:this.productName,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},downloadStandardProfiles:function(e){var t=this;S()({url:I.DOWNLOAD_URL()+e,method:"GET",responseType:"blob"}).then((function(e){console.log(e.data);var a=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=a,i.target="_blank",i.setAttribute("download",t.data.profile.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},filterCategory:function(e){var t=this.options.find((function(t){return t.id===parseInt(e)}));return t?t.name:""}}},mi=pi,fi=Object(u["a"])(mi,ui,di,!1,null,"52bc3433",null),gi=fi.exports,hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产标准")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"产品名称：",prop:"productId"}},[a("el-select",{staticClass:"w-100",attrs:{loading:e.selloading},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productionList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类别：",prop:"category"}},[a("el-select",{staticClass:"w-80",model:{value:e.ruleFormValue.category,callback:function(t){e.$set(e.ruleFormValue,"category",t)},expression:"ruleFormValue.category"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"发布日期：",prop:"releaseTime"}},[a("el-date-picker",{staticClass:"w-100",attrs:{align:"right",type:"date",placeholder:"开始日期"},model:{value:e.ruleFormValue.releaseTime,callback:function(t){e.$set(e.ruleFormValue,"releaseTime",t)},expression:"ruleFormValue.releaseTime"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发布者：",prop:"releasePerson"}},[a("el-input",{staticClass:"w-80",model:{value:e.ruleFormValue.releasePerson,callback:function(t){e.$set(e.ruleFormValue,"releasePerson",t)},expression:"ruleFormValue.releasePerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"生产标准：",prop:"productionStandard"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.ruleFormValue.productionStandard,callback:function(t){e.$set(e.ruleFormValue,"productionStandard",t)},expression:"ruleFormValue.productionStandard"}})],1)],1)],1),a("el-form-item",{attrs:{label:""}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?a("span",[e._v("("+e._s(e.file.name)+")")]):a("span",[e._v("请选择需要上传的文件...")])])])])],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},bi=[],vi={name:"addProductionStandard",data:function(){return{file:null,productionList:[],selloading:!1,pageLoading:!1,options:[{id:1,name:"畜牧业"},{id:2,name:"水产业"},{id:3,name:"养殖业"}],ruleFormValue:{productId:null,category:null,releaseTime:"",releasePerson:"",productionStandard:""},rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],category:[{required:!0,message:"请选择"}],releaseTime:[{required:!0,message:"请选择"}],releasePerson:[{required:!0,message:"请插入"}],productionStandard:[{required:!0,message:"请选择"}]}}},created:function(){this.getProduction()},methods:{getProduction:function(){var e=this;this.selloading=!0,$().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productionList=t.data,setTimeout((function(){e.selloading=!1}),500)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.pageLoading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/production_standard/create",a).then((function(e){setTimeout((function(){t.pageLoading=!1}),500),t.$router.push({path:"/productionStandard"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",0),e.append("productId",this.ruleFormValue.productId);var t=this.filterProduct(this.ruleFormValue.productId);return e.append("productName",t),this.ruleFormValue.releaseTime=new Date(this.ruleFormValue.releaseTime).toDateString("YYYY-MM-DD"),e.append("category",this.ruleFormValue.category),e.append("releaseTime",this.ruleFormValue.releaseTime),e.append("releasePerson",this.ruleFormValue.releasePerson),e.append("productStandard",this.ruleFormValue.productionStandard),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},filterProduct:function(e){var t=this.productionList.find((function(t){return t.productId===e}));return t?t.productName:""}}},yi=vi,wi=Object(u["a"])(yi,hi,bi,!1,null,null,null),_i=wi.exports,ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产标准")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("详情")])],1)],1),e.listLoading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[e._v("装货...")]):e._e(),e.listLoading?e._e():a("div",{staticClass:"box"},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"产品名称：",prop:"productId"}},[a("el-select",{staticClass:"w-100",attrs:{disabled:""},model:{value:e.data.productId,callback:function(t){e.$set(e.data,"productId",t)},expression:"data.productId"}},e._l(e.productionList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类别：",prop:"category"}},[a("el-select",{staticClass:"w-80",attrs:{disabled:""},model:{value:e.data.category,callback:function(t){e.$set(e.data,"category",t)},expression:"data.category"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"发布日期：",prop:"createTime",disabled:""}},[a("el-date-picker",{staticClass:"w-100",attrs:{align:"right",type:"date",placeholder:"开始日期",disabled:""},model:{value:e.data.releaseTime,callback:function(t){e.$set(e.data,"releaseTime",t)},expression:"data.releaseTime"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发布者：",prop:"releasePerson"}},[a("el-input",{staticClass:"w-80",attrs:{disabled:""},model:{value:e.data.releasePerson,callback:function(t){e.$set(e.data,"releasePerson",t)},expression:"data.releasePerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"生产标准：",prop:"productionStandard"}},[a("el-input",{attrs:{type:"textarea",rows:"5",disabled:""},model:{value:e.data.productStandard,callback:function(t){e.$set(e.data,"productStandard",t)},expression:"data.productStandard"}})],1)],1)],1),a("el-form-item",{attrs:{label:""}},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{size:"small",type:"warning",plain:"",disabled:!e.data.productionStandardProfiles},on:{click:function(t){return e.downloadFile()}}},[e._v("附件下载")]),e.data.productionStandardProfiles?a("span",{staticClass:"margin-left-20"},[e._v(e._s(e.data.productionStandardProfiles.replace("/uploads/","")))]):a("span",{staticClass:"margin-left-20"},[e._v("没有数据")])],1)],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)])},Ci=[],xi={name:"detailProdcutionStandard",data:function(){return{file:null,listLoading:!1,productionList:[],data:[],options:[{id:"1",name:"畜牧业"},{id:"2",name:"水产业"},{id:"3",name:"养殖业"}]}},created:function(){this.getProduction(),this.getData(this.$route.params.id)},methods:{getProduction:function(){var e=this;$().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productionList=t.data})).catch((function(e){console.log(e)}))},getData:function(e){var t=this;this.listLoading=!0,$().get("/api/production_standard/get/"+e).then((function(e){t.data=e,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.data.productionStandardProfiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.data.productionStandardProfiles.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},Si=xi,Fi=Object(u["a"])(Si,ki,Ci,!1,null,null,null),Ii=Fi.exports,Di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产标准")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改生产标准")])],1)],1),e.listLoading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[e._v("装货...")]):a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],ref:"dataFormRef",attrs:{model:e.dataForm,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"产品名称：",prop:"productId"}},[a("el-select",{staticClass:"w-100",model:{value:e.dataForm.productId,callback:function(t){e.$set(e.dataForm,"productId",t)},expression:"dataForm.productId"}},e._l(e.productionList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类别：",prop:"category"}},[a("el-select",{staticClass:"w-80",model:{value:e.dataForm.category,callback:function(t){e.$set(e.dataForm,"category",t)},expression:"dataForm.category"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"发布日期：",prop:"createTime"}},[a("el-date-picker",{staticClass:"w-100",attrs:{align:"right",type:"date",placeholder:"开始日期"},model:{value:e.dataForm.releaseTime,callback:function(t){e.$set(e.dataForm,"releaseTime",t)},expression:"dataForm.releaseTime"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发布者：",prop:"releasePerson"}},[a("el-input",{staticClass:"w-80",model:{value:e.dataForm.releasePerson,callback:function(t){e.$set(e.dataForm,"releasePerson",t)},expression:"dataForm.releasePerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"生产标准：",prop:"productStandard"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.dataForm.productStandard,callback:function(t){e.$set(e.dataForm,"productStandard",t)},expression:"dataForm.productStandard"}})],1)],1)],1),a("el-form-item",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.dataForm.productionStandardProfiles?a("el-link",{staticClass:"margin-left-20",on:{click:function(t){return e.downloadFile()}}},[e._v(e._s(e.dataForm.productionStandardProfiles.indexOf("jiangsu")>-1?e.dataForm.productionStandardProfiles.replace("/jiangsu/",""):e.dataForm.productionStandardProfiles.replace("/suzhou/","")))]):a("span",{staticClass:"margin-left-20"},[e._v("没有数据")])],1)])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dataFormRef")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Ti=[],Vi={name:"editProdcutionStandard",data:function(){return{file:null,productionList:[],pageLoading:!1,listLoading:!1,options:[{id:"1",name:"畜牧业"},{id:"2",name:"水产业"},{id:"3",name:"养殖业"}],dataForm:null,rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],category:[{required:!0,message:"请选择"}],releaseTime:[{required:!0,message:"请选择"}],releasePerson:[{required:!0,message:"请插入"}],productStandard:[{required:!0,message:"请插入"}]}}},created:function(){this.getData(this.$route.params.id),this.getProduction()},methods:{getProduction:function(){var e=this;$().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productionList=t.data})).catch((function(e){console.log(e)}))},getData:function(e){var t=this;this.listLoading=!0,$().get("/api/production_standard/get/"+e).then((function(a){t.dataForm=a;var i=new FormData;i.append("visitCount",a.visitCount+1),i.append("id",a.id),i.append("productName",a.productName),i.append("category",a.category),a.releaseTime&&i.append("releaseTime",new Date(a.releaseTime)),i.append("releasePerson",a.releasePerson),i.append("productStandard",a.productStandard),i.append("productionStandardProfiles",a.productionStandardProfiles),i.append("productId",a.productId),a.createUserId&&i.append("createUserId",a.createUserId),a.updateTime&&i.append("updateTime",a.updateTime),a.updateUserId&&i.append("updateUserId",a.updateUserId),$().put("/api/production_standard/update/"+e,i).then((function(e){})).catch((function(e){console.log(e)})),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.dataForm.productionStandardProfiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.dataForm.productionStandardProfiles.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.pageLoading=!0;var a=new FormData;a=t.makeFormData(),$().put("/api/production_standard/update/"+t.dataForm.id,a).then((function(e){setTimeout((function(){t.pageLoading=!1}),500),t.$router.push({path:"/productionStandard"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",this.$route.params.id),e.append("productId",this.dataForm.productId);var t=this.filterProduct(this.dataForm.productId);return e.append("productName",t),e.append("category",this.dataForm.category),this.dataForm.releaseTime=new Date(this.dataForm.releaseTime).toDateString("YYYY-MM-DD"),e.append("releaseTime",this.dataForm.releaseTime),e.append("releasePerson",this.dataForm.releasePerson),e.append("productStandard",this.dataForm.productStandard),e.append("productionStandardProfiles",this.dataForm.productionStandardProfiles),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.dataForm.productionStandardProfiles="/uploads/"+this.file.name},filterProduct:function(e){var t=this.productionList.find((function(t){return t.productId===e}));return t?t.productName:""}}},Li=Vi,Ni=Object(u["a"])(Li,Di,Ti,!1,null,null,null),$i=Ni.exports,Pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[e.isEnterprise>-1?a("el-breadcrumb-item",{staticClass:"actived"},[e._v("内部资料")]):a("el-breadcrumb-item",{staticClass:"actived"},[e._v("共享文件")])],1)],1),a("div",{staticClass:"box"},[e.isShowAddButton?a("div",{staticClass:"iptBox"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/shareFiles/create")}}},[e._v("新建文件夹")])],1)],1)],1):e._e(),a("el-container",[a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 你确定你要删除?")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.handleDelete}},[e._v("确认")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","class-name":"text-center"}}),a("el-table-column",{attrs:{prop:"title",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e._f("formatDate")(a.createTime))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"creater",label:"创建者"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/shareFiles/detail/"+i.id})}}},[e._v("查看")]),e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/shareFiles/edit/"+i.id,query:{id:i.id}})}}},[e._v("修改")]):e._e(),e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.confirmDelete(i.id)}}},[e._v("删除")]):e._e()]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},zi=[],Ai={name:"workTask",components:{Pagination:_e},data:function(){return{releaseTimeFrom:"",releaseTimeTo:"",page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],isShowAddButton:null,dialogVisible:!1,selectedId:null,isEnterprise:""}},created:function(){this.getList(),this.isEnterprise=n.a.get("authData").indexOf("ent"),this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addShareFiles"==e.privilegeCode}))},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/shareFiles/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},confirmDelete:function(e){this.dialogVisible=!0,this.selectedId=e},handleDelete:function(){var e=this;this.dialogVisible=!1,this.listLoading=!0,$().delete("/api/shareFiles/delete/"+this.selectedId).then((function(t){e.listLoading=!1,e.getList()})).catch((function(e){console.log(e)}))}}},Ri=Ai,Bi=Object(u["a"])(Ri,Pi,zi,!1,null,"69ecba1f",null),Oi=Bi.exports,ji=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[e.isEnterprise>-1?a("el-breadcrumb-item",[e._v("内部资料")]):a("el-breadcrumb-item",[e._v("共享文件")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("新建文件夹")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"文件夹名称",prop:"fileName"}},[a("el-input",{model:{value:e.ruleFormValue.fileName,callback:function(t){e.$set(e.ruleFormValue,"fileName",t)},expression:"ruleFormValue.fileName"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"创建者",prop:"creater"}},[a("el-input",{model:{value:e.ruleFormValue.creater,callback:function(t){e.$set(e.ruleFormValue,"creater",t)},expression:"ruleFormValue.creater"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"是否可见",prop:"isVisible"}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.isVisible,callback:function(t){e.$set(e.ruleFormValue,"isVisible",t)},expression:"ruleFormValue.isVisible"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Ei=[],Ui={name:"addSharedFiles",data:function(){return{isEnterprise:"",listLoading:!1,userId:null,options:[{id:0,name:"不可见"},{id:2,name:"可见"}],ruleFormValue:{fileName:null,creater:null,isVisible:0},rules:{fileName:[{required:!0,message:"请插入",trigger:"change"}],creater:[{required:!0,message:"请插入"}],isVisible:[{required:!0,message:"请选择"}]}}},created:function(){this.isEnterprise=n.a.get("authData").indexOf("ent"),this.userId=j().user().id},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new Date;$().post("/api/shareFiles/create",{createTime:a,createUserId:t.userId,creater:t.ruleFormValue.creater,fileName:t.ruleFormValue.fileName,id:0,isVisible:t.ruleFormValue.isVisible,updateTime:a,updateUserId:t.userId}).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/shareFiles"})})).catch((function(e){console.log(e)}))}}))}}},qi=Ui,Mi=Object(u["a"])(qi,ji,Ei,!1,null,null,null),Yi=Mi.exports,Gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[e.isEnterprise>-1?a("el-breadcrumb-item",[e._v("内部资料")]):a("el-breadcrumb-item",[e._v("共享文件")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改文件夹")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"文件夹名称",prop:"fileName"}},[a("el-input",{model:{value:e.ruleFormValue.fileName,callback:function(t){e.$set(e.ruleFormValue,"fileName",t)},expression:"ruleFormValue.fileName"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"创建者",prop:"creater"}},[a("el-input",{model:{value:e.ruleFormValue.creater,callback:function(t){e.$set(e.ruleFormValue,"creater",t)},expression:"ruleFormValue.creater"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"是否可见",prop:"isVisible"}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue.isVisible,callback:function(t){e.$set(e.ruleFormValue,"isVisible",t)},expression:"ruleFormValue.isVisible"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Wi=[],Qi={name:"addSharedFiles",data:function(){return{listLoading:!1,userId:null,id:null,isEnterprise:"",options:[{id:0,name:"不可见"},{id:2,name:"可见"}],ruleFormValue:{fileName:null,creater:null,isVisible:0},rules:{fileName:[{required:!0,message:"请插入",trigger:"change"}],creater:[{required:!0,message:"请插入"}],isVisible:[{required:!0,message:"请选择"}]}}},created:function(){this.isEnterprise=n.a.get("authData").indexOf("ent"),this.userId=j().user().id,this.id=this.$route.params.id,this.getData()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/shareFiles/get/"+this.id).then((function(t){e.ruleFormValue.fileName=t.fileName,e.ruleFormValue.creater=t.creater,e.ruleFormValue.isVisible=t.isVisible,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new Date;$().put("/api/shareFiles/update/"+t.id,{creater:t.ruleFormValue.creater,fileName:t.ruleFormValue.fileName,id:0,isVisible:t.ruleFormValue.isVisible,updateTime:a,updateUserId:t.userId}).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/shareFiles"})})).catch((function(e){console.log(e)}))}}))}}},Ji=Qi,Hi=Object(u["a"])(Ji,Gi,Wi,!1,null,null,null),Xi=Hi.exports,Ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[e.isEnterprise>-1?a("el-breadcrumb-item",[e._v("内部资料")]):a("el-breadcrumb-item",[e._v("共享文件")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("会议文件")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.openDialog=!0}}},[e._v("上传文件")]),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-col",{staticClass:"margin-left-20 flex-center",attrs:{span:5}},[a("div",{staticClass:"inline-block-IE"},[e._v("搜索")]),a("el-input",{staticClass:"w-80 margin-left-10",model:{value:e.uploadCompany,callback:function(t){e.uploadCompany=t},expression:"uploadCompany"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.getList()}}},[e._v("搜索")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 你确定你要删除?")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.handleDelete}},[e._v("确认")])],1)]),a("el-dialog",{attrs:{visible:e.openDialog,width:"60%"},on:{"update:visible":function(t){e.openDialog=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 margin-left-30",attrs:{span:3}},[e._v("文件上传")])],1),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleFormValue,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"上传单位",prop:"uploadCompany"}},[a("el-input",{model:{value:e.ruleFormValue.uploadCompany,callback:function(t){e.$set(e.ruleFormValue,"uploadCompany",t)},expression:"ruleFormValue.uploadCompany"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"上传者",prop:"uploadPerson"}},[a("el-input",{model:{value:e.ruleFormValue.uploadPerson,callback:function(t){e.$set(e.ruleFormValue,"uploadPerson",t)},expression:"ruleFormValue.uploadPerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:15}},[a("div",{staticClass:"item margin-left-30",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?a("span",[e._v("("+e._s(e.file.name)+")")]):a("span",[e._v("请选择需要上传的文件...")])])])])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){e.openDialog=!1}}},[e._v("取消")])],1)],1)],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"uploadProfile",label:"文件名","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.getFileName(a.uploadProfile)))]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{prop:"uploadCompany",label:"上传单位"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.downloadFile(i.uploadProfile)}}},[e._v("下载")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.confirmDelete(i.id)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Zi=[],er={name:"workTask",components:{Pagination:_e},data:function(){return{isEnterprise:"",openDialog:!1,dialogVisible:!1,uploadCompany:"",shareFilesId:null,selectedId:null,userId:null,page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],file:null,options:[{id:0,name:"不可见"},{id:2,name:"可见"}],ruleFormValue:{uploadCompany:null,uploadPerson:null},rules:{uploadCompany:[{required:!0,message:"请插入",trigger:"change"}],uploadPerson:[{required:!0,message:"请插入"}]}}},created:function(){this.isEnterprise=n.a.get("authData").indexOf("ent"),this.shareFilesId=this.$route.params.id,this.getList(),this.userId=j().user().id},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/shareFilesRecord/all",{uploadCompany:this.uploadCompany,shareFilesId:this.shareFilesId,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.openDialog=!1,t.listLoading=!0;var a=new FormData,i=new Date;a.append("createTime",i),a.append("createUserId",t.userId),a.append("file",t.file),a.append("id",0),a.append("shareFilesId",t.shareFilesId),a.append("updateTime",i),a.append("updateUserId",t.userId),a.append("uploadCompany",t.ruleFormValue.uploadCompany),a.append("uploadPerson",t.ruleFormValue.uploadPerson),a.append("uploadProfile",""),$().post("/api/shareFilesRecord/create",a).then((function(e){t.getList(),t.ruleFormValue.uploadCompany="",t.ruleFormValue.uploadPerson=""})).catch((function(e){console.log(e)}))}}))},getFileName:function(e){return e?e.replace("/uploads/",""):""},handleDelete:function(){var e=this;this.dialogVisible=!1,this.listLoading=!0,$().delete("/api/shareFilesRecord/delete/"+this.selectedId).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.getList()})).catch((function(e){console.log(e)}))},downloadFile:function(e){console.log(e),S()({url:I.DOWNLOAD_URL()+e,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},confirmDelete:function(e){this.dialogVisible=!0,this.selectedId=e},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}},tr=er,ar=Object(u["a"])(tr,Ki,Zi,!1,null,"8997d416",null),ir=ar.exports,rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("专项：绿色优质农产品生产基地")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[a("div",{staticClass:"row year-select-panel"},[a("el-form-item",{attrs:{label:"年度"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{disabled:!(e.options.length>0)},on:{change:function(t){return e.getYear()}},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1),a("div",{staticClass:"cate-content-panel"},[a("div",{staticClass:"cate-item-panel inline-block-IE"},[a("el-form-item",{attrs:{label:"巡查"}},[e._v("("+e._s(e.tableData.length)+")")]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"createTime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{prop:"township",label:"乡镇"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n                  "+e._s(e.filterTownship(a.townId))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"inspector",label:"检查人"}}),a("el-table-column",{attrs:{prop:"unitinspec",label:"检查单位"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n                  "+e._s(e.getCompanyName(a.companyId))+"\n                ")]}}])})],1)],1)],1),a("div",{staticClass:"cate-item-panel inline-block-IE"},[a("el-form-item",{attrs:{label:"检测"}},[e._v("("+e._s(e.detectTableData.length)+")")]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.detectTableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.detectTime)))]}}])}),a("el-table-column",{attrs:{label:"项目"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.item))]}}])}),a("el-table-column",{attrs:{label:"样品"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.sample))]}}])}),a("el-table-column",{attrs:{label:"结果"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.resultDxDesc))]}}])})],1)],1)],1),a("div",{staticClass:"cate-item-panel inline-block-IE"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-form-item",{staticClass:"margin-bottom-reverse-40",attrs:{label:"培训记录"}}),a("div",{staticClass:"inline-block-IE align-right-IE"},[e.isShowAddButton?e._e():a("el-button",{staticClass:"margin-bottom-22",attrs:{size:"small",type:"danger",plain:"",disabled:!(e.trainTableData.length>0)},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("删除")]),e.trainTableData.length>0?a("el-checkbox",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{"true-label":"1","false-label":"0"},on:{change:e.showCheckbox},model:{value:e.isShowCheckbox,callback:function(t){e.isShowCheckbox=t},expression:"isShowCheckbox"}}):e._e()],1),e.isShowAddButton?a("el-button",{staticClass:"inline-block-IE float-right-IE",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/trainingFunds"})}}},[e._v("添加附件")]):e._e()],1),a("el-container",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.trainTableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[0!=e.isShowCheckbox?a("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-checkbox",{staticStyle:{"margin-left":"auto"},attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i.id)}},model:{value:e.checked[i.id],callback:function(t){e.$set(e.checked,i.id,t)},expression:"checked[row.id]"}})]}}],null,!1,574067976)}):e._e(),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{label:"乡镇"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n                  "+e._s(e.getTownName(a.companyId))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"文件"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plainv:""},on:{click:function(t){return e.downloadFile(i.trainingFundsProfiles)}}},[e._v("下载附件")])]}}])})],1)],1)],1)])])],1)])},or=[],lr={name:"specialCategory",data:function(){return{loggedinUserType:null,total:0,trainTotal:0,detectTotal:0,tableData:[],trainTableData:[],detectTableData:[],listLoading:!0,companyList:[],companyId:0,companyName:"",township:[],townName:"",year:"",supervisionRecordTimeFrom:"",supervisionRecordTimeTo:"",detectTimeFrom:"",detectTimeTo:"",createTimeFrom:"",createTimeTo:"",specialFlag:-1,options:[{value:"2018"},{value:"2019"},{value:"2020"},{value:"2021"},{value:"2022"},{value:"2023"}],isShowCheckbox:0,selectedRows:[],checked:[],isShowAddButton:null}},created:function(){this.companyId=0,this.specialFlag=1,this.supervisionRecordTimeFrom="",this.supervisionRecordTimeTo="",this.detectTimeFrom="",this.detectTimeTo="",this.getList(),this.getDetectList(),this.getTrainList(),this.getTown(),this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addTrainingFunds"==e.privilegeCode}))},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/supervision_record/all",{companyId:this.companyId,specialFlag:this.specialFlag,supervisionRecordTimeFrom:this.supervisionRecordTimeFrom,supervisionRecordTimeTo:this.supervisionRecordTimeTo,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getDetectList:function(){var e=this;this.listLoading=!0,$().get("/api/disability_check/all",{specialFlag:this.specialFlag,detectTimeFrom:this.detectTimeFrom,detectTimeTo:this.detectTimeTo,sortBy:"id"}).then((function(t){e.detectTableData=t.data,e.detectTotal=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTrainList:function(){var e=this;$().get("/api/training_funds/all",{specialFlag:this.specialFlag,createTimeFrom:this.createTimeFrom,createTimeTo:this.createTimeTo,sortBy:"id"}).then((function(t){e.trainTableData=t.data,e.trainTotal=t.total})).catch((function(e){console.log(e)}))},getYear:function(){this.supervisionRecordTimeFrom=this.year+"-01-01 00:00:00",this.supervisionRecordTimeTo=this.year+"-12-31 00:00:00",this.detectTimeFrom=this.year+"-01-01 00:00:00",this.detectTimeTo=this.year+"-12-31 00:00:00",this.createTimeFrom=this.year+"-01-01 00:00:00",this.createTimeTo=this.year+"-12-31 00:00:00",this.tableData=[],this.detectTableData=[],this.total=[],this.detectTotal=[],this.getList(),this.getDetectList()},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getCompanyName:function(e){var t=this;return $().get("/api/company_production/name",{companyId:e}).then((function(e){t.companyName=e[0].companyName})).catch((function(e){console.log(e)})),this.companyName},getTownName:function(e){var t=this;return $().get("/api/company_production/name",{companyId:e}).then((function(e){t.townName=t.filterTownship(e[0].townId)})).catch((function(e){console.log(e)})),this.townName},filterTownship:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.name:""},filterCompanyName:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.companyName:""},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},downloadFile:function(e){S()({url:I.DOWNLOAD_URL()+e,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),this.checked[e]&&this.selectedRows.push(e)},updateSelectedRows:function(){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){for(var t in e.listLoading=!0,e.selectedRows){var a=0;$().put("/api/training_funds/update_special_flag/"+e.selectedRows[t]+"/"+a).then((function(t){e.selectedRows=[],e.checked=[],e.isShowCheckbox=0,e.getTrainList(),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))}}))},showCheckbox:function(){1==this.isShowCheckbox&&(this.selectedRows=[],this.checked=[])}}},nr=lr,sr=(a("cd02"),Object(u["a"])(nr,rr,or,!1,null,null,null)),cr=sr.exports,ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("信用评级")])],1)],1),a("div",{staticClass:"box"},[e.isShowAddButton?a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label no-margin-left"},[e._v("乡镇")]),a("el-select",{attrs:{placeholder:""},on:{change:e.getList},model:{value:e.currTown,callback:function(t){e.currTown=t},expression:"currTown"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("div",{staticClass:"select_label"},[e._v("状态")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getList},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.appStatus,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1),e.isShowAddButton?a("div",{staticClass:"select_label"},[a("el-button",{attrs:{size:"small",disabled:"",type:"primary",plain:""}},[e._v("同步数据")])],1):e._e()],1):e._e(),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{label:"名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.filterCompnay(a.creditCode))+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"原信用评级"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-rate",{attrs:{value:e.getGradeString(i.originalGrade),max:e.getGradeString(i.originalGrade),texts:["C级（失信）","B级（基本守信）","A级（守信）"],colors:e.colors,disabled:"","show-text":""}})]}}])}),a("el-table-column",{attrs:{label:"现信用评级"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-rate",{attrs:{value:e.getGradeString(i.nowGrade),max:e.getGradeString(i.nowGrade),texts:["C级（失信）","B级（基本守信）","A级（守信）"],colors:e.colors,disabled:"","show-text":""}})]}}])}),a("el-table-column",{attrs:{prop:"gradeTime",label:"评级时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e._f("formatDate")(a.gradeTime))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"creditAvailableStart",label:"评级有效期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e._f("formatDate")(a.creditAvailableStart))+"至"+e._s(e._f("formatDate")(a.creditAvailableEnd))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"gradeUnit",label:"评级单位"}}),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.getStatus(a.approvalStatus))+"\n          ")]}}])}),e.isShowAddButton?a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.isShowDetail?a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.push("/creditRating/"+i.creditGradeId)}}},[e._v("查看")]):e._e(),e.isShowEditButton?a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){e.$router.push({path:"/creditRating/edit/"+i.creditGradeId,query:{company:e.filterCompnay(i.creditCode)}})}}},[e._v("修改评级")]):e._e()]}}],null,!1,901632052)}):e._e()],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},dr=[],pr={name:"creditRating",components:{Pagination:_e},data:function(){return{township:[{id:0,name:"全部"}],currTown:0,appStatus:["全部","待审批","已同意","已拒绝"],status:0,page:{pageIndex:1,pageSize:20},companyProduction:[],listLoading:!0,total:100,tableData:[],isShowAddButton:null,isShowEditButton:null,isShowDetail:null,colors:{1:"#f00",2:"#F7BA2A",3:"#0f0"}}},created:function(){this.isShowAddButton=!!n.a.get("authList").find((function(e){return"synccreditRating"==e.privilegeCode})),this.isShowEditButton=!!n.a.get("authList").find((function(e){return"editCreditRating"==e.privilegeCode})),this.isShowDetail=!!n.a.get("authList").find((function(e){return"detailCreditRating"==e.privilegeCode})),this.getTown(),this.getList(),this.getCompanyProduction()},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getList:function(){var e=this;this.listLoading=!0,$().get("/api/company_credit_grade/all",{approvalStatus:this.status-1,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,townId:this.currTown,sortBy:"creditGradeId"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getStatus:function(e){var t=parseInt(e);return this.appStatus[t+1]},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.creditCode===e}));return t?t.companyName:""},getGradeString:function(e){var t="";switch(e){case"A":t=3;break;case"B":t=2;break;case"C":t=1;break;default:t=3}return t},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},mr=pr,fr=Object(u["a"])(mr,ur,dr,!1,null,null,null),gr=fr.exports,hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改评级")])],1)],1),a("div",{staticClass:"box"},[e.data?a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.updateLoading,expression:"updateLoading"}]},[a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("状态")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.allStatus[e.data.approvalStatus]))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item inline-block-IE"},[a("div",{staticClass:"item-label"},[e._v("评级时间")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.gradeTime))])]),a("div",{staticClass:"item inline-block-IE"},[a("div",{staticClass:"item-label"},[e._v("名称")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.companyName))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("原信用评级")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.options[e.grades.indexOf(e.data.originalGrade)]))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("现信用评级")]),a("div",{staticClass:"item-value"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.data.nowGrade,callback:function(t){e.$set(e.data,"nowGrade",t)},expression:"data.nowGrade"}},e._l(e.options,(function(t,i){return a("el-option",{key:t,attrs:{label:t,value:e.grades[i]}})})),1)],1)])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("评级单位")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.gradeUnit))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),e.file?e._e():a("div",{staticClass:"item-value"},[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n              "+e._s(e.data.uploadFileName.replace("/uploads/",""))+"\n            ")])],1),e.file?a("div",{staticClass:"item-value"},[e._v("("+e._s(e.file.name)+")")]):e._e()])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.saveChanges()}}},[e._v("保存修改")])],1),a("div",{staticClass:"item-value"},[a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)])])]):e._e(),e.data?e._e():a("el-form",[e._v("装货...")])],1)])},br=[],vr={name:"EditRating",data:function(){return{updateLoading:!1,id:-1,file:null,pageName:this.$route.name,data:null,grades:["A","B","C"],options:["A级（守信）","B级（基本守信）","C级（失信）"],allStatus:["待审批","已同意","已拒绝"],companyName:""}},created:function(){this.companyName=this.$route.query.company,this.id=this.$route.params.id,this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;$().get("/api/company_credit_grade/get/"+e).then((function(e){t.data=e})).catch((function(e){console.log(e)}))},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},saveChanges:function(e){var t=this;this.updateLoading=!0;var a=new FormData;a.append("updatedNowGrade",this.data.nowGrade),a.append("id",this.data.creditGradeId),this.file&&a.append("file",this.file),a.append("data",this.data),$().put("/api/company_credit_grade/update/"+this.data.creditGradeId,a).then((function(e){t.saveChangeUpdateGrade()})).catch((function(e){}))},saveChangeUpdateGrade:function(){var e=this,t=[];t.push({approvalStatus:2,creditCode:this.data.creditCode,grade:this.data.nowGrade}),$().put("/api/company_production/updateGrade/"+this.data.creditCode+"?approvalStatus=2&grade"+this.data.nowGrade).then((function(t){e.updateLoading=!1,e.$router.push({path:"/creditRating"})})).catch((function(e){}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.data.uploadFileName,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.data.uploadFileName.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},yr=vr,wr=(a("9a32"),Object(u["a"])(yr,hr,br,!1,null,"5997b4da",null)),_r=wr.exports,kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("经营主体")])],1)],1),a("div",{staticClass:"box"},[e.data?[a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("状态")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.approvalStatus))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item inline-block-IE"},[a("div",{staticClass:"item-label"},[e._v("评级时间")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.gradeTime))])]),a("div",{staticClass:"item inline-block-IE"},[a("div",{staticClass:"item-label"},[e._v("名称")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.approvalGrade))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("原信用评级")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.originalGrade))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("现信用评级")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.nowGrade))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("评级单位")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.gradeUnit))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[a("el-button",{attrs:{size:"small",type:"warning",plain:"",variant:"outline-dark"}},[e._v("下载附件")])],1),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.creditCode))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("同意")])],1),a("div",{staticClass:"item-value"},[a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("拒绝")])],1)])])]:e._e(),e.data?e._e():[e._v("装货...")]],2)])},Cr=[],xr=(a("20d6"),[{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"},{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"}]),Sr={name:"detailsRating",data:function(){return{id:-1,pageName:this.$route.name,datas:xr,data:null}},created:function(){var e=this;this.id=this.$route.params.id;var t=this.datas.findIndex((function(t){return t.creditGradeId==e.id}));t>=0&&(this.data=this.datas[t])}},Fr=Sr,Ir=(a("34fb"),Object(u["a"])(Fr,kr,Cr,!1,null,"40458c0d",null)),Dr=Ir.exports,Tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("企业信用档案")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label"},[e._v("乡镇")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getList()}},model:{value:e.currTown,callback:function(t){e.currTown=t},expression:"currTown"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("div",{staticClass:"select_label"},[e._v("类型")]),a("el-radio",{attrs:{label:"1"},on:{change:function(t){return e.getList(!0)}},model:{value:e.bTypes,callback:function(t){e.bTypes=t},expression:"bTypes"}},[e._v("企业")]),a("el-radio",{attrs:{label:"2"},on:{change:function(t){return e.getList(!0)}},model:{value:e.bTypes,callback:function(t){e.bTypes=t},expression:"bTypes"}},[e._v("农户")]),a("div",{staticClass:"select_label"},[e._v("行政许可")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.onSelectFilterPub},model:{value:e.plCount,callback:function(t){e.plCount=t},expression:"plCount"}},e._l(e.publicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("div",{staticClass:"select_label"},[e._v("行政处罚")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.onSelectFilterPub},model:{value:e.ppCount,callback:function(t){e.ppCount=t},expression:"ppCount"}},e._l(e.publicOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e.isShowAddButton?a("div",{staticClass:"select_label"},[a("el-button",{attrs:{size:"small",type:"primary",disabled:"",plain:""},on:{click:function(t){return e.getList()}}},[e._v("导入")])],1):e._e()],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),e.isShowEditButton?a("el-table-column",{attrs:{label:"企业名称",width:"150",prop:"companyName"}}):e._e(),e.isShowDetail?a("el-table-column",{attrs:{label:"名称",width:"150",prop:"companyName"}}):e._e(),e.isShowEditButton?a("el-table-column",{attrs:{prop:"creditCode",label:"统一社会信用代码"}}):e._e(),e.isShowDetail?a("el-table-column",{attrs:{prop:"creditCode",label:"信用代码"}}):e._e(),a("el-table-column",{attrs:{prop:"plCount",label:"行政许可信息","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.plCount>0?a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/corporateCreditFile/adminLicenseInfo",query:{creditCode:i.creditCode}})}}},[e._v("行政许可信息")]):a("el-button",{attrs:{size:"small",disabled:"",type:"success",plain:""}},[e._v("     无     ")])]}}])}),a("el-table-column",{attrs:{prop:"ppCount",label:"行政处罚信息","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.ppCount>0?a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/corporateCreditFile/adminPenaltyInfo",query:{creditCode:i.creditCode}})}}},[e._v("行政处罚信息")]):a("el-button",{attrs:{size:"small",disabled:"",type:"success",plain:""}},[e._v("     无     ")])]}}])}),a("el-table-column",{attrs:{label:"评级信息"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticClass:"rating-action",on:{click:function(t){return e.$router.push({path:"/corporateCreditFile/ratingInfo",query:{creditCode:i.creditCode}})}}},[a("el-rate",{attrs:{value:e.getGradeString(i.grade),max:e.getGradeString(i.grade),texts:["C:失信","B:基本守信","A:守信"],colors:e.colors,disabled:"","show-text":""}})],1)]}}])}),a("el-table-column",{attrs:{label:"三品一标认证",width:"200","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/corporateCreditFile/threeProduction",query:{creditCode:i.creditCode}})}}},[e._v("三品一标")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Vr=[],Lr={name:"creditRating",components:{Pagination:_e},data:function(){return{township:[{id:0,name:"全部"}],publicOptions:[{id:0,name:"全部"},{id:1,name:"有"},{id:2,name:"无"}],currTown:0,isShowAddButton:null,isShowEditButton:null,isShowDetail:null,plCount:0,ppCount:0,page:{pageIndex:1,pageSize:20},listLoading:!0,bTypes:0,status:0,total:0,tableData:[],tableDataOrigin:[],companyProduction:[],gradData:[],loggedinUserType:null,colors:{1:"#f00",2:"#F7BA2A",3:"#0f0"}}},mounted:function(){this.getTown(),this.getList(),this.getCompanyProduction()},created:function(){this.isShowAddButton=!!n.a.get("authList").find((function(e){return"searchcorporateCreditFile"==e.privilegeCode})),this.isShowEditButton=!!n.a.get("authList").find((function(e){return"editRegulatoryObject"==e.privilegeCode})),this.isShowDetail=!!n.a.get("authList").find((function(e){return"detailCreditRating"==e.privilegeCode}))},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},onSelectFilterPub:function(){var e=this.tableDataOrigin;1==this.plCount?e=e.filter((function(e){return e.plCount>0})):2==this.plCount&&(e=e.filter((function(e){return null==e.plCount||0==e.plCount}))),1==this.ppCount?e=e.filter((function(e){return e.ppCount>0})):2==this.ppCount&&(e=e.filter((function(e){return null==e.ppCount||0==e.ppCount}))),this.tableData=[],this.tableData=e},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getList:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.listLoading=!0,$().get("/api/company_production/getCreditList",{companyType:this.bTypes,townId:this.currTown}).then((function(t){e.tableDataOrigin=t,e.tableData=t,e.total=e.tableData.length,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(t){console.log(t),e.tableData=[],e.srcData=[],e.total=0,setTimeout((function(){e.listLoading=!1}),500)}))},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.creditCode===e}));return t?t.companyName:""},getNowGrade:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(t,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="",i=a&&a.length?a.pop().nowGrade:"",e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),getGradeString:function(e){var t="";switch(e){case"A":t=3;break;case"B":t=2;break;case"C":t=1;break;default:t=3}return t},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Nr=Lr,$r=(a("b2c3"),Object(u["a"])(Nr,Tr,Vr,!1,null,"2ef0bc0c",null)),Pr=$r.exports,zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("行政处罚信息")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label no-margin-left"},[e._v("稻米专业合作社")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"docCode",label:"行政许可决定书文号",width:"250"}}),a("el-table-column",{attrs:{prop:"punishName",label:"处罚名称",width:"150"}}),a("el-table-column",{attrs:{prop:"addressCode!!!",label:"行政许可编码",width:"150"}}),a("el-table-column",{attrs:{prop:"punishTypeF",label:"处罚类别1",width:"150"}}),a("el-table-column",{attrs:{prop:"punishTypeS",label:"处罚类别2",width:"150"}}),a("el-table-column",{attrs:{prop:"punishReason",label:"处罚事由",width:"450"}}),a("el-table-column",{attrs:{prop:"punishFoundation",label:"处罚依据",width:"150"}}),a("el-table-column",{attrs:{prop:"punishObjectName",label:"行政相对人名称",width:"200"}}),a("el-table-column",{attrs:{prop:"creditCode",label:"统一社会信用代码",width:"200"}}),a("el-table-column",{attrs:{prop:"businessRegisterCode",label:"工商登记码",width:"150"}}),a("el-table-column",{attrs:{prop:"organizationCode",label:"组织机构代码",width:"150"}}),a("el-table-column",{attrs:{prop:"taxRegisterCode",label:"税务登记号",width:"150"}}),a("el-table-column",{attrs:{prop:"idCode",label:"居民身份证号",width:"150"}}),a("el-table-column",{attrs:{prop:"legalName",label:"法定代表人姓名",width:"200"}}),a("el-table-column",{attrs:{prop:"punishResult",label:"处罚结果",width:"150"}}),a("el-table-column",{attrs:{prop:"punishDate",label:"处罚决定日期",width:"150"}}),a("el-table-column",{attrs:{prop:"punishUnit",label:"处罚机关",width:"150"}}),a("el-table-column",{attrs:{prop:"status",label:"当前状态",width:"150"}}),a("el-table-column",{attrs:{prop:"addressCode",label:"地方编码",width:"150"}}),a("el-table-column",{attrs:{prop:"updateDate",label:"数据更新时间戳",width:"200"}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注",width:"150"}}),a("el-table-column",{attrs:{prop:"informationScope",label:"信息使用范围",width:"150"}}),a("el-table-column",{attrs:{prop:"loseCreditGrade",label:"失信严重程度",width:"150"}}),a("el-table-column",{attrs:{prop:"publicExpireDate",label:"公示截止期",width:"150"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Ar=[],Rr=[{creditGradeId:"1",creditCode:"ASSADAS...",approvalGrade:"稻米专业合作社",originalGrade:"B级（基本守信）",nowGrade:"A级（守信）",gradeTime:"2019-08-03 12:32:43",gradeUnit:"梅李镇农产品质量安全监管站",approvalStatus:"待审批"}],Br={name:"adminPenaltyInfo",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:Rr,creditCode:-1}},created:function(){this.getList(),this.creditCode=this.$route.query.creditCode},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/public_punish/all",{creditCode:this.$route.query.creditCode,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Or=Br,jr=(a("6d0e"),Object(u["a"])(Or,zr,Ar,!1,null,"5725af37",null)),Er=jr.exports,Ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("行政许可信息")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label no-margin-left"},[e._v("稻米专业合作社")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"docCode",label:"行政许可决定书文号",width:"250"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",width:"200"}}),a("el-table-column",{attrs:{prop:"licenseCode",label:"行政许可编码",width:"200"}}),a("el-table-column",{attrs:{prop:"approvalContent",label:"审查类别",width:"200"}}),a("el-table-column",{attrs:{prop:"permitContent",label:"许可内容",width:"200"}}),a("el-table-column",{attrs:{prop:"publishObjectName",label:"行政相对人名称",width:"200"}}),a("el-table-column",{attrs:{prop:"creditCode",label:"统一社会信用代码",width:"200"}}),a("el-table-column",{attrs:{prop:"organizationCode",label:"组织机构代码",width:"200"}}),a("el-table-column",{attrs:{prop:"businessRegisterCode",label:"工商登记码",width:"200"}}),a("el-table-column",{attrs:{prop:"taxRegisterCode",label:"税务登记号",width:"200"}}),a("el-table-column",{attrs:{prop:"idCode",label:"居民身份证号",width:"200"}}),a("el-table-column",{attrs:{prop:"legalName",label:"法定代表人姓名",width:"200"}}),a("el-table-column",{attrs:{prop:"punishDate",label:"许可决定日期",width:"200"}}),a("el-table-column",{attrs:{prop:"publicExpireDate",label:"许可截止期",width:"200"}}),a("el-table-column",{attrs:{prop:"punishUnit",label:"许可机关",width:"200"}}),a("el-table-column",{attrs:{prop:"status",label:"当前状态",width:"200"}}),a("el-table-column",{attrs:{prop:"addressCode",label:"地方编码",width:"200"}}),a("el-table-column",{attrs:{prop:"updateDate",label:"数据更新时间戳",width:"200"}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注",width:"200"}}),a("el-table-column",{attrs:{prop:"informationScope",label:"信息使用范围",width:"200"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},qr=[],Mr={name:"adminLicenseInfo",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:Rr,creditCode:-1}},created:function(){this.getList(),this.creditCode=this.$route.query.creditCode},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/public_license/all",{creditCode:this.$route.query.creditCode,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Yr=Mr,Gr=(a("4587"),Object(u["a"])(Yr,Ur,qr,!1,null,"e78516f2",null)),Wr=Gr.exports,Qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("三品认证")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label"},[e._v(e._s(e.getCompanyName()))]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"productName",label:"产品",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterProduct(a.productId)))]}}])}),a("el-table-column",{attrs:{prop:"certificationType",label:"分类",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.appStatus1[a.argriculturalClassification]))]}}])}),a("el-table-column",{attrs:{prop:"certificationCategory",label:"认证类型",width:""}}),a("el-table-column",{attrs:{prop:"certificationNo",label:"证书编号",width:""}}),a("el-table-column",{attrs:{label:"证书有效期",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.getCertification(a.certificationStartTime,a.certificationEndTime)))]}}])}),a("el-table-column",{attrs:{label:"有效时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.getPeriod(a.certificationStartTime,a.certificationEndTime)))]}}])}),a("el-table-column",{attrs:{prop:"output",label:"产量",width:""}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Jr=[],Hr={name:"threeProduction",components:{Pagination:_e},data:function(){return{companyData:[],page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],creditCode:-1,productName:"",productCategory:0,productDetail:[],appStatus1:["全部","养殖业","已同意","畜牧业","种植业"]}},created:function(){this.creditCode=this.$route.query.creditCode,this.getProductionDetail(),this.getCompanyProduction(),this.getList()},methods:{getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyData=t})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/quality_standard/all",{creditCode:this.$route.query.creditCode,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getProductionDetail:function(){var e=this;$().get("/api/product_production/name").then((function(t){e.productDetail=t})).catch((function(e){console.log(e)}))},filterProduct:function(e){var t=this.productDetail.find((function(t){return t.productId===e}));return t?t.productName:""},getCompanyName:function(){var e=this,t=this.companyData.find((function(t){return t.creditCode===e.$route.query.creditCode}));return t?t.companyName:""},getCertification:function(e,t){return e.substr(0,10)+"至"+t.substr(0,10)},getPeriod:function(e,t){var a=parseInt(e.substr(0,4)),i=parseInt(t.substr(0,4));return(i-a<=0?0:i-a)+"年"},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Xr=Hr,Kr=(a("cc37"),Object(u["a"])(Xr,Qr,Jr,!1,null,null,null)),Zr=Kr.exports,eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("信用评级")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label"},[e._v(e._s(e.companyName))]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"gradeTime",label:"评级时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e._f("formatDate")(a.gradeTime))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"creditAvailableStart",label:"评级有效期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e._f("formatDate")(a.creditAvailableStart))+"至"+e._s(e._f("formatDate")(a.creditAvailableEnd))+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"单位名称"}},[[e._v(e._s(e.companyName))]],2),a("el-table-column",{attrs:{label:"评级"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-rate",{attrs:{value:e.getGradeString(i.nowGrade),max:e.getGradeString(i.nowGrade),texts:["C级（失信）","B级（基本守信）","A级（守信）"],colors:e.colors,disabled:"","show-text":""}})]}}])}),a("el-table-column",{attrs:{prop:"gradeUnit",label:"评级单位"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},to=[],ao={name:"ratingInfo",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],creditCode:null,companyName:"",colors:{1:"#f00",2:"#F7BA2A",3:"#0f0"}}},created:function(){this.creditCode=this.$route.query.creditCode,this.getCompanyName(),this.getList()},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/company_credit_grade/all",{creditCode:this.creditCode,approvalStatus:-1,pageNo:0,pageSize:20,townId:0,sortBy:"creditGradeId"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCompanyName:function(){var e=this;$().get("/api/company_production/name",{creditCode:this.creditCode}).then((function(t){e.companyName=t[0].companyName})).catch((function(e){console.log(e)}))},getGradeString:function(e){var t="";switch(e){case"A":t=3;break;case"B":t=2;break;case"C":t=1;break;default:t=3}return t},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},io=ao,ro=(a("c548"),Object(u["a"])(io,eo,to,!1,null,"c7908442",null)),oo=ro.exports,lo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"production-subject"}},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("监管对象")])],1)],1),a("div",{staticClass:"box"},[e.isShowSearchOption?a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item margin-bottom-20"},[a("div",{staticClass:"select_label no-margin-left"},[e._v("乡镇")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:e.getList},model:{value:e.townId,callback:function(t){e.townId=t},expression:"townId"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._l(e.townList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2)],1),a("div",{staticClass:"filter-item"},[a("div",{staticClass:"select_label"},[e._v("类型")]),[a("el-radio",{attrs:{label:"1"},on:{change:e.getList},model:{value:e.companyType,callback:function(t){e.companyType=t},expression:"companyType"}},[e._v("企业")]),a("el-radio",{attrs:{label:"2"},on:{change:e.getList},model:{value:e.companyType,callback:function(t){e.companyType=t},expression:"companyType"}},[e._v("农户")])]],2),a("div",{staticClass:"filter-item"},[a("div",{staticClass:"select_label"},[e._v("行业")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:e.getList},model:{value:e.agriculturalClassification,callback:function(t){e.agriculturalClassification=t},expression:"agriculturalClassification"}},e._l([{value:0,label:"全部"},{value:1,label:"养殖业"},{value:2,label:"畜牧业"},{value:3,label:"种植业"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"filter-item"},[a("div",{staticClass:"select_label"},[e._v("三品认证")]),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:e.filterList},model:{value:e.quality_standard,callback:function(t){e.quality_standard=t},expression:"quality_standard"}},e._l([{value:-1,label:"全部"},{value:1,label:"有"},{value:0,label:"无"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"filter-item"},[a("div",{staticClass:"select_label"},[e._v("监管记录")]),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:e.filterList},model:{value:e.supervision_record,callback:function(t){e.supervision_record=t},expression:"supervision_record"}},e._l([{value:-1,label:"全部"},{value:1,label:"有"},{value:0,label:"无"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"filter-item"},[a("div",{staticClass:"select_label"},[e._v("农业监测")]),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:e.filterList},model:{value:e.disability_check,callback:function(t){e.disability_check=t},expression:"disability_check"}},e._l([{value:-1,label:"全部"},{value:1,label:"有"},{value:0,label:"无"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.isShowAddButton?a("div",{staticClass:"filter-item"},[a("el-button",{staticClass:"margin-left-20",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.gotoAddRegulatoryObject()}}},[e._v("添加监管对象")])],1):e._e(),a("div",{staticClass:"allCompany"},[e._v("\n        共计\n        "),a("b",{staticClass:"blue-colored"},[e._v(e._s(e.total))]),e._v(" 家企业\n      ")])]):e._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"companyName",label:"企业名称",width:"150"}}),a("el-table-column",{attrs:{prop:"chargePerson",label:"法人代表",width:"150"}}),a("el-table-column",{attrs:{prop:"companyAddress",label:"企业地址"}}),e.isShowSearchOption?a("el-table-column",{attrs:{prop:"qualityStandardId",label:"三品认证","class-name":"text-center normal-line-height",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0!==i.qualityStandard&&null!=i.qualityStandard?a("el-image",{staticClass:"button-img small-size",attrs:{src:e.Button2},on:{click:function(t){return e.$router.push({path:"/productionSubject/threeProduct",query:{creditCode:i.creditCode}})}}}):e._e(),0!==i.qualityStandard&&null!=i.qualityStandard?a("p",{staticClass:"padding-left-10 button-p",on:{click:function(t){return e.$router.push({path:"/productionSubject/threeProduct",query:{creditCode:i.creditCode}})}}},[e._v("\n            认证信息\n          ")]):e._e(),0===i.qualityStandard||null==i.qualityStandard?a("p",{staticClass:"padding-left-10"},[e._v("\n            无\n          ")]):e._e()]}}],null,!1,3580213708)}):e._e(),e.isShowSearchOption?a("el-table-column",{attrs:{prop:"doSupervision",label:"监管记录","class-name":"text-center normal-line-height",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0!==i.supervisionRecord&&null!=i.supervisionRecord?a("el-image",{staticClass:"button-img",attrs:{src:e.Button1},on:{click:function(t){return e.$router.push({path:"/regulatoryRecord/",query:{companyId:i.companyId}})}}}):e._e(),0===i.supervisionRecord||null==i.supervisionRecord?a("p",{staticClass:"padding-left-10"},[e._v("\n            无\n          ")]):e._e()]}}],null,!1,108979913)}):e._e(),e.isShowSearchOption?a("el-table-column",{attrs:{prop:"address",label:"农药检测",size:"mini","class-name":"text-center normal-line-height",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0!==i.disabilityCheck&&null!=i.disabilityCheck?a("el-image",{staticClass:"button-img",attrs:{src:e.Button1},on:{click:function(t){return e.$router.push({path:"/disabilityCheck/",query:{creditCode:i.creditCode}})}}}):e._e(),0===i.disabilityCheck||null==i.disabilityCheck?a("p",{staticClass:"padding-left-10"},[e._v("\n            无\n          ")]):e._e()]}}],null,!1,1943223782)}):e._e(),a("el-table-column",{attrs:{prop:"contactPerson",label:"联系人",width:"90"}}),a("el-table-column",{attrs:{prop:"contactMobile",label:"联系方式",width:"120"}}),a("el-table-column",{attrs:{prop:"address",label:"所在乡镇",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(e.getTownship(a.townId))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"nowGrade",label:"企业诚信",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticClass:"rating-action",on:{click:function(t){return e.gotoCreditRatingPage(i)}}},[a("el-rate",{attrs:{value:i.nowGrade,max:i.nowGrade,texts:["C:失信","B:基本守信","A:守信"],colors:e.colors,disabled:"","show-text":""}})],1)]}}])}),a("el-table-column",{attrs:{prop:"operations",label:"操作",width:"300","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.isShowEditButton?a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(t){return e.gotoEditProductPage(i)}}},[e._v("修改")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.gotoProductPage(i)}}},[e._v("产品")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.gotoWarehousingEnvironmentPage(i)}}},[e._v("仓储环境")]),e.isShowDetail?a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.gotoDetailsProductPage(i)}}},[e._v("详情")]):e._e()]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},no=[],so=a("34bb"),co=a.n(so),uo=a("3ef0"),po=a.n(uo),mo={name:"productionSubject",components:{Pagination:_e},data:function(){return{Button1:co.a,Button2:po.a,townId:0,companyType:0,agriculturalClassification:0,quality_standard:"全部",supervision_record:"全部",disability_check:"全部",page:{pageIndex:1,pageSize:20},total:0,radio:"1",listLoading:!0,townList:[],tableData:[],srcData:[],colors:{1:"#f00",2:"#F7BA2A",3:"#0f0"},value2:2,isShowAddButton:null,isShowEditButton:null,isShowDetail:null,isShowSearchOption:null}},created:function(){this.getList(),this.getTownList(),this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addRegulatoryObject"==e.privilegeCode})),this.isShowEditButton=!!n.a.get("authList").find((function(e){return"editRegulatoryObject"==e.privilegeCode})),this.isShowDetail=!!n.a.get("authList").find((function(e){return"detailsRegulatoryObject"==e.privilegeCode})),this.isShowSearchOption=!!n.a.get("authList").find((function(e){return"searchRegulatoryObject"==e.privilegeCode}))},methods:{getTownship:function(e){var t=this.townList.findIndex((function(t){return t.id==e}));return t<0?"":this.townList[t].name},gotoCreditRatingPage:function(e){this.$router.push({path:"/corporateCreditFile/ratingInfo",query:{creditCode:e.creditCode}})},gotoAddRegulatoryObject:function(){this.$router.push("/productionSubject/addRegulatoryObject")},gotoEditProductPage:function(e){this.$router.push("/productionSubject/editRegulatoryObject/".concat(e.companyId))},gotoDetailsProductPage:function(e){this.$router.push("/productionSubject/detailsRegulatoryObject/".concat(e.companyId))},gotoProductPage:function(e){this.$router.push("/productionSubject/mainProduct/".concat(e.companyId))},gotoWarehousingEnvironmentPage:function(e){this.$router.push("/productionSubject/warehouseEnv/".concat(e.companyId))},getTownList:function(){var e=this;$().get("/api/town/all",{}).then((function(t){e.townList=t})).catch((function(e){console.error(e)}))},getNowGrade:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(t,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="",i=a&&a.length?a.pop().nowGrade:"",e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),filterList:function(){this.tableData=this.srcData,1===this.quality_standard?this.tableData=this.tableData.filter((function(e){return e.qualityStandard>0})):0===this.quality_standard&&(this.tableData=this.tableData.filter((function(e){return 0===e.qualityStandard||null==e.qualityStandard}))),1===this.supervision_record?this.tableData=this.tableData.filter((function(e){return e.supervisionRecord>0})):0===this.supervision_record&&(this.tableData=this.tableData.filter((function(e){return 0===e.supervisionRecord||null==e.supervisionRecord}))),1===this.disability_check?this.tableData=this.tableData.filter((function(e){return e.disabilityCheck>0})):0===this.disability_check&&(this.tableData=this.tableData.filter((function(e){return 0===e.disabilityCheck||null==e.disabilityCheck})))},getList:function(){var e=this;this.tableData=[],this.listLoading=!0,$().get("/api/company_production/getAllList",{agriculturalClassification:this.agriculturalClassification,companyType:this.companyType,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,townId:this.townId}).then((function(t){e.tableData=t,e.srcData=t,e.total=e.tableData.length,e.tableData.forEach((function(t){t.nowGrade=e.getGradeString(t.grade)})),e.filterList(),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(t){console.error(t),e.tableData=[],e.total=0,setTimeout((function(){e.listLoading=!1}),500)}))},getGradeString:function(e){var t="";switch(e){case"A":t=3;break;case"B":t=2;break;case"C":t=1;break;default:t=3}return t},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},fo=mo,go=(a("bcd4"),Object(u["a"])(fo,lo,no,!1,null,"396aabd8",null)),ho=go.exports,bo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加监管对象")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.createLoading,expression:"createLoading"}],ref:"form",staticClass:"data-form",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-radio",{attrs:{label:"1",checked:""},on:{change:e.changeCompany},model:{value:e.form.companyType,callback:function(t){e.$set(e.form,"companyType",t)},expression:"form.companyType"}},[e._v("企业")]),a("el-radio",{attrs:{label:"2"},on:{change:e.changeCompany},model:{value:e.form.companyType,callback:function(t){e.$set(e.form,"companyType",t)},expression:"form.companyType"}},[e._v("农户")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对象类型"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",value:1==e.form.companyType?"企业":"农户"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"乡镇"}},[a("el-select",{model:{value:e.form.townId,callback:function(t){e.$set(e.form,"townId",t)},expression:"form.townId"}},e._l(e.townList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"行业"}},[a("el-select",{model:{value:e.form.agriculturalClassification,callback:function(t){e.$set(e.form,"agriculturalClassification",t)},expression:"form.agriculturalClassification"}},e._l([{value:"1",label:"养殖业"},{value:"2",label:"畜牧业"},{value:"3",label:"种植业"}],(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.form.companyType,expression:"form.companyType == '1'"}]},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位名称",prop:"companyName"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"负责人",prop:"chargePerson"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.chargePerson,callback:function(t){e.$set(e.form,"chargePerson",t)},expression:"form.chargePerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址",prop:"companyAddress"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.companyAddress,callback:function(t){e.$set(e.form,"companyAddress",t)},expression:"form.companyAddress"}})],1)],1)],1),a("div",{staticClass:"data-group-border"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"种植"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_0,callback:function(t){e.$set(e.form.productInfo,"data_0_0",t)},expression:"form.productInfo.data_0_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_0_1,callback:function(t){e.$set(e.form.productInfo,"data_0_1",t)},expression:"form.productInfo.data_0_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（亩）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"水产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_0,callback:function(t){e.$set(e.form.productInfo,"data_1_0",t)},expression:"form.productInfo.data_1_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_1_1,callback:function(t){e.$set(e.form.productInfo,"data_1_1",t)},expression:"form.productInfo.data_1_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（亩）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"畜产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_2_0,callback:function(t){e.$set(e.form.productInfo,"data_2_0",t)},expression:"form.productInfo.data_2_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_2_1,callback:function(t){e.$set(e.form.productInfo,"data_2_1",t)},expression:"form.productInfo.data_2_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（头）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"禽产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_3_0,callback:function(t){e.$set(e.form.productInfo,"data_3_0",t)},expression:"form.productInfo.data_3_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_3_1,callback:function(t){e.$set(e.form.productInfo,"data_3_1",t)},expression:"form.productInfo.data_3_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（羽）"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"三品认证",prop:"qualityStandardId"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.qualityStandardId,callback:function(t){e.$set(e.form,"qualityStandardId",e._n(t))},expression:"form.qualityStandardId"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人",prop:"contactPerson"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactPerson,callback:function(t){e.$set(e.form,"contactPerson",t)},expression:"form.contactPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人手机",prop:"contactMobile"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactMobile,callback:function(t){e.$set(e.form,"contactMobile",t)},expression:"form.contactMobile"}})],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.form.companyType,expression:"form.companyType == '2'"}]},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名",prop:"contactPerson"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactPerson,callback:function(t){e.$set(e.form,"contactPerson",t)},expression:"form.contactPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系方式",prop:"contactWay"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactWay,callback:function(t){e.$set(e.form,"contactWay",t)},expression:"form.contactWay"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址",prop:"companyAddress"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.companyAddress,callback:function(t){e.$set(e.form,"companyAddress",t)},expression:"form.companyAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种养殖面积",prop:"plantArea"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.plantArea,callback:function(t){e.$set(e.form,"plantArea",e._n(t))},expression:"form.plantArea"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地来源",prop:"landSource"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.landSource,callback:function(t){e.$set(e.form,"landSource",t)},expression:"form.landSource"}})],1)],1)],1),a("div",{staticClass:"data-group-border"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"种植面积（亩）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"稻麦"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_0,callback:function(t){e.$set(e.form.productInfo,"data_0_0",t)},expression:"form.productInfo.data_0_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"蔬菜"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_1,callback:function(t){e.$set(e.form.productInfo,"data_0_1",t)},expression:"form.productInfo.data_0_1"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"水果"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_2,callback:function(t){e.$set(e.form.productInfo,"data_0_2",t)},expression:"form.productInfo.data_0_2"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"食用菌"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_3,callback:function(t){e.$set(e.form.productInfo,"data_0_3",t)},expression:"form.productInfo.data_0_3"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"水产品养殖面积（亩）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"鱼"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_0,callback:function(t){e.$set(e.form.productInfo,"data_1_0",t)},expression:"form.productInfo.data_1_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"虾蟹"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_1,callback:function(t){e.$set(e.form.productInfo,"data_1_1",t)},expression:"form.productInfo.data_1_1"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"其他"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_2,callback:function(t){e.$set(e.form.productInfo,"data_1_2",t)},expression:"form.productInfo.data_1_2"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"畜养殖规模（头）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"猪"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_2_0,callback:function(t){e.$set(e.form.productInfo,"data_2_0",t)},expression:"form.productInfo.data_2_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"奶牛"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_2_1,callback:function(t){e.$set(e.form.productInfo,"data_2_1",t)},expression:"form.productInfo.data_2_1"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"禽养殖规模（羽）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"肉禽"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_3_0,callback:function(t){e.$set(e.form.productInfo,"data_3_0",t)},expression:"form.productInfo.data_3_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"蛋禽"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_3_1,callback:function(t){e.$set(e.form.productInfo,"data_3_1",t)},expression:"form.productInfo.data_3_1"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社会信用统一代码",prop:"creditCode"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode",t)},expression:"form.creditCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"企业荣誉"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5},model:{value:e.form.companyHonor,callback:function(t){e.$set(e.form,"companyHonor",t)},expression:"form.companyHonor"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否监管"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.doSupervision,callback:function(t){e.$set(e.form,"doSupervision",t)},expression:"form.doSupervision"}},e._l([{value:"1",label:"是"},{value:"0",label:"否"}],(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.onSubmit}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},vo=[],yo={name:"addRegulatoryObject",data:function(){var e=[{required:!0,message:"必填",trigger:"blur"}];return{createLoading:!1,townList:[],form:{agriculturalClassification:"1",chargePerson:"",companyAddress:"",companyHonor:"",companyId:0,companyName:"",companyType:"1",contactMobile:"",contactPerson:"",contactWay:"",createUserId:0,creditCode:"",doSupervision:"1",landSource:"",plantArea:0,public_license:0,public_punish:0,qualityStandardId:0,quality_standard:0,remarks:"",townId:"",updateUserId:0,productInfo:{data_0_0:"",data_0_1:"",data_0_2:"",data_0_3:"",data_1_0:"",data_1_1:"",data_1_2:"",data_2_0:"",data_2_1:"",data_3_0:"",data_3_1:""}},rules:{chargePerson:JSON.parse(JSON.stringify(e)),companyAddress:JSON.parse(JSON.stringify(e)),companyHonor:JSON.parse(JSON.stringify(e)),companyName:JSON.parse(JSON.stringify(e)),companyType:JSON.parse(JSON.stringify(e)),contactMobile:JSON.parse(JSON.stringify(e)),contactPerson:JSON.parse(JSON.stringify(e)),creditCode:JSON.parse(JSON.stringify(e)),doSupervision:JSON.parse(JSON.stringify(e)),landSource:JSON.parse(JSON.stringify(e)),plantArea:[{required:!0,message:"请插入",trigger:"blur"},{type:"number",message:"插入号码",trigger:"blur"}],qualityStandardId:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],remarks:JSON.parse(JSON.stringify(e))}}},created:function(){this.getTownList()},methods:{getTownList:function(){var e=this;$().get("/api/town/all",{}).then((function(t){e.townList=t,e.changeCompany()})).catch((function(e){console.error(e)}))},changeCompany:function(){"1"==this.form.companyType?(this.rules.landSource[0].required=!1,this.rules.plantArea[0].required=!1):"2"==this.form.companyType&&(this.rules.landSource[0].required=!0,this.rules.plantArea[0].required=!0)},onSubmit:function(){var e=this,t=j().user();t?("2"==this.form.companyType&&(this.form.companyName=this.form.contactPerson,this.form.chargePerson=this.form.contactPerson,this.form.contactMobile=this.form.contactWay),this.$refs["form"].validate((function(t){t&&(e.createLoading=!0,$().post("/api/company_production/create",{agriculturalClassification:e.form.agriculturalClassification,chargePerson:e.form.chargePerson,companyAddress:e.form.companyAddress,companyHonor:e.form.companyHonor,companyId:e.form.companyId,companyName:e.form.companyName,companyType:e.form.companyType,contactMobile:e.form.contactMobile,contactPerson:e.form.contactPerson,contactWay:e.form.contactWay,createUserId:j().user().id,creditCode:e.form.creditCode,doSupervision:e.form.doSupervision,landSource:e.form.landSource,plantArea:e.form.plantArea,productInfo:JSON.stringify(e.form.productInfo),public_license:e.form.public_license,public_punish:e.form.public_punish,qualityStandardId:e.form.qualityStandardId,quality_standard:e.form.quality_standard,remarks:e.form.remarks,townId:e.form.townId,updateUserId:j().user().id}).then((function(t){e.onSendCreditGrade()})))}))):j().logout()},onSendCreditGrade:function(){var e=this,t=(new Date).toJSON();$().post("/api/company_credit_grade/create",{approvalGrade:"B",approvalStatus:"1",createTime:t,createUserId:j().user().id,creditAvailableEnd:t,creditAvailableStart:t,creditCode:this.form.creditCode,creditGradeId:0,gradeTime:t,gradeUnit:"",gradeUnitId:"0",nowGrade:"B",originalGrade:"B",townId:this.form.townId,updateTime:t,updateUserId:j().user().id,uploadFileName:""}).then((function(t){e.createLoading=!1,e.$router.push({path:"/productionSubject"})}))}}},wo=yo,_o=(a("1fd3"),Object(u["a"])(wo,bo,vo,!1,null,"5b1a73e3",null)),ko=_o.exports,Co=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改监管对象")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.processing,expression:"processing"}],staticClass:"box"},[a("el-form",{ref:"form",staticClass:"data-form",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[e.isShowDeleteButton?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-radio",{attrs:{label:"1",checked:""},on:{change:e.changeCompany},model:{value:e.form.companyType,callback:function(t){e.$set(e.form,"companyType",t)},expression:"form.companyType"}},[e._v("企业")]),a("el-radio",{attrs:{label:"2"},on:{change:e.changeCompany},model:{value:e.form.companyType,callback:function(t){e.$set(e.form,"companyType",t)},expression:"form.companyType"}},[e._v("农户")])],1)],1)],1):e._e(),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对象类型"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",value:1==e.form.companyType?"企业":"农户"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"乡镇"}},[a("el-select",{model:{value:e.form.townId,callback:function(t){e.$set(e.form,"townId",t)},expression:"form.townId"}},e._l(e.townList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"行业"}},[a("el-select",{model:{value:e.form.agriculturalClassification,callback:function(t){e.$set(e.form,"agriculturalClassification",t)},expression:"form.agriculturalClassification"}},e._l([{value:"1",label:"养殖业"},{value:"2",label:"畜牧业"},{value:"3",label:"种植业"}],(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.form.companyType,expression:"form.companyType == '1'"}]},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位名称",prop:"companyName"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"负责人",prop:"chargePerson"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.chargePerson,callback:function(t){e.$set(e.form,"chargePerson",t)},expression:"form.chargePerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址",prop:"companyAddress"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.companyAddress,callback:function(t){e.$set(e.form,"companyAddress",t)},expression:"form.companyAddress"}})],1)],1)],1),a("div",{staticClass:"data-group-border"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"种植"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_0,callback:function(t){e.$set(e.form.productInfo,"data_0_0",t)},expression:"form.productInfo.data_0_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_0_1,callback:function(t){e.$set(e.form.productInfo,"data_0_1",t)},expression:"form.productInfo.data_0_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（亩）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"水产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_0,callback:function(t){e.$set(e.form.productInfo,"data_1_0",t)},expression:"form.productInfo.data_1_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_1_1,callback:function(t){e.$set(e.form.productInfo,"data_1_1",t)},expression:"form.productInfo.data_1_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（亩）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"畜产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_2_0,callback:function(t){e.$set(e.form.productInfo,"data_2_0",t)},expression:"form.productInfo.data_2_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_2_1,callback:function(t){e.$set(e.form.productInfo,"data_2_1",t)},expression:"form.productInfo.data_2_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（头）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"禽产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_3_0,callback:function(t){e.$set(e.form.productInfo,"data_3_0",t)},expression:"form.productInfo.data_3_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.form.productInfo.data_3_1,callback:function(t){e.$set(e.form.productInfo,"data_3_1",t)},expression:"form.productInfo.data_3_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（羽）"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"三品认证",prop:"qualityStandardId"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.qualityStandardId,callback:function(t){e.$set(e.form,"qualityStandardId",e._n(t))},expression:"form.qualityStandardId"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人",prop:"contactPerson"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactPerson,callback:function(t){e.$set(e.form,"contactPerson",t)},expression:"form.contactPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人手机",prop:"contactMobile"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactMobile,callback:function(t){e.$set(e.form,"contactMobile",t)},expression:"form.contactMobile"}})],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.form.companyType,expression:"form.companyType == '2'"}]},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名",prop:"contactPerson"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactPerson,callback:function(t){e.$set(e.form,"contactPerson",t)},expression:"form.contactPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系方式",prop:"contactWay"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.contactWay,callback:function(t){e.$set(e.form,"contactWay",t)},expression:"form.contactWay"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址",prop:"companyAddress"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.companyAddress,callback:function(t){e.$set(e.form,"companyAddress",t)},expression:"form.companyAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种养殖面积",prop:"plantArea"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.plantArea,callback:function(t){e.$set(e.form,"plantArea",e._n(t))},expression:"form.plantArea"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地来源",prop:"landSource"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.landSource,callback:function(t){e.$set(e.form,"landSource",t)},expression:"form.landSource"}})],1)],1)],1),a("div",{staticClass:"data-group-border"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"种植面积（亩）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"稻麦"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_0,callback:function(t){e.$set(e.form.productInfo,"data_0_0",t)},expression:"form.productInfo.data_0_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"蔬菜"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_1,callback:function(t){e.$set(e.form.productInfo,"data_0_1",t)},expression:"form.productInfo.data_0_1"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"水果"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_2,callback:function(t){e.$set(e.form.productInfo,"data_0_2",t)},expression:"form.productInfo.data_0_2"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"食用菌"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_0_3,callback:function(t){e.$set(e.form.productInfo,"data_0_3",t)},expression:"form.productInfo.data_0_3"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"水产品养殖面积（亩）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"鱼"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_0,callback:function(t){e.$set(e.form.productInfo,"data_1_0",t)},expression:"form.productInfo.data_1_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"虾蟹"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_1,callback:function(t){e.$set(e.form.productInfo,"data_1_1",t)},expression:"form.productInfo.data_1_1"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"其他"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_1_2,callback:function(t){e.$set(e.form.productInfo,"data_1_2",t)},expression:"form.productInfo.data_1_2"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"畜养殖规模（头）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"猪"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_2_0,callback:function(t){e.$set(e.form.productInfo,"data_2_0",t)},expression:"form.productInfo.data_2_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"奶牛"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_2_1,callback:function(t){e.$set(e.form.productInfo,"data_2_1",t)},expression:"form.productInfo.data_2_1"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"禽养殖规模（羽）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"肉禽"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_3_0,callback:function(t){e.$set(e.form.productInfo,"data_3_0",t)},expression:"form.productInfo.data_3_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"蛋禽"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.productInfo.data_3_1,callback:function(t){e.$set(e.form.productInfo,"data_3_1",t)},expression:"form.productInfo.data_3_1"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社会信用统一代码",prop:"creditCode"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode",t)},expression:"form.creditCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"企业荣誉"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5,"class-name":"el-textarea-font"},model:{value:e.form.companyHonor,callback:function(t){e.$set(e.form,"companyHonor",t)},expression:"form.companyHonor"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5,"class-name":"el-textarea-font"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否监管"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.doSupervision,callback:function(t){e.$set(e.form,"doSupervision",t)},expression:"form.doSupervision"}},e._l([{value:"1",label:"是"},{value:"0",label:"否"}],(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.onSubmit}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},xo=[],So={name:"editRegulatoryObject",data:function(){var e=[{required:!0,message:"必填",trigger:"blur"}];return{townList:[],processing:!1,form:{agriculturalClassification:1,chargePerson:"",companyAddress:"",companyHonor:"",companyId:0,companyName:"",companyType:"1",contactMobile:"",contactPerson:"",contactWay:"",createUserId:0,creditCode:"",doSupervision:"",landSource:"",plantArea:0,public_license:0,public_punish:0,qualityStandardId:0,quality_standard:0,remarks:"",townId:1,updateUserId:0,productInfo:{data_0_0:"",data_0_1:"",data_0_2:"",data_0_3:"",data_1_0:"",data_1_1:"",data_1_2:"",data_2_0:"",data_2_1:"",data_3_0:"",data_3_1:""}},rules:{chargePerson:JSON.parse(JSON.stringify(e)),companyAddress:JSON.parse(JSON.stringify(e)),companyHonor:JSON.parse(JSON.stringify(e)),companyName:JSON.parse(JSON.stringify(e)),companyType:JSON.parse(JSON.stringify(e)),contactMobile:JSON.parse(JSON.stringify(e)),contactPerson:JSON.parse(JSON.stringify(e)),creditCode:JSON.parse(JSON.stringify(e)),doSupervision:JSON.parse(JSON.stringify(e)),landSource:JSON.parse(JSON.stringify(e)),plantArea:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],qualityStandardId:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],remarks:JSON.parse(JSON.stringify(e))},id:0,isShowDeleteButton:null}},created:function(){this.id=this.$route.params.id,this.isShowDeleteButton=!!n.a.get("authList").find((function(e){return"searchproductionSubject"==e.privilegeCode})),this.processing=!0,this.getCompanyInfo(this.id),this.getTownList()},methods:{getCompanyInfo:function(e){var t=this;$().get("/api/company_production/get/"+e).then((function(e){t.form=e,t.form.productInfo=JSON.parse(e.productInfo),t.changeCompany()})).catch((function(e){console.log(e)}))},getTownList:function(){var e=this;$().get("/api/town/all",{}).then((function(t){e.townList=t,e.processing=!1})).catch((function(e){console.error(e)}))},changeCompany:function(){1==this.form.companyType?(this.rules.landSource[0].required=!1,this.rules.plantArea[0].required=!1):2==this.form.companyType&&(this.rules.landSource[0].required=!0,this.rules.plantArea[0].required=!0)},onSubmit:function(){var e=this,t=j().user();t?("2"==this.form.companyType&&(this.form.companyName=this.form.contactPerson,this.form.chargePerson=this.form.contactPerson,this.form.contactMobile=this.form.contactWay),this.$refs["form"].validate((function(t){t&&(e.processing=!0,$().put("/api/company_production/update/"+e.id,{agriculturalClassification:e.form.agriculturalClassification,chargePerson:e.form.chargePerson,companyAddress:e.form.companyAddress,companyHonor:e.form.companyHonor,companyId:e.form.companyId,companyName:e.form.companyName,companyType:e.form.companyType,contactMobile:e.form.contactMobile,contactPerson:e.form.contactPerson,contactWay:e.form.contactWay,createUserId:j().user().id,creditCode:e.form.creditCode,doSupervision:e.form.doSupervision,landSource:e.form.landSource,plantArea:e.form.plantArea,productInfo:JSON.stringify(e.form.productInfo),public_license:e.form.public_license,public_punish:e.form.public_punish,qualityStandardId:e.form.qualityStandardId,quality_standard:e.form.quality_standard,remarks:e.form.remarks,townId:e.form.townId,updateUserId:j().user().id}).then((function(t){e.processing=!1,e.$router.push({path:"/productionSubject"})})))}))):j().logout()}}},Fo=So,Io=(a("9556"),Object(u["a"])(Fo,Co,xo,!1,null,"0427839a",null)),Do=Io.exports,To=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{ref:"form",staticClass:"data-form",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对象类型"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",value:1==e.form.companyType?"企业":"农户"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"乡镇"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.townId,callback:function(t){e.$set(e.form,"townId",t)},expression:"form.townId"}},e._l(e.townList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"行业"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.agriculturalClassification,callback:function(t){e.$set(e.form,"agriculturalClassification",t)},expression:"form.agriculturalClassification"}},e._l([{value:"1",label:"养殖业"},{value:"2",label:"畜牧业"},{value:"3",label:"种植业"}],(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.form.companyType,expression:"form.companyType == '1'"}]},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位名称",prop:"companyName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"负责人",prop:"chargePerson"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.chargePerson,callback:function(t){e.$set(e.form,"chargePerson",t)},expression:"form.chargePerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址",prop:"companyAddress"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.companyAddress,callback:function(t){e.$set(e.form,"companyAddress",t)},expression:"form.companyAddress"}})],1)],1)],1),a("div",{staticClass:"data-group-border"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"种植"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_0_0,callback:function(t){e.$set(e.form.productInfo,"data_0_0",t)},expression:"form.productInfo.data_0_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_0_1,callback:function(t){e.$set(e.form.productInfo,"data_0_1",t)},expression:"form.productInfo.data_0_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（亩）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"水产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_1_0,callback:function(t){e.$set(e.form.productInfo,"data_1_0",t)},expression:"form.productInfo.data_1_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_1_1,callback:function(t){e.$set(e.form.productInfo,"data_1_1",t)},expression:"form.productInfo.data_1_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（亩）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"畜产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_2_0,callback:function(t){e.$set(e.form.productInfo,"data_2_0",t)},expression:"form.productInfo.data_2_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_2_1,callback:function(t){e.$set(e.form.productInfo,"data_2_1",t)},expression:"form.productInfo.data_2_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（头）"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"禽产品"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品种"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_3_0,callback:function(t){e.$set(e.form.productInfo,"data_3_0",t)},expression:"form.productInfo.data_3_0"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种植面积"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_3_1,callback:function(t){e.$set(e.form.productInfo,"data_3_1",t)},expression:"form.productInfo.data_3_1"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"（羽）"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"三品认证",prop:"qualityStandardId"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.qualityStandardId,callback:function(t){e.$set(e.form,"qualityStandardId",t)},expression:"form.qualityStandardId"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人",prop:"contactPerson"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.contactPerson,callback:function(t){e.$set(e.form,"contactPerson",t)},expression:"form.contactPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人手机",prop:"contactMobile"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.contactMobile,callback:function(t){e.$set(e.form,"contactMobile",t)},expression:"form.contactMobile"}})],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.form.companyType,expression:"form.companyType == '2'"}]},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名",prop:"companyName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系方式",prop:"chargePerson"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.chargePerson,callback:function(t){e.$set(e.form,"chargePerson",t)},expression:"form.chargePerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址",prop:"companyAddress"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.companyAddress,callback:function(t){e.$set(e.form,"companyAddress",t)},expression:"form.companyAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"种养殖面积"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地来源"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.chargePerson,callback:function(t){e.$set(e.form,"chargePerson",t)},expression:"form.chargePerson"}})],1)],1)],1),a("div",{staticClass:"data-group-border"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"种植面积（亩）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"稻麦"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_0_0,callback:function(t){e.$set(e.form.productInfo,"data_0_0",t)},expression:"form.productInfo.data_0_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"蔬菜"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_0_1,callback:function(t){e.$set(e.form.productInfo,"data_0_1",t)},expression:"form.productInfo.data_0_1"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"水果"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_0_2,callback:function(t){e.$set(e.form.productInfo,"data_0_2",t)},expression:"form.productInfo.data_0_2"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"食用菌"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_0_3,callback:function(t){e.$set(e.form.productInfo,"data_0_3",t)},expression:"form.productInfo.data_0_3"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"水产品养殖面积（亩）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"鱼"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_1_0,callback:function(t){e.$set(e.form.productInfo,"data_1_0",t)},expression:"form.productInfo.data_1_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"虾蟹"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_1_1,callback:function(t){e.$set(e.form.productInfo,"data_1_1",t)},expression:"form.productInfo.data_1_1"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"其他"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_1_2,callback:function(t){e.$set(e.form.productInfo,"data_1_2",t)},expression:"form.productInfo.data_1_2"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"畜养殖规模（头）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"猪"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_2_0,callback:function(t){e.$set(e.form.productInfo,"data_2_0",t)},expression:"form.productInfo.data_2_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"奶牛"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_2_1,callback:function(t){e.$set(e.form.productInfo,"data_2_1",t)},expression:"form.productInfo.data_2_1"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"禽养殖规模（羽）"}})],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"肉禽"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_3_0,callback:function(t){e.$set(e.form.productInfo,"data_3_0",t)},expression:"form.productInfo.data_3_0"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"蛋禽"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.productInfo.data_3_1,callback:function(t){e.$set(e.form.productInfo,"data_3_1",t)},expression:"form.productInfo.data_3_1"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社会信用统一代码",prop:"creditCode"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode",t)},expression:"form.creditCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"企业荣誉"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5,readonly:""},model:{value:e.form.companyHonor,callback:function(t){e.$set(e.form,"companyHonor",t)},expression:"form.companyHonor"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5,readonly:""},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否监管",disabled:""}},[a("el-select",{attrs:{placeholder:""},model:{value:e.form.doSupervision,callback:function(t){e.$set(e.form,"doSupervision",t)},expression:"form.doSupervision"}},e._l([{value:"1",label:"是"},{value:"0",label:"否"}],(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Vo=[],Lo={name:"detailsRegulatoryObject",data:function(){var e=[{required:!0,message:"必填",trigger:"blur"}];return{townList:[],form:{agriculturalClassification:1,chargePerson:"",companyAddress:"",companyHonor:"",companyId:0,companyName:"",companyType:"1",contactMobile:"",contactPerson:"",contactWay:"",createUserId:0,creditCode:"",doSupervision:"",landSource:"",plantArea:0,public_license:0,public_punish:0,qualityStandardId:0,quality_standard:0,remarks:"",townId:1,updateUserId:0,productInfo:{data_0_0:"",data_0_1:"",data_0_2:"",data_0_3:"",data_1_0:"",data_1_1:"",data_1_2:"",data_2_0:"",data_2_1:"",data_3_0:"",data_3_1:""}},rules:{chargePerson:e,companyAddress:e,companyHonor:e,companyName:e,companyType:e,contactMobile:e,contactPerson:e,creditCode:e,doSupervision:e,landSource:e,plantArea:e,qualityStandardId:e,remarks:e},id:0}},created:function(){this.id=this.$route.params.id,this.getCompanyInfo(this.id),this.getTownList()},methods:{getCompanyInfo:function(e){var t=this;$().get("/api/company_production/get/"+e).then((function(e){t.form=e,t.form.productInfo=JSON.parse(e.productInfo)})).catch((function(e){console.log(e)}))},getTownList:function(){var e=this;$().get("/api/town/all",{}).then((function(t){e.townList=t})).catch((function(e){console.error(e)}))}}},No=Lo,$o=(a("09ef"),Object(u["a"])(No,To,Vo,!1,null,"152199a0",null)),Po=$o.exports,zo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("监管网格")])],1)],1),a("div",{staticClass:"box"},[a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"120"}}),a("el-table-column",{attrs:{prop:"group1",label:"分管副镇长"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"w-100"},e._l(i.group1,(function(t){return a("p",{key:t.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),e._v("\n                "+e._s(t.title)+":"+e._s(t.name)+"\n              ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"group2",label:"农服办"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"w-100"},[a("p",{staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),e._v("\n                站长:"+e._s(i.level2header.name)+"\n              ")]),e._l(i.group2,(function(t){return a("p",{key:t.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),e._v("\n                "+e._s(t.title)+":"+e._s(t.name)+"\n              ")])}))],2)]}}])}),a("el-table-column",{attrs:{prop:"group3",label:"站所"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"w-100"},e._l(i.group3,(function(t){return a("p",{key:t.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),e._v("\n                "+e._s(t.title)+":"+e._s(t.name)+"\n              ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"group4",label:"村级协管"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"w-100"},e._l(i.group4,(function(t){return a("p",{key:t.id,staticClass:"p-item"},[a("i",{staticClass:"el-icon-user-solid"}),e._v("\n                "+e._s(t.title)+":"+e._s(t.name)+"\n              ")])})),0)]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{staticClass:"no-margin-left margin-bottom-10 w-100",attrs:{size:"small",type:"warning",plain:"",disabled:""}},[e._v("网格图")]),a("el-button",{staticClass:"no-margin-left w-100",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/supervisionGrid/manage/"+i.id})}}},[e._v("管理")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)])},Ao=[],Ro={name:"supervisionGrid",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:50},dialogVisible:!1,total:0,tableData:[],listLoading:!1,townList:null}},created:function(){this.getTown()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/supervision_grid/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){var a=t.data,i=null;for(i in e.townList){for(var r={},o=function(t){var o=a.filter((function(a){return a.townId===e.townList[i].id&&a.supervisorType===t}));r["group"+t]=o||[]},l=1;l<5;l++)o(l);r.id=e.townList[i].id,e.tableData.push(r)}console.log(e.tableData),e.total=e.tableData.length,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;return this.listLoading=!0,$().get("/api/town/all").then((function(t){for(var a in e.townList=t,e.townList){var i=new RegExp(/(?<="level1":)(.*)(?=,"level2leader")/g),r=i.exec(e.townList[a].superviseSystem),o=r?r[1]:"[]",l=new RegExp(/(?<="level2leader":)(.*)(?=,"level2")/g),n=l.exec(e.townList[a].superviseSystem),s=n?n[1]:{},c=new RegExp(/(?<="level2":)(.*)(?=,"level3")/g),u=c.exec(e.townList[a].superviseSystem),d=u?u[1]:"[]",p=new RegExp(/(?<="level3":)(.*)(?=,"level4")/g),m=p.exec(e.townList[a].superviseSystem),f=m?m[1]:"[]",g=new RegExp(/(?<="level4":)(.*)(?=}")/g),h=g.exec(e.townList[a].superviseSystem),b=h?h[1]:"[]";e.townList[a]["level2header"]=JSON.parse(s),e.townList[a]["group1"]=JSON.parse(o),e.townList[a]["group2"]=JSON.parse(d),e.townList[a]["group3"]=JSON.parse(f),e.townList[a]["group4"]=JSON.parse(b)}e.tableData=e.townList,setTimeout((function(){e.listLoading=!1}),50)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},filterTown:function(e){var t=this.townList.find((function(t){return t.id===e}));return t?t.name:""}}},Bo=Ro,Oo=Object(u["a"])(Bo,zo,Ao,!1,null,null,null),jo=Oo.exports,Eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管网格")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("管理")])],1)],1),a("div",{staticClass:"box no-padding-bottom"},[a("div",{staticClass:"container no-padding-bottom"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-dialog",{attrs:{visible:e.openDialog,width:"60%","before-close":e.handleClose,title:e.header},on:{"update:visible":function(t){e.openDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[e.showWebMaster?a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{prop:"webMaster",label:"站长：",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{model:{value:e.dynamicValidateForm.webMaster,callback:function(t){e.$set(e.dynamicValidateForm,"webMaster",t)},expression:"dynamicValidateForm.webMaster"}})],1)],1)],1):e._e(),e._l(e.dynamicValidateForm.rowDatas,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"职能：",prop:"rowDatas."+i+".title",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"rowData.title"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"姓名:",prop:"rowDatas."+i+".name",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"rowData.name"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"年龄:",prop:"rowDatas."+i+".age",rules:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}]}},[a("el-input",{model:{value:t.age,callback:function(a){e.$set(t,"age",e._n(a))},expression:"rowData.age"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"手机号:",prop:"rowDatas."+i+".phoneNumber",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.phoneNumber,callback:function(a){e.$set(t,"phoneNumber",a)},expression:"rowData.phoneNumber"}})],1)],1)],1)})),a("el-row",[a("el-col",{attrs:{span:15}})],1),a("el-form-item",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")]),a("el-button",{staticClass:"margin-right-40",staticStyle:{float:"right"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],2)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("div",{staticClass:"box"},[a("el-row",e._l(4,(function(t){return a("el-col",{key:t,attrs:{span:6}},[a("div",{staticClass:"container"},[a("div",{staticClass:"iptBox margin-bottom-10"},[a("div",{staticClass:"w-50 inline-block-IE"},[a("p",[e._v(e._s(e.supervisorType[t-1]))])]),a("div",{staticClass:"w-50 inline-block-IE text-right",staticStyle:{"margin-left":"auto"}},[a("el-button",{staticClass:"margin-left-60-IE",attrs:{size:"small",type:"success",plain:""},on:{click:function(a){return e.showDialog(e.tableData["group"+t],t)}}},[e._v("修改")])],1)]),a("el-container",[2!==t?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData["group"+t],"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"title",label:e.functionName[t-1]}}),a("el-table-column",{attrs:{prop:"name",label:e.headerName[t-1]}})],1):2===t?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData["group"+t],"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"title",label:"站长："+e.dynamicValidateForm.webMaster}},[a("el-table-column",{attrs:{prop:"title",label:e.functionName[t-1]}}),a("el-table-column",{attrs:{prop:"name",label:e.headerName[t-1]}})],1)],1):e._e()],1)],1)])})),1)],1)],1)},Uo=[],qo=(a("55dd"),{name:"manageSupervisionGrid",data:function(){return{page:{pageIndex:1,pageSize:50},dynamicValidateForm:{rowDatas:[{id:null,title:"",name:"",age:null,phoneNumber:""}],webMaster:""},openDialog:!1,checked:[],selectedTownId:null,total:0,tableData:{},listLoading:!1,supervisorType:["分管副镇长","农服办","站所","村级协管"],functionName:["职能","职能","站所","村"],headerName:["姓名","姓名","人员","协管员"],webMasterData:null,selectedRows:[],deletedRows:[],showWebMaster:!1,confirm_dialogVisible:!1,selectedSupervisupervisorType:null,header:""}},created:function(){this.selectedTownId=this.$route.params.id,this.getData()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/town/get/"+this.selectedTownId).then((function(t){var a=t,i=new RegExp(/(?<="level1":)(.*)(?=,"level2leader")/g),r=i.exec(a.superviseSystem),o=r?r[1]:"[]",l=new RegExp(/(?<="level2leader":)(.*)(?=,"level2")/g),n=l.exec(a.superviseSystem),s=n?n[1]:{},c=new RegExp(/(?<="level2":)(.*)(?=,"level3")/g),u=c.exec(a.superviseSystem),d=u?u[1]:"[]",p=new RegExp(/(?<="level3":)(.*)(?=,"level4")/g),m=p.exec(a.superviseSystem),f=m?m[1]:"[]",g=new RegExp(/(?<="level4":)(.*)(?=}")/g),h=g.exec(a.superviseSystem),b=h?h[1]:"[]";a["level2leader"]=JSON.parse(s),a["level2leader"]["name"]?(e.webMasterData=a["level2leader"],e.dynamicValidateForm.webMaster=a["level2leader"]["name"]):(e.webMasterData="",e.dynamicValidateForm.webMaster=""),a["group1"]=JSON.parse(o),a["group2"]=JSON.parse(d),a["group3"]=JSON.parse(f),a["group4"]=JSON.parse(b),e.tableData=a,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},addFormRow:function(){this.dynamicValidateForm.rowDatas.push({id:null,title:"",name:"",age:null,phoneNumber:"",$$hashKey:""})},showDialog:function(e,t){this.showWebMaster=2===t,this.selectedSupervisupervisorType=t,this.dynamicValidateForm.rowDatas=e,this.openDialog=!0,this.header=this.supervisorType[t-1]},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.rowDatas[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.rowDatas.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;console.log(this.dynamicValidateForm.rowDatas),this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},updateSelectedRows:function(){var e=this;if(this.confirm_dialogVisible=!1,this.openDialog=!1,this.dynamicValidateForm.rowDatas.length){this.listLoading=!0;for(var t={},a=1;a<5;a++)this.selectedSupervisupervisorType==a?t["level"+a]=this.dynamicValidateForm.rowDatas:t["level"+a]=this.tableData["group"+a],1==a&&(t["level2leader"]={name:this.dynamicValidateForm.webMaster});$().put("/api/town/update/"+this.selectedTownId,{divisionCode:this.tableData.divisionCode,id:this.selectedTownId,name:this.tableData.name,superviseSystem:JSON.stringify(t)}).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.getData()}))}},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),t.deletedRows=[],e()})).catch((function(e){}))}}}),Mo=qo,Yo=Object(u["a"])(Mo,Eo,Uo,!1,null,null,null),Go=Yo.exports,Wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("仓储环境")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/warehouseEnv/addWarehouse/"+e.id})}}},[e._v("添加")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"warehouseName",label:"仓库名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.warehouseName))]}}])}),a("el-table-column",{attrs:{prop:"warehouseAddress",label:"仓库地址"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.warehouseAddress))]}}])}),a("el-table-column",{attrs:{prop:"warehouseArea",label:"仓库面积"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.warehouseArea))]}}])}),a("el-table-column",{attrs:{prop:"warehouseScope",label:"仓库规模"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.warehouseScope))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showDetailWarehouse(i)}}},[e._v("修改")]):e._e(),e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")]):e._e(),e.isShowViewButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.showViewWarehouse(i)}}},[e._v("查看")]):e._e()]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Qo=[],Jo={name:"warehouseEnv",components:{Pagination:_e},data:function(){return{id:-1,page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,radio:"1",tableData:[],isShowAddButton:null,isShowViewButton:null}},created:function(){this.id=this.$route.params.id,this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addWarehouse"==e.privilegeCode})),this.isShowViewButton=!!n.a.get("authList").find((function(e){return"viewWarehouse"==e.privilegeCode})),this.getList(this.id)},methods:{showDetailWarehouse:function(e){this.$router.push({path:"/productionSubject/warehouseEnv/detailsWarehouse/".concat(this.id),query:{id:e.id}})},showViewWarehouse:function(e){this.$router.push({path:"/productionSubject/warehouseEnv/viewWarehouse/".concat(this.id),query:{id:e.id}})},getList:function(e){var t=this;this.listLoading=!0,$().get("/api/warehose/all",{company_id:e,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(e){t.tableData=e.data,t.total=t.tableData.length,setTimeout((function(){t.listLoading=!1}),50)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},goBack:function(){this.$router.go(-1)},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/warehouse/delete/"+e).then((function(e){t.getList(t.id),setTimeout((function(){t.listLoading=!1}),50)})).catch((function(e){console.log(e)}))}))}}},Ho=Jo,Xo=(a("8067"),Object(u["a"])(Ho,Wo,Qo,!1,null,"8d619e00",null)),Ko=Xo.exports,Zo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("仓储环境")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改环境")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库名称",prop:"warehouseName"}},[a("el-input",{model:{value:e.ruleFormValue.warehouseName,callback:function(t){e.$set(e.ruleFormValue,"warehouseName",t)},expression:"ruleFormValue.warehouseName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"warehouseAddress"}},[a("el-input",{model:{value:e.ruleFormValue.warehouseAddress,callback:function(t){e.$set(e.ruleFormValue,"warehouseAddress",t)},expression:"ruleFormValue.warehouseAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库面积",prop:"warehouseArea"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.warehouseArea,callback:function(t){e.$set(e.ruleFormValue,"warehouseArea",t)},expression:"ruleFormValue.warehouseArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库规模",prop:"warehouseScope"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleFormValue.warehouseScope,callback:function(t){e.$set(e.ruleFormValue,"warehouseScope",t)},expression:"ruleFormValue.warehouseScope"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},el=[],tl={name:"detailsWarehouse",data:function(){return{id:-1,companyId:0,pageName:this.$route.name,listLoading:!0,ruleFormValue:{warehouseAddress:"",warehouseArea:null,warehouseName:"",warehouseScope:""},rules:{warehouseName:[{required:!0,message:"请插入",trigger:"change"}],warehouseAddress:[{required:!0,message:"请插入",trigger:"change"}],warehouseArea:[{required:!0,message:"请插入",trigger:"change"}],warehouseScope:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.id=this.$route.query.id,this.companyId=this.$route.params.id,this.getInfo()},methods:{getInfo:function(){var e=this;this.listLoading=!0,$().get("/api/warehose/get/"+this.id).then((function(t){e.ruleFormValue.warehouseAddress=t.warehouseAddress,e.ruleFormValue.warehouseArea=t.warehouseArea,e.ruleFormValue.warehouseName=t.warehouseName,e.ruleFormValue.warehouseScope=t.warehouseScope,setTimeout((function(){e.listLoading=!1}),50)})).catch((function(e){}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a={warehouseAddress:t.ruleFormValue.warehouseAddress,warehouseArea:t.ruleFormValue.warehouseArea,warehouseName:t.ruleFormValue.warehouseName,warehouseScope:t.ruleFormValue.warehouseScope,companyId:t.companyId};t.listLoading=!0,$().put("/api/warehose/update/"+t.id,a).then((function(e){setTimeout((function(){t.listLoading=!1}),50),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},al=tl,il=(a("7753"),Object(u["a"])(al,Zo,el,!1,null,"3a0c3c65",null)),rl=il.exports,ol=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("仓储环境")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("仓库详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库名称",prop:"warehouseName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleFormValue.warehouseName,callback:function(t){e.$set(e.ruleFormValue,"warehouseName",t)},expression:"ruleFormValue.warehouseName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"warehouseAddress"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleFormValue.warehouseAddress,callback:function(t){e.$set(e.ruleFormValue,"warehouseAddress",t)},expression:"ruleFormValue.warehouseAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库面积",prop:"warehouseArea"}},[a("el-input",{attrs:{type:"number",disabled:""},model:{value:e.ruleFormValue.warehouseArea,callback:function(t){e.$set(e.ruleFormValue,"warehouseArea",t)},expression:"ruleFormValue.warehouseArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库规模",prop:"warehouseScope"}},[a("el-input",{attrs:{type:"textarea",disabled:""},model:{value:e.ruleFormValue.warehouseScope,callback:function(t){e.$set(e.ruleFormValue,"warehouseScope",t)},expression:"ruleFormValue.warehouseScope"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.goBack}},[e._v("返回")])],1)],1)],1)])},ll=[],nl={name:"detailsWarehouse",data:function(){return{id:-1,companyId:0,pageName:this.$route.name,listLoading:!0,ruleFormValue:{warehouseAddress:"",warehouseArea:null,warehouseName:"",warehouseScope:""}}},created:function(){this.id=this.$route.query.id,this.companyId=this.$route.params.id,this.getInfo()},methods:{getInfo:function(){var e=this;this.listLoading=!0,$().get("/api/warehose/get/"+this.id).then((function(t){e.ruleFormValue.warehouseAddress=t.warehouseAddress,e.ruleFormValue.warehouseArea=t.warehouseArea,e.ruleFormValue.warehouseName=t.warehouseName,e.ruleFormValue.warehouseScope=t.warehouseScope,setTimeout((function(){e.listLoading=!1}),50)})).catch((function(e){}))},goBack:function(){this.$router.go(-1)}}},sl=nl,cl=(a("7275"),Object(u["a"])(sl,ol,ll,!1,null,"bb7a63f8",null)),ul=cl.exports,dl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("仓储环境")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加环境")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库名称",prop:"warehouseName"}},[a("el-input",{model:{value:e.ruleFormValue.warehouseName,callback:function(t){e.$set(e.ruleFormValue,"warehouseName",t)},expression:"ruleFormValue.warehouseName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"warehouseAddress"}},[a("el-input",{model:{value:e.ruleFormValue.warehouseAddress,callback:function(t){e.$set(e.ruleFormValue,"warehouseAddress",t)},expression:"ruleFormValue.warehouseAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库面积",prop:"warehouseArea"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.warehouseArea,callback:function(t){e.$set(e.ruleFormValue,"warehouseArea",t)},expression:"ruleFormValue.warehouseArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库规模",prop:"warehouseScope"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleFormValue.warehouseScope,callback:function(t){e.$set(e.ruleFormValue,"warehouseScope",t)},expression:"ruleFormValue.warehouseScope"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},pl=[],ml={name:"addWarehouse",data:function(){return{companyId:0,listLoading:!1,ruleFormValue:{warehouseAddress:"",warehouseArea:null,warehouseName:"",warehouseScope:""},rules:{warehouseName:[{required:!0,message:"请插入",trigger:"change"}],warehouseAddress:[{required:!0,message:"请插入",trigger:"change"}],warehouseArea:[{required:!0,message:"请插入",trigger:"change"}],warehouseScope:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.companyId=this.$route.params.id},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a={warehouseAddress:t.ruleFormValue.warehouseAddress,warehouseArea:t.ruleFormValue.warehouseArea,warehouseName:t.ruleFormValue.warehouseName,warehouseScope:t.ruleFormValue.warehouseScope,companyId:t.companyId,id:0};t.listLoading=!0,$().post("/api/warehose/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),50),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},fl=ml,gl=(a("5ac9"),Object(u["a"])(fl,dl,pl,!1,null,"5e4c6cb8",null)),hl=gl.exports,bl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[e.isShowAddButton?a("el-breadcrumb-item",[e._v("生产主体")]):a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("主营产品")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/productionSubject/mainProduct/create/"+e.id)}}},[e._v("添加")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"productName",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"doOrganic",label:"是否为有机产品"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.doOrganic?"是":"否"))]}}])}),a("el-table-column",{attrs:{prop:"atunitprice",label:"单价"}}),a("el-table-column",{attrs:{prop:"productArea",label:"产地"}}),a("el-table-column",{attrs:{prop:"variety",label:"品种"}}),a("el-table-column",{attrs:{prop:"specification",label:"规格"}}),a("el-table-column",{attrs:{prop:"grade",label:"评级"}}),a("el-table-column",{attrs:{prop:"operations",label:"操作",width:"270","class-name":"text-right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showSamplingRecord(i)}}},[e._v("第三方抽检记录")]),a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showProductBatch(i)}}},[e._v("产品批次")]),e.isShowAddButton?a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showProductVariety(i)}}},[e._v("品种定义")]):e._e(),e.isShowAddButton?a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showProductGrade(i)}}},[e._v("定义等级")]):e._e()]}}])}),a("el-table-column",{staticClass:"text-left",attrs:{prop:"operations",label:"",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showInventoryDynamics(i)}}},[e._v("库存动态")]),e.isShowAddButton?a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.goToEditMainProduct(i)}}},[e._v("修改")]):e._e(),e.isShowAddButton?a("el-button",{staticClass:"no-margin-left",staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showProductProperty(i)}}},[e._v("属性管理")]):e._e(),e.isShowAddButton?a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showProcessDefinition(i)}}},[e._v("作业定义")]):e._e()]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},vl=[],yl={name:"mainProduct",components:{Pagination:_e},data:function(){return{id:-1,page:{pageIndex:1,pageSize:20},total:0,radio:"1",tableData:[],listLoading:!0,isShowAddButton:null}},created:function(){this.id=this.$route.params.id,this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addMainProduct"==e.privilegeCode})),this.getList()},methods:{showSamplingRecord:function(e){this.$router.push("/productionSubject/mainProduct/thirdPartySamplingRecord/".concat(e.productId))},showProductBatch:function(e){this.$router.push({path:"/productionSubject/mainProduct/productBatch/".concat(e.productId),query:{companyId:this.id}})},showInventoryDynamics:function(e){this.$router.push({path:"/productionSubject/mainProduct/inventoryDynamics/".concat(this.$route.params.id),query:{productId:e.productId}})},showProcessDefinition:function(e){this.$router.push({path:"/productionSubject/mainProduct/processDefinition/".concat(this.$route.params.id),query:{productId:e.productId}})},showProductProperty:function(e){this.$router.push({path:"/productionSubject/mainProduct/productProperty/".concat(this.$route.params.id),query:{productId:e.productId}})},goToEditMainProduct:function(e){this.$router.push({path:"/productionSubject/mainProduct/edit/".concat(e.productId)})},showProductVariety:function(e){this.$router.push({path:"/productVariety/".concat(e.productId)})},showProductGrade:function(e){this.$router.push({path:"/productionGrade/".concat(e.productId)})},getList:function(){var e=this;this.listLoading=!0,$().get("/api/product_production/all",{company_id:this.id,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"productId"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},wl=yl,_l=(a("bcf6"),Object(u["a"])(wl,bl,vl,!1,null,"249ee566",null)),kl=_l.exports,Cl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加产品")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleFormValue",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{model:{value:e.ruleFormValue.productName,callback:function(t){e.$set(e.ruleFormValue,"productName",t)},expression:"ruleFormValue.productName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单价",prop:"atunitprice"}},[a("el-input",{model:{value:e.ruleFormValue.atunitprice,callback:function(t){e.$set(e.ruleFormValue,"atunitprice",e._n(t))},expression:"ruleFormValue.atunitprice"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"评级",prop:"grade"}},[a("el-input",{model:{value:e.ruleFormValue.grade,callback:function(t){e.$set(e.ruleFormValue,"grade",t)},expression:"ruleFormValue.grade"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产地",prop:"productArea"}},[a("el-input",{model:{value:e.ruleFormValue.productArea,callback:function(t){e.$set(e.ruleFormValue,"productArea",t)},expression:"ruleFormValue.productArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种",prop:"variety"}},[a("el-input",{model:{value:e.ruleFormValue.variety,callback:function(t){e.$set(e.ruleFormValue,"variety",t)},expression:"ruleFormValue.variety"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"规格",prop:"specification"}},[a("el-input",{model:{value:e.ruleFormValue.specification,callback:function(t){e.$set(e.ruleFormValue,"specification",t)},expression:"ruleFormValue.specification"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品介绍",prop:"productProfile"}},[a("el-input",{staticClass:"no-margin-bottom",attrs:{"auto-complete":"off",type:"textarea",rows:10},model:{value:e.ruleFormValue.productProfile,callback:function(t){e.$set(e.ruleFormValue,"productProfile",t)},expression:"ruleFormValue.productProfile"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"",prop:"doOrganic"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.ruleFormValue.doOrganic,callback:function(t){e.$set(e.ruleFormValue,"doOrganic",t)},expression:"ruleFormValue.doOrganic"}},[e._v("有机")])],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleFormValue")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},xl=[],Sl={name:"addMainProduct",data:function(){return{listLoading:!0,companyId:-1,ruleFormValue:{productName:"",atunitprice:0,grade:"",productArea:"",variety:"",specification:"",productProfile:"",doOrganic:"0"},rules:{productName:[{required:!0,message:"请插入",trigger:"change"}],atunitprice:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],grade:[{required:!0,message:"请插入",trigger:"change"}],productArea:[{required:!0,message:"请插入",trigger:"change"}],variety:[{required:!0,message:"请插入",trigger:"change"}],specification:[{required:!0,message:"请插入",trigger:"change"}],productProfile:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.companyId=this.$route.params.id,this.listLoading=!1},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.listLoading=!0,$().post("/api/product_production/create",{atunitprice:t.ruleFormValue.atunitprice,companyId:t.companyId,createTime:new Date,createUserId:j().user().id,doOrganic:t.ruleFormValue.doOrganic,grade:t.ruleFormValue.grade,productArea:t.ruleFormValue.productArea,productId:0,productName:t.ruleFormValue.productName,productProfile:t.ruleFormValue.productProfile,specification:t.ruleFormValue.specification,updateTime:new Date,updateUserId:j().user().id,variety:t.ruleFormValue.variety}).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.go(-1)})).catch((function(e){}))}))}}},Fl=Sl,Il=Object(u["a"])(Fl,Cl,xl,!1,null,null,null),Dl=Il.exports,Tl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改产品")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleFormValue",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{model:{value:e.ruleFormValue.productName,callback:function(t){e.$set(e.ruleFormValue,"productName",t)},expression:"ruleFormValue.productName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单价",prop:"atunitprice"}},[a("el-input",{model:{value:e.ruleFormValue.atunitprice,callback:function(t){e.$set(e.ruleFormValue,"atunitprice",e._n(t))},expression:"ruleFormValue.atunitprice"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"评级",prop:"grade"}},[a("el-input",{model:{value:e.ruleFormValue.grade,callback:function(t){e.$set(e.ruleFormValue,"grade",t)},expression:"ruleFormValue.grade"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产地",prop:"productArea"}},[a("el-input",{model:{value:e.ruleFormValue.productArea,callback:function(t){e.$set(e.ruleFormValue,"productArea",t)},expression:"ruleFormValue.productArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种",prop:"variety"}},[a("el-input",{model:{value:e.ruleFormValue.variety,callback:function(t){e.$set(e.ruleFormValue,"variety",t)},expression:"ruleFormValue.variety"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"规格",prop:"specification"}},[a("el-input",{model:{value:e.ruleFormValue.specification,callback:function(t){e.$set(e.ruleFormValue,"specification",t)},expression:"ruleFormValue.specification"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品介绍",prop:"productProfile"}},[a("el-input",{staticClass:"no-margin-bottom",attrs:{"auto-complete":"off",type:"textarea",rows:10},model:{value:e.ruleFormValue.productProfile,callback:function(t){e.$set(e.ruleFormValue,"productProfile",t)},expression:"ruleFormValue.productProfile"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"",prop:"doOrganic"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.ruleFormValue.doOrganic,callback:function(t){e.$set(e.ruleFormValue,"doOrganic",t)},expression:"ruleFormValue.doOrganic"}},[e._v("有机")])],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleFormValue")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Vl=[],Ll={name:"editMainProduct",data:function(){return{listLoading:!0,companyId:-1,ruleFormValue:{productName:"",atunitprice:0,grade:"",productArea:"",variety:"",specification:"",productProfile:"",doOrganic:"0"},rules:{productName:[{required:!0,message:"请插入",trigger:"change"}],atunitprice:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],grade:[{required:!0,message:"请插入",trigger:"change"}],productArea:[{required:!0,message:"请插入",trigger:"change"}],variety:[{required:!0,message:"请插入",trigger:"change"}],specification:[{required:!0,message:"请插入",trigger:"change"}],productProfile:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.productId=this.$route.params.id,this.listLoading=!1,this.getData()},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.listLoading=!0,$().put("/api/product_production/update/"+t.productId,{atunitprice:t.ruleFormValue.atunitprice,companyId:t.ruleFormValue.companyId?t.ruleFormValue.companyId:0,createTime:t.ruleFormValue.createTime?t.ruleFormValue.createTime:new Date,createUserId:t.ruleFormValue.createUserId?t.ruleFormValue.createUserId:j().user().id,doOrganic:t.ruleFormValue.doOrganic,grade:t.ruleFormValue.grade,productArea:t.ruleFormValue.productArea,productId:t.productId,specification:t.ruleFormValue.specification,updateTime:new Date,productName:t.ruleFormValue.productName,productProfile:t.ruleFormValue.productProfile,updateUserId:j().user().id,variety:t.ruleFormValue.variety}).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.go(-1)})).catch((function(e){}))}))},getData:function(){var e=this;this.listLoading=!0,$().get("/api/product_production/name?productid="+this.productId).then((function(t){e.ruleFormValue=t[0],setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){}))}}},Nl=Ll,$l=Object(u["a"])(Nl,Tl,Vl,!1,null,null,null),Pl=$l.exports,zl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("第三方抽检记录")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/thirdPartySampling/create/"+e.id})}}},[e._v("添加")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),e._m(0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"productCheckTime",label:"日期",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(e._f("formatDate")(a.productCheckTime))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"specimen",label:"样品",width:"150"}}),a("el-table-column",{attrs:{prop:"checkItem",label:"检测项目",width:"150"}}),a("el-table-column",{attrs:{prop:"checkResult",label:"检测结果"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(1==a.checkResult?"阴性":"阳性")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"determine",label:"判定"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(1==a.determine?"合格":"不合格")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"checkStandard",label:"检测标准"}}),a("el-table-column",{attrs:{prop:"checkOrganization",label:"检测机构"}}),e.isShowAddButton?a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/thirdPartySampling/edit/"+i.id,query:{checkId:i.id}})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}],null,!1,4048317038)}):e._e()],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Al=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[e._v("银针 第三方质量安全检测记录")])])}],Rl={name:"thirdPartySamplingRecord",components:{Pagination:_e},data:function(){return{id:-1,page:{pageIndex:1,pageSize:20},total:100,radio:"1",tableData:[],listLoading:!1,isShowAddButton:null}},created:function(){this.id=this.$route.params.id,this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addThirdPartySampling"==e.privilegeCode})),this.getList(this.id)},methods:{getList:function(e){var t=this;this.listLoading=!0,$().get("/api/product_check_record/all",{product_id:this.id,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(e){t.tableData=e.data,t.total=t.tableData.length,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/product_check_record/delete/"+e).then((function(e){t.getList()})).catch((function(e){console.log(e)}))}))}}},Bl=Rl,Ol=(a("f773"),Object(u["a"])(Bl,zl,Al,!1,null,"891ee006",null)),jl=Ol.exports,El=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加认证")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"日期",prop:"createTime"}},[a("el-input",{model:{value:e.ruleFormValue.createTime,callback:function(t){e.$set(e.ruleFormValue,"createTime",t)},expression:"ruleFormValue.createTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"样品",prop:"specimen"}},[a("el-input",{model:{value:e.ruleFormValue.specimen,callback:function(t){e.$set(e.ruleFormValue,"specimen",t)},expression:"ruleFormValue.specimen"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测项目",prop:"checkItem"}},[a("el-input",{model:{value:e.ruleFormValue.checkItem,callback:function(t){e.$set(e.ruleFormValue,"checkItem",t)},expression:"ruleFormValue.checkItem"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测结果",prop:"checkResult"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:""},model:{value:e.ruleFormValue.checkResult,callback:function(t){e.$set(e.ruleFormValue,"checkResult",t)},expression:"ruleFormValue.checkResult"}},e._l([{value:1,label:"阴性"},{value:2,label:"阳性"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"判定",prop:"determine"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:""},model:{value:e.ruleFormValue.determine,callback:function(t){e.$set(e.ruleFormValue,"determine",t)},expression:"ruleFormValue.determine"}},e._l([{value:0,label:"不合格"},{value:1,label:"合格"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测标准",prop:"checkStandard"}},[a("el-input",{model:{value:e.ruleFormValue.checkStandard,callback:function(t){e.$set(e.ruleFormValue,"checkStandard",t)},expression:"ruleFormValue.checkStandard"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测机构",prop:"checkOrganization"}},[a("el-input",{model:{value:e.ruleFormValue.checkOrganization,callback:function(t){e.$set(e.ruleFormValue,"checkOrganization",t)},expression:"ruleFormValue.checkOrganization"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Ul=[],ql={name:"addThirdPartySampling",data:function(){return{productId:-1,listLoading:!0,ruleFormValue:{createTime:(new Date).toISOString().slice(0,10),specimen:"",checkItem:"",checkResult:"",determine:"",checkStandard:"",checkOrganization:""},rules:{createTime:[{required:!0,message:"请插入",trigger:"change"}],specimen:[{required:!0,message:"请插入",trigger:"change"}],checkItem:[{required:!0,message:"请插入",trigger:"change"}],checkResult:[{required:!0,message:"请插入",trigger:"change"}],determine:[{required:!0,message:"请插入",trigger:"change"}],checkStandard:[{required:!0,message:"请插入",trigger:"change"}],checkOrganization:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.productId=this.$route.params.id,this.listLoading=!1},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.listLoading=!0,$().post("/api/product_check_record/create",{checkItem:t.ruleFormValue.checkItem,checkOrganization:t.ruleFormValue.checkOrganization,checkResult:t.ruleFormValue.checkResult,checkStandard:t.ruleFormValue.checkStandard,createTime:(new Date).toJSON(),createUserId:j().user().id,determine:t.ruleFormValue.determine,id:0,productCheckTime:(new Date).toJSON(),productId:t.productId,specimen:t.ruleFormValue.specimen,updateTime:(new Date).toJSON(),updateUserId:j().user().id}).then((function(e){t.$router.go(-1),setTimeout((function(){t.listLoading=!1}),10)})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},Ml=ql,Yl=Object(u["a"])(Ml,El,Ul,!1,null,"07c27b4e",null),Gl=Yl.exports,Wl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改认证")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"dataForm",attrs:{"label-width":"100px",model:e.data,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-input",{attrs:{disabled:""},model:{value:this.oldDate,callback:function(t){e.$set(this,"oldDate",t)},expression:"this.oldDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"样品"}},[a("el-input",{model:{value:e.data.specimen,callback:function(t){e.$set(e.data,"specimen",t)},expression:"data.specimen"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测项目"}},[a("el-input",{model:{value:e.data.checkItem,callback:function(t){e.$set(e.data,"checkItem",t)},expression:"data.checkItem"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测结果"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:""},model:{value:e.data.checkResult,callback:function(t){e.$set(e.data,"checkResult",t)},expression:"data.checkResult"}},e._l([{value:"1",label:"阴性"},{value:"2",label:"阳性"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"判定"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:""},model:{value:e.data.determine,callback:function(t){e.$set(e.data,"determine",t)},expression:"data.determine"}},e._l([{value:"0",label:"不合格"},{value:"1",label:"合格"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测标准"}},[a("el-input",{model:{value:e.data.checkStandard,callback:function(t){e.$set(e.data,"checkStandard",t)},expression:"data.checkStandard"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"检测机构"}},[a("el-input",{model:{value:e.data.checkOrganization,callback:function(t){e.$set(e.data,"checkOrganization",t)},expression:"data.checkOrganization"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dataForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Ql=[],Jl={name:"detailThirdPartySampling",data:function(){return{id:-1,oldDate:null,data:{specimen:"",checkItem:"",checkResult:"",determine:"",checkStandard:"",checkOrganization:""},dataloading:!0,rules:{createTime:[{required:!0,message:"请插入",trigger:"change"}],specimen:[{required:!0,message:"请插入",trigger:"change"}],checkItem:[{required:!0,message:"请插入",trigger:"change"}],checkResult:[{required:!0,message:"请插入",trigger:"change"}],determine:[{required:!0,message:"请插入",trigger:"change"}],checkStandard:[{required:!0,message:"请插入",trigger:"change"}],checkOrganization:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.getData(this.$route.query.checkId)},methods:{getData:function(e){var t=this;this.dataloading=!0,$().get("/api/product_check_record/get/"+e).then((function(e){t.data=e,t.oldDate=t.data.createTime.slice(0,10),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.dataloading=!0,$().put("/api/product_check_record/update/"+t.data.id,{checkItem:t.data.checkItem,checkOrganization:t.data.checkOrganization,checkResult:t.data.checkResult,checkStandard:t.data.checkStandard,createTime:t.data.createTime,createUserId:t.data.createUserId,determine:t.data.determine,id:t.data.id,productCheckTime:(new Date).toJSON(),productId:t.data.productId,specimen:t.data.specimen,updateTime:(new Date).toJSON(),updateUserId:j().user().id}).then((function(e){setTimeout((function(){t.dataloading=!1}),10),t.$router.go(-1)})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},Hl=Jl,Xl=Object(u["a"])(Hl,Wl,Ql,!1,null,"47537986",null),Kl=Xl.exports,Zl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("产品批次")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/productBatch/"+e.productId+"/create"})}}},[e._v("添加")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.deleteSelectedRow()}}},[e._v("确认")])],1)]),a("el-dialog",{attrs:{visible:e.show_TaskDialog,width:"30%",modal:""},on:{"update:visible":function(t){e.show_TaskDialog=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("作业")])])],1),a("el-form",{ref:"ruleForm1",attrs:{"label-width":"100px",model:e.ruleFormValue1}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"作业名称",prop:"productTask",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue1.productTask,callback:function(t){e.$set(e.ruleFormValue1,"productTask",t)},expression:"ruleFormValue1.productTask"}},e._l(e.taskList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.taskName}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"日期",prop:"taskDate",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue1.taskDate,callback:function(t){e.$set(e.ruleFormValue1,"taskDate",t)},expression:"ruleFormValue1.taskDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[e._v(" ")]),a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"margin-bottom-10",attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile_Live()}}},[e._v("选择文件")]),!e.file_live_1&&e.fileName1?a("el-link",{staticStyle:{display:"table"},on:{click:function(t){return e.downloadFile(e.fileName1)}}},[e._v("\n              "+e._s(e.fileName1.replace("/uploads/",""))+"\n            ")]):e._e(),e.file_live_1?a("p",[e._v("("+e._s(e.file_live_1.name)+")")]):e._e(),e.file_live_1||e.fileName1?e._e():a("p",[e._v("请选择需要上传的文件...")])],1),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"img-container no-margin-top margin-bottom-30 margin-left-10"},[!e.file_live_1&&e.fileName1?a("img",{staticClass:"preview",attrs:{src:e.downloadUrl+e.fileName1}}):e._e(),e.file_live_1&&e.fileName1?a("img",{staticClass:"preview",attrs:{src:e.image}}):e._e()]),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_1",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file1",accept:"image/*",name:"images"},on:{change:function(t){return e.handleFileUpload_Live()}}})])])],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:20}},[a("el-form-item",{staticClass:"flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.show_TaskDialog=!1}}},[e._v("关闭")]),e.isHideDeleteButton?e._e():a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.showConfirmDialog(1)}}},[e._v("删除")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmitTask("ruleForm1")}}},[e._v("保存")])],1)],1)],1)],1)],1),a("el-dialog",{attrs:{visible:e.show_ReportDialog,width:"30%",modal:""},on:{"update:visible":function(t){e.show_ReportDialog=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("上传检测报告")])])],1),a("el-form",{ref:"ruleForm2",attrs:{"label-width":"100px",model:e.ruleFormValue2}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"日期",prop:"reportDate",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.reportDate,callback:function(t){e.$set(e.ruleFormValue2,"reportDate",t)},expression:"ruleFormValue2.reportDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"结果",prop:"reportResult",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.reportResult,callback:function(t){e.$set(e.ruleFormValue2,"reportResult",t)},expression:"ruleFormValue2.reportResult"}},e._l(e.resultOption,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[e._v(" ")]),a("el-col",{staticClass:"margin-bottom-30",attrs:{span:18}},[a("el-button",{staticClass:"margin-bottom-10",attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile_Report()}}},[e._v("选择文件")]),!e.file_live_2&&e.fileName2?a("el-link",{staticClass:"margin-left-10",on:{click:function(t){return e.downloadFile(e.fileName2)}}},[e._v("\n              "+e._s(e.fileName2.replace("/uploads/",""))+"\n            ")]):e._e(),e.file_live_2?a("p",[e._v("("+e._s(e.file_live_2.name)+")")]):e._e(),e.file_live_2||e.fileName2?e._e():a("p",[e._v("请选择需要上传的文件...")])],1),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_2",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file2",name:"images"},on:{change:function(t){return e.handleFileUpload_Report()}}})])])],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:20}},[a("el-form-item",{staticClass:"flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.show_ReportDialog=!1}}},[e._v("关闭")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmitReport("ruleForm2")}}},[e._v("保存")])],1)],1)],1)],1)],1),a("el-dialog",{attrs:{visible:e.show_PropertyDialog,width:"30%",modal:""},on:{"update:visible":function(t){e.show_PropertyDialog=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("属性")])])],1),a("el-form",{ref:"ruleForm3",attrs:{"label-width":"100px",model:e.ruleFormValue3}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"属性名称",prop:"propertyName",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",on:{change:function(t){return e.makePropertyValueList()}},model:{value:e.ruleFormValue3.propertyName,callback:function(t){e.$set(e.ruleFormValue3,"propertyName",t)},expression:"ruleFormValue3.propertyName"}},e._l(e.propertyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.propertyName,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"属性值",prop:"propertyValue",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue3.propertyValue,callback:function(t){e.$set(e.ruleFormValue3,"propertyValue",t)},expression:"ruleFormValue3.propertyValue"}},e._l(e.propertyValueList,(function(e){return a("el-option",{key:e.index,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:20}},[a("el-form-item",{staticClass:"flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.show_PropertyDialog=!1}}},[e._v("关闭")]),e.isHideDeleteButton?e._e():a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.showConfirmDialog(3)}}},[e._v("删除")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmitProperty("ruleForm3")}}},[e._v("保存")])],1)],1)],1)],1)],1),a("el-dialog",{attrs:{visible:e.show_SaleDialog,width:"30%",modal:""},on:{"update:visible":function(t){e.show_SaleDialog=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("销售")])])],1),a("el-form",{ref:"ruleForm4",attrs:{"label-width":"100px",model:e.ruleFormValue4}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"销售去向",prop:"productSaleDestination",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-80",model:{value:e.ruleFormValue4.productSaleDestination,callback:function(t){e.$set(e.ruleFormValue4,"productSaleDestination",t)},expression:"ruleFormValue4.productSaleDestination"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-select",{staticClass:"w-100",on:{change:function(t){return e.onChangeSaleList()}},model:{value:e.ruleFormValue4.selProductSaleDestination,callback:function(t){e.$set(e.ruleFormValue4,"selProductSaleDestination",t)},expression:"ruleFormValue4.selProductSaleDestination"}},e._l(e.saleList,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"日期",prop:"saleDate",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue4.saleDate,callback:function(t){e.$set(e.ruleFormValue4,"saleDate",t)},expression:"ruleFormValue4.saleDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[e._v(" ")]),a("el-col",{staticClass:"margin-bottom-30",attrs:{span:18}},[a("el-button",{staticClass:"margin-bottom-10",attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile_Sale()}}},[e._v("选择文件")]),!e.file_live_3&&e.fileName3?a("el-link",{staticClass:"margin-left-10",on:{click:function(t){return e.downloadFile(e.fileName3)}}},[e._v("\n              "+e._s(e.fileName3.replace("/uploads/",""))+"\n            ")]):e._e(),e.file_live_3?a("p",[e._v("("+e._s(e.file_live_3.name)+")")]):e._e(),e.file_live_3||e.fileName3?e._e():a("p",[e._v("请选择需要上传的文件...")])],1),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_3",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file3",name:"images"},on:{change:function(t){return e.handleFileUpload_Sale()}}})])])],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:20}},[a("el-form-item",{staticClass:"flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.show_SaleDialog=!1}}},[e._v("关闭")]),e.isHideDeleteButton?e._e():a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.showConfirmDialog(2)}}},[e._v("删除")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmitSale("ruleForm4")}}},[e._v("保存")])],1)],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"grade",label:"批次名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(e._f("formatDateTime")(a.createTime))+" , \n          "+e._s(e.getVarietyName(a.varietyId))+" , \n          "+e._s(e.getGradeName(a.varietyGrade))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"batchNumber",label:"批次号"}}),a("el-table-column",{attrs:{prop:"taskData",label:"作业"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"w-100"},e._l(i.taskData,(function(t){return a("el-link",{key:t.id,staticStyle:{display:"table"},on:{click:function(a){return e.onClickTaskRow(t)}}},[e._v(e._s(e._f("formatDate")(t.taskDate))+" "+e._s(e.getTaskName(t.productTask)))])})),1)]}}])}),a("el-table-column",{attrs:{prop:"saleData",label:"销售"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"w-100"},e._l(i.saleData,(function(t){return a("el-link",{key:t.id,staticStyle:{display:"table"},on:{click:function(a){return e.onClickSaleRow(t)}}},[e._v(e._s(e._f("formatDate")(t.saleDate))+" "+e._s(t.productSaleDestination))])})),1)]}}])}),a("el-table-column",{attrs:{prop:"property",label:"属性名称"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"w-100"},e._l(i.property,(function(t){return a("el-link",{key:t.index,staticStyle:{display:"table"},on:{click:function(a){return e.onClickPropertyRow(t,i)}}},[e._v(e._s(e.getPropertyName(t.propertyName)))])})),1)]}}])}),a("el-table-column",{attrs:{prop:"reportResult",label:"检测报告"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.reportResult>-1?e.resultOption[a.reportResult].label:"没有报告"))]}}])}),e.isShowAddButton?a("el-table-column",{attrs:{label:"操作","class-name":"text-center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{staticClass:"margin-bottom-10",attrs:{size:"small",plain:"",type:"warning"},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/productBatch/"+e.productId+"/edit/"+i.id})}}},[e._v("修改")]),a("el-button",{staticClass:"margin-bottom-10",attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.showDialog(i,"show_TaskDialog",!0)}}},[e._v("作业")]),a("el-button",{staticClass:"margin-bottom-10",attrs:{size:"small",plain:"",type:"success",disabled:0==i.taskData.length},on:{click:function(t){return e.showDialog(i,"show_ReportDialog",!0)}}},[e._v("上传检测报告")]),a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.showDialog(i,"show_PropertyDialog",!0)}}},[e._v("属性")]),a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.showDialog(i,"show_SaleDialog",!0)}}},[e._v("销售")])]}}],null,!1,3804949057)}):e._e()],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},en=[],tn=(a("5df3"),a("4f7f"),a("75fc")),an={name:"productBatch",components:{Pagination:_e},data:function(){return{fileName1:"",file_live_1:null,image:null,fileName2:"",file_live_2:null,fileName3:"",file_live_3:null,productId:-1,itemId:null,page:{pageIndex:1,pageSize:20},total:0,radio:"1",isShowAddButton:null,tableData:null,confirm_dialogVisible:!1,listLoading:!1,show_TaskDialog:!1,show_ReportDialog:!1,show_PropertyDialog:!1,show_SaleDialog:!1,varietyList:[],selectedBatchId:null,isHideDeleteButton:!1,taskList:[],saleList:[],originPropertyName:null,originPropertyValue:null,downloadUrl:null,batchTaskList:[],batchSaleList:[],propertyList:[],selectedBatchRow:[],propertyValueList:[],companyId:null,ruleFormValue1:{productTask:null,taskDate:""},ruleFormValue2:{reportDate:"",reportResult:null},ruleFormValue4:{productSaleDestination:"",selProductSaleDestination:"",saleDate:""},ruleFormValue3:{propertyName:"",propertyValue:""},gradeOption:[{gradeId:1,gradeName:"特级"},{gradeId:2,gradeName:"高级"},{gradeId:3,gradeName:"中级"},{gradeId:4,gradeName:"低级"}],resultOption:[{value:0,label:"不合格"},{value:1,label:"合格"}]}},created:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.productId=this.$route.params.id,this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addProductBatch"==e.privilegeCode})),this.downloadUrl=I.DOWNLOAD_URL(),this.companyId=this.$route.query.companyId,this.companyId&&n.a.set("selectedCompanyId",this.companyId),this.getVarietyData(),this.getTaskList(),this.getProductProperty(),this.getList();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getList:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getBatchTaskList();case 2:return e.next=4,this.getBatchSaleList();case 4:this.listLoading=!0,$().get("/api/product_batch/all",{productId:this.productId,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(e){var a=e.data;t.total=e.total;var i=function(e){a[e].property&&(a[e].property=JSON.parse(a[e].property));var i=t.batchTaskList.filter((function(t){return t.productBatchId===a[e].id})),r=t.batchSaleList.filter((function(t){return t.productBatchId===a[e].id}));if(i&&(a[e].taskData=i),r){for(var o in a[e].saleData=r,r)t.saleList.push(r[o].productSaleDestination);t.saleList=Object(tn["a"])(new Set(t.saleList))}};for(var r in a)i(r);t.tableData=a,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.error(e)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTaskList:function(){var e=this;this.listLoading=!0,$().get("/api/product_task/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.taskList=t.data})).catch((function(e){console.error(e)}))},getVarietyData:function(){var e=this;$().get("/api/product_variety/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.varietyList=t.data})).catch((function(e){console.error(e)}))},getBatchTaskList:function(){var e=this;return this.listLoading=!0,$().get("/api/product_batch_task/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.batchTaskList=t.data})).catch((function(e){console.error(e)}))},getBatchSaleList:function(){var e=this;return this.listLoading=!0,$().get("/api/product_sale/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.batchSaleList=t.data})).catch((function(e){console.error(e)}))},getProductProperty:function(){var e=this;$().get("/api/product_property/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.propertyList=t.data})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},chooseFile_Live:function(){document.getElementById("file1").click()},chooseFile_Report:function(){document.getElementById("file2").click()},chooseFile_Sale:function(){document.getElementById("file3").click()},handleFileUpload_Live:function(e){this.file_live_1=this.$refs.file_live_1.files[0],this.image=null;var t=new FileReader,a=this;t.onload=function(e){a.image=e.target.result},this.file_live_1?(t.readAsDataURL(this.file_live_1),this.fileName1=this.file_live_1.name):this.fileName1=""},handleFileUpload_Report:function(){this.file_live_2=this.$refs.file_live_2.files[0]},handleFileUpload_Sale:function(){this.file_live_3=this.$refs.file_live_3.files[0]},getVarietyName:function(e){var t=this.varietyList.find((function(t){return t.id===e}));return t?t.varietyName:""},getGradeName:function(e){var t=this.gradeOption.find((function(t){return t.gradeId===e}));return t?t.gradeName:""},showDialog:function(e,t,a){switch(this.ruleFormValue2.reportDate=e.reportTime,this.ruleFormValue2.reportResult=e.reportResult,this.fileName2=e.reportFile,this.formatData(),t){case"show_TaskDialog":this.show_TaskDialog=!0;break;case"show_ReportDialog":this.show_ReportDialog=!0;break;case"show_PropertyDialog":this.show_PropertyDialog=!0;break;case"show_SaleDialog":this.show_SaleDialog=!0;break}this.selectedBatchId=e.id,this.selectedBatchRow=e,this.isHideDeleteButton=a},onSubmitTask:function(e){var t=this;this.$refs[e].validate((function(e){if(e)if(t.isHideDeleteButton){$().get("/api/tracing/getByBatchNumber/"+t.selectedBatchRow.batchNumber).then((function(e){if(!e){var a=new FormData,i=t.getVarietyName(t.selectedBatchRow.varietyId),r=t.getGradeName(t.selectedBatchRow.varietyGrade);a.append("id",0),a.append("productId",t.productId),a.append("companyId",n.a.get("selectedCompanyId")),a.append("productionTime",t.ruleFormValue1.taskDate),a.append("locationId",0),a.append("charge",""),t.selectedBatchRow.reportTime&&(t.selectedBatchRow.reportTime=new Date(t.selectedBatchRow.reportTime),a.append("reportTime",t.selectedBatchRow.reportTime)),a.append("batchNumber",t.selectedBatchRow.batchNumber),a.append("batchName",i+","+r),a.append("tracingNumber",""),a.append("tracingTimeType",0),a.append("webTimeType",0),a.append("tracingAmount",0),a.append("printStatus",0),a.append("createTime",new Date),a.append("createUserId",j().user().id),a.append("updateTime",new Date),a.append("updateUserId",0),$().post("/api/tracing/create",a).then((function(e){console.log(e)})).catch((function(e){console.error(e)}))}})).catch((function(e){console.error(e)})),t.show_TaskDialog=!1;var a=new FormData,i=new Date;t.listLoading=!0,a.append("createTime",i),a.append("companyId",n.a.get("selectedCompanyId")),a.append("file",t.file_live_1),a.append("id",0),a.append("createUserId",j().user().id),a.append("productId",t.productId),a.append("productBatchId",t.selectedBatchId),a.append("productTask",t.ruleFormValue1.productTask),a.append("taskDate",t.ruleFormValue1.taskDate),a.append("updateTime",i),$().post("/api/product_batch_task/create",a).then((function(e){t.formatData(),setTimeout((function(){t.listLoading=!1,t.getList()}),500)})).catch((function(e){console.error(e)}))}else{t.show_TaskDialog=!1;var r=new FormData,o=new Date;t.listLoading=!0,r.append("companyId",n.a.get("selectedCompanyId")),t.file_live_1&&r.append("file",t.file_live_1),r.append("id",t.itemId),r.append("productId",t.productId),r.append("productBatchId",t.selectedBatchId),r.append("productTask",t.ruleFormValue1.productTask);var l=t.ruleFormValue1.taskDate;l=new Date(l).toDateString(),r.append("taskDate",l),r.append("updateTime",o),$().put("/api/product_batch_task/update/"+t.itemId,r).then((function(e){t.formatData(),setTimeout((function(){t.listLoading=!1,t.getList()}),500)})).catch((function(e){console.error(e)}))}}))},onSubmitSale:function(e){var t=this;this.$refs[e].validate((function(e){if(e)if(t.isHideDeleteButton){t.show_SaleDialog=!1;var a=new FormData,i=new Date;t.listLoading=!0,a.append("createTime",i),a.append("companyId",n.a.get("selectedCompanyId")),a.append("file",t.file_live_3),a.append("id",0),a.append("createUserId",j().user().id),a.append("productId",t.productId),a.append("productBatchId",t.selectedBatchId),a.append("productSaleDestination",t.ruleFormValue4.productSaleDestination),a.append("saleDate",t.ruleFormValue4.saleDate),a.append("updateTime",i),$().post("/api/product_sale/create",a).then((function(e){t.formatData(),setTimeout((function(){t.listLoading=!1,t.getList()}),500)})).catch((function(e){console.error(e)}))}else{t.show_SaleDialog=!1;var r=new FormData,o=new Date;t.listLoading=!0,r.append("companyId",n.a.get("selectedCompanyId")),t.file_live_3&&r.append("file",t.file_live_3),r.append("id",t.itemId),r.append("productId",t.productId),r.append("productBatchId",t.selectedBatchId),r.append("productSaleDestination",t.ruleFormValue4.productSaleDestination);var l=t.ruleFormValue4.saleDate;l=new Date(l).toDateString(),r.append("saleDate",l),r.append("updateTime",o),$().put("/api/product_sale/update/"+t.itemId,r).then((function(e){t.formatData(),setTimeout((function(){t.listLoading=!1,t.getList()}),500)})).catch((function(e){console.error(e)}))}}))},onSubmitReport:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.show_ReportDialog=!1,t.listLoading=!0;var a=new Date(t.ruleFormValue2.reportDate),i=new FormData,r=new Date;i.append("batchNumber",t.selectedBatchRow.batchNumber),i.append("createTime",t.selectedBatchRow.createTime),i.append("companyId",n.a.get("selectedCompanyId")),i.append("id",t.selectedBatchId),i.append("createUserId",t.selectedBatchRow.createUserId),i.append("productId",t.productId),i.append("property",JSON.stringify(t.selectedBatchRow.property)),i.append("varietyGrade",t.selectedBatchRow.varietyGrade),i.append("varietyId",t.selectedBatchRow.varietyId),i.append("updateTime",r),i.append("updateUserId",j().user().id),t.file_live_2&&i.append("file",t.file_live_2),i.append("reportResult",t.ruleFormValue2.reportResult),i.append("reportTime",a),$().put("/api/product_batch/update/"+t.selectedBatchId,i).then((function(e){t.getList()})).catch((function(e){console.error(e)}))}}))},onSubmitProperty:function(e){var t=this;this.$refs[e].validate((function(e){if(e){if(t.show_PropertyDialog=!1,t.listLoading=!0,t.selectedBatchRow.property){var a=t.selectedBatchRow.property.find((function(e){return e.propertyName===t.ruleFormValue3.propertyName&&e.propertyValue===t.ruleFormValue3.propertyValue})),i=t.selectedBatchRow.property.indexOf(a);i>-1&&t.selectedBatchRow.property.splice(i,1)}var r=new FormData,o=new Date;if(t.isHideDeleteButton){var l=[];t.selectedBatchRow.property&&(l=t.selectedBatchRow.property),l.push({propertyName:t.ruleFormValue3.propertyName,propertyValue:t.ruleFormValue3.propertyValue}),r.append("property",JSON.stringify(l))}else{var s=t.selectedBatchRow.property.find((function(e){return e.propertyName===t.originPropertyName&&e.propertyValue===t.originPropertyValue})),c=t.selectedBatchRow.property.indexOf(s);t.selectedBatchRow.property[c].propertyName=t.ruleFormValue3.propertyName,t.selectedBatchRow.property[c].propertyValue=t.ruleFormValue3.propertyValue,s=t.selectedBatchRow.property,r.append("property",JSON.stringify(s))}if(r.append("batchNumber",t.selectedBatchRow.batchNumber),r.append("createTime",t.selectedBatchRow.createTime),r.append("companyId",n.a.get("selectedCompanyId")),r.append("id",t.selectedBatchId),r.append("createUserId",t.selectedBatchRow.createUserId),r.append("productId",t.productId),r.append("varietyGrade",t.selectedBatchRow.varietyGrade),r.append("varietyId",t.selectedBatchRow.varietyId),r.append("updateTime",o),r.append("updateUserId",j().user().id),t.selectedBatchRow.reportResult>-1&&r.append("reportResult",t.selectedBatchRow.reportResult),t.selectedBatchRow.reportTime){var u=new Date(t.selectedBatchRow.reportTime);r.append("reportTime",u)}$().put("/api/product_batch/update/"+t.selectedBatchId,r).then((function(e){t.getList()})).catch((function(e){console.error(e)}))}}))},getTaskName:function(e){var t=this.taskList.find((function(t){return t.id===e}));return t?t.taskName:""},getPropertyName:function(e){var t=this.propertyList.find((function(t){return t.id===e}));return t?t.propertyName:""},downloadFile:function(e){S()({url:I.DOWNLOAD_URL()+e,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},formatData:function(){this.ruleFormValue1.taskDate="",this.ruleFormValue1.productTask=null,this.file_live_1=null,this.fileName1="",this.ruleFormValue4.saleDate="",this.ruleFormValue4.productSaleDestination="",this.file_live_3=null,this.fileName3="",this.file_live_2=null,this.ruleFormValue3.propertyName=null,this.ruleFormValue3.propertyValue=null},onClickTaskRow:function(e){this.isHideDeleteButton=!1,this.itemId=e.id,this.selectedBatchId=e.productBatchId,this.ruleFormValue1.productTask=e.productTask,this.ruleFormValue1.taskDate=e.taskDate,this.fileName1=e.productTaskFile,this.show_TaskDialog=!0},onClickSaleRow:function(e){this.isHideDeleteButton=!1,this.itemId=e.id,this.selectedBatchId=e.productBatchId,this.ruleFormValue4.productSaleDestination=e.productSaleDestination,this.ruleFormValue4.saleDate=e.saleDate,this.fileName3=e.productSaleFile,this.show_SaleDialog=!0},onClickPropertyRow:function(e,t){this.isHideDeleteButton=!1,this.itemId=e.productName,this.selectedBatchRow=t,this.selectedBatchId=t.id,this.ruleFormValue3.propertyName=e.propertyName,this.ruleFormValue3.propertyValue=e.propertyValue,this.makePropertyValueList(),this.originPropertyName=e.propertyName,this.originPropertyValue=e.propertyValue,this.show_PropertyDialog=!0},deleteSelectedTask:function(){var e=this;this.show_TaskDialog=!1,this.listLoading=!0,$().delete("/api/product_batch_task/delete/"+this.itemId).then((function(t){e.formatData(),setTimeout((function(){e.listLoading=!1,e.getList()}),500)})).catch((function(e){console.error(e)}))},deleteSelectedSale:function(){var e=this;this.show_SaleDialog=!1,this.listLoading=!0,$().delete("/api/product_sale/delete/"+this.itemId).then((function(t){e.formatData(),setTimeout((function(){e.listLoading=!1,e.getList()}),500)})).catch((function(e){console.error(e)}))},deleteSelectedProperty:function(){var e=this;this.show_PropertyDialog=!1,this.listLoading=!0;var t=this.selectedBatchRow.property.find((function(t){return t.propertyName===e.originPropertyName&&t.propertyValue===e.originPropertyValue})),a=this.selectedBatchRow.property.indexOf(t);a>-1&&this.selectedBatchRow.property.splice(a,1);var i=new FormData,r=new Date;if(t=this.selectedBatchRow.property,i.append("property",JSON.stringify(t)),i.append("batchNumber",this.selectedBatchRow.batchNumber),i.append("createTime",this.selectedBatchRow.createTime),i.append("companyId",n.a.get("selectedCompanyId")),i.append("id",this.selectedBatchId),i.append("createUserId",this.selectedBatchRow.createUserId),i.append("productId",this.productId),i.append("varietyGrade",this.selectedBatchRow.varietyGrade),i.append("varietyId",this.selectedBatchRow.varietyId),i.append("updateTime",r),i.append("updateUserId",j().user().id),this.selectedBatchRow.reportTime){var o=new Date(this.selectedBatchRow.reportTime);i.append("reportTime",o)}this.selectedBatchRow.reportResult>-1&&i.append("reportResult",this.selectedBatchRow.reportResult),$().put("/api/product_batch/update/"+this.selectedBatchId,i).then((function(t){e.getList()})).catch((function(e){console.error(e)}))},onChangeSaleList:function(){this.ruleFormValue4.productSaleDestination=this.ruleFormValue4.selProductSaleDestination},makePropertyValueList:function(){var e=this,t=this.propertyList.find((function(t){return t.id===e.ruleFormValue3.propertyName})),a=t.propertyOptions;this.propertyValueList=a.split(","),this.propertyValueList=Object(tn["a"])(new Set(this.propertyValueList))},showConfirmDialog:function(e){this.confirm_dialogVisible=!0,this.category=e},deleteSelectedRow:function(){switch(this.confirm_dialogVisible=!1,this.category){case 1:this.deleteSelectedTask();break;case 2:this.deleteSelectedSale();break;case 3:this.deleteSelectedProperty();break}}}},rn=an,on=(a("9acf"),Object(u["a"])(rn,Zl,en,!1,null,"126ce746",null)),ln=on.exports,nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("产品批次")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加批次")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{rules:e.dataRules,model:e.ruleFormdata,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品种",prop:"varietyId"}},[a("el-select",{model:{value:e.ruleFormdata.varietyId,callback:function(t){e.$set(e.ruleFormdata,"varietyId",t)},expression:"ruleFormdata.varietyId"}},e._l(e.varietyList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.varietyName}})})),1)],1),a("el-form-item",{attrs:{label:"等级名称",prop:"varietyGrade"}},[a("el-select",{model:{value:e.ruleFormdata.varietyGrade,callback:function(t){e.$set(e.ruleFormdata,"varietyGrade",t)},expression:"ruleFormdata.varietyGrade"}},e._l(e.gradeOption,(function(e){return a("el-option",{key:e.gradeId,attrs:{value:e.gradeId,label:e.gradeName}})})),1)],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},sn=[],cn={name:"addProductBatch",data:function(){return{id:-1,ruleFormdata:{varietyId:null,varietyGrade:null},varietyList:[],productId:null,listLoading:!1,gradeOption:[{gradeId:1,gradeName:"特级"},{gradeId:2,gradeName:"高级"},{gradeId:3,gradeName:"中级"},{gradeId:4,gradeName:"低级"}],dataRules:{varietyId:[{required:!0,message:"请选择",trigger:"change"}],varietyGrade:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.productId=this.$route.params.id,this.getVarietyData()},methods:{getVarietyData:function(){var e=this;this.listLoading=!0,$().get("/api/product_variety/all",{productId:this.productId,sortBy:"id"}).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.varietyList=t.data})).catch((function(e){console.error(e)}))},onSubmit:function(e){var t=this,a=new FormData,i=new Date;this.$refs[e].validate((function(e){e&&(t.listLoading=!0,a.append("batchNumber",""),a.append("createTime",i),a.append("companyId",n.a.get("selectedCompanyId")),a.append("id",0),a.append("createUserId",j().user().id),a.append("productId",t.productId),a.append("property",""),a.append("varietyGrade",t.ruleFormdata.varietyGrade),a.append("varietyId",t.ruleFormdata.varietyId),a.append("updateTime",i),$().post("/api/product_batch/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/productionSubject/mainProduct/productBatch/".concat(t.productId)})})).catch((function(e){console.error(e)})))}))}}},un=cn,dn=Object(u["a"])(un,nn,sn,!1,null,"4261b4b5",null),pn=dn.exports,mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("产品批次")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改批次")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{rules:e.dataRules,model:e.ruleFormdata,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品种",prop:"varietyId"}},[a("el-select",{model:{value:e.ruleFormdata.varietyId,callback:function(t){e.$set(e.ruleFormdata,"varietyId",t)},expression:"ruleFormdata.varietyId"}},e._l(e.varietyList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.varietyName}})})),1)],1),a("el-form-item",{attrs:{label:"等级名称",prop:"varietyGrade"}},[a("el-select",{model:{value:e.ruleFormdata.varietyGrade,callback:function(t){e.$set(e.ruleFormdata,"varietyGrade",t)},expression:"ruleFormdata.varietyGrade"}},e._l(e.gradeOption,(function(e){return a("el-option",{key:e.gradeId,attrs:{value:e.gradeId,label:e.gradeName}})})),1)],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},fn=[],gn={name:"addProductBatch",data:function(){return{id:-1,ruleFormdata:{varietyId:null,varietyGrade:null},varietyList:[],productId:null,listLoading:!1,selectedId:null,rowData:[],gradeOption:[{gradeId:1,gradeName:"特级"},{gradeId:2,gradeName:"高级"},{gradeId:3,gradeName:"中级"},{gradeId:4,gradeName:"低级"}],dataRules:{varietyId:[{required:!0,message:"请选择",trigger:"change"}],varietyGrade:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.productId=this.$route.params.id,this.selectedId=this.$route.params.id1,this.getVarietyData(),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/product_batch/get/"+this.selectedId).then((function(t){e.rowData=t,e.ruleFormdata.varietyId=t.varietyId,e.ruleFormdata.varietyGrade=t.varietyGrade,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},getVarietyData:function(){var e=this;this.listLoading=!0,$().get("/api/product_variety/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.varietyList=t.data})).catch((function(e){console.error(e)}))},onSubmit:function(e){var t=this,a=new FormData,i=new Date;this.$refs[e].validate((function(e){if(e){if(t.listLoading=!0,a.append("batchNumber",t.rowData.batchNumber),a.append("createTime",t.rowData.createTime),a.append("companyId",n.a.get("selectedCompanyId")),a.append("id",t.rowData.id),a.append("createUserId",t.rowData.createUserId),a.append("productId",t.productId),a.append("property",t.rowData.property),a.append("varietyGrade",t.ruleFormdata.varietyGrade),a.append("varietyId",t.ruleFormdata.varietyId),a.append("updateTime",i),a.append("updateUserId",j().user().id),t.rowData.reportTime){var r=new Date(t.rowData.reportTime);a.append("reportTime",r)}t.rowData.reportResult&&a.append("reportResult",t.rowData.reportResult),$().put("/api/product_batch/update/"+t.selectedId,a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/productionSubject/mainProduct/productBatch/".concat(t.productId)})})).catch((function(e){console.error(e)}))}}))}}},hn=gn,bn=Object(u["a"])(hn,mn,fn,!1,null,"23c1762c",null),vn=bn.exports,yn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("库存动态")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/inventoryDynamics/addInventoryDynamics/"+e.companyId,query:{productId:e.productId}})}}},[e._v("添加")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"productName",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(e.filterProduct(a.productId))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"warehouse",label:"所在仓库"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(e.filterWarehouse(a.warehouseId))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"repertoryAmount",label:"储存数量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.repertoryAmount))]}}])}),a("el-table-column",{attrs:{prop:"variety",label:"品种"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.variety))]}}])}),a("el-table-column",{attrs:{prop:"grade",label:"评级"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(e.getGradeName(a.grade))+"\n        ")]}}])}),e.isShowAddButton?a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/inventoryDynamics/editInventoryDynamics/"+i.id,query:{productId:i.productId,repertoryAmount:i.repertoryAmount,warehouseId:i.warehouseId,grade:i.grade,variety:i.variety,companyId:e.companyId}})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}],null,!1,2216200058)}):e._e()],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},wn=[],_n={name:"inventoryDynamics",components:{Pagination:_e},data:function(){return{companyId:-1,page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,radio:"1",tableData:null,productName:"",warehouses:[],productId:-1,productDetail:[],isShowAddButton:null}},created:function(){this.companyId=this.$route.params.id,this.productId=this.$route.query.productId,this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addInventoryDynamics"==e.privilegeCode})),this.getList(),this.getProductionDetail(),this.getWarehouseDetail()},methods:{handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/product_repetory/delete/"+e).then((function(e){t.getList(),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))}))},getWarehouseDetail:function(){var e=this;$().get("/api/warehose/all",{company_id:this.companyId,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.warehouses=t.data})).catch((function(e){}))},filterWarehouse:function(e){console.log(this.warehouses,e);var t=this.warehouses.find((function(t){return t.id===e}));return console.log(t),t?t.warehouseName:""},getGradeName:function(e){var t=["低级","中级","高级","特级"];return t[e-1]},getList:function(){var e=this;this.listLoading=!0,$().get("/api/product_repetory/all",{product_id:this.productId,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},getProductionDetail:function(){var e=this;$().get("/api/product_production/name").then((function(t){e.productDetail=t})).catch((function(e){console.log(e)}))},filterProduct:function(e){var t=this.productDetail.find((function(t){return t.productId===e}));return t?t.productName:""}}},kn=_n,Cn=(a("6b14"),Object(u["a"])(kn,yn,wn,!1,null,"980cfe9c",null)),xn=Cn.exports,Sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("品种定义")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/productVariety/create/"+e.productId)}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"varietyName",label:"品种名称"}}),a("el-table-column",{attrs:{prop:"varietySort",label:"品种排序"}}),a("el-table-column",{attrs:{prop:"yield",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.push({path:"/productVariety/edit/"+i.id})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Fn=[],In={name:"varietyDefinition",components:{Pagination:_e},data:function(){return{filter_Share:0,productId:-1,listLoading:!1,page:{pageIndex:1,pageSize:20},total:0,options:[{value:0,label:"全部"},{value:1,label:"否"},{value:2,label:"是"}],tableData:[]}},created:function(){this.productId=this.$route.params.id,this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/product_variety/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,productId:this.productId,sortBy:"id"}).then((function(t){var a=t.data;e.total=a.length,e.tableData=a,setTimeout((function(){e.listLoading=!1}),10)})).catch((function(e){console.error(e)}))},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/product_variety/delete/"+e).then((function(e){t.getList()})).catch((function(e){console.log(e)}))}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Dn=In,Tn=Object(u["a"])(Dn,Sn,Fn,!1,null,"1f16b2cc",null),Vn=Tn.exports,Ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("添加品种")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 选择文件 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否共享",prop:"filter_Share"}},[a("el-select",{attrs:{placeholder:"请选择是否共享"},model:{value:e.filter_Share,callback:function(t){e.filter_Share=t},expression:"filter_Share"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种名称",prop:"varietyName"}},[a("el-input",{model:{value:e.ruleFormValue.varietyName,callback:function(t){e.$set(e.ruleFormValue,"varietyName",t)},expression:"ruleFormValue.varietyName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种排序",prop:"varietySort"}},[a("el-input",{model:{value:e.ruleFormValue.varietySort,callback:function(t){e.$set(e.ruleFormValue,"varietySort",e._n(t))},expression:"ruleFormValue.varietySort"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},Nn=[],$n={name:"addVarietyDefinition",data:function(){return{filter_Share:0,dialogLoading:!0,dialogVisible:!1,productId:-1,ruleFormValue:{varietyName:"",varietySort:""},options:[{value:0,label:"否"},{value:1,label:"是"}],rules:{varietyName:[{required:!0,message:"请选择",trigger:"change"}],varietySort:[{required:!0,message:"请选择"},{type:"number",message:"插入号码"}]}}},created:function(){this.productId=this.$route.params.id,this.dialogLoading=!1},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.dialogLoading=!0,$().post("/api/product_variety/create",{createTime:(new Date).toJSON(),createUserId:j().user().id,doShare:t.filter_Share,id:0,productId:t.productId,updateTime:(new Date).toJSON(),updateUserId:j().user().id,varietyName:t.ruleFormValue.varietyName,varietySort:t.ruleFormValue.varietySort}).then((function(e){setTimeout((function(){t.dialogLoading=!1}),10),t.$router.go(-1)})).catch((function(e){}))}))}}},Pn=$n,zn=Object(u["a"])(Pn,Ln,Nn,!1,null,null,null),An=zn.exports,Rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("修改品种")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 选择文件 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否共享"}},[a("el-select",{attrs:{placeholder:"请选择是否共享"},model:{value:e.filter_Share,callback:function(t){e.filter_Share=t},expression:"filter_Share"}},e._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,selected:"item.value"==e.filter_Share}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种名称",prop:"varietyName"}},[a("el-input",{model:{value:e.ruleFormValue.varietyName,callback:function(t){e.$set(e.ruleFormValue,"varietyName",t)},expression:"ruleFormValue.varietyName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种排序",prop:"varietySort"}},[a("el-input",{model:{value:e.ruleFormValue.varietySort,callback:function(t){e.$set(e.ruleFormValue,"varietySort",e._n(t))},expression:"ruleFormValue.varietySort"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},Bn=[],On={name:"editVarietyDefinition",data:function(){return{filter_Share:0,dialogVisible:!1,dataloading:!0,varietyId:-1,ruleFormValue:{varietyName:"",varietySort:""},options:[{value:"0",label:"否"},{value:"1",label:"是"}],rules:{varietyName:[{required:!0,message:"请选择",trigger:"change"}],varietySort:[{required:!0,message:"请选择"},{type:"number",message:"插入号码"}]}}},created:function(){this.varietyId=this.$route.params.id,this.getVariety(this.varietyId)},methods:{getVariety:function(e){var t=this;this.dataloading=!0,$().get("/api/product_variety/get/"+e).then((function(e){t.ruleFormValue=e,t.ruleFormValue.varietySort=Number(t.ruleFormValue.varietySort),t.filter_Share=t.ruleFormValue.doShare,setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.dataloading=!0,$().put("/api/product_variety/update/"+t.varietyId,{createTime:t.ruleFormValue.createTime,createUserId:t.ruleFormValue.createUserId,doShare:t.filter_Share,id:0,productId:t.ruleFormValue.productId,updateTime:(new Date).toJSON(),updateUserId:j().user().id,varietyName:t.ruleFormValue.varietyName,varietySort:t.ruleFormValue.varietySort}).then((function(e){setTimeout((function(){t.dataloading=!1}),10),t.$router.go(-1)})).catch((function(e){}))}))}}},jn=On,En=Object(u["a"])(jn,Rn,Bn,!1,null,null,null),Un=En.exports,qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加动态")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleFormValue.productName,callback:function(t){e.$set(e.ruleFormValue,"productName",t)},expression:"ruleFormValue.productName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"warehouseId"}},[a("el-select",{attrs:{disabled:!(this.warehouseOptions.length>0)},model:{value:e.ruleFormValue.warehouseId,callback:function(t){e.$set(e.ruleFormValue,"warehouseId",t)},expression:"ruleFormValue.warehouseId"}},e._l(e.warehouseOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"储存数量",prop:"repertoryAmount"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.repertoryAmount,callback:function(t){e.$set(e.ruleFormValue,"repertoryAmount",t)},expression:"ruleFormValue.repertoryAmount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种",prop:"variety"}},[a("el-input",{model:{value:e.ruleFormValue.variety,callback:function(t){e.$set(e.ruleFormValue,"variety",t)},expression:"ruleFormValue.variety"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"评级",prop:"grade"}},[a("el-select",{attrs:{disabled:!(e.options.length>0)},model:{value:e.ruleFormValue.grade,callback:function(t){e.$set(e.ruleFormValue,"grade",t)},expression:"ruleFormValue.grade"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Mn=[],Yn={name:"addInventoryDynamics",data:function(){return{listLoading:!1,warehouseOptions:[],productDetail:[],ruleFormValue:{createTime:"",updateTime:"",grade:"",productId:0,companyId:0,repertoryAmount:"",variety:"",warehouseId:null,productName:""},rules:{variety:[{required:!0,message:"请插入",trigger:"change"}],repertoryAmount:[{required:!0,message:"请插入",trigger:"change"}],grade:[{required:!0,message:"请选择",trigger:"change"}],warehouseId:[{required:!0,message:"请选择",trigger:"change"}]},options:[{value:"1",label:"低级"},{value:"2",label:"中级"},{value:"3",label:"高级"},{value:"4",label:"特级"}]}},created:function(){this.ruleFormValue.productId=this.$route.query.productId,this.ruleFormValue.companyId=this.$route.params.id,this.getProductionDetail(),this.getWarehouseList(),this.getCurrentTime()},methods:{getProductionDetail:function(){var e=this;this.listLoading=!0,$().get("/api/product_production/name",{productid:this.ruleFormValue.productId}).then((function(t){e.ruleFormValue.productName=t[0].productName,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCurrentTime:function(){var e=new Date;this.ruleFormValue.createTime=e.toISOString(),this.ruleFormValue.updateTime=e.toISOString()},getWarehouseList:function(){var e=this;this.listLoading=!0,$().get("/api/warehose/all",{company_id:this.ruleFormValue.companyId,sortBy:"id"}).then((function(t){for(var a in t.data)e.warehouseOptions.push({value:t.data[a].id,label:t.data[a].warehouseName});setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a={createTime:t.ruleFormValue.createTime,updateTime:t.ruleFormValue.updateTime,grade:t.ruleFormValue.grade,id:0,productId:t.ruleFormValue.productId,repertoryAmount:t.ruleFormValue.repertoryAmount,variety:t.ruleFormValue.variety,warehouseId:t.ruleFormValue.warehouseId};t.listLoading=!0,$().post("/api/product_repetory/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},Gn=Yn,Wn=Object(u["a"])(Gn,qn,Mn,!1,null,"689ce5e4",null),Qn=Wn.exports,Jn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改动态")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleFormValue.productName,callback:function(t){e.$set(e.ruleFormValue,"productName",t)},expression:"ruleFormValue.productName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"warehouseId"}},[a("el-select",{attrs:{disabled:!(this.warehouseOptions.length>0)},model:{value:e.ruleFormValue.warehouseId,callback:function(t){e.$set(e.ruleFormValue,"warehouseId",t)},expression:"ruleFormValue.warehouseId"}},e._l(e.warehouseOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"储存数量",prop:"repertoryAmount"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.repertoryAmount,callback:function(t){e.$set(e.ruleFormValue,"repertoryAmount",t)},expression:"ruleFormValue.repertoryAmount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种",prop:"variety"}},[a("el-input",{model:{value:e.ruleFormValue.variety,callback:function(t){e.$set(e.ruleFormValue,"variety",t)},expression:"ruleFormValue.variety"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"评级",prop:"grade"}},[a("el-select",{attrs:{disabled:!(e.options.length>0)},model:{value:e.ruleFormValue.grade,callback:function(t){e.$set(e.ruleFormValue,"grade",t)},expression:"ruleFormValue.grade"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Hn=[],Xn=(a("6b54"),a("4917"),{name:"editInventoryDynamics",data:function(){return{listLoading:!1,warehouseData:[],warehouseOptions:[],ruleFormValue:{createTime:"",updateTime:"",grade:"",productId:0,repertoryAmount:"",variety:"",warehouseId:null,productName:"",id:0,companyId:0},rules:{variety:[{required:!0,message:"请插入",trigger:"change"}],repertoryAmount:[{required:!0,message:"请插入",trigger:"change"}],grade:[{required:!0,message:"请选择",trigger:"change"}],warehouseId:[{required:!0,message:"请选择",trigger:"change"}]},options:[{value:"1",label:"低级"},{value:"2",label:"中级"},{value:"3",label:"高级"},{value:"4",label:"特级"}]}},created:function(){this.ruleFormValue.productId=this.$route.query.productId,this.ruleFormValue.repertoryAmount=this.$route.query.repertoryAmount.toString().match(/(\d+)/)[0],this.ruleFormValue.warehouseId=this.$route.query.warehouseId,this.ruleFormValue.grade=this.$route.query.grade,this.ruleFormValue.variety=this.$route.query.variety,this.ruleFormValue.id=this.$route.params.id,this.ruleFormValue.companyId=this.$route.query.companyId,this.getProductionDetail(),this.getWarehouseList(),this.getCurrentTime()},methods:{getProductionDetail:function(){var e=this;this.listLoading=!0,$().get("/api/product_production/name",{productid:this.ruleFormValue.productId}).then((function(t){e.ruleFormValue.productName=t[0].productName,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCurrentTime:function(){var e=new Date;this.ruleFormValue.createTime=e.toISOString(),this.ruleFormValue.updateTime=e.toISOString()},getWarehouseList:function(){var e=this;this.listLoading=!0,$().get("/api/warehose/all",{company_id:this.ruleFormValue.companyId,sortBy:"id"}).then((function(t){for(var a in t.data)e.warehouseOptions.push({value:t.data[a].id,label:t.data[a].warehouseName});setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a={createTime:t.ruleFormValue.createTime,updateTime:t.ruleFormValue.updateTime,grade:t.ruleFormValue.grade,id:t.ruleFormValue.id,productId:t.ruleFormValue.productId,repertoryAmount:t.ruleFormValue.repertoryAmount,variety:t.ruleFormValue.variety,warehouseId:t.ruleFormValue.warehouseId};t.listLoading=!0,$().put("/api/product_repetory/update/"+t.ruleFormValue.id,a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}}),Kn=Xn,Zn=Object(u["a"])(Kn,Jn,Hn,!1,null,"02273676",null),es=Zn.exports,ts=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("定义等级")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/productionGrade/create/"+e.productId)}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"gradeName",label:"等级名称"}}),a("el-table-column",{attrs:{prop:"gradeSort",label:"等级排序"}}),a("el-table-column",{attrs:{prop:"yield",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.push({path:"/productionGrade/edit/"+i.id})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},as=[],is={name:"definitoinLevel",components:{Pagination:_e},data:function(){return{listLoading:!1,productId:-1,page:{pageIndex:1,pageSize:20},total:0,tableData:[]}},created:function(){this.productId=this.$route.params.id,this.getList()},methods:{rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},getList:function(){var e=this;this.listLoading=!0,$().get("/api/product_grade/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,productId:this.productId,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),10)})).catch((function(e){console.error(e)}))},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/product_grade/delete/"+e).then((function(e){t.getList()})).catch((function(e){console.log(e)}))}))}}},rs=is,os=Object(u["a"])(rs,ts,as,!1,null,null,null),ls=os.exports,ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品/定义等级")]),a("el-breadcrumb-item",[e._v("添加品种")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 选择文件 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogloading,expression:"dialogloading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否共享"}},[a("el-select",{attrs:{placeholder:"请选择是否共享"},model:{value:e.filter_Share,callback:function(t){e.filter_Share=t},expression:"filter_Share"}},e._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,selected:"item.value"==e.filter_Share}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"等级名称",prop:"gradeName"}},[a("el-input",{model:{value:e.ruleFormValue.gradeName,callback:function(t){e.$set(e.ruleFormValue,"gradeName",t)},expression:"ruleFormValue.gradeName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"等级排序",prop:"gradeSort"}},[a("el-input",{model:{value:e.ruleFormValue.gradeSort,callback:function(t){e.$set(e.ruleFormValue,"gradeSort",e._n(t))},expression:"ruleFormValue.gradeSort"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},ss=[],cs={name:"addDefinitionLevel",data:function(){return{filter_Share:0,dialogVisible:!1,dialogloading:!0,productId:-1,ruleFormValue:{gradeName:"",gradeSort:0},options:[{value:0,label:"否"},{value:1,label:"是"}],rules:{gradeName:[{required:!0,message:"请选择",trigger:"change"}],gradeSort:[{required:!0,message:"请选择"},{type:"number",message:"插入号码"}]}}},created:function(){this.productId=this.$route.params.id,this.dialogloading=!1},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.dialogloading=!0,$().post("/api/product_grade/create",{createTime:(new Date).toJSON(),createUserId:j().user().id,doShare:t.filter_Share,gradeName:t.ruleFormValue.gradeName,gradeSort:t.ruleFormValue.gradeSort,id:0,productId:t.productId,updateTime:(new Date).toJSON(),updateUserId:j().user().id}).then((function(e){setTimeout((function(){t.dataloading=!1}),10),t.$router.go(-1)})).catch((function(e){}))}))}}},us=cs,ds=Object(u["a"])(us,ns,ss,!1,null,null,null),ps=ds.exports,ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产主体")]),a("el-breadcrumb-item",[e._v("主营产品/定义等级")]),a("el-breadcrumb-item",[e._v("修改等级")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 选择文件 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否共享"}},[a("el-select",{attrs:{placeholder:"请选择是否共享"},model:{value:e.filter_Share,callback:function(t){e.filter_Share=t},expression:"filter_Share"}},e._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,selected:"item.value"==e.filter_Share}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"等级名称",prop:"gradeName"}},[a("el-input",{model:{value:e.ruleFormValue.gradeName,callback:function(t){e.$set(e.ruleFormValue,"gradeName",t)},expression:"ruleFormValue.gradeName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"等级排序",prop:"gradeSort"}},[a("el-input",{model:{value:e.ruleFormValue.gradeSort,callback:function(t){e.$set(e.ruleFormValue,"gradeSort",e._n(t))},expression:"ruleFormValue.gradeSort"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},fs=[],gs={name:"editDefinitionLevel",data:function(){return{filter_Share:0,dialogVisible:!1,dataloading:!0,varietyId:-1,ruleFormValue:{gradeName:"",gradeSort:0},options:[{value:"0",label:"否"},{value:"1",label:"是"}],rules:{gradeName:[{required:!0,message:"请选择",trigger:"change"}],gradeSort:[{required:!0,message:"请选择"},{type:"number",message:"插入号码"}]}}},created:function(){this.varietyId=this.$route.params.id,this.getVariety(this.varietyId)},methods:{getVariety:function(e){var t=this;this.dataloading=!0,$().get("/api/product_grade/get/"+e).then((function(e){t.ruleFormValue=e,t.ruleFormValue.gradeSort=Number(t.ruleFormValue.gradeSort),t.filter_Share=t.ruleFormValue.doShare,setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.dataloading=!0,$().put("/api/product_grade/update/"+t.varietyId,{createTime:t.ruleFormValue.createTime,createUserId:t.ruleFormValue.createUserId,doShare:t.filter_Share,gradeName:t.ruleFormValue.gradeName,gradeSort:t.ruleFormValue.gradeSort,id:0,productId:t.ruleFormValue.productId,updateTime:(new Date).toJSON(),updateUserId:j().user().id}).then((function(e){setTimeout((function(){t.dataloading=!1}),10),t.$router.go(-1)})).catch((function(e){}))}))}}},hs=gs,bs=Object(u["a"])(hs,ms,fs,!1,null,null,null),vs=bs.exports,ys=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("/作业定义")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[a("el-button",{staticStyle:{"margin-right":".5rem"},attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/processDefinition/addProcessDefinition/"+e.productId,query:{doShare:1,companyId:e.id}})}}},[e._v("添加")]),a("el-select",{staticStyle:{"margin-right":".5rem"},attrs:{disabled:!(e.options.length>0)},model:{value:e.processType,callback:function(t){e.processType=t},expression:"processType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"taskName",label:"作业名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.taskName))]}}])}),a("el-table-column",{attrs:{prop:"taskType",label:"作业类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.taskTypeList[a.taskType-1]))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/processDefinition/editProcessDefinition/"+i.id,query:{companyId:e.id}})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},ws=[],_s={name:"processDefinition",components:{Pagination:_e},data:function(){return{id:-1,page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,radio:"1",tableData:null,productName:"",productId:0,doShare:"",taskImages:"",taskName:"",taskType:"",taskTypeList:["收获前","收获","收获后"],processType:"",options:[{value:"1",label:"作业共享"},{value:"2",label:"银针"},{value:"3",label:"白牡丹"}]}},created:function(){this.id=this.$route.params.id,this.productId=this.$route.query.productId,this.getList(this.productId)},methods:{handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/product_task/delete/"+e).then((function(e){t.getList(t.productId),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))}))},getList:function(e){var t=this;this.listLoading=!0,$().get("/api/product_task/all",{productId:e,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(e){t.tableData=e.data,t.total=e.total,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},ks=_s,Cs=(a("7056"),Object(u["a"])(ks,ys,ws,!1,null,"07b10fc0",null)),xs=Cs.exports,Ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加作业")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"作业名称",prop:"taskName"}},[a("el-input",{model:{value:e.ruleFormValue.taskName,callback:function(t){e.$set(e.ruleFormValue,"taskName",t)},expression:"ruleFormValue.taskName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"taskType"}},[a("el-select",{attrs:{disabled:!(e.options.length>0)},model:{value:e.ruleFormValue.taskType,callback:function(t){e.$set(e.ruleFormValue,"taskType",t)},expression:"ruleFormValue.taskType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",{staticClass:"label-margin",attrs:{label:"添加图片",prop:"file"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*"},on:{change:function(t){return e.handleFileUpload()}}}),a("div",{staticStyle:{border:"solid 1px",width:"100px",height:"100px"},on:{click:function(t){return e.chooseFile()}}},[!e.imageSelectedUrl&&e.ruleFormValue.taskImages?a("img",{staticStyle:{width:"7rem",height:"7rem"},attrs:{src:e.imageUrl+e.ruleFormValue.taskImages}}):e._e(),e.imageSelectedUrl?a("img",{staticStyle:{width:"7rem",height:"7rem"},attrs:{src:e.imageSelectedUrl}}):e._e()]),a("div",{staticClass:"item-value"},[e.file?a("div",{},[e._v("("+e._s(e.file.name)+")")]):a("div",{},[e._v("请选择需要上传的文件...")])])]),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Fs=[],Is={name:"addProcessDefinition",data:function(){return{file:null,listLoading:!1,imageUrl:"",imageSelectedUrl:"",companyId:-1,ruleFormValue:{file:null,taskType:"",taskName:"",taskImages:"",doShare:"",productId:0},rules:{taskName:[{required:!0,message:"请插入",trigger:"change"}],taskType:[{required:!0,message:"请插入",trigger:"change"}]},options:[{value:"1",label:"收获前"},{value:"2",label:"收获"},{value:"3",label:"收获后"}]}},created:function(){this.ruleFormValue.productId=this.$route.params.id,this.ruleFormValue.doShare=this.$route.query.doShare,this.companyId=this.$route.query.companyId},methods:{chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0];var e=new FileReader;this.imageSelectedUrl="";var t=this;e.onload=function(e){t.imageSelectedUrl=e.target.result},this.file&&e.readAsDataURL(this.file)},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a=new FormData;a.append("doShare",t.ruleFormValue.doShare),a.append("id","0"),a.append("productId",t.ruleFormValue.productId),a.append("taskName",t.ruleFormValue.taskName),a.append("taskType",t.ruleFormValue.taskType),a.append("file",t.file),t.listLoading=!0,$().post("/api/product_task/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},Ds=Is,Ts=(a("0eec"),Object(u["a"])(Ds,Ss,Fs,!1,null,null,null)),Vs=Ts.exports,Ls=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加作业")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"作业名称",prop:"taskName"}},[a("el-input",{model:{value:e.ruleFormValue.taskName,callback:function(t){e.$set(e.ruleFormValue,"taskName",t)},expression:"ruleFormValue.taskName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"仓库地址",prop:"taskType"}},[a("el-select",{attrs:{disabled:!(e.options.length>0)},model:{value:e.ruleFormValue.taskType,callback:function(t){e.$set(e.ruleFormValue,"taskType",t)},expression:"ruleFormValue.taskType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",{staticClass:"label-margin",attrs:{label:"添加图片",prop:"file"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*"},on:{change:function(t){return e.handleFileUpload()}}}),a("div",{staticStyle:{border:"solid 1px",width:"100px",height:"100px"},on:{click:function(t){return e.chooseFile()}}},[!e.imageSelectedUrl&&e.ruleFormValue.taskImages?a("img",{staticStyle:{width:"7rem",height:"7rem"},attrs:{src:e.imageUrl+e.ruleFormValue.taskImages}}):e._e(),e.imageSelectedUrl?a("img",{staticStyle:{width:"7rem",height:"7rem"},attrs:{src:e.imageSelectedUrl}}):e._e()]),a("div",{staticClass:"item-value"},[e.file?a("div",[e._v("("+e._s(e.fileName)+")")]):a("div",{},[e._v("请选择需要上传的文件...")])])]),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Ns=[],$s={name:"editProcessDefinition",data:function(){return{file:null,fileName:"",listLoading:!1,imageUrl:"",imageSelectedUrl:"",companyId:-1,ruleFormValue:{doShare:"",taskName:"",taskType:"",file:null,productId:0,id:0,taskImages:""},rules:{taskName:[{required:!0,message:"请插入",trigger:"change"}],taskType:[{required:!0,message:"请插入",trigger:"change"}]},options:[{value:"1",label:"收获前"},{value:"2",label:"收获"},{value:"3",label:"收获后"}]}},created:function(){this.ruleFormValue.id=this.$route.params.id,this.companyId=this.$route.query.companyId,this.getInfo()},methods:{getInfo:function(){var e=this;this.listLoading=!0,$().get("/api/product_task/get/"+this.ruleFormValue.id).then((function(t){e.ruleFormValue.taskType=t.taskType,e.ruleFormValue.taskName=t.taskName,e.ruleFormValue.doShare=t.doShare,e.ruleFormValue.taskImages=t.taskImages,e.ruleFormValue.productId=t.productId,e.imageUrl=I.DOWNLOAD_URL(),e.file=t.taskImages,e.fileName=t.taskImages,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){}))},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(e){this.file=this.$refs.file.files[0];var t=new FileReader;this.imageSelectedUrl="";var a=this;t.onload=function(e){a.imageSelectedUrl=e.target.result},this.file&&(t.readAsDataURL(this.file),this.fileName=this.file.name)},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a=new FormData;a.append("doShare",t.ruleFormValue.doShare),a.append("taskName",t.ruleFormValue.taskName),a.append("taskType",t.ruleFormValue.taskType),a.append("productId",t.ruleFormValue.productId),null!=t.file&&a.append("file",t.file),t.listLoading=!0,$().put("/api/product_task/update/"+t.ruleFormValue.id,a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},Ps=$s,zs=Object(u["a"])(Ps,Ls,Ns,!1,null,"59cce1e1",null),As=zs.exports,Rs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("属性管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[a("el-button",{staticStyle:{"margin-right":".5rem"},attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/productProperty/addProductProperty/"+e.id})}}},[e._v("添加")]),a("el-select",{staticStyle:{"margin-right":".5rem"},attrs:{disabled:!(e.options.length>0)},model:{value:e.processType,callback:function(t){e.processType=t},expression:"processType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/"+e.companyId})}}},[e._v("返回")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"propertyName",label:"属性名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.propertyName))]}}])}),a("el-table-column",{attrs:{prop:"propertyOptions",label:"选项排序"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.propertySort))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/"+i.id,query:{productId:e.id,companyId:e.companyId,customValue:0}})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Bs=[],Os={name:"productProperty",components:{Pagination:_e},data:function(){return{id:-1,companyId:-1,page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,radio:"1",tableData:null,propertyName:"",propertyOptions:"",propertySort:"",options:[{value:"1",label:"属性共享"},{value:"2",label:"银针"},{value:"3",label:"白牡丹"}],processType:""}},created:function(){this.id=this.$route.query.productId,this.companyId=this.$route.params.id,this.getList(this.id)},methods:{handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/product_property/delete/"+e).then((function(e){t.getList(t.id),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))}))},getList:function(e){var t=this;this.listLoading=!0,$().get("/api/product_property/all",{productId:e,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(e){t.tableData=e.data,t.total=e.total,setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},js=Os,Es=(a("3354"),Object(u["a"])(js,Rs,Bs,!1,null,"38bc3835",null)),Us=Es.exports,qs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加属性")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"属性名称",prop:"propertyName"}},[a("el-input",{model:{value:e.ruleFormValue.propertyName,callback:function(t){e.$set(e.ruleFormValue,"propertyName",t)},expression:"ruleFormValue.propertyName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"属性可选项",prop:"propertyOptions"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleFormValue.propertyOptions,callback:function(t){e.$set(e.ruleFormValue,"propertyOptions",t)},expression:"ruleFormValue.propertyOptions"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"属性排序",prop:"propertySort"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.propertySort,callback:function(t){e.$set(e.ruleFormValue,"propertySort",t)},expression:"ruleFormValue.propertySort"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Ms=[],Ys={name:"addProductProperty",data:function(){return{listLoading:!1,ruleFormValue:{doShare:"1",propertyName:"",propertyOptions:"",propertySort:"",productId:0},rules:{propertyName:[{required:!0,message:"请插入",trigger:"change"}],propertySort:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.ruleFormValue.productId=this.$route.params.id},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a={id:0,productId:t.ruleFormValue.productId,propertyName:t.ruleFormValue.propertyName,propertyOptions:"",propertySort:t.ruleFormValue.propertySort.toString(),doShare:t.ruleFormValue.doShare};t.listLoading=!0,$().post("/api/product_property/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},goBack:function(){this.$router.go(-1)}}},Gs=Ys,Ws=Object(u["a"])(Gs,qs,Ms,!1,null,"b675f87c",null),Qs=Ws.exports,Js=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改属性")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"属性名称",prop:"propertyName"}},[a("el-input",{model:{value:e.ruleFormValue.propertyName,callback:function(t){e.$set(e.ruleFormValue,"propertyName",t)},expression:"ruleFormValue.propertyName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"属性可选项",prop:"propertyOptions"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleFormValue.propertyOptions,callback:function(t){e.$set(e.ruleFormValue,"propertyOptions",t)},expression:"ruleFormValue.propertyOptions"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"属性排序",prop:"propertySort"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.propertySort,callback:function(t){e.$set(e.ruleFormValue,"propertySort",t)},expression:"ruleFormValue.propertySort"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/"+e.ruleFormValue.id,query:{productId:e.ruleFormValue.productId,optionData:e.optionList,companyId:e.companyId,sortFlag:e.sortFlag}})}}},[e._v("编辑选项")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Hs=[],Xs={name:"editProductProperty",data:function(){return{listLoading:!1,companyId:-1,optionList:[],sortFlag:1,ruleFormValue:{propertyName:"",propertyOptions:"",propertySort:null,productId:0,doShare:"",id:-1},rules:{propertyName:[{required:!0,message:"请插入",trigger:"change"}],propertySort:[{required:!0,message:"请插入",trigger:"change"}]},customValue:0,optionData:null}},created:function(){this.ruleFormValue.productId=this.$route.query.productId,this.companyId=this.$route.query.companyId,this.ruleFormValue.id=this.$route.params.id,this.customValue=this.$route.query.customValue,0==this.customValue?this.getProductPropertyInfo():this.getCustomValue()},methods:{getCustomValue:function(){var e=this;if(this.ruleFormValue.optionData=this.$route.query.optionData,null==this.ruleFormValue.optionData)this.getProductPropertyInfo();else{this.ruleFormValue.propertyOptions=this.ruleFormValue.optionData[0].name;for(var t=1;t<this.ruleFormValue.optionData.length;t++)this.ruleFormValue.propertyOptions=this.ruleFormValue.propertyOptions+","+this.ruleFormValue.optionData[t].name;this.splitStatus(this.ruleFormValue.propertyOptions),this.listLoading=!0,$().get("/api/product_property/get/"+this.$route.params.id).then((function(t){setTimeout((function(){e.listLoading=!1}),50),e.ruleFormValue.propertyName=t.propertyName,e.ruleFormValue.propertySort=parseInt(t.propertySort)})).catch((function(e){console.log(e)}))}},getProductPropertyInfo:function(){var e=this;this.listLoading=!0,$().get("/api/product_property/get/"+this.ruleFormValue.id).then((function(t){setTimeout((function(){e.listLoading=!1}),50),e.ruleFormValue.propertyName=t.propertyName,e.ruleFormValue.propertyOptions=t.propertyOptions,e.splitStatus(e.ruleFormValue.propertyOptions),e.ruleFormValue.propertySort=parseInt(t.propertySort),e.ruleFormValue.doShare=t.doShare})).catch((function(e){}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a={productId:t.ruleFormValue.productId,propertyName:t.ruleFormValue.propertyName,propertyOptions:t.ruleFormValue.propertyOptions,propertySort:t.ruleFormValue.propertySort.toString(),doShare:t.ruleFormValue.doShare};t.listLoading=!0,$().put("/api/product_property/update/"+t.ruleFormValue.id,a).then((function(e){setTimeout((function(){t.listLoading=!1}),50),t.$router.push({path:"/productionSubject/mainProduct/productProperty/".concat(t.companyId),query:{productId:t.ruleFormValue.productId}})})).catch((function(e){}))}))},goBack:function(){this.$router.push({path:"/productionSubject/mainProduct/productProperty/".concat(this.companyId),query:{productId:this.ruleFormValue.productId}})},splitStatus:function(e){var t=e.replace(" ",""),a=t.split(",");for(var i in a)this.optionList.push({id:parseInt(i),name:a[i]})}}},Ks=Xs,Zs=Object(u["a"])(Ks,Js,Hs,!1,null,"dbf659e6",null),ec=Zs.exports,tc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("属性管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("/编辑选项")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[a("el-button",{staticStyle:{"margin-right":".5rem"},attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/addCustomProductProperty/"+e.id,query:{productId:e.productId,optionData:e.tableData,companyId:e.companyId}})}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.goBack()}}},[e._v("返回")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{label:"选项名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.name))]}}])}),a("el-table-column",{attrs:{label:"选项排序"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(null==a.sortId?a.sortId=a.rowIndex+1:a.sortId))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/editCustomProductProperty/"+e.id,query:{productId:e.productId,optionData:e.tableData,companyId:e.companyId,id:i.rowIndex}})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(""+e.rowIndex)}}},[e._v("删除")])]}}])})],1)],1)])},ac=[],ic={name:"customProductProperty",data:function(){return{id:-1,companyId:-1,productId:-1,page:{pageIndex:1,pageSize:20},tableData:null,listLoading:!0,total:0,radio:"1",name:"",sortId:null,customValue:1}},created:function(){this.id=this.$route.params.id,this.productId=this.$route.query.productId,this.tableData=this.$route.query.optionData,""==this.tableData[0].name&&1==this.tableData.length&&this.tableData.splice(0,1),this.companyId=this.$route.query.companyId,this.tableData.sort(this.arraySort)},methods:{arraySort:function(e,t){return e.sortId===t.sortId?0:e.sortId<t.sortId?-1:1},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.tableData.splice(e,1)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},goBack:function(){this.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/".concat(this.id),query:{productId:this.productId,optionData:this.tableData,companyId:this.companyId,customValue:1}})}}},rc=ic,oc=(a("ce9c"),Object(u["a"])(rc,tc,ac,!1,null,"4fec7658",null)),lc=oc.exports,nc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("属性管理")]),a("el-breadcrumb-item",[e._v("编辑选项")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加属性")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选项名称",prop:"name"}},[a("el-input",{model:{value:e.ruleFormValue.name,callback:function(t){e.$set(e.ruleFormValue,"name",t)},expression:"ruleFormValue.name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选项排序",prop:"sort"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.sort,callback:function(t){e.$set(e.ruleFormValue,"sort",t)},expression:"ruleFormValue.sort"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},sc=[],cc={name:"addCustomProductProperty",data:function(){return{listLoading:!1,rootId:null,companyId:null,ruleFormValue:{id:1,name:"",productId:null,sort:null,optionData:null},rules:{name:[{required:!0,message:"请插入",trigger:"change"}],sort:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.rootId=this.$route.params.id,this.ruleFormValue.id=this.$route.query.id,this.ruleFormValue.optionData=this.$route.query.optionData,this.companyId=this.$route.query.companyId,this.ruleFormValue.productId=this.$route.query.productId},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.ruleFormValue.optionData.push({id:t.ruleFormValue.optionData.length+1,name:t.ruleFormValue.name,sortId:parseInt(t.ruleFormValue.sort)}),t.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/".concat(t.rootId),query:{productId:t.ruleFormValue.productId,optionData:t.ruleFormValue.optionData,companyId:t.companyId}})}))},goBack:function(){this.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/".concat(this.rootId),query:{productId:this.ruleFormValue.productId,optionData:this.ruleFormValue.optionData,companyId:this.companyId}})}}},uc=cc,dc=Object(u["a"])(uc,nc,sc,!1,null,"6f865151",null),pc=dc.exports,mc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("主营产品")]),a("el-breadcrumb-item",[e._v("属性管理")]),a("el-breadcrumb-item",[e._v("编辑选项")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改属性")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选项名称",prop:"name"}},[a("el-input",{model:{value:e.ruleFormValue.name,callback:function(t){e.$set(e.ruleFormValue,"name",t)},expression:"ruleFormValue.name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选项排序",prop:"sort"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleFormValue.sortId,callback:function(t){e.$set(e.ruleFormValue,"sortId",t)},expression:"ruleFormValue.sortId"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},fc=[],gc={name:"editCustomProductProperty",data:function(){return{listLoading:!1,rootId:null,companyId:null,productId:null,ruleFormValue:{id:1,name:"",sortId:"",optionData:null},rules:{name:[{required:!0,message:"请插入",trigger:"change"}],sortId:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.ruleFormValue.id=this.$route.query.id,this.ruleFormValue.optionData=this.$route.query.optionData,this.ruleFormValue.name=this.ruleFormValue.optionData[this.ruleFormValue.id].name,this.ruleFormValue.sortId=this.ruleFormValue.optionData[this.ruleFormValue.id].sortId,this.companyId=this.$route.query.companyId,this.rootId=this.$route.params.id,this.productId=this.$route.query.productId},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.ruleFormValue.optionData[t.ruleFormValue.id].name=t.ruleFormValue.name,t.ruleFormValue.optionData[t.ruleFormValue.id].sortId=t.ruleFormValue.sortId,t.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/".concat(t.rootId),query:{id:t.ruleFormValue.id,productId:t.productId,optionData:t.ruleFormValue.optionData,companyId:t.companyId}}))}))},goBack:function(){this.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/".concat(this.rootId),query:{id:this.ruleFormValue.id,productId:this.productId,optionData:this.ruleFormValue.optionData,companyId:this.companyId}})}}},hc=gc,bc=Object(u["a"])(hc,mc,fc,!1,null,"51551cac",null),vc=bc.exports,yc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("三品认证")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"select_label"},[e._v(e._s(e.getCompanyName()))]),a("div",{staticClass:"select_label"},[e._v("分类")]),a("el-select",{staticStyle:{"margin-right":"30px"},attrs:{placeholder:"请选择"},on:{change:e.getList},model:{value:e.filterStatus,callback:function(t){e.filterStatus=t},expression:"filterStatus"}},e._l(e.argriculturalClassification,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1),a("div",{staticClass:"select_label"},[e._v("认证类型")]),a("el-select",{staticStyle:{"margin-right":"30px"},attrs:{placeholder:"请选择"},on:{change:e.getList},model:{value:e.certificationType,callback:function(t){e.certificationType=t},expression:"certificationType"}},e._l(e.certificationTypes,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/productionSubject/threeProduct/addThreeProduct",query:{creditCode:e.creditCode}})}}},[e._v("添加认证")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"productName",label:"产品",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.filterProduct(a.productId))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"argriculturalClassification",label:"分类",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.appStatus1[a.argriculturalClassification])+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"certificationType",label:"认证类型",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.certificationTypes[a.certificationType])+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"certificationNo",label:"证书编号",width:""}}),a("el-table-column",{attrs:{label:"证书有效期",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.getCertification(a.certificationStartTime,a.certificationEndTime))+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"有效时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(e.getPeriod(a.certificationStartTime,a.certificationEndTime))+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"output",label:"产量",width:""}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},wc=[],_c={name:"threeProduct",components:{Pagination:_e},data:function(){return{companyData:[],page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],creditCode:-1,productName:"",productCategory:0,productDetail:[],filterStatus:0,certificationType:0,appStatus1:["全部","养殖业","畜牧业","种植业"],argriculturalClassification:["全部","养殖业","畜牧业","种植业"],certificationTypes:["全部","无公害产品","绿色食品","有机食品","地理标志"]}},created:function(){this.creditCode=this.$route.query.creditCode,this.getProductionDetail(),this.getCompanyProduction(),this.getList()},methods:{getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyData=t})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/quality_standard/all",{creditCode:this.$route.query.creditCode,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,argriculturalClassification:this.filterStatus,certificationType:this.certificationType,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getProductionDetail:function(){var e=this;$().get("/api/product_production/name").then((function(t){e.productDetail=t})).catch((function(e){console.log(e)}))},filterProduct:function(e){var t=this.productDetail.find((function(t){return t.productId===e}));return t?t.productName:""},getCompanyName:function(){var e=this,t=this.companyData.find((function(t){return t.creditCode===e.$route.query.creditCode}));return t?t.companyName:""},getCertification:function(e,t){return e.substr(0,10)+"至"+t.substr(0,10)},getPeriod:function(e,t){var a=parseInt(e.substr(0,4)),i=parseInt(t.substr(0,4));return(i-a<=0?0:i-a)+"年"},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},kc=_c,Cc=Object(u["a"])(kc,yc,wc,!1,null,null,null),xc=Cc.exports,Sc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",[e._v("三品认证")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加认证")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业",prop:"creditCode"}},[e._v(e._s(e.filterCompanyName(e.ruleFormValue.creditCode)))])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productId"}},[a("el-select",{attrs:{disabled:!(e.productNameList.length>0)},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productNameList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"认证类型",prop:"certificationType"}},[a("el-radio-group",{model:{value:e.ruleFormValue.certificationType,callback:function(t){e.$set(e.ruleFormValue,"certificationType",t)},expression:"ruleFormValue.certificationType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("无公害产品")]),a("el-radio",{attrs:{label:"2"}},[e._v("绿色食品")]),a("el-radio",{attrs:{label:"3"}},[e._v("有机食品")]),a("el-radio",{attrs:{label:"4"}},[e._v("地理标志")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"认证类别",prop:"certificationCategory"}},[a("el-input",{model:{value:e.ruleFormValue.certificationCategory,callback:function(t){e.$set(e.ruleFormValue,"certificationCategory",t)},expression:"ruleFormValue.certificationCategory"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"农业分类",prop:"argriculturalClassification"}},[a("el-select",{model:{value:e.ruleFormValue.argriculturalClassification,callback:function(t){e.$set(e.ruleFormValue,"argriculturalClassification",t)},expression:"ruleFormValue.argriculturalClassification"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:"认证有效期",required:""}},[a("el-col",{staticClass:"text-left",attrs:{span:4}},[a("el-form-item",{attrs:{prop:"certificationStartTime"}},[a("el-date-picker",{staticClass:"w-80",staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"dd.MM.yyyy HH:mm:ss"},model:{value:e.ruleFormValue.certificationStartTime,callback:function(t){e.$set(e.ruleFormValue,"certificationStartTime",t)},expression:"ruleFormValue.certificationStartTime"}})],1)],1),a("el-col",{staticClass:"text-left",attrs:{span:1}},[e._v("至")]),a("el-col",{staticClass:"text-left",attrs:{span:4}},[a("el-form-item",{attrs:{prop:"certificationEndTime"}},[a("el-date-picker",{staticClass:"w-100",staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"dd.MM.yyyy HH:mm:ss"},model:{value:e.ruleFormValue.certificationEndTime,callback:function(t){e.$set(e.ruleFormValue,"certificationEndTime",t)},expression:"ruleFormValue.certificationEndTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产量",prop:"output"}},[a("el-input",{model:{value:e.ruleFormValue.output,callback:function(t){e.$set(e.ruleFormValue,"output",e._n(t))},expression:"ruleFormValue.output"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("el-form-item",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file?a("span",{staticClass:"margin-left-10"},[e._v("("+e._s(e.file.name)+")")]):a("span",{staticClass:"margin-left-10"},[e._v("请选择需要上传的文件...")])],1)],1)])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)])},Fc=[],Ic={data:function(){return{ruleFormValue:{creditCode:"",productId:"",certificationType:"",certificationCategory:"",argriculturalClassification:"",certificationStartTime:"",certificationEndTime:"",output:""},rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],certificationType:[{required:!0,message:"请选择",trigger:"change"}],certificationCategory:[{required:!0,message:"请插入",trigger:"change"}],argriculturalClassification:[{required:!0,message:"请选择",trigger:"change"}],certificationStartTime:[{required:!0,message:"请选择",trigger:"change"}],certificationEndTime:[{required:!0,message:"请选择",trigger:"change"}],output:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]},file:null,creditCode:"",companyNameList:[],listLoading:!1,productNameList:[],options:[{value:"1",label:"养殖业"},{value:"2",label:"畜牧业"},{value:"3",label:"种植业"}],certificationTypes:[{value:"1",label:"无公害产品"},{value:"2",label:"绿色食品"},{value:"3",label:"有机食品"},{value:"3",label:"地理标志"}]}},created:function(){this.creditCode=this.$route.query.creditCode,this.ruleFormValue.creditCode=this.$route.query.creditCode,this.getCompanyProduction(),this.getProductionDetail()},methods:{getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyNameList=t})).catch((function(e){console.log(e)}))},getProductionDetail:function(){var e=this,t=this.filterCompany(this.ruleFormValue.creditCode);$().get("/api/product_production/all",{company_id:t,sortBy:"productId"}).then((function(t){e.productNameList=t.data})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;var a=new FormData;t.listLoading=!0,a.append("creditCode",t.ruleFormValue.creditCode),a.append("productId",t.ruleFormValue.productId),a.append("certificationType",t.ruleFormValue.certificationType),a.append("certificationCategory",t.ruleFormValue.certificationCategory),a.append("argriculturalClassification",t.ruleFormValue.argriculturalClassification),a.append("certificationStartTime",t.ruleFormValue.certificationStartTime),a.append("certificationEndTime",t.ruleFormValue.certificationEndTime),a.append("createDate",t.ruleFormValue.certificationStartTime),a.append("updateDate",t.ruleFormValue.certificationStartTime),a.append("updater","string"),a.append("creater","string"),a.append("id",0),t.file&&a.append("file",t.file),$().post("/api/quality_standard/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.goBack()})).catch((function(e){}))}))},filterCompany:function(e){var t=this.companyNameList.find((function(t){return t.creditCode===e}));return t?t.companyId:""},filterCompanyName:function(e){var t=this.companyNameList.find((function(t){return t.creditCode===e}));return t?(this.prod,t.companyName):""},goBack:function(){this.$router.go(-1)},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}},Dc=Ic,Tc=Object(u["a"])(Dc,Sc,Fc,!1,null,"275a607e",null),Vc=Tc.exports,Lc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("监管对象")])],1)],1),a("div",{staticClass:"box"},[e.isShowSearchButton?a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[a("div",{staticClass:"select_label no-margin-left"},[e._v("行业")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getList()}},model:{value:e.productType,callback:function(t){e.productType=t},expression:"productType"}},e._l(e.productTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"filter-item"},[a("div",{staticClass:"select_label"},[e._v("行业")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getList()}},model:{value:e.companyScale,callback:function(t){e.companyScale=t},expression:"companyScale"}},e._l(e.companyScales,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):e._e(),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"companyName",label:"企业名称",width:"120"}}),a("el-table-column",{attrs:{prop:"companyScale",label:"企业规模",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.companyScales[a.companyScale].label))]}}])}),a("el-table-column",{attrs:{prop:"productType",label:"产品类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.productTypes[a.productType].label))]}}])}),a("el-table-column",{attrs:{prop:"legalPerson",label:"法定代表人",width:"150"}}),a("el-table-column",{attrs:{prop:"companyAddress",label:"企业地址",width:"120"}}),a("el-table-column",{attrs:{prop:"creditCode",label:"社会信用统一代码",width:"200"}}),a("el-table-column",{attrs:{prop:"contactWay",label:"联系方式"}}),a("el-table-column",{attrs:{prop:"supervisionNature",label:"监管对象性质"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.supervisions[a.supervisionNature]))]}}])}),a("el-table-column",{attrs:{prop:"operations",label:"操作",width:"250","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.isShowSearchButton?a("el-button",{attrs:{size:"small",plain:"",type:"primary"},on:{click:function(t){return e.gotoDetailPage(i)}}},[e._v("企业详情")]):e._e(),a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.gotoProductBusinessPage(i)}}},[e._v("经营产品")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Nc=[],$c={name:"companyBusiness",components:{Pagination:_e},data:function(){return{companyScales:[{value:0,label:"全部"},{value:1,label:"小型企业"},{value:2,label:"中型企业"},{value:3,label:"大型企业"}],productTypes:[{value:0,label:"全部"},{value:1,label:"农药"},{value:2,label:"种子"},{value:3,label:"饲料"},{value:4,label:"肥料"}],supervisions:["Unknown","法人","其他组织"],companyScale:0,productType:0,sortBy:"id",page:{pageIndex:1,pageSize:20},total:0,options:[{value:"全部",label:""}],tableData:[],listLoading:!1,isShowSearchButton:null}},created:function(){this.isShowSearchButton=!!n.a.get("authList").find((function(e){return"searchcompanyBusiness"==e.privilegeCode})),this.getList()},methods:{gotoDetailPage:function(e){this.$router.push("/companyBusiness/detailsCompanyBusiness/".concat(e.id))},gotoProductBusinessPage:function(e){this.$router.push("/companyBusiness/productBusiness/".concat(e.id))},getList:function(){var e=this;this.listLoading=!0,$().get("/api/company_business/all",{company_scale:this.companyScale,product_type:this.productType,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:this.sortBy}).then((function(t){e.tableData=t.data,e.total=e.tableData.length,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Pc=$c,zc=(a("ad34"),Object(u["a"])(Pc,Lc,Nc,!1,null,"cdcc7c5c",null)),Ac=zc.exports,Rc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("经营产品")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"filter-item"},[e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/companyBusiness/productBusiness/create/"+e.id)}}},[e._v("添加")]):e._e(),a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"productName",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"atunitprice",label:"单价"}}),a("el-table-column",{attrs:{prop:"productArea",label:"产地"}}),a("el-table-column",{attrs:{prop:"variety",label:"品种"}}),a("el-table-column",{attrs:{prop:"grade",label:"评级"}}),a("el-table-column",{attrs:{prop:"specification",label:"规格"}}),a("el-table-column",{attrs:{prop:"yield",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Bc=[],Oc={name:"productBusiness",components:{Pagination:_e},data:function(){return{companyScale:0,productType:0,sortBy:"id",page:{pageIndex:1,pageSize:20},total:0,options:[{value:"全部",label:""}],tableData:[],listLoading:!1,isShowAddButton:null}},created:function(){this.id=this.$route.params.id,this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addProductBusiness"==e.privilegeCode})),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/product_business/all",{company_id:this.id,pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:this.sortBy}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/product_business/"+e).then((function(e){t.getList()})).catch((function(e){console.log(e)}))}))}}},jc=Oc,Ec=(a("263b"),Object(u["a"])(jc,Rc,Bc,!1,null,"7670e972",null)),Uc=Ec.exports,qc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("经营主体")]),a("el-breadcrumb-item",[e._v("经营产品")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加产品")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleFormValue",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{model:{value:e.ruleFormValue.productName,callback:function(t){e.$set(e.ruleFormValue,"productName",t)},expression:"ruleFormValue.productName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单价",prop:"atunitprice"}},[a("el-input",{model:{value:e.ruleFormValue.atunitprice,callback:function(t){e.$set(e.ruleFormValue,"atunitprice",e._n(t))},expression:"ruleFormValue.atunitprice"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"评级",prop:"grade"}},[a("el-input",{model:{value:e.ruleFormValue.grade,callback:function(t){e.$set(e.ruleFormValue,"grade",t)},expression:"ruleFormValue.grade"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产地",prop:"productArea"}},[a("el-input",{model:{value:e.ruleFormValue.productArea,callback:function(t){e.$set(e.ruleFormValue,"productArea",t)},expression:"ruleFormValue.productArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品种",prop:"variety"}},[a("el-input",{model:{value:e.ruleFormValue.variety,callback:function(t){e.$set(e.ruleFormValue,"variety",t)},expression:"ruleFormValue.variety"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"规格",prop:"specification"}},[a("el-input",{model:{value:e.ruleFormValue.specification,callback:function(t){e.$set(e.ruleFormValue,"specification",t)},expression:"ruleFormValue.specification"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品介绍",prop:"productProfile"}},[a("el-input",{attrs:{"ato-complete":"off",type:"textarea",rows:10},model:{value:e.ruleFormValue.productProfile,callback:function(t){e.$set(e.ruleFormValue,"productProfile",t)},expression:"ruleFormValue.productProfile"}})],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleFormValue")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},Mc=[],Yc={name:"addProductBusiness",data:function(){return{listLoading:!0,companyId:-1,ruleFormValue:{productName:"",atunitprice:0,grade:"",productArea:"",variety:"",specification:"",productProfile:""},rules:{productName:[{required:!0,message:"请插入",trigger:"change"}],atunitprice:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],grade:[{required:!0,message:"请插入",trigger:"change"}],productArea:[{required:!0,message:"请插入",trigger:"change"}],variety:[{required:!0,message:"请插入",trigger:"change"}],specification:[{required:!0,message:"请插入",trigger:"change"}],productProfile:[{required:!0,message:"请插入",trigger:"change"}]}}},created:function(){this.companyId=this.$route.params.id,this.listLoading=!1},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("错误 !!"),!1;t.listLoading=!0;var a=new FormData;a.append("atunitprice",t.ruleFormValue.atunitprice),a.append("companyId",t.companyId),a.append("createTime",new Date),a.append("createUserId",j().user().id),a.append("grade",t.ruleFormValue.grade),a.append("id",0),a.append("productArea",t.ruleFormValue.productArea),a.append("productName",t.ruleFormValue.productName),a.append("productProfile",t.ruleFormValue.productProfile),a.append("specification",t.ruleFormValue.specification),a.append("updateTime",new Date),a.append("updateUserId",j().user().id),a.append("variety",t.ruleFormValue.variety),$().post("/api/product_business/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),1e3),t.$router.go(-1)})).catch((function(e){}))}))}}},Gc=Yc,Wc=Object(u["a"])(Gc,qc,Mc,!1,null,null,null),Qc=Wc.exports,Jc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("监管对象")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("企业详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}]},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title"},[e._v("公司简介")])])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("img",{staticClass:"content img",attrs:{src:e.url+"/api"+e.data.profileImage,alt:""}})]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title"},[e._v("福鼎白茶")]),a("div",{staticClass:"content"},[e._v(e._s(e.data.companyProfile))])])],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title"},[e._v("主营产品")])])],1),a("el-row",e._l(e.companyProducts,(function(t,i){return a("el-col",{key:i,attrs:{span:6}},[a("div",{staticClass:"sub-title"},[e._v(e._s(t.productName))]),a("div",{staticClass:"content"},[e._v(e._s(t.productArea))])])})),1),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"title"},[e._v("联系我们")])])],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"content"},[e._v("联系人："+e._s(e.data.legalPerson))])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"content"},[e._v("电话："+e._s(e.data.contactWay))])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"content"},[e._v("地址："+e._s(e.data.companyAddress))])])],1),a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)])},Hc=[],Xc={name:"detailsCompanyBusiness",data:function(){return{data:null,companyProducts:[],url:I.API_BASE_URL(),dataLoading:!0}},created:function(){this.id=this.$route.params.id,this.getData(this.id)},methods:{getData:function(e){var t=this;this.dataLoading=!0,$().get("/api/company_business/get/"+e).then((function(e){t.data=e,$().get("/api/product_business/all",{company_id:t.data.id,pageNo:0,pageSize:20,sortBy:"id"}).then((function(e){t.companyProducts=e,setTimeout((function(){t.dataLoading=!1}),500)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}},Kc=Xc,Zc=(a("afd5"),Object(u["a"])(Kc,Jc,Hc,!1,null,"038d9378",null)),eu=Zc.exports,tu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v(e._s(e.tagName))])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"tab-header inline-block-IE",class:{active:e.mode},attrs:{type:""},on:{click:e.clickTabLeft}},[e._v("抽样计划")]),a("div",{staticClass:"tab-header inline-block-IE",class:{active:!e.mode},attrs:{type:""},on:{click:e.clickTabRight}},[e._v("抽样结果")])]),a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addSample()}}},[e._v("添加")])],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.mode,expression:"mode"},{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"sampleName",label:"检测名称"}}),a("el-table-column",{attrs:{prop:"sampleTime",label:"检测时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.sampleTime)))]}}])}),a("el-table-column",{attrs:{prop:"checkPerson",label:"检测人员"}}),a("el-table-column",{attrs:{prop:"operations",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showDetailsSampleCheck(i)}}},[e._v("查看")])]}}])})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.mode,expression:"!mode"},{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"sampleName",label:"检测名称"}}),a("el-table-column",{attrs:{prop:"checkUnit",label:"检测单位"}}),a("el-table-column",{attrs:{prop:"sampleTime",label:"检测时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.sampleTime)))]}}])}),a("el-table-column",{attrs:{prop:"checkResult",label:"检测结果"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(1==a.checkResult?"合格":"不合格"))]}}])}),a("el-table-column",{attrs:{prop:"checkPerson",label:"检测人员"}}),a("el-table-column",{attrs:{prop:"operations",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showDetailsSampleCheckResult(i)}}},[e._v("查看")])]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},au=[],iu={name:"sampleCheck",components:{Pagination:_e},data:function(){return{mode:!0,page:{pageIndex:1,pageSize:20},total:0,tableData:[],listLoading:!1,status:1,tagName:"抽样计划"}},created:function(){1==this.$route.query.mode?this.mode=!1:this.mode=!0,this.getList()},methods:{showDetailsSampleCheck:function(e){this.$router.push("/sampleCheck/detailsSampleCheck/".concat(e.id))},showDetailsSampleCheckResult:function(e){this.$router.push("/sampleCheck/detailsSampleCheckResult/".concat(e.id))},addSample:function(){this.mode?this.$router.push("/sampleCheck/addSampleCheck"):this.$router.push("/sampleCheck/addSampleCheckResult")},getList:function(){var e=this;this.listLoading=!0;var t=this.mode?1:2;this.status!==t&&(this.status=t,this.page.pageIndex=1),this.mode?$().get("/api/sample_check/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tagName="抽样计划",e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)})):$().get("/api/sample_check_result/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tagName="抽样结果",e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},clickTabLeft:function(){this.mode=!0,this.getList()},clickTabRight:function(){this.mode=!1,this.getList()}}},ru=iu,ou=(a("b3b5"),Object(u["a"])(ru,tu,au,!1,null,"57db5603",null)),lu=ou.exports,nu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加计划")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.creatingsample,expression:"creatingsample"}],staticClass:"box"},[e.data?a("el-form",{ref:"data",attrs:{rules:e.dataRulse,model:e.data,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"检测名称:",prop:"sampleName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:e.data.sampleName,callback:function(t){e.$set(e.data,"sampleName",t)},expression:"data.sampleName"}})],1),a("el-form-item",{attrs:{label:"检测时间:",prop:"sampleTime"}},[a("el-date-picker",{staticStyle:{width:"300px !important"},model:{value:e.data.sampleTime,callback:function(t){e.$set(e.data,"sampleTime",t)},expression:"data.sampleTime"}})],1),a("el-form-item",{attrs:{label:"检测人员:",prop:"checkPerson"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:e.data.checkPerson,callback:function(t){e.$set(e.data,"checkPerson",t)},expression:"data.checkPerson"}})],1),a("el-form-item",{attrs:{prop:"checkFiles",label:""}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("span",{staticClass:"item-value",staticStyle:{width:"500px"}},[e._v(e._s(e.data.checkFiles))])])]),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.push("/sampleCheckMain")}}},[e._v("取消")])],1)],1):e._e(),e.data?e._e():[e._v("No matching data!")]],2)])},su=[],cu={name:"addSampleCheck",data:function(){return{id:-1,file:null,creatingsample:!1,data:{checkFiles:"",checkPerson:"",createUserId:0,id:0,sampleId:0,sampleName:"",sampleTime:"",updateUserId:0},dataRulse:{sampleName:[{required:!0,message:"请输入",trigger:"blur,change"}],sampleTime:[{required:!0,message:"请选择",trigger:"blur,change"}],checkPerson:[{required:!0,message:"请输入",trigger:"blur,change"}],checkFiles:[{required:!0,message:"请输入",trigger:"blur,change"}]}}},methods:{chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.data.checkFiles=this.file.name},onSubmit:function(){var e=this,t=new FormData;t.append("checkFiles",this.data.checkFiles),t.append("checkPerson",this.data.checkPerson),t.append("createUserId",j().user().id),t.append("id",this.data.id),t.append("sampleId",this.data.sampleId),t.append("sampleName",this.data.sampleName),t.append("updateUserId",j().user().id),t.append("file",this.file),t.append("sampleTime",this.data.sampleTime),t.append("checkResult",""),t.append("checkUnit",""),t.append("createTime",this.data.sampleTime),t.append("updateTime",this.data.sampleTime),this.$refs.data.validate((function(a){a&&(e.creatingsample=!0,$().post("/api/sample_check/create",t).then((function(t){e.creatingsample=!1,e.$router.push("/sampleCheckMain/0")})).catch((function(e){console.error(e)})))}))},getDateString:function(e){var t=new Date(e);return t.toLocaleDateString()}}},uu=cu,du=(a("7fa2"),Object(u["a"])(uu,nu,su,!1,null,"fb1fd5aa",null)),pu=du.exports,mu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加结果")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.creatingSample,expression:"creatingSample"}],staticClass:"box"},[e.data?a("el-form",{ref:"data",attrs:{rules:e.dataRulse,model:e.data,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"检测名称:",prop:"sampleName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:e.data.sampleName,callback:function(t){e.$set(e.data,"sampleName",t)},expression:"data.sampleName"}})],1),a("el-form-item",{attrs:{label:"检测时间:",prop:"sampleTime"}},[a("el-date-picker",{staticStyle:{width:"300px !important"},attrs:{placeholder:""},model:{value:e.data.sampleTime,callback:function(t){e.$set(e.data,"sampleTime",t)},expression:"data.sampleTime"}})],1),a("el-form-item",{attrs:{label:"检测人员:",prop:"checkPerson"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:e.data.checkPerson,callback:function(t){e.$set(e.data,"checkPerson",t)},expression:"data.checkPerson"}})],1),a("el-form-item",{attrs:{label:"检测结果:",prop:"checkResult"}},[a("el-select",{staticStyle:{width:"300px !important"},attrs:{placeholder:""},model:{value:e.data.checkResult,callback:function(t){e.$set(e.data,"checkResult",t)},expression:"data.checkResult"}},e._l([{value:0,label:"不合格"},{value:1,label:"合格"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"检测单位:",prop:"checkUnit"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:e.data.checkUnit,callback:function(t){e.$set(e.data,"checkUnit",t)},expression:"data.checkUnit"}})],1),a("el-form-item",{attrs:{prop:"checkFiles",label:""}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("span",{staticClass:"item-value",staticStyle:{width:"500px"}},[e._v(e._s(e.data.checkFiles))])])]),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.push({path:"/sampleCheckMain",query:{mode:1}})}}},[e._v("取消")])],1)],1):e._e(),e.data?e._e():[e._v("No matching data!")]],2)])},fu=[],gu={name:"addSampleCheckResult",data:function(){return{id:-1,creatingSample:!1,file:null,data:{checkFiles:"",checkPerson:"",checkResult:"",checkUnit:"",createUserId:0,id:0,sampleId:0,sampleName:"",sampleTime:"",updateUserId:0},dataRulse:{sampleName:[{required:!0,message:"请输入",trigger:"blur,change"}],sampleTime:[{required:!0,message:"请选择",trigger:"blur,change"}],checkPerson:[{required:!0,message:"请输入",trigger:"blur,change"}],checkFiles:[{required:!0,message:"请输入",trigger:"blur,change"}],checkResult:[{required:!0,message:"请选择",trigger:"blur,change"}],checkUnit:[{required:!0,message:"请输入",trigger:"blur,change"}]}}},methods:{chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.data.checkFiles=this.file.name},onSubmit:function(){var e=this,t=new FormData;t.append("checkFiles",this.data.checkFiles),t.append("checkPerson",this.data.checkPerson),t.append("createUserId",j().user().id),t.append("id",this.data.id),t.append("sampleId",this.data.sampleId),t.append("sampleName",this.data.sampleName),t.append("updateUserId",j().user().id),t.append("file",this.file),t.append("sampleTime",this.data.sampleTime),t.append("checkResult",this.data.checkResult),t.append("checkUnit",this.data.checkUnit),t.append("createTime",this.data.sampleTime),t.append("updateTime",this.data.sampleTime),this.$refs.data.validate((function(a){a&&(e.creatingSample=!0,$().post("/api/sample_check_result/create",t).then((function(t){e.creatingSample=!1,e.$router.push("/sampleCheckMain/1")})).catch((function(e){console.error(e)})))}))},getDateString:function(e){var t=new Date(e);return t.toLocaleDateString()}}},hu=gu,bu=(a("b0dc0"),Object(u["a"])(hu,mu,fu,!1,null,"f75906c6",null)),vu=bu.exports,yu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("抽样计划")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label inline-block-IE"},[e._v("检测名称:")]),a("div",{staticClass:"item-value inline-block-IE"},[e._v(e._s(e.data.sampleName))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item inline-block-IE"},[a("div",{staticClass:"item-label inline-block-IE"},[e._v("检测时间:")]),a("div",{staticClass:"item-value inline-block-IE"},[e._v(e._s(e._f("formatDate")(e.data.sampleTime)))])]),a("div",{staticClass:"item inline-block-IE"},[a("div",{staticClass:"item-label inline-block-IE"},[e._v("检测人员:")]),a("div",{staticClass:"item-value inline-block-IE"},[e._v(e._s(e.data.checkPerson))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label inline-block-IE"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""}},[e._v("下载附件")])],1),e.file?e._e():a("div",{staticClass:"item-value inline-block-IE"},[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n            "+e._s(e.fileName)+"\n          ")])],1),e.file?a("div",{staticClass:"item-value"},[e._v("("+e._s(e.file.name)+")")]):e._e()])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-value"},[a("el-button",{attrs:{size:"small",plain:"",type:"primary"},on:{click:function(t){return e.$router.push("/sampleCheckMain")}}},[e._v("返回")])],1)])])])])},wu=[],_u={name:"detailsSampleCheck",data:function(){return{id:-1,data:[],file:null,fileName:"",listLoading:!1}},created:function(){this.id=this.$route.params.id,this.getData()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/sample_check/get/".concat(this.id)).then((function(t){e.data=t,e.fileName=e.data.checkFiles.replace("/uploads/",""),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.data.checkFiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.data.checkFiles.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},ku=_u,Cu=(a("56d4"),Object(u["a"])(ku,yu,wu,!1,null,"5d3273e8",null)),xu=Cu.exports,Su=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("例行抽样")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("抽样结果")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("检测名称:")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.sampleName))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("检测时间:")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.getDateString(e.data.sampleTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("检测人员:")]),a("div",{staticClass:"item-value"},[e._v(e._s(e.data.checkPerson))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("检测结果:")]),a("div",{staticClass:"item-value"},[e._v(e._s(1==e.data.checkResult?"合格":"不合格"))])])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""}},[e._v("下载附件")])],1),e.file?e._e():a("div",{staticClass:"item-value"},[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n            "+e._s(e.fileName)+"\n          ")])],1),e.file?a("div",{staticClass:"item-value"},[e._v("("+e._s(e.file.name)+")")]):e._e()])]),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-value"},[a("el-button",{attrs:{size:"small",plain:"",type:"primary"},on:{click:function(t){return e.$router.push({path:"/sampleCheckMain",query:{mode:1}})}}},[e._v("返回")])],1)])])])])},Fu=[],Iu={name:"detailsSampleCheckResult",data:function(){return{id:-1,data:[],file:null,fileName:"",listLoading:!1}},mounted:function(){this.id=this.$route.params.id,this.getData()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/sample_check_result/get/".concat(this.id)).then((function(t){e.data=t,e.fileName=e.data.checkFiles.replace("/uploads/",""),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getDateString:function(e){var t=new Date(e);return t.toLocaleDateString()},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.data.checkFiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.data.checkFiles.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},Du=Iu,Tu=(a("bc31"),Object(u["a"])(Du,Su,Fu,!1,null,"cd4a830a",null)),Vu=Tu.exports,Lu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("溯源标签")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-tabs",{staticClass:"w-100",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基地",name:"base"}},[a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.deleteSelectedRow()}}},[e._v("确认")])],1)]),a("el-dialog",{attrs:{visible:e.show_AddDialog,width:"30%",modal:""},on:{"update:visible":function(t){e.show_AddDialog=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("添加基地")])])],1),a("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:e.ruleFormValue}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"基地名称",prop:"locationName",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue.locationName,callback:function(t){e.$set(e.ruleFormValue,"locationName",t)},expression:"ruleFormValue.locationName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"地址",prop:"locationAddress",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue.locationAddress,callback:function(t){e.$set(e.ruleFormValue,"locationAddress",t)},expression:"ruleFormValue.locationAddress"}})],1)],1)],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:22}},[a("el-form-item",{staticClass:"flex-box w-100 no-margin-IE"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.closeAddDialog}},[e._v("关闭")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmitBase("ruleForm")}}},[e._v("保存")])],1)],1)],1)],1)],1),a("el-button",{staticClass:"margin-bottom-30",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.show_AddDialog=!0}}},[e._v("添加")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"locationName",label:"基地名称"}}),a("el-table-column",{attrs:{prop:"locationAddress",label:"地址"}}),a("el-table-column",{attrs:{prop:"locationNumber",label:"编号"}}),a("el-table-column",{attrs:{prop:"operations",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.editSelectedBase(i)}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedBase(i.id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getBaseList}})],1)],1),a("el-tab-pane",{attrs:{label:"打印设置",name:"printerSetting"}},[a("el-dialog",{attrs:{visible:e.confirm_storePrintSetting,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_storePrintSetting=t}}},[a("span",[a("i",{staticClass:"el-icon-circle-check"},[e._v(" 保存成功")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){e.confirm_storePrintSetting=!1}}},[e._v("关闭")])],1)]),a("el-form",{ref:"ruleForm1",attrs:{"label-width":"200px",model:e.ruleFormValue1}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"打印机串口",prop:"tmp1",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue1.tmp1,callback:function(t){e.$set(e.ruleFormValue1,"tmp1",t)},expression:"ruleFormValue1.tmp1"}},e._l(["com3","com4","com5"],(function(e){return a("el-option",{key:e.index,attrs:{value:e,label:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单次最多打印标签个数",prop:"tmp2",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue1.tmp2,callback:function(t){e.$set(e.ruleFormValue1,"tmp2",t)},expression:"ruleFormValue1.tmp2"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标签规格",prop:"tmp3",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue1.tmp3,callback:function(t){e.$set(e.ruleFormValue1,"tmp3",t)},expression:"ruleFormValue1.tmp3"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"flex-box w-100"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.savePrinterSetting}},[e._v("保存打印设置")])],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"标签查询",name:"tagQuery"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData1,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"productId",label:"品名"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterProductName(a.productId)))]}}])}),a("el-table-column",{attrs:{prop:"productionTime",label:"生产日期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.productionTime)))]}}])}),a("el-table-column",{attrs:{prop:"locationId",label:"基地"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterTracingLocation(a.locationId)))]}}])}),a("el-table-column",{attrs:{prop:"charge",label:"负责人"}}),a("el-table-column",{attrs:{prop:"batchNumber",label:"批次号"}}),a("el-table-column",{attrs:{prop:"tracingNumber",label:"溯源码"}}),a("el-table-column",{attrs:{prop:"printStatus",label:"标签生成","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0==i.printStatus?a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.goToTagGeneration(i)}}},[e._v("待生成")]):e._e(),1==i.printStatus?a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.goToTagGeneration(i)}}},[e._v("已生成")]):e._e()]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total1>0,expression:"total1 > 0"}],attrs:{total:e.total1,page:e.page1.pageIndex,limit:e.page1.pageSize},on:{"update:page":function(t){return e.$set(e.page1,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page1,"pageSize",t)},pagination:e.getTracingList}})],1)],1),a("el-tab-pane",{attrs:{label:"标签打印",name:"labelPrinting"}},[a("el-dialog",{attrs:{visible:e.show_QRCode,width:"20%",modal:""},on:{"update:visible":function(t){e.show_QRCode=t}}},[a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("h1",[e._v("二 维 码")])])],1),a("el-row",[a("el-col",{staticClass:"margin-bottom-30 text-center",attrs:{span:24}},[a("qrcode-vue",{attrs:{value:e.qrValue,size:e.size,level:"H"}})],1)],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:22}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onPrint()}}},[e._v("打印")])],1)],1)],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm2",attrs:{"label-width":"200px",model:e.ruleFormValue2}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品名",prop:"productId",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",on:{change:function(t){return e.onChangeProductId()}},model:{value:e.ruleFormValue2.productId,callback:function(t){e.$set(e.ruleFormValue2,"productId",t)},expression:"ruleFormValue2.productId"}},e._l(e.productionList,(function(e){return a("el-option",{key:e.productId,attrs:{value:e.productId,label:e.productName}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"批号",prop:"batchNumber",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",on:{change:function(t){return e.onChangeBatch()}},model:{value:e.ruleFormValue2.batchNumber,callback:function(t){e.$set(e.ruleFormValue2,"batchNumber",t)},expression:"ruleFormValue2.batchNumber"}},e._l(e.batchList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.batchNumber,label:e.batchName}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"标签日期",prop:"tracingTimeType",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue2.tracingTimeType,callback:function(t){e.$set(e.ruleFormValue2,"tracingTimeType",t)},expression:"ruleFormValue2.tracingTimeType"}},e._l(e.dateOption,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{prop:"tracingTime",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.tracingTime,callback:function(t){e.$set(e.ruleFormValue2,"tracingTime",t)},expression:"ruleFormValue2.tracingTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"网页日期",prop:"webTimeType",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue2.webTimeType,callback:function(t){e.$set(e.ruleFormValue2,"webTimeType",t)},expression:"ruleFormValue2.webTimeType"}},e._l(e.dateOption,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{prop:"webTime",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.webTime,callback:function(t){e.$set(e.ruleFormValue2,"webTime",t)},expression:"ruleFormValue2.webTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"责任人",prop:"charge",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue2.charge,callback:function(t){e.$set(e.ruleFormValue2,"charge",t)},expression:"ruleFormValue2.charge"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"地址",prop:"locationId",rules:{required:!0,message:"请选择",trigger:"change"}}},[a("el-select",{staticClass:"w-100",model:{value:e.ruleFormValue2.locationId,callback:function(t){e.$set(e.ruleFormValue2,"locationId",t)},expression:"ruleFormValue2.locationId"}},e._l(e.tableData,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.locationAddress}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标签数量",prop:"tracingAmount",rules:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]}},[a("el-input",{staticClass:"w-100",model:{value:e.ruleFormValue2.tracingAmount,callback:function(t){e.$set(e.ruleFormValue2,"tracingAmount",e._n(t))},expression:"ruleFormValue2.tracingAmount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"有效期至",prop:"validTime",rules:{required:!0,message:"请插入",trigger:"change"}}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime"},model:{value:e.ruleFormValue2.validTime,callback:function(t){e.$set(e.ruleFormValue2,"validTime",t)},expression:"ruleFormValue2.validTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"flex-box w-100"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.createQRCode("ruleForm2")}}},[e._v("打印二维码")])],1)],1)],1)],1)],1)],1)],1)])])},Nu=[],$u=a("d7b0"),Pu={name:"tracingLabelManagement",components:{Pagination:_e,QrcodeVue:$u["a"]},data:function(){return{companyId:null,show_AddDialog:!1,confirm_dialogVisible:!1,confirm_storePrintSetting:!1,show_QRCode:!1,selectedRowId:"",selectedRowData:null,activeName:"base",qrValue:null,size:300,page:{pageIndex:1,pageSize:20},page1:{pageIndex:1,pageSize:20},total:0,total1:0,tableData:[],tableData1:[],batchList:[],varietyList:[],selectedTracingRow:null,gradeOption:[{gradeId:1,gradeName:"特级"},{gradeId:2,gradeName:"高级"},{gradeId:3,gradeName:"中级"},{gradeId:4,gradeName:"低级"}],dateOption:[{id:0,name:"出货日期"},{id:1,name:"到货日期"}],listLoading:!1,ruleFormValue:{locationName:null,locationAddress:null},ruleFormValue1:{tmp1:null,tmp2:null,tmp3:null},ruleFormValue2:{productId:null,batchNumber:null,tracingTimeType:null,tracingTime:null,webTimeType:null,webTime:null,charge:null,locationId:null,validTime:null,tracingAmount:null},productionList:[]}},created:function(){this.companyId=j().user().companyId,this.getBaseList(),this.getVarietyData()},methods:{showDetailsSampleCheck:function(e){this.$router.push("/sampleCheck/detailsSampleCheck/".concat(e.id))},showDetailsSampleCheckResult:function(e){this.$router.push("/sampleCheck/detailsSampleCheckResult/".concat(e.id))},getBaseList:function(){var e=this;this.listLoading=!0,$().get("/api/tracing_location/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,companyId:this.companyId,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTracingList:function(){var e=this;this.listLoading=!0,$().get("/api/tracing/all",{pageNo:this.page1.pageIndex-1,pageSize:this.page1.pageSize,companyId:this.companyId,sortBy:"id"}).then((function(t){e.tableData1=t.data,e.total1=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getProductProduction:function(){var e=this;this.listLoading=!0,$().get("/api/product_production/all",{company_id:this.companyId,sortBy:"productId"}).then((function(t){e.productionList=t.data})).catch((function(e){console.log(e)}))},getVarietyData:function(){var e=this;this.listLoading=!0,$().get("/api/product_variety/all",{productId:this.productId,sortBy:"id"}).then((function(t){e.varietyList=t.data})).catch((function(e){console.error(e)}))},onChangeProductId:function(){var e=this;this.listLoading=!0,$().get("/api/product_batch/all",{company_id:this.companyId,productId:this.ruleFormValue2.productId,sortBy:"id"}).then((function(t){for(var a in e.batchList=t.data,e.batchList){var i=e.getVarietyName(e.batchList[a].varietyId),r=e.getGradeName(e.batchList[a].varietyGrade);e.batchList[a].batchName=e.batchList[a].batchNumber+" "+i+" "+r}setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},onChangeBatch:function(){var e=this,t=this.tableData1.find((function(t){return t.batchNumber==e.ruleFormValue2.batchNumber}));t&&(t.charge&&(this.ruleFormValue2.charge=t.charge),t.locationId&&(this.ruleFormValue2.locationId=t.locationId),t.tracingAmount&&(this.ruleFormValue2.tracingAmount=t.tracingAmount),t.tracingTime&&(this.ruleFormValue2.tracingTime=t.tracingTime),t.tracingTimeType>-1&&(this.ruleFormValue2.tracingTimeType=t.tracingTimeType),t.validTime&&(this.ruleFormValue2.validTime=t.validTime),t.webTime&&(this.ruleFormValue2.webTime=t.webTime),t.webTimeType>-1&&(this.ruleFormValue2.webTimeType=t.webTimeType))},onSubmitBase:function(e){var t=this;this.$refs[e].validate((function(e){var a=new FormData;e&&(t.selectedRowData?(t.show_AddDialog=!1,t.listLoading=!0,$().put("/api/tracing_location/update/"+t.selectedRowData.id,{id:t.selectedRowData.id,companyId:t.companyId,createUserId:t.selectedRowData.createUserId,locationAddress:t.ruleFormValue.locationAddress,locationName:t.ruleFormValue.locationName,updateUserId:j().user().id}).then((function(e){t.ruleFormValue.locationName="",t.ruleFormValue.locationAddress="",t.selectedRowData=null,setTimeout((function(){t.getBaseList()}),500)})).catch((function(e){console.error(e)}))):(t.show_AddDialog=!1,t.listLoading=!0,a.append("id",0),a.append("companyId",t.companyId),a.append("createTime",new Date),a.append("createUserId",j().user().id),a.append("locationAddress",t.ruleFormValue.locationAddress),a.append("locationName",t.ruleFormValue.locationName),$().post("/api/tracing_location/create",a).then((function(e){t.ruleFormValue.locationName="",t.ruleFormValue.locationAddress="",setTimeout((function(){t.getBaseList()}),500)})).catch((function(e){console.error(e)}))))}))},createQRCode:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=JSON.stringify(t.ruleFormValue2);t.qrValue=a,t.show_QRCode=!0}}))},onPrint:function(){var e=this;this.show_QRCode=!1,this.listLoading=!0;var t="",a=this.batchList.find((function(t){return t.batchNumber==e.ruleFormValue2.batchNumber}));a&&(t=a.batchName.split(" "),t=t[1]+","+t[2]),$().put("/api/tracing/update/"+this.selectedTracingRow.id,{id:this.selectedTracingRow.id,companyId:this.companyId,createUserId:this.selectedTracingRow.createUserId,createTime:new Date(this.selectedTracingRow.createTime),batchNumber:this.ruleFormValue2.batchNumber,batchName:t,printStatus:1,validTime:new Date(this.ruleFormValue2.validTime),tracingAmount:this.ruleFormValue2.tracingAmount,productId:this.ruleFormValue2.productId,tracingTimeType:this.ruleFormValue2.tracingTimeType,tracingTime:new Date(this.ruleFormValue2.tracingTime),webTimeType:this.ruleFormValue2.webTimeType,webTime:new Date(this.ruleFormValue2.webTime),productionTime:new Date(this.selectedTracingRow.productionTime),locationId:this.ruleFormValue2.locationId,charge:this.ruleFormValue2.charge,updateUserId:j().user().id}).then((function(t){e.ruleFormValue2.productId=null,e.ruleFormValue2.batchNumber=null,e.ruleFormValue2.tracingTimeType=null,e.ruleFormValue2.tracingTime=null,e.ruleFormValue2.webTimeType=null,e.ruleFormValue2.webTime=null,e.ruleFormValue2.charge=null,e.ruleFormValue2.locationId=null,e.ruleFormValue2.validTime=null,e.ruleFormValue2.tracingAmount=null,setTimeout((function(){e.listLoading=!1,document.getElementById("tab-tagQuery").click()}),500)})).catch((function(e){console.error(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},handleClick:function(e,t){0==e.index&&this.getBaseList(),2==e.index&&(this.getProductProduction(),this.getTracingList()),3==e.index&&(this.getProductProduction(),this.getTracingList())},goToTagGeneration:function(e){this.selectedTracingRow=e,document.getElementById("tab-labelPrinting").click(),e&&(e.productId&&(this.ruleFormValue2.productId=e.productId),this.onChangeProductId(),e.batchNumber&&(this.ruleFormValue2.batchNumber=e.batchNumber),e.charge&&(this.ruleFormValue2.charge=e.charge),e.locationId&&(this.ruleFormValue2.locationId=e.locationId),e.tracingAmount&&(this.ruleFormValue2.tracingAmount=e.tracingAmount),e.tracingTime&&(this.ruleFormValue2.tracingTime=e.tracingTime),e.tracingTimeType>-1&&(this.ruleFormValue2.tracingTimeType=e.tracingTimeType),e.validTime&&(this.ruleFormValue2.validTime=e.validTime),e.webTime&&(this.ruleFormValue2.webTime=e.webTime),e.webTimeType>-1&&(this.ruleFormValue2.webTimeType=e.webTimeType))},deleteSelectedBase:function(e){this.selectedRowId=e,this.confirm_dialogVisible=!0},deleteSelectedRow:function(){var e=this;this.listLoading=!0,this.confirm_dialogVisible=!1,this.show_AddDialog=!1,$().delete("/api/tracing_location/delete/"+this.selectedRowId).then((function(t){e.ruleFormValue.locationName="",e.ruleFormValue.locationAddress="",setTimeout((function(){e.getBaseList()}),500)})).catch((function(e){console.error(e)}))},editSelectedBase:function(e){this.selectedRowData=e,this.ruleFormValue.locationAddress=e.locationAddress,this.ruleFormValue.locationName=e.locationName,this.show_AddDialog=!0},filterProductName:function(e){var t=this.productionList.find((function(t){return t.productId===e}));return t?t.productName:""},filterTracingLocation:function(e){var t=this.tableData.find((function(t){return t.id===e}));return t?t.locationName:""},getVarietyName:function(e){var t=this.varietyList.find((function(t){return t.id===e}));return t?t.varietyName:""},getGradeName:function(e){var t=this.gradeOption.find((function(t){return t.gradeId===e}));return t?t.gradeName:""},closeAddDialog:function(){this.show_AddDialog=!1,this.ruleFormValue.locationName="",this.ruleFormValue.locationAddress=""},savePrinterSetting:function(){this.confirm_storePrintSetting=!0}}},zu=Pu,Au=Object(u["a"])(zu,Lu,Nu,!1,null,"792829ee",null),Ru=Au.exports,Bu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("作业定义")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/jobDefinition/create")}}},[e._v("添加")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"jobName",label:"作业名称"}}),a("el-table-column",{attrs:{prop:"jobType",label:"作业类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.getJobType(a.jobType)))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){e.$router.push({path:"/jobDefinition/"+i.id,query:{jobName:i.jobName,jobType:e.getJobType(i.jobType)}})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.handleDelete(""+i.id)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Ou=[],ju={name:"jobDefinition",components:{Pagination:_e},data:function(){return{jobName:"",jobType:0,page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[],jobTypes:[{id:0,name:"收获前"},{id:1,name:"收获"},{id:2,name:"收获后"}]}},mounted:function(){this.getList()},methods:{order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/job_definition/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getJobType:function(e){var t=this.jobTypes.find((function(t){return t.id===e}));return t?t.name:""},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){t.listLoading=!0,$().delete("/api/job_definition/delete/"+e).then((function(e){t.getList(),setTimeout((function(){t.listLoading=!1}),500)})).catch((function(e){console.log(e)}))}))}}},Eu=ju,Uu=(a("67ec"),Object(u["a"])(Eu,Bu,Ou,!1,null,null,null)),qu=Uu.exports,Mu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("作业定义")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加作业")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{staticClass:"job-name-width",attrs:{prop:"jobName",label:"作业名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.jobName,callback:function(t){e.$set(e.addForm,"jobName",t)},expression:"addForm.jobName"}})],1),a("el-form-item",{attrs:{label:"作业类型",prop:"jobType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.jobType,callback:function(t){e.$set(e.addForm,"jobType",t)},expression:"addForm.jobType"}},e._l(e.jobTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"现场图片"}},[a("div",{staticClass:"image-container",on:{click:function(t){return e.chooseFile()}}},e._l(e.images,(function(e){return a("img",{key:e,staticClass:"preview",attrs:{src:e}})})),0),a("p",[e._v(e._s(e.fileName))]),a("div",{staticClass:"image-box"},[a("input",{ref:"file_live_1",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*",name:"images"},on:{change:function(t){return e.handleFileUpload()}}})])]),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("addForm")}}},[e._v("\n              保存\n          ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              取消\n          ")])],1)],1)],1)])},Yu=[],Gu={data:function(){return{addForm:{jobName:"",jobType:""},jobTypes:[{id:0,name:"收获前"},{id:1,name:"收获"},{id:2,name:"收获后"}],rules:{jobName:[{required:!0,message:"请插入",trigger:"change"}],jobType:[{required:!0,message:"请选择",trigger:"change"}]},images:[],fileName:"",file_live_1:null,dataLoading:!1}},mounted:function(){},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataLoading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/job_definition/create",a).then((function(e){t.$router.push({path:"/jobDefinition"}),setTimeout((function(){t.dataLoading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.images=[];var e=new FileReader,t=this;e.onload=function(e){t.images.push(e.target.result)},e.readAsDataURL(this.file_live_1),this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("jobName",this.addForm.jobName),e.append("jobType",this.addForm.jobType),e.append("file",this.file_live_1),e.append("id",0),e}}},Wu=Gu,Qu=Object(u["a"])(Wu,Mu,Yu,!1,null,null,null),Ju=Qu.exports,Hu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("作业定义")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改作业")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{staticClass:"job-name-width",attrs:{prop:"jobName",label:"作业名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.jobName,callback:function(t){e.$set(e.editForm,"jobName",t)},expression:"editForm.jobName"}})],1),a("el-form-item",{attrs:{label:"作业类型",prop:"jobType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.jobType,callback:function(t){e.$set(e.editForm,"jobType",t)},expression:"editForm.jobType"}},e._l(e.jobTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"现场图片"}},[a("div",{staticClass:"image-container",on:{click:function(t){return e.chooseFile()}}},e._l(e.images,(function(e){return a("img",{key:e,staticClass:"preview",attrs:{src:e}})})),0),a("div",{staticClass:"image-box"},[a("input",{ref:"file",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*",name:"images"},on:{change:function(t){return e.handleFileUpload()}}})]),e.file?e._e():a("div",{staticClass:"item-value"},[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n                  "+e._s(e.editForm.jobFile.replace("/uploads/",""))+"\n              ")])],1),e.file?a("div",{staticClass:"item-value"},[e._v("\n              ("+e._s(e.file.name)+")\n          ")]):e._e()]),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("editForm")}}},[e._v("\n              保存\n          ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              取消\n          ")])],1)],1)],1)])},Xu=[],Ku={data:function(){return{editForm:{jobName:"",jobType:"",jobFile:""},jobTypes:[{id:0,name:"收获前"},{id:1,name:"收获"},{id:2,name:"收获后"}],rules:{jobName:[{required:!0,message:"请插入",trigger:"change"}],jobType:[{required:!0,message:"请选择",trigger:"change"}]},images:[],file:null,dataloading:!0,id:0}},mounted:function(){this.editForm.jobName=this.$route.query.jobName,this.editForm.jobType=this.$route.query.jobType,this.id=this.$route.params.id,this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;this.dataloading=!0,$().get("/api/job_definition/get/"+e).then((function(e){t.editForm=e,t.images=[],t.images.push(I.DOWNLOAD_URL()+t.editForm.jobFile),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.editForm.jobFile,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.editForm.jobFile.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataloading=!0;var a=new FormData;a=t.makeFormData(),$().put("/api/job_definition/update/"+t.id,a).then((function(e){t.$router.push({path:"/jobDefinition"}),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.images=[];var e=new FileReader,t=this;e.onload=function(e){t.images.push(e.target.result)},e.readAsDataURL(this.file)},makeFormData:function(){var e=new FormData;return e.append("jobName",this.editForm.jobName),e.append("jobType",this.editForm.jobType),e.append("file",this.file),e.append("id",this.id),e}}},Zu=Ku,ed=Object(u["a"])(Zu,Hu,Xu,!1,null,null,null),td=ed.exports,ad=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("生产记录")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/productionRecord/create")}}},[e._v("添加")])],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 你确定要删除吗?")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.deleteRow()}}},[e._v("确认")])],1)]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"productName",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"productionQuantity",label:"产量（公斤)"}}),a("el-table-column",{attrs:{prop:"productionArea",label:"产地"}}),a("el-table-column",{attrs:{prop:"productionTime",label:"生产时长"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.productionTime)+"天")]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/productionRecord/editProductionRecord/"+i.id})}}},[e._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.showConfirmDialog(""+i.id)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)])},id=[],rd={name:"productionRecord",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},total:0,tableData:[],listLoading:!1,confirm_dialogVisible:!1,selectedId:null}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.listLoading=!0,$().get("/api/production_record/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},deleteRow:function(){var e=this;$().delete("/api/production_record/delete/"+this.selectedId).then((function(t){setTimeout((function(){e.confirm_dialogVisible=!1}),500),e.getData()})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},showConfirmDialog:function(e){this.selectedId=e,this.confirm_dialogVisible=!0}}},od=rd,ld=Object(u["a"])(od,ad,id,!1,null,null,null),nd=ld.exports,sd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产记录")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加记录")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 选择文件 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productNameList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产量",prop:"productionQuantity"}},[a("el-input",{model:{value:e.ruleFormValue.productionQuantity,callback:function(t){e.$set(e.ruleFormValue,"productionQuantity",e._n(t))},expression:"ruleFormValue.productionQuantity"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产地",prop:"productionArea"}},[a("el-input",{model:{value:e.ruleFormValue.productionArea,callback:function(t){e.$set(e.ruleFormValue,"productionArea",t)},expression:"ruleFormValue.productionArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"生产时长(天)",prop:"productionTime"}},[a("el-input",{model:{value:e.ruleFormValue.productionTime,callback:function(t){e.$set(e.ruleFormValue,"productionTime",e._n(t))},expression:"ruleFormValue.productionTime"}})],1)],1)],1),a("el-form-item",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.ruleFormValue.file?a("span",[e._v("("+e._s(e.ruleFormValue.file.name)+")")]):a("span",[e._v("请选择需要上传的文件...")])])])])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},cd=[],ud={name:"addProductionRecord",data:function(){return{productNameList:[],listLoading:!1,ruleFormValue:{productId:"",productionQuantity:"",productionArea:"",productionTime:"",file:null},dialogVisible:!1,rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],productionQuantity:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],productionArea:[{required:!0,message:"请插入"}],productionTime:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]}}},created:function(){this.getProductionDetail()},methods:{getProductionDetail:function(){var e=this;$().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productNameList=t.data})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/production_record/create",a).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/productionRecord"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.ruleFormValue.file&&e.append("file",this.ruleFormValue.file),e.append("id",0),e.append("productId",this.ruleFormValue.productId);var t=this.filterProduct(this.ruleFormValue.productId);return e.append("productName",t),e.append("productionArea",this.ruleFormValue.productionArea),e.append("productionQuantity",this.ruleFormValue.productionQuantity),e.append("productionTime",this.ruleFormValue.productionTime),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.ruleFormValue.file=this.$refs.file.files[0]},filterProduct:function(e){var t=this.productNameList.find((function(t){return t.productId===e}));return t?t.productName:""}}},dd=ud,pd=Object(u["a"])(dd,sd,cd,!1,null,null,null),md=pd.exports,fd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("生产记录")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("修改记录")])],1)],1),e.data?a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productNameList,(function(e){return a("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产量",prop:"productionQuantity"}},[a("el-input",{model:{value:e.ruleFormValue.productionQuantity,callback:function(t){e.$set(e.ruleFormValue,"productionQuantity",e._n(t))},expression:"ruleFormValue.productionQuantity"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产地",prop:"productionArea"}},[a("el-input",{model:{value:e.ruleFormValue.productionArea,callback:function(t){e.$set(e.ruleFormValue,"productionArea",t)},expression:"ruleFormValue.productionArea"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"生产时长(天)",prop:"productionTime"}},[a("el-input",{model:{value:e.ruleFormValue.productionTime,callback:function(t){e.$set(e.ruleFormValue,"productionTime",e._n(t))},expression:"ruleFormValue.productionTime"}})],1)],1)],1),a("el-form-item",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"item",staticStyle:{display:"flex"}},[a("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),a("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?a("span",[e._v("("+e._s(e.file.name)+")")]):e.data.productionProfiles?a("div",{staticClass:"item-value"},[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n                  "+e._s(e.data.productionProfiles.replace("/uploads/",""))+"\n                ")])],1):e._e()])])])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1):a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[e._v("装货...")])])},gd=[],hd={name:"editProductionRecord",data:function(){return{file:null,id:"",pageLoading:!1,listLoading:!1,data:null,productNameList:[],ruleFormValue:{productId:"",productionQuantity:"",productionArea:"",productionTime:""},rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],productionQuantity:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],productionArea:[{required:!0,message:"请插入"}],productionTime:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]}}},created:function(){this.getProductionDetail(),this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;this.listLoading=!0,$().get("/api/production_record/get/"+e).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.data=e,t.ruleFormValue.productId=t.data.productId,t.ruleFormValue.productionQuantity=t.data.productionQuantity,t.ruleFormValue.productionArea=t.data.productionArea,t.ruleFormValue.productionTime=t.data.productionTime})).catch((function(e){console.log(e)}))},getProductionDetail:function(){var e=this;$().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productNameList=t.data})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.pageLoading=!0;var a=new FormData;a=t.makeFormData(),$().put("/api/production_record/update/"+t.data.id,a).then((function(e){setTimeout((function(){t.pageLoading=!1}),500),t.$router.push({path:"/productionRecord"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",this.data.id),e.append("productId",this.ruleFormValue.productId);var t=this.filterProduct(this.ruleFormValue.productId);return e.append("productName",t),e.append("productionArea",this.ruleFormValue.productionArea),e.append("productionQuantity",this.ruleFormValue.productionQuantity),e.append("productionTime",this.ruleFormValue.productionTime),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},filterProduct:function(e){var t=this.productNameList.find((function(t){return t.productId===e}));return t?t.productName:""},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.data.productionProfiles,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.data.productionProfiles.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},bd=hd,vd=Object(u["a"])(bd,fd,gd,!1,null,null,null),yd=vd.exports,wd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("通知管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[e._v("通知公告")]),a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/notice/create"})}}},[e._v("发布公告")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/notice/detailSms"})}}},[e._v("短信记录")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"releaseTime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.releaseTime)))]}}])}),a("el-table-column",{attrs:{prop:"releasePerson",label:"作者"}}),a("el-table-column",{attrs:{prop:"emergencyDegree",label:"紧急程度"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.getEmergencyDegree(a.emergencyDegree)))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/notice/view/"+i.id})}}},[e._v("查看")]),e.isShowEditButton?a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.$router.push({path:"/notice/edit/"+i.id})}}},[e._v("修改")]):e._e(),e.isShowAddButton?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/notice/smsNotice/"+i.id})}}},[e._v("短信通知")]):e._e()]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},_d=[],kd={name:"notice",components:{Pagination:_e},data:function(){return{releasePerson:"",emergencyDegree:0,releaseTime:"",title:"",type:"",page:{pageIndex:1,pageSize:20},isShowAddButton:null,isShowEditButton:null,listLoading:!0,total:0,tableData:[],emergencyDegrees:[{id:0,name:"高"},{id:1,name:"中"},{id:2,name:"低"}]}},mounted:function(){this.getList()},created:function(){this.isShowAddButton=!!n.a.get("authList").find((function(e){return"smsNotice"==e.privilegeCode})),this.isShowEditButton=!!n.a.get("authList").find((function(e){return"editNotice"==e.privilegeCode}))},methods:{order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/notice/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getEmergencyDegree:function(e){var t=this.emergencyDegrees.find((function(t){return t.id===parseInt(e)}));return t?t.name:""},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){$().delete("/api/job_definition/delete/"+e).then((function(e){t.getList()})).catch((function(e){console.log(e)}))}))}}},Cd=kd,xd=(a("778e"),Object(u["a"])(Cd,wd,_d,!1,null,null,null)),Sd=xd.exports,Fd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("通知管理 / 通知公告")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"formData",staticStyle:{"max-width":"980px",margin:"0 auto"},attrs:{model:e.formData}},[a("el-form-item",{staticClass:"detail-text-align"},[e._v("\n          "+e._s(e.formData.title)+"\n      ")]),a("el-form-item",{staticClass:"detail-text-align"},[a("span",[e._v("发布日期：")]),a("span",[e._v(e._s(e._f("formatDate")(e.formData.releaseTime)))]),a("span",{staticStyle:{"margin-left":"50px"}},[e._v("发布者：")]),a("span",[e._v(e._s(e.formData.releasePerson))])]),a("el-form-item",[a("p",{staticStyle:{"word-wrap":"break-word","line-height":"1.5em"}},[e._v(e._s(e.formData.content))])]),a("el-form-item",{attrs:{label:"",prop:"file"}},[e.file_live_1?a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){return e.downloadFile()}}},[e._v("附件下载")]):a("el-button",{attrs:{size:"small",plain:"",disabled:""}},[e._v("附件下载")]),e.file_live_1?a("span",{staticClass:"item-value"},[e._v("\n              ("+e._s(e.fileName)+")\n          ")]):e._e()],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              返回\n          ")])],1)],1)],1)])},Id=[],Dd={data:function(){return{formData:{timingRelease:"",releaseTime:"",releasePerson:"",title:"",content:""},fileName:"",file_live_1:null,id:0,dataloading:!0}},beforeMount:function(){this.id=this.$route.params.id,this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;this.dataloading=!0,$().get("/api/notice/get/"+e).then((function(e){t.formData=e,e.noticeProfiles&&(t.file_live_1=e.noticeProfiles,t.fileName=t.file_live_1.replace("/uploads/","")),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.file_live_1,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.file_live_1.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},Td=Dd,Vd=Object(u["a"])(Td,Fd,Id,!1,null,null,null),Ld=Vd.exports,Nd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("通知管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("发布公告")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"addForm",staticClass:"form-width",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{prop:"timingRelease",label:"定时发布"}},[a("el-date-picker",{attrs:{"auto-complete":"off",type:"datetime"},model:{value:e.addForm.timingRelease,callback:function(t){e.$set(e.addForm,"timingRelease",t)},expression:"addForm.timingRelease"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"紧急程度",prop:"emergencyDegree"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.emergencyDegree,callback:function(t){e.$set(e.addForm,"emergencyDegree",t)},expression:"addForm.emergencyDegree"}},e._l(e.emergencyDegrees,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"类型",prop:"type"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"日期",prop:"releaseTime"}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.addForm.releaseTime,callback:function(t){e.$set(e.addForm,"releaseTime",t)},expression:"addForm.releaseTime"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"发布人",prop:"releasePerson"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.releasePerson,callback:function(t){e.$set(e.addForm,"releasePerson",t)},expression:"addForm.releasePerson"}})],1),a("el-form-item",{staticClass:"label-align",attrs:{prop:"title",label:"标题"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title",t)},expression:"addForm.title"}})],1),a("el-form-item",{staticClass:"label-align",attrs:{prop:"content",label:"内容"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea",rows:10},model:{value:e.addForm.content,callback:function(t){e.$set(e.addForm,"content",t)},expression:"addForm.content"}})],1),a("el-form-item",{attrs:{label:"",prop:"file"}},[a("input",{ref:"file_live_1",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),a("span",{staticClass:"margin-left-10",staticStyle:{width:"300px"}},[e._v(e._s(e.fileName))])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("addForm")}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},$d=[],Pd={data:function(){return{addForm:{timingRelease:"",emergencyDegree:0,type:"",releaseTime:"",releasePerson:"",title:"",content:""},emergencyDegrees:[{id:0,name:"高"},{id:1,name:"中"},{id:2,name:"低"}],rules:{content:[{required:!0,message:"请插入",trigger:"change"}],releaseTime:[{required:!0,message:"请插入",trigger:"change"}],title:[{required:!0,message:"请选择",trigger:"change"}],timingRelease:[{required:!0,message:"请插入",trigger:"change"}],emergencyDegree:[{required:!0,message:"请选择",trigger:"change"}],type:[{required:!0,message:"请选择",trigger:"change"}],releasePerson:[{required:!0,message:"请选择",trigger:"change"}]},images:[],fileName:"",file_live_1:null,dataloading:!1}},mounted:function(){},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataloading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/notice/create",a).then((function(e){t.$router.push({path:"/notice"}),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("timingRelease",this.addForm.timingRelease),e.append("emergencyDegree",this.addForm.emergencyDegree),e.append("type",this.addForm.type),e.append("releaseTime",this.addForm.releaseTime),e.append("releasePerson",this.addForm.releasePerson),e.append("title",this.addForm.title),e.append("content",this.addForm.content),e.append("id",0),e.append("file",this.file_live_1),e.append("createUserId",j().user().id),e.append("updateUserId",j().user().id),e}}},zd=Pd,Ad=Object(u["a"])(zd,Nd,$d,!1,null,null,null),Rd=Ad.exports,Bd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("通知管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("发布公告")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"editForm",staticClass:"form-width",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{prop:"timingRelease",label:"定时发布"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.editForm.timingRelease,callback:function(t){e.$set(e.editForm,"timingRelease",t)},expression:"editForm.timingRelease"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"紧急程度",prop:"emergencyDegree"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.emergencyDegree,callback:function(t){e.$set(e.editForm,"emergencyDegree",t)},expression:"editForm.emergencyDegree"}},e._l(e.emergencyDegrees,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"类型",prop:"type"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"日期",prop:"releaseTime"}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.editForm.releaseTime,callback:function(t){e.$set(e.editForm,"releaseTime",t)},expression:"editForm.releaseTime"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"发布人",prop:"releasePerson"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.releasePerson,callback:function(t){e.$set(e.editForm,"releasePerson",t)},expression:"editForm.releasePerson"}})],1),a("el-form-item",{staticClass:"label-align",attrs:{prop:"title",label:"标题"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),a("el-form-item",{staticClass:"label-align",attrs:{prop:"content",label:"内容"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea",rows:10},model:{value:e.editForm.content,callback:function(t){e.$set(e.editForm,"content",t)},expression:"editForm.content"}})],1),a("el-form-item",{attrs:{label:"",prop:"file"}},[a("input",{ref:"file_live_1",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file_live_1?e._e():a("span",{staticClass:"item-value"},[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n            "+e._s(e.fileName)+"\n          ")])],1),e.file_live_1?a("span",{staticClass:"item-value"},[e._v(" ("+e._s(e.fileName)+") ")]):e._e()],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("editForm")}}},[e._v("\n          保存\n        ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n          取消\n        ")])],1)],1)],1)])},Od=[],jd={data:function(){return{editForm:{timingRelease:"",emergencyDegree:2,type:"",releaseTime:"",releasePerson:"",title:"",content:""},emergencyDegrees:[{id:"0",name:"高"},{id:"1",name:"中"},{id:"2",name:"低"}],rules:{content:[{required:!0,message:"请插入",trigger:"change"}],releaseTime:[{required:!0,message:"请插入",trigger:"change"}],title:[{required:!0,message:"请选择",trigger:"change"}],emergencyDegree:[{required:!0,message:"请选择",trigger:"change"}],type:[{required:!0,message:"请选择",trigger:"change"}],releasePerson:[{required:!0,message:"请选择",trigger:"change"}]},images:[],fileName:"",file_live_1:null,id:0,dataloading:!0}},beforeMount:function(){this.id=this.$route.params.id,this.getData(this.$route.params.id)},methods:{getData:function(e){var t=this;this.dataloading=!0,$().get("/api/notice/get/"+e).then((function(e){t.editForm=e,e.noticeProfiles&&(t.file_live_1=e.noticeProfiles,t.fileName=t.file_live_1.replace("/uploads/","")),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.file_live_1,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.file_live_1.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataloading=!0;var a=new FormData;a=t.makeFormData(),$().put("/api/notice/update/"+t.id,a).then((function(e){t.$router.push({path:"/notice"}),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("timingRelease",""),e.append("emergencyDegree",this.editForm.emergencyDegree),e.append("type",this.editForm.type),e.append("releaseTime",new Date(this.editForm.releaseTime)),e.append("releasePerson",this.editForm.releasePerson),e.append("title",this.editForm.title),e.append("content",this.editForm.content),e.append("noticeProfiles",this.file_live_1),e.append("id",this.id),e.append("updateUserId",j().user().id),e.append("file",this.file_live_1),e}}},Ed=jd,Ud=Object(u["a"])(Ed,Bd,Od,!1,null,null,null),qd=Ud.exports,Md=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("通知管理")]),a("el-breadcrumb-item",[e._v("通知公告")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("短信通知")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-row",{staticStyle:{width:"1280px"}},[a("el-col",{staticStyle:{width:"100px","text-align":"center"}},[e._v("短信内容")]),a("el-col",{staticStyle:{width:"1080px"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off",rows:10},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1)],1),a("div",{staticClass:"iptBox",staticStyle:{"margin-left":"100px",width:"800px"}},[a("span",{staticStyle:{margin:"0 auto","margin-right":"0"}},[e._v("\n        共选择了"+e._s(e.selectCount)+"位联系人\n        "),a("el-button",{attrs:{type:"primary"},on:{click:e.postData}},[e._v("发送")])],1),a("div",{staticStyle:{width:"800px",margin:"5px 0 5% 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),a("el-table-column",{attrs:{prop:"townId",label:"单位",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(e.getTownName(a.townId))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"contactPerson",label:"联系人"}}),a("el-table-column",{attrs:{prop:"contactWay",label:"手机"}})],1)],1),a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)])])},Yd=[],Gd={name:"smsNotice",data:function(){return{loggedinUserName:"",listLoading:!0,total:0,tableData:[],selectCount:0,township:[],receiver:[],content:"",title:"",checkedAll:!1,isIndeterminate:!0,checkedItem:!1,sels:[],id:""}},mounted:function(){this.getList(),this.getTown(),this.loggedinUserName=j().user().username,this.id=this.$route.params.id,this.getData(this.id)},methods:{getData:function(e){var t=this;this.listLoading=!0,$().get("/api/notice/get/"+e).then((function(e){t.content=e.content,t.title=e.title,setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},getTown:function(){var e=this;this.listLoading=!0,$().get("/api/town/all").then((function(t){e.township=e.township.concat(t),setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getTownName:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.name+"农产品质量安全监管站":""},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/user/all",{userType:2,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},postData:function(){var e=this;this.listLoading=!0;$().post("/api/sendMsg",{content:this.content,sender:n.a.get("userData").mobile,mobile:this.receiver,msgType:2,title:this.title}).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.$router.go(-1)})).catch((function(t){console.log(t),setTimeout((function(){e.listLoading=!1}),500)}))},selsChange:function(e){this.sels=e;for(var t=0;t<this.sels.length;t++)this.sels[t].contactWay&&this.receiver.push(this.sels[t].contactWay);this.receiver.push("sdfsdfsf"),this.selectCount=this.sels.length}}},Wd=Gd,Qd=Object(u["a"])(Wd,Md,Yd,!1,null,null,null),Jd=Qd.exports,Hd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("通知管理")]),a("el-breadcrumb-item",[e._v("通知公告")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("短信记录")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[e._v("短信记录")]),a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"sendTime",label:"发送时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(e._f("formatDate")(a.sendTime))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"noticeContents",label:"短信内容",width:"500"}}),a("el-table-column",{attrs:{prop:"sender",label:"发送人"}}),a("el-table-column",{attrs:{prop:"sendStatus",label:"发送结果"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n\t\t\t\t\t\t\t"+e._s(e.getSendStatus(a.sendStatus)))]}}])}),a("el-table-column",{attrs:{label:"发送数量",prop:"sendCount"}})],1)],1),a("div",{staticClass:"pageBox"},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Xd=[],Kd={name:"detailSms",components:{Pagination:_e},data:function(){return{sendTime:"",noticeContents:0,sendStatus:"",sender:"",sendCount:"",page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[]}},mounted:function(){this.getList()},methods:{order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/notice_record/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getSendStatus:function(e){return 1==e?"成功":0==e?"失败":void 0}}},Zd=Kd,ep=Object(u["a"])(Zd,Hd,Xd,!1,null,null,null),tp=ep.exports,ap=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("水产统计")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.handleImportExcel()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.handleDownloadSample()}}},[e._v("例文档下载")]),a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",name:"Upload Excel"},on:{change:function(t){return e.handleFileUpload()}}})],1),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"sampleName",label:"样品名称"}}),a("el-table-column",{attrs:{prop:"sampleScientificName",label:"样品学名"}}),a("el-table-column",{attrs:{prop:"sampleSerialNum",label:"样品编号"}}),a("el-table-column",{attrs:{prop:"city",label:"市别"}}),a("el-table-column",{attrs:{prop:"district",label:"区县"}}),a("el-table-column",{attrs:{prop:"inspectedUnit",label:"被检单位"}}),a("el-table-column",{attrs:{prop:"sampleType",label:"样品类型"}}),a("el-table-column",{attrs:{prop:"furaMeta",label:"呋喃唑酮代谢物"}}),a("el-table-column",{attrs:{prop:"malaGreen",label:"孔雀石绿"}}),a("el-table-column",{attrs:{prop:"detectionRoomNum",label:"检测室编号"}}),a("el-table-column",{attrs:{prop:"detectionRoomName",label:"检测室名称"}}),a("el-table-column",{attrs:{prop:"detectionTime",label:"检测时间"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},ip=[],rp=(a("34ef"),{name:"aquaticStatistics",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},file:null,total:0,tableData:[],listLoading:!1,filesample:"AquaticSample.xlsx"}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,$().get("/api/aquatic_statistics/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},handleDownloadSample:function(){S()({url:I.DOWNLOAD_URL()+this.filesample,method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(e.data),a=document.createElement("a");a.href=t,a.setAttribute("download","file.png"),document.body.appendChild(a),a.click()})).catch((function(){return console.log("error occured")}))},fixdata:function(e){for(var t="",a=0,i=10240;a<e.byteLength/i;++a)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*i,a*i+i)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*i))),t},workbook_make_json:function(e){var t=[];return t},handleImportExcel:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file=this.$refs.file.files[0];var e=new FileReader;e.readAsArrayBuffer(this.file)},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}}),op=rp,lp=Object(u["a"])(op,ap,ip,!1,null,null,null),np=lp.exports,sp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.lineChartLoading,expression:"lineChartLoading"}],staticClass:"container customized"},[e.lineChartLoading?e._e():a("div",{staticClass:"box padding-modified header statisticFarmerHeader"}),a("div",{staticClass:"box padding-modified body"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"disability-chart chart-container padding-10 large"},[a("el-row",{staticClass:"w-100 flex-center margin-bottom-10"},[a("el-col",{staticClass:"margin-left-10 text-left",attrs:{span:12}},[e.is_ie?a("h1",{staticStyle:{"font-size":"20px","margin-top":"5px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("农残")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("监测统计")])]):a("h1",{staticClass:"gradient-colored",staticStyle:{"font-size":"20px"}},[e._v("农残监测统计")])]),a("el-col",{staticClass:"margin-left-auto flex-center",attrs:{span:4}},[a("div",{staticClass:"white-colored inline-block-IE"},[e._v("按年")]),a("el-input",{staticClass:"w-50 margin-left-10 chart-input",attrs:{size:"small",type:"number"},model:{value:e.toYear,callback:function(t){e.toYear=t},expression:"toYear"}})],1),a("el-col",{staticClass:"margin-left-20 flex-center",attrs:{span:3}},[a("div",{staticClass:"white-colored inline-block-IE"},[e._v("按月")]),a("el-input",{staticClass:"w-50 margin-left-10 chart-input",attrs:{size:"small",type:"number"},model:{value:e.toMonth,callback:function(t){e.toMonth=t},expression:"toMonth"}})],1),a("el-col",{staticClass:"margin-left-20",attrs:{span:3}},[a("el-button",{staticClass:"no-effect margin-top-reverse-5-IE",attrs:{type:"primary",plain:""},on:{click:function(t){return e.refreshScreen()}}},[e._v("开始统计")])],1)],1),a("el-container",[a("el-table",{staticClass:"fixed-height chart-table",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"detect_unit",label:"站点","class-name":"white-colored"}}),a("el-table-column",{attrs:{prop:"cnt",label:"检测数量"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"blue-colored"},[e._v(e._s(i.cnt))])]),a("el-progress",{attrs:{percentage:e.getPercent(i.cnt,e.maxCnt,1),"stroke-width":10,"show-text":!1}})]}}])}),a("el-table-column",{attrs:{prop:"cnt_ok",label:"合格","class-name":"padding-left-20 blue-colored",width:"100"}}),a("el-table-column",{attrs:{prop:"cnt_ok",label:"不合格",width:"100","class-name":"blue-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.cnt-a.cnt_ok))]}}])}),a("el-table-column",{attrs:{prop:"cnt",label:"合格率","class-name":"padding-right-20"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"blue-colored"},[e._v(e._s(parseInt(i.cnt_ok/i.cnt*100))+"%")])]),a("el-progress",{attrs:{percentage:parseInt(i.cnt_ok/i.cnt*100),"stroke-width":10,status:e.getColor(parseInt(i.cnt_ok/i.cnt*100)),"show-text":!1}})]}}])})],1)],1),e.summaryData?a("el-table",{staticClass:"border-hide chart-table",attrs:{data:e.summaryData,"show-header":!1,"row-class-name":"success-row"}},[a("el-table-column",{attrs:{prop:"name",label:"站点","class-name":"white-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("b",[e._v(e._s(i.name))])]}}],null,!1,3932238797)}),a("el-table-column",{attrs:{label:"检测数量",prop:"rowTotalSum","class-name":"blue-colored text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("h1",{staticClass:"large-font italic-font"},[e._v(e._s(i.rowTotalSum))])]}}],null,!1,2622334035)}),a("el-table-column",{attrs:{prop:"rowOkSum",label:"合格","class-name":"padding-left-20 blue-colored text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("h1",{staticClass:"large-font italic-font"},[e._v(e._s(i.rowOkSum))])]}}],null,!1,3798595381)}),a("el-table-column",{attrs:{label:"不合格",prop:"rowOkSum","class-name":"blue-colored text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("h1",{staticClass:"large-font italic-font"},[e._v(e._s(i.rowTotalSum-i.rowOkSum))])]}}],null,!1,53862207)}),a("el-table-column",{attrs:{prop:"rowTotalSum",label:"不合"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.rowTotalSum?a("el-progress",{attrs:{percentage:e.getPercent(i.rowOkSum,i.rowTotalSum,1),"stroke-width":10,status:e.getColor(parseInt(i.rowOkSum/i.rowTotalSum*100)),"show-text":!1}}):e._e()]}}],null,!1,2728699168)}),a("el-table-column",{attrs:{prop:"name",label:"合格率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"large-font blue-colored italic-font"},[e._v(e._s(e.getPercent(i.rowOkSum,i.rowTotalSum,2))+"%")])])]}}],null,!1,1727436588)})],1):e._e()],1)]),a("el-col",{staticClass:"position-relative",attrs:{span:10}},[e.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("各站点衣残")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("捡测上传数据统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("各站点衣残捡测上传数据统计")]),a("div",{ref:"chartdiv1",staticClass:"disability-chart chart-container margin-left-10 large"},[a("figure",[a("chart",{ref:"pie",attrs:{options:e.pie,"init-options":e.initOptions,autoresize:""}})],1)])])],1),a("el-row",{staticClass:"w-100"},[a("el-col",[a("div",{staticClass:"w-100 flex-box disability-chart chart-container"},[e.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("各站点衣残捡测")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("上传数据的比例分布")])]):a("h1",{staticClass:"gradient-colored chart-title",staticStyle:{"font-size":"20px"}},[e._v("各站点衣残捡测上传数据的比例分布")]),a("div",{ref:"chartdiv",staticClass:"w-50 inline-block-IE chart-div-IE"}),a("div",{staticClass:"divider inline-block-IE divider-IE"}),a("div",{ref:"chartdiv2",staticClass:"w-50 inline-block-IE chart-div-IE"})])])],1)],1)])},cp=[],up=a("71c9"),dp=a("c497"),pp=a("5a54"),mp=a("9ca8");a("c037"),a("007d");up["h"](pp["a"]);var fp={name:"statisticsFarmers",components:{chart:mp["a"]},data:function(){return{page:{pageIndex:1,pageSize:50},tableData:[],pie:{},tableDataByCnt:[],summaryData:[],listLoading:!1,lineChartLoading:!1,lineChartData:[],toYear:null,toMonth:null,maxCnt:null,initOptions:{renderer:"canvas"},progressColor:"warning",colorList:["#229efe","#20beff","#21e3ff","#21ffda","#1fffa6","#61f779","#96f65f","#c9fb64","#c9fb64","#fbd661","#f1be51","#f68a63","#f17263","#ed6082","#ee63ca","#7366f4"],is_ie:null}},mounted:function(){this.isIE(),this.getData(),this.makeLineChart()},methods:{refreshScreen:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.lineChartLoading=!0,e.next=3,this.getData();case 3:this.lineChartLoading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createGrid:function(e,t){var a=t.axisRanges.create();a.value=e,a.label.text=this.formatNumber(e)},formatNumber:function(e){return e/1e3+"K"},getData:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,t=this.toYear&&this.toMonth?new Date(this.toYear,this.toMonth,0):new Date,e.next=4,$().get("/api/disability_check/statis",{detectTimeTo:t,sortBy:"detect_unit"}).then((function(e){a.listLoading=!1,a.tableData=[],a.maxCnt=null;var t=e.data,i=0,r=0;for(var o in t)t[o][1]>a.maxCnt&&(a.maxCnt=t[o][1]),a.tableData.push({detect_unit:t[o][0],cnt:parseInt(t[o][1]),cnt_ok:parseInt(t[o][2])}),i+=parseInt(t[o][1]),r+=parseInt(t[o][2]);a.summaryData=[],a.summaryData.rowTotalSum!==i&&a.summaryData.rowOkSum!==r&&a.summaryData.push({name:"合计",rowTotalSum:i,rowOkSum:r}),a.makePieChart()})).catch((function(e){console.log(e)}));case 4:return e.next=6,$().get("/api/disability_check/statis",{detectTimeTo:t,sortBy:"cnt"}).then((function(e){a.listLoading=!1,a.tableDataByCnt=[];var t=e.data;for(var i in t)a.tableDataByCnt.push({detect_unit:t[i][0],cnt:t[i][1],cnt_ok:t[i][2]});a.makeXYChart()})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getLineChartData:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t,a,i,r,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.lineChartData=[],this.lineChartLoading=!0,t=new Date,t.setMonth(t.getMonth()-11),a=t.getFullYear(),i=t.getMonth(),r=new Date(a,i,1),t=new Date,o=new Date(t.getFullYear(),t.getMonth()+1,0),e.next=11,$().get("/api/disability_check/statis/monthlysum",{detectTimeFrom:r,detectTimeTo:o}).then((function(e){for(var a=e.data,i=function(e){t=new Date,t.setMonth(t.getMonth()-e);var i=t.getFullYear()+"-"+(t.getMonth()+1),r=a.find((function(e){return e[2]===i}));r?l.lineChartData.push({month:i,totalCnt:r[0]}):l.lineChartData.push({month:i,totalCnt:0})},r=11;r>=0;r--)i(r)})).catch((function(e){console.log(e)}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),makeXYChart:function(){var e=up["f"](this.$refs.chartdiv,dp["j"]);e.data=this.tableDataByCnt,e.marginTop=20;var t=e.xAxes.push(new dp["a"]),a=e.titles.create();a.text="tmp",a.fontSize=5,a.marginBottom=40,a.fill=up["e"]("#012f8a"),t.dataFields.category="detect_unit",t.renderer.grid.template.location=0,t.renderer.minGridDistance=20,t.renderer.grid.template.disabled=!0,t.renderer.labels.template.fill="white",t.renderer.labels.template.rotation=-45,t.renderer.labels.template.truncate=!0,t.renderer.labels.template.maxWidth=150,t.renderer.labels.template.fontSize=12,t.renderer.labels.template.horizontalCenter="right",t.renderer.line.strokeOpacity=1,t.renderer.line.strokeWidth=2,t.renderer.line.stroke=up["e"]("#3787ac");var i=e.yAxes.push(new dp["i"]);i.min=0,i.renderer.labels.template.fill="white",i.renderer.grid.template.stroke=up["e"]("#fff"),i.renderer.line.strokeOpacity=1,i.renderer.line.strokeWidth=2,i.renderer.line.stroke=up["e"]("#3787ac");var r=e.series.push(new dp["c"]);r.dataFields.valueY="cnt",r.dataFields.categoryX="detect_unit",r.name="cnt",r.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=1;var o=new up["c"];o.addColor(up["e"]("#08d3fc")),o.addColor(up["e"]("#4687eb")),o.rotation=90,r.fill=o;var l=r.bullets.push(new dp["d"]);l.label.text="{cnt}",l.label.fill=up["e"]("#20beff"),l.label.rotation=-45,l.label.dy=-10;var n=r.columns.template;n.strokeOpacity=0},makePieChart:function(){this.tableData.sort((function(e,t){return t.cnt-e.cnt}));var e=[];this.tableData.map((function(t){e.push({value:t.cnt,name:t.detect_unit.length>10?t.detect_unit.substring(0,7)+"...":t.detect_unit})})),this.pie={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"各站点衣残捡测上传数据统计",type:"pie",radius:"40%",center:["54%","50%"],data:e,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:2,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{fontSize:16,color:"#FFF",formatter:"{d}%: {b}"}}}],color:this.colorList};var t=-1,a=this.$refs.pie,i=this.pie.series[0].data.length;setInterval((function(){a.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:t}),t=(t+1)%i,a.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t}),a.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:t})}),1e3)},makeLineChart:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t,a,i,r,o,l,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLineChartData();case 2:t=up["f"](this.$refs.chartdiv2,dp["j"]),t.data=this.lineChartData,a=t.titles.create(),a.text="tmp",a.fontSize=5,a.marginBottom=40,a.fill=up["e"]("#012f8a"),i=t.createChild(up["b"]),i.text="最近12个月每月上传数据统计",i.fontSize=16,i.fill="white",i.fontWeight="bold",i.align="center",r=t.xAxes.push(new dp["a"]),r.renderer.grid.template.location=0,r.renderer.ticks.template.disabled=!0,r.renderer.line.strokeOpacity=1,r.renderer.line.strokeWidth=2,r.renderer.line.stroke=up["e"]("#3787ac"),r.renderer.grid.template.disabled=!0,r.renderer.labels.template.fill="white",r.renderer.minGridDistance=40,r.dataFields.category="month",r.startLocation=.4,r.endLocation=.6,o=t.yAxes.push(new dp["i"]),o.tooltip.disabled=!0,o.renderer.line.strokeOpacity=1,o.renderer.line.strokeWidth=2,o.renderer.line.stroke=up["e"]("#3787ac"),o.renderer.labels.template.fill="white",o.renderer.grid.template.stroke=up["e"]("#fff"),o.renderer.ticks.template.disabled=!0,o.min=0,l=t.series.push(new dp["f"]),l.dataFields.categoryX="month",l.dataFields.valueY="totalCnt",l.tooltipText="数量: {valueY.value}",l.fillOpacity=.2,l.stroke=up["e"]("#20beff"),l.strokeWidth=3,l.fill=up["e"]("#90bff2"),n=l.bullets.push(new dp["b"]),n.circle.radius=3,n.circle.stroke=up["e"]("#20beff"),n.circle.fill=up["e"]("#20beff"),n.circle.strokeWidth=3,s=l.bullets.push(new dp["d"]),s.label.text="{totalCnt}",s.label.fill=up["e"]("#20beff"),s.label.dy=-20,t.cursor=new dp["k"],t.scrollbarX=new up["d"],t.scrollbarX.parent=t.bottomAxesContainer,this.chart=t,this.lineChartLoading=!1;case 58:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){this.chart&&this.chart.dispose()},getPercent:function(e,t,a){return e&&t?(2===a&&(this.progressColor=parseInt(e/t*100)<100?"warning":"success"),parseInt(e/t*100)):0},getColor:function(e){return 100===e?"success":"warning"},isIE:function(){var e=navigator.userAgent;this.is_ie=e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}}},gp=fp,hp=(a("0f59"),Object(u["a"])(gp,sp,cp,!1,null,"a70211ec",null)),bp=hp.exports,vp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("绿色优质产品")])],1)],1),a("div",{staticClass:"box"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{type:"border-card"},on:{"tab-click":e.getList},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"绿色食品",name:"greeFood"}},[a("greenFood",{attrs:{year:e.year}})],1),a("el-tab-pane",{attrs:{label:"有机农产品",name:"organicProduce"}},[a("organicProduce",{attrs:{year:e.year}})],1),a("el-tab-pane",{attrs:{label:"种植业绿色优质基地",name:"plantingGreenBase"}},[a("plantingGreenBase",{attrs:{year:e.year}})],1),a("el-tab-pane",{attrs:{label:"种植业乡镇统计",name:"plantingTownshipStatistics"}},[a("plantingTownshipStatistics",{attrs:{year:e.year}})],1),a("el-tab-pane",{attrs:{label:"畜牧业绿色优质基地",name:"animalHusbandryBase"}},[a("animalHusbandryBase",{attrs:{year:e.year}})],1),a("el-tab-pane",{attrs:{label:"绿色优质农产品占比",name:"greenAgriculturalProducts"}},[a("greenAgriculturalProducts",{attrs:{year:e.year}})],1)],1)],1)])},yp=[],wp=(a("0706"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-dialog",{attrs:{visible:e.openDialog,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.openDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"年度："}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{rules:[{required:!0,message:"请插入",trigger:"blur"},{type:"number",message:"插入号码",trigger:"blur"}],span:3},model:{value:e.inYear,callback:function(t){e.inYear=t},expression:"inYear"}})],1)],1)],1),a("el-form-item",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[e._l(e.dynamicValidateForm.data,(function(t,i){return a("el-row",{key:i,staticClass:"margin-top-10"},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"板块：",prop:"data."+i+".town",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{staticClass:"w-80",model:{value:t.town,callback:function(a){e.$set(t,"town",a)},expression:"rowData.town"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"margin-left-20",attrs:{label:"1-6月实绩:",prop:"data."+i+".halfYear"}},[a("el-input",{staticClass:"w-60",model:{value:t.halfYear,callback:function(a){e.$set(t,"halfYear",e._n(a))},expression:"rowData.halfYear"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"margin-left-20",attrs:{label:"全年实绩:",prop:"data."+i+".fullYear"}},[a("el-input",{staticClass:"w-60",model:{value:t.fullYear,callback:function(a){e.$set(t,"fullYear",e._n(a))},expression:"rowData.fullYear"}})],1)],1)],1)})),a("el-row",{staticClass:"margin-left-40 margin-top-20"},[a("el-col",{attrs:{span:14}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")])],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:7}},[a("span",[e._v("插入时间: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTime,callback:function(t){e.registerTime=t},expression:"registerTime"}})],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],1)],2)],1)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-header",[e._v("镇（街道）、开发区推进高质量发展考核指标数据填报表")]),a("div",{staticClass:"iptBox"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showAddDialog()}}},[e._v("添加")])],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("开始日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeFrom,callback:function(t){e.registerTimeFrom=t},expression:"registerTimeFrom"}})],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("结束日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeTo,callback:function(t){e.registerTimeTo=t},expression:"registerTimeTo"}})],1),a("el-col",{attrs:{span:4}},[a("span",[e._v("年度: ")]),a("el-input",{staticClass:"w-60",nativeOn:{keyup:function(t){return e.handleChange(t)}},model:{value:e.searchYear,callback:function(t){e.searchYear=t},expression:"searchYear"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.changeFilter()}}},[e._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":"","span-method":e.spanMethod}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"town",label:"板块"}}),a("el-table-column",{attrs:{label:"绿色优质农产品比重(畜牧)",align:"center"}},e._l(e.columns,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,align:"center"}})})),1)],1)],1)],1)}),_p=[],kp={name:"animalHusbandryBase",props:{year:{required:!0,type:Number}},data:function(){return{inYear:0,searchYear:(new Date).getFullYear().toString(),openDialog:!1,columns:[{prop:"halfYear",label:"1-6月实绩"},{prop:"fullYear",label:"全年实绩"}],dynamicValidateForm:{data:[]},selectedRows:[],confirm_dialogVisible:!1,checked:[],registerTime:(new Date).toString("YYYY-MM-DD"),registerTimeFrom:new Date((new Date).getFullYear(),0,1),registerTimeTo:new Date,sendcount:0,alert_dialogVisible:!1,loggedinUserType:null,total:0,tableData:[],listLoading:!0}},created:function(){this.getData()},methods:{showAddDialog:function(){this.dynamicValidateForm.data=[],this.selectedRows=[],this.checked=[],this.inYear=Number((new Date).getFullYear()),this.addFormRow(),this.openDialog=!0},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),e()})).catch((function(e){}))},addFormRow:function(){this.dynamicValidateForm.data.push({town:"",fullYear:0,halfYear:0})},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.data[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.data.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},updateSelectedRows:function(){var e=this;this.confirm_dialogVisible=!1,this.openDialog=!1;var t=new Date,a=new Date;this.listLoading=!0,this.sendcount=0,this.dynamicValidateForm.data.forEach((function(i){var r=new FormData;r.append("createTime",a.toDateString("YYYY-MM-DD")),r.append("createUserId",j().user().id),r.append("fullYear",void 0==i.fullYear||""==i.fullYear?-1:i.fullYear),r.append("halfYear",void 0==i.halfYear||""==i.halfYear?-1:i.halfYear),r.append("id",0),r.append("registerTime",e.registerTime.toString("YYYY-MM-DD")),r.append("town",i.town),r.append("year",e.inYear),r.append("updateTime",t.toDateString("YYYY-MM-DD")),r.append("updateUserId",j().user().id),$().post("/api/green/livestock/create",r).then((function(t){e.sendcount++,e.sendcount===e.dynamicValidateForm.data.length&&(e.listLoading=!1,e.getData())}))}))},changeFilter:function(){this.getData()},handleChange:function(){this.searchYear>1990&&(this.registerTimeFrom=new Date(this.searchYear,0,1))},getData:function(){var e=this;this.listLoading=!0,$().get("/api/green/livestock/all",{registerTimeFrom:""==this.registerTimeFrom||null==this.registerTimeFrom?"":this.registerTimeFrom,registerTimeTo:""==this.registerTimeTo||null==this.registerTimeTo?"":this.registerTimeTo.setDate(this.registerTimeTo.getDate()+1),sortBy:"id",year:this.searchYear}).then((function(t){e.tableData=t.data,e.total=e.tableData.length,e.calculateTotal(),e.listLoading=!1,e.tableData.forEach((function(e){e.halfYear=-1==e.halfYear?"/":parseFloat(e.halfYear).toFixed(2),e.fullYear=-1==e.fullYear?"/":parseFloat(e.fullYear).toFixed(2)}))}))},calculateTotal:function(){var e=0,t=0;this.tableData.forEach((function(a){e+=-1==a.halfYear?0:a.halfYear,t+=-1==a.fullYear?0:a.fullYear})),this.tableData.push({town:"合计",halfYear:e,fullYear:t})},spanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(t==this.tableData.length-1){if(1==a)return{rowspan:1,colspan:2};if(0==a)return{rowspan:0,colspan:0}}},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return e.rowIndex+1}}},Cp=kp,xp=(a("3b62"),Object(u["a"])(Cp,wp,_p,!1,null,null,null)),Sp=xp.exports,Fp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-dialog",{attrs:{visible:e.openDialog,width:"90%","before-close":e.handleClose},on:{"update:visible":function(t){e.openDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"年度："}},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{rules:[{required:!0,message:"请插入",trigger:"blur"},{type:"number",message:"插入号码",trigger:"blur"}],span:3},model:{value:e.inYear,callback:function(t){e.inYear=t},expression:"inYear"}})],1)],1)],1),a("el-form-item",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[e._l(e.dynamicValidateForm.data,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"板块：",prop:"data."+i+".town",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.town,callback:function(a){e.$set(t,"town",a)},expression:"rowData.town"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"种植业占比:",prop:"data."+i+".planting"}},[a("el-input",{model:{value:t.planting,callback:function(a){e.$set(t,"planting",e._n(a))},expression:"rowData.planting"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"畜牧业占比:",prop:"data."+i+".livestock"}},[a("el-input",{model:{value:t.livestock,callback:function(a){e.$set(t,"livestock",e._n(a))},expression:"rowData.livestock"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"绿色优质农产品占比:",prop:"data."+i+".highQuality"}},[a("el-input",{model:{value:t.highQuality,callback:function(a){e.$set(t,"highQuality",e._n(a))},expression:"rowData.highQuality"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"下半年种植业预计占比:",prop:"data."+i+".plantingHalfPlan"}},[a("el-input",{model:{value:t.plantingHalfPlan,callback:function(a){e.$set(t,"plantingHalfPlan",e._n(a))},expression:"rowData.plantingHalfPlan"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"下半年畜牧业预计占比:",prop:"data."+i+".livestockHalfPlan"}},[a("el-input",{model:{value:t.livestockHalfPlan,callback:function(a){e.$set(t,"livestockHalfPlan",e._n(a))},expression:"rowData.livestockHalfPlan"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"绿色优质农产品预计占比:",prop:"data."+i+".highQualityPlan"}},[a("el-input",{model:{value:t.highQualityPlan,callback:function(a){e.$set(t,"highQualityPlan",e._n(a))},expression:"rowData.highQualityPlan"}})],1)],1)],1)})),a("el-row",{staticClass:"margin-left-40 margin-top-20"},[a("el-col",{attrs:{span:17}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")])],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:4}},[a("span",[e._v("插入时间: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTime,callback:function(t){e.registerTime=t},expression:"registerTime"}})],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],1)],2)],1)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-header",[e._v("绿色优质农产品统计汇总")]),a("div",{staticClass:"iptBox"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showAddDialog()}}},[e._v("添加")])],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("开始日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeFrom,callback:function(t){e.registerTimeFrom=t},expression:"registerTimeFrom"}})],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("结束日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeTo,callback:function(t){e.registerTimeTo=t},expression:"registerTimeTo"}})],1),a("el-col",{attrs:{span:4}},[a("span",[e._v("年度: ")]),a("el-input",{staticClass:"w-60",nativeOn:{keyup:function(t){return e.handleChange(t)}},model:{value:e.searchYear,callback:function(t){e.searchYear=t},expression:"searchYear"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.changeFilter()}}},[e._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":"",border:"","span-method":e.spanMethod}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"town",label:"板块"}}),a("el-table-column",{attrs:{prop:"planting",label:"种植业占比"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.planting=-1==a.planting?0:a.planting)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"livestock",label:"畜牧业占比"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.livestock=-1==a.livestock?0:a.livestock)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"highQuality",label:"绿色优质农产品占比"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.highQuality=-1==a.highQuality?"/":a.highQuality)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"plantingHalfPlan",label:"下半年种植业预计占比"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.plantingHalfPlan=-1==a.plantingHalfPlan?"/":a.plantingHalfPlan)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"livestockHalfPlan",label:"下半年畜牧业预计占比"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.livestockHalfPlan=-1==a.livestockHalfPlan?"/":a.livestockHalfPlan)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"highQualityPlan",label:"绿色优质农产品预计占比"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.highQualityPlan=-1==a.highQualityPlan?"/":a.highQualityPlan)+"\n        ")]}}])})],1)],1)],1)},Ip=[],Dp={name:"greenAgriculturalProducts",props:{year:{required:!0,type:Number}},data:function(){return{inYear:0,searchYear:(new Date).getFullYear().toString(),openDialog:!1,dynamicValidateForm:{data:[]},selectedRows:[],confirm_dialogVisible:!1,checked:[],registerTime:(new Date).toString("YYYY-MM-DD"),registerTimeFrom:new Date((new Date).getFullYear(),0,1),registerTimeTo:new Date,sendcount:0,alert_dialogVisible:!1,total:0,tableData:[],listLoading:!0}},created:function(){this.getData()},methods:{showAddDialog:function(){this.dynamicValidateForm.data=[],this.selectedRows=[],this.checked=[],this.inYear=Number((new Date).getFullYear()),this.addFormRow(),this.openDialog=!0},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),e()})).catch((function(e){}))},addFormRow:function(){this.dynamicValidateForm.data.push({town:"",fullYear:0,halfYear:0})},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.data[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.data.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},updateSelectedRows:function(){var e=this;this.confirm_dialogVisible=!1,this.openDialog=!1;var t=new Date,a=new Date;this.listLoading=!0,this.sendcount=0,this.dynamicValidateForm.data.forEach((function(i){var r=new FormData;r.append("createTime",a.toDateString("YYYY-MM-DD")),r.append("createUserId",j().user().id),r.append("highQuality",void 0==i.highQuality||""==i.highQuality?-1:i.highQuality),r.append("highQualityPlan",void 0==i.highQualityPlan||""==i.highQualityPlan?-1:i.highQualityPlan),r.append("id",0),r.append("livestock",void 0==i.livestock||""==i.livestock?-1:i.livestock),r.append("livestockHalfPlan",void 0==i.livestockHalfPlan||""==i.livestockHalfPlan?-1:i.livestockHalfPlan),r.append("planting",void 0==i.planting||""==i.planting?-1:i.planting),r.append("plantingHalfPlan",void 0==i.plantingHalfPlan||""==i.plantingHalfPlan?-1:i.plantingHalfPlan),r.append("registerTime",e.registerTime.toString("YYYY-MM-DD")),r.append("town",i.town),r.append("updateTime",t.toDateString("YYYY-MM-DD")),r.append("updateUserId",j().user().id),r.append("year",e.inYear),$().post("/api/green/product_ratio/create",r).then((function(t){e.sendcount++,e.sendcount===e.dynamicValidateForm.data.length&&(e.listLoading=!1,e.getData())}))}))},changeFilter:function(){this.getData()},handleChange:function(){this.searchYear>1990&&(this.registerTimeFrom=new Date(this.searchYear,0,1))},getData:function(){var e=this;this.listLoading=!0,$().get("/api/green/product_ratio/all",{registerTimeFrom:""==this.registerTimeFrom||null==this.registerTimeFrom?"":this.registerTimeFrom,registerTimeTo:""==this.registerTimeTo||null==this.registerTimeTo?"":this.registerTimeTo.setDate(this.registerTimeTo.getDate()+1),sortBy:"id",year:this.searchYear}).then((function(t){e.tableData=t.data,e.total=e.tableData.length,e.calcualteTotal(),e.tableData.forEach((function(e){e.planting=-1==e.planting?"/":parseFloat(e.planting).toFixed(2),e.livestock=-1==e.livestock?"/":parseFloat(e.livestock).toFixed(2),e.highQuality=-1==e.highQuality?"/":parseFloat(e.highQuality).toFixed(2),e.plantingHalfPlan=-1==e.plantingHalfPlan?"/":parseFloat(e.plantingHalfPlan).toFixed(2),e.livestockHalfPlan=-1==e.livestockHalfPlan?"/":parseFloat(e.livestockHalfPlan).toFixed(2),e.highQualityPlan=-1==e.highQualityPlan?"/":parseFloat(e.highQualityPlan).toFixed(2)})),e.listLoading=!1}))},calcualteTotal:function(){var e=0,t=0,a=0,i=0,r=0,o=0;this.tableData.forEach((function(l){e+=-1==l.planting?0:l.planting,t+=-1==l.livestock?0:l.livestock,a+=-1==l.highQuality?0:l.highQuality,i+=-1==l.plantingHalfPlan?0:l.plantingHalfPlan,r+=-1==l.livestockHalfPlan?0:l.livestockHalfPlan,o+=-1==l.highQualityPlan?0:l.highQualityPlan})),this.tableData.push({town:"合计",planting:e,livestock:t,highQuality:a,plantingHalfPlan:i,livestockHalfPlan:r,highQualityPlan:o})},spanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(t==this.tableData.length-1){if(0==a)return{rowspan:0,colspan:0};if(1==a)return{rowspan:1,colspan:2}}},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return e.rowIndex+1}}},Tp=Dp,Vp=(a("66ec"),Object(u["a"])(Tp,Fp,Ip,!1,null,null,null)),Lp=Vp.exports,Np=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box padding-top-10"},[a("el-dialog",{attrs:{visible:e.show_addDialog,width:"80%","before-close":e.handleClose,title:"添加绿色食品"},on:{"update:visible":function(t){e.show_addDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},[e._l(e.dynamicValidateForm.rowDatas,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:3}},[a("el-form-item",{attrs:{label:"板块：",prop:"rowDatas."+i+".town",rules:{required:!0,message:"请选择",trigger:"blur"}}},[a("el-select",{staticClass:"w-100",model:{value:t.town,callback:function(a){e.$set(t,"town",a)},expression:"rowData.town"}},e._l(e.township,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:4}},[a("el-form-item",{attrs:{label:"生产单位:",prop:"rowDatas."+i+".companyId",rules:{required:!0,message:"请选择",trigger:"blur"}}},[a("el-select",{staticClass:"w-100",model:{value:t.companyId,callback:function(a){e.$set(t,"companyId",a)},expression:"rowData.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:4}},[a("el-form-item",{attrs:{label:"产品名称:",prop:"rowDatas."+i+".productName"}},[a("el-input",{model:{value:t.productName,callback:function(a){e.$set(t,"productName",a)},expression:"rowData.productName"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:3}},[a("el-form-item",{attrs:{label:"产品证书编号:",prop:"rowDatas."+i+".productCreditCode"}},[a("el-input",{model:{value:t.productCreditCode,callback:function(a){e.$set(t,"productCreditCode",a)},expression:"rowData.productCreditCode"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:2}},[a("el-form-item",{attrs:{label:"基地面积(亩):",prop:"rowDatas."+i+".area",rules:[{type:"number",message:"插入号码"}]}},[a("el-input",{model:{value:t.area,callback:function(a){e.$set(t,"area",e._n(a))},expression:"rowData.area"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:2}},[a("el-form-item",{attrs:{label:"产量(吨):",prop:"rowDatas."+i+".amount",rules:[{type:"number",message:"插入号码"}]}},[a("el-input",{model:{value:t.amount,callback:function(a){e.$set(t,"amount",e._n(a))},expression:"rowData.amount"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:3}},[a("el-form-item",{attrs:{label:"基地地址(到村):",prop:"rowDatas."+i+".location",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.location,callback:function(a){e.$set(t,"location",a)},expression:"rowData.location"}})],1)],1)],1)})),a("el-row",[a("el-col",{attrs:{span:15}})],1),a("el-row",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")])],1),a("el-col",{staticClass:"margin-top-10 text-right",attrs:{span:16}},[e._v("插入时间：")]),a("el-col",{attrs:{span:3}},[a("el-date-picker",{staticClass:"w-80",attrs:{align:"right",type:"date"},model:{value:e.registerTime,callback:function(t){e.registerTime=t},expression:"registerTime"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{staticClass:"margin-right-40",staticStyle:{float:"right"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],1)],2)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-header",{staticClass:"margin-bottom-10"},[e._v("常熟市"+e._s(e.curYear)+"年上半年度种植业绿色食品统计汇总")]),a("el-row",{staticClass:"margin-bottom-20"},[a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{plain:"",type:"success",size:"small"},on:{click:function(t){return e.showAddDialog()}}},[e._v("添加")])],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label margin-left-20 margin-right-5"},[e._v("\n          开始日期 :\n        ")]),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"插入时间 "},model:{value:e.registerTimeFrom,callback:function(t){e.registerTimeFrom=t},expression:"registerTimeFrom"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label margin-left-20 margin-right-5"},[e._v("\n          结束日期 :\n        ")]),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"插入时间 "},model:{value:e.registerTimeTo,callback:function(t){e.registerTimeTo=t},expression:"registerTimeTo"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label margin-left-20 margin-right-5"},[e._v("板块 :")]),a("el-input",{staticClass:"w-60",attrs:{align:"right"},model:{value:e.searchTown,callback:function(t){e.searchTown=t},expression:"searchTown"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label no-margin-left margin-right-5"},[e._v("\n          生产单位 :\n        ")]),a("el-input",{staticClass:"w-60",attrs:{align:"right"},model:{value:e.searchCompanyName,callback:function(t){e.searchCompanyName=t},expression:"searchCompanyName"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label no-margin-left margin-right-5"},[e._v("\n          已获证书 :\n        ")]),a("el-select",{staticClass:"w-50",attrs:{align:"right",type:"date"},model:{value:e.isCredit,callback:function(t){e.isCredit=t},expression:"isCredit"}},e._l(e.option,(function(e){return a("el-option",{key:e.val,attrs:{label:e.label,value:e.val}})})),1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:function(t){return e.getData()}}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-class-name":e.rowIndex,"span-method":e.mainSpanMethod,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"plate.value",label:"板块"}}),a("el-table-column",{attrs:{prop:"productionUnit.value",label:"生产单位"}}),a("el-table-column",{attrs:{prop:"productName.value",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"productCertificateNum.value",label:"产品证书编号",width:"200"}}),a("el-table-column",{attrs:{prop:"baseArea.value",label:"基地面积(亩)"}}),a("el-table-column",{attrs:{prop:"production.value",label:"产量(吨)"}}),a("el-table-column",{attrs:{prop:"baseAddress.value",label:"基地地址(到村)"}}),a("el-table-column",{staticStyle:{color:"black"},attrs:{label:"面积统计",align:"center"}},e._l(e.columns,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,align:"center"}})})),1)],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)},$p=[],Pp={name:"greenFood",components:{Pagination:_e},props:{year:{required:!0,type:Number}},data:function(){return{curYear:(new Date).getFullYear(),option:[{val:0,label:"全部"},{val:1,label:"是"},{val:2,label:"否"}],columns:[{prop:"certified.value",label:"已获证"},{prop:"declared.value",label:"已申报"}],isCredit:0,searchTown:"",searchCompanyName:"",registerTimeTo:new Date,registerTimeFrom:new Date((new Date).getFullYear(),0,1),show_addDialog:!1,confirm_dialogVisible:!1,selectedTown:null,selectedRows:[],township:[],companyProduction:[],dynamicValidateForm:{rowDatas:[{town:null,companyId:null,productName:"",productCreditCode:"",area:null,amount:null,location:""}]},registerTime:new Date,page:{pageIndex:1,pageSize:20},checked:[],total:0,tableData:[],objectData:[],listLoading:!1}},created:function(){this.getTown(),this.getCompanyProduction(),this.getData()},methods:{arrangeData:function(){var e=this,t=this.objectData;this.total=t.length;var a=0;t.forEach((function(t){var i=0;t.productionInfo.forEach((function(r){var o=0;r.productUnitInfo.forEach((function(i){e.tableData.push({plate:{value:t.plate,spaning:0},productionUnit:{value:r.productionUnit,spaning:0},productName:{value:i.productName,spaning:0},productCertificateNum:{value:i.productCertificateNum,spaning:0},baseArea:{value:i.baseArea,spaning:0},production:{value:i.production,spaning:0},baseAddress:{value:r.baseAddress,spaning:0},certified:{value:t.certified,spaning:0},declared:{value:t.declared,spaning:0}}),o++,a++})),e.tableData[a-o].productionUnit.spaning=o,e.tableData[a-o].baseAddress.spaning=o,i+=o})),e.tableData[a-i].plate.spaning=i,e.tableData[a-i].certified.spaning=i,e.tableData[a-i].declared.spaning=i})),this.tableData.push({plate:{value:"合计",spaning:0},productionUnit:{value:"",spaning:0},productName:{value:"",spaning:0},productCertificateNum:{value:"",spaning:0},baseArea:{value:this.baseQuality(),spaning:0},production:{value:this.productionQuality(),spaning:0},baseAddress:{value:"",spaning:0},certified:{value:this.cetifiyQuality(),spaning:0},declared:{value:this.declareQuality(),spaning:0}})},baseQuality:function(){var e=0;return this.objectData.forEach((function(t){t.productionInfo.forEach((function(t){t.productUnitInfo.forEach((function(t){e+="/"==t.baseArea?0:parseFloat(t.baseArea)}))}))})),e},productionQuality:function(){var e=0;return this.objectData.forEach((function(t){t.productionInfo.forEach((function(t){t.productUnitInfo.forEach((function(t){e+="/"==t.production?0:parseFloat(t.production)}))}))})),e},cetifiyQuality:function(){var e=0;return this.objectData.forEach((function(t){e+=t.certified})),e},declareQuality:function(){var e=0;return this.objectData.forEach((function(t){e+=t.declared})),e},mainSpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex),i=e.columnIndex;if(a<this.tableData.length-1){if(1===i)return t.plate.spaning>0?{rowspan:t.plate.spaning,colspan:1}:{rowspan:0,colspan:0};if(2===i)return t.productionUnit.spaning>0?{rowspan:t.productionUnit.spaning,colspan:1}:{rowspan:0,colspan:0};if(7===i)return t.baseAddress.spaning>0?{rowspan:t.baseAddress.spaning,colspan:1}:{rowspan:0,colspan:0};if(8===i)return t.certified.spaning>0?{rowspan:t.certified.spaning,colspan:1}:{rowspan:0,colspan:0};if(9===i)return t.declared.spaning>0?{rowspan:t.declared.spaning,colspan:1}:{rowspan:0,colspan:0}}else if(a==this.tableData.length-1){if(1==i)return{rowspan:1,colspan:2};if(2==i)return{rowspan:1,colspan:3};if(0==i||3==i||4==i)return{rowspan:0,colspan:0}}},getData:function(){var e=this;this.listLoading=!0,this.objectData=[],this.tableData=[],$().get("/api/green/green_food/all",{registerTimeTo:this.registerTimeTo.setDate(this.registerTimeTo.getDate()+1),registerTimeFrom:this.registerTimeFrom,companyName:this.searchCompanyName,town:this.searchTown,isCredit:this.isCredit}).then((function(t){var a,i,r=t.data,o="",l=[],n=[];if(r.length>0){for(var s=0;s<r.length;s++)o!==r[s].town?(l.length>0&&e.objectData.push({plate:o,productionInfo:l,certified:a,declared:i}),o=r[s].town,r[s].productCreditCode?(a=-1==r[s].area?0:r[s].area,i=0):(i=-1==r[s].area?0:r[s].area,a=0),n=[],l=[],n.push({productName:r[s].productName,productCertificateNum:r[s].productCreditCode,baseArea:-1==r[s].area?"/":parseFloat(r[s].area).toFixed(2),production:-1==r[s].amount?"/":parseFloat(r[s].amount).toFixed(2)}),l.push({productionUnit:r[s].companyName,productUnitInfo:n,baseAddress:r[s].location})):(r[s].productCreditCode?a+=parseFloat(-1==r[s].area?0:r[s].area):r[s].productCreditCode||(i+=parseFloat(-1==r[s].area?0:r[s].area)),r[s-1].companyName===r[s].companyName?n.push({productName:r[s].productName,productCertificateNum:r[s].productCreditCode,baseArea:-1==r[s].area?0:parseFloat(r[s].area).toFixed(2),production:-1==r[s].amount?"/":parseFloat(r[s].amount).toFixed(2)}):r[s-1].companyName!==r[s].companyName&&(n=[],n.push({productName:r[s].productName,productCertificateNum:r[s].productCreditCode,baseArea:-1==r[s].area?0:parseFloat(r[s].area).toFixed(2),production:-1==r[s].amount?"/":parseFloat(r[s].amount).toFixed(2)}),l.push({productionUnit:r[s].companyName,productUnitInfo:n,baseAddress:r[s].location})));l.length>0&&e.objectData.push({plate:o,productionInfo:l,certified:a,declared:i}),e.arrangeData()}else e.tableData=[];setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},showAddDialog:function(){this.dynamicValidateForm.rowDatas=[],this.addFormRow(),this.show_addDialog=!0},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},addFormRow:function(){this.dynamicValidateForm.rowDatas.push({town:null,companyId:null,productName:"",productCreditCode:"",area:null,amount:null,location:"",registerTime:new Date})},showDialog:function(e,t){this.showWebMaster=2===t,this.selectedSupervisupervisorType=t,this.dynamicValidateForm.rowDatas=e,this.openDialog=!0,this.header=this.supervisorType[t-1]},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.rowDatas[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.rowDatas.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),t.deletedRows=[],e()})).catch((function(e){}))},updateSelectedRows:function(){var e=this;this.confirm_dialogVisible=!1,this.show_addDialog=!1;var t=new Date,a=new Date;if(this.dynamicValidateForm.rowDatas.length)for(var i=0;i<this.dynamicValidateForm.rowDatas.length;i++){this.listLoading=!0;var r=new FormData;r.append("amount",null==this.dynamicValidateForm.rowDatas[i].amount?-1:this.dynamicValidateForm.rowDatas[i].amount),r.append("area",null==this.dynamicValidateForm.rowDatas[i].area?-1:this.dynamicValidateForm.rowDatas[i].area),r.append("id",0),r.append("companyId",this.dynamicValidateForm.rowDatas[i].companyId),r.append("companyName",this.filterCompnay(this.dynamicValidateForm.rowDatas[i].companyId)),r.append("createTime",a),r.append("createUserId",j().user().id),r.append("location",this.dynamicValidateForm.rowDatas[i].location),r.append("productCreditCode",this.dynamicValidateForm.rowDatas[i].productCreditCode),r.append("productName",this.dynamicValidateForm.rowDatas[i].productName),r.append("registerTime",this.registerTime),r.append("town",this.filterTownship(this.dynamicValidateForm.rowDatas[i].town)),r.append("updateTime",t),r.append("updateUserId",j().user().id),$().post("/api/green/green_food/create",r).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.getData()}))}},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.companyId===e}));return t?t.companyName:""},filterTownship:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.name:""}}},zp=Pp,Ap=(a("221d"),Object(u["a"])(zp,Np,$p,!1,null,null,null)),Rp=Ap.exports,Bp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box padding-top-10"},[a("el-dialog",{attrs:{visible:e.show_addDialog,width:"85%","before-close":e.handleClose,title:"添加有机农产品"},on:{"update:visible":function(t){e.show_addDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},[e._l(e.dynamicValidateForm.rowDatas,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:3}},[a("el-form-item",{attrs:{label:"所在镇(区)：",prop:"rowDatas."+i+".town",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{staticClass:"w-100",model:{value:t.town,callback:function(a){e.$set(t,"town",a)},expression:"rowData.town"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:4}},[a("el-form-item",{attrs:{label:"申报单位名称:",prop:"rowDatas."+i+".companyId",rules:{required:!0,message:"请选择",trigger:"blur"}}},[a("el-select",{staticClass:"w-100",model:{value:t.companyId,callback:function(a){e.$set(t,"companyId",a)},expression:"rowData.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:3}},[a("el-form-item",{attrs:{label:"编号:",prop:"rowDatas."+i+".productCreditCode",rules:{required:!0,message:"请选择",trigger:"blur"}}},[a("el-input",{model:{value:t.productCreditCode,callback:function(a){e.$set(t,"productCreditCode",a)},expression:"rowData.productCreditCode"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:2}},[a("el-form-item",{attrs:{label:"产品种类:",prop:"rowDatas."+i+".productType"}},[a("el-input",{model:{value:t.productType,callback:function(a){e.$set(t,"productType",a)},expression:"rowData.productType"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:2}},[a("el-form-item",{attrs:{label:"产品名称:",prop:"rowDatas."+i+".productName"}},[a("el-input",{model:{value:t.productName,callback:function(a){e.$set(t,"productName",a)},expression:"rowData.productName"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:2}},[a("el-form-item",{attrs:{label:"面积(亩):",prop:"rowDatas."+i+".area",rules:[{type:"number",message:"插入号码",trigger:"blur"}]}},[a("el-input-number",{staticClass:"w-90",attrs:{controls:!1},model:{value:t.area,callback:function(a){e.$set(t,"area",a)},expression:"rowData.area"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"产量(吨):",prop:"rowDatas."+i+".amount",rules:[{type:"number",message:"插入号码",trigger:"blur"}]}},[a("el-input-number",{staticClass:"w-90",attrs:{controls:!1},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"rowData.amount"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"详细地址:",prop:"rowDatas."+i+".location"}},[a("el-input",{model:{value:t.location,callback:function(a){e.$set(t,"location",a)},expression:"rowData.location"}})],1)],1)],1)})),a("el-row",[a("el-col",{attrs:{span:15}})],1),a("el-row",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")])],1),a("el-col",{staticClass:"margin-top-10 text-right",attrs:{span:16}},[e._v("插入时间：")]),a("el-col",{attrs:{span:3}},[a("el-date-picker",{staticClass:"w-80",attrs:{align:"right",type:"date"},model:{value:e.registerTime,callback:function(t){e.registerTime=t},expression:"registerTime"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{staticClass:"margin-right-40",staticStyle:{float:"right"},attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],1)],2)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-header",{staticClass:"margin-bottom-10"},[e._v("有机农产品清单")]),a("el-row",{staticClass:"margin-bottom-20"},[a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{plain:"",type:"success",size:"small"},on:{click:function(t){return e.showAddDialog()}}},[e._v("添加")])],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label margin-left-20 margin-right-5"},[e._v("\n          开始日期 :\n        ")]),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"插入时间 "},model:{value:e.registerTimeFrom,callback:function(t){e.registerTimeFrom=t},expression:"registerTimeFrom"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label margin-left-20 margin-right-5"},[e._v("\n          结束日期 :\n        ")]),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"插入时间 "},model:{value:e.registerTimeTo,callback:function(t){e.registerTimeTo=t},expression:"registerTimeTo"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label margin-left-20 margin-right-5"},[e._v("\n          所在镇(区) :\n        ")]),a("el-input",{staticClass:"w-50",attrs:{align:"right"},model:{value:e.searchTown,callback:function(t){e.searchTown=t},expression:"searchTown"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label no-margin-left margin-right-5"},[e._v("\n          申报单位名称 :\n        ")]),a("el-input",{staticClass:"w-50",attrs:{align:"right"},model:{value:e.searchCompanyName,callback:function(t){e.searchCompanyName=t},expression:"searchCompanyName"}})],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"select_label margin-left-20 margin-right-5"},[e._v("\n          已获证书 :\n        ")]),a("el-select",{staticClass:"w-50",attrs:{align:"right",type:"date"},model:{value:e.isCredit,callback:function(t){e.isCredit=t},expression:"isCredit"}},e._l(e.option,(function(e){return a("el-option",{key:e.val,attrs:{label:e.label,value:e.val}})})),1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"margin-left-10",attrs:{plain:"",type:"primary",size:"small"},on:{click:function(t){return e.getData()}}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-class-name":e.rowIndex,"span-method":e.objectSpanMethod,fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"townDistrict.value",label:"所在镇(区)"}}),a("el-table-column",{attrs:{prop:"declarationUnitName.value",label:"申报单位名称"}}),a("el-table-column",{attrs:{prop:"numbering.value",label:"编号"}}),a("el-table-column",{attrs:{prop:"kind.value",width:"150"}}),a("el-table-column",{attrs:{prop:"productName.value",label:"产品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"area.value",label:"面积(亩)"}}),a("el-table-column",{attrs:{prop:"production.value",label:"产量(吨)"}}),a("el-table-column",{attrs:{prop:"address.value",label:"详细地址"}})],1)],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getData}})],1)],1)},Op=[],jp={name:"organicProduce",components:{Pagination:_e},props:{year:{required:!0,type:Number}},data:function(){return{option:[{val:0,label:"全部"},{val:1,label:"是"},{val:2,label:"否"}],isCredit:0,searchTown:"",searchCompanyName:"",registerTimeTo:new Date,registerTimeFrom:new Date((new Date).getFullYear(),0,1),show_addDialog:!1,confirm_dialogVisible:!1,selectedTown:null,selectedRows:[],township:[],companyProduction:[],dynamicValidateForm:{rowDatas:[{town:null,companyId:null,productName:"",productType:"",productCreditCode:"",area:null,amount:null,location:""}]},registerTime:new Date,page:{pageIndex:1,pageSize:20},checked:[],total:0,tableData:[],objData:[],listLoading:!1}},created:function(){this.getCompanyProduction(),this.getData()},methods:{arrangData:function(){var e=this,t=this.objData;this.total=t.length;var a=0;t.forEach((function(t){var i=0;t.declarationUnit.forEach((function(r){var o=0;r.declaration.forEach((function(i){var l=0;i.product.forEach((function(o){e.tableData.push({townDistrict:{value:t.townDistrict,spaning:0},declarationUnitName:{value:r.declarationUnitName,spaning:0},kind:{value:i.kind,spaning:0},numbering:{value:i.numbering,spaning:0},productName:{value:o.productName,spaning:0},production:{value:o.production,spaning:0},address:{value:i.address,spaning:0},area:{value:r.area,spaning:0}}),l++,a++})),e.tableData[a-l].numbering.spaning=l,e.tableData[a-l].address.spaning=l,""!==e.tableData[a-l].kind.value&&(e.tableData[a-l].kind.spaning=l),o+=l})),e.tableData[a-o].declarationUnitName.spaning=o,e.tableData[a-o].area.spaning=o,i+=o})),e.tableData[a-i].townDistrict.spaning=i})),this.tableData.push({townDistrict:{value:"合计",spaning:0},declarationUnitName:{value:"",spaning:0},numbering:{value:"",spaning:0},productName:{value:"",spaning:0},production:{value:this.productionQuality(),spaning:0},address:{value:"预计下半年通过15000亩认证面积",spaning:0},area:{value:this.areaQualtiy(),spaning:0}})},areaQualtiy:function(){var e=0;return this.objData.forEach((function(t){t.declarationUnit.forEach((function(t){e+=parseFloat("/"==t.area?0:t.area)}))})),parseFloat(e).toFixed(2)},productionQuality:function(){var e=0;return this.objData.forEach((function(t){t.declarationUnit.forEach((function(t){t.declaration.forEach((function(t){t.product.forEach((function(t){e+=parseFloat("/"==t.production?0:t.production)}))}))}))})),parseFloat(e).toFixed(2)},objectSpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex),i=e.columnIndex;if(a<this.tableData.length-1){if(1==i)return t.townDistrict.spaning>0?{rowspan:t.townDistrict.spaning,colspan:1}:{rowspan:0,colspan:0};if(2==i)return t.declarationUnitName.spaning>0?{rowspan:t.declarationUnitName.spaning,colspan:1}:{rowspan:0,colspan:0};if(3==i)return t.numbering.spaning>0?{rowspan:t.numbering.spaning,colspan:1}:{rowspan:0,colspan:0};if(4==i)return t.kind.spaning>0?{rowspan:t.kind.spaning,colspan:1}:0==t.kind.spaning&&""===t.kind.value?{rowspan:0,colspan:2}:{rowspan:0,colspan:0};if(6==i)return t.area.spaning>0?{rowspan:t.area.spaning,colspan:1}:{rowspan:0,colspan:0};if(8==i)return t.address.spaning>0?{rowspan:t.address.spaning,colspan:1}:{rowspan:0,colspan:0}}else{if(1==i)return{rowspan:1,colspan:2};if(2==i)return{rowspan:1,colspan:3};if(0==i||3==i||5==i)return{rowspan:0,colspan:0}}},getData:function(){var e=this;this.listLoading=!0,this.objData=[],this.tableData=[],$().get("/api/green/organic_product/all",{registerTimeTo:this.registerTimeTo.setDate(this.registerTimeTo.getDate()+1),registerTimeFrom:this.registerTimeFrom,companyName:this.searchCompanyName,town:this.searchTown,isCredit:this.isCredit}).then((function(t){var a=t.data,i="",r=[],o=[],l=[];if(a.length>0){for(var n=0;n<a.length;n++)i!==a[n].town?(r.length>0&&e.objData.push({townDistrict:i,declarationUnit:r}),i=a[n].town,l=[],o=[],r=[],l.push({productName:a[n].productName,production:-1==a[n].amount?"/":parseFloat(a[n].amount).toFixed(2)}),o.push({numbering:a[n].productCreditCode,kind:a[n].productType,product:l,address:a[n].location}),r.push({declarationUnitName:a[n].companyName,declaration:o,area:-1==a[n].area?"/":parseFloat(a[n].area).toFixed(2)})):a[n-1].companyName===a[n].companyName?a[n-1].productCreditCode===a[n].productCreditCode?l.push({productName:a[n].productName,production:-1==a[n].amount?"/":parseFloat(a[n].amount).toFixed(2)}):(l=[],l.push({productName:a[n].productName,production:-1==a[n].amount?"/":parseFloat(a[n].amount).toFixed(2)}),o.push({numbering:a[n].productCreditCode,kind:a[n].productType,product:l,address:a[n].location})):(l=[],l.push({productName:a[n].productName,production:-1==a[n].amount?"/":parseFloat(a[n].amount).toFixed(2)}),o=[],o.push({numbering:a[n].productCreditCode,kind:a[n].productType,product:l,address:a[n].location}),r.push({declarationUnitName:a[n].companyName,declaration:o,area:-1==a[n].area?"/":parseFloat(a[n].area).toFixed(2)}));r.length>0&&e.objData.push({townDistrict:i,declarationUnit:r}),e.arrangData()}else e.tableData=[];setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},showAddDialog:function(){this.dynamicValidateForm.rowDatas=[],this.addFormRow(),this.show_addDialog=!0},getTown:function(){var e=this;$().get("/api/town/all").then((function(t){e.township=e.township.concat(t)})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},addFormRow:function(){this.dynamicValidateForm.rowDatas.push({town:"",companyId:null,productType:"",productName:"",productCreditCode:"",area:null,amount:null,location:"",registerTime:new Date})},showDialog:function(e,t){this.showWebMaster=2===t,this.selectedSupervisupervisorType=t,this.dynamicValidateForm.rowDatas=e,this.openDialog=!0,this.header=this.supervisorType[t-1]},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.rowDatas[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.rowDatas.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),t.deletedRows=[],e()})).catch((function(e){}))},updateSelectedRows:function(){var e=this;this.confirm_dialogVisible=!1,this.show_addDialog=!1;var t=new Date,a=new Date;if(this.dynamicValidateForm.rowDatas.length)for(var i=0;i<this.dynamicValidateForm.rowDatas.length;i++){this.listLoading=!0;var r=new FormData;r.append("amount",null==this.dynamicValidateForm.rowDatas[i].amount||"undefined"==this.dynamicValidateForm.rowDatas[i].amount?-1:this.dynamicValidateForm.rowDatas[i].amount),r.append("area",null==this.dynamicValidateForm.rowDatas[i].area||"undefined"==this.dynamicValidateForm.rowDatas[i].area?-1:this.dynamicValidateForm.rowDatas[i].area),r.append("id",0),r.append("productType",""==this.dynamicValidateForm.rowDatas[i].productType?" ":this.dynamicValidateForm.rowDatas[i].productType),r.append("companyName",this.filterCompnay(this.dynamicValidateForm.rowDatas[i].companyId)),r.append("createTime",a),r.append("createUserId",j().user().id),r.append("location",this.dynamicValidateForm.rowDatas[i].location),r.append("productCreditCode",this.dynamicValidateForm.rowDatas[i].productCreditCode),r.append("productName",this.dynamicValidateForm.rowDatas[i].productName),r.append("registerTime",this.registerTime),r.append("town",this.dynamicValidateForm.rowDatas[i].town),r.append("updateTime",t),r.append("updateUserId",j().user().id),$().post("/api/green/organic_product/create",r).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.getData()}))}},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.companyId===e}));return t?t.companyName:""},filterTownship:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.name:""}}},Ep=jp,Up=(a("bf83"),Object(u["a"])(Ep,Bp,Op,!1,null,null,null)),qp=Up.exports,Mp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-dialog",{attrs:{visible:e.openDialog,width:"90%","before-close":e.handleClose},on:{"update:visible":function(t){e.openDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},[a("el-form-item",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[e._l(e.dynamicValidateForm.data,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"创建单位：",prop:"data."+i+".companyName",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.companyName,callback:function(a){e.$set(t,"companyName",a)},expression:"rowData.companyName"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"产品类型:",prop:"data."+i+".productType"}},[a("el-input",{model:{value:t.productType,callback:function(a){e.$set(t,"productType",a)},expression:"rowData.productType"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"基地面积:",prop:"data."+i+".area",rules:[{type:"number",message:"插入号码",trigger:"blur"}]}},[a("el-input",{model:{value:t.area,callback:function(a){e.$set(t,"area",e._n(a))},expression:"rowData.area"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"基地地址(到村)：",prop:"data."+i+".location"}},[a("el-input",{model:{value:t.location,callback:function(a){e.$set(t,"location",a)},expression:"rowData.location"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"与部基地,产品基地重合：",prop:"data."+i+".isCoincidence"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.isCoincidence,callback:function(a){e.$set(t,"isCoincidence",a)},expression:"rowData.isCoincidence"}},e._l([{value:0,label:"否"},{value:1,label:"是"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:3}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"重合企业/部基地：",prop:"data."+i+".coincidenceBase"}},[a("el-input",{attrs:{disabled:0==t.isCoincidence},model:{value:t.coincidenceBase,callback:function(a){e.$set(t,"coincidenceBase",a)},expression:"rowData.coincidenceBase"}})],1)],1),a("el-col",{staticClass:"margin-left-10",attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"重合面积：",prop:"data."+i+".coincidneceArea",rules:[{type:"number",message:"插入号码"}]}},[a("el-input",{attrs:{disabled:0==t.isCoincidence},model:{value:t.coincidneceArea,callback:function(a){e.$set(t,"coincidneceArea",e._n(a))},expression:"rowData.coincidneceArea"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"备注：",prop:"data."+i+".other"}},[a("el-input",{model:{value:t.other,callback:function(a){e.$set(t,"other",a)},expression:"rowData.other"}})],1)],1)],1)})),a("el-row",{staticClass:"margin-left-40 margin-top-20"},[a("el-col",{attrs:{span:17}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")])],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:4}},[a("span",[e._v("插入时间: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTime,callback:function(t){e.registerTime=t},expression:"registerTime"}})],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],1)],2)],1)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-header",[e._v("建设中待验收种植业绿色优质基地")]),a("div",{staticClass:"iptBox"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showAddDialog()}}},[e._v("添加")])],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("开始日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeFrom,callback:function(t){e.registerTimeFrom=t},expression:"registerTimeFrom"}})],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("结束日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeTo,callback:function(t){e.registerTimeTo=t},expression:"registerTimeTo"}})],1),a("el-col",{attrs:{span:9}},[a("span",[e._v("创建单位: ")]),a("el-input",{staticClass:"w-80",model:{value:e.companyName,callback:function(t){e.companyName=t},expression:"companyName"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.changeFilter()}}},[e._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"span-method":e.objectSpanMethod,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"companyName",label:"创建单位"}}),a("el-table-column",{attrs:{prop:"productType",label:"产品类型"}}),a("el-table-column",{attrs:{prop:"area",label:"基地面积"}}),a("el-table-column",{attrs:{prop:"location",label:"基地地址(到村)"}}),a("el-table-column",{attrs:{label:"与部基地,产品基地重合"}},[a("el-table-column",{attrs:{prop:"isCoincidence",label:"(是/否)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s("0"==a.isCoincidence?"否":"1"==a.isCoincidence?"是":a.isCoincidence))]}}])})],1),a("el-table-column",{attrs:{label:"应扣除的重合部分",align:"center"}},e._l(e.columns,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label}})})),1),a("el-table-column",{attrs:{prop:"other",label:"备注",align:"center"}})],1)],1)],1)},Yp=[],Gp={name:"plantingGreenBase",props:{year:{required:!0,type:Number}},data:function(){return{openDialog:!1,dynamicValidateForm:{data:[]},selectedRows:[],confirm_dialogVisible:!1,checked:[],registerTime:(new Date).toString("YYYY-MM-DD"),registerTimeFrom:new Date((new Date).getFullYear(),0,1),registerTimeTo:new Date,companyName:"",sendcount:0,columns:[{prop:"coincidenceBase",label:"重合企业/部基地"},{prop:"coincidneceArea",label:"重合面积"}],alert_dialogVisible:!1,total:0,tableData:[],listLoading:!0}},created:function(){this.getData()},methods:{showAddDialog:function(){this.dynamicValidateForm.data=[],this.selectedRows=[],this.checked=[],this.openDialog=!0,this.addFormRow()},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),e()})).catch((function(e){}))},addFormRow:function(){this.dynamicValidateForm.data.push({companyName:"",productType:"",area:0,location:"",isCoincidence:0,coincidenceBase:"",coincidneceArea:0,other:""})},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.data[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.data.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},updateSelectedRows:function(){var e=this;this.confirm_dialogVisible=!1,this.openDialog=!1;var t=new Date,a=new Date;this.listLoading=!0,this.sendcount=0,this.dynamicValidateForm.data.forEach((function(i){var r=new FormData;r.append("area",null==i.area||void 0==i.area?-1:i.area),r.append("coincidenceBase",0==i.isCoincidence?"":i.coincidenceBase),r.append("coincidneceArea",0==i.isCoincidence?-1:null==i.coincidneceArea||void 0==i.coincidneceArea?-1:i.coincidneceArea),r.append("companyName",i.companyName),r.append("createTime",a.toDateString("YYYY-MM-DD")),r.append("createUserId",j().user().id),r.append("id",0),r.append("isCoincidence",i.isCoincidence),r.append("location",i.location),r.append("other",i.other),r.append("productType",i.productType),r.append("registerTime",e.registerTime.toString("YYYY-MM-DD")),r.append("updateTime",t.toDateString("YYYY-MM-DD")),r.append("updateUserId",j().user().id),$().post("/api/green/green_quality_base/create",r).then((function(t){e.sendcount++,e.sendcount===e.dynamicValidateForm.data.length&&(e.listLoading=!1,e.getData())}))}))},changeFilter:function(){this.getData()},getData:function(){var e=this;this.listLoading=!0,$().get("/api/green/green_quality_base/all",{companyName:this.companyName,registerTimeFrom:""==this.registerTimeFrom||null==this.registerTimeFrom?"":this.registerTimeFrom,registerTimeTo:""==this.registerTimeTo||null==this.registerTimeTo?"":this.registerTimeTo.setDate(this.registerTimeTo.getDate()+1),sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=e.tableData.length,e.calculateTotal(),e.Total(),e.listLoading=!1}))},calculateTotal:function(){this.tableData.forEach((function(e){e.area=-1==e.area?"/":parseFloat(e.area).toFixed(2),e.coincidneceArea=-1==e.coincidneceArea?"/":parseFloat(e.coincidneceArea).toFixed(2)})),this.tableData.push({companyName:"合计",productType:"",area:this.baseQuality(),location:"",isCoincidence:"",coincidenceBase:"",coincidneceArea:this.coincidentQuality(),other:""})},baseQuality:function(){var e=0;return this.tableData.forEach((function(t){"/"!==t.area&&(e+=parseFloat(t.area))})),parseFloat(e).toFixed(2)},coincidentQuality:function(){var e=0;return this.tableData.forEach((function(t){"/"!==t.coincidneceArea&&(e+=parseFloat(t.coincidneceArea))})),parseFloat(e).toFixed(2)},Total:function(){this.tableData.push({companyName:"纳入统计范围的基地面积（扣除重合后）：",productType:"",area:0,location:"",isCoincidence:this.totalQuality(),coincidenceBase:"",coincidneceArea:0,other:""})},totalQuality:function(){var e=this,t=0,a=0;return this.tableData.forEach((function(i){if(a===e.tableData.length-1)return parseFloat(t).toFixed(2);"/"!==i.area&&"/"!==i.coincidneceArea&&(t+=parseFloat(i.area)-parseFloat(i.coincidneceArea)),a++})),parseFloat(t).toFixed(2)},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(t==this.tableData.length-2){if(0==a)return{rowspan:0,colspan:0};if(1==a)return{rowspan:1,colspan:2}}else if(t==this.tableData.length-1){if(1==a)return{rowspan:1,colspan:5};if(5==a)return{rowspan:1,colspan:4};if(0==a||2==a||3==a||4==a||6==a||7==a||8==a)return{rowspan:0,colspan:0}}},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return e.rowIndex+1}}},Wp=Gp,Qp=(a("dfd2"),Object(u["a"])(Wp,Mp,Yp,!1,null,null,null)),Jp=Qp.exports,Hp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-dialog",{attrs:{visible:e.openDialog,width:"90%","before-close":e.handleClose},on:{"update:visible":function(t){e.openDialog=t}}},[a("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},[a("el-form-item",{staticClass:"left-margin flex-box w-100 no-margin-IE"},[e._l(e.dynamicValidateForm.data,(function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:1}},[a("el-form-item",{staticClass:"margin-left-20"},[a("el-checkbox",{staticClass:"form-checkbox",attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i)}},model:{value:e.checked[i],callback:function(t){e.$set(e.checked,i,t)},expression:"checked[index]"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"板块：",prop:"data."+i+".town",rules:{required:!0,message:"请插入",trigger:"blur"}}},[a("el-input",{model:{value:t.town,callback:function(a){e.$set(t,"town",a)},expression:"rowData.town"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"绿色食品面积:",prop:"data."+i+".productName"}},[a("el-input",{model:{value:t.productName,callback:function(a){e.$set(t,"productName",a)},expression:"rowData.productName"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"有机面积:",prop:"data."+i+".organicArea"}},[a("el-input",{model:{value:t.organicArea,callback:function(a){e.$set(t,"organicArea",e._n(a))},expression:"rowData.organicArea"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"绿色优质基地面积:",prop:"data."+i+".highQualityArea"}},[a("el-input",{model:{value:t.highQualityArea,callback:function(a){e.$set(t,"highQualityArea",e._n(a))},expression:"rowData.highQualityArea"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"重复面积:",prop:"data."+i+".repeatArea"}},[a("el-input",{model:{value:t.repeatArea,callback:function(a){e.$set(t,"repeatArea",e._n(a))},expression:"rowData.repeatArea"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"合计:",prop:"data."+i+".sum"}},[a("el-input",{model:{value:t.sum,callback:function(a){e.$set(t,"sum",e._n(a))},expression:"rowData.sum"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"耕地面积:",prop:"data."+i+".cultivatedArea"}},[a("el-input",{model:{value:t.cultivatedArea,callback:function(a){e.$set(t,"cultivatedArea",e._n(a))},expression:"rowData.cultivatedArea"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"绿色,有机:",prop:"data."+i+".greenOrganic"}},[a("el-input",{model:{value:t.greenOrganic,callback:function(a){e.$set(t,"greenOrganic",e._n(a))},expression:"rowData.greenOrganic"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"地标:",prop:"data."+i+".target"}},[a("el-input",{model:{value:t.target,callback:function(a){e.$set(t,"target",a)},expression:"rowData.target"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-form-item",{staticClass:"margin-left-10",attrs:{label:"预计面积:",prop:"data."+i+".predictArea"}},[a("el-input",{model:{value:t.predictArea,callback:function(a){e.$set(t,"predictArea",e._n(a))},expression:"rowData.predictArea"}})],1)],1)],1)})),a("el-row",{staticClass:"margin-left-40 margin-top-20"},[a("el-col",{attrs:{span:17}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.addFormRow()}}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("删除")])],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:4}},[a("span",[e._v("插入时间: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTime,callback:function(t){e.registerTime=t},expression:"registerTime"}})],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.data.length>0,expression:"dynamicValidateForm.data.length > 0"}],attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("dynamicValidateForm")}}},[e._v("保存")])],1)],1)],2)],1)],1),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-header",[e._v("种植业绿色优质农产品统计汇总")]),a("div",{staticClass:"iptBox"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.showAddDialog()}}},[e._v("添加")])],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("开始日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeFrom,callback:function(t){e.registerTimeFrom=t},expression:"registerTimeFrom"}})],1),a("el-col",{attrs:{span:6}},[a("span",[e._v("结束日期: ")]),a("el-date-picker",{attrs:{type:"date"},model:{value:e.registerTimeTo,callback:function(t){e.registerTimeTo=t},expression:"registerTimeTo"}})],1),a("el-col",{attrs:{span:9}},[a("span",[e._v("创建单位: ")]),a("el-input",{staticClass:"w-80",model:{value:e.town,callback:function(t){e.town=t},expression:"town"}})],1),a("el-col",{attrs:{span:1}},[a("el-button",{staticClass:"margin-left-10",attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.changeFilter()}}},[e._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":"",border:"","span-method":e.objectSpanMethod}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"town",label:"板块"}}),a("el-table-column",{attrs:{prop:"productName",label:"绿色食品面积"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.productName=-1==a.productName?"/":a.productName)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"organicArea",label:"有机面积"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.organicArea=-1==a.organicArea?"/":a.organicArea)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"highQualityArea",label:"绿色优质基地面积"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.highQualityArea=-1==a.highQualityArea?"/":a.highQualityArea)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"repeatArea",label:"重复面积"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.repeatArea=-1==a.repeatArea?"/":a.repeatArea)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"sum",label:"合计"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.sum=-1==a.sum?"/":a.sum)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"cultivatedArea",label:"耕地面积"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.cultivatedArea=-1==a.cultivatedArea?"/":a.cultivatedArea)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"proportion",label:"占比"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.proportion=-1==a.proportion?"/":a.proportion)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"greenOrganic",label:"绿色,有机"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.greenOrganic=-1==a.greenOrganic?"/":a.greenOrganic)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"target",label:"地标"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.target=-1==a.target?"/":a.target)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"predictArea",label:"预计面积"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.predictArea=-1==a.predictArea?"/":a.predictArea)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"expectedRatio",label:"预计占比"}})],1)],1)],1)},Xp=[],Kp={name:"plantingTownshipStatistics",props:{year:{required:!0,type:Number}},data:function(){return{openDialog:!1,dynamicValidateForm:{data:[]},selectedRows:[],confirm_dialogVisible:!1,checked:[],registerTime:(new Date).toString("YYYY-MM-DD"),registerTimeFrom:new Date((new Date).getFullYear(),0,1),registerTimeTo:new Date,town:"",sendcount:0,alert_dialogVisible:!1,tableData:[],listLoading:!0}},created:function(){this.getData()},methods:{showAddDialog:function(){this.dynamicValidateForm.data=[],this.selectedRows=[],this.checked=[],this.addFormRow(),this.openDialog=!0},handleClose:function(e){var t=this;this.$confirm("您确定要关闭此对话框吗？").then((function(a){t.getData(),e()})).catch((function(e){}))},addFormRow:function(){this.dynamicValidateForm.data.push({town:"",productName:"",organicArea:0,highQualityArea:0,repeatArea:0,sum:0,cultivatedArea:0,greenOrganic:0,target:"",predictArea:0})},deleteSelectedRows:function(){if(this.selectedRows.length){for(var e in this.selectedRows=this.selectedRows.sort((function(e,t){return e>t?-1:1})),this.selectedRows){var t=this.dynamicValidateForm.data[this.selectedRows[e]].id;t&&this.deletedRows.push(t),this.checked[this.selectedRows[e]]=!1,this.dynamicValidateForm.data.splice(this.selectedRows[e],1)}this.selectedRows=[]}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.confirm_dialogVisible=!0)}))},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},updateSelectedRows:function(){var e=this;this.confirm_dialogVisible=!1,this.openDialog=!1;var t=new Date,a=new Date;this.listLoading=!0,this.sendcount=0,this.dynamicValidateForm.data.forEach((function(i){var r=new FormData;r.append("createTime",a.toDateString("YYYY-MM-DD")),r.append("createUserId",j().user().id),r.append("cultivatedArea",""==i.cultivatedArea||void 0==i.cultivatedArea?-1:i.cultivatedArea),r.append("greenOrganic",""==i.greenOrganic||void 0==i.greenOrganic?-1:i.greenOrganic),r.append("highQualityArea",""==i.highQualityArea||void 0==i.highQualityArea?-1:i.highQualityArea),r.append("id",0),r.append("organicArea",""==i.organicArea||void 0==i.organicArea?-1:i.organicArea),r.append("predictArea",""==i.predictArea||void 0==i.predictArea?-1:i.predictArea),r.append("productName",i.productName),r.append("registerTime",e.registerTime.toString("YYYY-MM-DD")),r.append("repeatArea",""==i.repeatArea||void 0==i.repeatArea?-1:i.repeatArea),r.append("sum",""==i.sum||void 0==i.sum?-1:i.sum),r.append("target",i.target),r.append("town",i.town),r.append("updateTime",t.toDateString("YYYY-MM-DD")),r.append("updateUserId",j().user().id),$().post("/api/green/plants_statistics/create",r).then((function(t){e.sendcount++,e.sendcount===e.dynamicValidateForm.data.length&&(e.listLoading=!1,e.getData())}))}))},changeFilter:function(){this.getData()},getData:function(){var e=this;this.listLoading=!0,$().get("/api/green/plants_statistics/all",{town:this.town,registerTimeFrom:""==this.registerTimeFrom||null==this.registerTimeFrom?"":this.registerTimeFrom,registerTimeTo:""==this.registerTimeTo||null==this.registerTimeTo?"":this.registerTimeTo.setDate(this.registerTimeTo.getDate()+1),sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=e.tableData.length,e.getTotal(),e.tableData.forEach((function(e){-1!==e.organicArea?e.organicArea=parseFloat(e.organicArea).toFixed(2):e.organicArea="/",-1!==e.highQualityArea?e.highQualityArea=parseFloat(e.highQualityArea).toFixed(2):e.highQualityArea="/",-1!==e.repeatArea?e.repeatArea=parseFloat(e.repeatArea).toFixed(2):e.repeatArea="/",-1!==e.sum?e.sum=parseFloat(e.sum).toFixed(2):e.sum="/",-1!==e.cultivatedArea?e.cultivatedArea=parseFloat(e.cultivatedArea).toFixed(2):e.cultivatedArea="/",-1!==e.greenOrganic?e.greenOrganic=parseFloat(e.greenOrganic).toFixed(2):e.greenOrganic="/",-1!==e.predictArea?e.predictArea=parseFloat(e.predictArea).toFixed(2):e.predictArea="/",-1!==e.expectedRatio?e.expectedRatio=parseFloat(e.expectedRatio).toFixed(2):e.expectedRatio="/",-1!==e.proportion?e.proportion=parseFloat(e.proportion).toFixed(2):e.proportion="/"})),e.listLoading=!1}))},getTotal:function(){this.tableData.forEach((function(e){-1!==e.sum&&-1!==e.cultivatedArea?e.proportion=100*e.sum/e.cultivatedArea:e.proportion=-1,-1!==e.predictArea&&-1!==e.cultivatedArea?e.expectedRatio=100*e.predictArea/e.cultivatedArea:e.expectedRatio=-1})),this.tableData.push({town:"合计",productName:"",organicArea:this.organicAreaQuality(),highQualityArea:this.greenHighQuality(),repeatArea:this.repeatAreaQuality(),sum:this.totalQuality(),cultivatedArea:this.cultivateQuality(),proportion:0,greenOrganic:this.greenOrganicQuality(),target:this.landmarkQuality(),predictArea:this.estimateQuality(),expectedRatio:0}),this.tableData[this.tableData.length-1].proportion=this.tableData[this.tableData.length-1].sum/this.tableData[this.tableData.length-1].cultivatedArea,this.tableData[this.tableData.length-1].expectedRatio=this.tableData[this.tableData.length-1].predictArea/this.tableData[this.tableData.length-1].cultivatedArea},greenFoodQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.productName?0:t.productName})),e},organicAreaQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.organicArea?0:t.organicArea})),e},greenHighQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.highQualityArea?0:t.highQualityArea})),e},repeatAreaQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.repeatArea?0:t.repeatArea})),e},totalQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.sum?0:t.sum})),e},cultivateQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.cultivatedArea?0:t.cultivatedArea})),e},proportionQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.proportion?0:t.proportion})),e},greenOrganicQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.greenOrganic?0:t.greenOrganic})),e},landmarkQuality:function(){var e=0,t=0;return this.tableData.forEach((function(a){if(-1!=a.target)if(a.target.includes("%")){var i=a.target.split("%");e+=Number(i[0]),t+=Number(i[1].substring(1,i[1].length-1))}else isNaN(a.target)||(t+=Number(a.target))})),e>0?parseFloat(e).toFixed(2)+"%("+t+")":t},estimateQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.predictArea?0:t.predictArea})),e},objectSpanMethod:function(e){e.row,e.col;var t=e.rowIndex,a=e.columnIndex;if(t==this.tableData.length-1){if(0==a)return{rowspan:0,colspan:0};if(1==a)return{rowspan:1,colspan:2}}},expectedQuality:function(){var e=0;return this.tableData.forEach((function(t){e+=-1==t.expectedRatio?0:t.expectedRatio})),e},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return e.rowIndex+1}}},Zp=Kp,em=(a("fa39"),Object(u["a"])(Zp,Hp,Xp,!1,null,null,null)),tm=em.exports,am={name:"greenProducts",components:{animalHusbandryBase:Sp,greenAgriculturalProducts:Lp,greenFood:Rp,organicProduce:qp,plantingGreenBase:Jp,plantingTownshipStatistics:tm},data:function(){return{activeTabName:"greeFood",page:{pageIndex:1,pageSize:20},total:0,listLoading:!1,year:2019,options:[{value:2018},{value:2019},{value:2020},{value:2021},{value:2022},{value:2023}]}},created:function(){},methods:{getList:function(){this.listLoading=!1},getYear:function(){},handleClick:function(){},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},im=am,rm=(a("d53e"),Object(u["a"])(im,vp,yp,!1,null,null,null)),om=rm.exports,lm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("站内消息")])],1)],1),a("div",{staticClass:"box"},[a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"createTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{prop:"contents",label:"内容"}})],1)],1),a("div",{staticClass:"pageBox"},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},nm=[],sm={name:"jobDefinition",components:{Pagination:_e},data:function(){return{contents:"",receiveUserId:0,createTime:"",page:{pageIndex:1,pageSize:20},listLoading:!0,total:0,tableData:[]}},mounted:function(){this.getList(),null==j().user()?j().logout():this.receiveUserId=j().user().id},methods:{order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/internal_message/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,receiveUserId:this.receiveUserId,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))}}},cm=sm,um=Object(u["a"])(cm,lm,nm,!1,null,null,null),dm=um.exports,pm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("站内消息")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("Add Internal Message")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"addForm",staticClass:"form-width",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{prop:"receiveUserId",label:"接收人"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.receiveUserId,callback:function(t){e.$set(e.addForm,"receiveUserId",t)},expression:"addForm.receiveUserId"}},e._l(e.users,(function(e){return a("el-option",{key:e.id,attrs:{label:e.userId,value:e.id}})})),1)],1),a("el-form-item",{staticClass:"label-align",attrs:{prop:"contents",label:"内容"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea",rows:10},model:{value:e.addForm.contents,callback:function(t){e.$set(e.addForm,"contents",t)},expression:"addForm.contents"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("addForm")}}},[e._v("\n              保存\n          ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              取消\n          ")])],1)],1)],1)])},mm=[],fm={data:function(){return{addForm:{contents:"",receiveUserId:""},users:[],rules:{contents:[{required:!0,message:"请插入",trigger:"change"}],receiveUserId:[{required:!0,message:"请选择",trigger:"change"}]},dataloading:!0}},mounted:function(){this.getReceiveUserId()},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataloading=!0;var a=new Date,i=("0"+a.getDate()).slice(-2),r=("0"+(a.getMonth()+1)).slice(-2),o=a.getFullYear()+"-"+r+"-"+i;$().post("/api/internal_message/create",{receiveUserId:t.addForm.receiveUserId,contents:t.addForm.contents,receiveStatus:0,createTime:o,id:0}).then((function(e){t.$router.push({path:"/internalMessage"}),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){}))}}))},getReceiveUserId:function(){var e=this;this.dataloading=!0,$().get("/api/user/all",{sortBy:"id"}).then((function(t){e.users=e.users.concat(t.data),setTimeout((function(){e.dataloading=!1}),10)})).catch((function(e){}))}}},gm=fm,hm=Object(u["a"])(gm,pm,mm,!1,null,null,null),bm=hm.exports,vm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("培训经费管理")])],1)],1),a("div",{staticClass:"box"},[e.isShowAddButton?a("div",{staticClass:"iptBox"},[a("div",{staticClass:"iptBox w-100"},[a("div",{staticClass:"filter-item"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/trainingFunds/add")}}},[e._v("添加")])],1),a("div",{staticClass:"special-container inline-block-IE float-right-IE",staticStyle:{"margin-left":"auto"}},[0!=e.isShowCheckbox?a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.actionConfirm(1)}}},[e._v("添加到专项")]):e._e(),0!=e.isShowCheckbox?a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"el-icon-minus",plain:""},on:{click:function(t){return e.actionConfirm(0)}}},[e._v("从专项1移除")]):e._e(),a("el-checkbox",{staticClass:"margin-top-10",attrs:{"true-label":"1","false-label":"0"},on:{change:e.showCheckbox},model:{value:e.isShowCheckbox,callback:function(t){e.isShowCheckbox=t},expression:"isShowCheckbox"}},[e._v("专项1:绿色优质农产品生产基地")])],1)])]):e._e(),a("el-dialog",{attrs:{visible:e.alert_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.alert_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 请选择 !!!")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.alert_dialogVisible=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.confirm_dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.confirm_dialogVisible=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"},[e._v(" 继续？请再次检查")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.confirm_dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:e.btnColor,plain:""},on:{click:function(t){return e.updateSelectedRows()}}},[e._v("确认")])],1)]),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex,"highlight-current-row":""}},[0!=e.isShowCheckbox?a("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-checkbox",{staticStyle:{"margin-left":"auto"},attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.changeCheckStatus(i.id)}},model:{value:e.checked[i.id],callback:function(t){e.$set(e.checked,i.id,t)},expression:"checked[row.id]"}})]}}],null,!1,574067976)}):e._e(),a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"appliedAmount",label:"申请金额"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(Number(a.appliedAmount).toFixed(2))+"元")]}}])}),a("el-table-column",{attrs:{prop:"proposer",label:"申请人"}}),a("el-table-column",{attrs:{prop:"companyId",label:"所在单位"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterCompnay(a.companyId)))]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/trainingFunds/view/"+i.id})}}},[e._v("查看")])]}}])}),a("el-table-column",{attrs:{prop:"yield",label:"专项1",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.specialFlag?a("i",{staticClass:"el-icon-check"}):e._e()]}}])})],1)],1),a("div",{staticClass:"pageBox"},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},ym=[],wm={name:"jobDefinition",components:{Pagination:_e},data:function(){return{projectName:"",appliedAmount:0,proposer:"",createTime:"",companyId:0,status:"",page:{pageIndex:1,pageSize:20},listLoading:!1,total:0,tableData:[],companyProduction:[],appStatus:["全部","待审批","已同意","已拒绝"],isShowCheckbox:0,isShowAddButton:null,selectedRows:[],alert_dialogVisible:!1,confirm_dialogVisible:!1,btnColor:"",action:"",checked:[]}},mounted:function(){this.getCompanyProduction(),this.getList()},created:function(){this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addTrainingFunds"==e.privilegeCode}))},methods:{order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},getList:function(){var e=this;this.listLoading=!0,$().get("/api/training_funds/all",{createTimeFrom:"",createTimeTo:"",pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.companyId===e}));return t?t.companyName:""},changeCheckStatus:function(e){var t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),1==this.checked[e]&&this.selectedRows.push(e)},actionConfirm:function(e){this.action=e,this.updateSelectedRows()},updateSelectedRows:function(){var e=this;for(var t in this.selectedRows)this.confirm_dialogVisible=!1,this.listLoading=!0,$().put("/api/training_funds/update_special_flag/"+this.selectedRows[t]+"/"+this.action).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.selectedRows=[],e.checked=[],e.isShowCheckbox=0,e.getList()})).catch((function(e){console.log(e)}))},showCheckbox:function(){1==this.isShowCheckbox&&(this.selectedRows=[],this.checked=[])},isInt:function(e){return Number(e)===e&&e%1===0}}},_m=wm,km=(a("3288"),Object(u["a"])(_m,vm,ym,!1,null,null,null)),Cm=km.exports,xm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("培训经费管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加经费")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],ref:"addForm",staticClass:"form-width",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{prop:"projectName",label:"项目名称:"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.projectName,callback:function(t){e.$set(e.addForm,"projectName",t)},expression:"addForm.projectName"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"申请金额:",prop:"appliedAmount"}},[a("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.addForm.appliedAmount,callback:function(t){e.$set(e.addForm,"appliedAmount",t)},expression:"addForm.appliedAmount"}})],1),a("el-form-item",{staticClass:"input-width label-align",staticStyle:{"margin-right":"30px"},attrs:{label:"申请人：",prop:"proposer"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.proposer,callback:function(t){e.$set(e.addForm,"proposer",t)},expression:"addForm.proposer"}})],1),a("el-form-item",{staticClass:"input-width label-align2",attrs:{label:"所在单位：",prop:"companyId"}},[a("el-select",{model:{value:e.addForm.companyId,callback:function(t){e.$set(e.addForm,"companyId",t)},expression:"addForm.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"file_live_1"}},[a("input",{ref:"file_live_1",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file_live_1?a("span",[e._v("("+e._s(e.fileName)+")")]):a("span",[e._v("请选择需要上传的文件...")])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("addForm")}}},[e._v("\n              保存\n          ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              取消\n          ")])],1)],1)],1)])},Sm=[],Fm={data:function(){return{addForm:{projectName:"",appliedAmount:"",proposer:"",companyId:""},companyProduction:[],rules:{projectName:[{required:!0,message:"请插入",trigger:"change"}],appliedAmount:[{required:!0,message:"请插入",trigger:"change"}],companyId:[{required:!0,message:"请选择",trigger:"change"}],proposer:[{required:!0,message:"请插入",trigger:"change"}]},fileName:"",file_live_1:null,dataLoading:!1}},mounted:function(){this.getCompanyProduct()},methods:{getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=e.companyProduction.concat(t)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataLoading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/training_funds/create",a).then((function(e){t.$router.push({path:"/trainingFunds"}),setTimeout((function(){t.dataLoading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("projectName",this.addForm.projectName),e.append("appliedAmount",this.addForm.appliedAmount),e.append("proposer",this.addForm.proposer),e.append("companyId",this.addForm.companyId),e.append("id",0),e.append("file",this.file_live_1),e}}},Im=Fm,Dm=Object(u["a"])(Im,xm,Sm,!1,null,null,null),Tm=Dm.exports,Vm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("培训经费管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("经费详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],ref:"formData",staticClass:"form-width",attrs:{model:e.formData,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{prop:"projectName",label:"项目名称:"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.formData.projectName,callback:function(t){e.$set(e.formData,"projectName",t)},expression:"formData.projectName"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"申请金额:",prop:"appliedAmount"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.formData.appliedAmount,callback:function(t){e.$set(e.formData,"appliedAmount",t)},expression:"formData.appliedAmount"}})],1),a("el-form-item",{staticClass:"input-width label-align",staticStyle:{"margin-right":"30px"},attrs:{label:"申请人：",prop:"proposer"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.formData.proposer,callback:function(t){e.$set(e.formData,"proposer",t)},expression:"formData.proposer"}})],1),a("el-form-item",{staticClass:"input-width label-align2",attrs:{label:"所在单位：",prop:"companyId"}},[a("el-select",{attrs:{disabled:""},model:{value:e.formData.companyId,callback:function(t){e.$set(e.formData,"companyId",t)},expression:"formData.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"file"}},[a("span",{staticClass:"item-label"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.downloadFile()}}},[e._v("下载附件")])],1),e.file?e._e():a("span",[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n            "+e._s(e.fileName)+"\n          ")])],1),e.file?a("span",[e._v("("+e._s(e.fileName)+")")]):e._e()]),a("el-form-item",[e.isShowAddButton?e._e():a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("通过")]),e.isShowAddButton?e._e():a("el-button",{attrs:{size:"small",plain:"",type:"warning"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("拒绝")]),e.isShowAddButton?e._e():a("el-button",{attrs:{size:"small",plain:"",type:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),e.isShowAddButton?a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]):e._e()],1)],1)],1)])},Lm=[],Nm={data:function(){return{formData:{projectName:"",appliedAmount:"",proposer:"",companyId:"",status:""},companyProduction:[],loggedinUserType:null,fileName:"",file:null,dataLoading:!1,id:0,isShowAddButton:null,appStatus:["全部","待审批","已同意","已拒绝"]}},mounted:function(){this.getCompanyProduct(),this.id=this.$route.params.id,this.getData(this.$route.params.id)},created:function(){this.isShowAddButton=!!n.a.get("authList").find((function(e){return"addTrainingFunds"==e.privilegeCode}))},methods:{getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=e.companyProduction.concat(t)})).catch((function(e){console.log(e)}))},getData:function(e){var t=this;this.dataLoading=!0,$().get("/api/training_funds/get/"+e).then((function(e){t.formData=e,t.file=e.trainingFundsProfiles,t.file&&(t.fileName=t.file.replace("/uploads/","")),setTimeout((function(){t.dataLoading=!1}),10)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;console.log(this.file),S()({url:I.DOWNLOAD_URL()+this.file,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,console.log(i),i.setAttribute("download",e.file.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},$m=Nm,Pm=Object(u["a"])($m,Vm,Lm,!1,null,null,null),zm=Pm.exports,Am=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("投入品管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"iptBox"},[a("div",{staticClass:"tab-header inline-block-IE",class:{active:e.mode},attrs:{type:""},on:{click:e.clickTabLeft}},[e._v("使用信息")]),a("div",{staticClass:"tab-header inline-block-IE",class:{active:!e.mode},attrs:{type:""},on:{click:e.clickTabRight}},[e._v("采购信息")])]),a("div",{staticClass:"iptBox"},[e.mode?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/inputManagement/addUse"})}}},[e._v("添加")]):a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push({path:"/inputManagement/addPurchase"})}}},[e._v("添加")])],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.mode,expression:"mode"},{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号",width:"100px"}}),a("el-table-column",{attrs:{prop:"companyId",label:"企业名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterCompnay(a.companyId)))]}}])}),a("el-table-column",{attrs:{prop:"sampleName",label:"样品名称"}}),a("el-table-column",{attrs:{prop:"amount",label:"使用数量(公斤)"}}),a("el-table-column",{attrs:{prop:"operations",label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/inputManagement/view/"+i.id,query:{mode:e.mode}})}}},[e._v("查看")])]}}])})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.mode,expression:"!mode"},{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowIndex}},[a("el-table-column",{attrs:{formatter:e.order,label:"序号"}}),a("el-table-column",{attrs:{prop:"companyId",label:"企业名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.filterCompnay(a.companyId)))]}}])}),a("el-table-column",{attrs:{prop:"sampleName",label:"样品名称"}}),a("el-table-column",{attrs:{prop:"amount",label:"采购数量(公斤)"}}),a("el-table-column",{attrs:{label:"操作","class-name":"text-center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push({path:"/inputManagement/view/"+i.id,query:{mode:e.mode}})}}},[e._v("查看")])]}}])})],1),a("div",{staticClass:"pageBox"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.page.pageIndex,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageIndex",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getList}})],1)],1)])},Rm=[],Bm={name:"sampleCheck",components:{Pagination:_e},data:function(){return{page:{pageIndex:1,pageSize:20},total:0,tableData:[],companyProduction:[],mode:!0,listLoading:!0}},created:function(){this.getList(),this.getCompanyProduction()},methods:{clickTabLeft:function(){this.mode=!0,this.getList(),this.getCompanyProduction()},clickTabRight:function(){this.mode=!1,this.getList(),this.getCompanyProduction()},getList:function(){var e=this;this.mode?(this.listLoading=!0,$().get("/api/inputsUse/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)}))):(this.listLoading=!0,$().get("/api/inputsPurchase/all",{pageNo:this.page.pageIndex-1,pageSize:this.page.pageSize,sortBy:"id"}).then((function(t){e.tableData=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),500)})).catch((function(e){console.log(e)})))},getCompanyProduction:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=t})).catch((function(e){console.log(e)}))},filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.companyId===e}));return t?t.companyName:""},rowIndex:function(e){var t=e.row,a=e.rowIndex;t.rowIndex=a},order:function(e){return this.page.pageSize*(this.page.pageIndex-1)+e.rowIndex+1}}},Om=Bm,jm=(a("0afd"),Object(u["a"])(Om,Am,Rm,!1,null,"2d3c0ce3",null)),Em=jm.exports,Um=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("投入品管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加记录")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"addForm",staticClass:"form-width",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"企业名称",prop:"companyId"}},[a("el-select",{model:{value:e.addForm.companyId,callback:function(t){e.$set(e.addForm,"companyId",t)},expression:"addForm.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"样品名称",prop:"sampleName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.sampleName,callback:function(t){e.$set(e.addForm,"sampleName",t)},expression:"addForm.sampleName"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"采购数量",prop:"amount"}},[a("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.addForm.amount,callback:function(t){e.$set(e.addForm,"amount",t)},expression:"addForm.amount"}})],1),a("el-form-item",{attrs:{label:"",prop:"file_live_1"}},[a("input",{ref:"file_live_1",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file_live_1?a("span",[e._v("("+e._s(e.fileName)+")")]):a("span",[e._v("请选择需要上传的文件...")])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("addForm")}}},[e._v("\n              保存\n          ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              取消\n          ")])],1)],1)],1)])},qm=[],Mm={data:function(){return{addForm:{companyId:"",amount:"",sampleName:""},companyProduction:[],rules:{amount:[{required:!0,message:"请插入",trigger:"change"}],sampleName:[{required:!0,message:"请插入",trigger:"change"}],companyId:[{required:!0,message:"请选择",trigger:"change"}]},fileName:"",file_live_1:null,dataloading:!1}},mounted:function(){this.getCompanyProduct()},methods:{getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=e.companyProduction.concat(t)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataloading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/inputsPurchase/create",a).then((function(e){t.$router.go(-1),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("companyId",this.addForm.companyId),e.append("amount",this.addForm.amount),e.append("sampleName",this.addForm.sampleName),e.append("file",this.file_live_1),e.append("id",0),e}}},Ym=Mm,Gm=(a("faad"),Object(u["a"])(Ym,Um,qm,!1,null,null,null)),Wm=Gm.exports,Qm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("投入品管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加记录")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"addForm",staticClass:"form-width",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"企业名称",prop:"companyId"}},[a("el-select",{model:{value:e.addForm.companyId,callback:function(t){e.$set(e.addForm,"companyId",t)},expression:"addForm.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"样品名称",prop:"sampleName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.sampleName,callback:function(t){e.$set(e.addForm,"sampleName",t)},expression:"addForm.sampleName"}})],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"使用数量",prop:"amount"}},[a("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.addForm.amount,callback:function(t){e.$set(e.addForm,"amount",t)},expression:"addForm.amount"}})],1),a("el-form-item",{attrs:{label:"",prop:"file_live_1"}},[a("input",{ref:"file_live_1",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")]),e.file_live_1?a("span",[e._v("("+e._s(e.fileName)+")")]):a("span",[e._v("请选择需要上传的文件...")])],1),a("el-form-item",{staticClass:"left-margin"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("addForm")}}},[e._v("\n              保存\n          ")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              取消\n          ")])],1)],1)],1)])},Jm=[],Hm={data:function(){return{addForm:{companyId:"",amount:"",sampleName:""},companyProduction:[],rules:{amount:[{required:!0,message:"请插入",trigger:"change"}],sampleName:[{required:!0,message:"请插入",trigger:"change"}],companyId:[{required:!0,message:"请选择",trigger:"change"}]},fileName:"",file_live_1:null,dataloading:!1}},mounted:function(){this.getCompanyProduct()},methods:{getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=e.companyProduction.concat(t)})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dataloading=!0;var a=new FormData;a=t.makeFormData(),$().post("/api/inputsUse/create",a).then((function(e){t.$router.go(-1),setTimeout((function(){t.dataloading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("companyId",this.addForm.companyId),e.append("amount",this.addForm.amount),e.append("sampleName",this.addForm.sampleName),e.append("file",this.file_live_1),e.append("id",0),e}}},Xm=Hm,Km=(a("0afb"),Object(u["a"])(Xm,Qm,Jm,!1,null,null,null)),Zm=Km.exports,ef=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("投入品管理")]),a("el-breadcrumb-item",{staticClass:"actived"},[e._v("查看详情")])],1)],1),a("div",{staticClass:"box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataloading,expression:"dataloading"}],ref:"formData",staticClass:"form-width",attrs:{model:e.formData,"label-width":"100px"}},[a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"企业名称",prop:"companyId"}},[a("el-select",{attrs:{disabled:""},model:{value:e.formData.companyId,callback:function(t){e.$set(e.formData,"companyId",t)},expression:"formData.companyId"}},e._l(e.companyProduction,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"样品名称",prop:"sampleName"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.formData.sampleName,callback:function(t){e.$set(e.formData,"sampleName",t)},expression:"formData.sampleName"}})],1),e.bLeft?a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"使用数量",prop:"amount"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1):a("el-form-item",{staticClass:"input-width label-align",attrs:{label:"采购数量",prop:"amount"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){return e.downloadFile()}}},[e._v("附件下载")]),e.file?e._e():a("span",{staticClass:"item-value"},[a("el-link",{on:{click:function(t){return e.downloadFile()}}},[e._v("\n                  "+e._s(e.fileName)+"\n              ")])],1),e.file?a("span",{staticClass:"item-value"},[e._v("\n              ("+e._s(e.fileName)+")\n          ")]):e._e()],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",type:"success"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n              返回\n          ")])],1)],1)],1)])},tf=[],af={data:function(){return{formData:{companyId:"",amount:"",sampleName:""},companyProduction:[],fileName:"",file:null,dataloading:!1,bLeft:!0}},mounted:function(){this.getCompanyProduct(),this.bLeft=this.$route.query.mode,this.id=this.$route.params.id,this.getData(this.$route.params.id,this.bLeft)},methods:{getCompanyProduct:function(){var e=this;$().get("/api/company_production/name").then((function(t){e.companyProduction=e.companyProduction.concat(t)})).catch((function(e){console.log(e)}))},getData:function(e,t){var a=this;this.dataloading=!0,t?$().get("/api/inputsUse/get/"+e).then((function(e){a.formData=e,a.file=e.inputProfiles,a.fileName=a.file.replace("/uploads/",""),setTimeout((function(){a.dataloading=!1}),10)})).catch((function(e){console.log(e)})):$().get("/api/inputsPurchase/get/"+e).then((function(e){a.formData=e,a.file=e.inputProfiles,a.fileName=a.file.replace("/uploads/",""),setTimeout((function(){a.dataloading=!1}),10)})).catch((function(e){console.log(e)}))},downloadFile:function(){var e=this;S()({url:I.DOWNLOAD_URL()+this.file,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.file.replace("/uploads/","")),document.body.appendChild(i),i.click(),i.remove()}))}}},rf=af,of=(a("1281"),Object(u["a"])(rf,ef,tf,!1,null,null,null)),lf=of.exports,nf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container customized"},[a("div",{staticClass:"title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"actived"},[e._v("上传情况")])],1)],1),a("div",{staticClass:"box padding-modified"},[a("div",{staticClass:"iptBox"},[a("el-row",{staticClass:"w-100 flex-center"},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{staticClass:"margin-left-10"},[e._v("全部")])],1),a("el-col",{staticClass:"margin-left-20 flex-center",attrs:{span:3}},[a("div",[e._v("按年")]),a("el-input",{staticClass:"w-80 margin-left-10",attrs:{type:"number"},model:{value:e.yearVal,callback:function(t){e.yearVal=t},expression:"yearVal"}})],1),a("el-col",{staticClass:"margin-left-20 flex-center",attrs:{span:3}},[a("div",[e._v("按月")]),a("el-input",{staticClass:"w-80 margin-left-10",attrs:{type:"number"},model:{value:e.monthVal,callback:function(t){e.monthVal=t},expression:"monthVal"}})],1),a("el-col",{staticClass:"margin-left-20",attrs:{span:8}},[a("el-button",{staticClass:"margin-left-20",attrs:{size:"small",type:"primary",plain:""}},[e._v("开始统计")]),a("el-button",{staticClass:"margin-left-20",attrs:{size:"small",type:"success",plain:""}},[e._v("排序 (升)")]),a("el-button",{staticClass:"margin-left-20",attrs:{size:"small",type:"success",plain:""}},[e._v("排序 (降)")])],1)],1)],1),a("el-row",{staticClass:"w-100"},[a("div",{ref:"chartdiv",staticClass:"w-100 chart-container"})]),a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:12}},[a("div",{ref:"chartdiv1",staticClass:"chart-container second-container"})]),a("el-col",{attrs:{span:12}},[a("div",{ref:"chartdiv2",staticClass:"chart-container margin-left-10 third-container"})])],1)],1)])},sf=[],cf=[{town:"镇农产品质量安全董监管站",amount:676},{town:"镇农产品质量安全董监管站1",amount:712},{town:"镇农产品质量安全董监管站2",amount:312},{town:"镇农产品质量安全董监管站3",amount:2216},{town:"镇农产品质量安全董监管站4",amount:1245},{town:"镇农产品质量安全董监管站5",amount:1752},{town:"镇农产品质量安全董监管站6",amount:301},{town:"镇农产品质量安全董监管站7",amount:23},{town:"镇农产品质量安全董监管站8",amount:17},{town:"镇农产品质量安全董监管站9",amount:11536},{town:"镇农产品质量安全董监管站10",amount:5796},{town:"镇农产品质量安全董监管站11",amount:398},{town:"镇农产品质量安全董监管站12",amount:969},{town:"镇农产品质量安全董监管站13",amount:750},{town:"镇农产品质量安全董监管站14",amount:3},{town:"镇农产品质量安全董监管站15",amount:13777},{town:"镇农产品质量安全董监管站16",amount:3093}],uf=[{month:"2018-09",income:1200,expenses:21.1},{month:"2018-10",income:900,expenses:300},{month:"2018-11",income:750,expenses:500},{month:"2018-12",income:800,expenses:23.1},{month:"2019-01",income:1300,expenses:28.2},{month:"2019-02",income:1500,expenses:31.9},{month:"2019-03",income:1650,expenses:31.9},{month:"2019-04",income:1350,expenses:31.9},{month:"2019-05",income:615,expenses:31.9},{month:"2019-06",income:723,expenses:31.9},{month:"2019-07",income:500,expenses:31.9},{month:"2019-08",income:1232,expenses:31.9}];up["h"](pp["a"]);var df={name:"uploadSituation",data:function(){return{page:{pageIndex:1,pageSize:50},yearVal:null,monthVal:null}},mounted:function(){this.makeXYChart(),this.makePieChart(),this.makeLineChart()},methods:{createGrid:function(e,t){var a=t.axisRanges.create();a.value=e,a.label.text=this.formatNumber(e)},formatNumber:function(e){return e/1e3+"K"},makeXYChart:function(){var e=up["f"](this.$refs.chartdiv,dp["j"]);e.data=cf;var t=e.xAxes.push(new dp["a"]),a=e.titles.create();a.text="农产品质量安全董监管站",a.fontSize=20,a.marginBottom=30,a.fontWeight="bold",t.dataFields.category="town",t.renderer.grid.template.location=0,t.renderer.minGridDistance=20,t.renderer.labels.template.rotation=-45,t.renderer.labels.template.horizontalCenter="right";var i=e.yAxes.push(new dp["i"]);i.title.text="镇农产品质量安全董监管站(管站)",i.min=0,i.max=15e3,i.renderer.minGridDistance=5,i.renderer.grid.template.disabled=!0,i.renderer.labels.template.disabled=!0;var r=e.series.push(new dp["c"]);r.dataFields.valueY="amount",r.dataFields.categoryX="town",r.name="amount",r.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=1;var o=r.bullets.push(new dp["d"]);o.label.text="{amount}",o.label.dy=-10;var l=r.columns.template;l.strokeWidth=2,l.strokeOpacity=1,this.createGrid(0,i),this.createGrid(5e3,i),this.createGrid(1e4,i),this.createGrid(15e3,i)},makePieChart:function(){var e=up["f"](this.$refs.chartdiv1,dp["g"]);e.data=cf,e.responsive.enabled=!0;var t=e.series.push(new dp["h"]),a=e.titles.create();a.text="农产品质量安全董监管站",a.fontSize=20,a.marginBottom=-20,a.marginTop=10,a.fontWeight="bold",t.dataFields.radiusValue=80,t.radius=150,t.dataFields.value="amount",t.dataFields.category="town",t.slices.template.stroke=up["e"]("#fff"),t.slices.template.strokeWidth=2,t.slices.template.strokeOpacity=1,t.hiddenState.properties.opacity=1,t.hiddenState.properties.endAngle=-90,t.hiddenState.properties.startAngle=-90},makeLineChart:function(){var e=up["f"](this.$refs.chartdiv2,dp["j"]);e.data=uf;var t=e.titles.create();t.text="最近12个月每月上传数据统计",t.fontSize=20,t.marginBottom=30,t.fontWeight="bold";var a=e.xAxes.push(new dp["a"]);a.renderer.grid.template.location=0,a.renderer.ticks.template.disabled=!0,a.renderer.line.opacity=0,a.renderer.grid.template.disabled=!0,a.renderer.minGridDistance=40,a.dataFields.category="month",a.startLocation=.3,a.endLocation=.7;var i=e.yAxes.push(new dp["i"]);i.tooltip.disabled=!0,i.title.text="镇农产品质量安全董监管站(管站)",i.renderer.line.opacity=0,i.renderer.ticks.template.disabled=!0,i.min=0,i.max=1700;var r=e.series.push(new dp["f"]);r.dataFields.categoryX="month",r.dataFields.valueY="income",r.tooltipText="数量: {valueY.value}",r.fillOpacity=.6,r.stroke=up["e"]("#2381e4"),r.strokeWidth=3,r.fill=up["e"]("#90bff2");var o=r.bullets.push(new dp["b"]);o.circle.radius=6,o.circle.stroke=up["e"]("#2381e4"),o.circle.fill=up["e"]("#2381e4"),o.circle.strokeWidth=3,e.cursor=new dp["k"],e.cursor.behavior="panX",e.cursor.lineX.opacity=0,e.cursor.lineY.opacity=0,e.scrollbarX=new up["d"],e.scrollbarX.parent=e.bottomAxesContainer}}},pf=df,mf=Object(u["a"])(pf,nf,sf,!1,null,null,null),ff=mf.exports,gf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"container customized"},[e.listLoading?e._e():a("div",{staticClass:"box padding-modified header statisticsCredit"}),a("div",{staticClass:"box padding-modified body"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:14}},[e.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("诚信等级")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("企业数量汇总")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("诚信等级企业数量汇总")]),a("div",{ref:"chartdiv1",staticClass:"disability-chart chart-container maring-right-10"}),a("div",{staticClass:"white-colored",staticStyle:{position:"absolute",top:"45px",left:"38%"}},[e._v("\n          合计:\n          "),a("span",{staticClass:"blue-colored",staticStyle:{"margin-left":"20px"}},[e._v("A级 ")]),a("span",{staticClass:"blue-colored",staticStyle:{"font-weight":"bold","font-style":"italic","font-size":"32px","line-height":"0.9em","vertical-align":"bottom"}},[e._v(e._s(e.totalA))]),a("span",{staticClass:"blue-colored",staticStyle:{"margin-left":"20px"}},[e._v("B级 ")]),a("span",{staticClass:"blue-colored",staticStyle:{"font-weight":"bold","font-style":"italic","font-size":"32px","line-height":"0.9em","vertical-align":"bottom"}},[e._v(e._s(e.totalB))]),a("span",{staticClass:"blue-colored",staticStyle:{"margin-left":"20px"}},[e._v("C级 ")]),a("span",{staticClass:"blue-colored",staticStyle:{"font-weight":"bold","font-style":"italic","font-size":"32px","line-height":"0.9em","vertical-align":"bottom"}},[e._v(e._s(e.totalC))])])]),a("el-col",{staticClass:"position-relative",attrs:{span:10}},[e.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("农残监测统计")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("级上传数据的比例分布")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("各站点诚信等级上传数据的比例分布")]),a("div",{ref:"chartdiv2",staticClass:"disability-chart chart-container margin-left-10",staticStyle:{"padding-left":"15px"}},[a("figure",[a("chart",{ref:"pie",attrs:{options:e.pie,"init-options":e.initOptions,autoresize:""}})],1)])])],1),a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:14}},[e.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("各站点")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("上传数据统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("各站点上传数据统计")]),a("div",{ref:"chartdiv3",staticClass:"disability-chart chart-container maring-right-10"})]),a("el-col",{attrs:{span:10}},[a("div",{ref:"chartdiv4",staticClass:"disability-chart chart-container margin-left-10"},[a("el-row",{staticStyle:{display:"relative","font-size":"20px","font-weight":"bold",color:"#000000","margin-bottom":"15px"}},[e.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("红")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("黑名单")])]):a("h1",{staticClass:"gradient-colored chart-title",staticStyle:{"font-size":"20px"}},[e._v("红黑名单")])]),a("el-row",{staticStyle:{margin:"50px 10px 30px 15px","border-bottom":"solid 1px #3787ac"}},[a("div",{staticClass:"white-colored",staticStyle:{"font-size":"15px","font-weight":"bold"}},[e._v("红名单")]),a("div",{staticStyle:{margin:"20px 0 20px 20px","line-height":"3em"}},e._l(e.redData,(function(t){return a("span",{key:t.id,staticClass:"blue-colored",staticStyle:{"margin-right":"40px"},attrs:{value:t.id}},[a("b",[e._v(e._s(t))])])})),0)]),a("el-row",{staticStyle:{margin:"30px 0 30px 15px"}},[a("div",{staticClass:"white-colored",staticStyle:{"font-size":"15px","font-weight":"bold"}},[e._v("黑名单")]),a("div",{staticStyle:{margin:"20px 0 20px 20px","line-height":"3em"}},e._l(e.blackData,(function(t){return a("span",{key:t.id,staticClass:"blue-colored",staticStyle:{"margin-right":"40px"},attrs:{value:t.id}},[a("b",[e._v(e._s(t))])])})),0)])],1)])],1)],1)])},hf=[];up["h"](pp["a"]);var bf={name:"statisticsCredit",components:{chart:mp["a"]},data:function(){return{page:{pageIndex:1,pageSize:50},listLoading:!1,totalLoading:!0,toYear:null,toMonth:null,maxCnt:45,progressColor:"",leftTopData:[],leftDownData:[],rightTopData:[],redData:[],blackData:[],township:[],companyProduction:[],totalA:0,totalB:0,totalC:0,colorList:["#229efe","#20beff","#21e3ff","#21ffda","#1fffa6","#61f779","#96f65f","#c9fb64","#c9fb64","#fbd661","#f1be51","#f68a63","#f17263","#ed6082","#ee63ca","#7366f4"],is_ie:null,pie:{},initOptions:{renderer:"canvas"}}},mounted:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isIE(),e.next=3,this.getTown();case 3:this.getCompanyProduction();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getTown:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,$().get("/api/town/all").then((function(e){t.township=t.township.concat(e),t.getLeftTopData(),t.getRightTopData(),t.getLeftDownData()})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createGrid:function(e,t){var a=t.axisRanges.create();a.value=e,a.label.text=this.formatNumber(e)},createGrid1:function(e,t){var a=t.axisRanges.create();a.value=e,a.label.text=e},formatNumber:function(e){return e/1e3+"K"},getLeftTopData:function(){var e=this;$().get("/api/company_production/getTownCreditStatis",{sortBy:"town_id"}).then((function(t){e.leftTopData=t.data,setTimeout((function(){}),500),e.makeChartLeftTop(),setTimeout((function(){e.totalLoading=!1}),500)})).catch((function(e){console.log(e)}))},getRightTopData:function(){var e=this;$().get("/api/company_credit_grade/getCreditStatis",{sortBy:"cnt"}).then((function(t){e.leftTopData=t.data,setTimeout((function(){}),500),e.makeChartRightTop()})).catch((function(e){console.log(e)}))},getLeftDownData:function(){var e=this;$().get("/api/company_credit_grade/getCreditStatis",{sortBy:"townId"}).then((function(t){e.leftDownData=t.data,setTimeout((function(){}),500),e.makeChartLeftDown()})).catch((function(e){console.log(e)}))},getRedData:function(){var e=this;$().get("/api/company_credit_grade/all",{approvalStatus:2,nowGrade:"A",sortBy:"creditGradeId"}).then((function(t){setTimeout((function(){}),500);e.redData=t.data.map((function(t){return e.filterCompnay(t.creditCode)}))})).catch((function(e){console.log(e)}))},getBlackData:function(){var e=this;$().get("/api/company_credit_grade/all",{approvalStatus:2,nowGrade:"C",sortBy:"creditGradeId"}).then((function(t){setTimeout((function(){}),500);e.blackData=t.data.map((function(t){return e.filterCompnay(t.creditCode)}))})).catch((function(e){console.log(e)}))},getCompanyProduction:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$().get("/api/company_production/name").then((function(e){t.companyProduction=e,t.getRedData(),t.getBlackData()})).catch((function(e){console.log(e)}));case 2:setTimeout((function(){t.listLoading=!1}),500);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),filterCompnay:function(e){var t=this.companyProduction.find((function(t){return t.creditCode===e}));return t?t.companyName:""},filterTownName:function(e){var t=this.township.find((function(t){return t.id===e}));return t?t.name:""},makeChartLeftTop:function(){var e=this,t=up["f"](this.$refs.chartdiv1,dp["j"]),a=[];this.leftTopData.map((function(t){a.push({townId:e.filterTownName(t[4]),"A级":t[1],"B级":t[2],"C级":t[3]}),e.totalA+=t[1],e.totalB+=t[2],e.totalC+=t[3]})),t.data=a,t.responsive.enabled=!0;var i=t.xAxes.push(new dp["a"]),r=t.titles.create();r.text="诚信等级企业数量汇总",r.fontSize=5,r.marginBottom=40,r.fill=up["e"]("#012f8a"),i.dataFields.category="townId",i.renderer.grid.template.location=0,i.renderer.grid.template.disabled=!0,i.renderer.minGridDistance=20,i.renderer.labels.template.horizontalCenter="right",i.renderer.labels.template.fill="white",i.renderer.line.strokeOpacity=1,i.renderer.line.strokeWidth=2,i.renderer.labels.template.truncate=!0,i.renderer.labels.template.maxWidth=150,i.renderer.labels.template.fontSize=15,i.renderer.line.stroke=up["e"]("#3787ac");var o=t.yAxes.push(new dp["i"]);o.min=0,o.renderer.labels.template.fill="white",o.renderer.grid.template.stroke=up["e"]("#fff"),o.renderer.line.strokeOpacity=1,o.renderer.line.strokeWidth=2,o.renderer.line.stroke=up["e"]("#3787ac");var l=t.series.push(new dp["c"]);l.dataFields.valueY="A级",l.dataFields.categoryX="townId",l.name="A级",l.tooltipText="{name}: [bold]{valueY}[/]",l.stroke=up["e"]("red").lighten(-.5);var n=new up["c"];n.addColor(up["e"]("#db4f5a")),n.addColor(up["e"]("#e0c2f8")),n.rotation=90,l.fill=n;var s=l.bullets.push(new dp["d"]);s.label.text="{A级}",s.label.rotation=-45,s.label.fill=up["e"]("#20beff"),s.label.dy=-10;var c=t.series.push(new dp["c"]);c.dataFields.valueY="B级",c.dataFields.categoryX="townId",c.name="B级",c.tooltipText="{name}: [bold]{valueY}[/]",c.stroke=up["e"]("yellow").lighten(-.5);var u=new up["c"];u.addColor(up["e"]("#f7b918")),u.addColor(up["e"]("#f7ffb2")),u.rotation=90,c.fill=u;var d=c.bullets.push(new dp["d"]);d.label.text="{B级}",d.label.rotation=-45,d.label.fill=up["e"]("#20beff"),d.label.dy=-10;var p=t.series.push(new dp["c"]);p.dataFields.valueY="C级",p.dataFields.categoryX="townId",p.name="C级",p.tooltipText="{name}: [bold]{valueY}[/]",p.stroke=up["e"]("green").lighten(-.5);var m=new up["c"];m.addColor(up["e"]("#55ea38")),m.addColor(up["e"]("#c1feb9")),m.rotation=90,p.fill=m;var f=p.bullets.push(new dp["d"]);f.label.text="{C级}",f.label.fill=up["e"]("#20beff"),f.label.rotation=-45,f.label.dy=-10,t.cursor=new dp["k"],t.legend=new dp["e"],t.legend.position="top",t.legend.labels.template.fill="white",t.legend.contentAlign="left",t.legend.marginTop=-20;var g=t.legend.createChild(up["b"]);g.text="诚信等级:",g.fontSize=15,g.marginRight=10,g.marginLeft=40,this.is_ie?g.paddingTop=10:g.paddingTop=15,g.fill="white";var h=l.columns.template;h.strokeOpacity=0},makeChartRightTop:function(){var e=this;this.leftTopData.sort((function(e,t){return t.cnt-e.cnt}));var t=[];this.leftTopData.map((function(a){t.push({value:a[0],name:e.filterTownName(a[1])})})),this.pie={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"各站点衣残捡测上传数据统计",type:"pie",radius:"40%",center:["54%","50%"],data:t,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:2,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{fontSize:16,color:"#FFF",formatter:"{d}%: {b}"}}}],color:this.colorList};var a=-1,i=this.$refs.pie,r=this.pie.series[0].data.length;setInterval((function(){i.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a}),a=(a+1)%r,i.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a}),i.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a})}),1e3)},makeChartLeftDown:function(){var e=this,t=up["f"](this.$refs.chartdiv3,dp["j"]),a=[];this.leftDownData.map((function(t){a.push({townId:e.filterTownName(t[1]),cnt:t[0]})})),t.data=a,t.responsive.enabled=!0;var i=t.xAxes.push(new dp["a"]),r=t.titles.create();r.text="各站点上传数据统计",r.fontSize=5,r.marginBottom=30,r.fill=up["e"]("#012f8a"),i.dataFields.category="townId",i.renderer.grid.template.disabled=!0,i.renderer.labels.template.fill="white",i.renderer.labels.template.truncate=!0,i.renderer.labels.template.maxWidth=150,i.renderer.labels.template.fontSize=15,i.renderer.labels.template.rotation=-45,i.renderer.grid.template.location=0,i.renderer.line.strokeOpacity=1,i.renderer.line.strokeWidth=2,i.renderer.line.stroke=up["e"]("#3787ac"),i.renderer.labels.template.horizontalCenter="right";var o=t.yAxes.push(new dp["i"]);o.min=0,o.renderer.minGridDistance=40,o.renderer.labels.template.fill="white",o.renderer.grid.template.stroke=up["e"]("#fff"),o.renderer.line.strokeOpacity=1,o.renderer.line.strokeWidth=2,o.renderer.line.stroke=up["e"]("#3787ac");var l=t.series.push(new dp["c"]);l.dataFields.valueY="cnt",l.dataFields.categoryX="townId",l.name="cnt",l.tooltipText="{name}: [bold]{valueY}[/]";var n=new up["c"];n.addColor(up["e"]("#00d5f7")),n.addColor(up["e"]("#4784ee")),n.rotation=90,l.fill=n;var s=l.bullets.push(new dp["d"]);s.label.text="{cnt}",s.label.fill=up["e"]("#20beff"),s.label.rotation=-45,s.label.dy=-10,t.cursor=new dp["k"];var c=l.columns.template;c.strokeOpacity=0},getPercent:function(e,t,a){return e&&t?(2===a&&(this.progressColor=parseInt(e/t*100)<100?"warning":"success"),parseInt(e/t*100)):0},isIE:function(){var e=navigator.userAgent;this.is_ie=e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}}},vf=bf,yf=Object(u["a"])(vf,gf,hf,!1,null,null,null),wf=yf.exports,_f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"container customized"},[e.listLoading?e._e():a("div",{staticClass:"box padding-modified header statisticsSupervision"}),a("div",{staticClass:"box padding-modified body"},[a("el-row",{staticClass:"W-100"},[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"disability-chart chart-container padding-10 large"},[a("el-row",{staticClass:"w-100 flex-center margin-top-10 margin-bottom-10"},[a("el-col",{staticClass:"margin-left-10",attrs:{span:5}},[e.is_ie?a("h1",{staticStyle:{"font-size":"20px margin-top:5px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("监管")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("记录统计")])]):a("h1",{staticClass:"gradient-colored",staticStyle:{"font-size":"20px"}},[e._v("监管记录统计")])]),a("el-col",{staticClass:"margin-left-20 flex-center margin-top-reverse-5-IE",attrs:{span:7}},[a("div",{staticClass:"select_label no-margin-left white-colored"},[e._v("开始日期")]),a("el-date-picker",{staticClass:"chart-input",staticStyle:{width:"300px"},attrs:{type:"date",size:"small",placeholder:"选择日期"},model:{value:e.createTimeFrom,callback:function(t){e.createTimeFrom=t},expression:"createTimeFrom"}})],1),a("el-col",{staticClass:"margin-left-20 flex-center margin-top-reverse-5-IE",attrs:{span:7}},[a("div",{staticClass:"select_label no-margin-left white-colored"},[e._v("结束日期")]),a("el-date-picker",{staticClass:"chart-input",staticStyle:{width:"300px"},attrs:{type:"date",size:"small",placeholder:"选择日期"},model:{value:e.createTimeTo,callback:function(t){e.createTimeTo=t},expression:"createTimeTo"}})],1),a("el-col",{staticClass:"margin-left-20 margin-top-reverse-5-IE",attrs:{span:3}},[a("el-button",{staticClass:"no-effect",attrs:{type:"primary",plain:""},on:{click:function(t){return e.getData()}}},[e._v("开始统计")])],1)],1),a("el-row",[a("el-container",[a("el-table",{staticClass:"fixed-height chart-table",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"townName",label:"乡镇名称",width:"120","class-name":"white-colored"}}),a("el-table-column",{attrs:{prop:"townCnt",label:"监管记录数量","class-name":"blue-colored"}}),a("el-table-column",{attrs:{prop:"townCnt2",label:"整改记录数量","class-name":"blue-colored"}}),a("el-table-column",{attrs:{prop:"rate",label:"不合格数量","class-name":"blue-colored"}}),a("el-table-column",{attrs:{prop:"progress",label:"不合格占比"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"blue-colored"},[e._v(e._s(i.progress)+"%")])]),a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:e.getColor(i.progress),"show-text":!1}})]}}])})],1)],1)],1),a("el-row",[a("el-container",[a("el-table",{staticClass:"border-hide chart-table",staticStyle:{width:"100%"},attrs:{data:e.totalData,"show-header":!1,"row-class-name":"success-row"}},[a("el-table-column",{attrs:{prop:"townName",width:"120","class-name":"white-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("b",[e._v(e._s(i.townName))])]}}])}),a("el-table-column",{attrs:{prop:"townCnt","class-name":"blue-colored italic-font large-font"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("b",[e._v(e._s(i.townCnt))])]}}])}),a("el-table-column",{attrs:{prop:"townCnt2","class-name":"blue-colored italic-font large-font"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("b",[e._v(e._s(i.townCnt2))])]}}])}),a("el-table-column",{attrs:{prop:"rate","class-name":"blue-colored italic-font large-font"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("b",[e._v(e._s(i.rate))])]}}])}),a("el-table-column",{attrs:{prop:"progress"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:e.getColor(i.progress),"show-text":!1}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"合格率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"large-font blue-colored italic-font"},[e._v(e._s(i.progress)+"%")])])]}}])})],1)],1)],1)],1)]),a("el-col",{staticClass:"position-relative",attrs:{span:10}},[e.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("各乡镇监管")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("记录上传数据的比例分布")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("各乡镇监管记录上传数据的比例分布")]),a("div",{ref:"chartpie",staticClass:"disability-chart chart-container margin-left-10 large"},[a("figure",[a("chart",{ref:"pie",attrs:{options:e.pie,"init-options":e.initOptions,autoresize:""}})],1)])])],1),a("el-row",{staticClass:"W-100"},[a("el-col",[a("div",{staticClass:"w-100 flex-box disability-chart chart-container"},[e.is_ie?a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("认证")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("认证统计")]),a("div",{ref:"chartpie2",staticClass:"w-50 inline-block-IE chart-div-IE"}),a("div",{staticClass:"divider no-margin-left inline-block-IE divider-IE"}),a("div",{staticClass:"w-50 inline-block-IE chart-div-IE"},[null!==e.specialData1&&e.specialData1.length>0?a("el-row",{staticClass:"w-90 margin-left-60"},[a("el-col",{staticClass:"margin-top-10 text-left",staticStyle:{"font-size":"20px"}},[e.is_ie?a("h1",{staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("绿色优质")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("数量/占比")])]):a("h1",{staticClass:"gradient-colored",staticStyle:{"font-size":"20px"}},[e._v("绿色优质数量/占比")])])],1):e._e(),a("el-row",{staticClass:"w-90 margin-left-60"},[a("el-col",{attrs:{span:12}},[null!==e.specialData1&&e.specialData1.length>0?a("el-table",{staticClass:"fixed-height chart-table margin-top-10",staticStyle:{width:"100%",height:"293px"},attrs:{data:e.specialData1,"show-header":!1}},[a("el-table-column",{attrs:{prop:"townName","class-name":"no-border-bottom white-colored text-right"}}),a("el-table-column",{attrs:{prop:"progress",width:"200","class-name":"no-border-bottom blue-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[a("h3",[e._v(e._s(i.townCnt))])]),a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:e.getColor(i.progress),"show-text":!1}})]}}],null,!1,2914786848)}),a("el-table-column",{attrs:{prop:"label","class-name":"no-border-bottom blue-colored"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[null!==e.specialData2&&e.specialData2.length>0?a("el-table",{staticClass:"fixed-height margin-top-10 chart-table",staticStyle:{width:"100%",height:"293px"},attrs:{data:e.specialData2,"show-header":!1}},[a("el-table-column",{attrs:{prop:"townName","class-name":"no-border-bottom text-right white-colored"}}),a("el-table-column",{attrs:{prop:"progress",width:"200","class-name":"no-border-bottom blue-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[a("h3",[e._v(e._s(i.townCnt))])]),a("el-progress",{attrs:{percentage:i.progress,"stroke-width":10,status:e.getColor(i.progress),"show-text":!1}})]}}],null,!1,2914786848)}),a("el-table-column",{attrs:{prop:"label","class-name":"no-border-bottom blue-colored"}})],1):e._e()],1)],1),a("el-row",{staticClass:"w-90 margin-left-60"},[a("el-col",{attrs:{span:24}},[null!==e.totalData&&e.totalData.length>0?a("el-table",{staticClass:"chart-table border-hide",staticStyle:{width:"100%"},attrs:{data:e.totalData,"show-header":!1}},[a("el-table-column",{attrs:{prop:"townName",align:"center",width:"120","class-name":"white-colored"}}),a("el-table-column",{attrs:{prop:"specialProgress","class-name":"blue-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[a("h3",[e._v(e._s(i.townCnt))])]),a("el-progress",{attrs:{percentage:i.specialProgress,"stroke-width":10,status:e.getColor(i.specialProgress),"show-text":!1}})]}}],null,!1,1267556256)}),a("el-table-column",{attrs:{prop:"specialLabel",width:"120","class-name":"blue-colored"}})],1):e._e()],1)],1)],1)])])],1)],1)])},kf=[];up["h"](pp["a"]);var Cf={name:"statisticsSupervision",components:{chart:mp["a"]},data:function(){return{pie:{},initOptions:{renderer:"canvas"},createTimeFrom:"",createTimeTo:"",listLoading:!1,visionData:null,visionData1:null,rectificationData:null,rectificationData1:null,tableData:null,tableData1:null,townlist:null,totalData:null,specialData1:[],specialData2:[],colorList:["#229efe","#20beff","#21e3ff","#21ffda","#1fffa6","#61f779","#96f65f","#c9fb64","#c9fb64","#fbd661","#f1be51","#f68a63","#f17263","#ed6082","#ee63ca","#7366f4"],is_ie:null}},mounted:function(){this.isIE(),this.getData()},methods:{getData:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,this.tableData=[],this.tableData1=[],this.rectificationData=[],this.rectificationData1=[],this.visionData=[],this.visionData1=[],this.townlist=[],this.townlist1=[],this.totalData=[],this.qualityData=[],this.specialData1=[],this.specialData2=[],e.next=15,$().get("/api/supervision_record/statis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo,sortBy:"cnt"}).then((function(e){t.visionData=e.data,t.getTown()})).catch((function(e){console.error(e)}));case 15:$().get("/api/supervision_record/statis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo,sortBy:"cnt"}).then((function(e){t.visionData1=e.data,t.getTown1()})).catch((function(e){console.error(e)}));case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTown:function(){var e=this;$().get("/api/town/all",{}).then((function(t){e.townlist=t,e.getRectification()})).catch((function(e){console.error(e)}))},getTown1:function(){var e=this;$().get("/api/town/all",{}).then((function(t){e.townlist1=t,e.getRectification1()})).catch((function(e){console.error(e)}))},getRectification:function(){var e=this;$().get("/api/rectification_record/getStatis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo}).then((function(t){e.rectificationData=t.data;var a=0,i=0,r=0,o=0;e.visionData.forEach((function(t){for(var l=t[0],n=t[1],s=t[3],c="",u=0,d=0;d<e.townlist.length;d++)if(e.townlist[d].id===s){c=e.townlist[d].name;break}for(var p=0;p<e.rectificationData.length;p++)if(s===e.rectificationData[p][1]){u=e.rectificationData[p][0];break}a+=l,r+=u,i+=l-n,o+=t[2],e.tableData.push({townName:c,townCnt:l,townCnt2:u,rate:l-n,progress:parseInt(100*(l-n)/l),chatName:c,specialLabel:t[2]+"/"+parseInt(100*t[2]/l)+"%",specialProgress:parseInt(100*t[2]/l)})})),e.tableData.length>0&&(e.totalData.push({townName:"合计",townCnt:a,townCnt2:r,rate:i,progress:parseInt(i/a*100),specialLabel:o+"/"+parseInt(100*o/a)+"%",specialProgress:parseInt(100*o/a)}),e.makeQualityData())}))},getRectification1:function(){var e=this;$().get("/api/rectification_record/getStatis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo}).then((function(t){e.rectificationData1=t.data;e.visionData1.forEach((function(t){for(var a=t[0],i=t[1],r=t[3],o="",l=0,n=0;n<e.townlist1.length;n++)if(e.townlist1[n].id===r){o=e.townlist1[n].name;break}for(var s=0;s<e.rectificationData1.length;s++)if(r===e.rectificationData1[s][1]){l=e.rectificationData1[s][0];break}a,l,a-i,t[2],e.tableData1.push({townName:o,townCnt:a,townCnt2:l,rate:a-i,progress:parseInt(100*(a-i)/a),chatName:o,specialLabel:t[2]+"/"+parseInt(100*t[2]/a)+"%",specialProgress:parseInt(100*t[2]/a)})})),e.tableData1.length>0&&(e.makePieChat1(),e.makePieChat2()),e.listLoading=!1}))},getColor:function(e){return 100===e?"success":"warning"},makePieChat1:function(){this.tableData1.sort((function(e,t){return t.townCnt-e.townCnt}));var e=[];this.tableData1.map((function(t){e.push({value:t.townCnt,name:t.chatName.length>10?t.chatName.substring(0,7)+"...":t.chatName})})),this.pie={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"各乡镇监管记录上传数据的",type:"pie",radius:"50%",center:["54%","50%"],data:e,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:2,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{fontSize:14,color:"#FFF",formatter:"{d}%:{b}"}}],color:this.colorList};var t=-1,a=this.$refs.pie,i=this.pie.series[0].data.length;setInterval((function(){a.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:t}),t=(t+1)%i,a.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t}),a.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:t})}),1e3)},makePieChat2:function(){var e=this;$().get("/api/quality_standard/statis",{createTimeFrom:null==this.createTimeFrom?"":this.createTimeFrom,createTimeTo:null==this.createTimeTo?"":this.createTimeTo,sortBy:"cnt"}).then((function(t){t.data.forEach((function(t){for(var a="",i=0;i<e.townlist.length;i++)if(e.townlist[i].id===t[1]){a=e.townlist[i].name;break}e.qualityData.push({townName:a,townCnt:t[0],qualityLabel:a})}));var a=up["f"](e.$refs.chartpie2,dp["g"]);a.data=e.qualityData,a.responsive.enabled=!0;var i=a.series.push(new dp["h"]),r=a.titles.create();r.text="认证统计",r.fontSize=5,r.marginBottom=10,r.fill=up["e"]("#012f8a"),i.dataFields.value="townCnt",i.dataFields.category="qualityLabel",i.ticks.template.strokeWidth=1,i.ticks.template.strokeOpacity=.7,i.ticks.template.fill=up["e"]("#012f8a"),i.ticks.template.fillOpacity=1,i.labels.template.truncate=!0,i.labels.template.fontSize=15,i.labels.template.maxWidth=180,i.labels.template.fill="white",i.labels.template.text="[bold '#20beff']{value.percent.formatNumber('#.0')}%[/] {category}",a.innerRadius=up["g"](40),i.slices.template.fillOpacity=1;var o=new up["a"];o.list=e.colorList.map((function(e){return new up["e"](e)})),i.colors=o;var l=i.slices.template.states.getKey("hover");l.properties.scale=1,l.properties.fillOpacity=.5}))},makeQualityData:function(){for(var e=0;e<this.tableData.length;e+=2)this.specialData1.push({townName:this.tableData[e].townName,progress:this.tableData[e].specialProgress,label:this.tableData[e].specialLabel,townCnt:this.tableData[e].townCnt}),e!==this.tableData.length-1&&this.specialData2.push({townName:this.tableData[e+1].townName,progress:this.tableData[e+1].specialProgress,label:this.tableData[e+1].specialLabel,townCnt:this.tableData[e+1].townCnt})},isIE:function(){var e=navigator.userAgent;this.is_ie=e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}}},xf=Cf,Sf=(a("efb3"),Object(u["a"])(xf,_f,kf,!1,null,"a32dc746",null)),Ff=Sf.exports,If=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"container customized"},[e.listLoading?e._e():a("div",{staticClass:"box padding-modified header statisticTracingRecord"}),a("div",{staticClass:"box padding-modified body"},[a("el-row",{staticClass:"w-100"},[a("el-col",{attrs:{span:13}},[a("div",{staticClass:"disability-chart chart-container padding-10 large progress-customized"},[a("el-row",{staticClass:"w-100 flex-center margin-bottom-10"},[a("el-col",{staticClass:"margin-left-10 text-left",attrs:{span:12}},[e.is_ie?a("h1",{staticStyle:{"font-size":"20px","margin-top":"5px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("乡镇")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("溯源扫码统计")])]):a("h1",{staticClass:"gradient-colored",staticStyle:{"font-size":"20px"}},[e._v("乡镇溯源扫码统计")])]),a("el-col",{staticClass:"margin-left-auto flex-center",attrs:{span:4}},[a("div",{staticClass:"white-colored inline-block-IE"},[e._v("按年")]),a("el-input",{staticClass:"w-50 margin-left-10 chart-input",attrs:{size:"small",type:"number"},model:{value:e.toYear,callback:function(t){e.toYear=t},expression:"toYear"}})],1),a("el-col",{staticClass:"margin-left-20 flex-center",attrs:{span:3}},[a("div",{staticClass:"white-colored inline-block-IE"},[e._v("按月")]),a("el-input",{staticClass:"w-50 margin-left-10 chart-input",attrs:{size:"small",type:"number"},model:{value:e.toMonth,callback:function(t){e.toMonth=t},expression:"toMonth"}})],1),a("el-col",{staticClass:"margin-left-20",attrs:{span:3}},[a("el-button",{staticClass:"no-effect margin-top-reverse-5-IE",attrs:{type:"primary",plain:""}},[e._v("开始统计")])],1)],1),a("el-container",[a("el-table",{staticClass:"fixed-height chart-table",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",width:"150",label:"乡镇名称","class-name":"white-colored"}}),a("el-table-column",{attrs:{prop:"cnt",label:"溯源扫码数量/占比",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-progress",{attrs:{percentage:e.getPercent(i.cnt,e.maxCnt,1),"stroke-width":10,"show-text":!1}})]}}])}),a("el-table-column",{attrs:{"class-name":"blue-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.cnt)+"/"+e._s(Math.floor(a.cnt/e.maxCnt))+"%")]}}])}),a("el-table-column",{attrs:{prop:"cnt1",label:"打码评价数量","class-name":"padding-left-20 blue-colored",width:"150"}})],1)],1),a("el-table",{staticClass:"border-hide chart-table",attrs:{data:e.summaryData,"show-header":!1,"row-class-name":"success-row"}},[a("el-table-column",{attrs:{prop:"name",label:"站点",width:"130","class-name":"white-colored"}},[[a("b",[e._v("合计")])]],2),a("el-table-column",{attrs:{prop:"maxCnt",label:"不合",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-progress",{attrs:{percentage:e.getPercent(i.maxCnt,i.maxCnt,1),"stroke-width":10,"show-text":!1}})]}}])}),a("el-table-column",{attrs:{prop:"maxCnt",label:"合格率",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"sub-title"},[a("h3",{staticClass:"large-font blue-colored italic-font"},[e._v(e._s(i.maxCnt))])])]}}])}),a("el-table-column",{attrs:{label:"检测数量",prop:"avg_maxCnt",width:"150","class-name":"blue-colored"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("h1",{staticClass:"large-font italic-font"},[e._v(e._s(i.avg_maxCnt))])]}}])})],1)],1)]),a("el-col",{staticClass:"position-relative",attrs:{span:11}},[e.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("企业溯")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("源扫码排行TOP10")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("企业溯源扫码排行TOP10")]),a("div",{ref:"chartdiv1",staticClass:"disability-chart chart-container margin-left-10 large progress-customized"},[e.tableData1[0]?a("el-row",{staticClass:"margin-left-10",staticStyle:{"margin-top":"60px"}},[a("el-col",{staticClass:"red-colored padding-left-10",attrs:{span:2}},[e._v("1")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[0][1])))])]),a("el-col",{staticClass:"no-progress-outer red-colored",attrs:{span:15}},[a("el-progress",{attrs:{percentage:95,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[0][0]))])])])],1):e._e(),e.tableData1[1]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"yellow-colored padding-left-10",attrs:{span:2}},[e._v("2")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[1][1])))])]),a("el-col",{staticClass:"no-progress-outer yellow-colored",attrs:{span:15}},[a("el-progress",{attrs:{percentage:90,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[1][0]))])])])],1):e._e(),e.tableData1[2]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"yellow-colored padding-left-10",attrs:{span:2}},[e._v("3")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[2][1])))])]),a("el-col",{staticClass:"no-progress-outer yellow-colored",attrs:{span:15}},[a("el-progress",{attrs:{percentage:86,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[2][0]))])])])],1):e._e(),e.tableData1[3]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"blue-colored padding-left-10",attrs:{span:2}},[e._v("4")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[3][1])))])]),a("el-col",{staticClass:"no-progress-outer",attrs:{span:15}},[a("el-progress",{attrs:{percentage:83,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[3][0]))])])])],1):e._e(),e.tableData1[4]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"blue-colored padding-left-10",attrs:{span:2}},[e._v("5")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[4][1])))])]),a("el-col",{staticClass:"no-progress-outer",attrs:{span:15}},[a("el-progress",{attrs:{percentage:80,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[4][0]))])])])],1):e._e(),e.tableData1[5]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"blue-colored padding-left-10",attrs:{span:2}},[e._v("6")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[5][1])))])]),a("el-col",{staticClass:"no-progress-outer",attrs:{span:15}},[a("el-progress",{attrs:{percentage:78,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[5][0]))])])])],1):e._e(),e.tableData1[6]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"blue-colored padding-left-10",attrs:{span:2}},[e._v("7")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[6][1])))])]),a("el-col",{staticClass:"no-progress-outer",attrs:{span:15}},[a("el-progress",{attrs:{percentage:76,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[6][0]))])])])],1):e._e(),e.tableData1[7]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"blue-colored padding-left-10",attrs:{span:2}},[e._v("8")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[7][1])))])]),a("el-col",{staticClass:"no-progress-outer",attrs:{span:15}},[a("el-progress",{attrs:{percentage:74,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[7][0]))])])])],1):e._e(),e.tableData1[8]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"blue-colored padding-left-10",attrs:{span:2}},[e._v("9")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[8][1])))])]),a("el-col",{staticClass:"no-progress-outer",attrs:{span:15}},[a("el-progress",{attrs:{percentage:72,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[8][0]))])])])],1):e._e(),e.tableData1[9]?a("el-row",{staticClass:"margin-left-10 margin-top-30"},[a("el-col",{staticClass:"blue-colored padding-left-10",attrs:{span:2}},[e._v("10")]),a("el-col",{staticClass:"white-colored",attrs:{span:4}},[a("b",[e._v(e._s(e.getCompanyName(e.tableData1[9][1])))])]),a("el-col",{staticClass:"no-progress-outer",attrs:{span:15}},[a("el-progress",{attrs:{percentage:70,"stroke-width":13,"show-text":!1}})],1),a("el-col",{attrs:{span:3}},[a("p",{staticClass:"blue-colored italic-font"},[a("b",[e._v(e._s(e.tableData1[8][0]))])])])],1):e._e()],1)])],1),a("el-row",{staticClass:"w-100"},[a("el-col",[a("div",{staticClass:"w-100 flex-box disability-chart chart-container"},[e.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("各乡")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("镇溯源扫码数据统计")])]):a("h1",{staticClass:"gradient-colored chart-title",staticStyle:{"font-size":"20px"}},[e._v("各乡镇溯源扫码数据统计")]),a("div",{ref:"chartdiv",staticClass:"w-100 inline-block-IE chart-div-IE"})])])],1)],1)])},Df=[],Tf=a("2cbe");up["h"](Tf["a"]),up["h"](pp["a"]);var Vf={name:"statisticsTracing",data:function(){return{page:{pageIndex:1,pageSize:50},tableData:[],tableData1:[],summaryData:[],listLoading:!1,maxCnt:0,avg_maxCnt:0,toMonth:null,toYear:null,companyList:null,townList:null,progressColor:"warning",is_ie:null}},created:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,this.getCompanyList();case 3:return e.next=5,this.getTownList();case 5:this.getData();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){this.isIE()},methods:{createGrid:function(e,t){var a=t.axisRanges.create();a.value=e,a.label.text=this.formatNumber(e)},formatNumber:function(e){return e/1e3+"K"},getCompanyList:function(){var e=this;return $().get("/api/company_production/name").then((function(t){e.companyList=t})).catch((function(e){console.log(e)}))},getTownList:function(){var e=this;return $().get("/api/town/all").then((function(t){e.townList=t})).catch((function(e){console.log(e)}))},getData:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.toMonth&&this.toYear?new Date(this.toYear,this.toMonth,0):new Date,e.next=3,$().get("/api/tracing/getTracingTownStatis",{tracingTimeTo:t}).then((function(e){var t=e.data,i=0,r=0,o=function(e){var o=a.townList.find((function(a){return a.id==t[e][2]}));i+=t[e][0],r+=t[e][1],a.tableData.push({name:o.name,cnt:t[e][0],cnt1:t[e][1]})};for(var l in t)o(l);a.maxCnt=i,a.summaryData.push({maxCnt:i,avg_maxCnt:r}),a.makeXYChart()})).catch((function(e){console.log(e)}));case 3:$().get("/api/tracing/getTracingCompanyStatis",{tracingTimeTo:t}).then((function(e){a.tableData1=e.data,a.tableData1.length>0&&(a.tableData1=a.tableData1.slice(0,10)),setTimeout((function(){a.listLoading=!1}),500)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),makeXYChart:function(){var e=up["f"](this.$refs.chartdiv,dp["j"]);e.data=this.tableData,e.marginTop=20;var t=e.xAxes.push(new dp["a"]),a=e.titles.create();a.text="tmp",a.fontSize=5,a.marginBottom=40,a.fill=up["e"]("#012f8a"),t.dataFields.category="name",t.renderer.grid.template.location=0,t.renderer.minGridDistance=10,t.renderer.grid.template.disabled=!0,t.renderer.labels.template.fill="white",t.renderer.labels.template.rotation=-45,t.renderer.labels.template.truncate=!0,t.renderer.labels.template.maxWidth=150,t.renderer.labels.template.fontSize=15,t.renderer.labels.template.horizontalCenter="right",t.renderer.line.strokeOpacity=1,t.renderer.line.strokeWidth=2,t.renderer.line.stroke=up["e"]("#3787ac");var i=e.yAxes.push(new dp["i"]);i.min=0,i.renderer.labels.template.fill="white",i.renderer.grid.template.stroke=up["e"]("#fff"),i.renderer.line.strokeOpacity=1,i.renderer.line.strokeWidth=2,i.renderer.line.stroke=up["e"]("#3787ac");var r=e.series.push(new dp["c"]);r.dataFields.valueY="cnt",r.dataFields.categoryX="name",r.name="cnt",r.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=1;var o=new up["c"];o.addColor(up["e"]("#08d3fc")),o.addColor(up["e"]("#4687eb")),o.rotation=90,r.fill=o;var l=r.bullets.push(new dp["d"]);l.label.text="{cnt}",l.label.fill=up["e"]("#20beff"),l.label.rotation=-45,l.label.dy=-20;var n=r.columns.template;n.strokeOpacity=0},beforeDestroy:function(){this.chart&&this.chart.dispose()},getCompanyName:function(e){var t=this.tableData1.find((function(t){return t.companyId==e}));if(t)return t.companyName},getPercent:function(e,t,a){return e&&t?(2===a&&(this.progressColor=parseInt(e/t*100)<100?"warning":"success"),parseInt(e/t*100)):0},isIE:function(){var e=navigator.userAgent;this.is_ie=e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}}},Lf=Vf,Nf=Object(u["a"])(Lf,If,Df,!1,null,null,null),$f=Nf.exports,Pf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"container customized"},[e.listLoading?e._e():a("div",{staticClass:"box padding-modified header statisticsTracingCompany"}),a("div",{staticClass:"box padding-modified body"},[a("el-row",{staticClass:"W-100"},[a("el-col",{staticClass:"position-relative",attrs:{span:12}},[e.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("乡镇溯")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("源企业统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("乡镇溯源企业统计")]),a("div",{ref:"chartpie1",staticClass:"disability-chart chart-container"})]),a("el-col",{staticClass:"position-relative",attrs:{span:12}},[e.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("各乡镇监管")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("记录上传数据的比例分布")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("各乡镇监管记录上传数据的比例分布")]),a("div",{ref:"chartpie2",staticClass:"disability-chart chart-container margin-left-10"},[a("figure",[a("chart",{ref:"pie",attrs:{options:e.pie,"init-options":e.initOptions,autoresize:""}})],1)])])],1),a("el-row",{staticClass:"W-100 position-relative"},[a("el-col",[e.is_ie?a("h1",{staticClass:"margin-left-10 chart-title",staticStyle:{"font-size":"20px"}},[a("span",{staticStyle:{color:"#255ee3",opacity:"0.8"}},[e._v("各乡镇溯源")]),a("span",{staticStyle:{color:"#20beff",opacity:"0.7"}},[e._v("记录上传数据统计")])]):a("h1",{staticClass:"gradient-colored chart-title margin-left-10",staticStyle:{"font-size":"20px"}},[e._v("各乡镇溯源记录上传数据统计")]),a("div",{ref:"chartstick",staticClass:"w-100 flex-box disability-chart chart-container"})])],1)],1)])},zf=[];up["h"](pp["a"]);var Af={name:"statisticsTracingCompany",components:{chart:mp["a"]},data:function(){return{listLoading:!0,tableData:null,tableDataByCnt:null,companyStatics:null,companyStatics1:null,townList:null,colorList:["#229efe","#20beff","#21e3ff","#21ffda","#1fffa6","#61f779","#96f65f","#c9fb64","#c9fb64","#fbd661","#f1be51","#f68a63","#f17263","#ed6082","#ee63ca","#7366f4"],is_ie:null,pie:{},initOptions:{renderer:"canvas"}}},created:function(){this.isIE(),this.getData()},methods:{getData:function(){var e=this;this.tableData=[],this.tableDataByCnt=[],this.companyStatics=[],this.townList=[],$().get("/api/tracing/getCompanyStatis",{tracingTimeFrom:"",tracingTimeTo:"",sortBy:"cnt_company"}).then((function(t){e.companyStatics=t.data,e.getTownlist()})).catch((function(e){console.error(e)}))},getTownlist:function(){var e=this;$().get("/api/town/all",{}).then((function(t){e.townList=t,e.getTableData()})).catch((function(e){console.error(e)}))},getTableData:function(){var e=this;this.companyStatics.forEach((function(t){for(var a=t[1],i="",r=0;r<e.townList.length;r++)if(e.townList[r].id===a){i=e.townList[r].name;break}e.tableData.push({townName:i,companyCnt:t[0],pie1Label:i,pie2Label:i})})),this.makePieChat1(),this.makePieChat2()},getTableData1:function(){var e=this;this.companyStatics1.forEach((function(t){for(var a=t[4],i="",r=0;r<e.townList.length;r++)if(e.townList[r].id===a){i=e.townList[r].name;break}e.tableDataByCnt.push({townName:i,companyCnt:t[0],pie1Label:i,pie2Label:i})})),this.listLoading=!1},makePieChat1:function(){var e=this,t=up["f"](this.$refs.chartpie1,dp["g"]);$().get("/api/company_production/getTownCreditStatis",{createTimeFrom:"",createTimeTo:"",sortBy:"town_id"}).then((function(a){e.companyStatics1=a.data,e.getTableData1(),t.data=e.tableDataByCnt,e.makeStickChat()})).catch((function(e){console.error(e)})),t.responsive.enabled=!0;var a=t.series.push(new dp["h"]),i=t.titles.create();i.text="乡镇溯源企业统计",i.fontSize=5,i.marginBottom=40,i.marginTop=10,i.fill=up["e"]("#012f8a"),a.dataFields.value="companyCnt",a.dataFields.category="pie1Label",a.labels.template.fill="white",a.labels.template.truncate=!0,a.labels.template.maxWidth=150,a.labels.template.fontSize=15,a.labels.template.text="[bold '#20beff']{value.percent.formatNumber('#.0')}%[/] {category}",t.innerRadius=up["g"](40),a.slices.template.fillOpacity=1,a.ticks.template.fill=up["e"]("#FFF"),a.ticks.template.strokeWidth=1,a.ticks.template.strokeOpacity=.7,a.ticks.template.fillOpacity=1;var r=new up["a"];r.list=this.colorList.map((function(e){return new up["e"](e)})),a.colors=r;var o=a.slices.template.states.getKey("hover");o.properties.scale=1,o.properties.fillOpacity=.5},makePieChat2:function(){this.tableData.sort((function(e,t){return t.cnt-e.cnt}));var e=[];this.tableData.map((function(t){e.push({value:t.companyCnt,name:t.townName})})),this.pie={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"各站点衣残捡测上传数据统计",type:"pie",radius:"40%",center:["54%","50%"],data:e,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:2,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{fontSize:16,color:"#FFF",formatter:"{d}%: {b}"}}}],color:this.colorList};var t=-1,a=this.$refs.pie,i=this.pie.series[0].data.length;setInterval((function(){a.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:t}),t=(t+1)%i,a.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t}),a.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:t})}),1e3)},makeStickChat:function(){var e=up["f"](this.$refs.chartstick,dp["j"]);e.data=this.tableDataByCnt;var t=e.xAxes.push(new dp["a"]),a=e.titles.create();a.text="各乡镇溯源记录上传数据统计",a.fontSize=5,a.marginBottom=40,a.fill=up["e"]("#012f8a"),t.dataFields.category="townName",t.renderer.minGridDistance=20,t.renderer.grid.template.disabled=!0,t.renderer.labels.template.fill="white",t.renderer.labels.template.rotation=-45,t.renderer.labels.template.truncate=!0,t.renderer.labels.template.maxWidth=150,t.renderer.labels.template.fontSize=15,t.renderer.labels.template.horizontalCenter="right",t.renderer.line.strokeOpacity=1,t.renderer.line.strokeWidth=2,t.renderer.line.stroke=up["e"]("#3787ac");var i=e.yAxes.push(new dp["i"]);i.min=0,i.renderer.labels.template.fill="white",i.renderer.grid.template.stroke=up["e"]("#fff"),i.renderer.line.strokeOpacity=1,i.renderer.line.strokeWidth=2,i.renderer.line.stroke=up["e"]("#3787ac");var r=e.series.push(new dp["c"]);r.dataFields.valueY="companyCnt",r.dataFields.categoryX="townName",r.name="companyCnt",r.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=1;var o=new up["c"];o.addColor(up["e"]("#08d3fc")),o.addColor(up["e"]("#4687eb")),o.rotation=90,r.fill=o;var l=r.bullets.push(new dp["d"]);l.label.text="{companyCnt}",l.label.fill=up["e"]("#20beff"),l.label.truncate=!0,l.label.maxWidth=150,l.label.fontSize=15,l.label.rotation=-45,l.label.dy=-10;var n=r.columns.template;n.strokeWidth=2,n.strokeOpacity=0},createGrid:function(e,t){var a=t.axisRanges.create();a.value=e,a.label.text=this.formatNumber(e)},formatNumber:function(e){return e/1e3+"K"},isIE:function(){var e=navigator.userAgent;this.is_ie=e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}}},Rf=Af,Bf=Object(u["a"])(Rf,Pf,zf,!1,null,null,null),Of=Bf.exports;n.a.set("creditMode",window.location.href.indexOf("creditMode")),i["default"].use(m["a"]);var jf=window.location.href.indexOf("creditMode")<0?new m["a"]({routes:[{path:"/",name:"home",component:ce,redirect:"productionSubject",beforeEnter:function(e,t,a){j().check()?j().check().then((function(e){a()}),(function(e){console.log(e),v.error("Token 错误")})):v.error("确认 accessToken, sign, timestamp!!!")},children:[{path:"/sampleCheckMain",name:"sampleCheckMain",component:lu},{path:"/sampleCheck/addSampleCheck",name:"addSampleCheck",component:pu},{path:"/sampleCheck/addSampleCheckResult",name:"addSampleCheckResult",component:vu},{path:"/sampleCheck/detailsSampleCheck/:id",name:"detailsSampleCheck",component:xu},{path:"/sampleCheck/detailsSampleCheckResult/:id",name:"detailsSampleCheckResult",component:Vu},{path:"/tracingLabelManagement",name:"tracingLabelManagement",component:Ru},{path:"/companyBusiness",name:"companyBusiness",component:Ac},{path:"/companyBusiness/productBusiness/:id",name:"productBusiness",component:Uc},{path:"/companyBusiness/productBusiness/create/:id",name:"addProductBusiness",component:Qc},{path:"/companyBusiness/detailsCompanyBusiness/:id",name:"detailsCompanyBusiness",component:eu},{path:"/productionSubject",name:"productionSubject",component:ho},{path:"/productionSubject/addRegulatoryObject",name:"addRegulatoryObject",component:ko},{path:"/productionSubject/editRegulatoryObject/:id",name:"editRegulatoryObject",component:Do},{path:"/productionSubject/detailsRegulatoryObject/:id",name:"detailsRegulatoryObject",component:Po},{path:"/productionSubject/warehouseEnv/:id",name:"warehouseEnv",component:Ko},{path:"/productionSubject/warehouseEnv/detailsWarehouse/:id",name:"detailsWarehouse",component:rl},{path:"/productionSubject/warehouseEnv/viewWarehouse/:id",name:"viewWarehouse",component:ul},{path:"/productionSubject/warehouseEnv/addWarehouse/:id",name:"addWarehouse",component:hl},{path:"/productionSubject/mainProduct/:id",name:"mainProduct",component:kl},{path:"/productionSubject/mainProduct/create/:id",name:"addMainProduct",component:Dl},{path:"/productionSubject/mainProduct/edit/:id",name:"editMainProduct",component:Pl},{path:"/productionSubject/mainProduct/thirdPartySamplingRecord/:id",name:"thirdPartySamplingRecord",component:jl},{path:"/productionSubject/mainProduct/thirdPartySampling/create/:id",name:"addThirdPartySampling",component:Gl},{path:"/productionSubject/mainProduct/thirdPartySampling/edit/:id",name:"editThirdPartySampling",component:Kl},{path:"/productionSubject/mainProduct/productBatch/:id",name:"productBatch",component:ln},{path:"/productionSubject/mainProduct/productBatch/:id/create",name:"addProductBatch",component:pn},{path:"/productionSubject/mainProduct/productBatch/:id/edit/:id1",name:"editProductBatch",component:vn},{path:"/productionSubject/mainProduct/inventoryDynamics/:id",name:"inventoryDynamics",component:xn},{path:"/productionSubject/mainProduct/inventoryDynamics/addInventoryDynamics/:id",name:"addInventoryDynamics",component:Qn},{path:"/productionSubject/mainProduct/inventoryDynamics/editInventoryDynamics/:id",name:"editInventoryDynamics",component:es},{path:"/productionSubject/mainProduct/processDefinition/:id",name:"processDefinition",component:xs},{path:"/productionSubject/mainProduct/processDefinition/addProcessDefinition/:id",name:"addProcessDefinition",component:Vs},{path:"/productionSubject/mainProduct/processDefinition/editProcessDefinition/:id",name:"editProcessDefinition",component:As},{path:"/productionSubject/mainProduct/productProperty/:id",name:"productProperty",component:Us},{path:"/productionSubject/mainProduct/productProperty/addProductProperty/:id",name:"addProductProperty",component:Qs},{path:"/productionSubject/mainProduct/productProperty/editProductProperty/:id",name:"editProductProperty",component:ec},{path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/:id",name:"customProductProperty",component:lc},{path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/addCustomProductProperty/:id",name:"addCustomProductProperty",component:pc},{path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/editCustomProductProperty/:id",name:"editCustomProductProperty",component:vc},{path:"/productionSubject/threeProduct",name:"threeProduct",component:xc},{path:"/productionSubject/threeProduct/addThreeProduct",name:"addThreeProduct",component:Vc},{path:"/threeProductsCertification",name:"threeProductsCertification",component:Se},{path:"/threeProductsCertification/create",name:"addThreeProducts",component:Le},{path:"/threeProductsCertification/:id",name:"detailsThreeProducts",component:Re},{path:"/regulatoryRecord",name:"regulatoryRecord",component:qe},{path:"/regulatoryRecord/create",name:"addRegulatoryRecord",component:Je},{path:"/regulatoryRecord/edit/:id",name:"rectificationRecord",component:it},{path:"/regulatoryRecord/:id",name:"detailsRegulatoryRecord",component:ct},{path:"/commonWords",name:"commonWords",component:gt},{path:"/management",name:"management",component:_t},{path:"/businessProducts",name:"businessProducts",component:It},{path:"/companyDetails",name:"companyDetails",component:$t},{path:"/disabilityCheck",name:"disabilityCheck",component:Yt},{path:"/productionRecord",name:"productionRecord",component:nd},{path:"/productionRecord/create",name:"addProductionRecord",component:md},{path:"/productionRecord/editProductionRecord/:id",name:"editProductionRecord",component:yd},{path:"/notice",name:"notice",component:Sd},{path:"/notice/view/:id",name:"detailsNotice",component:Ld},{path:"/notice/create",name:"createNotice",component:Rd},{path:"/notice/smsNotice/:id",name:"smsNotice",component:Jd},{path:"/notice/detailSms",name:"detailSms",component:tp},{path:"/aquatic",name:"aquaticStatistics",component:np},{path:"/notice/edit/:id",name:"editNotice",component:qd},{path:"/jobDefinition",name:"jobDefinition",component:qu},{path:"/jobDefinition/create",name:"addJobDefinition",component:Ju},{path:"/jobDefinition/:id",name:"editJobDefinition",component:td},{path:"/productVariety/:id",name:"productVariety",component:Vn},{path:"/productVariety/create/:id",name:"addProductVariety",component:An},{path:"/productVariety/edit/:id",name:"editProductVariety",component:Un},{path:"/statisticsFarmers",name:"statisticsFarmers",component:bp},{path:"/greenProducts",name:"greenProducts",component:om},{path:"/internalMessage",name:"internalMessage",component:dm},{path:"/internalMessage/add",name:"addInternalMessage",component:bm},{path:"/inputManagement",name:"inputManagement",component:Em},{path:"/inputManagement/addPurchase",name:"addInputPurchase",component:Wm},{path:"/inputManagement/addUse",name:"addInputUse",component:Zm},{path:"/inputManagement/view/:id",name:"viewInputManagement",component:lf},{path:"/workTask",name:"workTask",component:Xt},{path:"/workTask/create",name:"addWorkTask",component:ia},{path:"/workTask/edit/:id",name:"editWorkTask",component:ca},{path:"/workTask/report/create",name:"addWorkTaskReport",component:ga},{path:"/workTask/report/detail/:id",name:"detailWorkTaskReport",component:_a},{path:"/trainingFunds",name:"trainingFunds",component:Cm},{path:"/trainingFunds/add",name:"addTrainingFunds",component:Tm},{path:"/trainingFunds/view/:id",name:"viewTrainingFunds",component:zm},{path:"/seed",name:"seed",component:Ia},{path:"/seed/upload",name:"uploadSeed",component:$a},{path:"/seed/detail/:id",name:"detailSeed",component:Oa},{path:"/userManagement",name:"userManagement",component:Ya},{path:"/userManagement/create",name:"registerUser",component:Xa},{path:"/userManagement/edit/:id",name:"editUser",component:ii},{path:"/userManagement/changePwd/:id",name:"changePassword",component:ci},{path:"/productionStandard",name:"productionStandard",component:gi},{path:"/productionStandard/create",name:"addProductionStandard",component:_i},{path:"/productionStandard/detail/:id",name:"detailProductionStandard",component:Ii},{path:"/productionStandard/edit/:id",name:"editProductionStandard",component:$i},{path:"/productionGrade/:id",name:"definitionLevel",component:ls},{path:"/productionGrade/create/:id",name:"addDefinitionLevel",component:ps},{path:"/productionGrade/edit/:id",name:"editDefinitionLevel",component:vs},{path:"/shareFiles",name:"shareFiles",component:Oi},{path:"/shareFiles/create",name:"addShareFiles",component:Yi},{path:"/shareFiles/edit/:id",name:"editShareFiles",component:Xi},{path:"/shareFiles/detail/:id",name:"detailShareFiles",component:ir},{path:"/specialCategory",name:"specialCategory",component:cr},{path:"/supervisionGrid",name:"supervisionGrid",component:jo},{path:"/supervisionGrid/manage/:id",name:"manageSupervisionGrid",component:Go},{path:"/uploadSituation",name:"uploadSituation",component:ff},{path:"/statisticsCredit",name:"statisticsCredit",component:wf},{path:"/statisticsSupervision",name:"statisticsSupervision",component:Ff},{path:"/statisticsTracing",name:"statisticsTracing",component:$f},{path:"/statisticsTracingCompany",name:"statisticsTracingCompany",component:Of}]},{path:"/login",name:"login",component:M},{path:"*",redirect:"/",hidden:!0}]}):new m["a"]({routes:[{path:"/",name:"home",component:ce,redirect:"corporateCreditFile",beforeEnter:function(e,t,a){j().check()?j().check().then((function(e){a()}),(function(e){console.log(e),v.error("Token 错误")})):v.error("确认 accessToken, sign, timestamp!!!")},children:[{path:"/creditRating",name:"creditRating",component:gr},{path:"/creditRating/:id",name:"detailsRating",component:Dr},{path:"/creditRating/edit/:id",name:"editRating",component:_r},{path:"/corporateCreditFile",name:"corporateCreditFile",component:Pr},{path:"/corporateCreditFile/adminLicenseInfo/",name:"adminLicenseInfo",component:Wr},{path:"/corporateCreditFile/adminPenaltyInfo/",name:"adminPenaltyInfo",component:Er},{path:"/corporateCreditFile/ratingInfo",name:"ratingInfo",component:oo},{path:"/corporateCreditFile/threeProduction/",name:"threeProduction",component:Zr},{path:"/redBlackList",name:"redBlackList",component:Ot}]},{path:"/login",name:"login",component:M},{path:"*",redirect:"/",hidden:!0}]}),Ef=jf,Uf=a("5c96"),qf=a.n(Uf);i["default"].filter("formatDate",(function(e){if(e)return Ze()(String(e)).format("YYYY-MM-DD")})),i["default"].filter("formatDateTime",(function(e){if(e)return Ze()(String(e)).format("YYYY-MM-DD HH:mm:ss")}));a("0fae"),a("0487"),a("b329");i["default"].use(qf.a),i["default"].config.productionTip=!1,new i["default"]({el:"#app",router:Ef,render:function(e){return e(p)}})},5822:function(e,t,a){"use strict";var i=a("d4df"),r=a.n(i);r.a},"587b":function(e,t,a){},5895:function(e,t,a){"use strict";var i=a("c63c"),r=a.n(i);r.a},"5ac9":function(e,t,a){"use strict";var i=a("d51e"),r=a.n(i);r.a},"5bcd":function(e,t,a){},"5c5e":function(e,t,a){},"5f6d":function(e,t,a){},"5ffa":function(e,t,a){},"629e":function(e,t,a){},"64a9":function(e,t,a){},"66ec":function(e,t,a){"use strict";var i=a("1f0c"),r=a.n(i);r.a},"67ec":function(e,t,a){"use strict";var i=a("9347"),r=a.n(i);r.a},"688b1":function(e,t,a){"use strict";var i=a("95f6"),r=a.n(i);r.a},"6b14":function(e,t,a){"use strict";var i=a("5bcd"),r=a.n(i);r.a},"6b6c":function(e,t,a){},"6ba7":function(e,t,a){},"6d0e":function(e,t,a){"use strict";var i=a("b128"),r=a.n(i);r.a},7056:function(e,t,a){"use strict";var i=a("629e"),r=a.n(i);r.a},"71f6":function(e,t,a){},7275:function(e,t,a){"use strict";var i=a("6ba7"),r=a.n(i);r.a},"74e1":function(e,t,a){},"752c":function(e,t,a){},7753:function(e,t,a){"use strict";var i=a("dd92"),r=a.n(i);r.a},"778e":function(e,t,a){"use strict";var i=a("0f7c"),r=a.n(i);r.a},"79b0":function(e,t,a){},"7fa2":function(e,t,a){"use strict";var i=a("32fc"),r=a.n(i);r.a},8062:function(e,t,a){},8067:function(e,t,a){"use strict";var i=a("4da2"),r=a.n(i);r.a},8367:function(e,t,a){"use strict";var i=a("0aca"),r=a.n(i);r.a},"83f6":function(e,t,a){},"88b2":function(e,t,a){},"8f31":function(e,t,a){},9347:function(e,t,a){},9556:function(e,t,a){"use strict";var i=a("d4be"),r=a.n(i);r.a},"95f6":function(e,t,a){},"9a32":function(e,t,a){"use strict";var i=a("8062"),r=a.n(i);r.a},"9acf":function(e,t,a){"use strict";var i=a("587b"),r=a.n(i);r.a},"9d64":function(e,t,a){e.exports=a.p+"img/logo.5c09a097.png"},ab24:function(e,t,a){},ad34:function(e,t,a){"use strict";var i=a("fb1a"),r=a.n(i);r.a},af98:function(e,t,a){"use strict";var i=a("ed37"),r=a.n(i);r.a},afd5:function(e,t,a){"use strict";var i=a("39d5"),r=a.n(i);r.a},b0dc0:function(e,t,a){"use strict";var i=a("5c5e"),r=a.n(i);r.a},b0e4:function(e,t,a){},b128:function(e,t,a){},b1af:function(e,t,a){},b2c3:function(e,t,a){"use strict";var i=a("be3e"),r=a.n(i);r.a},b322:function(e,t,a){},b329:function(e,t,a){},b3b5:function(e,t,a){"use strict";var i=a("5f6d"),r=a.n(i);r.a},b4e4:function(e,t,a){},bc14:function(e,t,a){"use strict";var i=a("8f31"),r=a.n(i);r.a},bc31:function(e,t,a){"use strict";var i=a("1f53"),r=a.n(i);r.a},bcd4:function(e,t,a){"use strict";var i=a("b1af"),r=a.n(i);r.a},bcf6:function(e,t,a){"use strict";var i=a("ab24"),r=a.n(i);r.a},bdeb:function(e,t,a){},be3e:function(e,t,a){},bf83:function(e,t,a){"use strict";var i=a("bdeb"),r=a.n(i);r.a},c548:function(e,t,a){"use strict";var i=a("2fc5"),r=a.n(i);r.a},c63c:function(e,t,a){},c8dc:function(e,t,a){},c8ed:function(e,t,a){"use strict";var i=a("71f6"),r=a.n(i);r.a},cc37:function(e,t,a){"use strict";var i=a("27b0"),r=a.n(i);r.a},cd02:function(e,t,a){"use strict";var i=a("f05b"),r=a.n(i);r.a},ce9c:function(e,t,a){"use strict";var i=a("dcc9"),r=a.n(i);r.a},d4be:function(e,t,a){},d4df:function(e,t,a){},d51e:function(e,t,a){},d53e:function(e,t,a){"use strict";var i=a("d784"),r=a.n(i);r.a},d784:function(e,t,a){},d942:function(e,t,a){},da3c:function(e,t,a){},dcc9:function(e,t,a){},dd92:function(e,t,a){},dfd2:function(e,t,a){"use strict";var i=a("5ffa"),r=a.n(i);r.a},e6e0:function(e,t,a){},e841:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJCODkyNEQ2Nzg4MzExRTk5NzAzQzAyMDI0Qzk2OEJCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJCODkyNEQ3Nzg4MzExRTk5NzAzQzAyMDI0Qzk2OEJCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkI4OTI0RDQ3ODgzMTFFOTk3MDNDMDIwMjRDOTY4QkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkI4OTI0RDU3ODgzMTFFOTk3MDNDMDIwMjRDOTY4QkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz74l6ZLAAABNUlEQVR42sxUW3HDMBCMiiAQxMCFYAiBYAY2g5aBzaCBEAYxA4tBBSFFoN5NVp3L5hznIx+9mZ2xz3vre0mhlLJ7pb3tXmx/giGEG4hFwShYBAVY4IsO/2paMpct75MgCwZBNP4o6PBtpJirDgvKcxIct0pTjmB5KIjMjhT4qYHAh2BPopMriHKyU7pm3AJzFTCcjNg7QQ0eiFyoh/tCDUefJ08wUbBmlJzeaZYtDSpVHbuHjYw/U/xlaziIaZ5d7MbxaRX50fgrsi3ZNHygNszEieDdlazElv6nE+3o/UScw42P1maGT0/DGX8+GK76L4JvQY+p+2tj9k7tZCfptKnDZMvqYtPRGzeOnWb2ZdfK62E1zSyglN65HHrcOj+yMu+rU3b80Ry9agm+uKYT/v2N/SvAAJaR5aP+3TZzAAAAAElFTkSuQmCC"},ed37:function(e,t,a){},efb3:function(e,t,a){"use strict";var i=a("83f6"),r=a.n(i);r.a},f05b:function(e,t,a){},f773:function(e,t,a){"use strict";var i=a("da3c"),r=a.n(i);r.a},fa39:function(e,t,a){"use strict";var i=a("6b6c"),r=a.n(i);r.a},faad:function(e,t,a){"use strict";var i=a("b4e4"),r=a.n(i);r.a},fb1a:function(e,t,a){}});
//# sourceMappingURL=app.522cd1fd.js.map