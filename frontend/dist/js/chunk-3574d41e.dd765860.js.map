{"version":3,"sources":["webpack:///./src/components/productionSubject/mainProduct/processDefinition/addProcessDefinition/addProcessDefinition.vue?358b","webpack:///./src/components/productionSubject/mainProduct/processDefinition/addProcessDefinition/addProcessDefinition.vue?8b8d","webpack:///src/components/productionSubject/mainProduct/processDefinition/addProcessDefinition/addProcessDefinition.vue","webpack:///./src/components/productionSubject/mainProduct/processDefinition/addProcessDefinition/addProcessDefinition.vue?2fa5","webpack:///./src/components/productionSubject/mainProduct/processDefinition/addProcessDefinition/addProcessDefinition.vue?1604"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","directives","name","rawName","value","expression","ref","ruleFormValue","rules","model","callback","$$v","$set","options","length","_l","item","key","label","staticStyle","on","$event","handleFileUpload","chooseFile","imageSelectedUrl","taskImages","imageUrl","_e","_s","file","onSubmit","goBack","staticRenderFns","data","listLoading","companyId","taskType","taskName","doShare","productId","created","$route","params","id","query","methods","$refs","click","files","reader","onload","that","e","target","result","readAsDataURL","formName","validate","valid","console","log","formData","FormData","append","$router","go","component"],"mappings":"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","file":"js/chunk-3574d41e.dd765860.js","sourcesContent":["import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addProcessDefinition.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addProcessDefinition.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_vm._v(\"监管对象\")]),_c('el-breadcrumb-item',[_vm._v(\"主营产品\")]),_c('el-breadcrumb-item',{staticClass:\"actived\"},[_vm._v(\"添加作业\")])],1)],1),_c('div',{staticClass:\"box\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],ref:\"ruleForm\",attrs:{\"model\":_vm.ruleFormValue,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"作业名称\",\"prop\":\"taskName\"}},[_c('el-input',{model:{value:(_vm.ruleFormValue.taskName),callback:function ($$v) {_vm.$set(_vm.ruleFormValue, \"taskName\", $$v)},expression:\"ruleFormValue.taskName\"}})],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"仓库地址\",\"prop\":\"taskType\"}},[_c('el-select',{attrs:{\"disabled\":!(_vm.options.length > 0)},model:{value:(_vm.ruleFormValue.taskType),callback:function ($$v) {_vm.$set(_vm.ruleFormValue, \"taskType\", $$v)},expression:\"ruleFormValue.taskType\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1)],1),_c('el-form-item',{staticClass:\"label-margin\",attrs:{\"label\":\"添加图片\",\"prop\":\"file\"}},[_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"file\",\"accept\":\"image/*\"},on:{\"change\":function($event){return _vm.handleFileUpload()}}}),_c('div',{staticStyle:{\"border\":\"solid 1px\",\"width\":\"100px\",\"height\":\"100px\"},on:{\"click\":function($event){return _vm.chooseFile()}}},[(!_vm.imageSelectedUrl && _vm.ruleFormValue.taskImages)?_c('img',{staticStyle:{\"width\":\"7rem\",\"height\":\"7rem\"},attrs:{\"src\":_vm.imageUrl + _vm.ruleFormValue.taskImages}}):_vm._e(),(_vm.imageSelectedUrl)?_c('img',{staticStyle:{\"width\":\"7rem\",\"height\":\"7rem\"},attrs:{\"src\":_vm.imageSelectedUrl}}):_vm._e()]),_c('div',{staticClass:\"item-value\"},[(_vm.file)?_c('div',{},[_vm._v(_vm._s(_vm.file.name))]):_c('div',{},[_vm._v(\"请选择需要上传的文件...\")])])]),_c('el-form-item',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.onSubmit('ruleForm')}}},[_vm._v(\"保存\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"title\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item>监管对象</el-breadcrumb-item>\r\n        <el-breadcrumb-item>主营产品</el-breadcrumb-item>\r\n        <el-breadcrumb-item class=\"actived\">添加作业</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n\r\n    <div class=\"box\">\r\n      <el-form\r\n        ref=\"ruleForm\"\r\n        :model=\"ruleFormValue\"\r\n        :rules=\"rules\"\r\n        label-width=\"100px\"\r\n        v-loading=\"listLoading\"\r\n      >\r\n        <el-row>\r\n          <el-col :span=\"6\">\r\n            <el-form-item label=\"作业名称\" prop=\"taskName\">\r\n              <el-input v-model=\"ruleFormValue.taskName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"6\">\r\n            <el-form-item label=\"仓库地址\" prop=\"taskType\">\r\n              <el-select v-model=\"ruleFormValue.taskType\" :disabled=\"!(options.length > 0)\">\r\n                <el-option\r\n                  v-for=\"item in options\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-form-item label=\"添加图片\" prop=\"file\" class=\"label-margin\">\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            style=\"display: none\"\r\n            ref=\"file\"\r\n            accept=\"image/*\"\r\n            v-on:change=\"handleFileUpload()\"\r\n          />\r\n          <div style=\"border:solid 1px; width:100px; height:100px\" @click=\"chooseFile()\">\r\n            <img\r\n              v-if=\"!imageSelectedUrl && ruleFormValue.taskImages\"\r\n              :src=\"imageUrl + ruleFormValue.taskImages\"\r\n              style=\"width: 7rem; height: 7rem;\"\r\n            />\r\n            <img v-if=\"imageSelectedUrl\" :src=\"imageSelectedUrl\" style=\"width: 7rem; height: 7rem;\" />\r\n          </div>\r\n          <div class=\"item-value\">\r\n            <div v-if=\"file\" style>{{ file.name }}</div>\r\n            <div v-else style>请选择需要上传的文件...</div>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button size=\"small\" type=\"success\" @click=\"onSubmit('ruleForm')\" plain>保存</el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"goBack\" plain>取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Request from \"../../../../../services/api/request.js\";\r\nexport default {\r\n  name: \"addProcessDefinition\",\r\n  data() {\r\n    return {\r\n      file: null,\r\n      listLoading: false,\r\n      imageUrl: \"\",\r\n      imageSelectedUrl: \"\",\r\n      companyId: -1,\r\n      ruleFormValue: {\r\n        file: null,\r\n        taskType: \"\",\r\n        taskName: \"\",\r\n        taskImages: \"\",\r\n        doShare: \"\",\r\n        productId: 0\r\n      },\r\n      rules: {\r\n        taskName: [\r\n          {\r\n            required: true,\r\n            message: \"请插入\",\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        taskType: [\r\n          {\r\n            required: true,\r\n            message: \"请插入\",\r\n            trigger: \"change\"\r\n          }\r\n        ]\r\n      },\r\n      options: [\r\n        { value: \"1\", label: \"收获前\" },\r\n        { value: \"2\", label: \"收获\" },\r\n        { value: \"3\", label: \"收获后\" }\r\n      ]\r\n    };\r\n  },\r\n  created() {\r\n    this.ruleFormValue.productId = this.$route.params.id;\r\n    this.ruleFormValue.doShare = this.$route.query.doShare;\r\n    this.companyId = this.$route.query.companyId;\r\n  },\r\n  methods: {\r\n    chooseFile() {\r\n      this.$refs.file.click();\r\n    },\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n      let reader = new FileReader();\r\n      this.imageSelectedUrl = \"\";\r\n      let that = this;\r\n      reader.onload = function(e) {\r\n        that.imageSelectedUrl = e.target.result;\r\n      };\r\n      if (this.file) {\r\n        reader.readAsDataURL(this.file);\r\n      }\r\n    },\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          var formData = new FormData();\r\n          formData.append(\"doShare\", this.ruleFormValue.doShare);\r\n          formData.append(\"id\", \"0\");\r\n          formData.append(\"productId\", this.ruleFormValue.productId);\r\n          formData.append(\"taskName\", this.ruleFormValue.taskName);\r\n          formData.append(\"taskType\", this.ruleFormValue.taskType);\r\n          formData.append(\"file\", this.file);\r\n          this.listLoading = true;\r\n          Request()\r\n            .post(\"/api/product_task/create\", formData)\r\n            .then(response => {\r\n              setTimeout(() => {\r\n                this.listLoading = false;\r\n              }, 0.5 * 1000);\r\n              this.goBack();\r\n            })\r\n            .catch(error => {});\r\n        } else {\r\n          console.log(\"错误 !!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../processDefinition.scss\";\r\n</style>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addProcessDefinition.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addProcessDefinition.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addProcessDefinition.vue?vue&type=template&id=a0d22b3c&\"\nimport script from \"./addProcessDefinition.vue?vue&type=script&lang=js&\"\nexport * from \"./addProcessDefinition.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addProcessDefinition.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}