(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d107f678"],{"0a49":function(e,t,r){var o=r("9b43"),i=r("626a"),a=r("4bf8"),n=r("9def"),l=r("cd1c");e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,s=4==e,d=6==e,p=5==e||d,m=t||l;return function(t,l,f){for(var v,b,g=a(t),h=i(g),F=o(l,f,3),y=n(h.length),V=0,w=r?m(t,y):u?m(t,0):void 0;y>V;V++)if((p||V in h)&&(v=h[V],b=F(v,V,g),e))if(r)w[V]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return V;case 2:w.push(v)}else if(s)return!1;return d?-1:c||s?s:w}}},1169:function(e,t,r){var o=r("2d95");e.exports=Array.isArray||function(e){return"Array"==o(e)}},"4c5a":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("生产记录")]),r("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加记录")])],1)],1),r("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("span",[r("i",{staticClass:"el-icon-warning"},[e._v(" 选择文件 !!!")])]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]),r("div",{staticClass:"box"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"120px"}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleFormValue.productId,callback:function(t){e.$set(e.ruleFormValue,"productId",t)},expression:"ruleFormValue.productId"}},e._l(e.productNameList,(function(e){return r("el-option",{key:e.productId,attrs:{label:e.productName,value:e.productId}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"产量",prop:"productionQuantity"}},[r("el-input",{model:{value:e.ruleFormValue.productionQuantity,callback:function(t){e.$set(e.ruleFormValue,"productionQuantity",e._n(t))},expression:"ruleFormValue.productionQuantity"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"产地",prop:"productionArea"}},[r("el-input",{model:{value:e.ruleFormValue.productionArea,callback:function(t){e.$set(e.ruleFormValue,"productionArea",t)},expression:"ruleFormValue.productionArea"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"生产时长(天)",prop:"productionTime"}},[r("el-input",{model:{value:e.ruleFormValue.productionTime,callback:function(t){e.$set(e.ruleFormValue,"productionTime",e._n(t))},expression:"ruleFormValue.productionTime"}})],1)],1)],1),r("el-form-item",[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"item",staticStyle:{display:"flex"}},[r("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[r("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),r("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),r("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.ruleFormValue.file?r("span",[e._v("("+e._s(e.ruleFormValue.file.name)+")")]):r("span",[e._v("请选择需要上传的文件...")])])])])],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),r("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},i=[],a=(r("7514"),r("55a1")),n=(r("d1a0"),{name:"addProductionRecord",data:function(){return{productNameList:[],listLoading:!1,ruleFormValue:{productId:"",productionQuantity:"",productionArea:"",productionTime:"",file:null},dialogVisible:!1,rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],productionQuantity:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],productionArea:[{required:!0,message:"请插入"}],productionTime:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]}}},created:function(){this.getProductionDetail()},methods:{getProductionDetail:function(){var e=this;Object(a["a"])().get("/api/product_production/all",{sortBy:"productId"}).then((function(t){e.productNameList=t.data})).catch((function(e){console.log(e)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var r=new FormData;r=t.makeFormData(),Object(a["a"])().post("/api/production_record/create",r).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/productionRecord"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.ruleFormValue.file&&e.append("file",this.ruleFormValue.file),e.append("id",0),e.append("productId",this.ruleFormValue.productId);var t=this.filterProduct(this.ruleFormValue.productId);return e.append("productName",t),e.append("productionArea",this.ruleFormValue.productionArea),e.append("productionQuantity",this.ruleFormValue.productionQuantity),e.append("productionTime",this.ruleFormValue.productionTime),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.ruleFormValue.file=this.$refs.file.files[0]},filterProduct:function(e){var t=this.productNameList.find((function(t){return t.productId===e}));return t?t.productName:""}}}),l=n,u=r("2877"),c=Object(u["a"])(l,o,i,!1,null,null,null);t["default"]=c.exports},7514:function(e,t,r){"use strict";var o=r("5ca1"),i=r("0a49")(5),a="find",n=!0;a in[]&&Array(1)[a]((function(){n=!1})),o(o.P+o.F*n,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(a)},cd1c:function(e,t,r){var o=r("e853");e.exports=function(e,t){return new(o(e))(t)}},e853:function(e,t,r){var o=r("d3f4"),i=r("1169"),a=r("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-d107f678.e856179b.js.map