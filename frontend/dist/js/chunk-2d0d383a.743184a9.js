(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d383a"],{"5ca7":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"container"},[l("div",{staticClass:"title"},[l("el-breadcrumb",{attrs:{separator:"/"}},[l("el-breadcrumb-item",[e._v("工作任务")]),l("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加工作任务")])],1)],1),l("div",{staticClass:"box"},[l("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:e.ruleFormValue,rules:e.rules,"label-width":"100px"}},[l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"发布日期",prop:"releaseTime"}},[l("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"开始日期"},model:{value:e.ruleFormValue.releaseTime,callback:function(t){e.$set(e.ruleFormValue,"releaseTime",t)},expression:"ruleFormValue.releaseTime"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"发布者",prop:"releasePerson"}},[l("el-input",{model:{value:e.ruleFormValue.releasePerson,callback:function(t){e.$set(e.ruleFormValue,"releasePerson",t)},expression:"ruleFormValue.releasePerson"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"标题",prop:"title"}},[l("el-input",{model:{value:e.ruleFormValue.title,callback:function(t){e.$set(e.ruleFormValue,"title",t)},expression:"ruleFormValue.title"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"内容",prop:"content"}},[l("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.ruleFormValue.content,callback:function(t){e.$set(e.ruleFormValue,"content",t)},expression:"ruleFormValue.content"}})],1)],1)],1),l("el-row",[l("el-form-item",[l("div",{staticClass:"item",staticStyle:{display:"flex"}},[l("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[l("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),l("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(t){return e.chooseFile()}}},[e._v("添加附件")])],1),l("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[e.file?l("span",[e._v(e._s(e.file.name))]):l("span",[e._v("请选择需要上传的文件...")])])])])],1),l("el-form-item",[l("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("保存")]),l("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},r=[],i=l("55a1"),s=(l("d1a0"),{name:"addWorkTask",data:function(){return{file:null,ruleFormValue:{releaseTime:"",releasePerson:"",title:"",content:""},listLoading:!1,rules:{releaseTime:[{required:!0,message:"请选择",trigger:"change"}],releasePerson:[{required:!0,message:"请插入",trigger:"change"}],title:[{required:!0,message:"请插入",trigger:"change"}],content:[{required:!0,message:"请插入",trigger:"change"}]}}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.listLoading=!0;var l=new FormData;l=t.makeFormData(),Object(i["a"])().post("/api/work_task/create",l).then((function(e){setTimeout((function(){t.listLoading=!1}),500),t.$router.push({path:"/workTask"})})).catch((function(e){console.log(e)}))}}))},makeFormData:function(){var e=new FormData;this.file&&e.append("file",this.file),e.append("id",0),this.ruleFormValue.releaseTime=new Date(this.ruleFormValue.releaseTime).toDateString("YYYY-MM-DD"),e.append("releaseTime",this.ruleFormValue.releaseTime),e.append("releasePerson",this.ruleFormValue.releasePerson),e.append("title",this.ruleFormValue.title),e.append("content",this.ruleFormValue.content);var t=(new Date).toDateString("YYYY-MM-DD");return e.append("createTime",t),e},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]}}}),n=s,o=l("2877"),u=Object(o["a"])(n,a,r,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0d383a.743184a9.js.map