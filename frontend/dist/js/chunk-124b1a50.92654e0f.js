(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-124b1a50"],{"0a49":function(t,e,r){var o=r("9b43"),a=r("626a"),i=r("4bf8"),n=r("9def"),u=r("cd1c");t.exports=function(t,e){var r=1==t,l=2==t,c=3==t,d=4==t,s=6==t,p=5==t||s,m=e||u;return function(e,u,f){for(var v,h,g=i(e),b=a(g),y=o(u,f,3),F=n(b.length),w=0,V=r?m(e,F):l?m(e,0):void 0;F>w;w++)if((p||w in b)&&(v=b[w],h=y(v,w,g),t))if(r)V[w]=h;else if(h)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:V.push(v)}else if(d)return!1;return s?-1:c||d?d:V}}},1169:function(t,e,r){var o=r("2d95");t.exports=Array.isArray||function(t){return"Array"==o(t)}},7514:function(t,e,r){"use strict";var o=r("5ca1"),a=r("0a49")(5),i="find",n=!0;i in[]&&Array(1)[i]((function(){n=!1})),o(o.P+o.F*n,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(i)},c222:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[t._v("生产记录")]),r("el-breadcrumb-item",{staticClass:"actived"},[t._v("修改记录")])],1)],1),t.data?r("div",{staticClass:"box"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],ref:"ruleForm",attrs:{model:t.ruleFormValue,rules:t.rules,"label-width":"120px"}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.ruleFormValue.productId,callback:function(e){t.$set(t.ruleFormValue,"productId",e)},expression:"ruleFormValue.productId"}},t._l(t.productNameList,(function(t){return r("el-option",{key:t.productId,attrs:{label:t.productName,value:t.productId}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"产量",prop:"productionQuantity"}},[r("el-input",{model:{value:t.ruleFormValue.productionQuantity,callback:function(e){t.$set(t.ruleFormValue,"productionQuantity",t._n(e))},expression:"ruleFormValue.productionQuantity"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"产地",prop:"productionArea"}},[r("el-input",{model:{value:t.ruleFormValue.productionArea,callback:function(e){t.$set(t.ruleFormValue,"productionArea",e)},expression:"ruleFormValue.productionArea"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"生产时长(天)",prop:"productionTime"}},[r("el-input",{model:{value:t.ruleFormValue.productionTime,callback:function(e){t.$set(t.ruleFormValue,"productionTime",t._n(e))},expression:"ruleFormValue.productionTime"}})],1)],1)],1),r("el-form-item",[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"item",staticStyle:{display:"flex"}},[r("div",{staticClass:"item-label",staticStyle:{"margin-bottom":"20px"}},[r("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(e){return t.handleFileUpload()}}}),r("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:function(e){return t.chooseFile()}}},[t._v("添加附件")])],1),r("div",{staticClass:"item-value",staticStyle:{"margin-left":"10px",display:"flex","align-items":"center","padding-bottom":"20px"}},[t.file?r("span",[t._v("("+t._s(t.file.name)+")")]):t.data.productionProfiles?r("div",{staticClass:"item-value"},[r("el-link",{on:{click:function(e){return t.downloadFile()}}},[t._v("\n                  "+t._s(t.data.productionProfiles.replace("/uploads/",""))+"\n                ")])],1):t._e()])])])],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(e){return t.onSubmit("ruleForm")}}},[t._v("保存")]),r("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")])],1)],1)],1):r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"box"},[t._v("装货...")])])},a=[],i=(r("a481"),r("7514"),r("55a1")),n=r("d1a0"),u=r("bc3a"),l=r.n(u),c={name:"editProductionRecord",data:function(){return{file:null,id:"",pageLoading:!1,listLoading:!1,data:null,productNameList:[],ruleFormValue:{productId:"",productionQuantity:"",productionArea:"",productionTime:""},rules:{productId:[{required:!0,message:"请选择",trigger:"change"}],productionQuantity:[{required:!0,message:"请插入"},{type:"number",message:"插入号码"}],productionArea:[{required:!0,message:"请插入"}],productionTime:[{required:!0,message:"请插入",trigger:"change"},{type:"number",message:"插入号码"}]}}},created:function(){this.getProductionDetail(),this.getData(this.$route.params.id)},methods:{getData:function(t){var e=this;this.listLoading=!0,Object(i["a"])().get("/api/production_record/get/"+t).then((function(t){setTimeout((function(){e.listLoading=!1}),500),e.data=t,e.ruleFormValue.productId=e.data.productId,e.ruleFormValue.productionQuantity=e.data.productionQuantity,e.ruleFormValue.productionArea=e.data.productionArea,e.ruleFormValue.productionTime=e.data.productionTime})).catch((function(t){console.log(t)}))},getProductionDetail:function(){var t=this;Object(i["a"])().get("/api/product_production/all",{sortBy:"productId"}).then((function(e){t.productNameList=e.data})).catch((function(t){console.log(t)}))},onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){e.pageLoading=!0;var r=new FormData;r=e.makeFormData(),Object(i["a"])().put("/api/production_record/update/"+e.data.id,r).then((function(t){setTimeout((function(){e.pageLoading=!1}),500),e.$router.push({path:"/productionRecord"})})).catch((function(t){console.log(t)}))}}))},makeFormData:function(){var t=new FormData;this.file&&t.append("file",this.file),t.append("id",this.data.id),t.append("productId",this.ruleFormValue.productId);var e=this.filterProduct(this.ruleFormValue.productId);return t.append("productName",e),t.append("productionArea",this.ruleFormValue.productionArea),t.append("productionQuantity",this.ruleFormValue.productionQuantity),t.append("productionTime",this.ruleFormValue.productionTime),t},chooseFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},filterProduct:function(t){var e=this.productNameList.find((function(e){return e.productId===t}));return e?e.productName:""},downloadFile:function(){var t=this;l()({url:n["b"].DOWNLOAD_URL()+this.data.productionProfiles,method:"GET",responseType:"blob"}).then((function(e){var r=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=r,o.setAttribute("download",t.data.productionProfiles.replace("/uploads/","")),document.body.appendChild(o),o.click(),o.remove()}))}}},d=c,s=r("2877"),p=Object(s["a"])(d,o,a,!1,null,null,null);e["default"]=p.exports},cd1c:function(t,e,r){var o=r("e853");t.exports=function(t,e){return new(o(t))(e)}},e853:function(t,e,r){var o=r("d3f4"),a=r("1169"),i=r("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),o(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-124b1a50.92654e0f.js.map