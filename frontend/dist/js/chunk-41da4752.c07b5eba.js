(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41da4752","chunk-2d0e2754"],{"7f7f":function(e,a,t){var i=t("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,l="name";l in n||t("9e1e")&&i(n,l,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},c998:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("div",{staticClass:"title"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("作业定义")]),t("el-breadcrumb-item",{staticClass:"actived"},[e._v("添加作业")])],1)],1),t("div",{staticClass:"box"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{staticClass:"job-name-width",attrs:{prop:"jobName",label:"作业名称"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.jobName,callback:function(a){e.$set(e.addForm,"jobName",a)},expression:"addForm.jobName"}})],1),t("el-form-item",{attrs:{label:"作业类型",prop:"jobType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.jobType,callback:function(a){e.$set(e.addForm,"jobType",a)},expression:"addForm.jobType"}},e._l(e.jobTypes,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"现场图片"}},[t("div",{staticClass:"image-container",on:{click:function(a){return e.chooseFile()}}},e._l(e.images,(function(e){return t("img",{key:e,staticClass:"preview",attrs:{src:e}})})),0),t("p",[e._v(e._s(e.fileName))]),t("div",{staticClass:"image-box"},[t("input",{ref:"file_live_1",staticClass:"image-upload",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"image/*",name:"images"},on:{change:function(a){return e.handleFileUpload()}}})])]),t("el-form-item",{attrs:{label:""}},[t("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(a){return e.onSubmit("addForm")}}},[e._v("\n              保存\n          ")]),t("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(a){return e.$router.go(-1)}}},[e._v("\n              取消\n          ")])],1)],1)],1)])},n=[],o=(t("7f7f"),t("55a1")),l=(t("d1a0"),{data:function(){return{addForm:{jobName:"",jobType:""},jobTypes:[{id:0,name:"收获前"},{id:1,name:"收获"},{id:2,name:"收获后"}],rules:{jobName:[{required:!0,message:"请插入",trigger:"change"}],jobType:[{required:!0,message:"请选择",trigger:"change"}]},images:[],fileName:"",file_live_1:null,dataLoading:!1}},mounted:function(){},methods:{onSubmit:function(e){var a=this;this.$refs[e].validate((function(e){if(e){a.dataLoading=!0;var t=new FormData;t=a.makeFormData(),Object(o["a"])().post("/api/job_definition/create",t).then((function(e){a.$router.push({path:"/jobDefinition"}),setTimeout((function(){a.dataLoading=!1}),10)})).catch((function(e){}))}}))},chooseFile:function(){document.getElementById("file").click()},handleFileUpload:function(){this.file_live_1=this.$refs.file_live_1.files[0],this.images=[];var e=new FileReader,a=this;e.onload=function(e){a.images.push(e.target.result)},e.readAsDataURL(this.file_live_1),this.fileName=this.file_live_1.name},makeFormData:function(){var e=new FormData;return e.append("jobName",this.addForm.jobName),e.append("jobType",this.addForm.jobType),e.append("file",this.file_live_1),e.append("id",0),e}}}),r=l,s=t("2877"),d=Object(s["a"])(r,i,n,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-41da4752.c07b5eba.js.map