{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/jobDefinition/addJobDefinition/addJobDefinition.vue?6875","webpack:///src/components/jobDefinition/addJobDefinition/addJobDefinition.vue","webpack:///./src/components/jobDefinition/addJobDefinition/addJobDefinition.vue?bda1","webpack:///./src/components/jobDefinition/addJobDefinition/addJobDefinition.vue"],"names":["dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","directives","name","rawName","value","expression","ref","addForm","rules","model","callback","$$v","$set","_l","item","key","id","on","$event","chooseFile","src","_s","fileName","staticStyle","handleFileUpload","onSubmit","$router","go","staticRenderFns","data","mounted","methods","document","getElementById","click","makeFormData","component"],"mappings":"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","file":"js/chunk-41da4752.c07b5eba.js","sourcesContent":["var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_vm._v(\"作业定义\")]),_c('el-breadcrumb-item',{staticClass:\"actived\"},[_vm._v(\"添加作业\")])],1)],1),_c('div',{staticClass:\"box\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.dataLoading),expression:\"dataLoading\"}],ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{staticClass:\"job-name-width\",attrs:{\"prop\":\"jobName\",\"label\":\"作业名称\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.addForm.jobName),callback:function ($$v) {_vm.$set(_vm.addForm, \"jobName\", $$v)},expression:\"addForm.jobName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"作业类型\",\"prop\":\"jobType\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.addForm.jobType),callback:function ($$v) {_vm.$set(_vm.addForm, \"jobType\", $$v)},expression:\"addForm.jobType\"}},_vm._l((_vm.jobTypes),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"现场图片\"}},[_c('div',{staticClass:\"image-container\",on:{\"click\":function($event){return _vm.chooseFile()}}},_vm._l((_vm.images),function(src){return _c('img',{key:src,staticClass:\"preview\",attrs:{\"src\":src}})}),0),_c('p',[_vm._v(_vm._s(_vm.fileName))]),_c('div',{staticClass:\"image-box\"},[_c('input',{ref:\"file_live_1\",staticClass:\"image-upload\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"file\",\"accept\":\"image/*\",\"name\":\"images\"},on:{\"change\":function($event){return _vm.handleFileUpload()}}})])]),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.onSubmit('addForm')}}},[_vm._v(\"\\n              保存\\n          \")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"\\n              取消\\n          \")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"title\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item>作业定义</el-breadcrumb-item>\r\n        <el-breadcrumb-item class=\"actived\">添加作业</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n\r\n    <div class=\"box\">\r\n      <el-form \r\n        ref=\"addForm\" \r\n        :model=\"addForm\" \r\n        :rules=\"rules\" \r\n        label-width=\"120px\"\r\n        v-loading=\"dataLoading\"\r\n      >\r\n        <el-form-item prop=\"jobName\" label=\"作业名称\" class=\"job-name-width\">\r\n            <el-input \r\n                v-model=\"addForm.jobName\" \r\n                auto-complete=\"off\"\r\n            >\r\n            </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"作业类型\" prop=\"jobType\">\r\n            <el-select v-model=\"addForm.jobType\" placeholder=\"请选择\">\r\n                <el-option\r\n                    v-for=\"item in jobTypes\"\r\n                    :key=\"item.id\"\r\n                    :label=\"item.name\"\r\n                    :value=\"item.id\"\r\n                >\r\n                </el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"现场图片\">\r\n            <div \r\n                @click=\"chooseFile()\"\r\n                class=\"image-container\"\r\n            >\r\n                <img \r\n                    v-for=\"src in images\" \r\n                    :src=\"src\" \r\n                    :key=\"src\" \r\n                    class=\"preview\"\r\n                >\r\n            </div>\r\n            <p>{{ fileName }}</p>\r\n            <div class=\"image-box\">\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"file\"\r\n                    ref=\"file_live_1\"\r\n                    class=\"image-upload\"\r\n                    accept=\"image/*\"\r\n                    v-on:change=\"handleFileUpload()\"\r\n                    name=\"images\"\r\n                    style=\"display:none\"\r\n                />\r\n            </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n            <el-button size=\"small\" type=\"success\" plain @click=\"onSubmit('addForm')\">\r\n                保存\r\n            </el-button>\r\n            <el-button size=\"small\" type=\"danger\" plain v-on:click=\"$router.go(-1)\">\r\n                取消\r\n            </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Request from \"../../../services/api/request.js\";\r\nimport { Urls } from \"../../../services/constants\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n        addForm: {\r\n            jobName: \"\",\r\n            jobType: \"\",\r\n        },\r\n        jobTypes: [\r\n            { id: 0, name: \"收获前\" },\r\n            { id: 1, name: \"收获\" },\r\n            { id: 2, name: \"收获后\" }\r\n        ],\r\n        rules: {\r\n            jobName: [\r\n            {\r\n                required: true,\r\n                message: \"请插入\",\r\n                trigger: \"change\"\r\n            }],\r\n            jobType: [\r\n            {\r\n                required: true,\r\n                message: \"请选择\",\r\n                trigger: \"change\"\r\n            }],\r\n        },\r\n        images:[],\r\n        fileName: '',\r\n        file_live_1: null,\r\n        dataLoading: false\r\n\r\n    };\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    onSubmit(formName) {\r\n        this.$refs[formName].validate(valid => {\r\n            if (valid) {\r\n                this.dataLoading = true;\r\n                var formData = new FormData();\r\n                formData = this.makeFormData();\r\n                Request()\r\n                    .post(\"/api/job_definition/create\", formData)\r\n                    .then(response => {\r\n                        this.$router.push({ path: \"/jobDefinition\" });\r\n                        setTimeout(() => {\r\n                            this.dataLoading = false;\r\n                        }, 0.01 * 1000);\r\n                    })\r\n                    .catch(error => {});\r\n            }\r\n        });\r\n    },\r\n    chooseFile() {\r\n      document.getElementById('file').click()\r\n    },\r\n    handleFileUpload() {\r\n        this.file_live_1 = this.$refs.file_live_1.files[0];\r\n        this.images = [];\r\n        let reader = new FileReader();\r\n        let that = this;\r\n        reader.onload = function (e) {\r\n            that.images.push(e.target.result);\r\n\r\n        }\r\n        reader.readAsDataURL(this.file_live_1); \r\n        this.fileName = this.file_live_1.name;\r\n    },\r\n    makeFormData() {\r\n        var mainFormData = new FormData();\r\n        mainFormData.append(\"jobName\", this.addForm.jobName);\r\n        mainFormData.append(\"jobType\", this.addForm.jobType);\r\n        mainFormData.append(\"file\", this.file_live_1);\r\n        mainFormData.append(\"id\", 0);\r\n        return mainFormData;\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addJobDefinition.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addJobDefinition.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addJobDefinition.vue?vue&type=template&id=1b3f0a80&\"\nimport script from \"./addJobDefinition.vue?vue&type=script&lang=js&\"\nexport * from \"./addJobDefinition.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}