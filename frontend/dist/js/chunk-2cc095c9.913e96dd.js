(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cc095c9","chunk-2d0e2754"],{3846:function(t,r,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},5920:function(t,r,e){"use strict";e.r(r);var o=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"container"},[e("div",{staticClass:"title"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("监管对象")]),e("el-breadcrumb-item",[t._v("主营产品")]),e("el-breadcrumb-item",{staticClass:"actived"},[t._v("修改属性")])],1)],1),e("div",{staticClass:"box"},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ruleForm",attrs:{model:t.ruleFormValue,rules:t.rules,"label-width":"100px"}},[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"属性名称",prop:"propertyName"}},[e("el-input",{model:{value:t.ruleFormValue.propertyName,callback:function(r){t.$set(t.ruleFormValue,"propertyName",r)},expression:"ruleFormValue.propertyName"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"属性可选项",prop:"propertyOptions"}},[e("el-input",{attrs:{disabled:""},model:{value:t.ruleFormValue.propertyOptions,callback:function(r){t.$set(t.ruleFormValue,"propertyOptions",r)},expression:"ruleFormValue.propertyOptions"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"属性排序",prop:"propertySort"}},[e("el-input",{attrs:{type:"number"},model:{value:t.ruleFormValue.propertySort,callback:function(r){t.$set(t.ruleFormValue,"propertySort",r)},expression:"ruleFormValue.propertySort"}})],1)],1)],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(r){return t.$router.push({path:"/productionSubject/mainProduct/productProperty/editProductProperty/customProductProperty/"+t.ruleFormValue.id,query:{productId:t.ruleFormValue.productId,optionData:t.optionList,companyId:t.companyId,sortFlag:t.sortFlag}})}}},[t._v("编辑选项")]),e("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(r){return t.onSubmit("ruleForm")}}},[t._v("保存")]),e("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:t.goBack}},[t._v("取消")])],1)],1)],1)])},a=[],u=(e("28a5"),e("a481"),e("6b54"),e("7f7f"),e("55a1")),l={name:"editProductProperty",data:function(){return{listLoading:!1,companyId:-1,optionList:[],sortFlag:1,ruleFormValue:{propertyName:"",propertyOptions:"",propertySort:null,productId:0,doShare:"",id:-1},rules:{propertyName:[{required:!0,message:"请插入",trigger:"change"}],propertySort:[{required:!0,message:"请插入",trigger:"change"}]},customValue:0,optionData:null}},created:function(){this.ruleFormValue.productId=this.$route.query.productId,this.companyId=this.$route.query.companyId,this.ruleFormValue.id=this.$route.params.id,this.customValue=this.$route.query.customValue,0==this.customValue?this.getProductPropertyInfo():this.getCustomValue()},methods:{getCustomValue:function(){var t=this;if(this.ruleFormValue.optionData=this.$route.query.optionData,null==this.ruleFormValue.optionData)this.getProductPropertyInfo();else{this.ruleFormValue.propertyOptions=this.ruleFormValue.optionData[0].name;for(var r=1;r<this.ruleFormValue.optionData.length;r++)this.ruleFormValue.propertyOptions=this.ruleFormValue.propertyOptions+","+this.ruleFormValue.optionData[r].name;this.splitStatus(this.ruleFormValue.propertyOptions),this.listLoading=!0,Object(u["a"])().get("/api/product_property/get/"+this.$route.params.id).then((function(r){setTimeout((function(){t.listLoading=!1}),50),t.ruleFormValue.propertyName=r.propertyName,t.ruleFormValue.propertySort=parseInt(r.propertySort)})).catch((function(t){console.log(t)}))}},getProductPropertyInfo:function(){var t=this;this.listLoading=!0,Object(u["a"])().get("/api/product_property/get/"+this.ruleFormValue.id).then((function(r){setTimeout((function(){t.listLoading=!1}),50),t.ruleFormValue.propertyName=r.propertyName,t.ruleFormValue.propertyOptions=r.propertyOptions,t.splitStatus(t.ruleFormValue.propertyOptions),t.ruleFormValue.propertySort=parseInt(r.propertySort),t.ruleFormValue.doShare=r.doShare})).catch((function(t){}))},onSubmit:function(t){var r=this;this.$refs[t].validate((function(t){if(!t)return console.log("错误 !!"),!1;var e={productId:r.ruleFormValue.productId,propertyName:r.ruleFormValue.propertyName,propertyOptions:r.ruleFormValue.propertyOptions,propertySort:r.ruleFormValue.propertySort.toString(),doShare:r.ruleFormValue.doShare};r.listLoading=!0,Object(u["a"])().put("/api/product_property/update/"+r.ruleFormValue.id,e).then((function(t){setTimeout((function(){r.listLoading=!1}),50),r.$router.push({path:"/productionSubject/mainProduct/productProperty/".concat(r.companyId),query:{productId:r.ruleFormValue.productId}})})).catch((function(t){}))}))},goBack:function(){this.$router.push({path:"/productionSubject/mainProduct/productProperty/".concat(this.companyId),query:{productId:this.ruleFormValue.productId}})},splitStatus:function(t){var r=t.replace(" ",""),e=r.split(",");for(var o in e)this.optionList.push({id:parseInt(o),name:e[o]})}}},i=l,p=e("2877"),n=Object(p["a"])(i,o,a,!1,null,"dbf659e6",null);r["default"]=n.exports},"6b54":function(t,r,e){"use strict";e("3846");var o=e("cb7c"),a=e("0bfb"),u=e("9e1e"),l="toString",i=/./[l],p=function(t){e("2aba")(RegExp.prototype,l,t,!0)};e("79e5")((function(){return"/a/b"!=i.call({source:"a",flags:"b"})}))?p((function(){var t=o(this);return"/".concat(t.source,"/","flags"in t?t.flags:!u&&t instanceof RegExp?a.call(t):void 0)})):i.name!=l&&p((function(){return i.call(this)}))},"7f7f":function(t,r,e){var o=e("86cc").f,a=Function.prototype,u=/^\s*function ([^ (]*)/,l="name";l in a||e("9e1e")&&o(a,l,{configurable:!0,get:function(){try{return(""+this).match(u)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-2cc095c9.913e96dd.js.map